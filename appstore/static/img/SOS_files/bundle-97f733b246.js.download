!function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=r[a]={exports:{}};t[a][0].call(u.exports,function(e){var r=t[a][1][e];return i(r?r:e)},u,u.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,r){!function(e,t){"use strict";function r(e,t,r){if(!e)throw me("areq","Argument '{0}' is {1}",t||"?",r||"required");return e}function n(e,t){return e||t?e?t?(Q(e)&&(e=e.join(" ")),Q(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function i(e){var t={};return e&&(e.to||e.from)&&(t.to=e.to,t.from=e.from),t}function o(e,t,r){var n="";return e=Q(e)?e:e&&ee(e)&&e.length?e.split(/\s+/):[],W(e,function(e,i){e&&e.length>0&&(n+=i>0?" ":"",n+=r?t+e:e+t)}),n}function a(e,t){var r=e.indexOf(t);t>=0&&e.splice(r,1)}function s(e){if(e instanceof re)switch(e.length){case 0:return e;case 1:if(e[0].nodeType===F)return e;break;default:return re(c(e))}if(e.nodeType===F)return re(e)}function c(e){if(!e[0])return e;for(var t=0;t<e.length;t++){var r=e[t];if(r.nodeType===F)return r}}function l(e,t,r){W(t,function(t){e.addClass(t,r)})}function u(e,t,r){W(t,function(t){e.removeClass(t,r)})}function d(e){return function(t,r){r.addClass&&(l(e,t,r.addClass),r.addClass=null),r.removeClass&&(u(e,t,r.removeClass),r.removeClass=null)}}function p(e){if(e=e||{},!e.$$prepared){var t=e.domOperation||ne;e.domOperation=function(){e.$$domOperationFired=!0,t(),t=ne},e.$$prepared=!0}return e}function f(e,t){h(e,t),m(e,t)}function h(e,t){t.from&&(e.css(t.from),t.from=null)}function m(e,t){t.to&&(e.css(t.to),t.to=null)}function g(e,t,r){var n=t.options||{},i=r.options||{},o=(n.addClass||"")+" "+(i.addClass||""),a=(n.removeClass||"")+" "+(i.removeClass||""),s=v(e.attr("class"),o,a);i.preparationClasses&&(n.preparationClasses=T(i.preparationClasses,n.preparationClasses),delete i.preparationClasses);var c=n.domOperation!==ne?n.domOperation:null;return G(n,i),c&&(n.domOperation=c),s.addClass?n.addClass=s.addClass:n.addClass=null,s.removeClass?n.removeClass=s.removeClass:n.removeClass=null,t.addClass=n.addClass,t.removeClass=n.removeClass,n}function v(e,t,r){function n(e){ee(e)&&(e=e.split(" "));var t={};return W(e,function(e){e.length&&(t[e]=!0)}),t}var i=1,o=-1,a={};e=n(e),t=n(t),W(t,function(e,t){a[t]=i}),r=n(r),W(r,function(e,t){a[t]=a[t]===i?null:o});var s={addClass:"",removeClass:""};return W(a,function(t,r){var n,a;t===i?(n="addClass",a=!e[r]||e[r+U]):t===o&&(n="removeClass",a=e[r]||e[r+L]),a&&(s[n].length&&(s[n]+=" "),s[n]+=r)}),s}function y(e){return e instanceof re?e[0]:e}function b(e,t,r){var n="";t&&(n=o(t,B,!0)),r.addClass&&(n=T(n,o(r.addClass,L))),r.removeClass&&(n=T(n,o(r.removeClass,U))),n.length&&(r.preparationClasses=n,e.addClass(n))}function S(e,t){t.preparationClasses&&(e.removeClass(t.preparationClasses),t.preparationClasses=null),t.activeClasses&&(e.removeClass(t.activeClasses),t.activeClasses=null)}function _(e,t){var r=t?"-"+t+"s":"";return E(e,[fe,r]),[fe,r]}function w(e,t){var r=t?"paused":"",n=M+le;return E(e,[n,r]),[n,r]}function E(e,t){var r=t[0],n=t[1];e.style[r]=n}function T(e,t){return e?t?e+" "+t:e:t}function O(e){return[pe,e+"s"]}function I(e,t){var r=t?de:fe;return[r,e+"s"]}function P(e,t,r){var n=Object.create(null),i=e.getComputedStyle(t)||{};return W(r,function(e,t){var r=i[e];if(r){var o=r.charAt(0);("-"===o||"+"===o||o>=0)&&(r=R(r)),0===r&&(r=null),n[t]=r}}),n}function R(e){var t=0,r=e.split(/\s*,\s*/);return W(r,function(e){"s"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),e=parseFloat(e)||0,t=t?Math.max(e,t):e}),t}function C(e){return 0===e||null!=e}function A(e,t){var r=D,n=e+"s";return t?r+=ie:n+=" linear all",[r,n]}function j(){var e=Object.create(null);return{flush:function(){e=Object.create(null)},count:function(t){var r=e[t];return r?r.total:0},get:function(t){var r=e[t];return r&&r.value},put:function(t,r){e[t]?e[t].total++:e[t]={total:1,value:r}}}}function k(e,t,r){W(r,function(r){e[r]=K(e[r])?e[r]:t.style.getPropertyValue(r)})}var D,$,M,x,F=1,L="-add",U="-remove",B="ng-",N="-active",q="-prepare",H="ng-animate",V="$$ngAnimateChildren",Y="";void 0===e.ontransitionend&&void 0!==e.onwebkittransitionend?(Y="-webkit-",D="WebkitTransition",$="webkitTransitionEnd transitionend"):(D="transition",$="transitionend"),void 0===e.onanimationend&&void 0!==e.onwebkitanimationend?(Y="-webkit-",M="WebkitAnimation",x="webkitAnimationEnd animationend"):(M="animation",x="animationend");var z,G,W,Q,K,X,J,Z,ee,te,re,ne,ie="Duration",oe="Property",ae="Delay",se="TimingFunction",ce="IterationCount",le="PlayState",ue=9999,de=M+ae,pe=M+ie,fe=D+ae,he=D+ie,me=t.$$minErr("ng"),ge=["$$rAF",function(e){function t(e){n=n.concat(e),r()}function r(){if(n.length){for(var t=n.shift(),o=0;o<t.length;o++)t[o]();i||e(function(){i||r()})}}var n,i;return n=t.queue=[],t.waitUntilQuiet=function(t){i&&i(),i=e(function(){i=null,t(),r()})},t}],ve=["$interpolate",function(e){return{link:function(t,r,n){function i(e){e="on"===e||"true"===e,r.data(V,e)}var o=n.ngAnimateChildren;ee(o)&&0===o.length?r.data(V,!0):(i(e(o)(t)),n.$observe("ngAnimateChildren",i))}}}],ye="$$animateCss",be=1e3,Se=3,_e=1.5,we={transitionDuration:he,transitionDelay:fe,transitionProperty:D+oe,animationDuration:pe,animationDelay:de,animationIterationCount:M+ce},Ee={transitionDuration:he,transitionDelay:fe,animationDuration:pe,animationDelay:de},Te=["$animateProvider",function(e){var t=j(),r=j();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function(e,n,s,c,l,u,g,v){function b(e,t){var r="$$ngAnimateParentKey",n=e.parentNode,i=n[r]||(n[r]=++q);return i+"-"+e.getAttribute("class")+"-"+t}function S(r,n,i,o){var a=t.get(i);return a||(a=P(e,r,o),"infinite"===a.animationIterationCount&&(a.animationIterationCount=1)),t.put(i,a),a}function T(i,a,s,c){var l;if(t.count(s)>0&&(l=r.get(s),!l)){var u=o(a,"-stagger");n.addClass(i,u),l=P(e,i,c),l.animationDuration=Math.max(l.animationDuration,0),l.transitionDuration=Math.max(l.transitionDuration,0),n.removeClass(i,u),r.put(s,l)}return l||{}}function R(e){H.push(e),g.waitUntilQuiet(function(){t.flush(),r.flush();for(var e=l(),n=0;n<H.length;n++)H[n](e);H.length=0})}function j(e,t,r){var n=S(e,t,r,we),i=n.animationDelay,o=n.transitionDelay;return n.maxDelay=i&&o?Math.max(i,o):i||o,n.maxDuration=Math.max(n.animationDuration*n.animationIterationCount,n.transitionDuration),n}var F=d(n),q=0,H=[];return function(e,r){function l(){g()}function d(){g(!0)}function g(t){if(!(K||J&&X)){K=!0,X=!1,V.$$skipPreparationClasses||n.removeClass(e,we),n.removeClass(e,Oe),w(G,!1),_(G,!1),W(le,function(e){G.style[e[0]]=""}),F(e,V),f(e,V),Object.keys(Y).length&&W(Y,function(e,t){e?G.style.setProperty(t,e):G.style.removeProperty(t)}),V.onDone&&V.onDone(),fe&&fe.length&&e.off(fe.join(" "),q);var r=e.data(ye);r&&(c.cancel(r[0].timer),e.removeData(ye)),Z&&Z.complete(!t)}}function S(e){Ue.blockTransition&&_(G,e),Ue.blockKeyframeAnimation&&w(G,!!e)}function P(){return Z=new s({end:l,cancel:d}),R(ne),g(),{$$willAnimate:!1,start:function(){return Z},end:l}}function q(e){e.stopPropagation();var t=e.originalEvent||e,r=t.$manualTimeStamp||Date.now(),n=parseFloat(t.elapsedTime.toFixed(Se));Math.max(r-ce,0)>=re&&n>=ie&&(J=!0,g())}function H(){function t(){if(!K){if(S(!1),W(le,function(e){var t=e[0],r=e[1];G.style[t]=r}),F(e,V),n.addClass(e,Oe),Ue.recalculateTimingStyles){if(Te=G.getAttribute("class")+" "+we,Re=b(G,Te),Fe=j(G,Te,Re),Le=Fe.maxDelay,te=Math.max(Le,0),ie=Fe.maxDuration,0===ie)return void g();Ue.hasTransitions=Fe.transitionDuration>0,Ue.hasAnimations=Fe.animationDuration>0}if(Ue.applyAnimationDelay&&(Le="boolean"!=typeof V.delay&&C(V.delay)?parseFloat(V.delay):Le,te=Math.max(Le,0),Fe.animationDelay=Le,Be=I(Le,!0),le.push(Be),G.style[Be[0]]=Be[1]),re=te*be,ae=ie*be,V.easing){var t,i=V.easing;Ue.hasTransitions&&(t=D+se,le.push([t,i]),G.style[t]=i),Ue.hasAnimations&&(t=M+se,le.push([t,i]),G.style[t]=i)}Fe.transitionDuration&&fe.push($),Fe.animationDuration&&fe.push(x),ce=Date.now();var o=re+_e*ae,a=ce+o,s=e.data(ye)||[],l=!0;if(s.length){var u=s[0];l=a>u.expectedEndTime,l?c.cancel(u.timer):s.push(g)}if(l){var d=c(r,o,!1);s[0]={timer:d,expectedEndTime:a},s.push(g),e.data(ye,s)}fe.length&&e.on(fe.join(" "),q),V.to&&(V.cleanupStyles&&k(Y,G,Object.keys(V.to)),m(e,V))}}function r(){var t=e.data(ye);if(t){for(var r=1;r<t.length;r++)t[r]();e.removeData(ye)}}if(!K){if(!G.parentNode)return void g();var i=function(e){if(J)X&&e&&(X=!1,g());else if(X=!e,Fe.animationDuration){var t=w(G,X);X?le.push(t):a(le,t)}},o=Me>0&&(Fe.transitionDuration&&0===Ce.transitionDuration||Fe.animationDuration&&0===Ce.animationDuration)&&Math.max(Ce.animationDelay,Ce.transitionDelay);o?c(t,Math.floor(o*Me*be),!1):t(),ee.resume=function(){i(!0)},ee.pause=function(){i(!1)}}}var V=r||{};V.$$prepared||(V=p(z(V)));var Y={},G=y(e);if(!G||!G.parentNode||!v.enabled())return P();var K,X,J,Z,ee,te,re,ie,ae,ce,le=[],de=e.attr("class"),pe=i(V),fe=[];if(0===V.duration||!u.animations&&!u.transitions)return P();var he=V.event&&Q(V.event)?V.event.join(" "):V.event,me=he&&V.structural,ge="",ve="";me?ge=o(he,B,!0):he&&(ge=he),V.addClass&&(ve+=o(V.addClass,L)),V.removeClass&&(ve.length&&(ve+=" "),ve+=o(V.removeClass,U)),V.applyClassesEarly&&ve.length&&F(e,V);var we=[ge,ve].join(" ").trim(),Te=de+" "+we,Oe=o(we,N),Ie=pe.to&&Object.keys(pe.to).length>0,Pe=(V.keyframeStyle||"").length>0;if(!Pe&&!Ie&&!we)return P();var Re,Ce;if(V.stagger>0){var Ae=parseFloat(V.stagger);Ce={transitionDelay:Ae,animationDelay:Ae,transitionDuration:0,animationDuration:0}}else Re=b(G,Te),Ce=T(G,we,Re,Ee);V.$$skipPreparationClasses||n.addClass(e,we);var je;if(V.transitionStyle){var ke=[D,V.transitionStyle];E(G,ke),le.push(ke)}if(V.duration>=0){je=G.style[D].length>0;var De=A(V.duration,je);E(G,De),le.push(De)}if(V.keyframeStyle){var $e=[M,V.keyframeStyle];E(G,$e),le.push($e)}var Me=Ce?V.staggerIndex>=0?V.staggerIndex:t.count(Re):0,xe=0===Me;xe&&!V.skipBlocking&&_(G,ue);var Fe=j(G,Te,Re),Le=Fe.maxDelay;te=Math.max(Le,0),ie=Fe.maxDuration;var Ue={};if(Ue.hasTransitions=Fe.transitionDuration>0,Ue.hasAnimations=Fe.animationDuration>0,Ue.hasTransitionAll=Ue.hasTransitions&&"all"===Fe.transitionProperty,Ue.applyTransitionDuration=Ie&&(Ue.hasTransitions&&!Ue.hasTransitionAll||Ue.hasAnimations&&!Ue.hasTransitions),Ue.applyAnimationDuration=V.duration&&Ue.hasAnimations,Ue.applyTransitionDelay=C(V.delay)&&(Ue.applyTransitionDuration||Ue.hasTransitions),Ue.applyAnimationDelay=C(V.delay)&&Ue.hasAnimations,Ue.recalculateTimingStyles=ve.length>0,(Ue.applyTransitionDuration||Ue.applyAnimationDuration)&&(ie=V.duration?parseFloat(V.duration):ie,Ue.applyTransitionDuration&&(Ue.hasTransitions=!0,Fe.transitionDuration=ie,je=G.style[D+oe].length>0,le.push(A(ie,je))),Ue.applyAnimationDuration&&(Ue.hasAnimations=!0,Fe.animationDuration=ie,le.push(O(ie)))),0===ie&&!Ue.recalculateTimingStyles)return P();if(null!=V.delay){var Be;"boolean"!=typeof V.delay&&(Be=parseFloat(V.delay),te=Math.max(Be,0)),Ue.applyTransitionDelay&&le.push(I(Be)),Ue.applyAnimationDelay&&le.push(I(Be,!0))}return null==V.duration&&Fe.transitionDuration>0&&(Ue.recalculateTimingStyles=Ue.recalculateTimingStyles||xe),re=te*be,ae=ie*be,V.skipBlocking||(Ue.blockTransition=Fe.transitionDuration>0,Ue.blockKeyframeAnimation=Fe.animationDuration>0&&Ce.animationDelay>0&&0===Ce.animationDuration),V.from&&(V.cleanupStyles&&k(Y,G,Object.keys(V.from)),h(e,V)),Ue.blockTransition||Ue.blockKeyframeAnimation?S(ie):V.skipBlocking||_(G,!1),{$$willAnimate:!0,end:l,start:function(){if(!K)return ee={end:l,cancel:d,resume:null,pause:null},Z=new s(ee),R(H),Z}}}}]}],Oe=["$$animationProvider",function(e){function t(e){return e.parentNode&&11===e.parentNode.nodeType}e.drivers.push("$$animateCssDriver");var r="ng-animate-shim",n="ng-anchor",i="ng-anchor-out",o="ng-anchor-in";this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(e,a,s,c,l,u,d){function p(e){return e.replace(/\bng-\S+\b/g,"")}function f(e,t){return ee(e)&&(e=e.split(" ")),ee(t)&&(t=t.split(" ")),e.filter(function(e){return t.indexOf(e)===-1}).join(" ")}function h(t,a,c){function l(e){var t={},r=y(e).getBoundingClientRect();return W(["width","height","top","left"],function(e){var n=r[e];switch(e){case"top":n+=v.scrollTop;break;case"left":n+=v.scrollLeft}t[e]=Math.floor(n)+"px"}),t}function u(){var t=e(g,{addClass:i,delay:!0,from:l(a)});return t.$$willAnimate?t:null}function d(e){return e.attr("class")||""}function h(){var t=p(d(c)),r=f(t,b),n=f(b,t),a=e(g,{to:l(c),addClass:o+" "+r,removeClass:i+" "+n,delay:!0});return a.$$willAnimate?a:null}function m(){g.remove(),a.removeClass(r),c.removeClass(r)}var g=re(y(a).cloneNode(!0)),b=p(d(g));a.addClass(r),c.addClass(r),g.addClass(n),S.append(g);var _,w=u();if(!w&&(_=h(),!_))return m();var E=w||_;return{start:function(){function e(){r&&r.end()}var t,r=E.start();return r.done(function(){return r=null,!_&&(_=h())?(r=_.start(),r.done(function(){r=null,m(),t.complete()}),r):(m(),void t.complete())}),t=new s({end:e,cancel:e})}}}function m(e,t,r,n){var i=g(e,ne),o=g(t,ne),a=[];if(W(n,function(e){var t=e.out,n=e.in,i=h(r,t,n);i&&a.push(i)}),i||o||0!==a.length)return{start:function(){function e(){W(t,function(e){e.end()})}var t=[];i&&t.push(i.start()),o&&t.push(o.start()),W(a,function(e){t.push(e.start())});var r=new s({end:e,cancel:e});return s.all(t,function(e){r.complete(e)}),r}}}function g(t){var r=t.element,n=t.options||{};t.structural&&(n.event=t.event,n.structural=!0,n.applyClassesEarly=!0,"leave"===t.event&&(n.onDone=n.domOperation)),n.preparationClasses&&(n.event=T(n.event,n.preparationClasses));var i=e(r,n);return i.$$willAnimate?i:null}if(!l.animations&&!l.transitions)return ne;var v=d[0].body,b=y(c),S=re(t(b)||v.contains(b)?b:v);return function(e){return e.from&&e.to?m(e.from,e.to,e.classes,e.anchors):g(e)}}]}],Ie=["$animateProvider",function(e){this.$get=["$injector","$$AnimateRunner","$$jqLite",function(t,r,n){function i(r){r=Q(r)?r:r.split(" ");for(var n=[],i={},o=0;o<r.length;o++){var a=r[o],s=e.$$registeredAnimations[a];s&&!i[a]&&(n.push(t.get(s)),i[a]=!0)}return n}var o=d(n);return function(e,t,n,a){function s(){a.domOperation(),o(e,a)}function c(){h=!0,s(),f(e,a)}function l(e,t,n,i,o){var a;switch(n){case"animate":a=[t,i.from,i.to,o];break;case"setClass":a=[t,v,y,o];break;case"addClass":a=[t,v,o];break;case"removeClass":a=[t,y,o];break;default:a=[t,o]}a.push(i);var s=e.apply(e,a);if(s)if(J(s.start)&&(s=s.start()),s instanceof r)s.done(o);else if(J(s))return s;return ne}function u(e,t,n,i,o){var a=[];return W(i,function(i){var s=i[o];s&&a.push(function(){var i,o,a=!1,c=function(e){a||(a=!0,(o||ne)(e),i.complete(!e))};return i=new r({end:function(){c()},cancel:function(){c(!0)}}),o=l(s,e,t,n,function(e){var t=e===!1;c(t)}),i})}),a}function d(e,t,n,i,o){var a=u(e,t,n,i,o);if(0===a.length){var s,c;"beforeSetClass"===o?(s=u(e,"removeClass",n,i,"beforeRemoveClass"),c=u(e,"addClass",n,i,"beforeAddClass")):"setClass"===o&&(s=u(e,"removeClass",n,i,"removeClass"),c=u(e,"addClass",n,i,"addClass")),s&&(a=a.concat(s)),c&&(a=a.concat(c))}if(0!==a.length)return function(e){var t=[];return a.length&&W(a,function(e){t.push(e())}),t.length?r.all(t,e):e(),function(e){W(t,function(t){e?t.cancel():t.end()})}}}var h=!1;3===arguments.length&&Z(n)&&(a=n,n=null),a=p(a),n||(n=e.attr("class")||"",a.addClass&&(n+=" "+a.addClass),a.removeClass&&(n+=" "+a.removeClass));var m,g,v=a.addClass,y=a.removeClass,b=i(n);if(b.length){var S,_;"leave"===t?(_="leave",S="afterLeave"):(_="before"+t.charAt(0).toUpperCase()+t.substr(1),S=t),"enter"!==t&&"move"!==t&&(m=d(e,t,a,b,_)),g=d(e,t,a,b,S)}if(m||g){var w;return{$$willAnimate:!0,end:function(){return w?w.end():(c(),w=new r,w.complete(!0)),w},start:function(){function e(e){c(e),w.complete(e)}function t(t){h||((n||ne)(t),e(t))}if(w)return w;w=new r;var n,i=[];return m&&i.push(function(e){n=m(e)}),i.length?i.push(function(e){s(),e(!0)}):s(),g&&i.push(function(e){n=g(e)}),w.setHost({end:function(){t()},cancel:function(){t(!0)}}),r.chain(i,e),w}}}}}]}],Pe=["$$animationProvider",function(e){e.drivers.push("$$animateJsDriver"),this.$get=["$$animateJs","$$AnimateRunner",function(e,t){function r(t){var r=t.element,n=t.event,i=t.options,o=t.classes;return e(r,n,o,i)}return function(e){if(e.from&&e.to){var n=r(e.from),i=r(e.to);if(!n&&!i)return;return{start:function(){function e(){return function(){W(o,function(e){e.end()})}}function r(e){a.complete(e)}var o=[];n&&o.push(n.start()),i&&o.push(i.start()),t.all(o,r);var a=new t({end:e(),cancel:e()});return a}}}return r(e)}}]}],Re="data-ng-animate",Ce="$ngAnimatePin",Ae=["$animateProvider",function(t){function n(e){if(!e)return null;var t=e.split(h),r=Object.create(null);return W(t,function(e){r[e]=!0}),r}function i(e,t){if(e&&t){var r=n(t);return e.split(h).some(function(e){return r[e]})}}function o(e,t,r){return m[e].some(function(e){return e(t,r)})}function a(e,t){var r=(e.addClass||"").length>0,n=(e.removeClass||"").length>0;return t?r&&n:r||n}var l=1,u=2,h=" ",m=this.rules={skip:[],cancel:[],join:[]};m.join.push(function(e,t){return!e.structural&&a(e)}),m.skip.push(function(e,t){return!e.structural&&!a(e)}),m.skip.push(function(e,t){return"leave"===t.event&&e.structural}),m.skip.push(function(e,t){return t.structural&&t.state===u&&!e.structural}),m.cancel.push(function(e,t){return t.structural&&e.structural}),m.cancel.push(function(e,t){return t.state===u&&e.structural}),m.cancel.push(function(e,t){if(t.structural)return!1;var r=e.addClass,n=e.removeClass,o=t.addClass,a=t.removeClass;return!(te(r)&&te(n)||te(o)&&te(a))&&(i(r,a)||i(n,o))}),this.$get=["$$rAF","$rootScope","$rootElement","$document","$$Map","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow","$$isDocumentHidden",function(n,i,h,m,v,_,w,E,T,O,I){function P(){var e=!1;return function(t){e?t():i.$$postDigest(function(){e=!0,t()})}}function R(e,t){return g(e,t,{})}function C(e,t,r){var n=[],i=q[r];return i&&W(i,function(i){ne.call(i.node,t)?n.push(i.callback):"leave"===r&&ne.call(i.node,e)&&n.push(i.callback)}),n}function A(e,t,r){var n=c(t);return e.filter(function(e){var t=e.node===n&&(!r||e.callback===r);return!t})}function j(e,t){"close"!==e||t.parentNode||ie.off(t)}function k(e,t,r){function c(e,t,r,i){O(function(){var e=C(E,v,t);e.length?n(function(){W(e,function(e){e(m,r,i)}),j(r,v)}):j(r,v)}),e.progress(t,r,i)}function d(e){S(m,h),J(m,h),f(m,h),h.domOperation(),T.complete(!e)}var h=z(r),m=s(e),v=y(m),E=v&&v.parentNode;h=p(h);var T=new w,O=P();if(Q(h.addClass)&&(h.addClass=h.addClass.join(" ")),h.addClass&&!ee(h.addClass)&&(h.addClass=null),Q(h.removeClass)&&(h.removeClass=h.removeClass.join(" ")),h.removeClass&&!ee(h.removeClass)&&(h.removeClass=null),h.from&&!Z(h.from)&&(h.from=null),h.to&&!Z(h.to)&&(h.to=null),!v)return d(),T;var A=[v.getAttribute("class"),h.addClass,h.removeClass].join(" ");if(!Y(A))return d(),T;var k=["enter","move","leave"].indexOf(t)>=0,F=I(),N=!B||F||U.get(v),q=!N&&L.get(v)||{},H=!!q.state;if(N||H&&q.state===l||(N=!M(v,E,t)),N)return F&&c(T,t,"start"),d(),F&&c(T,t,"close"),T;k&&D(v);var V={structural:k,element:m,event:t,addClass:h.addClass,removeClass:h.removeClass,close:d,options:h,runner:T};if(H){var G=o("skip",V,q);if(G)return q.state===u?(d(),T):(g(m,q,V),q.runner);var K=o("cancel",V,q);if(K)if(q.state===u)q.runner.end();else{if(!q.structural)return g(m,q,V),q.runner;q.close()}else{var X=o("join",V,q);if(X){if(q.state!==u)return b(m,k?t:null,h),t=V.event=q.event,h=g(m,q,V),q.runner;R(m,V)}}}else R(m,V);var te=V.structural;if(te||(te="animate"===V.event&&Object.keys(V.options.to||{}).length>0||a(V)),!te)return d(),$(v),T;var re=(q.counter||0)+1;return V.counter=re,x(v,l,V),i.$$postDigest(function(){m=s(e);var r=L.get(v),n=!r;r=r||{};var i=m.parent()||[],o=i.length>0&&("animate"===r.event||r.structural||a(r));if(n||r.counter!==re||!o)return n&&(J(m,h),f(m,h)),(n||k&&r.event!==t)&&(h.domOperation(),T.end()),void(o||$(v));t=!r.structural&&a(r,!0)?"setClass":r.event,x(v,u);var l=_(m,t,r.options);T.setHost(l),c(T,t,"start",{}),l.done(function(e){d(!e);var r=L.get(v);r&&r.counter===re&&$(v),c(T,t,"close",{})})}),T}function D(e){var t=e.querySelectorAll("["+Re+"]");W(t,function(e){var t=parseInt(e.getAttribute(Re),10),r=L.get(e);if(r)switch(t){case u:r.runner.end();case l:L.delete(e)}})}function $(e){e.removeAttribute(Re),L.delete(e)}function M(e,t,r){var n,i=m[0].body,o=y(h),a=e===i||"HTML"===e.nodeName,s=e===o,c=!1,l=U.get(e),u=re.data(e,Ce);for(u&&(t=y(u));t&&(s||(s=t===o),t.nodeType===F);){var d=L.get(t)||{};if(!c){var p=U.get(t);if(p===!0&&l!==!1){l=!0;break}p===!1&&(l=!1),c=d.structural}if(te(n)||n===!0){var f=re.data(t,V);K(f)&&(n=f)}if(c&&n===!1)break;if(a||(a=t===i),a&&s)break;t=s||!(u=re.data(t,Ce))?t.parentNode:y(u)}var g=(!c||n)&&l!==!0;return g&&s&&a}function x(e,t,r){r=r||{},r.state=t,e.setAttribute(Re,t);var n=L.get(e),i=n?G(n,r):r;L.set(e,i)}var L=new v,U=new v,B=null,N=i.$watch(function(){return 0===E.totalPendingRequests},function(e){e&&(N(),i.$$postDigest(function(){i.$$postDigest(function(){null===B&&(B=!0)})}))}),q=Object.create(null),H=t.classNameFilter(),Y=H?function(e){return H.test(e)}:function(){return!0},J=d(T),ne=e.Node.prototype.contains||function(e){return this===e||!!(16&this.compareDocumentPosition(e))},ie={on:function(e,t,r){var n=c(t);q[e]=q[e]||[],q[e].push({node:n,callback:r}),re(t).on("$destroy",function(){var i=L.get(n);i||ie.off(e,t,r)})},off:function(e,t,r){if(1!==arguments.length||ee(arguments[0])){var n=q[e];n&&(q[e]=1===arguments.length?null:A(n,t,r))}else{t=arguments[0];for(var i in q)q[i]=A(q[i],t)}},pin:function(e,t){r(X(e),"element","not an element"),r(X(t),"parentElement","not an element"),e.data(Ce,t)},push:function(e,t,r,n){return r=r||{},r.domOperation=n,k(e,t,r)},enabled:function(e,t){var r=arguments.length;if(0===r)t=!!B;else{var n=X(e);if(n){var i=y(e);1===r?t=!U.get(i):U.set(i,!t)}else t=B=!!e}return t}};return ie}]}],je=["$animateProvider",function(e){function t(e,t){e.data(s,t)}function r(e){e.removeData(s)}function i(e){return e.data(s)}var o="ng-animate-ref",a=this.drivers=[],s="$$animationRunner";this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$Map","$$rAFScheduler",function(e,s,c,l,u,h){function m(e){function t(e){if(e.processed)return e;e.processed=!0;var r=e.domNode,n=r.parentNode;o.set(r,e);for(var a;n;){if(a=o.get(n)){a.processed||(a=t(a));break}n=n.parentNode}return(a||i).children.push(e),e}function r(e){var t,r=[],n=[];for(t=0;t<e.children.length;t++)n.push(e.children[t]);var i=n.length,o=0,a=[];for(t=0;t<n.length;t++){var s=n[t];i<=0&&(i=o,o=0,r.push(a),a=[]),a.push(s.fn),s.children.forEach(function(e){o++,n.push(e)}),i--}return a.length&&r.push(a),r}var n,i={children:[]},o=new u;for(n=0;n<e.length;n++){var a=e[n];o.set(a.domNode,e[n]={domNode:a.domNode,fn:a.fn,children:[]})}for(n=0;n<e.length;n++)t(e[n]);return r(i)}var g=[],v=d(e);return function(u,d,b){function S(e){var t="["+o+"]",r=e.hasAttribute(o)?[e]:e.querySelectorAll(t),n=[];return W(r,function(e){var t=e.getAttribute(o);t&&t.length&&n.push(e)}),n}function _(e){var t=[],r={};W(e,function(e,n){var i=e.element,a=y(i),s=e.event,c=["enter","move"].indexOf(s)>=0,l=e.structural?S(a):[];if(l.length){var u=c?"to":"from";W(l,function(e){var t=e.getAttribute(o);r[t]=r[t]||{},r[t][u]={animationID:n,element:re(e)}})}else t.push(e)});var n={},i={};return W(r,function(r,o){var a=r.from,s=r.to;if(!a||!s){var c=a?a.animationID:s.animationID,l=c.toString();return void(n[l]||(n[l]=!0,t.push(e[c])))}var u=e[a.animationID],d=e[s.animationID],p=a.animationID.toString();if(!i[p]){var f=i[p]={structural:!0,beforeStart:function(){u.beforeStart(),d.beforeStart()},close:function(){u.close(),d.close()},classes:w(u.classes,d.classes),from:u,to:d,anchors:[]};f.classes.length?t.push(f):(t.push(u),t.push(d))}i[p].anchors.push({out:a.element,in:s.element})}),t}function w(e,t){e=e.split(" "),t=t.split(" ");for(var r=[],n=0;n<e.length;n++){var i=e[n];if("ng-"!==i.substring(0,3))for(var o=0;o<t.length;o++)if(i===t[o]){r.push(i);break}}return r.join(" ")}function E(e){for(var t=a.length-1;t>=0;t--){var r=a[t],n=c.get(r),i=n(e);if(i)return i}}function T(){u.addClass(H),j&&e.addClass(u,j),k&&(e.removeClass(u,k),k=null)}function O(e,t){function r(e){var r=i(e);r&&r.setHost(t)}e.from&&e.to?(r(e.from.element),r(e.to.element)):r(e.element)}function I(){var e=i(u);!e||"leave"===d&&b.$$domOperationFired||e.end()}function P(t){u.off("$destroy",I),r(u),v(u,b),f(u,b),b.domOperation(),j&&e.removeClass(u,j),u.removeClass(H),C.complete(!t)}b=p(b);var R=["enter","move","leave"].indexOf(d)>=0,C=new l({end:function(){P()},cancel:function(){P(!0)}});if(!a.length)return P(),C;t(u,C);var A=n(u.attr("class"),n(b.addClass,b.removeClass)),j=b.tempClasses;j&&(A+=" "+j,b.tempClasses=null);var k;return R&&(k="ng-"+d+q,e.addClass(u,k)),g.push({element:u,classes:A,event:d,structural:R,options:b,beforeStart:T,close:P}),u.on("$destroy",I),g.length>1?C:(s.$$postDigest(function(){var e=[];W(g,function(t){i(t.element)?e.push(t):t.close()}),g.length=0;var t=_(e),r=[];W(t,function(e){r.push({domNode:y(e.from?e.from.element:e.element),fn:function(){e.beforeStart();var t,r=e.close,n=e.anchors?e.from.element||e.to.element:e.element;if(i(n)){var o=E(e);o&&(t=o.start)}if(t){var a=t();a.done(function(e){r(!e)}),O(e,a)}else r()}})}),h(m(r))}),C)}}]}],ke=["$animate","$rootScope",function(e,t){return{restrict:"A",transclude:"element",terminal:!0,priority:600,link:function(t,r,n,i,o){var a,s;t.$watchCollection(n.ngAnimateSwap||n.for,function(n){a&&e.leave(a),s&&(s.$destroy(),s=null),(n||0===n)&&(s=t.$new(),o(s,function(t){a=t,e.enter(t,null,r)}))})}}}];t.module("ngAnimate",[],function(){ne=t.noop,z=t.copy,G=t.extend,re=t.element,W=t.forEach,Q=t.isArray,ee=t.isString,Z=t.isObject,te=t.isUndefined,K=t.isDefined,J=t.isFunction,X=t.isElement}).info({angularVersion:"1.6.3"}).directive("ngAnimateSwap",ke).directive("ngAnimateChildren",ve).factory("$$rAFScheduler",ge).provider("$$animateQueue",Ae).provider("$$animation",je).provider("$animateCss",Te).provider("$$animateCssDriver",Oe).provider("$$animateJs",Ie).provider("$$animateJsDriver",Pe)}(window,window.angular)},{}],2:[function(e,t,r){e("./angular-animate"),t.exports="ngAnimate"},{"./angular-animate":1}],3:[function(e,t,r){!function(e,t){"use strict";function r(){function e(e,t,n,i){return function(a,s,c){var l=c.$normalize(t);!r[l]||o(s,n)||c[l]||a.$watch(c[e],function(e){e=i?!e:!!e,s.attr(t,e)})}}var r={ariaHidden:!0,ariaChecked:!0,ariaReadonly:!0,ariaDisabled:!0,ariaRequired:!0,ariaInvalid:!0,ariaValue:!0,tabindex:!0,bindKeydown:!0,bindRoleForClick:!0};this.config=function(e){r=t.extend(r,e)},this.$get=function(){return{config:function(e){return r[e]},$$watchExpr:e}}}var n=t.module("ngAria",["ng"]).info({angularVersion:"1.6.3"}).provider("$aria",r),i=["BUTTON","A","INPUT","TEXTAREA","SELECT","DETAILS","SUMMARY"],o=function(e,t){if(t.indexOf(e[0].nodeName)!==-1)return!0};n.directive("ngShow",["$aria",function(e){return e.$$watchExpr("ngShow","aria-hidden",[],!0)}]).directive("ngHide",["$aria",function(e){return e.$$watchExpr("ngHide","aria-hidden",[],!1)}]).directive("ngValue",["$aria",function(e){return e.$$watchExpr("ngValue","aria-checked",i,!1)}]).directive("ngChecked",["$aria",function(e){return e.$$watchExpr("ngChecked","aria-checked",i,!1)}]).directive("ngReadonly",["$aria",function(e){return e.$$watchExpr("ngReadonly","aria-readonly",i,!1)}]).directive("ngRequired",["$aria",function(e){return e.$$watchExpr("ngRequired","aria-required",i,!1)}]).directive("ngModel",["$aria",function(e){function t(t,r,n,a){return e.config(r)&&!n.attr(t)&&(a||!o(n,i))}function r(e,t){return!t.attr("role")&&t.attr("type")===e&&!o(t,i)}function n(e,t){var r=e.type,n=e.role;return"checkbox"===(r||n)||"menuitemcheckbox"===n?"checkbox":"radio"===(r||n)||"menuitemradio"===n?"radio":"range"===r||"progressbar"===n||"slider"===n?"range":""}return{restrict:"A",require:"ngModel",priority:200,compile:function(i,o){var a=n(o,i);return{post:function(n,i,o,s){function c(){return s.$modelValue}function l(e){var t=o.value==s.$viewValue;i.attr("aria-checked",t)}function u(){i.attr("aria-checked",!s.$isEmpty(s.$viewValue))}var d=t("tabindex","tabindex",i,!1);switch(a){case"radio":case"checkbox":r(a,i)&&i.attr("role",a),t("aria-checked","ariaChecked",i,!1)&&n.$watch(c,"radio"===a?l:u),d&&i.attr("tabindex",0);break;case"range":if(r(a,i)&&i.attr("role","slider"),e.config("ariaValue")){var p=!i.attr("aria-valuemin")&&(o.hasOwnProperty("min")||o.hasOwnProperty("ngMin")),f=!i.attr("aria-valuemax")&&(o.hasOwnProperty("max")||o.hasOwnProperty("ngMax")),h=!i.attr("aria-valuenow");p&&o.$observe("min",function(e){i.attr("aria-valuemin",e)}),f&&o.$observe("max",function(e){i.attr("aria-valuemax",e)}),h&&n.$watch(c,function(e){i.attr("aria-valuenow",e)})}d&&i.attr("tabindex",0)}!o.hasOwnProperty("ngRequired")&&s.$validators.required&&t("aria-required","ariaRequired",i,!1)&&o.$observe("required",function(){i.attr("aria-required",!!o.required)}),t("aria-invalid","ariaInvalid",i,!0)&&n.$watch(function(){return s.$invalid},function(e){i.attr("aria-invalid",!!e)})}}}}}]).directive("ngDisabled",["$aria",function(e){return e.$$watchExpr("ngDisabled","aria-disabled",i,!1)}]).directive("ngMessages",function(){return{restrict:"A",require:"?ngMessages",link:function(e,t,r,n){t.attr("aria-live")||t.attr("aria-live","assertive")}}}).directive("ngClick",["$aria","$parse",function(e,t){return{restrict:"A",compile:function(r,n){var a=t(n.ngClick);return function(t,r,n){o(r,i)||(e.config("bindRoleForClick")&&!r.attr("role")&&r.attr("role","button"),e.config("tabindex")&&!r.attr("tabindex")&&r.attr("tabindex",0),!e.config("bindKeydown")||n.ngKeydown||n.ngKeypress||n.ngKeyup||r.on("keydown",function(e){function r(){a(t,{$event:e})}var n=e.which||e.keyCode;32!==n&&13!==n||t.$apply(r)}))}}}}]).directive("ngDblclick",["$aria",function(e){return function(t,r,n){!e.config("tabindex")||r.attr("tabindex")||o(r,i)||r.attr("tabindex",0)}}])}(window,window.angular)},{}],4:[function(e,t,r){e("./angular-aria"),t.exports="ngAria"},{"./angular-aria":3}],5:[function(e,t,r){!function(r,n){"function"==typeof define&&define.amd?define(["angular"],n):"object"==typeof t&&t.exports?t.exports=n(e("angular")):r.angularClipboard=n(r.angular)}(this,function(e){return e.module("angular-clipboard",[]).factory("clipboard",["$document","$window",function(e,t){function r(r,n){var i=e[0].createElement("textarea");return i.style.position="absolute",i.textContent=r,i.style.left="-10000px",i.style.top=(t.pageYOffset||e[0].documentElement.scrollTop)+"px",i}function n(t){try{e[0].body.style.webkitUserSelect="initial";var r=e[0].getSelection();if(r.removeAllRanges(),t.select(),!e[0].execCommand("copy"))throw"failure copy";r.removeAllRanges()}finally{e[0].body.style.webkitUserSelect=""}}function i(t,i){var o=r(t,i);e[0].body.appendChild(o),n(o),e[0].body.removeChild(o)}return{copyText:i,supported:"queryCommandSupported"in e[0]&&e[0].queryCommandSupported("copy")}}]).directive("clipboard",["clipboard",function(t){return{restrict:"A",scope:{onCopied:"&",onError:"&",text:"=",supported:"=?"},link:function(r,n){r.supported=t.supported,n.on("click",function(i){try{t.copyText(r.text,n[0]),e.isFunction(r.onCopied)&&r.$evalAsync(r.onCopied())}catch(t){e.isFunction(r.onError)&&r.$evalAsync(r.onError({err:t}))}})}}}])})},{angular:"angular"}],6:[function(e,t,r){!function(e,t){"use strict";function r(e,r,n){function i(e,n,i){var a,s;i=i||{},s=i.expires,a=t.isDefined(i.path)?i.path:o,t.isUndefined(n)&&(s="Thu, 01 Jan 1970 00:00:00 GMT",n=""),t.isString(s)&&(s=new Date(s));var c=encodeURIComponent(e)+"="+encodeURIComponent(n);c+=a?";path="+a:"",c+=i.domain?";domain="+i.domain:"",c+=s?";expires="+s.toUTCString():"",c+=i.secure?";secure":"";var l=c.length+1;
return l>4096&&r.warn("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+l+" > 4096 bytes)!"),c}var o=n.baseHref(),a=e[0];return function(e,t,r){a.cookie=i(e,t,r)}}t.module("ngCookies",["ng"]).info({angularVersion:"1.6.3"}).provider("$cookies",[function(){function e(e){return e?t.extend({},r,e):r}var r=this.defaults={};this.$get=["$$cookieReader","$$cookieWriter",function(r,n){return{get:function(e){return r()[e]},getObject:function(e){var r=this.get(e);return r?t.fromJson(r):r},getAll:function(){return r()},put:function(t,r,i){n(t,r,e(i))},putObject:function(e,r,n){this.put(e,t.toJson(r),n)},remove:function(t,r){n(t,void 0,e(r))}}}]}]),t.module("ngCookies").factory("$cookieStore",["$cookies",function(e){return{get:function(t){return e.getObject(t)},put:function(t,r){e.putObject(t,r)},remove:function(t){e.remove(t)}}}]),r.$inject=["$document","$log","$browser"],t.module("ngCookies").provider("$$cookieWriter",function(){this.$get=r})}(window,window.angular)},{}],7:[function(e,t,r){e("./angular-cookies"),t.exports="ngCookies"},{"./angular-cookies":6}],8:[function(e,t,r){angular.module("akoenig.deckgrid",[]),angular.module("akoenig.deckgrid").directive("deckgrid",["DeckgridDescriptor",function(e){"use strict";return e.create()}]),angular.module("akoenig.deckgrid").factory("DeckgridDescriptor",["Deckgrid","$templateCache",function(e,t){"use strict";function r(){this.restrict="AE",this.template='<div data-ng-repeat="column in columns" class="{{layout.classList}}"><div data-ng-repeat="card in column" data-ng-include="cardTemplate"></div></div>',this.scope={model:"=source"},this.$$deckgrid=null,this.transclude=!0,this.link=this.$$link.bind(this),this.$$templateKeyIndex=0}return r.prototype.$$destroy=function(){this.$$deckgrid.destroy()},r.prototype.$$link=function(r,n,i,o,a){var s="deckgrid/innerHtmlTemplate"+ ++this.$$templateKeyIndex+".html";r.$on("$destroy",this.$$destroy.bind(this)),angular.isUndefined(i.cardtemplate)?(angular.isUndefined(i.cardtemplatestring)?a(r,function(e){var r,n=[],i=0,o=e.length;for(i;i<o;i+=1)r=e[i].outerHTML,angular.isDefined(r)&&n.push(r);t.put(s,n.join())}):t.put(s,n.attr("cardtemplatestring")),r.cardTemplate=s):r.cardTemplate=i.cardtemplate,r.mother=r.$parent,this.$$deckgrid=e.create(r,n[0])},{create:function(){return new r}}}]),angular.module("akoenig.deckgrid").factory("Deckgrid",["$window","$log",function(e,t){"use strict";function r(t,r){var n,i,o=this;this.$$elem=r,this.$$watchers=[],this.$$scope=t,this.$$scope.columns=[],this.$$scope.layout=this.$$getLayout(),this.$$createColumns(),n=this.$$scope.$watchCollection("model",this.$$onModelChange.bind(this)),this.$$watchers.push(n),angular.forEach(o.$$getMediaQueries(),function(e){function t(){e.removeListener(r)}var r=o.$$onMediaQueryChange.bind(o);e.addListener(r),o.$$watchers.push(t)}),i=e.matchMedia("(orientation: portrait)"),i.addListener(o.$$onMediaQueryChange.bind(o))}return r.prototype.$$getMediaQueries=function(){function t(e){try{return e.sheet.cssRules||[]}catch(e){return[]}}function r(e){var t=/\[(\w*-)?deckgrid\]::?before/g,r=0,n="";if(!e.media||angular.isUndefined(e.cssRules))return!1;for(r=e.cssRules.length-1;r>=0;r-=1)if(n=e.cssRules[r].selectorText,angular.isDefined(n)&&n.match(t))return!0;return!1}var n=[],i=[];return n=Array.prototype.concat.call(Array.prototype.slice.call(document.querySelectorAll("style[type='text/css']")),Array.prototype.slice.call(document.querySelectorAll("link[rel='stylesheet']"))),angular.forEach(n,function(n){var o=t(n);angular.forEach(o,function(t){r(t)&&i.push(e.matchMedia(t.media.mediaText))})}),i},r.prototype.$$createColumns=function(){var e=this;return this.$$scope.layout?(this.$$scope.columns=[],void angular.forEach(this.$$scope.model,function(t,r){var n=r%e.$$scope.layout.columns|0;e.$$scope.columns[n]||(e.$$scope.columns[n]=[]),t.$index=r,e.$$scope.columns[n].push(t)})):t.error("angular-deckgrid: No CSS configuration found (see https://github.com/akoenig/angular-deckgrid#the-grid-configuration)")},r.prototype.$$getLayout=function(){var t,r=e.getComputedStyle(this.$$elem,":before").content;return r&&(r=r.replace(/'/g,""),r=r.replace(/"/g,""),r=r.split(" "),2===r.length&&(t={},t.columns=0|r[0],t.classList=r[1].replace(/\./g," ").trim())),t},r.prototype.$$onMediaQueryChange=function(){var e=this,t=this.$$getLayout();t.columns!==this.$$scope.layout.columns&&(e.$$scope.layout=t,e.$$scope.$apply(function(){e.$$createColumns()}))},r.prototype.$$onModelChange=function(e,t){var r=this;e=e||[],t=t||[],angular.equals(t,e)||r.$$createColumns()},r.prototype.destroy=function(){var e=this.$$watchers.length-1;for(e;e>=0;e-=1)this.$$watchers[e]()},{create:function(e,t){return new r(e,t)}}}])},{}],9:[function(e,t,r){!function(e,n){"function"==typeof define&&define.amd?define([],function(){return n()}):"object"==typeof r?t.exports=n():n()}(this,function(){"use strict";return angular.module("tmh.dynamicLocale",[]).config(["$provide",function(e){function t(e){return e.$stateful=!0,e}e.decorator("dateFilter",["$delegate",t]),e.decorator("numberFilter",["$delegate",t]),e.decorator("currencyFilter",["$delegate",t])}]).constant("tmhDynamicLocale.STORAGE_KEY","tmhDynamicLocale.locale").provider("tmhDynamicLocale",["tmhDynamicLocale.STORAGE_KEY",function(e){function t(e,t,r,n){var o=document.createElement("script"),a=i?i:document.getElementsByTagName("body")[0],s=!1;o.type="text/javascript",o.readyState?o.onreadystatechange=function(){"complete"!==o.readyState&&"loaded"!==o.readyState||(o.onreadystatechange=null,n(function(){s||(s=!0,a.removeChild(o),t())},30,!1))}:(o.onload=function(){s||(s=!0,a.removeChild(o),t())},o.onerror=function(){s||(s=!0,a.removeChild(o),r())}),o.src=e,o.async=!0,a.appendChild(o)}function r(e,r,n,i,s,c,d){function p(e,t){a===n&&(angular.forEach(e,function(r,n){t[n]?angular.isArray(t[n])&&(e[n].length=t[n].length):delete e[n]}),angular.forEach(t,function(r,n){angular.isArray(t[n])||angular.isObject(t[n])?(e[n]||(e[n]=angular.isArray(t[n])?[]:{}),p(e[n],t[n])):e[n]=t[n]}))}if(u[n])return a=n,u[n];var f,h=s.defer();return n===a?h.resolve(r):(f=c.get(n))?(a=n,i.$evalAsync(function(){p(r,f),o.put(l,n),i.$broadcast("$localeChangeSuccess",n,r),h.resolve(r)})):(a=n,u[n]=h.promise,t(e,function(){var e=angular.injector(["ngLocale"]),t=e.get("$locale");p(r,t),c.put(n,t),delete u[n],i.$applyAsync(function(){o.put(l,n),i.$broadcast("$localeChangeSuccess",n,r),h.resolve(r)})},function(){delete u[n],i.$applyAsync(function(){a===n&&(a=r.id),i.$broadcast("$localeChangeError",n),h.reject(n)})},d)),h.promise}var n,i,o,a,s="angular/i18n/angular-locale_{{locale}}.js",c="tmhDynamicLocaleStorageCache",l=e,u={},d={};this.localeLocationPattern=function(e){return e?(s=e,this):s},this.appendScriptTo=function(e){i=e},this.useStorage=function(e){c=e},this.useCookieStorage=function(){this.useStorage("$cookieStore")},this.defaultLocale=function(e){n=e},this.storageKey=function(e){return e?(l=e,this):l},this.addLocalePatternValue=function(e,t){d[e]=t},this.$get=["$rootScope","$injector","$interpolate","$locale","$q","tmhDynamicLocaleCache","$timeout",function(e,t,i,u,p,f,h){function m(t){var n={locale:t,angularVersion:angular.version.full};return r(g(angular.extend({},d,n)),u,t,e,p,f,h)}var g=i(s);return o=t.get(c),e.$evalAsync(function(){var e;(e=o.get(l)||n)&&m(e)}),{set:m,get:function(){return a}}}]}]).provider("tmhDynamicLocaleCache",function(){this.$get=["$cacheFactory",function(e){return e("tmh.dynamicLocales")}]}).provider("tmhDynamicLocaleStorageCache",function(){this.$get=["$cacheFactory",function(e){return e("tmh.dynamicLocales.store")}]}).run(["tmhDynamicLocale",angular.noop]),"tmh.dynamicLocale"})},{}],10:[function(e,t,r){"use strict";angular.module("puElasticInput",[]).directive("puElasticInput",["$document","$window",function(e,t){function r(e,t){var r="";if(window.getComputedStyle)r=getComputedStyle(e).getPropertyValue(t);else if(e.currentStyle)try{r=e.currentStyle[t]}catch(e){}return r}function n(e){var t,n=e[0];do n=n.parentNode,t=parseInt(r(n,"width"),10)-parseInt(r(n,"padding-left"),10)-parseInt(r(n,"padding-right"),10);while("block"!=r(n,"display")&&"body"!=n.nodeName.toLowerCase());return t+"px"}function i(e,r,i){var o=t.getComputedStyle(r[0]),a="none"===o.maxWidth?n(r):o.maxWidth;r.css("minWidth",i.puElasticInputMinwidth||o.minWidth),r.css("maxWidth",i.puElasticInputMaxwidth||a),angular.forEach(["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing"],function(t){e.css(t,o[t])}),e.css("paddingLeft",o.textIndent),"border-box"===o.boxSizing?angular.forEach(["paddingLeft","paddingRight","borderLeftStyle","borderLeftWidth","borderRightStyle","borderRightWidth"],function(t){e.css(t,o[t])}):"padding-box"===o.boxSizing&&angular.forEach(["paddingLeft","paddingRight"],function(t){e.css(t,o[t])})}var o=angular.element('<div style="position:fixed; top:-999px; left:0;"></div>');return angular.element(e[0].body).append(o),{restrict:"A",link:function(e,t,r){function n(){var e=t.val()||r.placeholder||"";if(a.text()!=e){a.text(e);var n=parseInt(r.puElasticInputWidthDelta)||1;t.css("width",a.prop("offsetWidth")+n+"px")}}r.$set("ngTrim","true"===r.ngTrim?"true":"false");var a=angular.element('<span style="white-space:pre;">&#000;</span>');i(a,t,r),o.append(a),n(),e.$watch(r.ngModel,n),t.on("keydown keyup focus input propertychange change",n),e.$on("$destroy",function(){a.remove()})}}}])},{}],11:[function(e,t,r){!function(){"use strict";function e(e){return{restrict:"A",require:"?^^inViewContainer",link:function(t,r,s,c){var l={};s.inViewOptions&&(l=t.$eval(s.inViewOptions)),l.offset&&(l.offset=o(l.offset)),l.viewportOffset&&(l.viewportOffset=o(l.viewportOffset));var p=d({type:"initial"}).merge(u(window,"checkInView click ready wheel mousewheel DomMouseScroll MozMousePixelScroll resize scroll touchmove mouseup keydown"));c&&(p=p.merge(c.eventsSignal)),l.throttle&&(p=p.throttle(l.throttle));var f=p.map(function(e){var t;t=c?c.getViewportRect():n(),t=a(t,l.viewportOffset);var o=a(r[0].getBoundingClientRect(),l.offset),s={inView:i(o,t),event:e,element:r,elementRect:o,viewportRect:t};return l.generateParts&&s.inView&&(s.parts={},s.parts.top=o.top>=t.top,s.parts.left=o.left>=t.left,s.parts.bottom=o.bottom<=t.bottom,s.parts.right=o.right<=t.right),s}).scan({},function(e,t){return l.generateDirection&&t.inView&&e.elementRect&&(t.direction={horizontal:t.elementRect.left-e.elementRect.left,vertical:t.elementRect.top-e.elementRect.top}),t.changed=t.inView!==e.inView||!angular.equals(t.parts,e.parts)||!angular.equals(t.direction,e.direction),t}).filter(function(e){return!!e.changed&&!("initial"===e.event.type&&!e.inView)}),h=e(s.inView),m=f.subscribe(function(e){t.$applyAsync(function(){h(t,{$inview:e.inView,$inviewInfo:e})})});t.$on("$destroy",m)}}}function r(){return{restrict:"A",controller:["$element",function(e){this.element=e,this.eventsSignal=u(e,"scroll"),this.getViewportRect=function(){return e[0].getBoundingClientRect()}}]}}function n(){var e={top:0,left:0,width:window.innerWidth,right:window.innerWidth,height:window.innerHeight,bottom:window.innerHeight};if(e.height)return e;var t=document.compatMode;return"CSS1Compat"===t?(e.width=e.right=document.documentElement.clientWidth,e.height=e.bottom=document.documentElement.clientHeight):(e.width=e.right=document.body.clientWidth,e.height=e.bottom=document.body.clientHeight),e}function i(e,t){return!(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)}function o(e){return angular.isArray(e)?2==e.length?e.concat(e):3==e.length?e.concat([e[1]]):e:[e,e,e,e]}function a(e,t){if(!t)return e;var r={top:s(t[0])?parseFloat(t[0])*e.height:t[0],right:s(t[1])?parseFloat(t[1])*e.width:t[1],bottom:s(t[2])?parseFloat(t[2])*e.height:t[2],left:s(t[3])?parseFloat(t[3])*e.width:t[3]};return{top:e.top-r.top,left:e.left-r.left,bottom:e.bottom+r.bottom,right:e.right+r.right,height:e.height+r.top+r.bottom,width:e.width+r.left+r.right}}function s(e){return angular.isString(e)&&e.indexOf("%")>0}function c(e){this.didSubscribeFunc=e}function l(){var e=arguments;return new c(function(t){for(var r=[],n=e.length-1;n>=0;n--)r.push(e[n].subscribe(function(){t.apply(null,arguments)}));t.$dispose=function(){for(var e=r.length-1;e>=0;e--)r[e]&&r[e]()}})}function u(e,t){return new c(function(r){var n=function(e){r(e)},i=angular.element(e);i.on(t,n),r.$dispose=function(){i.off(t,n)}})}function d(e){return new c(function(t){setTimeout(function(){t(e)})})}var p=angular.module("angular-inview",[]).directive("inView",["$parse",e]).directive("inViewContainer",r);c.prototype.subscribe=function(e){this.didSubscribeFunc(e);var t=function(){e.$dispose&&(e.$dispose(),e.$dispose=null)};return t},c.prototype.map=function(e){var t=this;return new c(function(r){r.$dispose=t.subscribe(function(t){r(e(t))})})},c.prototype.filter=function(e){var t=this;return new c(function(r){r.$dispose=t.subscribe(function(t){e(t)&&r(t)})})},c.prototype.scan=function(e,t){var r=this;return new c(function(n){var i=e;n.$dispose=r.subscribe(function(e){i=t(i,e),n(i)})})},c.prototype.merge=function(e){return l(this,e)},c.prototype.throttle=function(e){var t,r,n=this;return new c(function(i){var o=n.subscribe(function(){var n=+new Date,o=arguments;t&&n<t+e?(clearTimeout(r),r=setTimeout(function(){t=n,i.apply(null,o)},e)):(t=n,i.apply(null,o))});i.$dispose=function(){clearTimeout(r),o&&o()}})},"function"==typeof define&&define.amd?define(["angular"],p):"undefined"!=typeof t&&t&&t.exports&&(t.exports=p)}()},{}],12:[function(e,t,r){!function(){angular.module("angular-jwt",["angular-jwt.options","angular-jwt.interceptor","angular-jwt.jwt","angular-jwt.authManager"]),angular.module("angular-jwt.authManager",[]).provider("authManager",function(){this.$get=["$rootScope","$injector","$location","jwtHelper","jwtInterceptor","jwtOptions",function(e,t,r,n,i,o){function a(e){var r=null;return r=Array.isArray(e)?t.invoke(e,this,{options:null}):e()}function s(e){if(Array.isArray(e)||angular.isFunction(e))return t.invoke(e,h,{});throw new Error("unauthenticatedRedirector must be a function")}function c(){var e=a(h.tokenGetter);if(e)return!n.isTokenExpired(e)}function l(){e.isAuthenticated=!0}function u(){e.isAuthenticated=!1}function d(){e.$on("$locationChangeStart",function(){var t=a(h.tokenGetter);t&&(n.isTokenExpired(t)?e.$broadcast("tokenHasExpired",t):l())})}function p(){e.$on("unauthenticated",function(){s(h.unauthenticatedRedirector),u()})}function f(e,t){if(!t)return!1;var r=t.$$route?t.$$route:t.data;if(r&&r.requiresLogin===!0){var i=a(h.tokenGetter);i&&!n.isTokenExpired(i)||(e.preventDefault(),s(h.unauthenticatedRedirector))}}var h=o.getConfig();e.isAuthenticated=!1;var m=t.has("$state")?"$stateChangeStart":"$routeChangeStart";return e.$on(m,f),{authenticate:l,unauthenticate:u,getToken:function(){return a(h.tokenGetter)},redirect:function(){return s(h.unauthenticatedRedirector)},checkAuthOnRefresh:d,redirectWhenUnauthenticated:p,isAuthenticated:c}}]}),angular.module("angular-jwt.interceptor",[]).provider("jwtInterceptor",function(){this.urlParam,this.authHeader,this.authPrefix,this.whiteListedDomains,this.tokenGetter;var e=this;this.$get=["$q","$injector","$rootScope","urlUtils","jwtOptions",function(t,r,n,i,o){function a(e){if(!i.isSameOrigin(e)&&!s.whiteListedDomains.length)throw new Error("As of v0.1.0, requests to domains other than the application's origin must be white listed. Use jwtOptionsProvider.config({ whiteListedDomains: [<domain>] }); to whitelist.");for(var t=i.urlResolve(e).hostname.toLowerCase(),r=0;r<s.whiteListedDomains.length;r++){var n=s.whiteListedDomains[r],o=n instanceof RegExp?n:new RegExp(n,"i");if(t.match(o))return!0}return!!i.isSameOrigin(e)}var s=angular.extend({},o.getConfig(),e);return{request:function(e){if(e.skipAuthorization||!a(e.url))return e;if(s.urlParam){if(e.params=e.params||{},e.params[s.urlParam])return e}else if(e.headers=e.headers||{},e.headers[s.authHeader])return e;var n=t.when(r.invoke(s.tokenGetter,this,{options:e}));return n.then(function(t){return t&&(s.urlParam?e.params[s.urlParam]=t:e.headers[s.authHeader]=s.authPrefix+t),e})},responseError:function(e){return 401===e.status&&n.$broadcast("unauthenticated",e),t.reject(e)}}}]}),angular.module("angular-jwt.jwt",[]).service("jwtHelper",["$window",function(e){this.urlBase64Decode=function(t){var r=t.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw"Illegal base64url string!"}return e.decodeURIComponent(escape(e.atob(r)))},this.decodeToken=function(e){var t=e.split(".");if(3!==t.length)throw new Error("JWT must have 3 parts");var r=this.urlBase64Decode(t[1]);if(!r)throw new Error("Cannot decode the token");return angular.fromJson(r)},this.getTokenExpirationDate=function(e){var t=this.decodeToken(e);if("undefined"==typeof t.exp)return null;var r=new Date(0);return r.setUTCSeconds(t.exp),r},this.isTokenExpired=function(e,t){var r=this.getTokenExpirationDate(e);return t=t||0,null!==r&&!(r.valueOf()>(new Date).valueOf()+1e3*t)}}]),angular.module("angular-jwt.options",[]).provider("jwtOptions",function(){var e={};this.config=function(t){e=t},this.$get=function(){function t(){this.config=angular.extend({},r,e)}var r={urlParam:null,authHeader:"Authorization",authPrefix:"Bearer ",whiteListedDomains:[],tokenGetter:function(){return null},loginPath:"/",unauthenticatedRedirectPath:"/",unauthenticatedRedirector:["$location",function(e){e.path(this.unauthenticatedRedirectPath)}]};return t.prototype.getConfig=function(){return this.config},new t}}),angular.module("angular-jwt.interceptor").service("urlUtils",function(){function e(e){var t=e;return r.setAttribute("href",t),t=r.href,r.setAttribute("href",t),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}function t(t){var r=angular.isString(t)?e(t):t;return r.protocol===n.protocol&&r.host===n.host}var r=document.createElement("a"),n=e(window.location.href);return{urlResolve:e,isSameOrigin:t}})}()},{}],13:[function(e,t,r){e("./dist/angular-jwt.js"),t.exports="angular-jwt"},{"./dist/angular-jwt.js":12}],14:[function(e,t,r){!function(){"use strict";angular.module("angularLoad",[]).service("angularLoad",["$document","$q","$timeout",function(e,t,r){function n(e){var n={};return function(i){if("undefined"==typeof n[i]){var o=t.defer(),a=e(i);a.onload=a.onreadystatechange=function(e){a.readyState&&"complete"!==a.readyState&&"loaded"!==a.readyState||r(function(){o.resolve(e)})},a.onerror=function(e){r(function(){o.reject(e)})},n[i]=o.promise}return n[i]}}var i=e[0];this.loadScript=n(function(e){var t=i.createElement("script");return t.src=e,i.body.appendChild(t),t}),this.loadCSS=n(function(e){var t=i.createElement("link");return t.rel="stylesheet",t.type="text/css",t.href=e,i.head.appendChild(t),t})}])}()},{}],15:[function(e,t,r){(function(n){!function(i,o){"use strict";var a=i&&i.angular||window&&window.angular;if("function"==typeof define&&define.amd)define(["localforage"],function(e){return o(a,e)});else{if("object"!=typeof r&&"object"!=typeof n)return o(a,i.localforage);"undefined"==typeof t?n.module.exports=o(a,e("localforage")):t.exports=o(a,e("localforage"))}}(this,function(e,t,r){"use strict";var n=e.module("LocalForageModule",["ng"]);return n.provider("$localForage",function(){var r={},n={name:"lf"},i={setItem:!1,removeItem:!1},o={};this.setNotify=function(e,t){i={setItem:e,removeItem:t}},this.config=function(t){if(!e.isObject(t))throw new Error("The config parameter should be an object");e.extend(n,t)},this.$get=["$rootScope","$q","$parse",function(a,s,c){var l=function(r){e.isDefined(r)?this._localforage=t.createInstance(r):(this._localforage=t,t.config(n))};l.prototype.createInstance=function(t){if(e.isObject(t)){if(t=e.extend({},n,t),e.isDefined(r[t.name]))throw new Error("A localForage instance with the name "+t.name+" is already defined.");return r[t.name]=new l(t),r[t.name]}throw new Error("The parameter should be a config object.")},l.prototype.instance=function(t){if(e.isUndefined(t))return r[n.name];if(e.isString(t)){if(e.isDefined(r[t]))return r[t];throw new Error("No localForage instance of that name exists.")}throw new Error("The parameter should be a string.")},l.prototype.setDriver=function(e){return this._localforage.setDriver(e)},l.prototype.driver=function(){return this._localforage.driver()},l.prototype.defineDriver=function(e){return this._localforage.defineDriver(e)},l.prototype.setItem=function(t,r){if(e.isUndefined(t))throw new Error("You must define a key to set");var n=this;if(e.isArray(t)){if(!e.isArray(r))throw new Error("If you set an array of keys, the values should be an array too");return s.all(t.map(function(e,t){return n.setItem(e,r[t])}))}var o=s.defer(),c=arguments,l=r;return e.isObject(l)&&e.isDefined(l.$promise)&&(l=e.extend({},r),delete l.$promise),n._localforage.setItem(n.prefix()+t,l).then(function(){i.setItem&&a.$broadcast("LocalForageModule.setItem",{key:t,newvalue:l,driver:n.driver()}),o.resolve(l)}).catch(function(e){n.onError(e,c,n.setItem,o)}),o.promise},l.prototype.getItem=function(t,r){if(e.isUndefined(t))throw new Error("You must define a key to get");var n,i=s.defer(),o=arguments,a=this;if(e.isArray(t)){var c=[],l=0;n=a._localforage.iterate(function(e,r){var n=t.indexOf(a.prefix()+r);if(n>-1&&(c[n]=e,l++),l===t.length)return c}).then(function(){for(var n=!0,o=0;o<t.length;o++)e.isUndefined(c[o])&&(c[o]=null,n=!1);n||!r?i.resolve(c):i.reject(c)})}else n=a._localforage.getItem(a.prefix()+t).then(function(e){r&&null===e?i.reject(e):i.resolve(e)});return n.then(null,function(e){a.onError(e,o,a.getItem,i)}),i.promise},l.prototype.iterate=function(t){if(e.isUndefined(t))throw new Error("You must define a callback to iterate");var r=s.defer(),n=arguments,i=this;return i._localforage.iterate(t).then(function(e){r.resolve(e)},function(e){i.onError(e,n,i.iterate,r)}),r.promise},l.prototype.removeItem=function(t){if(e.isUndefined(t))throw new Error("You must define a key to remove");var r=this;if(e.isArray(t)){var n=[];return e.forEach(t,function(e,t){n.push(r.removeItem(e))}),s.all(n)}var o=s.defer(),c=arguments;return r._localforage.removeItem(r.prefix()+t).then(function(){i.removeItem&&a.$broadcast("LocalForageModule.removeItem",{key:t,driver:r.driver()}),o.resolve()},function(e){r.onError(e,c,r.removeItem,o)}),o.promise},l.prototype.pull=function(t){if(e.isUndefined(t))throw new Error("You must define a key to pull");var r=this,n=s.defer(),i=function(e){n.reject(e)};return r.getItem(t).then(function(e){r.removeItem(t).then(function(){n.resolve(e)},i)},i),n.promise},l.prototype.clear=function(){var e=s.defer(),t=arguments,r=this;return r._localforage.clear().then(function(t){e.resolve()},function(n){r.onError(n,t,r.clear,e)}),e.promise},l.prototype.key=function(t){if(e.isUndefined(t))throw new Error("You must define a position to get for the key function");var r=s.defer(),n=arguments,i=this;return i._localforage.key(t).then(function(e){r.resolve(e)},function(e){i.onError(e,n,i.key,r)}),r.promise};var u=function(){var e=s.defer(),t=arguments,r=this;return r._localforage.keys().then(function(t){if(n.oldPrefix&&"localStorageWrapper"===r.driver()){for(var i=[],o=0,a=t.length;o<a;o++)i.push(t[o].substr(r.prefix().length,t[o].length));t=i}e.resolve(t)},function(n){r.onError(n,t,r.keys,e)}),e.promise};return l.prototype.keys=u,l.prototype.getKeys=u,l.prototype.length=function(){var e=s.defer(),t=arguments,r=this;return r._localforage.length().then(function(t){e.resolve(t)},function(n){r.onError(n,t,length,e)}),e.promise},l.prototype.bind=function(t,i){if(e.isString(i))i={key:i};else if(!e.isObject(i)||e.isUndefined(i.key))throw new Error("You must define a key to bind");var a={defaultValue:"",name:n.name};i=e.extend({},a,i);var s=r[i.name];if(e.isUndefined(s))throw new Error("You must use the name of an existing instance");var l=i.scopeKey||i.key,u=c(l);return s.getItem(i.key).then(function(r){return null!==r?u.assign(t,r):e.isUndefined(i.defaultValue)||(u.assign(t,i.defaultValue),s.setItem(i.key,i.defaultValue)),e.isDefined(o[i.key])&&o[i.key](),o[i.key]=t.$watch(l,function(t){e.isDefined(t)&&s.setItem(i.key,t)},!0),r})},l.prototype.unbind=function(t,i){if(e.isString(i))i={key:i};else if(!e.isObject(i)||e.isUndefined(i.key))throw new Error("You must define a key to unbind");var a={scopeKey:i.key,name:n.name};i=e.extend({},a,i);var s=r[i.name];if(e.isUndefined(s))throw new Error("You must use the name of an existing instance");return c(i.scopeKey).assign(t,null),e.isDefined(o[i.key])&&(o[i.key](),delete o[i.key]),s.removeItem(i.key)},l.prototype.prefix=function(){return"localStorageWrapper"===this.driver()&&n.oldPrefix?this._localforage.config().name+".":""},l.prototype.onError=function(t,r,n,i){if((e.isObject(t)&&t.name?"InvalidStateError"===t.name:e.isString(t)&&"InvalidStateError"===t)&&"asyncStorage"===this.driver()||e.isObject(t)&&t.code&&5===t.code){var o=this;o.setDriver("localStorageWrapper").then(function(){n.apply(o,r).then(function(e){i.resolve(e)},function(e){i.reject(e)})},function(){i.reject(t)})}else i.reject(t)},r[n.name]=new l,r[n.name]}]}),n.directive("localForage",["$localForage",function(t){return{restrict:"A",link:function(r,n,i){var o=r.$eval(i.localForage);e.isObject(o)&&e.isDefined(o.key)?t.bind(r,o):t.bind(r,i.localForage)}}}]),n.name})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{localforage:39}],16:[function(e,t,r){!function(e,t,r){"use strict";!function(){t.module("ngMaterial",["ng","ngAnimate","ngAria","material.core","material.core.gestures","material.core.layout","material.core.theming.palette","material.core.theming","material.core.animate","material.components.autocomplete","material.components.backdrop","material.components.button","material.components.bottomSheet","material.components.card","material.components.checkbox","material.components.chips","material.components.colors","material.components.content","material.components.datepicker","material.components.dialog","material.components.divider","material.components.fabActions","material.components.fabShared","material.components.fabSpeedDial","material.components.fabToolbar","material.components.fabTrigger","material.components.gridList","material.components.icon","material.components.list","material.components.input","material.components.menuBar","material.components.menu","material.components.navBar","material.components.panel","material.components.progressCircular","material.components.progressLinear","material.components.radioButton","material.components.sidenav","material.components.select","material.components.slider","material.components.showHide","material.components.swipe","material.components.sticky","material.components.switch","material.components.subheader","material.components.tabs","material.components.toast","material.components.toolbar","material.components.tooltip","material.components.virtualRepeat","material.components.whiteframe"])}(),function(){function e(e,t){if(t.has("$swipe")){var r="You are using the ngTouch module. \nAngular Material already has mobile click, tap, and swipe support... \nngTouch is not supported with Angular Material!";e.warn(r)}}function r(e,t){e.decorator("$$rAF",["$delegate",n]),t.theme("default").primaryPalette("indigo").accentPalette("pink").warnPalette("deep-orange").backgroundPalette("grey")}function n(e){return e.throttle=function(t){var r,n,i,o;return function(){r=arguments,o=this,i=t,n||(n=!0,e(function(){i.apply(o,Array.prototype.slice.call(r)),n=!1}))}},e}t.module("material.core",["ngAnimate","material.core.animate","material.core.layout","material.core.gestures","material.core.theming"]).config(r).run(e),e.$inject=["$log","$injector"],r.$inject=["$provide","$mdThemingProvider"],n.$inject=["$delegate"]}(),function(){function e(){return{restrict:"A",link:r}}function r(e,t,r){var n=r.mdAutoFocus||r.mdAutofocus||r.mdSidenavFocus;e.$watch(n,function(e){t.toggleClass("_md-autofocus",e)})}t.module("material.core").directive("mdAutofocus",e).directive("mdAutoFocus",e).directive("mdSidenavFocus",e)}(),function(){function e(){function e(e){var t="#"===e[0]?e.substr(1):e,r=t.length/3,n=t.substr(0,r),i=t.substr(r,r),o=t.substr(2*r);return 1===r&&(n+=n,i+=i,o+=o),"rgba("+parseInt(n,16)+","+parseInt(i,16)+","+parseInt(o,16)+",0.1)"}function t(e){e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);var t=e&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):"";return t.toUpperCase()}function r(e){return e.replace(")",", 0.1)").replace("(","a(")}function n(e){return e?e.replace("rgba","rgb").replace(/,[^\),]+\)/,")"):"rgb(0,0,0)"}return{rgbaToHex:t,hexToRgba:e,rgbToRgba:r,rgbaToRgb:n}}t.module("material.core").factory("$mdColorUtil",e)}(),function(){function e(e){function r(e){var t=o+"-"+e,r=i(t),a=r.charAt(0).toLowerCase()+r.substring(1);return n(e)?e:n(r)?r:n(a)?a:e}function n(e){return t.isDefined(c.style[e])}function i(e){return e.replace(s,function(e,t,r,n){return n?r.toUpperCase():r})}var o=e.vendorPrefix,a=/webkit/i.test(o),s=/([:\-_]+(.))/g,c=document.createElement("div");return{KEY_CODE:{COMMA:188,SEMICOLON:186,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,TAB:9,BACKSPACE:8,DELETE:46},CSS:{TRANSITIONEND:"transitionend"+(a?" webkitTransitionEnd":""),ANIMATIONEND:"animationend"+(a?" webkitAnimationEnd":""),TRANSFORM:r("transform"),TRANSFORM_ORIGIN:r("transformOrigin"),TRANSITION:r("transition"),TRANSITION_DURATION:r("transitionDuration"),ANIMATION_PLAY_STATE:r("animationPlayState"),ANIMATION_DURATION:r("animationDuration"),ANIMATION_NAME:r("animationName"),ANIMATION_TIMING:r("animationTimingFunction"),ANIMATION_DIRECTION:r("animationDirection")},MEDIA:{xs:"(max-width: 599px)","gt-xs":"(min-width: 600px)",sm:"(min-width: 600px) and (max-width: 959px)","gt-sm":"(min-width: 960px)",md:"(min-width: 960px) and (max-width: 1279px)","gt-md":"(min-width: 1280px)",lg:"(min-width: 1280px) and (max-width: 1919px)","gt-lg":"(min-width: 1920px)",xl:"(min-width: 1920px)",landscape:"(orientation: landscape)",portrait:"(orientation: portrait)",print:"print"},MEDIA_PRIORITY:["xl","gt-lg","lg","gt-md","md","gt-sm","sm","gt-xs","xs","landscape","portrait","print"]}}t.module("material.core").factory("$mdConstant",e),e.$inject=["$sniffer"]}(),function(){function e(e,r){function n(){return[].concat(y)}function i(){return y.length}function o(e){return y.length&&e>-1&&e<y.length}function a(e){return!!e&&o(p(e)+1)}function s(e){return!!e&&o(p(e)-1)}function c(e){return o(e)?y[e]:null}function l(e,t){return y.filter(function(r){return r[e]===t})}function u(e,r){return e?(t.isNumber(r)||(r=y.length),y.splice(r,0,e),p(e)):-1}function d(e){f(e)&&y.splice(p(e),1)}function p(e){return y.indexOf(e)}function f(e){return e&&p(e)>-1}function h(){return y.length?y[0]:null}function m(){return y.length?y[y.length-1]:null}function g(e,n,i,a){i=i||v;for(var s=p(n);;){if(!o(s))return null;var c=s+(e?-1:1),l=null;if(o(c)?l=y[c]:r&&(l=e?m():h(),c=p(l)),null===l||c===a)return null;if(i(l))return l;t.isUndefined(a)&&(a=c),s=c}}var v=function(){return!0};e&&!t.isArray(e)&&(e=Array.prototype.slice.call(e)),r=!!r;var y=e||[];return{items:n,count:i,inRange:o,contains:f,indexOf:p,itemAt:c,findBy:l,add:u,remove:d,first:h,last:m,next:t.bind(null,g,!1),previous:t.bind(null,g,!0),hasPrevious:s,hasNext:a}}t.module("material.core").config(["$provide",function(t){t.decorator("$mdUtil",["$delegate",function(t){return t.iterator=e,t}])}])}(),function(){function e(e,r,n){function i(e){var r=p[e];t.isUndefined(r)&&(r=p[e]=o(e));var n=h[r];return t.isUndefined(n)&&(n=a(r)),
n}function o(t){return e.MEDIA[t]||("("!==t.charAt(0)?"("+t+")":t)}function a(e){var t=f[e];return t||(t=f[e]=n.matchMedia(e)),t.addListener(s),h[t.media]=!!t.matches}function s(e){r.$evalAsync(function(){h[e.media]=!!e.matches})}function c(e){return f[e]}function l(t,r){for(var n=0;n<e.MEDIA_PRIORITY.length;n++){var i=e.MEDIA_PRIORITY[n];if(f[p[i]].matches){var o=d(t,r+"-"+i);if(t[o])return t[o]}}return t[d(t,r)]}function u(r,n,i){var o=[];return r.forEach(function(r){var a=d(n,r);t.isDefined(n[a])&&o.push(n.$observe(a,t.bind(void 0,i,null)));for(var s in e.MEDIA)a=d(n,r+"-"+s),t.isDefined(n[a])&&o.push(n.$observe(a,t.bind(void 0,i,s)))}),function(){o.forEach(function(e){e()})}}function d(e,t){return m[t]||(m[t]=e.$normalize(t))}var p={},f={},h={},m={};return i.getResponsiveAttribute=l,i.getQuery=c,i.watchResponsiveAttributes=u,i}t.module("material.core").factory("$mdMedia",e),e.$inject=["$mdConstant","$rootScope","$window"]}(),function(){function e(e,r){function n(e){return e=t.isArray(e)?e:[e],e.forEach(function(t){a.forEach(function(r){e.push(r+"-"+t)})}),e}function i(e){return e=t.isArray(e)?e:[e],n(e).map(function(e){return"["+e+"]"}).join(",")}function o(e,t){e=e[0]||e;for(var r=n(t),i=0;i<r.length;i++)if(e.hasAttribute(r[i]))return!0;return!1}var a=["data","x"];return e?r?i(e):n(e):{buildList:n,buildSelector:i,hasAttribute:o}}t.module("material.core").config(["$provide",function(t){t.decorator("$mdUtil",["$delegate",function(t){return t.prefixer=e,t}])}])}(),function(){function n(n,o,a,s,c,l,u,d,p){function f(e){return e[0]||e}var h=l.startSymbol(),m=l.endSymbol(),g="{{"===h&&"}}"===m,v=function(e,r,n){var i=!1;if(e&&e.length){var o=p.getComputedStyle(e[0]);i=t.isDefined(o[r])&&(!n||o[r]==n)}return i},y={dom:{},now:e.performance?t.bind(e.performance,e.performance.now):Date.now||function(){return(new Date).getTime()},bidi:function(e,r,i,o){function a(e){return e?s(e)?e:e+"px":"0"}function s(e){return String(e).indexOf("px")>-1}var c=!("rtl"==n[0].dir||"rtl"==n[0].body.dir);return 0==arguments.length?c?"ltr":"rtl":void(c&&t.isDefined(i)?t.element(e).css(r,a(i)):!c&&t.isDefined(o)&&t.element(e).css(r,a(o)))},clientRect:function(e,t,r){var n=f(e);t=f(t||n.offsetParent||document.body);var i=n.getBoundingClientRect(),o=r?t.getBoundingClientRect():{left:0,top:0,width:0,height:0};return{left:i.left-o.left,top:i.top-o.top,width:i.width,height:i.height}},offsetRect:function(e,t){return y.clientRect(e,t,!0)},nodesToArray:function(e){e=e||[];for(var t=[],r=0;r<e.length;++r)t.push(e.item(r));return t},scrollTop:function(e){e=t.element(e||n[0].body);var i=e[0]==n[0].body?n[0].body:r,o=i?i.scrollTop+i.parentElement.scrollTop:0;return o||Math.abs(e[0].getBoundingClientRect().top)},findFocusTarget:function(e,r){function n(e,r){var n,i=e[0].querySelectorAll(r);return i&&i.length&&i.length&&t.forEach(i,function(e){e=t.element(e);var r=e.hasClass("_md-autofocus");r&&(n=e)}),n}var i,o=this.prefixer("md-autofocus",!0);return i=n(e,r||o),i||r==o||(i=n(e,this.prefixer("md-auto-focus",!0)),i||(i=n(e,o))),i},disableScrollAround:function(e,r){function i(e){function r(e){e.preventDefault()}e=t.element(e||s)[0];var n=t.element('<div class="md-scroll-mask">  <div class="md-scroll-mask-bar"></div></div>');return e.appendChild(n[0]),n.on("wheel",r),n.on("touchmove",r),function(){n.off("wheel"),n.off("touchmove"),n[0].parentNode.removeChild(n[0]),delete y.disableScrollAround._enableScrolling}}function o(){var e=s.parentNode,t=e.style.cssText||"",r=s.style.cssText||"",n=y.scrollTop(s),i=s.clientWidth,o=s.scrollHeight>s.clientHeight+1;return o&&a(s,{position:"fixed",width:"100%",top:-n+"px"}),s.clientWidth<i&&(s.style.overflow="hidden"),o&&(document.documentElement.style.overflowY="scroll"),function(){s.style.cssText=r,e.style.cssText=t,s.scrollTop=n,e.scrollTop=n}}function a(e,t){for(var r in t)e.style[r]=t[r]}if(y.disableScrollAround._count=y.disableScrollAround._count||0,++y.disableScrollAround._count,y.disableScrollAround._enableScrolling)return y.disableScrollAround._enableScrolling;var s=n[0].body,c=o(),l=i(r);return y.disableScrollAround._enableScrolling=function(){--y.disableScrollAround._count||(c(),l(),delete y.disableScrollAround._enableScrolling)}},enableScrolling:function(){var e=this.disableScrollAround._enableScrolling;e&&e()},floatingScrollbars:function(){if(this.floatingScrollbars.cached===r){var e=t.element("<div><div></div></div>").css({width:"100%","z-index":-1,position:"absolute",height:"35px","overflow-y":"scroll"});e.children().css("height","60px"),n[0].body.appendChild(e[0]),this.floatingScrollbars.cached=e[0].offsetWidth==e[0].childNodes[0].offsetWidth,e.remove()}return this.floatingScrollbars.cached},forceFocus:function(t){var r=t[0]||t;document.addEventListener("click",function e(t){t.target===r&&t.$focus&&(r.focus(),t.stopImmediatePropagation(),t.preventDefault(),r.removeEventListener("click",e))},!0);var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!1,!0,e,{},0,0,0,0,!1,!1,!1,!1,0,null),n.$material=!0,n.$focus=!0,r.dispatchEvent(n)},createBackdrop:function(e,t){return a(y.supplant('<md-backdrop class="{0}">',[t]))(e)},supplant:function(e,t,r){return r=r||/\{([^\{\}]*)\}/g,e.replace(r,function(e,r){var n=r.split("."),i=t;try{for(var o in n)n.hasOwnProperty(o)&&(i=i[n[o]])}catch(t){i=e}return"string"==typeof i||"number"==typeof i?i:e})},fakeNgModel:function(){return{$fake:!0,$setTouched:t.noop,$setViewValue:function(e){this.$viewValue=e,this.$render(e),this.$viewChangeListeners.forEach(function(e){e()})},$isEmpty:function(e){return 0===(""+e).length},$parsers:[],$formatters:[],$viewChangeListeners:[],$render:t.noop}},debounce:function(e,t,n,i){var a;return function(){var s=n,c=Array.prototype.slice.call(arguments);o.cancel(a),a=o(function(){a=r,e.apply(s,c)},t||10,i)}},throttle:function(e,t){var r;return function(){var n=this,i=arguments,o=y.now();(!r||o-r>t)&&(e.apply(n,i),r=o)}},time:function(e){var t=y.now();return e(),y.now()-t},valueOnUse:function(e,t,r){var n=null,i=Array.prototype.slice.call(arguments),o=i.length>3?i.slice(3):[];Object.defineProperty(e,t,{get:function(){return null===n&&(n=r.apply(e,o)),n}})},nextUid:function(){return""+i++},disconnectScope:function(e){if(e&&e.$root!==e&&!e.$$destroyed){var t=e.$parent;e.$$disconnected=!0,t.$$childHead===e&&(t.$$childHead=e.$$nextSibling),t.$$childTail===e&&(t.$$childTail=e.$$prevSibling),e.$$prevSibling&&(e.$$prevSibling.$$nextSibling=e.$$nextSibling),e.$$nextSibling&&(e.$$nextSibling.$$prevSibling=e.$$prevSibling),e.$$nextSibling=e.$$prevSibling=null}},reconnectScope:function(e){if(e&&e.$root!==e&&e.$$disconnected){var t=e,r=t.$parent;t.$$disconnected=!1,t.$$prevSibling=r.$$childTail,r.$$childHead?(r.$$childTail.$$nextSibling=t,r.$$childTail=t):r.$$childHead=r.$$childTail=t}},getClosest:function(e,r,n){if(e instanceof t.element&&(e=e[0]),r=r.toUpperCase(),n&&(e=e.parentNode),!e)return null;do if(e.nodeName===r)return e;while(e=e.parentNode);return null},elementContains:function(r,n){var i=e.Node&&e.Node.prototype&&Node.prototype.contains,o=i?t.bind(r,r.contains):t.bind(r,function(e){return r===n||!!(16&this.compareDocumentPosition(e))});return o(n)},extractElementByName:function(e,r,n,i){function o(e){return a(e)||(n?s(e):null)}function a(e){if(e)for(var t=0,n=e.length;t<n;t++)if(e[t].nodeName.toLowerCase()===r)return e[t];return null}function s(e){var t;if(e)for(var r=0,n=e.length;r<n;r++){var i=e[r];if(!t)for(var a=0,s=i.childNodes.length;a<s;a++)t=t||o([i.childNodes[a]])}return t}var c=o(e);return!c&&i&&u.warn(y.supplant("Unable to find node '{0}' in element '{1}'.",[r,e[0].outerHTML])),t.element(c||e)},initOptionalProperties:function(e,r,n){n=n||{},t.forEach(e.$$isolateBindings,function(i,o){if(i.optional&&t.isUndefined(e[o])){var a=t.isDefined(r[i.attrName]);e[o]=t.isDefined(n[o])?n[o]:a}})},nextTick:function(e,t,r){function n(){var e=i.queue,t=i.digest;i.queue=[],i.timeout=null,i.digest=!1,e.forEach(function(e){var t=e.scope&&e.scope.$$destroyed;t||e.callback()}),t&&s.$digest()}var i=y.nextTick,a=i.timeout,c=i.queue||[];return c.push({scope:r,callback:e}),null==t&&(t=!0),i.digest=i.digest||t,i.queue=c,a||(i.timeout=o(n,0,!1))},processTemplate:function(e){return g?e:e&&t.isString(e)?e.replace(/\{\{/g,h).replace(/}}/g,m):e},getParentWithPointerEvents:function(e){for(var t=e.parent();v(t,"pointer-events","none");)t=t.parent();return t},getNearestContentElement:function(e){for(var t=e.parent()[0];t&&t!==d[0]&&t!==document.body&&"MD-CONTENT"!==t.nodeName.toUpperCase();)t=t.parentNode;return t},parseAttributeBoolean:function(e,t){return""===e||!!e&&(t===!1||"false"!==e&&"0"!==e)},hasComputedStyle:v};return y.dom.animator=c(y),y}var i=0;t.module("material.core").factory("$mdUtil",n),n.$inject=["$document","$timeout","$compile","$rootScope","$$mdAnimate","$interpolate","$log","$rootElement","$window"],t.element.prototype.focus=t.element.prototype.focus||function(){return this.length&&this[0].focus(),this},t.element.prototype.blur=t.element.prototype.blur||function(){return this.length&&this[0].blur(),this}}(),function(){function e(e,r,n,i){function o(e,n,i){var o=t.element(e)[0]||e;!o||o.hasAttribute(n)&&0!==o.getAttribute(n).length||l(o,n)||(i=t.isString(i)?i.trim():"",i.length?e.attr(n,i):r.warn('ARIA: Attribute "',n,'", required for accessibility, is missing on node:',o))}function a(t,r,n){e(function(){o(t,r,n())})}function s(e,t){var r=c(e)||"",n=r.indexOf(i.startSymbol())>-1;n?a(e,t,function(){return c(e)}):o(e,t,r)}function c(e){function t(t){for(;t.parentNode&&(t=t.parentNode)!==e;)if(t.getAttribute&&"true"===t.getAttribute("aria-hidden"))return!0}e=e[0]||e;for(var r,n=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1),i="";r=n.nextNode();)t(r)||(i+=r.textContent);return i.trim()||""}function l(e,t){function r(e){var t=e.currentStyle?e.currentStyle:n.getComputedStyle(e);return"none"===t.display}var i=e.hasChildNodes(),o=!1;if(i)for(var a=e.childNodes,s=0;s<a.length;s++){var c=a[s];1===c.nodeType&&c.hasAttribute(t)&&(r(c)||(o=!0))}return o}return{expect:o,expectAsync:a,expectWithText:s}}t.module("material.core").service("$mdAria",e),e.$inject=["$$rAF","$log","$window","$interpolate"]}(),function(){function e(e,r,n,i,o){this.compile=function(a){var s=a.templateUrl,c=a.template||"",l=a.controller,u=a.controllerAs,d=t.extend({},a.resolve||{}),p=t.extend({},a.locals||{}),f=a.transformTemplate||t.identity,h=a.bindToController;return t.forEach(d,function(e,r){t.isString(e)?d[r]=n.get(e):d[r]=n.invoke(e)}),t.extend(d,p),s?d.$template=r(s).then(function(e){return e}):d.$template=e.when(c),e.all(d).then(function(e){var r,n=f(e.$template,a),s=a.element||t.element("<div>").html(n.trim()).contents(),c=i(s);return r={locals:e,element:s,link:function(n){if(e.$scope=n,l){var i=o(l,e,!0);h&&t.extend(i.instance,e);var a=i();s.data("$ngControllerController",a),s.children().data("$ngControllerController",a),u&&(n[u]=a),r.controller=a}return c(n)}}})}}t.module("material.core").service("$mdCompiler",e),e.$inject=["$q","$templateRequest","$injector","$compile","$controller"]}(),function(){function r(){}function n(r,n,i){function o(e){return function(t,r){r.distance<this.state.options.maxDistance&&this.dispatchEvent(t,e,r)}}function a(e,t,r){var n=h[t.replace(/^\$md./,"")];if(!n)throw new Error("Failed to register element with handler "+t+". Available handlers: "+Object.keys(h).join(", "));return n.registerElement(e,r)}function c(e,n){var i=new r(e);return t.extend(i,n),h[e]=i,g}var l=navigator.userAgent||navigator.vendor||e.opera,d=l.match(/ipad|iphone|ipod/i),p=l.match(/android/i),f="undefined"!=typeof e.jQuery&&t.element===e.jQuery,g={handler:c,register:a,isHijackingClicks:(d||p)&&!f&&!m};if(g.isHijackingClicks){var v=6;g.handler("click",{options:{maxDistance:v},onEnd:o("click")}),g.handler("focus",{options:{maxDistance:v},onEnd:function(e,t){function r(e){var t=["INPUT","SELECT","BUTTON","TEXTAREA","VIDEO","AUDIO"];return"-1"!=e.getAttribute("tabindex")&&!e.hasAttribute("DISABLED")&&(e.hasAttribute("tabindex")||e.hasAttribute("href")||t.indexOf(e.nodeName)!=-1)}t.distance<this.state.options.maxDistance&&r(e.target)&&(this.dispatchEvent(e,"focus",t),e.target.focus())}}),g.handler("mouseup",{options:{maxDistance:v},onEnd:o("mouseup")}),g.handler("mousedown",{onStart:function(e){this.dispatchEvent(e,"mousedown")}})}return g.handler("press",{onStart:function(e,t){this.dispatchEvent(e,"$md.pressdown")},onEnd:function(e,t){this.dispatchEvent(e,"$md.pressup")}}).handler("hold",{options:{maxDistance:6,delay:500},onCancel:function(){i.cancel(this.state.timeout)},onStart:function(e,r){return this.state.registeredParent?(this.state.pos={x:r.x,y:r.y},void(this.state.timeout=i(t.bind(this,function(){this.dispatchEvent(e,"$md.hold"),this.cancel()}),this.state.options.delay,!1))):this.cancel()},onMove:function(e,t){e.preventDefault();var r=this.state.pos.x-t.x,n=this.state.pos.y-t.y;Math.sqrt(r*r+n*n)>this.options.maxDistance&&this.cancel()},onEnd:function(){this.onCancel()}}).handler("drag",{options:{minDistance:6,horizontal:!0,cancelMultiplier:1.5},onStart:function(e){this.state.registeredParent||this.cancel()},onMove:function(e,t){var r,n;e.preventDefault(),this.state.dragPointer?this.dispatchDragMove(e):(this.state.options.horizontal?(r=Math.abs(t.distanceX)>this.state.options.minDistance,n=Math.abs(t.distanceY)>this.state.options.minDistance*this.state.options.cancelMultiplier):(r=Math.abs(t.distanceY)>this.state.options.minDistance,n=Math.abs(t.distanceX)>this.state.options.minDistance*this.state.options.cancelMultiplier),r?(this.state.dragPointer=s(e),u(e,this.state.dragPointer),this.dispatchEvent(e,"$md.dragstart",this.state.dragPointer)):n&&this.cancel())},dispatchDragMove:n.throttle(function(e){this.state.isRunning&&(u(e,this.state.dragPointer),this.dispatchEvent(e,"$md.drag",this.state.dragPointer))}),onEnd:function(e,t){this.state.dragPointer&&(u(e,this.state.dragPointer),this.dispatchEvent(e,"$md.dragend",this.state.dragPointer))}}).handler("swipe",{options:{minVelocity:.65,minDistance:10},onEnd:function(e,t){var r;Math.abs(t.velocityX)>this.state.options.minVelocity&&Math.abs(t.distanceX)>this.state.options.minDistance?(r="left"==t.directionX?"$md.swipeleft":"$md.swiperight",this.dispatchEvent(e,r)):Math.abs(t.velocityY)>this.state.options.minVelocity&&Math.abs(t.distanceY)>this.state.options.minDistance&&(r="up"==t.directionY?"$md.swipeup":"$md.swipedown",this.dispatchEvent(e,r))}})}function i(e){this.name=e,this.state={}}function o(){function r(e,r,n){n=n||p;var i=new t.element.Event(r);i.$material=!0,i.pointer=n,i.srcEvent=e,t.extend(i,{clientX:n.x,clientY:n.y,screenX:n.x,screenY:n.y,pageX:n.x,pageY:n.y,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey}),t.element(n.target).trigger(i)}function n(t,r,n){n=n||p;var i;"click"===r||"mouseup"==r||"mousedown"==r?(i=document.createEvent("MouseEvents"),i.initMouseEvent(r,!0,!0,e,t.detail,n.x,n.y,n.x,n.y,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget||null)):(i=document.createEvent("CustomEvent"),i.initCustomEvent(r,!0,!0,{})),i.$material=!0,i.pointer=n,i.srcEvent=t,n.target.dispatchEvent(i)}var o="undefined"!=typeof e.jQuery&&t.element===e.jQuery;return i.prototype={options:{},dispatchEvent:o?r:n,onStart:t.noop,onMove:t.noop,onEnd:t.noop,onCancel:t.noop,start:function(e,r){if(!this.state.isRunning){var n=this.getNearestParent(e.target),i=n&&n.$mdGesture[this.name]||{};this.state={isRunning:!0,options:t.extend({},this.options,i),registeredParent:n},this.onStart(e,r)}},move:function(e,t){this.state.isRunning&&this.onMove(e,t)},end:function(e,t){this.state.isRunning&&(this.onEnd(e,t),this.state.isRunning=!1)},cancel:function(e,t){this.onCancel(e,t),this.state={}},getNearestParent:function(e){for(var t=e;t;){if((t.$mdGesture||{})[this.name])return t;t=t.parentNode}return null},registerElement:function(e,t){function r(){delete e[0].$mdGesture[n.name],e.off("$destroy",r)}var n=this;return e[0].$mdGesture=e[0].$mdGesture||{},e[0].$mdGesture[this.name]=t||{},e.on("$destroy",r),r}},i}function a(e,r){function n(e){var t=!e.clientX&&!e.clientY;t||e.$material||e.isIonicTap||l(e)||(e.preventDefault(),e.stopPropagation())}function i(e){var t=0===e.clientX&&0===e.clientY;t||e.$material||e.isIonicTap||l(e)?(g=null,"label"==e.target.tagName.toLowerCase()&&(g={x:e.x,y:e.y})):(e.preventDefault(),e.stopPropagation(),g=null)}function o(e,t){var n;for(var i in h)n=h[i],n instanceof r&&("start"===e&&n.cancel(),n[e](t,p))}function a(e){if(!p){var t=+Date.now();f&&!c(e,f)&&t-f.endTime<1500||(p=s(e),o("start",e))}}function d(e){p&&c(e,p)&&(u(e,p),o("move",e))}function m(e){p&&c(e,p)&&(u(e,p),p.endTime=+Date.now(),o("end",e),f=p,p=null)}document.contains||(document.contains=function(e){return document.body.contains(e)}),!v&&e.isHijackingClicks&&(document.addEventListener("click",i,!0),document.addEventListener("mouseup",n,!0),document.addEventListener("mousedown",n,!0),document.addEventListener("focus",n,!0),v=!0);var y="mousedown touchstart pointerdown",b="mousemove touchmove pointermove",S="mouseup mouseleave touchend touchcancel pointerup pointercancel";t.element(document).on(y,a).on(b,d).on(S,m).on("$$mdGestureReset",function(){f=p=null})}function s(e){var t=d(e),r={startTime:+Date.now(),target:e.target,type:e.type.charAt(0)};return r.startX=r.x=t.pageX,r.startY=r.y=t.pageY,r}function c(e,t){return e&&t&&e.type.charAt(0)===t.type}function l(e){return g&&g.x==e.x&&g.y==e.y}function u(e,t){var r=d(e),n=t.x=r.pageX,i=t.y=r.pageY;t.distanceX=n-t.startX,t.distanceY=i-t.startY,t.distance=Math.sqrt(t.distanceX*t.distanceX+t.distanceY*t.distanceY),t.directionX=t.distanceX>0?"right":t.distanceX<0?"left":"",t.directionY=t.distanceY>0?"down":t.distanceY<0?"up":"",t.duration=+Date.now()-t.startTime,t.velocityX=t.distanceX/t.duration,t.velocityY=t.distanceY/t.duration}function d(e){return e=e.originalEvent||e,e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0]||e}var p,f,h={},m=!1,g=null,v=!1;t.module("material.core.gestures",[]).provider("$mdGesture",r).factory("$$MdGestureHandler",o).run(a),r.prototype={skipClickHijack:function(){return m=!0},$get:["$$MdGestureHandler","$$rAF","$timeout",function(e,t,r){return new n(e,t,r)}]},n.$inject=["$$MdGestureHandler","$$rAF","$timeout"],a.$inject=["$mdGesture","$$MdGestureHandler"]}(),function(){function e(){function e(e){function r(e){return c.optionsFactory=e.options,c.methods=(e.methods||[]).concat(a),l}function n(e,t){return s[e]=t,l}function i(t,r){if(r=r||{},r.methods=r.methods||[],r.options=r.options||function(){return{}},/^cancel|hide|show$/.test(t))throw new Error("Preset '"+t+"' in "+e+" is reserved!");if(r.methods.indexOf("_options")>-1)throw new Error("Method '_options' in "+e+" is reserved!");return c.presets[t]={methods:r.methods.concat(a),optionsFactory:r.options,argOption:r.argOption},l}function o(r,n){function i(e){return e=e||{},e._options&&(e=e._options),d.show(t.extend({},u,e))}function o(e){return d.destroy(e)}function a(t,r){var i={};return i[e]=p,n.invoke(t||function(){return r},{},i)}var l,u,d=r(),p={hide:d.hide,cancel:d.cancel,show:i,destroy:o};return l=c.methods||[],u=a(c.optionsFactory,{}),t.forEach(s,function(e,t){p[t]=e}),t.forEach(c.presets,function(e,r){function n(e){this._options=t.extend({},i,e)}var i=a(e.optionsFactory,{}),o=(e.methods||[]).concat(l);if(t.extend(i,{$type:r}),t.forEach(o,function(e){n.prototype[e]=function(t){return this._options[e]=t,this}}),e.argOption){var s="show"+r.charAt(0).toUpperCase()+r.slice(1);p[s]=function(e){var t=p[r](e);return p.show(t)}}p[r]=function(r){return arguments.length&&e.argOption&&!t.isObject(r)&&!t.isArray(r)?(new n)[e.argOption](r):new n(r)}}),p}var a=["onHide","onShow","onRemove"],s={},c={presets:{}},l={setDefaults:r,addPreset:i,addMethod:n,$get:o};return l.addPreset("build",{methods:["controller","controllerAs","resolve","template","templateUrl","themable","transformTemplate","parent"]}),o.$inject=["$$interimElement","$injector"],l}function n(e,n,i,o,a,s,c,l,u,d,p){return function(){function f(e){e=e||{};var t=new v(e||{}),r=!e.skipHide&&S.length?y.cancel():n.when(!0);return r.finally(function(){S.push(t),t.show().catch(function(e){return e})}),t.deferred.promise}function h(e,t){function i(r){return r.remove(e,!1,t||{}).catch(function(e){return e}),r.deferred.promise}if(!S.length)return n.when(e);if(t=t||{},t.closeAll){var o=n.all(S.reverse().map(i));return S=[],o}if(t.closeTo!==r)return n.all(S.splice(t.closeTo).map(i));var a=S.pop();return i(a)}function m(e,r){var i=S.pop();return i?(i.remove(e,!0,r||{}).catch(function(e){return e}),i.deferred.promise.catch(t.noop)):n.when(e)}function g(e){var r=e?null:S.shift(),i=t.element(e).length?t.element(e)[0].parentNode:null;if(i){var o=S.filter(function(e){var t=e.options.element[0];return t===i});o.length>0&&(r=o[0],S.splice(S.indexOf(r),1))}return r?r.remove(b,!1,{$destroy:!0}):n.when(b)}function v(p){function f(){return n(function(e,t){function r(e){E.deferred.reject(e),t(e)}g(p).then(function(t){T=v(t,p),O=_(T,p,t.controller).then(e,r)},r)})}function h(e,r,i){function o(e){E.deferred.resolve(e)}function a(e){E.deferred.reject(e)}return T?(p=t.extend(p||{},i||{}),p.cancelAutoHide&&p.cancelAutoHide(),p.element.triggerHandler("$mdInterimElementRemove"),p.$destroy===!0?w(p.element,p).then(function(){r&&a(e)||o(e)}):(n.when(O).finally(function(){w(p.element,p).then(function(){r&&a(e)||o(e)},a)}),E.deferred.promise)):n.when(!1)}function m(e){return e=e||{},e.template&&(e.template=l.processTemplate(e.template)),t.extend({preserveScope:!1,cancelAutoHide:t.noop,scope:e.scope||o.$new(e.isolateScope),onShow:function(e,t,r){return c.enter(t,r.parent)},onRemove:function(e,t){return t&&c.leave(t)||n.when()}},e)}function g(e){var t=e.skipCompile?null:u.compile(e);return t||n(function(t){t({locals:{},link:function(){return e.element}})})}function v(e,r){t.extend(e.locals,r);var n=e.link(r.scope);return r.element=n,r.parent=b(n,r),r.themable&&d(n),n}function b(r,n){var i=n.parent;if(i=t.isFunction(i)?i(n.scope,r,n):t.isString(i)?t.element(e[0].querySelector(i)):t.element(i),!(i||{}).length){var o;return s[0]&&s[0].querySelector&&(o=s[0].querySelector(":not(svg) > body")),o||(o=s[0]),"#comment"==o.nodeName&&(o=e[0].body),t.element(o)}return i}function S(){var e,n=t.noop;p.hideDelay&&(e=a(y.hide,p.hideDelay),n=function(){a.cancel(e)}),p.cancelAutoHide=function(){n(),p.cancelAutoHide=r}}function _(e,r,i){var o=r.onShowing||t.noop,a=r.onComplete||t.noop;return o(r.scope,e,r,i),n(function(t,o){try{n.when(r.onShow(r.scope,e,r,i)).then(function(){a(r.scope,e,r),S(),t(e)},o)}catch(e){o(e.message)}})}function w(e,r){var n=r.onRemoving||t.noop;return i(function(t,o){try{var a=i.when(r.onRemove(r.scope,e,r)||!0);n(e,a),1==r.$destroy?t(e):a.then(function(){!r.preserveScope&&r.scope&&r.scope.$destroy(),t(e)},o)}catch(e){o(e)}})}var E,T,O=n.when(!0);return p=m(p),E={options:p,deferred:n.defer(),show:f,remove:h}}var y,b=!1,S=[];return y={show:f,hide:h,cancel:m,destroy:g,$injector_:p}}}return e.$get=n,n.$inject=["$document","$q","$$q","$rootScope","$timeout","$rootElement","$animate","$mdUtil","$mdCompiler","$mdTheming","$injector"],e}t.module("material.core").provider("$$interimElement",e)}(),function(){!function(){function e(e){function a(e){return e.replace(c,"").replace(l,function(e,t,r,n){return n?r.toUpperCase():r})}var c=/^((?:x|data)[\:\-_])/i,l=/([\:\-\_]+(.))/g,u=["","xs","gt-xs","sm","gt-sm","md","gt-md","lg","gt-lg","xl","print"],d=["layout","flex","flex-order","flex-offset","layout-align"],p=["show","hide","layout-padding","layout-margin"];t.forEach(u,function(r){t.forEach(d,function(t){var n=r?t+"-"+r:t;e.directive(a(n),i(n))}),t.forEach(p,function(t){var n=r?t+"-"+r:t;e.directive(a(n),o(n))})}),e.directive("mdLayoutCss",r).directive("ngCloak",n("ng-cloak")).directive("layoutWrap",o("layout-wrap")).directive("layoutNowrap",o("layout-nowrap")).directive("layoutNoWrap",o("layout-no-wrap")).directive("layoutFill",o("layout-fill")).directive("layoutLtMd",s("layout-lt-md",!0)).directive("layoutLtLg",s("layout-lt-lg",!0)).directive("flexLtMd",s("flex-lt-md",!0)).directive("flexLtLg",s("flex-lt-lg",!0)).directive("layoutAlignLtMd",s("layout-align-lt-md")).directive("layoutAlignLtLg",s("layout-align-lt-lg")).directive("flexOrderLtMd",s("flex-order-lt-md")).directive("flexOrderLtLg",s("flex-order-lt-lg")).directive("offsetLtMd",s("flex-offset-lt-md")).directive("offsetLtLg",s("flex-offset-lt-lg")).directive("hideLtMd",s("hide-lt-md")).directive("hideLtLg",s("hide-lt-lg")).directive("showLtMd",s("show-lt-md")).directive("showLtLg",s("show-lt-lg"))}function r(){return{restrict:"A",priority:"900",compile:function(e,r){return T.enabled=!1,t.noop}}}function n(e){return["$timeout",function(r){return{restrict:"A",priority:-10,compile:function(n){return T.enabled?(n.addClass(e),function(t,n){r(function(){n.removeClass(e)},10,!1)}):t.noop}}}]}function i(e){function r(t,r,n){var i=a(r,e,n),o=n.$observe(n.$normalize(e),i);i(p(e,n,"")),t.$on("$destroy",function(){o()})}return["$mdUtil","$interpolate","$log",function(n,i,o){return m=n,g=i,v=o,{restrict:"A",compile:function(n,i){var o;return T.enabled&&(c(e,i,n,v),l(e,p(e,i,""),u(n,e,i)),o=r),o||t.noop}}}]}function o(e){function r(t,r){r.addClass(e)}return["$mdUtil","$interpolate","$log",function(n,i,o){return m=n,g=i,v=o,{restrict:"A",compile:function(n,i){var o;return T.enabled&&(l(e,p(e,i,""),u(n,e,i)),r(null,n),o=r),o||t.noop}}}]}function a(e,r){var n;return function(i){var o=l(r,i||"");t.isDefined(o)&&(n&&e.removeClass(n),n=o?r+"-"+o.replace(b,"-"):r,e.addClass(n))}}function s(e){var r=e.split("-");return["$log",function(n){return n.warn(e+"has been deprecated. Please use a `"+r[0]+"-gt-<xxx>` variant."),t.noop}]}function c(e,t,r,n){var i,o,a,s=r[0].nodeName.toLowerCase();switch(e.replace(y,"")){case"flex":"md-button"!=s&&"fieldset"!=s||(o="<"+s+" "+e+"></"+s+">",a="https://github.com/philipwalton/flexbugs#9-some-html-elements-cant-be-flex-containers",i="Markup '{0}' may not work as expected in IE Browsers. Consult '{1}' for details.",n.warn(m.supplant(i,[o,a])))}}function l(e,r,n){var i=r;if(!d(r)){switch(e.replace(y,"")){case"layout":f(r,_)||(r=_[0]);break;case"flex":f(r,S)||isNaN(r)&&(r="");break;case"flex-offset":case"flex-order":r&&!isNaN(+r)||(r="0");break;case"layout-align":var o=h(r);r=m.supplant("{main}-{cross}",o);break;case"layout-padding":case"layout-margin":case"layout-fill":case"layout-wrap":case"layout-nowrap":case"layout-nowrap":r=""}r!=i&&(n||t.noop)(r)}return r}function u(e,t,r){return function(e){d(e)||(r[r.$normalize(t)]=e)}}function d(e){return(e||"").indexOf(g.startSymbol())>-1}function p(e,t,r){var n=t.$normalize(e);return t[n]?t[n].replace(b,"-"):r||null}function f(e,t,r){e=r&&e?e.replace(b,r):e;var n=!1;return e&&t.forEach(function(t){t=r?t.replace(b,r):t,n=n||t===e}),n}function h(e){var t,r={main:"start",cross:"stretch"};return e=e||"",0!=e.indexOf("-")&&0!=e.indexOf(" ")||(e="none"+e),t=e.toLowerCase().trim().replace(b,"-").split("-"),t.length&&"space"===t[0]&&(t=[t[0]+"-"+t[1],t[2]]),t.length>0&&(r.main=t[0]||r.main),t.length>1&&(r.cross=t[1]||r.cross),w.indexOf(r.main)<0&&(r.main="start"),E.indexOf(r.cross)<0&&(r.cross="stretch"),r}var m,g,v,y=/(-gt)?-(sm|md|lg|print)/g,b=/\s+/g,S=["grow","initial","auto","none","noshrink","nogrow"],_=["row","column"],w=["","start","center","end","stretch","space-around","space-between"],E=["","start","center","end","stretch"],T={enabled:!0,breakpoints:[]};e(t.module("material.core.layout",["ng"]))}()}(),function(){function e(e,n){function i(e){return e&&""!==e}var o,a=[],s={};return o={notFoundError:function(t,r){e.error((r||"")+"No instance found for handle",t)},getInstances:function(){return a},get:function(e){if(!i(e))return null;var t,r,n;for(t=0,r=a.length;t<r;t++)if(n=a[t],n.$$mdHandle===e)return n;return null},register:function(e,r){function n(){var t=a.indexOf(e);t!==-1&&a.splice(t,1)}function i(){var t=s[r];t&&(t.forEach(function(t){t.resolve(e)}),delete s[r])}return r?(e.$$mdHandle=r,a.push(e),i(),n):t.noop},when:function(e){if(i(e)){var t=n.defer(),a=o.get(e);return a?t.resolve(a):(s[e]===r&&(s[e]=[]),s[e].push(t)),t.promise}return n.reject("Invalid `md-component-id` value.")}}}t.module("material.core").factory("$mdComponentRegistry",e),e.$inject=["$log","$q"]}(),function(){!function(){function e(e){function r(e){return e.hasClass("md-icon-button")?{isMenuItem:e.hasClass("md-menu-item"),fitRipple:!0,center:!0}:{isMenuItem:e.hasClass("md-menu-item"),dimBackground:!0}}return{attach:function(n,i,o){return o=t.extend(r(i),o),e.attach(n,i,o)}}}t.module("material.core").factory("$mdButtonInkRipple",e),e.$inject=["$mdInkRipple"]}()}(),function(){!function(){function e(e){function r(r,n,i){return e.attach(r,n,t.extend({center:!0,dimBackground:!1,fitRipple:!0},i))}return{attach:r}}t.module("material.core").factory("$mdCheckboxInkRipple",e),e.$inject=["$mdInkRipple"]}()}(),function(){!function(){function e(e){function r(r,n,i){return e.attach(r,n,t.extend({center:!1,dimBackground:!0,outline:!1,rippleSize:"full"},i))}return{attach:r}}t.module("material.core").factory("$mdListInkRipple",e),e.$inject=["$mdInkRipple"]}()}(),function(){function e(e,r){return{controller:t.noop,link:function(t,n,i){i.hasOwnProperty("mdInkRippleCheckbox")?r.attach(t,n):e.attach(t,n)}}}function r(){function e(){r=!0}var r=!1;return{disableInkRipple:e,$get:["$injector",function(e){function i(i,o,a){return r||o.controller("mdNoInk")?t.noop:e.instantiate(n,{$scope:i,$element:o,rippleOptions:a})}return{attach:i}}]}}function n(e,r,n,i,o,a,s){this.$window=i,this.$timeout=o,this.$mdUtil=a,this.$mdColorUtil=s,this.$scope=e,this.$element=r,this.options=n,this.mousedown=!1,this.ripples=[],this.timeout=null,this.lastRipple=null,a.valueOnUse(this,"container",this.createContainer),this.$element.addClass("md-ink-ripple"),(r.controller("mdInkRipple")||{}).createRipple=t.bind(this,this.createRipple),(r.controller("mdInkRipple")||{}).setColor=t.bind(this,this.color),this.bindEvents()}function i(e,r){(e.mousedown||e.lastRipple)&&(e.mousedown=!1,e.$mdUtil.nextTick(t.bind(e,r),!1))}function o(){return{controller:t.noop}}t.module("material.core").provider("$mdInkRipple",r).directive("mdInkRipple",e).directive("mdNoInk",o).directive("mdNoBar",o).directive("mdNoStretch",o);var a=450;e.$inject=["$mdButtonInkRipple","$mdCheckboxInkRipple"],n.$inject=["$scope","$element","rippleOptions","$window","$timeout","$mdUtil","$mdColorUtil"],n.prototype.color=function(e){function r(){var e=n.options&&n.options.colorElement?n.options.colorElement:[],t=e.length?e[0]:n.$element[0];return t?n.$window.getComputedStyle(t).color:"rgb(0,0,0)"}var n=this;return t.isDefined(e)&&(n._color=n._parseColor(e)),n._color||n._parseColor(n.inkRipple())||n._parseColor(r())},n.prototype.calculateColor=function(){return this.color()},n.prototype._parseColor=function(e,t){t=t||1;var r=this.$mdColorUtil;if(e)return 0===e.indexOf("rgba")?e.replace(/\d?\.?\d*\s*\)\s*$/,(.1*t).toString()+")"):0===e.indexOf("rgb")?r.rgbToRgba(e):0===e.indexOf("#")?r.hexToRgba(e):void 0},n.prototype.bindEvents=function(){this.$element.on("mousedown",t.bind(this,this.handleMousedown)),this.$element.on("mouseup touchend",t.bind(this,this.handleMouseup)),this.$element.on("mouseleave",t.bind(this,this.handleMouseup)),this.$element.on("touchmove",t.bind(this,this.handleTouchmove))},n.prototype.handleMousedown=function(e){if(!this.mousedown)if(e.hasOwnProperty("originalEvent")&&(e=e.originalEvent),this.mousedown=!0,this.options.center)this.createRipple(this.container.prop("clientWidth")/2,this.container.prop("clientWidth")/2);else if(e.srcElement!==this.$element[0]){var t=this.$element[0].getBoundingClientRect(),r=e.clientX-t.left,n=e.clientY-t.top;this.createRipple(r,n)}else this.createRipple(e.offsetX,e.offsetY)},n.prototype.handleMouseup=function(){i(this,this.clearRipples)},n.prototype.handleTouchmove=function(){i(this,this.deleteRipples)},n.prototype.deleteRipples=function(){for(var e=0;e<this.ripples.length;e++)this.ripples[e].remove();
},n.prototype.clearRipples=function(){for(var e=0;e<this.ripples.length;e++)this.fadeInComplete(this.ripples[e])},n.prototype.createContainer=function(){var e=t.element('<div class="md-ripple-container"></div>');return this.$element.append(e),e},n.prototype.clearTimeout=function(){this.timeout&&(this.$timeout.cancel(this.timeout),this.timeout=null)},n.prototype.isRippleAllowed=function(){var e=this.$element[0];do{if(!e.tagName||"BODY"===e.tagName)break;if(e&&t.isFunction(e.hasAttribute)){if(e.hasAttribute("disabled"))return!1;if("false"===this.inkRipple()||"0"===this.inkRipple())return!1}}while(e=e.parentNode);return!0},n.prototype.inkRipple=function(){return this.$element.attr("md-ink-ripple")},n.prototype.createRipple=function(e,r){function n(e,t,r){return e?Math.max(t,r):Math.sqrt(Math.pow(t,2)+Math.pow(r,2))}if(this.isRippleAllowed()){var i=this,o=i.$mdColorUtil,s=t.element('<div class="md-ripple"></div>'),c=this.$element.prop("clientWidth"),l=this.$element.prop("clientHeight"),u=2*Math.max(Math.abs(c-e),e),d=2*Math.max(Math.abs(l-r),r),p=n(this.options.fitRipple,u,d),f=this.calculateColor();s.css({left:e+"px",top:r+"px",background:"black",width:p+"px",height:p+"px",backgroundColor:o.rgbaToRgb(f),borderColor:o.rgbaToRgb(f)}),this.lastRipple=s,this.clearTimeout(),this.timeout=this.$timeout(function(){i.clearTimeout(),i.mousedown||i.fadeInComplete(s)},.35*a,!1),this.options.dimBackground&&this.container.css({backgroundColor:f}),this.container.append(s),this.ripples.push(s),s.addClass("md-ripple-placed"),this.$mdUtil.nextTick(function(){s.addClass("md-ripple-scaled md-ripple-active"),i.$timeout(function(){i.clearRipples()},a,!1)},!1)}},n.prototype.fadeInComplete=function(e){this.lastRipple===e?this.timeout||this.mousedown||this.removeRipple(e):this.removeRipple(e)},n.prototype.removeRipple=function(e){var t=this,r=this.ripples.indexOf(e);r<0||(this.ripples.splice(this.ripples.indexOf(e),1),e.removeClass("md-ripple-active"),0===this.ripples.length&&this.container.css({backgroundColor:""}),this.$timeout(function(){t.fadeOutComplete(e)},a,!1))},n.prototype.fadeOutComplete=function(e){e.remove(),this.lastRipple=null}}(),function(){!function(){function e(e){function r(r,n,i){return e.attach(r,n,t.extend({center:!1,dimBackground:!0,outline:!1,rippleSize:"full"},i))}return{attach:r}}t.module("material.core").factory("$mdTabInkRipple",e),e.$inject=["$mdInkRipple"]}()}(),function(){t.module("material.core.theming.palette",[]).constant("$mdColorPalette",{red:{50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300 A100",contrastStrongLightColors:"400 500 600 700 A200 A400 A700"},pink:{50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100",contrastStrongLightColors:"500 600 A200 A400 A700"},purple:{50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100",contrastStrongLightColors:"300 400 A200 A400 A700"},"deep-purple":{50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",A100:"#b388ff",A200:"#7c4dff",A400:"#651fff",A700:"#6200ea",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100",contrastStrongLightColors:"300 400 A200"},indigo:{50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100",contrastStrongLightColors:"300 400 A200 A400"},blue:{50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300 400 A100",contrastStrongLightColors:"500 600 700 A200 A400 A700"},"light-blue":{50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea",contrastDefaultColor:"dark",contrastLightColors:"600 700 800 900 A700",contrastStrongLightColors:"600 700 800 A700"},cyan:{50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",A100:"#84ffff",A200:"#18ffff",A400:"#00e5ff",A700:"#00b8d4",contrastDefaultColor:"dark",contrastLightColors:"700 800 900",contrastStrongLightColors:"700 800 900"},teal:{50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",A100:"#a7ffeb",A200:"#64ffda",A400:"#1de9b6",A700:"#00bfa5",contrastDefaultColor:"dark",contrastLightColors:"500 600 700 800 900",contrastStrongLightColors:"500 600 700"},green:{50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853",contrastDefaultColor:"dark",contrastLightColors:"500 600 700 800 900",contrastStrongLightColors:"500 600 700"},"light-green":{50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",A100:"#ccff90",A200:"#b2ff59",A400:"#76ff03",A700:"#64dd17",contrastDefaultColor:"dark",contrastLightColors:"700 800 900",contrastStrongLightColors:"700 800 900"},lime:{50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",A100:"#f4ff81",A200:"#eeff41",A400:"#c6ff00",A700:"#aeea00",contrastDefaultColor:"dark",contrastLightColors:"900",contrastStrongLightColors:"900"},yellow:{50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",A100:"#ffff8d",A200:"#ffff00",A400:"#ffea00",A700:"#ffd600",contrastDefaultColor:"dark"},amber:{50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",A100:"#ffe57f",A200:"#ffd740",A400:"#ffc400",A700:"#ffab00",contrastDefaultColor:"dark"},orange:{50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00",contrastDefaultColor:"dark",contrastLightColors:"800 900",contrastStrongLightColors:"800 900"},"deep-orange":{50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",A100:"#ff9e80",A200:"#ff6e40",A400:"#ff3d00",A700:"#dd2c00",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300 400 A100 A200",contrastStrongLightColors:"500 600 700 800 900 A400 A700"},brown:{50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723",A100:"#d7ccc8",A200:"#bcaaa4",A400:"#8d6e63",A700:"#5d4037",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100 A200",contrastStrongLightColors:"300 400"},grey:{50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#ffffff",A200:"#000000",A400:"#303030",A700:"#616161",contrastDefaultColor:"dark",contrastLightColors:"600 700 800 900 A200 A400 A700"},"blue-grey":{50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238",A100:"#cfd8dc",A200:"#b0bec5",A400:"#78909c",A700:"#455a64",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300 A100 A200",contrastStrongLightColors:"400 500 700"}})}(),function(){function e(e){function n(e,t){return t=t||{},d[e]=a(e,t),v}function i(e,r){return a(e,t.extend({},d[e]||{},r))}function a(e,t){var r=T.filter(function(e){return!t[e]});if(r.length)throw new Error("Missing colors %1 in palette %2!".replace("%1",r.join(", ")).replace("%2",e));return t}function c(e,r){if(y[e])return y[e];r=r||"default";var n="string"==typeof r?y[r]:r,i=new l(e);return n&&t.forEach(n.colors,function(e,r){i.colors[r]={name:e.name,hues:t.extend({},e.hues)}}),y[e]=i,i}function l(e){function r(e){if(e=0===arguments.length||!!e,e!==n.isDark){n.isDark=e,n.foregroundPalette=n.isDark?h:f,n.foregroundShadow=n.isDark?m:g;var r=n.isDark?E:w,i=n.isDark?w:E;return t.forEach(r,function(e,t){var r=n.colors[t],o=i[t];if(r)for(var a in r.hues)r.hues[a]===o[a]&&(r.hues[a]=e[a])}),n}}var n=this;n.name=e,n.colors={},n.dark=r,r(!1),S.forEach(function(e){var r=(n.isDark?E:w)[e];n[e+"Palette"]=function(i,o){var a=n.colors[e]={name:i,hues:t.extend({},r,o)};return Object.keys(a.hues).forEach(function(e){if(!r[e])throw new Error("Invalid hue name '%1' in theme %2's %3 color %4. Available hue names: %4".replace("%1",e).replace("%2",n.name).replace("%3",i).replace("%4",Object.keys(r).join(", ")))}),Object.keys(a.hues).map(function(e){return a.hues[e]}).forEach(function(t){if(T.indexOf(t)==-1)throw new Error("Invalid hue value '%1' in theme %2's %3 color %4. Available hue values: %5".replace("%1",t).replace("%2",n.name).replace("%3",e).replace("%4",i).replace("%5",T.join(", ")))}),n},n[e+"Color"]=function(){var t=Array.prototype.slice.call(arguments);return console.warn("$mdThemingProviderTheme."+e+"Color() has been deprecated. Use $mdThemingProviderTheme."+e+"Palette() instead."),n[e+"Palette"].apply(n,t)}})}function p(e,n){function i(e){return e===r||""===e||a.THEMES[e]!==r}function o(r,o){function a(){return c=o.controller("mdTheme")||r.data("$mdThemeController"),c&&c.$mdTheme||("default"==b?"":b)}function s(e){if(e){i(e)||n.warn("Attempted to use unregistered theme '"+e+"'. Register it with $mdThemingProvider.theme().");var t=r.data("$mdThemeName");t&&r.removeClass("md-"+t+"-theme"),r.addClass("md-"+e+"-theme"),r.data("$mdThemeName",e),c&&r.data("$mdThemeController",c)}}var c=o.controller("mdTheme"),l=r.attr("md-theme-watch"),u=(_||t.isDefined(l))&&"false"!=l;s(a()),r.on("$destroy",u?e.$watch(a,s):t.noop)}var a=function(t,n){n===r&&(n=t,t=r),t===r&&(t=e),a.inherit(n,n)};return a.THEMES=t.extend({},y),a.PALETTES=t.extend({},d),a.inherit=o,a.registered=i,a.defaultTheme=function(){return b},a.generateTheme=function(e){s(y[e],e,I)},a}d={};var v,y={},b="default",_=!1;return t.extend(d,e),p.$inject=["$rootScope","$log"],v={definePalette:n,extendPalette:i,theme:c,disableTheming:function(){P=!0},setNonce:function(e){I=e},setDefaultTheme:function(e){b=e},alwaysWatchTheme:function(e){_=e},generateThemesOnDemand:function(e){O=e},$get:p,_LIGHT_DEFAULT_HUES:w,_DARK_DEFAULT_HUES:E,_PALETTES:d,_THEMES:y,_parseRules:o,_rgba:u}}function n(e,r,n){return{priority:100,link:{pre:function(i,o,a){var s=[],c={registerChanges:function(e,r){return r&&(e=t.bind(r,e)),s.push(e),function(){var t=s.indexOf(e);t>-1&&s.splice(t,1)}},$setTheme:function(t){e.registered(t)||n.warn("attempted to use unregistered theme '"+t+"'"),c.$mdTheme=t,s.forEach(function(e){e()})}};o.data("$mdThemeController",c),c.$setTheme(r(a.mdTheme)(i)),a.$observe("mdTheme",c.$setTheme)}}}}function i(e){return e}function o(e,r,n){c(e,r),n=n.replace(/THEME_NAME/g,e.name);var i=[],o=e.colors[r],a=new RegExp(".md-"+e.name+"-theme","g"),s=new RegExp("('|\")?{{\\s*("+r+")-(color|contrast)-?(\\d\\.?\\d*)?\\s*}}(\"|')?","g"),l=/'?"?\{\{\s*([a-zA-Z]+)-(A?\d+|hue\-[0-3]|shadow|default)-?(\d\.?\d*)?(contrast)?\s*\}\}'?"?/g,p=d[o.name];return n=n.replace(l,function(t,r,n,i,o){return"foreground"===r?"shadow"==n?e.foregroundShadow:e.foregroundPalette[n]||e.foregroundPalette[1]:(0!==n.indexOf("hue")&&"default"!==n||(n=e.colors[r].hues[n]),u((d[e.colors[r].name][n]||"")[o?"contrast":"value"],i))}),t.forEach(o.hues,function(t,r){var o=n.replace(s,function(e,r,n,i,o){return u(p[t]["color"===i?"value":"contrast"],o)});if("default"!==r&&(o=o.replace(a,".md-"+e.name+"-theme.md-"+r)),"default"==e.name){var c=/((?:(?:(?: |>|\.|\w|-|:|\(|\)|\[|\]|"|'|=)+) )?)((?:(?:\w|\.|-)+)?)\.md-default-theme((?: |>|\.|\w|-|:|\(|\)|\[|\]|"|'|=)*)/g;o=o.replace(c,function(e,t,r,n){return e+", "+t+r+n})}i.push(o)}),i}function a(e,r){function n(e,r){var n=e.contrastDefaultColor,i=e.contrastLightColors||[],o=e.contrastStrongLightColors||[],a=e.contrastDarkColors||[];"string"==typeof i&&(i=i.split(" ")),"string"==typeof o&&(o=o.split(" ")),"string"==typeof a&&(a=a.split(" ")),delete e.contrastDefaultColor,delete e.contrastLightColors,delete e.contrastStrongLightColors,delete e.contrastDarkColors,t.forEach(e,function(r,s){function c(){return"light"===n?a.indexOf(s)>-1?v:o.indexOf(s)>-1?b:y:i.indexOf(s)>-1?o.indexOf(s)>-1?b:y:v}if(!t.isObject(r)){var u=l(r);if(!u)throw new Error("Color %1, in palette %2's hue %3, is invalid. Hex or rgb(a) color expected.".replace("%1",r).replace("%2",e.name).replace("%3",s));e[s]={value:u,contrast:c()}}})}var i=document.head,o=i?i.firstElementChild:null,a=!P&&e.has("$MD_THEME_CSS")?e.get("$MD_THEME_CSS"):"";if(o&&0!==a.length){t.forEach(d,n);var c=a.split(/\}(?!(\}|'|"|;))/).filter(function(e){return e&&e.length}).map(function(e){return e.trim()+"}"}),u=new RegExp("md-("+S.join("|")+")","g");S.forEach(function(e){R[e]=""}),c.forEach(function(e){for(var t,r=(e.match(u),0);t=S[r];r++)if(e.indexOf(".md-"+t)>-1)return R[t]+=e;for(r=0;t=S[r];r++)if(e.indexOf(t)>-1)return R[t]+=e;return R[_]+=e}),O||t.forEach(r.THEMES,function(e){p[e.name]||"default"!==r.defaultTheme()&&"default"===e.name||s(e,e.name,I)})}}function s(e,t,r){var n=document.head,i=n?n.firstElementChild:null;p[t]||(S.forEach(function(t){for(var a=o(e,t,R[t]);a.length;){var s=a.shift();if(s){var c=document.createElement("style");c.setAttribute("md-theme-style",""),r&&c.setAttribute("nonce",r),c.appendChild(document.createTextNode(s)),n.insertBefore(c,i)}}}),p[e.name]=!0)}function c(e,t){if(!d[(e.colors[t]||{}).name])throw new Error("You supplied an invalid color palette for theme %1's %2 palette. Available palettes: %3".replace("%1",e.name).replace("%2",t).replace("%3",Object.keys(d).join(", ")))}function l(e){if(t.isArray(e)&&3==e.length)return e;if(/^rgb/.test(e))return e.replace(/(^\s*rgba?\(|\)\s*$)/g,"").split(",").map(function(e,t){return 3==t?parseFloat(e,10):parseInt(e,10)});if("#"==e.charAt(0)&&(e=e.substring(1)),/^([a-fA-F0-9]{3}){1,2}$/g.test(e)){var r=e.length/3,n=e.substr(0,r),i=e.substr(r,r),o=e.substr(2*r);return 1===r&&(n+=n,i+=i,o+=o),[parseInt(n,16),parseInt(i,16),parseInt(o,16)]}}function u(e,r){return e?(4==e.length&&(e=t.copy(e),r?e.pop():r=e.pop()),r&&("number"==typeof r||"string"==typeof r&&r.length)?"rgba("+e.join(",")+","+r+")":"rgb("+e.join(",")+")"):"rgb('0,0,0')"}t.module("material.core.theming",["material.core.theming.palette"]).directive("mdTheme",n).directive("mdThemable",i).provider("$mdTheming",e).run(a);var d,p={},f={name:"dark",1:"rgba(0,0,0,0.87)",2:"rgba(0,0,0,0.54)",3:"rgba(0,0,0,0.38)",4:"rgba(0,0,0,0.12)"},h={name:"light",1:"rgba(255,255,255,1.0)",2:"rgba(255,255,255,0.7)",3:"rgba(255,255,255,0.5)",4:"rgba(255,255,255,0.12)"},m="1px 1px 0px rgba(0,0,0,0.4), -1px -1px 0px rgba(0,0,0,0.4)",g="",v=l("rgba(0,0,0,0.87)"),y=l("rgba(255,255,255,0.87)"),b=l("rgb(255,255,255)"),S=["primary","accent","warn","background"],_="primary",w={accent:{default:"A200","hue-1":"A100","hue-2":"A400","hue-3":"A700"},background:{default:"50","hue-1":"A100","hue-2":"100","hue-3":"300"}},E={background:{default:"A400","hue-1":"800","hue-2":"900","hue-3":"A200"}};S.forEach(function(e){var t={default:"500","hue-1":"300","hue-2":"800","hue-3":"A100"};w[e]||(w[e]=t),E[e]||(E[e]=t)});var T=["50","100","200","300","400","500","600","700","800","900","A100","A200","A400","A700"],O=!1,I=null,P=!1;e.$inject=["$mdColorPalette"],n.$inject=["$mdTheming","$interpolate","$log"],i.$inject=["$mdTheming"];var R={};a.$inject=["$injector","$mdTheming"]}(),function(){function r(r,n,i,o,a){var s;return s={translate3d:function(e,t,r,n){function i(r){return a(e,{to:r||t,addClass:n.transitionOutClass,removeClass:n.transitionInClass}).start()}return a(e,{from:t,to:r,addClass:n.transitionInClass,removeClass:n.transitionOutClass}).start().then(function(){return i})},waitTransitionEnd:function(t,r){var a=3e3;return n(function(n,s){function c(e){e&&e.target!==t[0]||(e&&i.cancel(u),t.off(o.CSS.TRANSITIONEND,c),n())}function l(r){return r=r||e.getComputedStyle(t[0]),"0s"==r.transitionDuration||!r.transition&&!r.transitionProperty}r=r||{},l(r.cachedTransitionStyles)&&(a=0);var u=i(c,r.timeout||a);t.on(o.CSS.TRANSITIONEND,c)})},calculateTransformValues:function(e,t){function r(){var t=e?e.parent():null,r=t?t.parent():null;return r?s.clientRect(r):null}var n=t.element,i=t.bounds;if(n||i){var o=n?s.clientRect(n)||r():s.copyRect(i),a=s.copyRect(e[0].getBoundingClientRect()),c=s.centerPointFor(a),l=s.centerPointFor(o);return{centerX:l.x-c.x,centerY:l.y-c.y,scaleX:Math.round(100*Math.min(.5,o.width/a.width))/100,scaleY:Math.round(100*Math.min(.5,o.height/a.height))/100}}return{centerX:0,centerY:0,scaleX:.5,scaleY:.5}},calculateZoomToOrigin:function(e,n){var i="translate3d( {centerX}px, {centerY}px, 0 ) scale( {scaleX}, {scaleY} )",o=t.bind(null,r.supplant,i);return o(s.calculateTransformValues(e,n))},calculateSlideToOrigin:function(e,n){var i="translate3d( {centerX}px, {centerY}px, 0 )",o=t.bind(null,r.supplant,i);return o(s.calculateTransformValues(e,n))},toCss:function(e){function r(e,r,i){t.forEach(r.split(" "),function(e){n[e]=i})}var n={},i="left top right bottom width height x y min-width min-height max-width max-height";return t.forEach(e,function(e,a){if(!t.isUndefined(e))if(i.indexOf(a)>=0)n[a]=e+"px";else switch(a){case"transition":r(a,o.CSS.TRANSITION,e);break;case"transform":r(a,o.CSS.TRANSFORM,e);break;case"transformOrigin":r(a,o.CSS.TRANSFORM_ORIGIN,e)}}),n},toTransformCss:function(e,r,n){var i={};return t.forEach(o.CSS.TRANSFORM.split(" "),function(t){i[t]=e}),r&&(n=n||"all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1) !important",i.transition=n),i},copyRect:function(e,r){return e?(r=r||{},t.forEach("left top right bottom width height".split(" "),function(t){r[t]=Math.round(e[t])}),r.width=r.width||r.right-r.left,r.height=r.height||r.bottom-r.top,r):null},clientRect:function(e){var r=t.element(e)[0].getBoundingClientRect(),n=function(e){return e&&e.width>0&&e.height>0};return n(r)?s.copyRect(r):null},centerPointFor:function(e){return e?{x:Math.round(e.left+e.width/2),y:Math.round(e.top+e.height/2)}:{x:0,y:0}}}}t.module("material.core").factory("$$mdAnimate",["$q","$timeout","$mdConstant","$animateCss",function(e,t,n,i){return function(o){return r(o,e,t,n,i)}}])}(),function(){t.version.minor>=4?t.module("material.core.animate",[]):!function(){function e(e){return e.replace(/-[a-z]/g,function(e){return e.charAt(1).toUpperCase()})}var r=t.forEach,n=t.isDefined(document.documentElement.style.WebkitAppearance),i=n?"-webkit-":"",o=(n?"webkitTransitionEnd ":"")+"transitionend",a=(n?"webkitAnimationEnd ":"")+"animationend",s=["$document",function(e){return function(){return e[0].body.clientWidth+1}}],c=["$$rAF",function(e){return function(){var t=!1;return e(function(){t=!0}),function(r){t?r():e(r)}}}],l=["$q","$$rAFMutex",function(e,n){function i(e){this.setHost(e),this._doneCallbacks=[],this._runInAnimationFrame=n(),this._state=0}var o=0,a=1,s=2;return i.prototype={setHost:function(e){this.host=e||{}},done:function(e){this._state===s?e():this._doneCallbacks.push(e)},progress:t.noop,getPromise:function(){if(!this.promise){var t=this;this.promise=e(function(e,r){t.done(function(t){t===!1?r():e()})})}return this.promise},then:function(e,t){return this.getPromise().then(e,t)},catch:function(e){return this.getPromise().catch(e)},finally:function(e){return this.getPromise().finally(e)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(e){var t=this;t._state===o&&(t._state=a,t._runInAnimationFrame(function(){t._resolve(e)}))},_resolve:function(e){this._state!==s&&(r(this._doneCallbacks,function(t){t(e)}),this._doneCallbacks.length=0,this._state=s)}},i}];t.module("material.core.animate",[]).factory("$$forceReflow",s).factory("$$AnimateRunner",l).factory("$$rAFMutex",c).factory("$animateCss",["$window","$$rAF","$$AnimateRunner","$$forceReflow","$$jqLite","$timeout","$animate",function(t,s,c,l,u,d,p){function f(n,s){var l=[],u=_(n),f=u&&p.enabled(),g=!1,E=!1;f&&(s.transitionStyle&&l.push([i+"transition",s.transitionStyle]),s.keyframeStyle&&l.push([i+"animation",s.keyframeStyle]),s.delay&&l.push([i+"transition-delay",s.delay+"s"]),s.duration&&l.push([i+"transition-duration",s.duration+"s"]),g=s.keyframeStyle||s.to&&(s.duration>0||s.transitionStyle),E=!!s.addClass||!!s.removeClass,w(n,!0));var T=f&&(g||E);b(n,s);var O,I,P=!1;return{close:t.close,start:function(){function t(){if(!P)return P=!0,O&&I&&n.off(O,I),h(n,s),y(n,s),r(l,function(t){u.style[e(t[0])]=""}),p.complete(!0),p}var p=new c;return v(function(){if(w(n,!1),!T)return t();r(l,function(t){var r=t[0],n=t[1];u.style[e(r)]=n}),h(n,s);var c=m(n);if(0===c.duration)return t();var p=[];s.easing&&(c.transitionDuration&&p.push([i+"transition-timing-function",s.easing]),c.animationDuration&&p.push([i+"animation-timing-function",s.easing])),s.delay&&c.animationDelay&&p.push([i+"animation-delay",s.delay+"s"]),s.duration&&c.animationDuration&&p.push([i+"animation-duration",s.duration+"s"]),r(p,function(t){var r=t[0],n=t[1];u.style[e(r)]=n,l.push(t)});var f=c.delay,g=1e3*f,v=c.duration,y=1e3*v,b=Date.now();O=[],c.transitionDuration&&O.push(o),c.animationDuration&&O.push(a),O=O.join(" "),I=function(e){e.stopPropagation();var r=e.originalEvent||e,n=r.timeStamp||Date.now(),i=parseFloat(r.elapsedTime.toFixed(3));Math.max(n-b,0)>=g&&i>=v&&t()},n.on(O,I),S(n,s),d(t,g+1.5*y,!1)}),p}}}function h(e,t){t.addClass&&(u.addClass(e,t.addClass),t.addClass=null),t.removeClass&&(u.removeClass(e,t.removeClass),t.removeClass=null)}function m(e){function r(e){return n?"Webkit"+e.charAt(0).toUpperCase()+e.substr(1):e}var i=_(e),o=t.getComputedStyle(i),a=g(o[r("transitionDuration")]),s=g(o[r("animationDuration")]),c=g(o[r("transitionDelay")]),l=g(o[r("animationDelay")]);s*=parseInt(o[r("animationIterationCount")],10)||1;var u=Math.max(s,a),d=Math.max(l,c);return{duration:u,delay:d,animationDuration:s,transitionDuration:a,animationDelay:l,transitionDelay:c}}function g(e){var t=0,n=(e||"").split(/\s*,\s*/);return r(n,function(e){"s"==e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),e=parseFloat(e)||0,t=t?Math.max(e,t):e}),t}function v(e){E&&E(),T.push(e),E=s(function(){E=null;for(var e=l(),t=0;t<T.length;t++)T[t](e);T.length=0})}function y(e,t){b(e,t),S(e,t)}function b(e,t){t.from&&(e.css(t.from),t.from=null)}function S(e,t){t.to&&(e.css(t.to),t.to=null)}function _(e){for(var t=0;t<e.length;t++)if(1===e[t].nodeType)return e[t]}function w(t,r){var n=_(t),o=e(i+"transition-delay");n.style[o]=r?"-9999s":""}var E,T=[];return f}])}()}(),function(){t.module("material.components.autocomplete",["material.core","material.components.icon","material.components.virtualRepeat"])}(),function(){t.module("material.components.backdrop",["material.core"]).directive("mdBackdrop",["$mdTheming","$mdUtil","$animate","$rootElement","$window","$log","$$rAF","$document",function(e,t,r,n,i,o,a,s){function c(t,c,u){r.pin&&r.pin(c,n),a(function(){var t=i.getComputedStyle(s[0].body);if("fixed"==t.position){var r=parseInt(t.height,10)+Math.abs(parseInt(t.top,10));c.css({height:r+"px"})}var n=c.parent()[0];if(n){"BODY"==n.nodeName&&c.css({position:"fixed"});var a=i.getComputedStyle(n);"static"==a.position&&o.warn(l)}c.parent().length&&e.inherit(c,c.parent())})}var l="<md-backdrop> may not work properly in a scrolled, static-positioned parent container.";return{restrict:"E",link:c}}])}(),function(){function e(e){return{restrict:"E",link:function(t,r){e(r)}}}function r(e,r,n,i){function o(e){return t.isDefined(e.href)||t.isDefined(e.ngHref)||t.isDefined(e.ngLink)||t.isDefined(e.uiSref)}function a(e,t){if(o(t))return'<a class="md-button" ng-transclude></a>';var r="undefined"==typeof t.type?"button":t.type;return'<button class="md-button" type="'+r+'" ng-transclude></button>'}function s(a,s,c){r(s),e.attach(a,s),n.expectWithText(s,"aria-label"),o(c)&&t.isDefined(c.ngDisabled)&&a.$watch(c.ngDisabled,function(e){s.attr("tabindex",e?-1:0)}),s.on("click",function(e){c.disabled===!0&&(e.preventDefault(),e.stopImmediatePropagation())}),t.isDefined(c.mdNoFocusStyle)||(a.mouseActive=!1,s.on("mousedown",function(){a.mouseActive=!0,i(function(){a.mouseActive=!1},100)}).on("focus",function(){a.mouseActive===!1&&s.addClass("md-focused")}).on("blur",function(e){s.removeClass("md-focused")}))}return{restrict:"EA",replace:!0,transclude:!0,template:a,link:s}}t.module("material.components.button",["material.core"]).directive("mdButton",r).directive("a",e),e.$inject=["$mdTheming"],r.$inject=["$mdButtonInkRipple","$mdTheming","$mdAria","$timeout"]}(),function(){function e(e){return{restrict:"E",link:function(t,r){r.addClass("_md"),t.$on("$destroy",function(){e.destroy()})}}}function r(e){function r(e,r,o,a,s,c,l){function u(n,i,l,u){i=o.extractElementByName(i,"md-bottom-sheet"),i.attr("tabindex","-1"),l.disableBackdrop||(f=o.createBackdrop(n,"_md-bottom-sheet-backdrop md-opaque"),f[0].tabIndex=-1,l.clickOutsideToClose&&f.on("click",function(){o.nextTick(s.cancel,!0)}),a.inherit(f,l.parent),e.enter(f,l.parent,null));var d=new p(i,l.parent);return l.bottomSheet=d,a.inherit(d.element,l.parent),l.disableParentScroll&&(l.restoreScroll=o.disableScrollAround(d.element,l.parent)),e.enter(d.element,l.parent,f).then(function(){var e=o.findFocusTarget(i)||t.element(i[0].querySelector("button")||i[0].querySelector("a")||i[0].querySelector(o.prefixer("ng-click",!0)))||f;l.escapeToClose&&(l.rootElementKeyupCallback=function(e){e.keyCode===r.KEY_CODE.ESCAPE&&o.nextTick(s.cancel,!0)},c.on("keyup",l.rootElementKeyupCallback),e&&e.focus())})}function d(t,r,n){var i=n.bottomSheet;return n.disableBackdrop||e.leave(f),e.leave(i.element).then(function(){n.disableParentScroll&&(n.restoreScroll(),delete n.restoreScroll),i.cleanup()})}function p(e,t){function a(t){e.css(r.CSS.TRANSITION_DURATION,"0ms")}function c(t){var n=t.pointer.distanceY;n<5&&(n=Math.max(-i,n/2)),e.css(r.CSS.TRANSFORM,"translate3d(0,"+(i+n)+"px,0)")}function u(t){if(t.pointer.distanceY>0&&(t.pointer.distanceY>20||Math.abs(t.pointer.velocityY)>n)){var i=e.prop("offsetHeight")-t.pointer.distanceY,a=Math.min(i/t.pointer.velocityY*.75,500);e.css(r.CSS.TRANSITION_DURATION,a+"ms"),o.nextTick(s.cancel,!0)}else e.css(r.CSS.TRANSITION_DURATION,""),e.css(r.CSS.TRANSFORM,"")}var d=l.register(t,"drag",{horizontal:!1});return t.on("$md.dragstart",a).on("$md.drag",c).on("$md.dragend",u),{element:e,cleanup:function(){d(),t.off("$md.dragstart",a),t.off("$md.drag",c),t.off("$md.dragend",u)}}}var f;return{themable:!0,onShow:u,onRemove:d,disableBackdrop:!1,escapeToClose:!0,clickOutsideToClose:!0,disableParentScroll:!0}}var n=.5,i=80;return r.$inject=["$animate","$mdConstant","$mdUtil","$mdTheming","$mdBottomSheet","$rootElement","$mdGesture"],e("$mdBottomSheet").setDefaults({methods:["disableParentScroll","escapeToClose","clickOutsideToClose"],options:r})}t.module("material.components.bottomSheet",["material.core","material.components.backdrop"]).directive("mdBottomSheet",e).provider("$mdBottomSheet",r),e.$inject=["$mdBottomSheet"],r.$inject=["$$interimElementProvider"]}(),function(){function e(e){return{restrict:"E",link:function(t,r,n){r.addClass("_md"),e(r)}}}t.module("material.components.card",["material.core"]).directive("mdCard",e),e.$inject=["$mdTheming"]}(),function(){function e(e,r,n,i,o,a){function s(s,l){var u=s.children(),d=o.parseAttributeBoolean(l.mdIndeterminate);return l.$set("tabindex",l.tabindex||"0"),l.$set("type","checkbox"),l.$set("role",l.type),s.on("click",function(e){this.hasAttribute("disabled")&&e.stopImmediatePropagation()}),u.on("focus",function(){s.focus()}),function(s,l,u,p){function f(e,t,r){u[e]&&s.$watch(u[e],function(e){r[e]&&l.attr(t,r[e])})}function h(e){var t=e.which||e.keyCode;t!==n.KEY_CODE.SPACE&&t!==n.KEY_CODE.ENTER||(e.preventDefault(),l.hasClass("md-focused")||l.addClass("md-focused"),m(e))}function m(e){l[0].hasAttribute("disabled")||s.$apply(function(){var t=u.ngChecked?u.checked:!p.$viewValue;p.$setViewValue(t,e&&e.type),p.$render()})}function g(){p.$viewValue&&!y?l.addClass(c):l.removeClass(c)}function v(e){y=e!==!1,y&&l.attr("aria-checked","mixed"),l.toggleClass("md-indeterminate",y)}var y;p=p||o.fakeNgModel(),i(l),d&&(v(),s.$watch(u.mdIndeterminate,v)),u.ngChecked&&s.$watch(s.$eval.bind(s,u.ngChecked),p.$setViewValue.bind(p)),f("ngDisabled","tabindex",{true:"-1",false:u.tabindex}),r.expectWithText(l,"aria-label"),e.link.pre(s,{on:t.noop,0:{}},u,[p]),s.mouseActive=!1,l.on("click",m).on("keypress",h).on("mousedown",function(){s.mouseActive=!0,a(function(){s.mouseActive=!1},100)}).on("focus",function(){s.mouseActive===!1&&l.addClass("md-focused")}).on("blur",function(){l.removeClass("md-focused")}),p.$render=g}}e=e[0];var c="md-checked";return{restrict:"E",transclude:!0,require:"?ngModel",priority:210,template:'<div class="_md-container" md-ink-ripple md-ink-ripple-checkbox><div class="_md-icon"></div></div><div ng-transclude class="_md-label"></div>',compile:s}}t.module("material.components.checkbox",["material.core"]).directive("mdCheckbox",e),e.$inject=["inputDirective","$mdAria","$mdConstant","$mdTheming","$mdUtil","$timeout"]}(),function(){t.module("material.components.chips",["material.core","material.components.autocomplete"])}(),function(){!function(){function e(e,r,n){function i(e,t){try{e.css(c(t))}catch(e){n.error(e.message)}}function a(e){var t=u(e);return s(t)}function s(t,n){n=n||!1;var i=e.PALETTES[t.palette][t.hue];return i=n?i.contrast:i.value,r.supplant("rgba( {0}, {1}, {2}, {3} )",[i[0],i[1],i[2],i[3]||t.opacity])}function c(e){var r={},n=e.hasOwnProperty("color");return t.forEach(e,function(e,t){var i=u(e),o=t.indexOf("background")>-1;r[t]=s(i),o&&!n&&(r.color=s(i,!0))}),r}function l(r){return t.isDefined(e.THEMES[r.split("-")[0]])}function u(r){var n=r.split("-"),i=t.isDefined(e.THEMES[n[0]]),o=i?n.splice(0,1)[0]:e.defaultTheme();return{theme:o,palette:d(n,o),hue:p(n,o),opacity:n[2]||1}}function d(t,n){var i=t.length>1&&o.indexOf(t[1])!==-1,a=t[0].replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();if(i&&(a=t[0]+"-"+t.splice(1,1)),o.indexOf(a)===-1){var s=e.THEMES[n].colors[a];if(!s)throw new Error(r.supplant("mdColors: couldn't find '{palette}' in the palettes.",{palette:a}));a=s.name}return a}function p(t,n){var i=e.THEMES[n].colors;if("hue"===t[1]){var o=parseInt(t.splice(2,1)[0],10);if(o<1||o>3)throw new Error(r.supplant("mdColors: 'hue-{hueNumber}' is not a valid hue, can be only 'hue-1', 'hue-2' and 'hue-3'",{hueNumber:o}));if(t[1]="hue-"+o,!(t[0]in i))throw new Error(r.supplant("mdColors: 'hue-x' can only be used with [{availableThemes}], but was used with '{usedTheme}'",{availableThemes:Object.keys(i).join(", "),usedTheme:t[0]}));return i[t[0]].hues[t[1]]}return t[1]||i[t[0]in i?t[0]:"primary"].hues.default}return o=o||Object.keys(e.PALETTES),{applyThemeColors:i,getThemeColor:a,hasTheme:l}}function n(e,r,n,o){return{restrict:"A",
require:["^?mdTheme"],compile:function(a,s){function c(){var e=s.mdColors,n=e.indexOf("::")>-1,o=!!n||i.test(s.mdColors);s.mdColors=e.replace("::","");var a=t.isDefined(s.mdColorsWatch);return!n&&!o&&(!a||r.parseAttributeBoolean(s.mdColorsWatch))}var l=c();return function(r,i,a,s){var c=s[0],u=function(t){var n=o(a.mdColors)(r);return c&&Object.keys(n).forEach(function(r){var i=n[r];e.hasTheme(i)||(n[r]=(t||c.$mdTheme)+"-"+i)}),n},d=t.noop;c&&(d=c.registerChanges(function(t){e.applyThemeColors(i,u(t))})),r.$on("destroy",function(){d()});try{l?r.$watch(u,t.bind(this,e.applyThemeColors,i),!0):e.applyThemeColors(i,u())}catch(e){n.error(e.message)}}}}}var i=/^{((\s|,)*?["'a-zA-Z-]+?\s*?:\s*?('|")[a-zA-Z0-9-.]*('|"))+\s*}$/,o=r;t.module("material.components.colors",["material.core"]).directive("mdColors",n).service("$mdColors",e),e.$inject=["$mdTheming","$mdUtil","$log"],n.$inject=["$mdColors","$mdUtil","$log","$parse"]}()}(),function(){function e(e){function t(e,t){this.$scope=e,this.$element=t}return{restrict:"E",controller:["$scope","$element",t],link:function(t,n){n.addClass("_md"),e(n),t.$broadcast("$mdContentLoaded",n),r(n[0])}}}function r(e){t.element(e).on("$md.pressdown",function(t){"t"===t.pointer.type&&(t.$materialScrollFixed||(t.$materialScrollFixed=!0,0===e.scrollTop?e.scrollTop=1:e.scrollHeight===e.scrollTop+e.offsetHeight&&(e.scrollTop-=1)))})}t.module("material.components.content",["material.core"]).directive("mdContent",e),e.$inject=["$mdTheming"]}(),function(){!function(){function e(){return{template:function(e,t){var r=t.hasOwnProperty("ngIf")?"":'ng-if="calendarCtrl.isInitialized"',n='<div ng-switch="calendarCtrl.currentView" '+r+'><md-calendar-year ng-switch-when="year"></md-calendar-year><md-calendar-month ng-switch-default></md-calendar-month></div>';return n},scope:{minDate:"=mdMinDate",maxDate:"=mdMaxDate",dateFilter:"=mdDateFilter"},require:["ngModel","mdCalendar"],controller:r,controllerAs:"calendarCtrl",bindToController:!0,link:function(e,t,r,n){var i=n[0],o=n[1];o.configureNgModel(i)}}}function r(e,r,n,o,a,s,c,l){s(e),this.$element=e,this.$scope=r,this.dateUtil=n,this.$mdUtil=o,this.keyCode=a.KEY_CODE,this.$$rAF=c,this.today=this.dateUtil.createDateAtMidnight(),this.ngModelCtrl=null,this.currentView="month",this.SELECTED_DATE_CLASS="md-calendar-selected-date",this.TODAY_CLASS="md-calendar-date-today",this.FOCUSED_DATE_CLASS="md-focus",this.id=i++,this.displayDate=null,this.selectedDate=null,this.isInitialized=!1,this.width=0,this.scrollbarWidth=0,l.tabindex||e.attr("tabindex","-1"),e.on("keydown",t.bind(this,this.handleKeyEvent))}t.module("material.components.datepicker",["material.core","material.components.icon","material.components.virtualRepeat"]).directive("mdCalendar",e);var n=340,i=0;r.$inject=["$element","$scope","$$mdDateUtil","$mdUtil","$mdConstant","$mdTheming","$$rAF","$attrs"],r.prototype.configureNgModel=function(e){var t=this;t.ngModelCtrl=e,t.$mdUtil.nextTick(function(){t.isInitialized=!0}),e.$render=function(){var e=this.$viewValue;t.$scope.$broadcast("md-calendar-parent-changed",e),t.selectedDate||(t.selectedDate=e),t.displayDate||(t.displayDate=t.selectedDate||t.today)}},r.prototype.setNgModelValue=function(e){var t=this.dateUtil.createDateAtMidnight(e);return this.focus(t),this.$scope.$emit("md-calendar-change",t),this.ngModelCtrl.$setViewValue(t),this.ngModelCtrl.$render(),t},r.prototype.setCurrentView=function(e,r){var n=this;n.$mdUtil.nextTick(function(){n.currentView=e,r&&(n.displayDate=t.isDate(r)?r:new Date(r))})},r.prototype.focus=function(e){if(this.dateUtil.isValidDate(e)){var t=this.$element[0].querySelector(".md-focus");t&&t.classList.remove(this.FOCUSED_DATE_CLASS);var r=this.getDateId(e,this.currentView),n=document.getElementById(r);n&&(n.classList.add(this.FOCUSED_DATE_CLASS),n.focus(),this.displayDate=e)}else{var i=this.$element[0].querySelector("[ng-switch]");i&&i.focus()}},r.prototype.getActionFromKeyEvent=function(e){var t=this.keyCode;switch(e.which){case t.ENTER:return"select";case t.RIGHT_ARROW:return"move-right";case t.LEFT_ARROW:return"move-left";case t.DOWN_ARROW:return e.metaKey?"move-page-down":"move-row-down";case t.UP_ARROW:return e.metaKey?"move-page-up":"move-row-up";case t.PAGE_DOWN:return"move-page-down";case t.PAGE_UP:return"move-page-up";case t.HOME:return"start";case t.END:return"end";default:return null}},r.prototype.handleKeyEvent=function(e){var t=this;this.$scope.$apply(function(){if(e.which==t.keyCode.ESCAPE||e.which==t.keyCode.TAB)return t.$scope.$emit("md-calendar-close"),void(e.which==t.keyCode.TAB&&e.preventDefault());var r=t.getActionFromKeyEvent(e);r&&(e.preventDefault(),e.stopPropagation(),t.$scope.$broadcast("md-calendar-parent-action",r))})},r.prototype.hideVerticalScrollbar=function(e){function t(){var t=r.width||n,i=r.scrollbarWidth,a=e.calendarScroller;o.style.width=t+"px",a.style.width=t+i+"px",a.style.paddingRight=i+"px"}var r=this,i=e.$element[0],o=i.querySelector(".md-calendar-scroll-mask");r.width>0?t():r.$$rAF(function(){var n=e.calendarScroller;r.scrollbarWidth=n.offsetWidth-n.clientWidth,r.width=i.querySelector("table").offsetWidth,t()})},r.prototype.getDateId=function(e,t){if(!t)throw new Error("A namespace for the date id has to be specified.");return["md",this.id,t,e.getFullYear(),e.getMonth(),e.getDate()].join("-")}}()}(),function(){!function(){function e(){return{template:'<table aria-hidden="true" class="md-calendar-day-header"><thead></thead></table><div class="md-calendar-scroll-mask"><md-virtual-repeat-container class="md-calendar-scroll-container" md-offset-size="'+(i-n)+'"><table role="grid" tabindex="0" class="md-calendar" aria-readonly="true"><tbody md-calendar-month-body role="rowgroup" md-virtual-repeat="i in monthCtrl.items" md-month-offset="$index" class="md-calendar-month" md-start-index="monthCtrl.getSelectedMonthIndex()" md-item-size="'+n+'"></tbody></table></md-virtual-repeat-container></div>',require:["^^mdCalendar","mdCalendarMonth"],controller:r,controllerAs:"monthCtrl",bindToController:!0,link:function(e,t,r,n){var i=n[0],o=n[1];o.initialize(i)}}}function r(e,t,r,n,i,o){this.$element=e,this.$scope=t,this.$animate=r,this.$q=n,this.dateUtil=i,this.dateLocale=o,this.calendarScroller=e[0].querySelector(".md-virtual-repeat-scroller"),this.firstRenderableDate=null,this.isInitialized=!1,this.isMonthTransitionInProgress=!1;var a=this;this.cellClickHandler=function(){var e=i.getTimestampFromNode(this);a.$scope.$apply(function(){a.calendarCtrl.setNgModelValue(e)})},this.headerClickHandler=function(){a.calendarCtrl.setCurrentView("year",i.getTimestampFromNode(this))}}t.module("material.components.datepicker").directive("mdCalendarMonth",e);var n=265,i=45;r.$inject=["$element","$scope","$animate","$q","$$mdDateUtil","$mdDateLocale"],r.prototype.initialize=function(e){var t=e.minDate,r=e.maxDate;if(this.calendarCtrl=e,this.items={length:2e3},r&&t){var n=this.dateUtil.getMonthDistance(t,r)+1;n=Math.max(n,1),n+=1,this.items.length=n}if(this.firstRenderableDate=this.dateUtil.incrementMonths(e.today,-this.items.length/2),t&&t>this.firstRenderableDate)this.firstRenderableDate=t;else if(r){this.items.length-2;this.firstRenderableDate=this.dateUtil.incrementMonths(r,-(this.items.length-2))}this.attachScopeListeners(),e.ngModelCtrl&&e.ngModelCtrl.$render()},r.prototype.getSelectedMonthIndex=function(){var e=this.calendarCtrl;return this.dateUtil.getMonthDistance(this.firstRenderableDate,e.displayDate||e.selectedDate||e.today)},r.prototype.changeSelectedDate=function(e){var t=this,r=t.calendarCtrl,n=r.selectedDate;r.selectedDate=e,this.changeDisplayDate(e).then(function(){var t=r.SELECTED_DATE_CLASS,i="month";if(n){var o=document.getElementById(r.getDateId(n,i));o&&(o.classList.remove(t),o.setAttribute("aria-selected","false"))}if(e){var a=document.getElementById(r.getDateId(e,i));a&&(a.classList.add(t),a.setAttribute("aria-selected","true"))}})},r.prototype.changeDisplayDate=function(e){if(!this.isInitialized)return this.buildWeekHeader(),this.calendarCtrl.hideVerticalScrollbar(this),this.isInitialized=!0,this.$q.when();if(!this.dateUtil.isValidDate(e)||this.isMonthTransitionInProgress)return this.$q.when();this.isMonthTransitionInProgress=!0;var t=this.animateDateChange(e);this.calendarCtrl.displayDate=e;var r=this;return t.then(function(){r.isMonthTransitionInProgress=!1}),t},r.prototype.animateDateChange=function(e){if(this.dateUtil.isValidDate(e)){var t=this.dateUtil.getMonthDistance(this.firstRenderableDate,e);this.calendarScroller.scrollTop=t*n}return this.$q.when()},r.prototype.buildWeekHeader=function(){for(var e=this.dateLocale.firstDayOfWeek,t=this.dateLocale.shortDays,r=document.createElement("tr"),n=0;n<7;n++){var i=document.createElement("th");i.textContent=t[(n+e)%7],r.appendChild(i)}this.$element.find("thead").append(r)},r.prototype.attachScopeListeners=function(){var e=this;e.$scope.$on("md-calendar-parent-changed",function(t,r){e.changeSelectedDate(r)}),e.$scope.$on("md-calendar-parent-action",t.bind(this,this.handleKeyEvent))},r.prototype.handleKeyEvent=function(e,t){var r=this.calendarCtrl,n=r.displayDate;if("select"===t)r.setNgModelValue(n);else{var i=null,o=this.dateUtil;switch(t){case"move-right":i=o.incrementDays(n,1);break;case"move-left":i=o.incrementDays(n,-1);break;case"move-page-down":i=o.incrementMonths(n,1);break;case"move-page-up":i=o.incrementMonths(n,-1);break;case"move-row-down":i=o.incrementDays(n,7);break;case"move-row-up":i=o.incrementDays(n,-7);break;case"start":i=o.getFirstDateOfMonth(n);break;case"end":i=o.getLastDateOfMonth(n)}i&&(i=this.dateUtil.clampDate(i,r.minDate,r.maxDate),this.changeDisplayDate(i).then(function(){r.focus(i)}))}}}()}(),function(){!function(){function e(){return{require:["^^mdCalendar","^^mdCalendarMonth","mdCalendarMonthBody"],scope:{offset:"=mdMonthOffset"},controller:r,controllerAs:"mdMonthBodyCtrl",bindToController:!0,link:function(e,t,r,n){var i=n[0],o=n[1],a=n[2];a.calendarCtrl=i,a.monthCtrl=o,a.generateContent(),e.$watch(function(){return a.offset},function(e,t){e!=t&&a.generateContent()})}}}function r(e,t,r){this.$element=e,this.dateUtil=t,this.dateLocale=r,this.monthCtrl=null,this.calendarCtrl=null,this.offset=null,this.focusAfterAppend=null}t.module("material.components.datepicker").directive("mdCalendarMonthBody",e),r.$inject=["$element","$$mdDateUtil","$mdDateLocale"],r.prototype.generateContent=function(){var e=this.dateUtil.incrementMonths(this.monthCtrl.firstRenderableDate,this.offset);this.$element.empty(),this.$element.append(this.buildCalendarForMonth(e)),this.focusAfterAppend&&(this.focusAfterAppend.classList.add(this.calendarCtrl.FOCUSED_DATE_CLASS),this.focusAfterAppend.focus(),this.focusAfterAppend=null)},r.prototype.buildDateCell=function(e){var t=this.monthCtrl,r=this.calendarCtrl,n=document.createElement("td");if(n.tabIndex=-1,n.classList.add("md-calendar-date"),n.setAttribute("role","gridcell"),e){n.setAttribute("tabindex","-1"),n.setAttribute("aria-label",this.dateLocale.longDateFormatter(e)),n.id=r.getDateId(e,"month"),n.setAttribute("data-timestamp",e.getTime()),this.dateUtil.isSameDay(e,r.today)&&n.classList.add(r.TODAY_CLASS),this.dateUtil.isValidDate(r.selectedDate)&&this.dateUtil.isSameDay(e,r.selectedDate)&&(n.classList.add(r.SELECTED_DATE_CLASS),n.setAttribute("aria-selected","true"));var i=this.dateLocale.dates[e.getDate()];if(this.isDateEnabled(e)){var o=document.createElement("span");o.classList.add("md-calendar-date-selection-indicator"),o.textContent=i,n.appendChild(o),n.addEventListener("click",t.cellClickHandler),r.displayDate&&this.dateUtil.isSameDay(e,r.displayDate)&&(this.focusAfterAppend=n)}else n.classList.add("md-calendar-date-disabled"),n.textContent=i}return n},r.prototype.isDateEnabled=function(e){return this.dateUtil.isDateWithinRange(e,this.calendarCtrl.minDate,this.calendarCtrl.maxDate)&&(!t.isFunction(this.calendarCtrl.dateFilter)||this.calendarCtrl.dateFilter(e))},r.prototype.buildDateRow=function(e){var t=document.createElement("tr");return t.setAttribute("role","row"),t.setAttribute("aria-label",this.dateLocale.weekNumberFormatter(e)),t},r.prototype.buildCalendarForMonth=function(e){var t=this.dateUtil.isValidDate(e)?e:new Date,r=this.dateUtil.getFirstDateOfMonth(t),n=this.getLocaleDay_(r),i=this.dateUtil.getNumberOfDaysInMonth(t),o=document.createDocumentFragment(),a=1,s=this.buildDateRow(a);o.appendChild(s);var c=this.offset===this.monthCtrl.items.length-1,l=0,u=document.createElement("td");if(u.textContent=this.dateLocale.monthHeaderFormatter(t),u.classList.add("md-calendar-month-label"),this.calendarCtrl.maxDate&&r>this.calendarCtrl.maxDate?u.classList.add("md-calendar-month-label-disabled"):(u.addEventListener("click",this.monthCtrl.headerClickHandler),u.setAttribute("data-timestamp",r.getTime()),u.setAttribute("aria-label",this.dateLocale.monthFormatter(t))),n<=2){u.setAttribute("colspan","7");var d=this.buildDateRow();if(d.appendChild(u),o.insertBefore(d,s),c)return o}else l=2,u.setAttribute("colspan","2"),s.appendChild(u);for(var p=l;p<n;p++)s.appendChild(this.buildDateCell());for(var f=n,h=r,m=1;m<=i;m++){if(7===f){if(c)return o;f=0,a++,s=this.buildDateRow(a),o.appendChild(s)}h.setDate(m);var g=this.buildDateCell(h);s.appendChild(g),f++}for(;s.childNodes.length<7;)s.appendChild(this.buildDateCell());for(;o.childNodes.length<6;){for(var v=this.buildDateRow(),y=0;y<7;y++)v.appendChild(this.buildDateCell());o.appendChild(v)}return o},r.prototype.getLocaleDay_=function(e){return(e.getDay()+(7-this.dateLocale.firstDayOfWeek))%7}}()}(),function(){!function(){function e(){return{template:'<div class="md-calendar-scroll-mask"><md-virtual-repeat-container class="md-calendar-scroll-container"><table role="grid" tabindex="0" class="md-calendar" aria-readonly="true"><tbody md-calendar-year-body role="rowgroup" md-virtual-repeat="i in yearCtrl.items" md-year-offset="$index" class="md-calendar-year" md-start-index="yearCtrl.getFocusedYearIndex()" md-item-size="'+n+'"></tbody></table></md-virtual-repeat-container></div>',require:["^^mdCalendar","mdCalendarYear"],controller:r,controllerAs:"yearCtrl",bindToController:!0,link:function(e,t,r,n){var i=n[0],o=n[1];o.initialize(i)}}}function r(e,t,r,n,i,o){this.$element=e,this.$scope=t,this.$animate=r,this.$q=n,this.dateUtil=i,this.$timeout=o,this.calendarScroller=e[0].querySelector(".md-virtual-repeat-scroller"),this.firstRenderableDate=null,this.isInitialized=!1,this.isMonthTransitionInProgress=!1;var a=this;this.cellClickHandler=function(){a.calendarCtrl.setCurrentView("month",i.getTimestampFromNode(this))}}t.module("material.components.datepicker").directive("mdCalendarYear",e);var n=88;r.$inject=["$element","$scope","$animate","$q","$$mdDateUtil","$timeout"],r.prototype.initialize=function(e){var t=e.minDate,r=e.maxDate;if(this.calendarCtrl=e,this.items={length:400},r&&t){var n=this.dateUtil.getYearDistance(t,r)+1;this.items.length=Math.max(n,1)}this.firstRenderableDate=this.dateUtil.incrementYears(e.today,-(this.items.length/2)),t&&t>this.firstRenderableDate?this.firstRenderableDate=t:r&&(this.firstRenderableDate=this.dateUtil.incrementMonths(r,-(this.items.length-1))),(t||r)&&this.$timeout(),this.attachScopeListeners(),e.ngModelCtrl&&e.ngModelCtrl.$render()},r.prototype.getFocusedYearIndex=function(){var e=this.calendarCtrl;return this.dateUtil.getYearDistance(this.firstRenderableDate,e.displayDate||e.selectedDate||e.today)},r.prototype.changeDate=function(e){if(!this.isInitialized)return this.calendarCtrl.hideVerticalScrollbar(this),this.isInitialized=!0,this.$q.when();if(this.dateUtil.isValidDate(e)&&!this.isMonthTransitionInProgress){var t=this,r=this.animateDateChange(e);return t.isMonthTransitionInProgress=!0,t.calendarCtrl.displayDate=e,r.then(function(){t.isMonthTransitionInProgress=!1})}},r.prototype.animateDateChange=function(e){if(this.dateUtil.isValidDate(e)){var t=this.dateUtil.getYearDistance(this.firstRenderableDate,e);this.calendarScroller.scrollTop=t*n}return this.$q.when()},r.prototype.handleKeyEvent=function(e,t){var r=this.calendarCtrl,n=r.displayDate;if("select"===t)this.changeDate(n).then(function(){r.setCurrentView("month",n),r.focus(n)});else{var i=null,o=this.dateUtil;switch(t){case"move-right":i=o.incrementMonths(n,1);break;case"move-left":i=o.incrementMonths(n,-1);break;case"move-row-down":i=o.incrementMonths(n,6);break;case"move-row-up":i=o.incrementMonths(n,-6)}if(i){var a=r.minDate?o.incrementMonths(o.getFirstDateOfMonth(r.minDate),1):null,s=r.maxDate?o.getFirstDateOfMonth(r.maxDate):null;i=o.getFirstDateOfMonth(this.dateUtil.clampDate(i,a,s)),this.changeDate(i).then(function(){r.focus(i)})}}},r.prototype.attachScopeListeners=function(){var e=this;e.$scope.$on("md-calendar-parent-changed",function(t,r){e.changeDate(r)}),e.$scope.$on("md-calendar-parent-action",t.bind(e,e.handleKeyEvent))}}()}(),function(){!function(){function e(){return{require:["^^mdCalendar","^^mdCalendarYear","mdCalendarYearBody"],scope:{offset:"=mdYearOffset"},controller:r,controllerAs:"mdYearBodyCtrl",bindToController:!0,link:function(e,t,r,n){var i=n[0],o=n[1],a=n[2];a.calendarCtrl=i,a.yearCtrl=o,a.generateContent(),e.$watch(function(){return a.offset},function(e,t){e!=t&&a.generateContent()})}}}function r(e,t,r){this.$element=e,this.dateUtil=t,this.dateLocale=r,this.calendarCtrl=null,this.yearCtrl=null,this.offset=null,this.focusAfterAppend=null}t.module("material.components.datepicker").directive("mdCalendarYearBody",e),r.$inject=["$element","$$mdDateUtil","$mdDateLocale"],r.prototype.generateContent=function(){var e=this.dateUtil.incrementYears(this.yearCtrl.firstRenderableDate,this.offset);this.$element.empty(),this.$element.append(this.buildCalendarForYear(e)),this.focusAfterAppend&&(this.focusAfterAppend.classList.add(this.calendarCtrl.FOCUSED_DATE_CLASS),this.focusAfterAppend.focus(),this.focusAfterAppend=null)},r.prototype.buildMonthCell=function(e,t){var r=this.calendarCtrl,n=this.yearCtrl,i=this.buildBlankCell(),o=new Date(e,t,1);i.setAttribute("aria-label",this.dateLocale.monthFormatter(o)),i.id=r.getDateId(o,"year"),i.setAttribute("data-timestamp",o.getTime()),this.dateUtil.isSameMonthAndYear(o,r.today)&&i.classList.add(r.TODAY_CLASS),this.dateUtil.isValidDate(r.selectedDate)&&this.dateUtil.isSameMonthAndYear(o,r.selectedDate)&&(i.classList.add(r.SELECTED_DATE_CLASS),i.setAttribute("aria-selected","true"));var a=this.dateLocale.shortMonths[t];if(this.dateUtil.isDateWithinRange(o,r.minDate,r.maxDate)){var s=document.createElement("span");s.classList.add("md-calendar-date-selection-indicator"),s.textContent=a,i.appendChild(s),i.addEventListener("click",n.cellClickHandler),r.displayDate&&this.dateUtil.isSameMonthAndYear(o,r.displayDate)&&(this.focusAfterAppend=i)}else i.classList.add("md-calendar-date-disabled"),i.textContent=a;return i},r.prototype.buildBlankCell=function(){var e=document.createElement("td");return e.tabIndex=-1,e.classList.add("md-calendar-date"),e.setAttribute("role","gridcell"),e.setAttribute("tabindex","-1"),e},r.prototype.buildCalendarForYear=function(e){var t,r=e.getFullYear(),n=document.createDocumentFragment(),i=document.createElement("tr"),o=document.createElement("td");for(o.className="md-calendar-month-label",o.textContent=r,i.appendChild(o),t=0;t<6;t++)i.appendChild(this.buildMonthCell(r,t));n.appendChild(i);var a=document.createElement("tr");for(a.appendChild(this.buildBlankCell()),t=6;t<12;t++)a.appendChild(this.buildMonthCell(r,t));return n.appendChild(a),n}}()}(),function(){!function(){t.module("material.components.datepicker").config(["$provide",function(e){function t(){this.months=null,this.shortMonths=null,this.days=null,this.shortDays=null,this.dates=null,this.firstDayOfWeek=0,this.formatDate=null,this.parseDate=null,this.monthHeaderFormatter=null,this.weekNumberFormatter=null,this.longDateFormatter=null,this.msgCalendar="",this.msgOpenCalendar=""}t.prototype.$get=function(e,t){function r(e){if(!e)return"";var r=e.toLocaleTimeString(),n=e;return 0!=e.getHours()||r.indexOf("11:")===-1&&r.indexOf("23:")===-1||(n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),1,0,0)),t("date")(n,"M/d/yyyy")}function n(e){return new Date(e)}function i(e){e=e.trim();var t=/^(([a-zA-Z]{3,}|[0-9]{1,4})([ \.,]+|[\/\-])){2}([a-zA-Z]{3,}|[0-9]{1,4})$/;return t.test(e)}function o(e){return h.shortMonths[e.getMonth()]+" "+e.getFullYear()}function a(e){return h.months[e.getMonth()]+" "+e.getFullYear()}function s(e){return"Week "+e}function c(e){return[h.days[e.getDay()],h.months[e.getMonth()],h.dates[e.getDate()],e.getFullYear()].join(" ")}for(var l=e.DATETIME_FORMATS.DAY.map(function(e){return e[0]}),u=Array(32),d=1;d<=31;d++)u[d]=d;var p="Calendar",f="Open calendar",h={months:this.months||e.DATETIME_FORMATS.MONTH,shortMonths:this.shortMonths||e.DATETIME_FORMATS.SHORTMONTH,days:this.days||e.DATETIME_FORMATS.DAY,shortDays:this.shortDays||l,dates:this.dates||u,firstDayOfWeek:this.firstDayOfWeek||0,formatDate:this.formatDate||r,parseDate:this.parseDate||n,isDateComplete:this.isDateComplete||i,monthHeaderFormatter:this.monthHeaderFormatter||o,monthFormatter:this.monthFormatter||a,weekNumberFormatter:this.weekNumberFormatter||s,longDateFormatter:this.longDateFormatter||c,msgCalendar:this.msgCalendar||p,msgOpenCalendar:this.msgOpenCalendar||f};return h},t.prototype.$get.$inject=["$locale","$filter"],e.provider("$mdDateLocale",new t)}])}()}(),function(){!function(){function r(e){return{template:'<md-button class="md-datepicker-button md-icon-button" type="button" tabindex="-1" aria-hidden="true" ng-click="ctrl.openCalendarPane($event)"><md-icon class="md-datepicker-calendar-icon" aria-label="md-calendar" md-svg-src="'+e.mdCalendar+'"></md-icon></md-button><div class="md-datepicker-input-container" ng-class="{\'md-datepicker-focused\': ctrl.isFocused}"><input class="md-datepicker-input" aria-haspopup="true" ng-focus="ctrl.setFocused(true)" ng-blur="ctrl.setFocused(false)"><md-button type="button" md-no-ink class="md-datepicker-triangle-button md-icon-button" ng-click="ctrl.openCalendarPane($event)" aria-label="{{::ctrl.dateLocale.msgOpenCalendar}}"><div class="md-datepicker-expand-triangle"></div></md-button></div><div class="md-datepicker-calendar-pane md-whiteframe-z1"><div class="md-datepicker-input-mask"><div class="md-datepicker-input-mask-opaque"></div></div><div class="md-datepicker-calendar"><md-calendar role="dialog" aria-label="{{::ctrl.dateLocale.msgCalendar}}" md-min-date="ctrl.minDate" md-max-date="ctrl.maxDate"md-date-filter="ctrl.dateFilter"ng-model="ctrl.date" ng-if="ctrl.isCalendarOpen"></md-calendar></div></div>',require:["ngModel","mdDatepicker","?^mdInputContainer"],scope:{minDate:"=mdMinDate",maxDate:"=mdMaxDate",placeholder:"@mdPlaceholder",dateFilter:"=mdDateFilter"},controller:n,controllerAs:"ctrl",bindToController:!0,link:function(e,t,r,n){var i=n[0],o=n[1],a=n[2];if(a)throw Error("md-datepicker should not be placed inside md-input-container.");o.configureNgModel(i)}}}function n(e,r,n,i,o,a,s,c,l,u,d,p){this.$compile=i,this.$timeout=o,this.$window=a,this.dateLocale=u,this.dateUtil=d,this.$mdConstant=s,this.$mdUtil=l,this.$$rAF=p,this.documentElement=t.element(document.documentElement),this.ngModelCtrl=null,this.inputElement=r[0].querySelector("input"),this.ngInputElement=t.element(this.inputElement),this.inputContainer=r[0].querySelector(".md-datepicker-input-container"),this.calendarPane=r[0].querySelector(".md-datepicker-calendar-pane"),this.calendarButton=r[0].querySelector(".md-datepicker-button"),this.inputMask=r[0].querySelector(".md-datepicker-input-mask-opaque"),this.$element=r,this.$attrs=n,this.$scope=e,this.date=null,this.isFocused=!1,this.isDisabled,this.setDisabled(r[0].disabled||t.isString(n.disabled)),this.isCalendarOpen=!1,this.openOnFocus=n.hasOwnProperty("mdOpenOnFocus"),this.calendarPaneOpenedFrom=null,this.calendarPane.id="md-date-pane"+l.nextUid(),c(r),this.bodyClickHandler=t.bind(this,this.handleBodyClick),this.windowResizeHandler=l.debounce(t.bind(this,this.closeCalendarPane),100),n.tabindex||r.attr("tabindex","-1"),this.installPropertyInterceptors(),this.attachChangeListeners(),this.attachInteractionListeners();var f=this;e.$on("$destroy",function(){f.detachCalendarPane()})}t.module("material.components.datepicker").directive("mdDatepicker",r),r.$inject=["$$mdSvgRegistry"];var i=3,o="md-datepicker-invalid",a=500,s=368,c=360;n.$inject=["$scope","$element","$attrs","$compile","$timeout","$window","$mdConstant","$mdTheming","$mdUtil","$mdDateLocale","$$mdDateUtil","$$rAF"],n.prototype.configureNgModel=function(e){this.ngModelCtrl=e;var t=this;e.$render=function(){var e=t.ngModelCtrl.$viewValue;if(e&&!(e instanceof Date))throw Error("The ng-model for md-datepicker must be a Date instance. Currently the model is a: "+typeof e);t.date=e,t.inputElement.value=t.dateLocale.formatDate(e),t.resizeInputElement(),t.updateErrorState()}},n.prototype.attachChangeListeners=function(){var e=this;e.$scope.$on("md-calendar-change",function(t,r){e.ngModelCtrl.$setViewValue(r),e.date=r,e.inputElement.value=e.dateLocale.formatDate(r),e.closeCalendarPane(),e.resizeInputElement(),e.updateErrorState()}),e.ngInputElement.on("input",t.bind(e,e.resizeInputElement)),e.ngInputElement.on("input",e.$mdUtil.debounce(e.handleInputEvent,a,e))},n.prototype.attachInteractionListeners=function(){var e=this,r=this.$scope,n=this.$mdConstant.KEY_CODE;e.ngInputElement.on("keydown",function(t){t.altKey&&t.keyCode==n.DOWN_ARROW&&(e.openCalendarPane(t),r.$digest())}),e.openOnFocus&&e.ngInputElement.on("focus",t.bind(e,e.openCalendarPane)),r.$on("md-calendar-close",function(){e.closeCalendarPane()})},n.prototype.installPropertyInterceptors=function(){var e=this;if(this.$attrs.ngDisabled){var t=this.$scope.$parent;t&&t.$watch(this.$attrs.ngDisabled,function(t){e.setDisabled(t)})}Object.defineProperty(this,"placeholder",{get:function(){return e.inputElement.placeholder},set:function(t){e.inputElement.placeholder=t||""}})},n.prototype.setDisabled=function(e){this.isDisabled=e,this.inputElement.disabled=e,this.calendarButton.disabled=e},n.prototype.updateErrorState=function(e){var r=e||this.date;if(this.clearErrorState(),this.dateUtil.isValidDate(r)){if(r=this.dateUtil.createDateAtMidnight(r),this.dateUtil.isValidDate(this.minDate)){var n=this.dateUtil.createDateAtMidnight(this.minDate);this.ngModelCtrl.$setValidity("mindate",r>=n)}if(this.dateUtil.isValidDate(this.maxDate)){var i=this.dateUtil.createDateAtMidnight(this.maxDate);this.ngModelCtrl.$setValidity("maxdate",r<=i)}t.isFunction(this.dateFilter)&&this.ngModelCtrl.$setValidity("filtered",this.dateFilter(r))}else this.ngModelCtrl.$setValidity("valid",null==r);this.ngModelCtrl.$valid||this.inputContainer.classList.add(o)},n.prototype.clearErrorState=function(){this.inputContainer.classList.remove(o),["mindate","maxdate","filtered","valid"].forEach(function(e){this.ngModelCtrl.$setValidity(e,!0)},this)},n.prototype.resizeInputElement=function(){this.inputElement.size=this.inputElement.value.length+i},n.prototype.handleInputEvent=function(){var e=this.inputElement.value,t=e?this.dateLocale.parseDate(e):null;this.dateUtil.setDateTimeToMidnight(t);var r=""==e||this.dateUtil.isValidDate(t)&&this.dateLocale.isDateComplete(e)&&this.isDateEnabled(t);r&&(this.ngModelCtrl.$setViewValue(t),this.date=t),this.updateErrorState(t)},n.prototype.isDateEnabled=function(e){return this.dateUtil.isDateWithinRange(e,this.minDate,this.maxDate)&&(!t.isFunction(this.dateFilter)||this.dateFilter(e))},n.prototype.attachCalendarPane=function(){var e=this.calendarPane,r=document.body;e.style.transform="",this.$element.addClass("md-datepicker-open"),t.element(r).addClass("md-datepicker-is-showing");var n=this.inputContainer.getBoundingClientRect(),i=r.getBoundingClientRect(),o=n.top-i.top,a=n.left-i.left,l=i.top<0&&0==document.body.scrollTop?-i.top:document.body.scrollTop,u=i.left<0&&0==document.body.scrollLeft?-i.left:document.body.scrollLeft,d=l+this.$window.innerHeight,p=u+this.$window.innerWidth;if(a+c>p){if(p-c>0)a=p-c;else{a=u;var f=this.$window.innerWidth/c;e.style.transform="scale("+f+")"}e.classList.add("md-datepicker-pos-adjusted")}o+s>d&&d-s>l&&(o=d-s,e.classList.add("md-datepicker-pos-adjusted")),e.style.left=a+"px",e.style.top=o+"px",document.body.appendChild(e),this.inputMask.style.left=n.width+"px",this.$$rAF(function(){e.classList.add("md-pane-open")})},n.prototype.detachCalendarPane=function(){this.$element.removeClass("md-datepicker-open"),t.element(document.body).removeClass("md-datepicker-is-showing"),this.calendarPane.classList.remove("md-pane-open"),this.calendarPane.classList.remove("md-datepicker-pos-adjusted"),this.isCalendarOpen&&this.$mdUtil.enableScrolling(),this.calendarPane.parentNode&&this.calendarPane.parentNode.removeChild(this.calendarPane)},n.prototype.openCalendarPane=function(t){if(!this.isCalendarOpen&&!this.isDisabled){this.isCalendarOpen=!0,this.calendarPaneOpenedFrom=t.target,this.$mdUtil.disableScrollAround(this.calendarPane),this.attachCalendarPane(),this.focusCalendar();var r=this;this.$mdUtil.nextTick(function(){r.documentElement.on("click touchstart",r.bodyClickHandler)},!1),e.addEventListener("resize",this.windowResizeHandler)}},n.prototype.closeCalendarPane=function(){function t(){r.detachCalendarPane(),r.isCalendarOpen=!1,r.ngModelCtrl.$setTouched(),r.documentElement.off("click touchstart",r.bodyClickHandler),e.removeEventListener("resize",r.windowResizeHandler)}if(this.isCalendarOpen){var r=this;r.calendarPaneOpenedFrom.focus(),r.calendarPaneOpenedFrom=null,r.openOnFocus?this.$mdUtil.nextTick(t):t()}},n.prototype.getCalendarCtrl=function(){return t.element(this.calendarPane.querySelector("md-calendar")).controller("mdCalendar")},n.prototype.focusCalendar=function(){var e=this;this.$mdUtil.nextTick(function(){e.getCalendarCtrl().focus()},!1)},n.prototype.setFocused=function(e){e||this.ngModelCtrl.$setTouched(),this.isFocused=e},n.prototype.handleBodyClick=function(e){if(this.isCalendarOpen){var t=this.$mdUtil.getClosest,r=t(e.target,"md-calendar-year")||t(e.target,"md-calendar-month");r||this.closeCalendarPane(),this.$scope.$digest()}}}()}(),function(){!function(){t.module("material.components.datepicker").factory("$$mdDateUtil",function(){function e(e){return new Date(e.getFullYear(),e.getMonth(),1)}function r(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function n(e){return new Date(e.getFullYear(),e.getMonth()+1,1)}function i(e){return new Date(e.getFullYear(),e.getMonth()-1,1)}function o(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function a(e,t){return e.getDate()==t.getDate()&&o(e,t)}function s(e,t){var r=n(e);return o(r,t)}function c(e,t){var r=i(e);return o(t,r)}function l(e,t){return v((e.getTime()+t.getTime())/2)}function u(t){var r=e(t);return Math.floor((r.getDay()+t.getDate()-1)/7)}function d(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+t)}function p(e,t){var n=new Date(e.getFullYear(),e.getMonth()+t,1),i=r(n);return i<e.getDate()?n.setDate(i):n.setDate(e.getDate()),n}function f(e,t){return 12*(t.getFullYear()-e.getFullYear())+(t.getMonth()-e.getMonth())}function h(e){return new Date(e.getFullYear(),e.getMonth(),r(e))}function m(e){return null!=e&&e.getTime&&!isNaN(e.getTime())}function g(e){m(e)&&e.setHours(0,0,0,0)}function v(e){var r;return r=t.isUndefined(e)?new Date:new Date(e),g(r),r}function y(e,t,r){var n=v(e),i=m(t)?v(t):null,o=m(r)?v(r):null;return(!i||i<=n)&&(!o||o>=n)}function b(e,t){return p(e,12*t)}function S(e,t){return t.getFullYear()-e.getFullYear()}function _(e,t,r){var n=e;return t&&e<t&&(n=new Date(t.getTime())),r&&e>r&&(n=new Date(r.getTime())),n}function w(e){if(e&&e.hasAttribute("data-timestamp"))return Number(e.getAttribute("data-timestamp"))}return{getFirstDateOfMonth:e,getNumberOfDaysInMonth:r,getDateInNextMonth:n,getDateInPreviousMonth:i,isInNextMonth:s,isInPreviousMonth:c,getDateMidpoint:l,isSameMonthAndYear:o,getWeekOfMonth:u,incrementDays:d,incrementMonths:p,getLastDateOfMonth:h,isSameDay:a,getMonthDistance:f,isValidDate:m,
setDateTimeToMidnight:g,createDateAtMidnight:v,isDateWithinRange:y,incrementYears:b,getYearDistance:S,clampDate:_,getTimestampFromNode:w}})}()}(),function(){function e(e,r,n){return{restrict:"E",link:function(i,o){o.addClass("_md"),r(o),e(function(){function e(){o.toggleClass("md-content-overflow",a.scrollHeight>a.clientHeight)}var r,a=o[0].querySelector("md-dialog-content");a&&(r=a.getElementsByTagName("img"),e(),t.element(r).on("load",e)),i.$on("$destroy",function(){n.destroy(o)})})}}}function n(e){function n(e,t,r){return{template:['<md-dialog md-theme="{{ dialog.theme }}" aria-label="{{ dialog.ariaLabel }}" ng-class="dialog.css">','  <md-dialog-content class="md-dialog-content" role="document" tabIndex="-1">','    <h2 class="md-title">{{ dialog.title }}</h2>','    <div ng-if="::dialog.mdHtmlContent" class="_md-dialog-content-body" ','        ng-bind-html="::dialog.mdHtmlContent"></div>','    <div ng-if="::!dialog.mdHtmlContent" class="_md-dialog-content-body">',"      <p>{{::dialog.mdTextContent}}</p>","    </div>",'    <md-input-container md-no-float ng-if="::dialog.$type == \'prompt\'" class="md-prompt-input-container">','      <input ng-keypress="dialog.keypress($event)" md-autofocus ng-model="dialog.result"              placeholder="{{::dialog.placeholder}}">',"    </md-input-container>","  </md-dialog-content>","  <md-dialog-actions>",'    <md-button ng-if="dialog.$type === \'confirm\' || dialog.$type === \'prompt\'"               ng-click="dialog.abort()" class="md-primary">',"      {{ dialog.cancel }}","    </md-button>",'    <md-button ng-click="dialog.hide()" class="md-primary" md-autofocus="dialog.$type===\'alert\'">',"      {{ dialog.ok }}","    </md-button>","  </md-dialog-actions>","</md-dialog>"].join("").replace(/\s\s+/g,""),controller:function(){var t="prompt"==this.$type;t&&this.initialValue&&(this.result=this.initialValue),this.hide=function(){e.hide(!t||this.result)},this.abort=function(){e.cancel()},this.keypress=function(t){t.keyCode===r.KEY_CODE.ENTER&&e.hide(this.result)}},controllerAs:"dialog",bindToController:!0,theme:t.defaultTheme()}}function i(e,n,i,s,c,l,u,d,p,f){function h(e,t,r,n){if(n){if(n.mdHtmlContent=n.htmlContent||r.htmlContent||"",n.mdTextContent=n.textContent||r.textContent||n.content||r.content||"",n.mdHtmlContent&&!f.has("$sanitize"))throw Error("The ngSanitize module must be loaded in order to use htmlContent.");if(n.mdHtmlContent&&n.mdTextContent)throw Error("md-dialog cannot have both `htmlContent` and `textContent`")}}function m(e,r,n,o){function a(){r[0].querySelector(".md-actions")&&p.warn("Using a class of md-actions is deprecated, please use <md-dialog-actions>.")}function s(){function e(){var e=r[0].querySelector(".dialog-close");if(!e){var n=r[0].querySelectorAll(".md-actions button, md-dialog-actions button");e=n[n.length-1]}return t.element(e)}if(n.focusOnOpen){var o=i.findFocusTarget(r)||e();o.focus()}}if(t.element(l[0].body).addClass("md-dialog-is-showing"),n.contentElement){var c=n.contentElement;t.isString(c)?(c=document.querySelector(c),n.elementInsertionSibling=c.nextElementSibling,n.elementInsertionParent=c.parentNode):(c=c[0]||c,document.contains(c)&&(n.elementInsertionSibling=c.nextElementSibling,n.elementInsertionParent=c.parentNode)),n.elementInsertionEntry=c,r=t.element(c)}return v(n),S(r.find("md-dialog"),n),b(e,r,n),E(r,n).then(function(){y(r,n),_(r,n),a(),s()})}function g(e,r,n){function i(){return T(r,n)}function s(){n.contentElement&&(n.reverseContainerStretch(),n.elementInsertionParent?n.elementInsertionSibling?n.elementInsertionParent.insertBefore(n.elementInsertionEntry,n.elementInsertionSibling):n.elementInsertionParent.appendChild(n.elementInsertionEntry):n.elementInsertionEntry.parentNode.removeChild(n.elementInsertionEntry))}function c(){t.element(l[0].body).removeClass("md-dialog-is-showing"),n.contentElement?s():r.remove(),n.$destroy||n.origin.focus()}return n.deactivateListeners(),n.unlockScreenReader(),n.hideBackdrop(n.$destroy),o&&o.parentNode&&o.parentNode.removeChild(o),a&&a.parentNode&&a.parentNode.removeChild(a),n.$destroy?c():i().then(c)}function v(e){function n(e,n){var i=t.element(e||{});if(i&&i.length){var o={top:0,left:0,height:0,width:0},a=t.isFunction(i[0].getBoundingClientRect);return t.extend(n||{},{element:a?i:r,bounds:a?i[0].getBoundingClientRect():t.extend({},o,i[0]),focus:t.bind(i,i.focus)})}}function i(e,r){return t.isString(e)&&(e=l[0].querySelector(e)),t.element(e||r)}e.origin=t.extend({element:null,bounds:null,focus:t.noop},e.origin||{}),e.parent=i(e.parent,d),e.closeTo=n(i(e.closeTo)),e.openFrom=n(i(e.openFrom)),e.targetEvent&&(e.origin=n(e.targetEvent.target,e.origin))}function y(r,n){var o=t.element(u),a=i.debounce(function(){w(r,n)},60),c=[],l=function(){var t="alert"==n.$type?e.hide:e.cancel;i.nextTick(t,!0)};if(n.escapeToClose){var d=n.parent,p=function(e){e.keyCode===s.KEY_CODE.ESCAPE&&(e.stopPropagation(),e.preventDefault(),l())};r.on("keydown",p),d.on("keydown",p),c.push(function(){r.off("keydown",p),d.off("keydown",p)})}if(o.on("resize",a),c.push(function(){o.off("resize",a)}),n.clickOutsideToClose){var f,h=r,m=function(e){f=e.target},g=function(e){f===h[0]&&e.target===h[0]&&(e.stopPropagation(),e.preventDefault(),l())};h.on("mousedown",m),h.on("mouseup",g),c.push(function(){h.off("mousedown",m),h.off("mouseup",g)})}n.deactivateListeners=function(){c.forEach(function(e){e()}),n.deactivateListeners=null}}function b(e,t,r){r.disableParentScroll&&(r.restoreScroll=i.disableScrollAround(t,r.parent)),r.hasBackdrop&&(r.backdrop=i.createBackdrop(e,"_md-dialog-backdrop md-opaque"),c.enter(r.backdrop,r.parent)),r.hideBackdrop=function(e){r.backdrop&&(e?r.backdrop.remove():c.leave(r.backdrop)),r.disableParentScroll&&(r.restoreScroll(),delete r.restoreScroll),r.hideBackdrop=null}}function S(e,t){var r="alert"===t.$type?"alertdialog":"dialog",s=e.find("md-dialog-content"),c=e.attr("id"),l="dialogContent_"+(c||i.nextUid());e.attr({role:r,tabIndex:"-1"}),0===s.length&&(s=e,c&&(l=c)),s.attr("id",l),e.attr("aria-describedby",l),t.ariaLabel?n.expect(e,"aria-label",t.ariaLabel):n.expectAsync(e,"aria-label",function(){var e=s.text().split(/\s+/);return e.length>3&&(e=e.slice(0,3).concat("...")),e.join(" ")}),o=document.createElement("div"),o.classList.add("_md-dialog-focus-trap"),o.tabIndex=0,a=o.cloneNode(!1);var u=function(){e.focus()};o.addEventListener("focus",u),a.addEventListener("focus",u),e[0].parentNode.insertBefore(o,e[0]),e.after(a)}function _(e,t){function r(e){for(;e.parentNode;){if(e===document.body)return;for(var t=e.parentNode.children,i=0;i<t.length;i++)e===t[i]||O(t[i],["SCRIPT","STYLE"])||t[i].setAttribute("aria-hidden",n);r(e=e.parentNode)}}var n=!0;r(e[0]),t.unlockScreenReader=function(){n=!1,r(e[0]),t.unlockScreenReader=null}}function w(e,t){var r="fixed"==u.getComputedStyle(l[0].body).position,n=t.backdrop?u.getComputedStyle(t.backdrop[0]):null,o=n?Math.min(l[0].body.clientHeight,Math.ceil(Math.abs(parseInt(n.height,10)))):0,a={top:e.css("top"),height:e.css("height")};return e.css({top:(r?i.scrollTop(t.parent):0)+"px",height:o?o+"px":"100%"}),function(){e.css(a)}}function E(e,t){t.parent.append(e),t.reverseContainerStretch=w(e,t);var r=e.find("md-dialog"),n=i.dom.animator,o=n.calculateZoomToOrigin,a={transitionInClass:"_md-transition-in",transitionOutClass:"_md-transition-out"},s=n.toTransformCss(o(r,t.openFrom||t.origin)),c=n.toTransformCss("");return t.fullscreen&&r.addClass("md-dialog-fullscreen"),n.translate3d(r,s,c,a).then(function(e){return t.reverseAnimate=function(){return delete t.reverseAnimate,t.closeTo?(a={transitionInClass:"_md-transition-out",transitionOutClass:"_md-transition-in"},s=c,c=n.toTransformCss(o(r,t.closeTo)),n.translate3d(r,s,c,a)):e(c=n.toTransformCss(o(r,t.origin)))},t.clearAnimate=function(){return delete t.clearAnimate,n.translate3d(r,c,n.toTransformCss(""),{})},!0})}function T(e,t){return t.reverseAnimate().then(function(){t.contentElement&&t.clearAnimate()})}function O(e,t){if(t.indexOf(e.nodeName)!==-1)return!0}return{hasBackdrop:!0,isolateScope:!0,onShow:m,onShowing:h,onRemove:g,clickOutsideToClose:!1,escapeToClose:!0,targetEvent:null,contentElement:null,closeTo:null,openFrom:null,focusOnOpen:!0,disableParentScroll:!0,autoWrap:!0,fullscreen:!1,transformTemplate:function(e,t){function r(e){return t.autoWrap&&!/<\/md-dialog>/g.test(e)?"<md-dialog>"+(e||"")+"</md-dialog>":e||""}return'<div class="md-dialog-container" tabindex="-1">'+r(e)+"</div>"}}}var o,a;return n.$inject=["$mdDialog","$mdTheming","$mdConstant"],i.$inject=["$mdDialog","$mdAria","$mdUtil","$mdConstant","$animate","$document","$window","$rootElement","$log","$injector"],e("$mdDialog").setDefaults({methods:["disableParentScroll","hasBackdrop","clickOutsideToClose","escapeToClose","targetEvent","closeTo","openFrom","parent","fullscreen","contentElement"],options:i}).addPreset("alert",{methods:["title","htmlContent","textContent","content","ariaLabel","ok","theme","css"],options:n}).addPreset("confirm",{methods:["title","htmlContent","textContent","content","ariaLabel","ok","cancel","theme","css"],options:n}).addPreset("prompt",{methods:["title","htmlContent","textContent","initialValue","content","placeholder","ariaLabel","ok","cancel","theme","css"],options:n})}t.module("material.components.dialog",["material.core","material.components.backdrop"]).directive("mdDialog",e).provider("$mdDialog",n),e.$inject=["$$rAF","$mdTheming","$mdDialog"],n.$inject=["$$interimElementProvider"]}(),function(){function e(e){return{restrict:"E",link:e}}t.module("material.components.divider",["material.core"]).directive("mdDivider",e),e.$inject=["$mdTheming"]}(),function(){!function(){function e(e){return{restrict:"E",require:["^?mdFabSpeedDial","^?mdFabToolbar"],compile:function(t,r){var n=t.children(),i=e.prefixer().hasAttribute(n,"ng-repeat");i?n.addClass("md-fab-action-item"):n.wrap('<div class="md-fab-action-item">')}}}t.module("material.components.fabActions",["material.core"]).directive("mdFabActions",e),e.$inject=["$mdUtil"]}()}(),function(){!function(){function e(e,r,n,i,o,a){function s(){A.direction=A.direction||"down",A.isOpen=A.isOpen||!1,u(),r.addClass("_md-animations-waiting")}function c(){var n=["click","focusin","focusout"];t.forEach(n,function(e){r.on(e,l)}),e.$on("$destroy",function(){t.forEach(n,function(e){r.off(e,l)}),h()})}function l(e){"click"==e.type&&P(e),"focusout"!=e.type||k||(k=a(function(){A.close()},100,!1)),"focusin"==e.type&&k&&(a.cancel(k),k=null)}function u(){A.currentActionIndex=-1}function d(){e.$watch("vm.direction",function(e,t){n.removeClass(r,"md-"+t),n.addClass(r,"md-"+e),u()});var t,i;e.$watch("vm.isOpen",function(e){u(),t&&i||(t=R(),i=C()),e?f():h();var o=e?"md-is-open":"",a=e?"":"md-is-open";t.attr("aria-haspopup",!0),t.attr("aria-expanded",e),i.attr("aria-hidden",!e),n.setClass(r,o,a)})}function p(){r[0].scrollHeight>0?n.addClass(r,"_md-animations-ready").then(function(){r.removeClass("_md-animations-waiting")}):j<10&&(a(p,100),j+=1)}function f(){r.on("keydown",g),i.nextTick(function(){t.element(document).on("click touchend",m)})}function h(){r.off("keydown",g),t.element(document).off("click touchend",m)}function m(e){if(e.target){var t=i.getClosest(e.target,"md-fab-trigger"),r=i.getClosest(e.target,"md-fab-actions");t||r||A.close()}}function g(e){switch(e.which){case o.KEY_CODE.ESCAPE:return A.close(),e.preventDefault(),!1;case o.KEY_CODE.LEFT_ARROW:return _(e),!1;case o.KEY_CODE.UP_ARROW:return w(e),!1;case o.KEY_CODE.RIGHT_ARROW:return E(e),!1;case o.KEY_CODE.DOWN_ARROW:return T(e),!1}}function v(e){b(e,-1)}function y(e){b(e,1)}function b(e,r){var n=S();A.currentActionIndex=A.currentActionIndex+r,A.currentActionIndex=Math.min(n.length-1,A.currentActionIndex),A.currentActionIndex=Math.max(0,A.currentActionIndex);var i=t.element(n[A.currentActionIndex]).children()[0];t.element(i).attr("tabindex",0),i.focus(),e.preventDefault(),e.stopImmediatePropagation()}function S(){var e=C()[0].querySelectorAll(".md-fab-action-item");return t.forEach(e,function(e){t.element(t.element(e).children()[0]).attr("tabindex",-1)}),e}function _(e){"left"===A.direction?y(e):v(e)}function w(e){"down"===A.direction?v(e):y(e)}function E(e){"left"===A.direction?v(e):y(e)}function T(e){"up"===A.direction?v(e):y(e)}function O(e){return i.getClosest(e,"md-fab-trigger")}function I(e){return i.getClosest(e,"md-fab-actions")}function P(e){O(e.target)&&A.toggle(),I(e.target)&&A.close()}function R(){return r.find("md-fab-trigger")}function C(){return r.find("md-fab-actions")}var A=this;A.open=function(){e.$evalAsync("vm.isOpen = true")},A.close=function(){e.$evalAsync("vm.isOpen = false"),r.find("md-fab-trigger")[0].focus()},A.toggle=function(){e.$evalAsync("vm.isOpen = !vm.isOpen")},s(),c(),d();var j=0;p();var k}t.module("material.components.fabShared",["material.core"]).controller("MdFabController",e),e.$inject=["$scope","$element","$animate","$mdUtil","$mdConstant","$timeout"]}()}(),function(){!function(){function r(){function e(e,t){t.prepend('<div class="_md-css-variables"></div>')}return{restrict:"E",scope:{direction:"@?mdDirection",isOpen:"=?mdOpen"},bindToController:!0,controller:"MdFabController",controllerAs:"vm",link:e}}function n(r){function n(e){r(e,o,!1)}function i(r){if(!r.hasClass("_md-animations-waiting")||r.hasClass("_md-animations-ready")){var n=r[0],i=r.controller("mdFabSpeedDial"),o=n.querySelectorAll(".md-fab-action-item"),a=n.querySelector("md-fab-trigger"),s=n.querySelector("._md-css-variables"),c=parseInt(e.getComputedStyle(s).zIndex);t.forEach(o,function(e,t){var r=e.style;r.transform=r.webkitTransform="",r.transitionDelay="",r.opacity=1,r.zIndex=o.length-t+c}),a.style.zIndex=c+o.length+1,i.isOpen||t.forEach(o,function(e,t){var r,n,o=e.style,s=(a.clientHeight-e.clientHeight)/2,c=(a.clientWidth-e.clientWidth)/2;switch(i.direction){case"up":r=e.scrollHeight*(t+1)+s,n="Y";break;case"down":r=-(e.scrollHeight*(t+1)+s),n="Y";break;case"left":r=e.scrollWidth*(t+1)+c,n="X";break;case"right":r=-(e.scrollWidth*(t+1)+c),n="X"}var l="translate"+n+"("+r+"px)";o.transform=o.webkitTransform=l})}}return{addClass:function(e,t,r){e.hasClass("md-fling")?(i(e),n(r)):r()},removeClass:function(e,t,r){i(e),n(r)}}}function i(r){function n(e){r(e,o,!1)}function i(r){var n=r[0],i=r.controller("mdFabSpeedDial"),o=n.querySelectorAll(".md-fab-action-item"),s=n.querySelector("._md-css-variables"),c=parseInt(e.getComputedStyle(s).zIndex);t.forEach(o,function(e,t){var r=e.style,n=t*a;r.opacity=i.isOpen?1:0,r.transform=r.webkitTransform=i.isOpen?"scale(1)":"scale(0)",r.transitionDelay=(i.isOpen?n:o.length-n)+"ms",r.zIndex=o.length-t+c})}var a=65;return{addClass:function(e,t,r){i(e),n(r)},removeClass:function(e,t,r){i(e),n(r)}}}var o=300;t.module("material.components.fabSpeedDial",["material.core","material.components.fabShared","material.components.fabTrigger","material.components.fabActions"]).directive("mdFabSpeedDial",r).animation(".md-fling",n).animation(".md-scale",i).service("mdFabSpeedDialFlingAnimation",n).service("mdFabSpeedDialScaleAnimation",i),n.$inject=["$timeout"],i.$inject=["$timeout"]}()}(),function(){!function(){function r(){function e(e,t,r){t.addClass("md-fab-toolbar"),t.find("md-fab-trigger").find("button").prepend('<div class="_md-fab-toolbar-background"></div>')}return{restrict:"E",transclude:!0,template:'<div class="_md-fab-toolbar-wrapper">  <div class="_md-fab-toolbar-content" ng-transclude></div></div>',scope:{direction:"@?mdDirection",isOpen:"=?mdOpen"},bindToController:!0,controller:"MdFabController",controllerAs:"vm",link:e}}function n(){function r(r,n,i){if(n){var o=r[0],a=r.controller("mdFabToolbar"),s=o.querySelector("._md-fab-toolbar-background"),c=o.querySelector("md-fab-trigger button"),l=o.querySelector("md-toolbar"),u=o.querySelector("md-fab-trigger button md-icon"),d=r.find("md-fab-actions").children();if(c&&s){var p=e.getComputedStyle(c).getPropertyValue("background-color"),f=o.offsetWidth,h=(o.offsetHeight,2*(f/c.offsetWidth));s.style.backgroundColor=p,s.style.borderRadius=f+"px",a.isOpen?(l.style.pointerEvents="inherit",s.style.width=c.offsetWidth+"px",s.style.height=c.offsetHeight+"px",s.style.transform="scale("+h+")",s.style.transitionDelay="0ms",u&&(u.style.transitionDelay=".3s"),t.forEach(d,function(e,t){e.style.transitionDelay=25*(d.length-t)+"ms"})):(l.style.pointerEvents="none",s.style.transform="scale(1)",s.style.top="0",r.hasClass("md-right")&&(s.style.left="0",s.style.right=null),r.hasClass("md-left")&&(s.style.right="0",s.style.left=null),s.style.transitionDelay="200ms",u&&(u.style.transitionDelay="0ms"),t.forEach(d,function(e,t){e.style.transitionDelay=200+25*t+"ms"}))}}}return{addClass:function(e,t,n){r(e,t,n),n()},removeClass:function(e,t,n){r(e,t,n),n()}}}t.module("material.components.fabToolbar",["material.core","material.components.fabShared","material.components.fabTrigger","material.components.fabActions"]).directive("mdFabToolbar",r).animation(".md-fab-toolbar",n).service("mdFabToolbarAnimation",n)}()}(),function(){!function(){function e(){return{restrict:"E",require:["^?mdFabSpeedDial","^?mdFabToolbar"]}}t.module("material.components.fabTrigger",["material.core"]).directive("mdFabTrigger",e)}()}(),function(){function e(e,n,i,o){function a(r,a,s,c){function l(){for(var e in n.MEDIA)o(e),o.getQuery(n.MEDIA[e]).addListener(E);return o.watchResponsiveAttributes(["md-cols","md-row-height","md-gutter"],s,d)}function u(){c.layoutDelegate=t.noop,T();for(var e in n.MEDIA)o.getQuery(n.MEDIA[e]).removeListener(E)}function d(e){null==e?c.invalidateLayout():o(e)&&c.invalidateLayout()}function p(e){var n=g(),o={tileSpans:v(n),colCount:y(),rowMode:_(),rowHeight:S(),gutter:b()};if(e||!t.equals(o,O)){var s=i(o.colCount,o.tileSpans,n).map(function(e,r){return{grid:{element:a,style:m(o.colCount,r,o.gutter,o.rowMode,o.rowHeight)},tiles:e.map(function(e,i){return{element:t.element(n[i]),style:h(e.position,e.spans,o.colCount,r,o.gutter,o.rowMode,o.rowHeight)}})}}).reflow().performance();r.mdOnLayout({$event:{performance:s}}),O=o}}function f(e){return I+e+P}function h(e,t,r,n,i,o,a){var s=1/r*100,c=(r-1)/r,l=R({share:s,gutterShare:c,gutter:i}),u={left:C({unit:l,offset:e.col,gutter:i}),width:A({unit:l,span:t.col,gutter:i}),paddingTop:"",marginTop:"",top:"",height:""};switch(o){case"fixed":u.top=C({unit:a,offset:e.row,gutter:i}),u.height=A({unit:a,span:t.row,gutter:i});break;case"ratio":var d=s/a,p=R({share:d,gutterShare:c,gutter:i});u.paddingTop=A({unit:p,span:t.row,gutter:i}),u.marginTop=C({unit:p,offset:e.row,gutter:i});break;case"fit":var f=(n-1)/n,d=1/n*100,p=R({share:d,gutterShare:f,gutter:i});u.top=C({unit:p,offset:e.row,gutter:i}),u.height=A({unit:p,span:t.row,gutter:i})}return u}function m(e,t,r,n,i){var o={};switch(n){case"fixed":o.height=A({unit:i,span:t,gutter:r}),o.paddingBottom="";break;case"ratio":var a=1===e?0:(e-1)/e,s=1/e*100,c=s*(1/i),l=R({share:c,gutterShare:a,gutter:r});o.height="",o.paddingBottom=A({unit:l,span:t,gutter:r});break;case"fit":}return o}function g(){return[].filter.call(a.children(),function(e){return"MD-GRID-TILE"==e.tagName&&!e.$$mdDestroyed})}function v(e){return[].map.call(e,function(e){var r=t.element(e).controller("mdGridTile");return{row:parseInt(o.getResponsiveAttribute(r.$attrs,"md-rowspan"),10)||1,col:parseInt(o.getResponsiveAttribute(r.$attrs,"md-colspan"),10)||1}})}function y(){var e=parseInt(o.getResponsiveAttribute(s,"md-cols"),10);if(isNaN(e))throw"md-grid-list: md-cols attribute was not found, or contained a non-numeric value";return e}function b(){return w(o.getResponsiveAttribute(s,"md-gutter")||1)}function S(){var e=o.getResponsiveAttribute(s,"md-row-height");if(!e)throw"md-grid-list: md-row-height attribute was not found";switch(_()){case"fixed":return w(e);case"ratio":var t=e.split(":");return parseFloat(t[0])/parseFloat(t[1]);case"fit":return 0}}function _(){var e=o.getResponsiveAttribute(s,"md-row-height");if(!e)throw"md-grid-list: md-row-height attribute was not found";return"fit"==e?"fit":e.indexOf(":")!==-1?"ratio":"fixed"}function w(e){return/\D$/.test(e)?e:e+"px"}a.addClass("_md"),a.attr("role","list"),c.layoutDelegate=p;var E=t.bind(c,c.invalidateLayout),T=l();r.$on("$destroy",u);var O,I=e.startSymbol(),P=e.endSymbol(),R=e(f("share")+"% - ("+f("gutter")+" * "+f("gutterShare")+")"),C=e("calc(("+f("unit")+" + "+f("gutter")+") * "+f("offset")+")"),A=e("calc(("+f("unit")+") * "+f("span")+" + ("+f("span")+" - 1) * "+f("gutter")+")")}return{restrict:"E",controller:r,scope:{mdOnLayout:"&"},link:a}}function r(e){this.layoutInvalidated=!1,this.tilesInvalidated=!1,this.$timeout_=e.nextTick,this.layoutDelegate=t.noop}function n(e){function r(t,r){var n,a,s,c,l,u;return c=e.time(function(){a=i(t,r)}),n={layoutInfo:function(){return a},map:function(t){return l=e.time(function(){var e=n.layoutInfo();s=t(e.positioning,e.rowCount)}),n},reflow:function(t){return u=e.time(function(){var e=t||o;e(s.grid,s.tiles)}),n},performance:function(){return{tileCount:r.length,layoutTime:c,mapTime:l,reflowTime:u,totalTime:c+l+u}}}}function n(e,t){e.element.css(e.style),t.forEach(function(e){e.element.css(e.style)})}function i(e,t){function r(t,r){if(t.col>e)throw"md-grid-list: Tile at position "+r+" has a colspan ("+t.col+") that exceeds the column count ("+e+")";for(var a=0,u=0;u-a<t.col;)s>=e?n():(a=l.indexOf(0,s),a!==-1&&(u=o(a+1))!==-1?s=u+1:(a=u=0,n()));return i(a,t.col,t.row),s=a+t.col,{col:a,row:c}}function n(){s=0,c++,i(0,e,-1)}function i(e,t,r){for(var n=e;n<e+t;n++)l[n]=Math.max(l[n]+r,0)}function o(e){var t;for(t=e;t<l.length;t++)if(0!==l[t])return t;if(t===l.length)return t}function a(){for(var t=[],r=0;r<e;r++)t.push(0);return t}var s=0,c=0,l=a();return{positioning:t.map(function(e,t){return{spans:e,position:r(e,t)}}),rowCount:c+Math.max.apply(Math,l)}}var o=n;return r.animateWith=function(e){o=t.isFunction(e)?e:n},r}function i(e){function r(r,n,i,o){n.attr("role","listitem");var a=e.watchResponsiveAttributes(["md-colspan","md-rowspan"],i,t.bind(o,o.invalidateLayout));o.invalidateTiles(),r.$on("$destroy",function(){n[0].$$mdDestroyed=!0,a(),o.invalidateLayout()}),t.isDefined(r.$parent.$index)&&r.$watch(function(){return r.$parent.$index},function(e,t){e!==t&&o.invalidateTiles()})}return{restrict:"E",require:"^mdGridList",template:"<figure ng-transclude></figure>",transclude:!0,scope:{},controller:["$attrs",function(e){this.$attrs=e}],link:r}}function o(){return{template:"<figcaption ng-transclude></figcaption>",transclude:!0}}t.module("material.components.gridList",["material.core"]).directive("mdGridList",e).directive("mdGridTile",i).directive("mdGridTileFooter",o).directive("mdGridTileHeader",o).factory("$mdGridLayout",n),e.$inject=["$interpolate","$mdConstant","$mdGridLayout","$mdMedia"],r.$inject=["$mdUtil"],r.prototype={invalidateTiles:function(){this.tilesInvalidated=!0,this.invalidateLayout()},invalidateLayout:function(){this.layoutInvalidated||(this.layoutInvalidated=!0,this.$timeout_(t.bind(this,this.layout)))},layout:function(){try{this.layoutDelegate(this.tilesInvalidated)}finally{this.layoutInvalidated=!1,this.tilesInvalidated=!1}}},n.$inject=["$mdUtil"],i.$inject=["$mdMedia"]}(),function(){t.module("material.components.icon",["material.core"])}(),function(){function e(e){return{restrict:"E",compile:function(t){return t[0].setAttribute("role","list"),e}}}function r(e,r,n,i){var o=["md-checkbox","md-switch"];return{restrict:"E",controller:"MdListController",compile:function(a,s){function c(){for(var e,t,r=["md-switch","md-checkbox"],n=0;t=r[n];++n)if((e=a.find(t)[0])&&!e.hasAttribute("aria-label")){var i=a.find("p")[0];if(!i)return;e.setAttribute("aria-label","Toggle "+i.textContent)}}function l(e){if("div"==e)S=t.element('<div class="_md-no-style _md-list-item-inner">'),S.append(a.contents()),a.addClass("_md-proxy-focus");else{S=t.element('<div class="md-button _md-no-style">   <div class="_md-list-item-inner"></div></div>');var r=t.element('<md-button class="_md-no-style"></md-button>');r[0].setAttribute("aria-label",a[0].textContent),p(a[0],r[0]),S.prepend(r),S.children().eq(1).append(a.contents()),a.addClass("_md-button-wrap")}a[0].setAttribute("tabindex","-1"),a.append(S)}function u(){var e=t.element('<div class="_md-secondary-container">');t.forEach(b,function(t){d(t,e)}),S.append(e)}function d(r,n){if(r&&!h(r)&&r.hasAttribute("ng-click")){e.expect(r,"aria-label");var i=t.element('<md-button class="md-secondary md-icon-button">');p(r,i[0]),r.setAttribute("tabindex","-1"),i.append(r),r=i[0]}r&&(!m(r)||!s.ngClick&&f(r))&&t.element(r).removeClass("md-secondary"),a.addClass("md-with-secondary"),n.append(r)}function p(e,r){var i=n.prefixer(["ng-if","ng-click","ng-dblclick","aria-label","ng-disabled","ui-sref","href","ng-href","target","ng-attr-ui-sref","ui-sref-opts"]);t.forEach(i,function(t){e.hasAttribute(t)&&(r.setAttribute(t,e.getAttribute(t)),e.removeAttribute(t))})}function f(e){return o.indexOf(e.nodeName.toLowerCase())!=-1}function h(e){var t=e.nodeName.toUpperCase();return"MD-BUTTON"==t||"BUTTON"==t}function m(e){for(var t=e.attributes,r=0;r<t.length;r++)if("ngClick"===s.$normalize(t[r].name))return!0;return!1}function g(e,a,s,c){function l(){p&&p.children&&!g&&t.forEach(o,function(e){t.forEach(p.querySelectorAll(e+":not(.md-secondary)"),function(e){d.push(e)})})}function u(){(1==d.length||g)&&(a.addClass("md-clickable"),g||c.attachRipple(e,t.element(a[0].querySelector("._md-no-style"))))}a.addClass("_md");var d=[],p=a[0].firstElementChild,f=a.hasClass("_md-button-wrap"),h=f?p.firstElementChild:p,g=h&&m(h);l(),u(),a.hasClass("_md-proxy-focus")&&d.length&&t.forEach(d,function(r){r=t.element(r),e.mouseActive=!1,r.on("mousedown",function(){e.mouseActive=!0,i(function(){e.mouseActive=!1},100)}).on("focus",function(){e.mouseActive===!1&&a.addClass("md-focused"),r.on("blur",function e(){a.removeClass("md-focused"),r.off("blur",e)})})});var v=function(e){if("INPUT"!=e.target.nodeName&&"TEXTAREA"!=e.target.nodeName&&!e.target.isContentEditable){var t=e.which||e.keyCode;t==r.KEY_CODE.SPACE&&h&&(h.click(),e.preventDefault(),e.stopPropagation())}};g||d.length||h&&h.addEventListener("keypress",v),a.off("click"),a.off("keypress"),1==d.length&&h&&a.children().eq(0).on("click",function(e){var r=n.getClosest(e.target,"BUTTON");!r&&h.contains(e.target)&&t.forEach(d,function(r){e.target===r||r.contains(e.target)||t.element(r).triggerHandler("click")})}),e.$on("$destroy",function(){h&&h.removeEventListener("keypress",v)})}var v,y,b=a[0].querySelectorAll(".md-secondary"),S=a;if(a[0].setAttribute("role","listitem"),s.ngClick||s.ngDblclick||s.ngHref||s.href||s.uiSref||s.ngAttrUiSref)l("button");else{for(var _,w=0;_=o[w];++w)if(y=a[0].querySelector(_)){v=!0;break}v?l("div"):a[0].querySelector("md-button:not(.md-secondary):not(.md-exclude)")||a.addClass("_md-no-proxy")}return u(),c(),g}}}function n(e,t,r){function n(e,t){var n={};r.attach(e,t,n)}var i=this;i.attachRipple=n}t.module("material.components.list",["material.core"]).controller("MdListController",n).directive("mdList",e).directive("mdListItem",r),e.$inject=["$mdTheming"],r.$inject=["$mdAria","$mdConstant","$mdUtil","$timeout"],n.$inject=["$scope","$element","$mdListInkRipple"]}(),function(){function r(e,t){function r(t,r){e(r);var n=r[0].querySelector(o),i=r[0].querySelector(a);n&&r.addClass("md-icon-left"),i&&r.addClass("md-icon-right")}function n(e,r,n,i){var o=this;o.isErrorGetter=n.mdIsError&&t(n.mdIsError),o.delegateClick=function(){o.input.focus()},o.element=r,o.setFocused=function(e){r.toggleClass("md-input-focused",!!e)},o.setHasValue=function(e){r.toggleClass("md-input-has-value",!!e)},o.setHasPlaceholder=function(e){r.toggleClass("md-input-has-placeholder",!!e)},o.setInvalid=function(e){e?i.addClass(r,"md-input-invalid"):i.removeClass(r,"md-input-invalid")},e.$watch(function(){return o.label&&o.input},function(e){e&&!o.label.attr("for")&&o.label.attr("for",o.input.attr("id"))})}var i=["INPUT","TEXTAREA","SELECT","MD-SELECT"],o=i.reduce(function(e,t){return e.concat(["md-icon ~ "+t,".md-icon ~ "+t])},[]).join(","),a=i.reduce(function(e,t){return e.concat([t+" ~ md-icon",t+" ~ .md-icon"])},[]).join(",");return n.$inject=["$scope","$element","$attrs","$animate"],{restrict:"E",link:r,controller:n}}function n(){return{restrict:"E",require:"^?mdInputContainer",link:function(e,t,r,n){!n||r.mdNoFloat||t.hasClass("_md-container-ignore")||(n.label=t,e.$on("$destroy",function(){n.label=null}))}}}function i(e,r,n,i,o){function a(a,s,c,l){function u(e){return h.setHasValue(!g.$isEmpty(e)),e}function d(){h.label&&c.$observe("required",function(e){h.label.toggleClass("md-required",e&&!y)})}function p(){h.setHasValue(s.val().length>0||(s[0].validity||{}).badInput)}function f(){function n(){s.attr("rows",1).css("height","auto").addClass("md-no-flex");var e=l();if(b||(b=s.css("padding",0).prop("offsetHeight"),s.css("padding",null)),v&&b&&(e=Math.max(e,b*v)),y&&b){var t=b*y;t<e?(s.attr("md-no-autogrow",""),e=t):s.removeAttr("md-no-autogrow")}b&&s.attr("rows",Math.round(e/b)),s.css("height",e+"px").removeClass("md-no-flex")}function l(){var e=S.offsetHeight,t=S.scrollHeight-e;return e+Math.max(t,0)}function u(t){return e.nextTick(n),t}function d(){if(f&&(f=!1,t.element(r).off("resize",n),s.attr("md-no-autogrow","").off("input",n),m)){var e=g.$formatters.indexOf(u);e>-1&&g.$formatters.splice(e,1)}}function p(){function e(e){e.preventDefault(),u=!0,p=e.clientY,f=parseFloat(s.css("height"))||s.prop("offsetHeight")}function r(e){u&&(e.preventDefault(),d(),m.addClass("md-input-resized"))}function n(e){u&&s.css("height",f+(e.pointer.y-p)+"px")}function i(e){u&&(u=!1,m.removeClass("md-input-resized"))}if(!c.hasOwnProperty("mdNoResize")){var l=t.element('<div class="md-resize-handle"></div>'),u=!1,p=null,f=0,m=h.element,g=o.register(l,"drag",{horizontal:!1});s.after(l),l.on("mousedown",e),m.on("$md.dragstart",r).on("$md.drag",n).on("$md.dragend",i),a.$on("$destroy",function(){l.off("mousedown",e).remove(),m.off("$md.dragstart",r).off("$md.drag",n).off("$md.dragend",i),g(),l=null,m=null,g=null})}}var f=!c.hasOwnProperty("mdNoAutogrow");if(p(),f){var v=c.hasOwnProperty("rows")?parseInt(c.rows):NaN,y=c.hasOwnProperty("maxRows")?parseInt(c.maxRows):NaN,b=null,S=s[0];if(i(function(){e.nextTick(n)},10,!1),s.on("input",n),m&&g.$formatters.push(u),v||s.attr("rows",1),t.element(r).on("resize",n),a.$on("$destroy",d),c.hasOwnProperty("mdDetectHidden")){var _=function(){var e=!1;return function(){var t=0===S.offsetHeight;t===!1&&e===!0&&n(),e=t}}();a.$watch(function(){return e.nextTick(_,!1),!0})}}}var h=l[0],m=!!l[1],g=l[1]||e.fakeNgModel(),v=t.isDefined(c.readonly),y=e.parseAttributeBoolean(c.mdNoAsterisk),b=s[0].tagName.toLowerCase();if(h){if("hidden"===c.type)return void s.attr("aria-hidden","true");if(h.input)throw new Error("<md-input-container> can only have *one* <input>, <textarea> or <md-select> child element!");h.input=s,d();var S=t.element('<div class="md-errors-spacer">');s.after(S),h.label||n.expect(s,"aria-label",s.attr("placeholder")),s.addClass("md-input"),s.attr("id")||s.attr("id","input_"+e.nextUid()),"input"===b&&"number"===c.type&&c.min&&c.max&&!c.step?s.attr("step","any"):"textarea"===b&&f(),m||p();var _=h.isErrorGetter||function(){return g.$invalid&&(g.$touched||w())},w=function(){var r=e.getClosest(s,"form"),n=r?t.element(r).controller("form"):null;return!!n&&n.$submitted};a.$watch(_,h.setInvalid),g.$parsers.push(u),g.$formatters.push(u),s.on("input",p),v||s.on("focus",function(t){e.nextTick(function(){h.setFocused(!0)})}).on("blur",function(t){e.nextTick(function(){h.setFocused(!1),p()})}),a.$on("$destroy",function(){h.setFocused(!1),h.setHasValue(!1),h.input=null})}}return{restrict:"E",require:["^?mdInputContainer","?ngModel"],link:a}}function o(e,r){function n(n,i,o,a){function s(e){return l.parent?(l.text(String(i.val()||e||"").length+"/"+c),e):e}var c,l,u,d=a[0],p=a[1];r.nextTick(function(){u=t.element(p.element[0].querySelector(".md-errors-spacer")),l=t.element('<div class="md-char-counter">'),u.append(l),o.$set("ngTrim","false"),d.$formatters.push(s),
d.$viewChangeListeners.push(s),i.on("input keydown keyup",function(){s()}),n.$watch(o.mdMaxlength,function(r){c=r,t.isNumber(r)&&r>0?(l.parent().length||e.enter(l,u),s()):e.leave(l)}),d.$validators["md-maxlength"]=function(e,r){return!t.isNumber(c)||c<0||(e||i.val()||r||"").length<=c}})}return{restrict:"A",require:["ngModel","^mdInputContainer"],link:n}}function a(e){function t(e,t,r,n){if(n){var i=n.element.find("label"),o=n.element.attr("md-no-float");if(i&&i.length||""===o||e.$eval(o))return void n.setHasPlaceholder(!0);var a=r.placeholder;if(t.removeAttr("placeholder"),n.input&&"MD-SELECT"!=n.input[0].nodeName){var s='<label ng-click="delegateClick()">'+a+"</label>";n.element.addClass("md-icon-float"),n.element.prepend(s)}}}return{restrict:"A",require:"^^?mdInputContainer",priority:200,link:t}}function s(e){function t(t,r,n){function i(){a=!0,e(function(){r[0].select(),a=!1},1,!1)}function o(e){a&&e.preventDefault()}if("INPUT"===r[0].nodeName||"TEXTAREA"===r[0].nodeName){var a=!1;r.on("focus",i).on("mouseup",o),t.$on("$destroy",function(){r.off("focus",i).off("mouseup",o)})}}return{restrict:"A",link:t}}function c(){function e(e,r,n,i){i&&(r.toggleClass("md-input-messages-animation",!0),r.toggleClass("md-auto-hide",!0),("false"==n.mdAutoHide||t(n))&&r.toggleClass("md-auto-hide",!1))}function t(e){return b.some(function(t){return e[t]})}return{restrict:"EA",link:e,require:"^^?mdInputContainer"}}function l(e){function t(t){function r(){for(var e=t[0];e=e.parentNode;)if(e.nodeType===Node.DOCUMENT_FRAGMENT_NODE)return!0;return!1}function n(t){return!!e.getClosest(t,"md-input-container")}function i(e){e.toggleClass("md-input-message-animation",!0)}if(n(t))i(t);else if(r())return function(e,r){n(r)&&i(t)}}return{restrict:"EA",compile:t,priority:100}}function u(e,t){return{addClass:function(r,n,i){var o=y(r);"md-input-invalid"==n&&o.hasClass("md-auto-hide")?f(r,t,e).finally(i):i()}}}function d(e,t){return{enter:function(r,n){f(r,t,e).finally(n)},leave:function(r,n){h(r,t,e).finally(n)},addClass:function(r,n,i){"ng-hide"==n?h(r,t,e).finally(i):i()},removeClass:function(r,n,i){"ng-hide"==n?f(r,t,e).finally(i):i()}}}function p(e){return{enter:function(t,r){var n=y(t);return n.hasClass("md-auto-hide")?void r():m(t,e)},leave:function(t,r){return g(t,e)}}}function f(e,r,n){var i,o=[],a=y(e);return t.forEach(a.children(),function(e){i=m(t.element(e),r),o.push(i.start())}),n.all(o)}function h(e,r,n){var i,o=[],a=y(e);return t.forEach(a.children(),function(e){i=g(t.element(e),r),o.push(i.start())}),n.all(o)}function m(e,t){var r=e[0].offsetHeight;return t(e,{event:"enter",structural:!0,from:{opacity:0,"margin-top":-r+"px"},to:{opacity:1,"margin-top":"0"},duration:.3})}function g(t,r){var n=t[0].offsetHeight,i=e.getComputedStyle(t[0]);return 0==i.opacity?r(t,{}):r(t,{event:"leave",structural:!0,from:{opacity:1,"margin-top":0},to:{opacity:0,"margin-top":-n+"px"},duration:.3})}function v(e){var t=e.controller("mdInputContainer");return t.element}function y(e){var r=v(e);return t.element(r[0].querySelector(".md-input-messages-animation"))}t.module("material.components.input",["material.core"]).directive("mdInputContainer",r).directive("label",n).directive("input",i).directive("textarea",i).directive("mdMaxlength",o).directive("placeholder",a).directive("ngMessages",c).directive("ngMessage",l).directive("ngMessageExp",l).directive("mdSelectOnFocus",s).animation(".md-input-invalid",u).animation(".md-input-messages-animation",d).animation(".md-input-message-animation",p),r.$inject=["$mdTheming","$parse"],i.$inject=["$mdUtil","$window","$mdAria","$timeout","$mdGesture"],o.$inject=["$animate","$mdUtil"],a.$inject=["$log"],s.$inject=["$timeout"];var b=["ngIf","ngShow","ngHide","ngSwitchWhen","ngSwitchDefault"];l.$inject=["$mdUtil"],u.$inject=["$q","$animateCss"],d.$inject=["$q","$animateCss"],p.$inject=["$animateCss"]}(),function(){t.module("material.components.menuBar",["material.core","material.components.menu"])}(),function(){t.module("material.components.menu",["material.core","material.components.backdrop"])}(),function(){function e(e,r){return{restrict:"E",transclude:!0,controller:n,controllerAs:"ctrl",bindToController:!0,scope:{mdSelectedNavItem:"=?",mdNoInkBar:"=?",navBarAriaLabel:"@?"},template:'<div class="md-nav-bar"><nav role="navigation"><ul class="_md-nav-bar-list" ng-transclude role="listbox"tabindex="0"ng-focus="ctrl.onFocus()"ng-keydown="ctrl.onKeydown($event)"aria-label="{{ctrl.navBarAriaLabel}}"></ul></nav><md-nav-ink-bar ng-hide="ctrl.mdNoInkBar"></md-nav-ink-bar></div>',link:function(n,i,o,a){r(i),a.navBarAriaLabel||e.expectAsync(i,"aria-label",t.noop)}}}function n(e,t,r,n){this._$timeout=r,this._$scope=t,this._$mdConstant=n,this.mdSelectedNavItem,this.navBarAriaLabel,this._navBarEl=e[0],this._inkbar;var i=this,o=this._$scope.$watch(function(){return i._navBarEl.querySelectorAll("._md-nav-button").length},function(e){e>0&&(i._initTabs(),o())})}function i(e){return{restrict:"E",require:["mdNavItem","^mdNavBar"],controller:o,bindToController:!0,controllerAs:"ctrl",replace:!0,transclude:!0,template:function(e,t){var r,n,i,o=t.mdNavClick,a=t.mdNavHref,s=t.mdNavSref,c=t.srefOpts;if((o?1:0)+(a?1:0)+(s?1:0)>1)throw Error("Must not specify more than one of the md-nav-click, md-nav-href, or md-nav-sref attributes per nav-item directive.");return o?r='ng-click="ctrl.mdNavClick()"':a?r='ng-href="{{ctrl.mdNavHref}}"':s&&(r='ui-sref="{{ctrl.mdNavSref}}"'),n=c?'ui-sref-opts="{{ctrl.srefOpts}}" ':"",r&&(i='<md-button class="_md-nav-button md-accent" ng-class="ctrl.getNgClassMap()" ng-blur="ctrl.setFocused(false)" tabindex="-1" '+n+r+'><span ng-transclude class="_md-nav-button-text"></span></md-button>'),'<li class="md-nav-item" role="option" aria-selected="{{ctrl.isSelected()}}">'+(i||"")+"</li>"},scope:{mdNavClick:"&?",mdNavHref:"@?",mdNavSref:"@?",srefOpts:"=?",name:"@"},link:function(r,n,i,o){e(function(){var e=o[0],i=o[1],a=t.element(n[0].querySelector("._md-nav-button"));e.name||(e.name=t.element(n[0].querySelector("._md-nav-button-text")).text().trim()),a.on("click",function(){i.mdSelectedNavItem=e.name,r.$apply()})})}}}function o(e){this._$element=e,this.mdNavClick,this.mdNavHref,this.mdNavSref,this.srefOpts,this.name,this._selected=!1,this._focused=!1}n.$inject=["$element","$scope","$timeout","$mdConstant"],i.$inject=["$$rAF"],o.$inject=["$element"],e.$inject=["$mdAria","$mdTheming"],t.module("material.components.navBar",["material.core"]).controller("MdNavBarController",n).directive("mdNavBar",e).controller("MdNavItemController",o).directive("mdNavItem",i),n.prototype._initTabs=function(){this._inkbar=t.element(this._navBarEl.querySelector("md-nav-ink-bar"));var e=this;this._$timeout(function(){e._updateTabs(e.mdSelectedNavItem,r)}),this._$scope.$watch("ctrl.mdSelectedNavItem",function(t,r){e._$timeout(function(){e._updateTabs(t,r)})})},n.prototype._updateTabs=function(e,t){var r=this,n=this._getTabs(),i=-1,o=-1,a=this._getTabByName(e),s=this._getTabByName(t);s&&(s.setSelected(!1),i=n.indexOf(s)),a&&(a.setSelected(!0),o=n.indexOf(a)),this._$timeout(function(){r._updateInkBarStyles(a,o,i)})},n.prototype._updateInkBarStyles=function(e,t,r){if(this._inkbar.toggleClass("_md-left",t<r).toggleClass("_md-right",t>r),this._inkbar.css({display:t<0?"none":""}),e){var n=e.getButtonEl(),i=n.offsetLeft;this._inkbar.css({left:i+"px",width:n.offsetWidth+"px"})}},n.prototype._getTabs=function(){var e=Array.prototype.slice.call(this._navBarEl.querySelectorAll(".md-nav-item"));return e.map(function(e){return t.element(e).controller("mdNavItem")})},n.prototype._getTabByName=function(e){return this._findTab(function(t){return t.getName()==e})},n.prototype._getSelectedTab=function(){return this._findTab(function(e){return e.isSelected()})},n.prototype.getFocusedTab=function(){return this._findTab(function(e){return e.hasFocus()})},n.prototype._findTab=function(e){for(var t=this._getTabs(),r=0;r<t.length;r++)if(e(t[r]))return t[r];return null},n.prototype.onFocus=function(){var e=this._getSelectedTab();e&&e.setFocused(!0)},n.prototype._moveFocus=function(e,t){e.setFocused(!1),t.setFocused(!0)},n.prototype.onKeydown=function(e){var t=this._$mdConstant.KEY_CODE,r=this._getTabs(),n=this.getFocusedTab();if(n){var i=r.indexOf(n);switch(e.keyCode){case t.UP_ARROW:case t.LEFT_ARROW:i>0&&this._moveFocus(n,r[i-1]);break;case t.DOWN_ARROW:case t.RIGHT_ARROW:i<r.length-1&&this._moveFocus(n,r[i+1]);break;case t.SPACE:case t.ENTER:this._$timeout(function(){n.getButtonEl().click()})}}},o.prototype.getNgClassMap=function(){return{"md-active":this._selected,"md-primary":this._selected,"md-unselected":!this._selected,"md-focused":this._focused}},o.prototype.getName=function(){return this.name},o.prototype.getButtonEl=function(){return this._$element[0].querySelector("._md-nav-button")},o.prototype.setSelected=function(e){this._selected=e},o.prototype.isSelected=function(){return this._selected},o.prototype.setFocused=function(e){this._focused=e,e&&this.getButtonEl().focus()},o.prototype.hasFocus=function(){return this._focused}}(),function(){function e(e,r,n,a){this._defaultConfigOptions={bindToController:!0,clickOutsideToClose:!1,disableParentScroll:!1,escapeToClose:!1,focusOnOpen:!0,fullscreen:!1,hasBackdrop:!1,transformTemplate:t.bind(this,this._wrapTemplate),trapFocus:!1,zIndex:s},this._config={},this._$rootElement=e,this._$rootScope=r,this._$injector=n,this._$window=a,this.animation=o.animation,this.xPosition=i.xPosition,this.yPosition=i.yPosition}function n(e,t){this._$q=t.get("$q"),this._$mdCompiler=t.get("$mdCompiler"),this._$mdConstant=t.get("$mdConstant"),this._$mdUtil=t.get("$mdUtil"),this._$rootScope=t.get("$rootScope"),this._$animate=t.get("$animate"),this._$mdPanel=t.get("$mdPanel"),this._$log=t.get("$log"),this._$window=t.get("$window"),this._$$rAF=t.get("$$rAF"),this.id=e.id,this.isAttached=!1,this._config=e,this._panelContainer,this._panelEl,this._removeListeners=[],this._topFocusTrap,this._bottomFocusTrap,this._backdropRef,this._restoreScroll=null}function i(e){this._$window=e,this._absolute=!1,this._relativeToEl,this._top="",this._bottom="",this._left="",this._right="",this._translateX=[],this._translateY=[],this._positions=[],this._actualPosition}function o(e){this._$mdUtil=e.get("$mdUtil"),this._openFrom,this._closeTo,this._animationClass=""}function a(e){var r=t.isString(e)?document.querySelector(e):e;return t.element(r)}t.module("material.components.panel",["material.core","material.components.backdrop"]).service("$mdPanel",e);var s=80,c="_md-panel-hidden",l=t.element('<div class="_md-panel-focus-trap" tabindex="0"></div>');e.$inject=["$rootElement","$rootScope","$injector","$window"],e.prototype.create=function(e){var r=e||{};this._config={scope:this._$rootScope.$new(!0),attachTo:this._$rootElement},t.extend(this._config,this._defaultConfigOptions,r);var i="panel_"+this._$injector.get("$mdUtil").nextUid(),o=t.extend({id:i},this._config);return new n(o,this._$injector)},e.prototype.open=function(e){var t=this.create(e);return t.open().then(function(){return t})},e.prototype.newPanelPosition=function(){return new i(this._$window)},e.prototype.newPanelAnimation=function(){return new o(this._$injector)},e.prototype._wrapTemplate=function(e){var t=e||"";return'<div class="md-panel-outer-wrapper">  <div class="md-panel" style="left: -9999px;">'+t+"</div></div>"},n.prototype.open=function(){var e=this;return this._$q(function(t,r){var n=e._done(t,e),i=e._simpleBind(e.show,e);e.attach().then(i).then(n).catch(r)})},n.prototype.close=function(){var e=this;return this._$q(function(t,r){var n=e._done(t,e),i=e._simpleBind(e.detach,e);e.hide().then(i).then(n).catch(r)})},n.prototype.attach=function(){if(this.isAttached&&this._panelEl)return this._$q.when(this);var e=this;return this._$q(function(r,n){var i=e._done(r,e),o=e._config.onDomAdded||t.noop,a=function(t){return e.isAttached=!0,e._addEventListeners(),t};e._$q.all([e._createBackdrop(),e._createPanel().then(a).catch(n)]).then(o).then(i).catch(n)})},n.prototype.detach=function(){if(!this.isAttached)return this._$q.when(this);var e=this,r=e._config.onDomRemoved||t.noop,n=function(){return e._removeEventListeners(),e._topFocusTrap&&e._topFocusTrap.parentNode&&e._topFocusTrap.parentNode.removeChild(e._topFocusTrap),e._bottomFocusTrap&&e._bottomFocusTrap.parentNode&&e._bottomFocusTrap.parentNode.removeChild(e._bottomFocusTrap),e._panelContainer.remove(),e.isAttached=!1,e._$q.when(e)};return this._restoreScroll&&(this._restoreScroll(),this._restoreScroll=null),this._$q(function(t,i){var o=e._done(t,e);e._$q.all([n(),!e._backdropRef||e._backdropRef.detach()]).then(r).then(o).catch(i)})},n.prototype.destroy=function(){this._config.locals=null},n.prototype.show=function(){if(!this._panelContainer)return this._$q(function(e,t){t("Panel does not exist yet. Call open() or attach().")});if(!this._panelContainer.hasClass(c))return this._$q.when(this);var e=this,r=function(){return e.removeClass(c),e._animateOpen()};return this._$q(function(n,i){var o=e._done(n,e),a=e._config.onOpenComplete||t.noop;e._$q.all([e._backdropRef?e._backdropRef.show():e,r().then(function(){e._focusOnOpen()},i)]).then(a).then(o).catch(i)})},n.prototype.hide=function(){if(!this._panelContainer)return this._$q(function(e,t){t("Panel does not exist yet. Call open() or attach().")});if(this._panelContainer.hasClass(c))return this._$q.when(this);var e=this;return this._$q(function(r,n){var i=e._done(r,e),o=e._config.onRemoving||t.noop,s=function(){var t=e._config.origin;t&&a(t).focus()},l=function(){e.addClass(c)};e._$q.all([e._backdropRef?e._backdropRef.hide():e,e._animateClose().then(o).then(l).then(s).catch(n)]).then(i,n)})},n.prototype.addClass=function(e){if(!this._panelContainer)throw new Error("Panel does not exist yet. Call open() or attach().");this._panelContainer.hasClass(e)||this._panelContainer.addClass(e)},n.prototype.removeClass=function(e){if(!this._panelContainer)throw new Error("Panel does not exist yet. Call open() or attach().");this._panelContainer.hasClass(e)&&this._panelContainer.removeClass(e)},n.prototype.toggleClass=function(e){if(!this._panelContainer)throw new Error("Panel does not exist yet. Call open() or attach().");this._panelContainer.toggleClass(e)},n.prototype._createPanel=function(){var e=this;return this._$q(function(r,n){e._config.locals||(e._config.locals={}),e._config.locals.mdPanelRef=e,e._$mdCompiler.compile(e._config).then(function(i){e._panelContainer=i.link(e._config.scope),a(e._config.attachTo).append(e._panelContainer),e._config.disableParentScroll&&(e._restoreScroll=e._$mdUtil.disableScrollAround(null,e._panelContainer)),e._panelEl=t.element(e._panelContainer[0].querySelector(".md-panel")),e._config.panelClass&&e._panelEl.addClass(e._config.panelClass),e._$animate.pin&&e._$animate.pin(e._panelContainer,a(e._config.attachTo)),e._configureTrapFocus(),e._addStyles().then(function(){r(e)},n)},n)})},n.prototype._addStyles=function(){var e=this;return this._$q(function(t){e._panelContainer.css("z-index",e._config.zIndex),e._panelEl.css("z-index",e._config.zIndex+1);var r=function(){e._panelEl.css("left",""),e._panelContainer.addClass(c),t(e)};if(e._config.fullscreen)return e._panelEl.addClass("_md-panel-fullscreen"),void r();var n=e._config.position;return n?void e._$rootScope.$$postDigest(function(){e._updatePosition(!0),t(e)}):void r()})},n.prototype._updatePosition=function(e){var t=this._config.position;if(t){t._setPanelPosition(this._panelEl),e&&this._panelContainer.addClass(c),this._panelEl.css("top",t.getTop()),this._panelEl.css("bottom",t.getBottom()),this._panelEl.css("left",t.getLeft()),this._panelEl.css("right",t.getRight());var r=this._$mdConstant.CSS.TRANSFORM;this._panelEl.css(r,t.getTransform())}},n.prototype._focusOnOpen=function(){if(this._config.focusOnOpen){var e=this;this._$rootScope.$$postDigest(function(){var t=e._$mdUtil.findFocusTarget(e._panelEl)||e._panelEl;t.focus()})}},n.prototype._createBackdrop=function(){if(this._config.hasBackdrop){if(!this._backdropRef){var e=this._$mdPanel.newPanelAnimation().openFrom(this._config.attachTo).withAnimation({open:"_md-opaque-enter",close:"_md-opaque-leave"}),t={animation:e,attachTo:this._config.attachTo,focusOnOpen:!1,panelClass:"_md-panel-backdrop",zIndex:this._config.zIndex-1};this._backdropRef=this._$mdPanel.create(t)}if(!this._backdropRef.isAttached)return this._backdropRef.attach()}},n.prototype._addEventListeners=function(){this._configureEscapeToClose(),this._configureClickOutsideToClose(),this._configureScrollListener()},n.prototype._removeEventListeners=function(){this._removeListeners&&this._removeListeners.forEach(function(e){e()}),this._removeListeners=null},n.prototype._configureEscapeToClose=function(){if(this._config.escapeToClose){var e=a(this._config.attachTo),t=this,r=function(e){e.keyCode===t._$mdConstant.KEY_CODE.ESCAPE&&(e.stopPropagation(),e.preventDefault(),t.close())};this._panelContainer.on("keydown",r),e.on("keydown",r),this._removeListeners.push(function(){t._panelContainer.off("keydown",r),e.off("keydown",r)})}},n.prototype._configureClickOutsideToClose=function(){if(this._config.clickOutsideToClose){var e,t=this._panelContainer,r=function(t){e=t.target},n=this,i=function(r){e===t[0]&&r.target===t[0]&&(r.stopPropagation(),r.preventDefault(),n.close())};t.on("mousedown",r),t.on("mouseup",i),this._removeListeners.push(function(){t.off("mousedown",r),t.off("mouseup",i)})}},n.prototype._configureScrollListener=function(){var e=t.bind(this,this._updatePosition),r=this._$$rAF.throttle(e),n=this,i=function(){n._config.disableParentScroll||r()};this._$window.addEventListener("scroll",i,!0),this._removeListeners.push(function(){n._$window.removeEventListener("scroll",i,!0)})},n.prototype._configureTrapFocus=function(){if(this._panelEl.attr("tabIndex","-1"),this._config.trapFocus){var e=this._panelEl;this._topFocusTrap=l.clone()[0],this._bottomFocusTrap=l.clone()[0];var t=function(){e.focus()};this._topFocusTrap.addEventListener("focus",t),this._bottomFocusTrap.addEventListener("focus",t),this._removeListeners.push(this._simpleBind(function(){this._topFocusTrap.removeEventListener("focus",t),this._bottomFocusTrap.removeEventListener("focus",t)},this)),e[0].parentNode.insertBefore(this._topFocusTrap,e[0]),e.after(this._bottomFocusTrap)}},n.prototype._animateOpen=function(){this.addClass("md-panel-is-showing");var e=this._config.animation;if(!e)return this.addClass("_md-panel-shown"),this._$q.when(this);var t=this;return this._$q(function(r){var n=t._done(r,t),i=function(){t._$log.warn("MdPanel Animations failed. Showing panel without animating."),n()};e.animateOpen(t._panelEl).then(n,i)})},n.prototype._animateClose=function(){var e=this._config.animation;if(!e)return this.removeClass("md-panel-is-showing"),this.removeClass("_md-panel-shown"),this._$q.when(this);var t=this;return this._$q(function(r){var n=function(){t.removeClass("md-panel-is-showing"),r(t)},i=function(){t._$log.warn("MdPanel Animations failed. Hiding panel without animating."),n()};e.animateClose(t._panelEl).then(n,i)})},n.prototype._simpleBind=function(e,t){return function(r){return e.apply(t,r)}},n.prototype._done=function(e,t){return function(){e(t)}},i.xPosition={CENTER:"center",ALIGN_START:"align-start",ALIGN_END:"align-end",OFFSET_START:"offset-start",OFFSET_END:"offset-end"},i.yPosition={CENTER:"center",ALIGN_TOPS:"align-tops",ALIGN_BOTTOMS:"align-bottoms",ABOVE:"above",BELOW:"below"},i.prototype.absolute=function(){return this._absolute=!0,this},i.prototype.top=function(e){return this._bottom="",this._top=e||"0",this},i.prototype.bottom=function(e){return this._top="",this._bottom=e||"0",this},i.prototype.left=function(e){return this._right="",this._left=e||"0",this},i.prototype.right=function(e){return this._left="",this._right=e||"0",this},i.prototype.centerHorizontally=function(){return this._left="50%",this._right="",this._translateX=["-50%"],this},i.prototype.centerVertically=function(){return this._top="50%",this._bottom="",this._translateY=["-50%"],this},i.prototype.center=function(){return this.centerHorizontally().centerVertically()},i.prototype.relativeTo=function(e){return this._absolute=!1,this._relativeToEl=a(e),this},i.prototype.addPanelPosition=function(e,t){if(!this._relativeToEl)throw new Error("addPanelPosition can only be used with relative positioning. Set relativeTo first.");return this._validateXPosition(e),this._validateYPosition(t),this._positions.push({x:e,y:t}),this},i.prototype._validateYPosition=function(e){if(null!=e){for(var t,r=Object.keys(i.yPosition),n=[],o=0;t=r[o];o++){var a=i.yPosition[t];if(n.push(a),a===e)return}throw new Error("Panel y position only accepts the following values:\n"+n.join(" | "))}},i.prototype._validateXPosition=function(e){if(null!=e){for(var t,r=Object.keys(i.xPosition),n=[],o=0;t=r[o];o++){var a=i.xPosition[t];if(n.push(a),a===e)return}throw new Error("Panel x Position only accepts the following values:\n"+n.join(" | "))}},i.prototype.withOffsetX=function(e){return this._translateX.push(e),this},i.prototype.withOffsetY=function(e){return this._translateY.push(e),this},i.prototype.getTop=function(){return this._top},i.prototype.getBottom=function(){return this._bottom},i.prototype.getLeft=function(){return this._left},i.prototype.getRight=function(){return this._right},i.prototype.getTransform=function(){var e=this._reduceTranslateValues("translateX",this._translateX),t=this._reduceTranslateValues("translateY",this._translateY);return(e+" "+t).trim()},i.prototype._isOnscreen=function(e){var t=parseInt(this.getLeft()),r=parseInt(this.getTop()),n=t+e[0].offsetWidth,i=r+e[0].offsetHeight;return t>=0&&r>=0&&i<=this._$window.innerHeight&&n<=this._$window.innerWidth},i.prototype.getActualPosition=function(){return this._actualPosition},i.prototype._reduceTranslateValues=function(e,t){return t.map(function(t){return e+"("+t+")"}).join(" ")},i.prototype._setPanelPosition=function(e){if(!this._absolute){if(this._actualPosition)return void this._calculatePanelPosition(e,this._actualPosition);for(var t=0;t<this._positions.length&&(this._actualPosition=this._positions[t],this._calculatePanelPosition(e,this._actualPosition),!this._isOnscreen(e));t++);}},i.prototype._calculatePanelPosition=function(e,t){var r=e[0].getBoundingClientRect(),n=r.width,o=r.height,a=this._relativeToEl[0].getBoundingClientRect(),s=a.left,c=a.right,l=a.width;switch(t.x){case i.xPosition.OFFSET_START:this._left=s-n+"px";break;case i.xPosition.ALIGN_END:this._left=c-n+"px";break;case i.xPosition.CENTER:var u=s+.5*l-.5*n;this._left=u+"px";break;case i.xPosition.ALIGN_START:this._left=s+"px";break;case i.xPosition.OFFSET_END:this._left=c+"px"}var d=a.top,p=a.bottom,f=a.height;switch(t.y){case i.yPosition.ABOVE:this._top=d-o+"px";break;case i.yPosition.ALIGN_BOTTOMS:this._top=p-o+"px";break;case i.yPosition.CENTER:var h=d+.5*f-.5*o;this._top=h+"px";break;case i.yPosition.ALIGN_TOPS:this._top=d+"px";break;case i.yPosition.BELOW:this._top=p+"px"}},o.animation={SLIDE:"md-panel-animate-slide",SCALE:"md-panel-animate-scale",FADE:"md-panel-animate-fade"},o.prototype.openFrom=function(e){return e=e.target?e.target:e,this._openFrom=this._getPanelAnimationTarget(e),this._closeTo||(this._closeTo=this._openFrom),this},o.prototype.closeTo=function(e){return this._closeTo=this._getPanelAnimationTarget(e),this},o.prototype._getPanelAnimationTarget=function(e){return t.isDefined(e.top)||t.isDefined(e.left)?{element:r,bounds:{top:e.top||0,left:e.left||0}}:this._getBoundingClientRect(a(e))},o.prototype.withAnimation=function(e){return this._animationClass=e,this},o.prototype.animateOpen=function(e){var r=this._$mdUtil.dom.animator;this._fixBounds(e);var n={},i=e[0].style.transform||"",a=r.toTransformCss(i),s=r.toTransformCss(i);switch(this._animationClass){case o.animation.SLIDE:e.css("opacity","1"),n={transitionInClass:"_md-panel-animate-enter"};var c=r.calculateSlideToOrigin(e,this._openFrom)||"";a=r.toTransformCss(c+" "+i);break;case o.animation.SCALE:n={transitionInClass:"_md-panel-animate-enter"};var l=r.calculateZoomToOrigin(e,this._openFrom)||"";a=r.toTransformCss(l+" "+i);break;case o.animation.FADE:n={transitionInClass:"_md-panel-animate-enter"};break;default:n=t.isString(this._animationClass)?{transitionInClass:this._animationClass}:{transitionInClass:this._animationClass.open,transitionOutClass:this._animationClass.close}}return r.translate3d(e,a,s,n)},o.prototype.animateClose=function(e){var r=this._$mdUtil.dom.animator,n={},i=e[0].style.transform||"",a=r.toTransformCss(i),s=r.toTransformCss(i);switch(this._animationClass){case o.animation.SLIDE:e.css("opacity","1"),n={transitionInClass:"_md-panel-animate-leave"};var c=r.calculateSlideToOrigin(e,this._closeTo)||"";s=r.toTransformCss(c+" "+i);break;case o.animation.SCALE:n={transitionInClass:"_md-panel-animate-scale-out _md-panel-animate-leave"};var l=r.calculateZoomToOrigin(e,this._closeTo)||"";s=r.toTransformCss(l+" "+i);break;case o.animation.FADE:n={transitionInClass:"_md-panel-animate-fade-out _md-panel-animate-leave"};break;default:n=t.isString(this._animationClass)?{transitionOutClass:this._animationClass}:{transitionInClass:this._animationClass.close,transitionOutClass:this._animationClass.open}}return r.translate3d(e,a,s,n)},o.prototype._fixBounds=function(e){var t=e[0].offsetWidth,r=e[0].offsetHeight;this._openFrom&&null==this._openFrom.bounds.height&&(this._openFrom.bounds.height=r),this._openFrom&&null==this._openFrom.bounds.width&&(this._openFrom.bounds.width=t),this._closeTo&&null==this._closeTo.bounds.height&&(this._closeTo.bounds.height=r),this._closeTo&&null==this._closeTo.bounds.width&&(this._closeTo.bounds.width=t)},o.prototype._getBoundingClientRect=function(e){if(e instanceof t.element)return{element:e,bounds:e[0].getBoundingClientRect()}}}(),function(){t.module("material.components.progressCircular",["material.core"])}(),function(){function e(e,r,n){function i(e,t,r){return e.attr("aria-valuemin",0),e.attr("aria-valuemax",100),e.attr("role","progressbar"),o}function o(n,i,o){function p(){o.$observe("value",function(e){var t=a(e);i.attr("aria-valuenow",t),h()!=u&&m(S,t)}),o.$observe("mdBufferValue",function(e){m(b,a(e))}),o.$observe("disabled",function(e){v=e===!0||e===!1?e:t.isDefined(e),i.toggleClass(d,!!v)}),o.$observe("mdMode",function(e){switch(g&&_.removeClass(g),e){case u:case l:case s:case c:_.addClass(g="_md-mode-"+e);break;default:_.addClass(g="_md-mode-"+c)}})}function f(){if(t.isUndefined(o.mdMode)){var e=t.isDefined(o.value),r=e?s:c;i.attr("md-mode",r),o.mdMode=r}}function h(){var e=(o.mdMode||"").trim();if(e)switch(e){case s:case c:case l:case u:break;default:e=c}return e}function m(e,n){if(!v&&h()){var i=r.supplant("translateX({0}%) scale({1},1)",[(n-100)/2,n/100]),o=y({transform:i});t.element(e).css(o)}}e(i);var g,v=o.hasOwnProperty("disabled"),y=r.dom.animator.toCss,b=t.element(i[0].querySelector("._md-bar1")),S=t.element(i[0].querySelector("._md-bar2")),_=t.element(i[0].querySelector("._md-container"));i.attr("md-mode",h()).toggleClass(d,v),f(),p()}function a(e){return Math.max(0,Math.min(e||0,100))}var s="determinate",c="indeterminate",l="buffer",u="query",d="_md-progress-linear-disabled";return{restrict:"E",template:'<div class="_md-container"><div class="_md-dashed"></div><div class="_md-bar _md-bar1"></div><div class="_md-bar _md-bar2"></div></div>',compile:i}}t.module("material.components.progressLinear",["material.core"]).directive("mdProgressLinear",e),e.$inject=["$mdTheming","$mdUtil","$log"]}(),function(){function e(e,r,n,i){function o(o,a,s,c){function l(){a.hasClass("md-focused")||a.addClass("md-focused")}function u(n){var i=n.which||n.keyCode;if(i==r.KEY_CODE.ENTER||n.currentTarget==n.target)switch(i){case r.KEY_CODE.LEFT_ARROW:case r.KEY_CODE.UP_ARROW:n.preventDefault(),d.selectPrevious(),l();break;case r.KEY_CODE.RIGHT_ARROW:case r.KEY_CODE.DOWN_ARROW:n.preventDefault(),d.selectNext(),l();break;case r.KEY_CODE.ENTER:var o=t.element(e.getClosest(a[0],"form"));o.length>0&&o.triggerHandler("submit")}}a.addClass("_md"),n(a);var d=c[0],p=c[1]||e.fakeNgModel();d.init(p),o.mouseActive=!1,a.attr({role:"radiogroup",tabIndex:a.attr("tabindex")||"0"}).on("keydown",u).on("mousedown",function(e){o.mouseActive=!0,i(function(){o.mouseActive=!1},100)}).on("focus",function(){o.mouseActive===!1&&d.$element.addClass("md-focused")}).on("blur",function(){d.$element.removeClass("md-focused")})}function a(e){this._radioButtonRenderFns=[],this.$element=e}function s(){return{init:function(e){this._ngModelCtrl=e,this._ngModelCtrl.$render=t.bind(this,this.render)},add:function(e){this._radioButtonRenderFns.push(e)},remove:function(e){var t=this._radioButtonRenderFns.indexOf(e);t!==-1&&this._radioButtonRenderFns.splice(t,1)},render:function(){this._radioButtonRenderFns.forEach(function(e){e()})},setViewValue:function(e,t){this._ngModelCtrl.$setViewValue(e,t),this.render()},getViewValue:function(){return this._ngModelCtrl.$viewValue},selectNext:function(){return c(this.$element,1)},selectPrevious:function(){return c(this.$element,-1)},setActiveDescendant:function(e){this.$element.attr("aria-activedescendant",e)}}}function c(r,n){var i=e.iterator(r[0].querySelectorAll("md-radio-button"),!0);if(i.count()){var o=function(e){return!t.element(e).attr("disabled")},a=r[0].querySelector("md-radio-button.md-checked"),s=i[n<0?"previous":"next"](a,o)||i.first();t.element(s).triggerHandler("click")}}return a.prototype=s(),{restrict:"E",controller:["$element",a],require:["mdRadioGroup","?ngModel"],link:{pre:o}}}function r(e,t,r){function n(n,o,a,s){function c(e){if(!s)throw"RadioGroupController not found.";s.add(u),a.$observe("value",u),o.on("click",l).on("$destroy",function(){s.remove(u)})}function l(e){o[0].hasAttribute("disabled")||n.$apply(function(){s.setViewValue(a.value,e&&e.type)})}function u(){function e(e){"MD-RADIO-GROUP"!=o.parent()[0].nodeName&&o.parent()[e?"addClass":"removeClass"](i)}var t=s.getViewValue()==a.value;t!==p&&(p=t,o.attr("aria-checked",t),t?(e(!0),o.addClass(i),s.setActiveDescendant(o.attr("id"))):(e(!1),o.removeClass(i)))}function d(r,n){function i(){return a.id||"radio_"+t.nextUid()}n.ariaId=i(),r.attr({id:n.ariaId,role:"radio","aria-checked":"false"}),e.expectWithText(r,"aria-label")}var p;r(o),d(o,n),c()}var i="md-checked";return{restrict:"E",require:"^mdRadioGroup",transclude:!0,template:'<div class="_md-container" md-ink-ripple md-ink-ripple-checkbox><div class="_md-off"></div><div class="_md-on"></div></div><div ng-transclude class="_md-label"></div>',link:n}}t.module("material.components.radioButton",["material.core"]).directive("mdRadioGroup",e).directive("mdRadioButton",r),e.$inject=["$mdUtil","$mdConstant","$mdTheming","$timeout"],r.$inject=["$mdAria","$mdUtil","$mdTheming"]}(),function(){function e(e,n,i,o){function a(e,r){var o=function(){return!1},a=function(){return i.when(n.supplant(l,[r||""]))};return t.extend({isLockedOpen:o,isOpen:o,toggle:a,open:a,close:a,then:function(e){return c(r).then(e||t.noop)}},e)}function s(t,i){var a=e.get(t);return a||i?a:(o.error(n.supplant(l,[t||""])),r)}function c(t){return e.when(t).catch(o.error)}var l="SideNav '{0}' is not available! Did you use md-component-id='{0}'?",u={find:s,waitFor:c};return function(e,r){if(t.isUndefined(e))return u;var n=r===!0,i=u.find(e,n);return!i&&n?u.waitFor(e):!i&&t.isUndefined(r)?a(u,e):i}}function n(){return{restrict:"A",require:"^mdSidenav",link:function(e,t,r,n){}}}function i(e,n,i,o,a,s,c,l,u,d){function p(s,p,f,h){function m(e,t){s.isLockedOpen=e,e===t?p.toggleClass("_md-locked-open",!!e):a[e?"addClass":"removeClass"](p,"_md-locked-open"),E&&E.toggleClass("_md-locked-open",!!e)}function g(e){var t=n.findFocusTarget(p)||n.findFocusTarget(p,"[md-sidenav-focus]")||p,r=p.parent();r[e?"on":"off"]("keydown",S),E&&E[e?"on":"off"]("click",_);var i=v(r,e);return e&&(O=d[0].activeElement),y(e),I=u.all([e&&E?a.enter(E,r):E?a.leave(E):u.when(!0),a[e?"removeClass":"addClass"](p,"_md-closed")]).then(function(){s.isOpen&&t&&t.focus(),i&&i();
})}function v(e,t){var r=p[0],n=e[0].scrollTop;if(t&&n){T={top:r.style.top,bottom:r.style.bottom,height:r.style.height};var i={top:n+"px",bottom:"initial",height:e[0].clientHeight+"px"};p.css(i),E.css(i)}if(!t&&T)return function(){r.style.top=T.top,r.style.bottom=T.bottom,r.style.height=T.height,E[0].style.top=null,E[0].style.bottom=null,E[0].style.height=null,T=null}}function y(e){var n=p.parent();e&&!w?(w=n.css("overflow"),n.css("overflow","hidden")):t.isDefined(w)&&(n.css("overflow",w),w=r)}function b(e){return s.isOpen==e?u.when(!0):u(function(t){s.isOpen=e,n.nextTick(function(){I.then(function(e){s.isOpen||(O&&O.focus(),O=null),t(e)})})})}function S(e){var t=e.keyCode===i.KEY_CODE.ESCAPE;return t?_(e):u.when(!0)}function _(e){return e.preventDefault(),h.close()}var w,E,T,O=null,I=u.when(!0),P=c(f.mdIsLockedOpen),R=function(){return P(s.$parent,{$media:function(t){return l.warn("$media is deprecated for is-locked-open. Use $mdMedia instead."),e(t)},$mdMedia:e})};t.isDefined(f.mdDisableBackdrop)||(E=n.createBackdrop(s,"_md-sidenav-backdrop md-opaque ng-enter")),p.addClass("_md"),o(p),E&&o.inherit(E,p),p.on("$destroy",function(){E&&E.remove(),h.destroy()}),s.$on("$destroy",function(){E&&E.remove()}),s.$watch(R,m),s.$watch("isOpen",g),h.$toggleOpen=b}return{restrict:"E",scope:{isOpen:"=?mdIsOpen"},controller:"$mdSidenavController",compile:function(e){return e.addClass("_md-closed"),e.attr("tabIndex","-1"),p}}}function o(e,t,r,n,i){var o=this;o.isOpen=function(){return!!e.isOpen},o.isLockedOpen=function(){return!!e.isLockedOpen},o.open=function(){return o.$toggleOpen(!0)},o.close=function(){return o.$toggleOpen(!1)},o.toggle=function(){return o.$toggleOpen(!e.isOpen)},o.$toggleOpen=function(t){return i.when(e.isOpen=t)},o.destroy=n.register(o,r.mdComponentId)}t.module("material.components.sidenav",["material.core","material.components.backdrop"]).factory("$mdSidenav",e).directive("mdSidenav",i).directive("mdSidenavFocus",n).controller("$mdSidenavController",o),e.$inject=["$mdComponentRegistry","$mdUtil","$q","$log"],i.$inject=["$mdMedia","$mdUtil","$mdConstant","$mdTheming","$animate","$compile","$parse","$log","$q","$document"],o.$inject=["$scope","$element","$attrs","$mdComponentRegistry","$q"]}(),function(){function e(e,n,i,o,a,s){function c(a,c){var l=t.element("<md-select-value><span></span></md-select-value>");if(l.append('<span class="_md-select-icon" aria-hidden="true"></span>'),l.addClass("_md-select-value"),l[0].hasAttribute("id")||l.attr("id","select_value_label_"+n.nextUid()),a.find("md-content").length||a.append(t.element("<md-content>").append(a.contents())),c.mdOnOpen&&(a.find("md-content").prepend(t.element('<div> <md-progress-circular md-mode="indeterminate" ng-if="$$loadingAsyncDone === false" md-diameter="25px"></md-progress-circular></div>')),a.find("md-option").attr("ng-show","$$loadingAsyncDone")),c.name){var u=t.element('<select class="_md-visually-hidden">');u.attr({name:"."+c.name,"ng-model":c.ngModel,"aria-hidden":"true",tabindex:"-1"});var d=a.find("md-option");t.forEach(d,function(e){var r=t.element("<option>"+e.innerHTML+"</option>");e.hasAttribute("ng-value")?r.attr("ng-value",e.getAttribute("ng-value")):e.hasAttribute("value")&&r.attr("value",e.getAttribute("value")),u.append(r)}),a.parent().append(u)}var p=n.parseAttributeBoolean(c.multiple),f=p?"multiple":"",h='<div class="_md-select-menu-container" aria-hidden="true"><md-select-menu {0}>{1}</md-select-menu></div>';return h=n.supplant(h,[f,a.html()]),a.empty().append(l),a.append(h),c.tabindex||c.$set("tabindex",0),function(a,c,l,u){function d(){var e=c.attr("aria-label")||c.attr("placeholder");!e&&w&&w.label&&(e=w.label.text()),S=e,o.expect(c,"aria-label",e)}function f(){A&&(k=k||A.find("md-select-menu").controller("mdSelectMenu"),E.setLabelText(k.selectedLabels()))}function h(){if(S){var e=k.selectedLabels({mode:"aria"});c.attr("aria-label",e.length?S+": "+e:S)}}function m(){w&&w.setHasValue(k.selectedLabels().length>0||(c[0].validity||{}).badInput)}function g(){if(A=t.element(c[0].querySelector("._md-select-menu-container")),j=a,l.mdContainerClass){var e=A[0].getAttribute("class")+" "+l.mdContainerClass;A[0].setAttribute("class",e)}k=A.find("md-select-menu").controller("mdSelectMenu"),k.init(T,l.ngModel),c.on("$destroy",function(){A.remove()})}function v(e){var r=[32,13,38,40];if(r.indexOf(e.keyCode)!=-1)e.preventDefault(),y(e);else if(e.keyCode<=90&&e.keyCode>=31){e.preventDefault();var n=k.optNodeForKeyboardSearch(e);if(!n)return;var i=t.element(n).controller("mdOption");k.isMultiple||k.deselect(Object.keys(k.selected)[0]),k.select(i.hashKey,i.value),k.refreshViewValue()}}function y(){j.isOpen=!0,c.attr("aria-expanded","true"),e.show({scope:j,preserveScope:!0,skipCompile:!0,element:A,target:c[0],selectCtrl:E,preserveElement:!0,hasBackdrop:!0,loadingAsync:!!l.mdOnOpen&&(a.$eval(l.mdOnOpen)||!0)}).finally(function(){j.isOpen=!1,c.focus(),c.attr("aria-expanded","false"),T.$setTouched()})}var b,S,_=!0,w=u[0],E=u[1],T=u[2],O=u[3],I=c.find("md-select-value"),P=t.isDefined(l.readonly),R=n.parseAttributeBoolean(l.mdNoAsterisk);if(w){var C=w.isErrorGetter||function(){return T.$invalid&&T.$touched};if(w.input&&c.find("md-select-header").find("input")[0]!==w.input[0])throw new Error("<md-input-container> can only have *one* child <input>, <textarea> or <select> element!");w.input=c,w.label||o.expect(c,"aria-label",c.attr("placeholder")),a.$watch(C,w.setInvalid)}var A,j,k;if(g(),i(c),l.name&&O){var D=c.parent()[0].querySelector('select[name=".'+l.name+'"]');n.nextTick(function(){var e=t.element(D).controller("ngModel");e&&O.$removeControl(e)})}O&&t.isDefined(l.multiple)&&n.nextTick(function(){var e=T.$modelValue||T.$viewValue;e&&O.$setPristine()});var $=T.$render;T.$render=function(){$(),f(),h(),m()},l.$observe("placeholder",T.$render),w&&w.label&&l.$observe("required",function(e){w.label.toggleClass("md-required",e&&!R)}),E.setLabelText=function(e){if(E.setIsPlaceholder(!e),l.mdSelectedText)e=s(l.mdSelectedText)(a);else{var t=l.placeholder||(w&&w.label?w.label.text():"");e=e||t||""}var r=I.children().eq(0);r.html(e)},E.setIsPlaceholder=function(e){e?(I.addClass("_md-select-placeholder"),w&&w.label&&w.label.addClass("_md-placeholder")):(I.removeClass("_md-select-placeholder"),w&&w.label&&w.label.removeClass("_md-placeholder"))},P||(c.on("focus",function(e){w&&w.element.hasClass("md-input-has-value")&&w.setFocused(!0)}),c.on("blur",function(e){_&&(_=!1,j.isOpen&&e.stopImmediatePropagation()),j.isOpen||(w&&w.setFocused(!1),m())})),E.triggerClose=function(){s(l.mdOnClose)(a)},a.$$postDigest(function(){d(),f(),h()}),a.$watch(function(){return k.selectedLabels()},f);var M;l.$observe("ngMultiple",function(e){M&&M();var t=s(e);M=a.$watch(function(){return t(a)},function(e,t){e===r&&t===r||(e?c.attr("multiple","multiple"):c.removeAttr("multiple"),c.attr("aria-multiselectable",e?"true":"false"),A&&(k.setMultiple(e),$=T.$render,T.$render=function(){$(),f(),h(),m()},T.$render()))})}),l.$observe("disabled",function(e){t.isString(e)&&(e=!0),b!==r&&b===e||(b=e,e?c.attr({"aria-disabled":"true"}).removeAttr("tabindex").off("click",y).off("keydown",v):c.attr({tabindex:l.tabindex,"aria-disabled":"false"}).on("click",y).on("keydown",v))}),l.hasOwnProperty("disabled")||l.hasOwnProperty("ngDisabled")||(c.attr({"aria-disabled":"false"}),c.on("click",y),c.on("keydown",v));var x={role:"listbox","aria-expanded":"false","aria-multiselectable":p&&!l.ngMultiple?"true":"false"};c[0].hasAttribute("id")||(x.id="select_"+n.nextUid());var F="select_container_"+n.nextUid();A.attr("id",F),x["aria-owns"]=F,c.attr(x),a.$on("$destroy",function(){e.destroy().finally(function(){w&&(w.setFocused(!1),w.setHasValue(!1),w.input=null),T.$setTouched()})})}}return{restrict:"E",require:["^?mdInputContainer","mdSelect","ngModel","?^form"],compile:c,controller:function(){}}}function n(e,n,i){function o(e,r,o,a){function s(e){13!=e.keyCode&&32!=e.keyCode||c(e)}function c(r){var i=n.getClosest(r.target,"md-option"),o=i&&t.element(i).data("$mdOptionController");if(i&&o){if(i.hasAttribute("disabled"))return r.stopImmediatePropagation(),!1;var a=l.hashGetter(o.value),s=t.isDefined(l.selected[a]);e.$apply(function(){l.isMultiple?s?l.deselect(a):l.select(a,o.value):s||(l.deselect(Object.keys(l.selected)[0]),l.select(a,o.value)),l.refreshViewValue()})}}var l=a[0];r.addClass("_md"),i(r),r.on("click",c),r.on("keypress",s)}function a(i,o,a){function s(){var e=u.ngModel.$modelValue||u.ngModel.$viewValue||[];if(t.isArray(e)){var r=Object.keys(u.selected),n=e.map(u.hashGetter),i=r.filter(function(e){return n.indexOf(e)===-1});i.forEach(u.deselect),n.forEach(function(t,r){u.select(t,e[r])})}}function c(){var e=u.ngModel.$viewValue||u.ngModel.$modelValue;Object.keys(u.selected).forEach(u.deselect),u.select(u.hashGetter(e),e)}var u=this;u.isMultiple=t.isDefined(o.multiple),u.selected={},u.options={},i.$watchCollection(function(){return u.options},function(){u.ngModel.$render()});var d,p;u.setMultiple=function(e){function r(e,r){return t.isArray(e||r||[])}var n=u.ngModel;p=p||n.$isEmpty,u.isMultiple=e,d&&d(),u.isMultiple?(n.$validators["md-multiple"]=r,n.$render=s,i.$watchCollection(u.modelBinding,function(e){r(e)&&s(e),u.ngModel.$setPristine()}),n.$isEmpty=function(e){return!e||0===e.length}):(delete n.$validators["md-multiple"],n.$render=c)};var f,h,m,g="",v=300;u.optNodeForKeyboardSearch=function(e){f&&clearTimeout(f),f=setTimeout(function(){f=r,g="",m=r,h=r},v),g+=String.fromCharCode(e.keyCode);var n=new RegExp("^"+g,"i");h||(h=a.find("md-option"),m=new Array(h.length),t.forEach(h,function(e,t){m[t]=e.textContent.trim()}));for(var i=0;i<m.length;++i)if(n.test(m[i]))return h[i]},u.init=function(r,n){if(u.ngModel=r,u.modelBinding=n,u.ngModel.$isEmpty=function(e){return!u.options[e]},r.$options&&r.$options.trackBy){var o={},a=e(r.$options.trackBy);u.hashGetter=function(e,t){return o.$value=e,a(t||i,o)}}else u.hashGetter=function(e){return t.isObject(e)?"object_"+(e.$$mdSelectId||(e.$$mdSelectId=++l)):e};u.setMultiple(u.isMultiple)},u.selectedLabels=function(e){e=e||{};var t=e.mode||"html",r=n.nodesToArray(a[0].querySelectorAll("md-option[selected]"));if(r.length){var i;return"html"==t?i=function(e){var t=e.innerHTML,r=e.querySelector(".md-ripple-container");return r?t.replace(r.outerHTML,""):t}:"aria"==t&&(i=function(e){return e.hasAttribute("aria-label")?e.getAttribute("aria-label"):e.textContent}),r.map(i).join(", ")}return""},u.select=function(e,t){var r=u.options[e];r&&r.setSelected(!0),u.selected[e]=t},u.deselect=function(e){var t=u.options[e];t&&t.setSelected(!1),delete u.selected[e]},u.addOption=function(e,r){if(t.isDefined(u.options[e]))throw new Error('Duplicate md-option values are not allowed in a select. Duplicate value "'+r.value+'" found.');u.options[e]=r,t.isDefined(u.selected[e])&&(u.select(e,r.value),u.refreshViewValue())},u.removeOption=function(e){delete u.options[e]},u.refreshViewValue=function(){var e,r=[];for(var n in u.selected)(e=u.options[n])?r.push(e.value):r.push(u.selected[n]);var i=u.ngModel.$options&&u.ngModel.$options.trackBy,o=u.isMultiple?r:r[0],a=u.ngModel.$modelValue;(i?t.equals(a,o):a==o)||(u.ngModel.$setViewValue(o),u.ngModel.$render())}}return a.$inject=["$scope","$attrs","$element"],{restrict:"E",require:["mdSelectMenu"],scope:!1,controller:a,link:{pre:o}}}function i(e,r){function n(e,r){return e.append(t.element('<div class="_md-text">').append(e.contents())),e.attr("tabindex",r.tabindex||"0"),i}function i(n,i,o,a){function s(e,t,r){if(!d.hashGetter)return void(r||n.$$postDigest(function(){s(e,t,!0)}));var i=d.hashGetter(t,n),o=d.hashGetter(e,n);l.hashKey=o,l.value=e,d.removeOption(i,l),d.addOption(o,l)}function c(){var e={role:"option","aria-selected":"false"};i[0].hasAttribute("id")||(e.id="select_option_"+r.nextUid()),i.attr(e)}var l=a[0],d=a[1];d.isMultiple&&(i.addClass("_md-checkbox-enabled"),i.prepend(u.clone())),t.isDefined(o.ngValue)?n.$watch(o.ngValue,s):t.isDefined(o.value)?s(o.value):n.$watch(function(){return i.text().trim()},s),o.$observe("disabled",function(e){e?i.attr("tabindex","-1"):i.attr("tabindex","0")}),n.$$postDigest(function(){o.$observe("selected",function(e){t.isDefined(e)&&("string"==typeof e&&(e=!0),e?(d.isMultiple||d.deselect(Object.keys(d.selected)[0]),d.select(l.hashKey,l.value)):d.deselect(l.hashKey),d.refreshViewValue())})}),e.attach(n,i),c(),n.$on("$destroy",function(){d.removeOption(l.hashKey,l)})}function o(e){this.selected=!1,this.setSelected=function(t){t&&!this.selected?e.attr({selected:"selected","aria-selected":"true"}):!t&&this.selected&&(e.removeAttr("selected"),e.attr("aria-selected","false")),this.selected=t}}return o.$inject=["$element"],{restrict:"E",require:["mdOption","^^mdSelectMenu"],controller:o,compile:n}}function o(){function e(e,r){function n(){return e.parent().find("md-select-header").length}function i(){var n=e.find("label");n.length||(n=t.element("<label>"),e.prepend(n)),n.addClass("_md-container-ignore"),r.label&&n.text(r.label)}n()||i()}return{restrict:"E",compile:e}}function a(){return{restrict:"E"}}function s(e){function n(e,n,l,u,d,p,f,h,m){function g(e,t,r){function n(){return f(t,{addClass:"_md-leave"}).start()}function i(){t.removeClass("_md-active"),t.attr("aria-hidden","true"),t[0].style.display="none",y(r),!r.$destroy&&r.restoreFocus&&r.target.focus()}return r=r||{},r.cleanupInteraction(),r.cleanupResizing(),r.hideBackdrop(),r.$destroy===!0?i():n().then(i)}function v(i,o,a){function s(e,t,r){return r.parent.append(t),d(function(e,r){try{f(t,{removeClass:"_md-leave",duration:0}).start().then(c).then(e)}catch(e){r(e)}})}function c(){return d(function(e){if(a.isRemoved)return d.reject(!1);var t=b(i,o,a);t.container.element.css(_.toCss(t.container.styles)),t.dropDown.element.css(_.toCss(t.dropDown.styles)),p(function(){o.addClass("_md-active"),t.dropDown.element.css(_.toCss({transform:""})),v(a.focusedNode),e()})})}function g(e,t,r){return r.disableParentScroll&&!l.getClosest(r.target,"MD-DIALOG")?r.restoreScroll=l.disableScrollAround(r.element,r.parent):r.disableParentScroll=!1,r.hasBackdrop&&(r.backdrop=l.createBackdrop(e,"_md-select-backdrop _md-click-catcher"),h.enter(r.backdrop,m[0].body,null,{duration:0})),function(){r.backdrop&&r.backdrop.remove(),r.disableParentScroll&&r.restoreScroll(),delete r.restoreScroll}}function v(e){e&&!e.hasAttribute("disabled")&&e.focus()}function y(e,r){var n=o.find("md-select-menu");if(!r.target)throw new Error(l.supplant(S,[r.target]));t.extend(r,{isRemoved:!1,target:t.element(r.target),parent:t.element(r.parent),selectEl:n,contentEl:o.find("md-content"),optionNodes:n[0].getElementsByTagName("md-option")})}function w(){var e=function(e,t,r){return function(){if(!r.isRemoved){var n=b(e,t,r),i=n.container,o=n.dropDown;i.element.css(_.toCss(i.styles)),o.element.css(_.toCss(o.styles))}}}(i,o,a),r=t.element(u);return r.on("resize",e),r.on("orientationchange",e),function(){r.off("resize",e),r.off("orientationchange",e)}}function E(){a.loadingAsync&&!a.isRemoved&&(i.$$loadingAsyncDone=!1,d.when(a.loadingAsync).then(function(){i.$$loadingAsyncDone=!0,delete a.loadingAsync}).then(function(){p(c)}))}function T(){function t(t){t.preventDefault(),t.stopPropagation(),a.restoreFocus=!1,l.nextTick(e.hide,!0)}function i(t){var r=n.KEY_CODE;switch(t.preventDefault(),t.stopPropagation(),t.keyCode){case r.UP_ARROW:return u();case r.DOWN_ARROW:return c();case r.SPACE:case r.ENTER:var i=l.getClosest(t.target,"md-option");i&&(p.triggerHandler({type:"click",target:i}),t.preventDefault()),d(t);break;case r.TAB:case r.ESCAPE:t.stopPropagation(),t.preventDefault(),a.restoreFocus=!0,l.nextTick(e.hide,!0);break;default:if(t.keyCode>=31&&t.keyCode<=90){var o=p.controller("mdSelectMenu").optNodeForKeyboardSearch(t);a.focusedNode=o||a.focusedNode,o&&o.focus()}}}function s(e){var t,n=l.nodesToArray(a.optionNodes),i=n.indexOf(a.focusedNode);do i===-1?i=0:"next"===e&&i<n.length-1?i++:"prev"===e&&i>0&&i--,t=n[i],t.hasAttribute("disabled")&&(t=r);while(!t&&i<n.length-1&&i>0);t&&t.focus(),a.focusedNode=t}function c(){s("next")}function u(){s("prev")}function d(t){function r(){var e=!1;if(t&&t.currentTarget.children.length>0){var r=t.currentTarget.children[0],n=r.scrollHeight>r.clientHeight;if(n&&r.children.length>0){var i=t.pageX-t.currentTarget.getBoundingClientRect().left;i>r.querySelector("md-option").offsetWidth&&(e=!0)}}return e}if(!(t&&"click"==t.type&&t.currentTarget!=p[0]||r())){var n=l.getClosest(t.target,"md-option");n&&n.hasAttribute&&!n.hasAttribute("disabled")&&(t.preventDefault(),t.stopPropagation(),f.isMultiple||(a.restoreFocus=!0,l.nextTick(function(){e.hide(f.ngModel.$viewValue)},!0)))}}if(!a.isRemoved){var p=a.selectEl,f=p.controller("mdSelectMenu")||{};return o.addClass("_md-clickable"),a.backdrop&&a.backdrop.on("click",t),p.on("keydown",i),p.on("click",d),function(){a.backdrop&&a.backdrop.off("click",t),p.off("keydown",i),p.off("click",d),o.removeClass("_md-clickable"),a.isRemoved=!0}}}return E(),y(i,a),a.hideBackdrop=g(i,o,a),s(i,o,a).then(function(e){return o.attr("aria-hidden","false"),a.alreadyOpen=!0,a.cleanupInteraction=T(),a.cleanupResizing=w(),e},a.hideBackdrop)}function y(e){var t=e.selectCtrl;if(t){var r=e.selectEl.controller("mdSelectMenu");t.setLabelText(r?r.selectedLabels():""),t.triggerClose()}}function b(e,r,n){var d,p=r[0],f=n.target[0].children[0],h=m[0].body,g=n.selectEl[0],v=n.contentEl[0],y=h.getBoundingClientRect(),b=f.getBoundingClientRect(),S=!1,_={left:y.left+c,top:c,bottom:y.height-c,right:y.width-c-(l.floatingScrollbars()?16:0)},w={top:b.top-_.top,left:b.left-_.left,right:_.right-(b.left+b.width),bottom:_.bottom-(b.top+b.height)},E=y.width-2*c,T=g.querySelector("md-option[selected]"),O=g.getElementsByTagName("md-option"),I=g.getElementsByTagName("md-optgroup"),P=s(r,v),R=i(n.loadingAsync);d=R?v.firstElementChild||v:T?T:I.length?I[0]:O.length?O[0]:v.firstElementChild||v,v.offsetWidth>E?v.style["max-width"]=E+"px":v.style.maxWidth=null,S&&(v.style["min-width"]=b.width+"px"),P&&g.classList.add("_md-overflow");var C=d;"MD-OPTGROUP"===(C.tagName||"").toUpperCase()&&(C=O[0]||v.firstElementChild||v,d=C),n.focusedNode=C,p.style.display="block";var A=g.getBoundingClientRect(),j=a(d);if(d){var k=u.getComputedStyle(d);j.paddingLeft=parseInt(k.paddingLeft,10)||0,j.paddingRight=parseInt(k.paddingRight,10)||0}if(P){var D=v.offsetHeight/2;v.scrollTop=j.top+j.height/2-D,w.top<D?v.scrollTop=Math.min(j.top,v.scrollTop+D-w.top):w.bottom<D&&(v.scrollTop=Math.max(j.top+j.height-A.height,v.scrollTop-D+w.bottom))}var $,M,x,F;S?($=b.left,M=b.top+b.height,x="50% 0",M+A.height>_.bottom&&(M=b.top-A.height,x="50% 100%")):($=b.left+j.left-j.paddingLeft+2,M=Math.floor(b.top+b.height/2-j.height/2-j.top+v.scrollTop)+2,x=j.left+b.width/2+"px "+(j.top+j.height/2-v.scrollTop)+"px 0px",F=Math.min(b.width+j.paddingLeft+j.paddingRight,E));var L=p.getBoundingClientRect(),U=Math.round(100*Math.min(b.width/A.width,1))/100,B=Math.round(100*Math.min(b.height/A.height,1))/100;return{container:{element:t.element(p),styles:{left:Math.floor(o(_.left,$,_.right-L.width)),top:Math.floor(o(_.top,M,_.bottom-L.height)),"min-width":F}},dropDown:{element:t.element(g),styles:{transformOrigin:x,transform:n.alreadyOpen?"":l.supplant("scale({0},{1})",[U,B])}}}}var S="$mdSelect.show() expected a target element in options.target but got '{0}'!",_=l.dom.animator;return{parent:"body",themable:!0,onShow:v,onRemove:g,hasBackdrop:!0,disableParentScroll:!0}}function i(e){return e&&t.isFunction(e.then)}function o(e,t,r){return Math.max(e,Math.min(t,r))}function a(e){return e?{left:e.offsetLeft,top:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}:{left:0,top:0,width:0,height:0}}function s(e,t){var r=!1;try{var n=e[0].style.display;e[0].style.display="block",r=t.scrollHeight>t.offsetHeight,e[0].style.display=n}finally{}return r}return n.$inject=["$mdSelect","$mdConstant","$mdUtil","$window","$q","$$rAF","$animateCss","$animate","$document"],e("$mdSelect").setDefaults({methods:["target"],options:n})}var c=8,l=0,u=t.element('<div class="_md-container"><div class="_md-icon"></div></div>');t.module("material.components.select",["material.core","material.components.backdrop"]).directive("mdSelect",e).directive("mdSelectMenu",n).directive("mdOption",i).directive("mdOptgroup",o).directive("mdSelectHeader",a).provider("$mdSelect",s),e.$inject=["$mdSelect","$mdUtil","$mdTheming","$mdAria","$compile","$parse"],n.$inject=["$parse","$mdUtil","$mdTheming"],i.$inject=["$mdButtonInkRipple","$mdUtil"],s.$inject=["$$interimElementProvider"]}(),function(){function e(){return{controller:function(){},compile:function(e){var n=e.find("md-slider");if(n){var i=n.attr("md-vertical");return i!==r&&e.attr("md-vertical",""),n.attr("flex")||n.attr("flex",""),function(e,r,n,i){function o(e){r.children().attr("disabled",e),r.find("input").attr("disabled",e)}r.addClass("_md");var a=t.noop;n.disabled?o(!0):n.ngDisabled&&(a=e.$watch(n.ngDisabled,function(e){o(e)})),e.$on("$destroy",function(){a()});var s;i.fitInputWidthToTextLength=function(e){var t=r[0].querySelector("md-input-container");if(t){var n=getComputedStyle(t),i=parseInt(n.minWidth),o=2*parseInt(n.padding);s=s||parseInt(n.maxWidth);var a=Math.max(s,i+o+i/2*e);t.style.maxWidth=a+"px"}}}}}}}function n(e,r,n,i,o,a,s,c,l,u){function d(e,r){var i=t.element(e[0].getElementsByClassName("_md-slider-wrapper")),o=r.tabindex||0;return i.attr("tabindex",o),(r.disabled||r.ngDisabled)&&i.attr("tabindex",-1),i.attr("role","slider"),n.expect(e,"aria-label"),p}function p(n,d,p,f){function h(){w(),C()}function m(e){ce=parseFloat(e),d.attr("aria-valuemin",e),h()}function g(e){le=parseFloat(e),d.attr("aria-valuemax",e),h()}function v(e){ue=parseFloat(e)}function y(e){de=A(parseInt(e),0,6)}function b(){d.attr("aria-disabled",!!G())}function S(){if(ie&&!G()&&!t.isUndefined(ue)){if(ue<=0){var e="Slider step value must be greater than zero when in discrete mode";throw l.error(e),new Error(e)}var n=Math.floor((le-ce)/ue);pe||(pe=t.element("<canvas>").css("position","absolute"),Z.append(pe),fe=pe[0].getContext("2d"));var i=E();!i||i.height||i.width||(w(),i=he),pe[0].width=i.width,pe[0].height=i.height;for(var o,a=0;a<=n;a++){var s=r.getComputedStyle(Z[0]);fe.fillStyle=s.color||"black",o=Math.floor((ne?i.height:i.width)*(a/n)),fe.fillRect(ne?0:o-1,ne?o-1:0,ne?i.width:2,ne?2:i.height)}}}function _(){if(pe&&fe){var e=E();fe.clearRect(0,0,e.width,e.height)}}function w(){he=X[0].getBoundingClientRect()}function E(){return te(),he}function T(e){if(!G()){var t;(ne?e.keyCode===o.KEY_CODE.DOWN_ARROW:e.keyCode===o.KEY_CODE.LEFT_ARROW)?t=-ue:(ne?e.keyCode===o.KEY_CODE.UP_ARROW:e.keyCode===o.KEY_CODE.RIGHT_ARROW)&&(t=ue),t=oe?-t:t,t&&((e.metaKey||e.ctrlKey||e.altKey)&&(t*=4),e.preventDefault(),e.stopPropagation(),n.$evalAsync(function(){R(Y.$viewValue+t)}))}}function O(){S(),n.mouseActive=!0,ee.removeClass("md-focused"),u(function(){n.mouseActive=!1},100)}function I(){n.mouseActive===!1&&ee.addClass("md-focused")}function P(){ee.removeClass("md-focused"),d.removeClass("_md-active"),_()}function R(e){Y.$setViewValue(A(j(e)))}function C(){isNaN(Y.$viewValue)&&(Y.$viewValue=Y.$modelValue),Y.$viewValue=A(Y.$viewValue);var e=V(Y.$viewValue);n.modelValue=Y.$viewValue,d.attr("aria-valuenow",Y.$viewValue),k(e),Q.text(Y.$viewValue)}function A(e,r,n){if(t.isNumber(e))return r=t.isNumber(r)?r:ce,n=t.isNumber(n)?n:le,Math.max(r,Math.min(n,e))}function j(e){if(t.isNumber(e)){var r=Math.round((e-ce)/ue)*ue+ce;return r=Math.round(r*Math.pow(10,de))/Math.pow(10,de),z&&z.fitInputWidthToTextLength&&i.debounce(function(){z.fitInputWidthToTextLength(r.toString().length)},100)(),r}}function k(e){e=N(e);var t=100*e+"%",r=oe?100*(1-e)+"%":t;K.css(ne?"bottom":"left",t),J.css(ne?"height":"width",r),d.toggleClass(oe?"_md-max":"_md-min",0===e),d.toggleClass(oe?"_md-min":"_md-max",1===e)}function D(e){if(!G()){d.addClass("_md-active"),d[0].focus(),w();var t=H(q(ne?e.pointer.y:e.pointer.x)),r=A(j(t));n.$apply(function(){R(r),k(V(r))})}}function $(e){if(!G()){d.removeClass("_md-dragging");var t=H(q(ne?e.pointer.y:e.pointer.x)),r=A(j(t));n.$apply(function(){R(r),C()})}}function M(e){G()||(me=!0,e.stopPropagation(),d.addClass("_md-dragging"),L(e))}function x(e){me&&(e.stopPropagation(),L(e))}function F(e){me&&(e.stopPropagation(),me=!1)}function L(e){ie?B(ne?e.pointer.y:e.pointer.x):U(ne?e.pointer.y:e.pointer.x)}function U(e){n.$evalAsync(function(){R(H(q(e)))})}function B(e){var t=H(q(e)),r=A(j(t));k(q(e)),Q.text(r)}function N(e){return Math.max(0,Math.min(e||0,1))}function q(e){var t=ne?he.top:he.left,r=ne?he.height:he.width,n=(e-t)/r;return Math.max(0,Math.min(1,ne?1-n:n))}function H(e){var t=oe?1-e:e;return ce+t*(le-ce)}function V(e){var t=(e-ce)/(le-ce);return oe?1-t:t}a(d);var Y=f[0]||{$setViewValue:function(e){this.$viewValue=e,this.$viewChangeListeners.forEach(function(e){e()})},$parsers:[],$formatters:[],$viewChangeListeners:[]},z=f[1],G=(t.element(i.getClosest(d,"_md-slider-container",!0)),p.ngDisabled?t.bind(null,c(p.ngDisabled),n.$parent):function(){return d[0].hasAttribute("disabled")}),W=t.element(d[0].querySelector("._md-thumb")),Q=t.element(d[0].querySelector("._md-thumb-text")),K=W.parent(),X=t.element(d[0].querySelector("._md-track-container")),J=t.element(d[0].querySelector("._md-track-fill")),Z=t.element(d[0].querySelector("._md-track-ticks")),ee=t.element(d[0].getElementsByClassName("_md-slider-wrapper")),te=(t.element(d[0].getElementsByClassName("_md-slider-content")),i.throttle(w,5e3)),re=3,ne=t.isDefined(p.mdVertical),ie=t.isDefined(p.mdDiscrete),oe=t.isDefined(p.mdInvert);t.isDefined(p.min)?p.$observe("min",m):m(0),t.isDefined(p.max)?p.$observe("max",g):g(100),t.isDefined(p.step)?p.$observe("step",v):v(1),t.isDefined(p.round)?p.$observe("round",y):y(re);var ae=t.noop;p.ngDisabled&&(ae=n.$parent.$watch(p.ngDisabled,b)),s.register(ee,"drag",{horizontal:!ne}),n.mouseActive=!1,ee.on("keydown",T).on("mousedown",O).on("focus",I).on("blur",P).on("$md.pressdown",D).on("$md.pressup",$).on("$md.dragstart",M).on("$md.drag",x).on("$md.dragend",F),setTimeout(h,0);var se=e.throttle(h);t.element(r).on("resize",se),n.$on("$destroy",function(){t.element(r).off("resize",se)}),Y.$render=C,Y.$viewChangeListeners.push(C),Y.$formatters.push(A),Y.$formatters.push(j);var ce,le,ue,de,pe,fe,he={};w();var me=!1}return{scope:{},require:["?ngModel","?^mdSliderContainer"],template:'<div class="_md-slider-wrapper"><div class="_md-slider-content"><div class="_md-track-container"><div class="_md-track"></div><div class="_md-track _md-track-fill"></div><div class="_md-track-ticks"></div></div><div class="_md-thumb-container"><div class="_md-thumb"></div><div class="_md-focus-thumb"></div><div class="_md-focus-ring"></div><div class="_md-sign"><span class="_md-thumb-text"></span></div><div class="_md-disabled-thumb"></div></div></div></div>',compile:d}}t.module("material.components.slider",["material.core"]).directive("mdSlider",n).directive("mdSliderContainer",e),n.$inject=["$$rAF","$window","$mdAria","$mdUtil","$mdConstant","$mdTheming","$mdGesture","$parse","$log","$timeout"]}(),function(){function r(t,r){return["$mdUtil",function(n){return{restrict:"A",multiElement:!0,link:function(i,o,a){var s=i.$on("$md-resize-enable",function(){s();var c=e.getComputedStyle(o[0]);i.$watch(a[t],function(e){if(!!e===r){n.nextTick(function(){i.$broadcast("$md-resize")});var t={cachedTransitionStyles:c};n.dom.animator.waitTransitionEnd(o,t).then(function(){i.$broadcast("$md-resize")})}})})}}}]}t.module("material.components.showHide",["material.core"]).directive("ngShow",r("ngShow",!0)).directive("ngHide",r("ngHide",!1))}(),function(){function e(e){function t(e){function t(t,i,o){var a=e(o[r]);i.on(n,function(e){t.$applyAsync(function(){a(t,{$event:e})})})}return{restrict:"A",link:t}}var r="md"+e,n="$md."+e.toLowerCase();return t.$inject=["$parse"],t}t.module("material.components.swipe",["material.core"]).directive("mdSwipeLeft",e("SwipeLeft")).directive("mdSwipeRight",e("SwipeRight")).directive("mdSwipeUp",e("SwipeUp")).directive("mdSwipeDown",e("SwipeDown"))}(),function(){function e(e,n,i,o,a){function s(e){function t(e,t){t.addClass("_md-sticky-clone");var r={element:e,clone:t};return m.items.push(r),o.nextTick(function(){f.prepend(r.clone)}),h(),function(){m.items.forEach(function(t,r){t.element[0]===e[0]&&(m.items.splice(r,1),t.clone.remove())}),h()}}function a(){m.items.forEach(s),m.items=m.items.sort(function(e,t){return e.top<t.top?-1:1});for(var e,t=f.prop("scrollTop"),r=m.items.length-1;r>=0;r--)if(t>m.items[r].top){e=m.items[r];break}u(e)}function s(e){var t=e.element[0];for(e.top=0,e.left=0,e.right=0;t&&t!==f[0];)e.top+=t.offsetTop,e.left+=t.offsetLeft,t.offsetParent&&(e.right+=t.offsetParent.offsetWidth-t.offsetWidth-t.offsetLeft),t=t.offsetParent;e.height=e.element.prop("offsetHeight");var n=o.floatingScrollbars()?"0":r;o.bidi(e.clone,"margin-left",e.left,n),o.bidi(e.clone,"margin-right",n,e.right)}function c(){var e=f.prop("scrollTop"),t=e>(c.prevScrollTop||0);if(c.prevScrollTop=e,0===e)return void u(null);if(t){if(m.next&&m.next.top<=e)return void u(m.next);if(m.current&&m.next&&m.next.top-e<=m.next.height)return void p(m.current,e+(m.next.top-m.next.height-e))}if(!t){if(m.current&&m.prev&&e<m.current.top)return void u(m.prev);if(m.next&&m.current&&e>=m.next.top-m.current.height)return void p(m.current,e+(m.next.top-e-m.current.height))}m.current&&p(m.current,e)}function u(e){if(m.current!==e){m.current&&(p(m.current,null),d(m.current,null)),e&&d(e,"active"),m.current=e;var t=m.items.indexOf(e);m.next=m.items[t+1],m.prev=m.items[t-1],d(m.next,"next"),d(m.prev,"prev")}}function d(e,t){e&&e.state!==t&&(e.state&&(e.clone.attr("sticky-prev-state",e.state),e.element.attr("sticky-prev-state",e.state)),e.clone.attr("sticky-state",t),e.element.attr("sticky-state",t),e.state=t)}function p(e,t){e&&(null===t||t===r?e.translateY&&(e.translateY=null,e.clone.css(n.CSS.TRANSFORM,"")):(e.translateY=t,o.bidi(e.clone,n.CSS.TRANSFORM,"translate3d("+e.left+"px,"+t+"px,0)","translateY("+t+"px)")))}var f=e.$element,h=i.throttle(a);l(f),f.on("$scrollstart",h),f.on("$scroll",c);var m;return m={prev:null,current:null,next:null,items:[],add:t,refreshElements:a}}function c(r){var n,i=t.element("<div>");e[0].body.appendChild(i[0]);for(var o=["sticky","-webkit-sticky"],a=0;a<o.length;++a)if(i.css({position:o[a],top:0,"z-index":2}),i.css("position")==o[a]){n=o[a];break}return i.remove(),n}function l(e){function t(){+o.now()-n>a?(r=!1,e.triggerHandler("$scrollend")):(e.triggerHandler("$scroll"),i.throttle(t))}var r,n,a=200;e.on("scroll touchmove",function(){r||(r=!0,i.throttle(t),e.triggerHandler("$scrollstart")),e.triggerHandler("$scroll"),n=+o.now()})}var u=c();return function(e,t,r){var n=t.controller("mdContent");if(n)if(u)t.css({position:u,top:0,"z-index":2});else{var i=n.$element.data("$$sticky");i||(i=s(n),n.$element.data("$$sticky",i));var o=r||a(t.clone())(e),c=i.add(t,o);e.$on("$destroy",c)}}}t.module("material.components.sticky",["material.core","material.components.content"]).factory("$mdSticky",e),e.$inject=["$document","$mdConstant","$$rAF","$mdUtil","$compile"]}(),function(){function e(e,r,n,i,o,a){function s(e,s){var l=c.compile(e,s);return e.addClass("_md-dragging"),function(e,s,c,u){function d(t){m&&m(e)||(t.stopPropagation(),s.addClass("_md-dragging"),y={width:g.prop("offsetWidth")})}function p(e){if(y){e.stopPropagation(),e.srcEvent&&e.srcEvent.preventDefault();var t=e.pointer.distanceX/y.width,r=u.$viewValue?1+t:t;r=Math.max(0,Math.min(1,r)),g.css(n.CSS.TRANSFORM,"translate3d("+100*r+"%,0,0)"),y.translate=r}}function f(e){if(y){e.stopPropagation(),s.removeClass("_md-dragging"),g.css(n.CSS.TRANSFORM,"");var t=u.$viewValue?y.translate>.5:y.translate<.5;t&&h(!u.$viewValue),y=null}}function h(t){e.$apply(function(){u.$setViewValue(t),u.$render()})}u=u||r.fakeNgModel();var m=null;null!=c.disabled?m=function(){return!0}:c.ngDisabled&&(m=i(c.ngDisabled));var g=t.element(s[0].querySelector("._md-thumb-container")),v=t.element(s[0].querySelector("._md-container"));
o(function(){s.removeClass("_md-dragging")}),l(e,s,c,u),m&&e.$watch(m,function(e){s.attr("tabindex",e?-1:0)}),a.register(v,"drag"),v.on("$md.dragstart",d).on("$md.drag",p).on("$md.dragend",f);var y}}var c=e[0];return{restrict:"E",priority:210,transclude:!0,template:'<div class="_md-container"><div class="_md-bar"></div><div class="_md-thumb-container"><div class="_md-thumb" md-ink-ripple md-ink-ripple-checkbox></div></div></div><div ng-transclude class="_md-label"></div>',require:"?ngModel",compile:s}}t.module("material.components.switch",["material.core","material.components.checkbox"]).directive("mdSwitch",e),e.$inject=["mdCheckboxDirective","$mdUtil","$mdConstant","$parse","$$rAF","$mdGesture"]}(),function(){function e(e,r,n,i){return{restrict:"E",replace:!0,transclude:!0,template:'<div class="md-subheader _md">  <div class="_md-subheader-inner">    <div class="_md-subheader-content"></div>  </div></div>',link:function(r,i,o,a,s){function c(e){return t.element(e[0].querySelector("._md-subheader-content"))}n(i),i.addClass("_md");var l=i[0].outerHTML;s(r,function(e){c(i).append(e)}),i.hasClass("md-no-sticky")||s(r,function(n){var o=t.element('<div class="_md-subheader-wrapper">'+l+"</div>");c(o).append(n),e(r,i,o)})}}}t.module("material.components.subheader",["material.core","material.components.sticky"]).directive("mdSubheader",e),e.$inject=["$mdSticky","$compile","$mdTheming","$mdUtil"]}(),function(){t.module("material.components.tabs",["material.core","material.components.icon"])}(),function(){function e(e){return{restrict:"E",link:function(t,r){r.addClass("_md"),t.$on("$destroy",function(){e.destroy()})}}}function r(e){function r(e){i=e}function n(e,r,n,o){function a(t,a,s){i=s.textContent||s.content;var u=!o("gt-sm");return a=n.extractElementByName(a,"md-toast",!0),s.element=a,s.onSwipe=function(e,t){var i=e.type.replace("$md.",""),o=i.replace("swipe","");"down"===o&&s.position.indexOf("top")!=-1&&!u||"up"===o&&(s.position.indexOf("bottom")!=-1||u)||("left"!==o&&"right"!==o||!u)&&(a.addClass("_md-"+i),n.nextTick(r.cancel))},s.openClass=c(s.position),s.parent.addClass(s.openClass),n.hasComputedStyle(s.parent,"position","static")&&s.parent.css("position","relative"),a.on(l,s.onSwipe),a.addClass(u?"_md-bottom":s.position.split(" ").map(function(e){return"_md-"+e}).join(" ")),s.parent&&s.parent.addClass("_md-toast-animating"),e.enter(a,s.parent).then(function(){s.parent&&s.parent.removeClass("_md-toast-animating")})}function s(t,r,i){return r.off(l,i.onSwipe),i.parent&&i.parent.addClass("_md-toast-animating"),i.openClass&&i.parent.removeClass(i.openClass),(1==i.$destroy?r.remove():e.leave(r)).then(function(){i.parent&&i.parent.removeClass("_md-toast-animating"),n.hasComputedStyle(i.parent,"position","static")&&i.parent.css("position","")})}function c(e){return o("gt-xs")?"_md-toast-open-"+(e.indexOf("top")>-1?"top":"bottom"):"_md-toast-open-bottom"}var l="$md.swipeleft $md.swiperight $md.swipeup $md.swipedown";return{onShow:a,onRemove:s,position:"bottom left",themable:!0,hideDelay:3e3,autoWrap:!0,transformTemplate:function(e,r){var n=r.autoWrap&&e&&!/md-toast-content/g.test(e);if(n){var i=document.createElement("md-template");i.innerHTML=e;for(var o=0;o<i.children.length;o++)if("MD-TOAST"===i.children[o].nodeName){var a=t.element('<div class="md-toast-content">');a.append(t.element(i.children[o].childNodes)),i.children[o].appendChild(a[0])}return i.outerHTML}return e||""}}}var i,o="ok",a=e("$mdToast").setDefaults({methods:["position","hideDelay","capsule","parent","position"],options:n}).addPreset("simple",{argOption:"textContent",methods:["textContent","content","action","highlightAction","highlightClass","theme","parent"],options:["$mdToast","$mdTheming",function(e,t){return{template:'<md-toast md-theme="{{ toast.theme }}" ng-class="{\'md-capsule\': toast.capsule}">  <div class="md-toast-content">    <span flex class="md-toast-text" role="alert" aria-relevant="all" aria-atomic="true">      {{ toast.content }}    </span>    <md-button class="md-action" ng-if="toast.action" ng-click="toast.resolve()"         ng-class="highlightClasses">      {{ toast.action }}    </md-button>  </div></md-toast>',controller:["$scope",function(t){var r=this;r.highlightAction&&(t.highlightClasses=["md-highlight",r.highlightClass]),t.$watch(function(){return i},function(){r.content=i}),this.resolve=function(){e.hide(o)}}],theme:t.defaultTheme(),controllerAs:"toast",bindToController:!0}}]}).addMethod("updateTextContent",r).addMethod("updateContent",r);return n.$inject=["$animate","$mdToast","$mdUtil","$mdMedia"],a}t.module("material.components.toast",["material.core","material.components.button"]).directive("mdToast",e).provider("$mdToast",r),e.$inject=["$mdToast"],r.$inject=["$$interimElementProvider"]}(),function(){function e(e,r,n,i,o){var a=t.bind(null,n.supplant,"translate3d(0,{0}px,0)");return{template:"",restrict:"E",link:function(s,c,l){function u(){function i(e){var t=c.parent().find("md-content");!m&&t.length&&u(null,t),e=s.$eval(e),e===!1?g():g=p()}function u(e,t){t&&c.parent()[0]===t.parent()[0]&&(m&&m.off("scroll",S),m=t,g=p())}function d(e){var t=e?e.target.scrollTop:y;_(),v=Math.min(h/b,Math.max(0,v+t-y)),c.css(r.CSS.TRANSFORM,a([-v*b])),m.css(r.CSS.TRANSFORM,a([(h-v)*b])),y=t,n.nextTick(function(){var e=c.hasClass("md-whiteframe-z1");e&&!v?o.removeClass(c,"md-whiteframe-z1"):!e&&v&&o.addClass(c,"md-whiteframe-z1")})}function p(){return m?(m.on("scroll",S),m.attr("scroll-shrink","true"),n.nextTick(f,!1),function(){m.off("scroll",S),m.attr("scroll-shrink","false"),f()}):t.noop}function f(){h=c.prop("offsetHeight");var e=-h*b+"px";m.css({"margin-top":e,"margin-bottom":e}),d()}var h,m,g=t.noop,v=0,y=0,b=l.mdShrinkSpeedFactor||.5,S=e.throttle(d),_=n.debounce(f,5e3);s.$on("$mdContentLoaded",u),l.$observe("mdScrollShrink",i),l.ngShow&&s.$watch(l.ngShow,f),l.ngHide&&s.$watch(l.ngHide,f),s.$on("$destroy",g)}c.addClass("_md"),i(c),t.isDefined(l.mdScrollShrink)&&u()}}}t.module("material.components.toolbar",["material.core","material.components.content"]).directive("mdToolbar",e),e.$inject=["$$rAF","$mdConstant","$mdUtil","$mdTheming","$animate"]}(),function(){function r(e,r,n,i,o,a,s,c,l,u){function d(d,h,m){function g(){d.delay=d.delay||p}function v(){var e="center top";switch(d.direction){case"left":e="right center";break;case"right":e="left center";break;case"top":e="center bottom";break;case"bottom":e="center top"}C.css("transform-origin",e)}function y(e){e?T():O()}function b(){if(h[0]&&"MutationObserver"in r){var e=new MutationObserver(function(e){e.forEach(function(e){"md-visible"===e.attributeName&&(d.visibleWatcher||(d.visibleWatcher=d.$watch("visible",y))),"md-direction"===e.attributeName&&I(d.direction)})});e.observe(h[0],{attributes:!0}),m.hasOwnProperty("mdVisible")&&(d.visibleWatcher=d.$watch("visible",y))}else d.visibleWatcher=d.$watch("visible",y),d.$watch("direction",I);var t=function(){d.$destroy()};h.one("$destroy",t),R.one("$destroy",t),d.$on("$destroy",function(){E(!1),h.remove(),e&&e.disconnect()}),h.text().indexOf(l.startSymbol())>-1&&d.$watch(function(){return h.text().trim()},S)}function S(e){if((e||!R.attr("aria-label"))&&!R.text().trim()){var t=e||h.text().trim(),r=l(t)(R.scope());R.attr("aria-label",r)}}function _(){h.detach(),h.attr("role","tooltip")}function w(){function t(){E(!1)}var n=!1;if(R[0]&&"MutationObserver"in r){var a=new MutationObserver(function(e){e.some(function(e){return"disabled"===e.attributeName&&R[0].disabled})&&o.nextTick(function(){E(!1)})});a.observe(R[0],{attributes:!0})}var s=function(){c=document.activeElement===R[0]},c=!1;u.register("scroll",t,!0),u.register("blur",s),u.register("resize",k),d.$on("$destroy",function(){u.deregister("scroll",t,!0),u.deregister("blur",s),u.deregister("resize",k),R.off("focus mouseenter touchstart",l).off("blur mouseleave touchend touchcancel",p).off("mousedown",f),p(),a&&a.disconnect()});var l=function(e){return"focus"===e.type&&c?void(c=!1):(R.on("blur mouseleave touchend touchcancel",p),void E(!0))},p=function(){var t=d.hasOwnProperty("autohide")?d.autohide:m.hasOwnProperty("mdAutohide");(t||n||i[0].activeElement!==R[0])&&(j&&(e.cancel(j),E.queued=!1,j=null),R.off("blur mouseleave touchend touchcancel",p),R.triggerHandler("blur"),E(!1)),n=!1},f=function(){n=!0};R.on("mousedown",f),R.on("focus mouseenter touchstart",l)}function E(t){E.queued&&E.value===!!t||!E.queued&&d.visible===!!t||(E.value=!!t,E.queued||(t?(E.queued=!0,j=e(function(){d.visible=E.value,E.queued=!1,j=null,d.visibleWatcher||y(d.visible)},d.delay)):o.nextTick(function(){d.visible=!1,d.visibleWatcher||y(!1)})))}function T(){if(h[0].textContent.trim()){if(h.css({top:0,left:0}),A.append(h),o.hasComputedStyle(h,"display","none"))return d.visible=!1,void h.detach();I(),t.forEach([h,C],function(e){s.addClass(e,"_md-show")})}}function O(){var e=[];t.forEach([h,C],function(t){t.parent()&&t.hasClass("_md-show")&&e.push(s.removeClass(t,"_md-show"))}),c.all(e).then(function(){d.visible||h.detach()})}function I(){d.visible&&(v(),P())}function P(){function e(e){var t={left:e.left,top:e.top};return t.left=Math.min(t.left,A.prop("scrollWidth")-r.width-f),t.left=Math.max(t.left,f),t.top=Math.min(t.top,A.prop("scrollHeight")-r.height-f),t.top=Math.max(t.top,f),t}function t(e){return"left"===e?{left:n.left-r.width-f,top:n.top+n.height/2-r.height/2}:"right"===e?{left:n.left+n.width+f,top:n.top+n.height/2-r.height/2}:"top"===e?{left:n.left+n.width/2-r.width/2,top:n.top-r.height-f}:{left:n.left+n.width/2-r.width/2,top:n.top+n.height+f}}var r=o.offsetRect(h,A),n=o.offsetRect(R,A),i=t(d.direction),a=h.prop("offsetParent");d.direction?i=e(i):a&&i.top>a.scrollHeight-r.height-f&&(i=e(t("top"))),h.css({left:i.left+"px",top:i.top+"px"})}a(h);var R=o.getParentWithPointerEvents(h),C=t.element(h[0].querySelector("._md-content")),A=t.element(document.body),j=null,k=n.throttle(function(){I()});s.pin&&s.pin(h,R),g(),_(),w(),v(),b(),S()}var p=0,f=8;return{restrict:"E",transclude:!0,priority:210,template:'<div class="_md-content _md" ng-transclude></div>',scope:{delay:"=?mdDelay",visible:"=?mdVisible",autohide:"=?mdAutohide",direction:"@?mdDirection"},compile:function(e,t){return t.mdDirection||t.$set("mdDirection","bottom"),d}}}function n(){function r(e){o[e.type]&&o[e.type].forEach(function(t){t.call(this,e)},this)}function n(t,n,i){var s=o[t]=o[t]||[];s.length||(i?e.addEventListener(t,r,!0):a.on(t,r)),s.indexOf(n)===-1&&s.push(n)}function i(t,n,i){var s=o[t],c=s?s.indexOf(n):-1;c>-1&&(s.splice(c,1),0===s.length&&(i?e.removeEventListener(t,r,!0):a.off(t,r)))}var o={},a=t.element(e);return{register:n,deregister:i}}t.module("material.components.tooltip",["material.core"]).directive("mdTooltip",r).service("$$mdTooltipRegistry",n),r.$inject=["$timeout","$window","$$rAF","$document","$mdUtil","$mdTheming","$animate","$q","$interpolate","$$mdTooltipRegistry"]}(),function(){function e(){return{controller:n,template:r,compile:function(e,t){e.addClass("md-virtual-repeat-container").addClass(t.hasOwnProperty("mdOrientHorizontal")?"md-orient-horizontal":"md-orient-vertical")}}}function r(e){return'<div class="md-virtual-repeat-scroller"><div class="md-virtual-repeat-sizer"></div><div class="md-virtual-repeat-offsetter">'+e[0].innerHTML+"</div></div>"}function n(e,r,n,i,o,a,s,c){this.$rootScope=i,this.$scope=a,this.$element=s,this.$attrs=c,this.size=0,this.scrollSize=0,this.scrollOffset=0,this.horizontal=this.$attrs.hasOwnProperty("mdOrientHorizontal"),this.repeater=null,this.autoShrink=this.$attrs.hasOwnProperty("mdAutoShrink"),this.autoShrinkMin=parseInt(this.$attrs.mdAutoShrinkMin,10)||0,this.originalSize=null,this.offsetSize=parseInt(this.$attrs.mdOffsetSize,10)||0,this.oldElementSize=null,this.$attrs.mdTopIndex?(this.bindTopIndex=n(this.$attrs.mdTopIndex),this.topIndex=this.bindTopIndex(this.$scope),t.isDefined(this.topIndex)||(this.topIndex=0,this.bindTopIndex.assign(this.$scope,0)),this.$scope.$watch(this.bindTopIndex,t.bind(this,function(e){e!==this.topIndex&&this.scrollToIndex(e)}))):this.topIndex=0,this.scroller=s[0].getElementsByClassName("md-virtual-repeat-scroller")[0],this.sizer=this.scroller.getElementsByClassName("md-virtual-repeat-sizer")[0],this.offsetter=this.scroller.getElementsByClassName("md-virtual-repeat-offsetter")[0];var l=t.bind(this,this.updateSize);e(t.bind(this,function(){l();var e=r.debounce(l,10,null,!1),n=t.element(o);this.size||e(),n.on("resize",e),a.$on("$destroy",function(){n.off("resize",e)}),a.$emit("$md-resize-enable"),a.$on("$md-resize",l)}))}function i(e){return{controller:o,priority:1e3,require:["mdVirtualRepeat","^^mdVirtualRepeatContainer"],restrict:"A",terminal:!0,transclude:"element",compile:function(t,r){var n=r.mdVirtualRepeat,i=n.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)\s*$/),o=i[1],a=e(i[2]),s=r.mdExtraName&&e(r.mdExtraName);return function(e,t,r,n,i){n[0].link_(n[1],i,o,a,s)}}}}function o(e,r,n,i,o,a,s,c){this.$scope=e,this.$element=r,this.$attrs=n,this.$browser=i,this.$document=o,this.$rootScope=a,this.$$rAF=s,this.onDemand=c.parseAttributeBoolean(n.mdOnDemand),this.browserCheckUrlChange=i.$$checkUrlChange,this.newStartIndex=0,this.newEndIndex=0,this.newVisibleEnd=0,this.startIndex=0,this.endIndex=0,this.itemSize=e.$eval(n.mdItemSize)||null,this.isFirstRender=!0,this.isVirtualRepeatUpdating_=!1,this.itemsLength=0,this.unwatchItemSize_=t.noop,this.blocks={},this.pooledBlocks=[],e.$on("$destroy",t.bind(this,this.cleanupBlocks_))}function a(e){if(!t.isFunction(e.getItemAtIndex)||!t.isFunction(e.getLength))throw Error("When md-on-demand is enabled, the Object passed to md-virtual-repeat must implement functions getItemAtIndex() and getLength() ");this.model=e}t.module("material.components.virtualRepeat",["material.core","material.components.showHide"]).directive("mdVirtualRepeatContainer",e).directive("mdVirtualRepeat",i);var s=1533917,c=3;n.$inject=["$$rAF","$mdUtil","$parse","$rootScope","$window","$scope","$element","$attrs"],n.prototype.register=function(e){this.repeater=e,t.element(this.scroller).on("scroll wheel touchmove touchend",t.bind(this,this.handleScroll_))},n.prototype.isHorizontal=function(){return this.horizontal},n.prototype.getSize=function(){return this.size},n.prototype.setSize_=function(e){var t=this.getDimensionName_();this.size=e,this.$element[0].style[t]=e+"px"},n.prototype.unsetSize_=function(){this.$element[0].style[this.getDimensionName_()]=this.oldElementSize,this.oldElementSize=null},n.prototype.updateSize=function(){this.originalSize||(this.size=this.isHorizontal()?this.$element[0].clientWidth:this.$element[0].clientHeight,this.handleScroll_(),this.repeater&&this.repeater.containerUpdated())},n.prototype.getScrollSize=function(){return this.scrollSize},n.prototype.getDimensionName_=function(){return this.isHorizontal()?"width":"height"},n.prototype.sizeScroller_=function(e){var t=this.getDimensionName_(),r=this.isHorizontal()?"height":"width";if(this.sizer.innerHTML="",e<s)this.sizer.style[t]=e+"px";else{this.sizer.style[t]="auto",this.sizer.style[r]="auto";var n=Math.floor(e/s),i=document.createElement("div");i.style[t]="1533917px",i.style[r]="1px";for(var o=0;o<n;o++)this.sizer.appendChild(i.cloneNode(!1));i.style[t]=e-n*s+"px",this.sizer.appendChild(i)}},n.prototype.autoShrink_=function(e){var t=Math.max(e,this.autoShrinkMin*this.repeater.getItemSize());if(this.autoShrink&&t!==this.size){null===this.oldElementSize&&(this.oldElementSize=this.$element[0].style[this.getDimensionName_()]);var r=this.originalSize||this.size;if(!r||t<r)this.originalSize||(this.originalSize=this.size),this.setSize_(t);else if(null!==this.originalSize){this.unsetSize_();var n=this.originalSize;this.originalSize=null,n||this.updateSize(),this.setSize_(n||this.size)}this.repeater.containerUpdated()}},n.prototype.setScrollSize=function(e){var t=e+this.offsetSize;this.scrollSize!==t&&(this.sizeScroller_(t),this.autoShrink_(t),this.scrollSize=t)},n.prototype.getScrollOffset=function(){return this.scrollOffset},n.prototype.scrollTo=function(e){this.scroller[this.isHorizontal()?"scrollLeft":"scrollTop"]=e,this.handleScroll_()},n.prototype.scrollToIndex=function(e){var t=this.repeater.getItemSize(),r=this.repeater.itemsLength;e>r&&(e=r-1),this.scrollTo(t*e)},n.prototype.resetScroll=function(){this.scrollTo(0)},n.prototype.handleScroll_=function(){var e=t.element(document)[0],r="ltr"==this.$element[0].dir||"rtl"!=e.dir&&"rtl"!=e.body.dir;r||this.maxSize||(this.scroller.scrollLeft=this.scrollSize,this.maxSize=this.scroller.scrollLeft);var n=this.isHorizontal()?r?this.scroller.scrollLeft:this.maxSize-this.scroller.scrollLeft:this.scroller.scrollTop;if(!(n===this.scrollOffset||n>this.scrollSize-this.size)){var i=this.repeater.getItemSize();if(i){var o=Math.max(0,Math.floor(n/i)-c),a=(this.isHorizontal()?"translateX(":"translateY(")+(!this.isHorizontal()||r?o*i:-(o*i))+"px)";if(this.scrollOffset=n,this.offsetter.style.webkitTransform=a,this.offsetter.style.transform=a,this.bindTopIndex){var s=Math.floor(n/i);s!==this.topIndex&&s<this.repeater.getItemCount()&&(this.topIndex=s,this.bindTopIndex.assign(this.$scope,s),this.$rootScope.$$phase||this.$scope.$digest())}this.repeater.containerUpdated()}}},i.$inject=["$parse"],o.$inject=["$scope","$element","$attrs","$browser","$document","$rootScope","$$rAF","$mdUtil"],o.Block,o.prototype.link_=function(e,r,n,i,o){this.container=e,this.transclude=r,this.repeatName=n,this.rawRepeatListExpression=i,this.extraName=o,this.sized=!1,this.repeatListExpression=t.bind(this,this.repeatListExpression_),this.container.register(this)},o.prototype.cleanupBlocks_=function(){t.forEach(this.pooledBlocks,function(e){e.element.remove()})},o.prototype.readItemSize_=function(){if(!this.itemSize){this.items=this.repeatListExpression(this.$scope),this.parentNode=this.$element[0].parentNode;var e=this.getBlock_(0);e.element[0].parentNode||this.parentNode.appendChild(e.element[0]),this.itemSize=e.element[0][this.container.isHorizontal()?"offsetWidth":"offsetHeight"]||null,this.blocks[0]=e,this.poolBlock_(0),this.itemSize&&this.containerUpdated()}},o.prototype.repeatListExpression_=function(e){var t=this.rawRepeatListExpression(e);if(this.onDemand&&t){var r=new a(t);return r.$$includeIndexes(this.newStartIndex,this.newVisibleEnd),r}return t},o.prototype.containerUpdated=function(){return this.itemSize?(this.sized||(this.items=this.repeatListExpression(this.$scope)),this.sized||(this.unwatchItemSize_(),this.sized=!0,this.$scope.$watchCollection(this.repeatListExpression,t.bind(this,function(e,t){this.isVirtualRepeatUpdating_||this.virtualRepeatUpdate_(e,t)}))),this.updateIndexes_(),void((this.newStartIndex!==this.startIndex||this.newEndIndex!==this.endIndex||this.container.getScrollOffset()>this.container.getScrollSize())&&(this.items instanceof a&&this.items.$$includeIndexes(this.newStartIndex,this.newEndIndex),this.virtualRepeatUpdate_(this.items,this.items)))):(this.unwatchItemSize_&&this.unwatchItemSize_!==t.noop&&this.unwatchItemSize_(),this.unwatchItemSize_=this.$scope.$watchCollection(this.repeatListExpression,t.bind(this,function(e){e&&e.length&&this.$$rAF(t.bind(this,this.readItemSize_))})),void(this.$rootScope.$$phase||this.$scope.$digest()))},o.prototype.getItemSize=function(){return this.itemSize},o.prototype.getItemCount=function(){return this.itemsLength},o.prototype.virtualRepeatUpdate_=function(e,r){this.isVirtualRepeatUpdating_=!0;var n=e&&e.length||0,i=!1;if(this.items&&n<this.items.length&&0!==this.container.getScrollOffset())return this.items=e,void this.container.resetScroll();if(n!==this.itemsLength&&(i=!0,this.itemsLength=n),this.items=e,(e!==r||i)&&this.updateIndexes_(),this.parentNode=this.$element[0].parentNode,i&&this.container.setScrollSize(n*this.itemSize),this.isFirstRender){this.isFirstRender=!1;var o=this.$attrs.mdStartIndex?this.$scope.$eval(this.$attrs.mdStartIndex):this.container.topIndex;this.container.scrollToIndex(o)}Object.keys(this.blocks).forEach(function(e){var t=parseInt(e,10);(t<this.newStartIndex||t>=this.newEndIndex)&&this.poolBlock_(t)},this),this.$browser.$$checkUrlChange=t.noop;var a,s,c=[],l=[];for(a=this.newStartIndex;a<this.newEndIndex&&null==this.blocks[a];a++)s=this.getBlock_(a),this.updateBlock_(s,a),c.push(s);for(;null!=this.blocks[a];a++)this.updateBlock_(this.blocks[a],a);for(var u=a-1;a<this.newEndIndex;a++)s=this.getBlock_(a),this.updateBlock_(s,a),l.push(s);c.length&&this.parentNode.insertBefore(this.domFragmentFromBlocks_(c),this.$element[0].nextSibling),l.length&&this.parentNode.insertBefore(this.domFragmentFromBlocks_(l),this.blocks[u]&&this.blocks[u].element[0].nextSibling),this.$browser.$$checkUrlChange=this.browserCheckUrlChange,this.startIndex=this.newStartIndex,this.endIndex=this.newEndIndex,this.isVirtualRepeatUpdating_=!1},o.prototype.getBlock_=function(e){if(this.pooledBlocks.length)return this.pooledBlocks.pop();var r;return this.transclude(t.bind(this,function(t,n){r={element:t,new:!0,scope:n},this.updateScope_(n,e),this.parentNode.appendChild(t[0])})),r},o.prototype.updateBlock_=function(e,t){this.blocks[t]=e,(e.new||e.scope.$index!==t||e.scope[this.repeatName]!==this.items[t])&&(e.new=!1,this.updateScope_(e.scope,t),this.$rootScope.$$phase||e.scope.$digest())},o.prototype.updateScope_=function(e,t){e.$index=t,e[this.repeatName]=this.items&&this.items[t],this.extraName&&(e[this.extraName(this.$scope)]=this.items[t])},o.prototype.poolBlock_=function(e){this.pooledBlocks.push(this.blocks[e]),this.parentNode.removeChild(this.blocks[e].element[0]),delete this.blocks[e]},o.prototype.domFragmentFromBlocks_=function(e){var t=this.$document[0].createDocumentFragment();return e.forEach(function(e){t.appendChild(e.element[0])}),t},o.prototype.updateIndexes_=function(){var e=this.items?this.items.length:0,t=Math.ceil(this.container.getSize()/this.itemSize);this.newStartIndex=Math.max(0,Math.min(e-t,Math.floor(this.container.getScrollOffset()/this.itemSize))),this.newVisibleEnd=this.newStartIndex+t+c,this.newEndIndex=Math.min(e,this.newVisibleEnd),this.newStartIndex=Math.max(0,this.newStartIndex-c)},a.prototype.$$includeIndexes=function(e,t){for(var r=e;r<t;r++)this.hasOwnProperty(r)||(this[r]=this.model.getItemAtIndex(r));this.length=this.model.getLength()}}(),function(){function e(e){function t(t,a,s){var c="";s.$observe("mdWhiteframe",function(t){t=parseInt(t,10)||o,t!=r&&(t>i||t<n)&&(e.warn("md-whiteframe attribute value is invalid. It should be a number between "+n+" and "+i,a[0]),t=o);var l=t==r?"":"md-whiteframe-"+t+"dp";s.$updateClass(l,c),c=l})}var r=-1,n=1,i=24,o=4;return{link:t}}t.module("material.components.whiteframe",["material.core"]).directive("mdWhiteframe",e),e.$inject=["$log"]}(),function(){function e(e,n,s,c,l,u,d,p,f,h){function m(){s.initOptionalProperties(e,f,{searchText:null,selectedItem:null}),l(n),b(),s.nextTick(function(){_(),v(),y(),n.on("focus",y)})}function g(){function t(){var e=0,t=n.find("md-input-container");if(t.length){var r=t.find("input");e=t.prop("offsetHeight"),e-=r.prop("offsetTop"),e-=r.prop("offsetHeight"),e+=t.prop("offsetTop")}return e}function r(){var e=fe.scrollContainer.getBoundingClientRect(),t={};e.right>d.right-o&&(t.left=l.right-e.width+"px"),fe.$.scrollContainer.css(t)}if(!fe)return s.nextTick(g,!1,e);var c,l=fe.wrap.getBoundingClientRect(),u=fe.snap.getBoundingClientRect(),d=fe.root.getBoundingClientRect(),p=u.bottom-d.top,h=d.bottom-u.top,m=l.left-d.left,v=l.width,y=t();f.mdFloatingLabel&&(m+=a,v-=2*a),c={left:m+"px",minWidth:v+"px",maxWidth:Math.max(l.right-d.left,d.right-l.left)-o+"px"},p>h&&d.height-l.bottom-o<i?(c.top="auto",c.bottom=h+"px",c.maxHeight=Math.min(i,l.top-d.top-o)+"px"):(c.top=p-y+"px",c.bottom="auto",c.maxHeight=Math.min(i,d.bottom+s.scrollTop()-l.bottom-o)+"px"),fe.$.scrollContainer.css(c),s.nextTick(r,!1)}function v(){fe.$.root.length&&(l(fe.$.scrollContainer),fe.$.scrollContainer.detach(),fe.$.root.append(fe.$.scrollContainer),d.pin&&d.pin(fe.$.scrollContainer,p))}function y(){e.autofocus&&fe.input.focus()}function b(){var r=parseInt(e.delay,10)||0;f.$observe("disabled",function(e){ue.isDisabled=s.parseAttributeBoolean(e,!1)}),f.$observe("required",function(e){ue.isRequired=s.parseAttributeBoolean(e,!1)}),f.$observe("readonly",function(e){ue.isReadonly=s.parseAttributeBoolean(e,!1)}),e.$watch("searchText",r?s.debounce(M,r):M),e.$watch("selectedItem",C),t.element(u).on("resize",g),e.$on("$destroy",S)}function S(){if(ue.hidden||s.enableScrolling(),t.element(u).off("resize",g),fe){var e="ul scroller scrollContainer input".split(" ");t.forEach(e,function(e){fe.$[e].remove()})}}function _(){fe={main:n[0],scrollContainer:n[0].getElementsByClassName("md-virtual-repeat-container")[0],scroller:n[0].getElementsByClassName("md-virtual-repeat-scroller")[0],ul:n.find("ul")[0],input:n.find("input")[0],wrap:n.find("md-autocomplete-wrap")[0],root:document.body},fe.li=fe.ul.getElementsByTagName("li"),fe.snap=w(),fe.$=E(fe)}function w(){for(var e=n;e.length;e=e.parent())if(t.isDefined(e.attr("md-autocomplete-snap")))return e[0];return fe.wrap}function E(e){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=t.element(e[n]));return r}function T(r,n){!r&&n?(g(),fe&&s.nextTick(function(){s.disableScrollAround(fe.ul),Se=O(t.element(fe.wrap))},!1,e)):r&&!n&&s.nextTick(function(){s.enableScrolling(),Se&&(Se(),Se=null)},!1,e)}function O(e){function t(e){e.preventDefault()}return e.on("wheel",t),e.on("touchmove",t),function(){e.off("wheel",t),e.off("touchmove",t)}}function I(){me=!0}function P(){ve||fe.input.focus(),me=!1,ue.hidden=Y()}function R(){fe.input.focus()}function C(t,r){t&&N(t).then(function(n){e.searchText=n,k(t,r)}),t!==r&&A()}function A(){t.isFunction(e.itemChange)&&e.itemChange(q(e.selectedItem))}function j(){t.isFunction(e.textChange)&&e.textChange()}function k(e,t){ge.forEach(function(r){r(e,t)})}function D(e){ge.indexOf(e)==-1&&ge.push(e)}function $(e){var t=ge.indexOf(e);t!=-1&&ge.splice(t,1)}function M(t,r){ue.index=H(),t!==r&&N(e.selectedItem).then(function(n){t!==n&&(e.selectedItem=null,t!==r&&j(),X()?ce():(ue.matches=[],V(!1),re()))})}function x(){ve=!1,me||(ue.hidden=Y())}function F(e){e&&(me=!1,ve=!1),fe.input.blur()}function L(r){ve=!0,t.isString(e.searchText)||(e.searchText=""),ue.hidden=Y(),ue.hidden||ce()}function U(t){switch(t.keyCode){case c.KEY_CODE.DOWN_ARROW:if(ue.loading)return;t.stopPropagation(),t.preventDefault(),ue.index=Math.min(ue.index+1,ue.matches.length-1),ie(),re();break;case c.KEY_CODE.UP_ARROW:if(ue.loading)return;t.stopPropagation(),t.preventDefault(),ue.index=ue.index<0?ue.matches.length-1:Math.max(0,ue.index-1),ie(),re();break;case c.KEY_CODE.TAB:if(P(),ue.hidden||ue.loading||ue.index<0||ue.matches.length<1)return;Z(ue.index);break;case c.KEY_CODE.ENTER:if(ue.hidden||ue.loading||ue.index<0||ue.matches.length<1)return;if(W())return;t.stopPropagation(),t.preventDefault(),Z(ue.index);break;case c.KEY_CODE.ESCAPE:t.stopPropagation(),t.preventDefault(),e.searchText&&ee(),F(!0)}}function B(){return t.isNumber(e.minLength)?e.minLength:1}function N(t){function r(t){return t&&e.itemText?e.itemText(q(t)):null}return h.when(r(t)||t)}function q(e){if(!e)return r;var t={};return ue.itemName&&(t[ue.itemName]=e),t}function H(){return e.autoselect?0:-1}function V(e){ue.loading!=e&&(ue.loading=e),ue.hidden=Y()}function Y(){return!(!ue.loading||G())||(!!W()||(!ve||!z()))}function z(){return X()&&G()||se()}function G(){return!!ue.matches.length}function W(){return!!ue.scope.selectedItem}function Q(){return ue.loading&&!W()}function K(){return N(ue.matches[ue.index])}function X(){return(e.searchText||"").length>=B()}function J(e,t,r){Object.defineProperty(ue,e,{get:function(){return r},set:function(e){var n=r;r=e,t(e,n)}})}function Z(t){s.nextTick(function(){N(ue.matches[t]).then(function(e){var t=fe.$.input.controller("ngModel");t.$setViewValue(e),t.$render()}).finally(function(){e.selectedItem=ue.matches[t],V(!1)})},!1)}function ee(t){V(!0),ue.index=0,ue.matches=[],e.searchText="";var r=document.createEvent("CustomEvent");r.initCustomEvent("input",!0,!0,{value:""}),fe.input.dispatchEvent(r),fe.input.blur(),e.searchText="",fe.input.focus()}function te(r){function n(t){t&&(t=h.when(t),be++,V(!0),s.nextTick(function(){t.then(i).finally(function(){0===--be&&V(!1)})},!0,e))}function i(t){he[a]=t,(r||"")===(e.searchText||"")&&(ue.matches=t,ue.hidden=Y(),ue.loading&&V(!1),e.selectOnMatch&&le(),re(),g())}var o=e.$parent.$eval(pe),a=r.toLowerCase(),c=t.isArray(o),l=!!o.then;c?i(o):l&&n(o)}function re(){K().then(function(e){ue.messages=[ne(),e]})}function ne(){if(ye===ue.matches.length)return"";switch(ye=ue.matches.length,ue.matches.length){case 0:return"There are no matches available.";case 1:return"There is 1 match available.";default:return"There are "+ue.matches.length+" matches available."}}function ie(){if(fe.li[0]){var e=fe.li[0].offsetHeight,t=e*ue.index,r=t+e,n=fe.scroller.clientHeight,i=fe.scroller.scrollTop;t<i?ae(t):r>i+n&&ae(r-n)}}function oe(){return 0!==be}function ae(e){fe.$.scrollContainer.controller("mdVirtualRepeatContainer").scrollTo(e)}function se(){var e=(ue.scope.searchText||"").length;return ue.hasNotFound&&!G()&&(!ue.loading||oe())&&e>=B()&&(ve||me)&&!W()}function ce(){var t=e.searchText||"",r=t.toLowerCase();!e.noCache&&he[r]?(ue.matches=he[r],re(),V(!1)):te(t),ue.hidden=Y()}function le(){var t=e.searchText,r=ue.matches,n=r[0];1===r.length&&N(n).then(function(r){var n=t==r;e.matchInsensitive&&!n&&(n=t.toLowerCase()==r.toLowerCase()),n&&Z(0)})}var ue=this,de=e.itemsExpr.split(/ in /i),pe=de[1],fe=null,he={},me=!1,ge=[],ve=!1,ye=0,be=0,Se=null;return J("hidden",T,!0),ue.scope=e,ue.parent=e.$parent,ue.itemName=de[0],ue.matches=[],ue.loading=!1,ue.hidden=!0,ue.index=null,ue.messages=[],ue.id=s.nextUid(),ue.isDisabled=null,ue.isRequired=null,ue.isReadonly=null,ue.hasNotFound=!1,ue.keydown=U,ue.blur=x,ue.focus=L,ue.clear=ee,ue.select=Z,ue.listEnter=I,ue.listLeave=P,ue.mouseUp=R,ue.getCurrentDisplayValue=K,ue.registerSelectedItemWatcher=D,ue.unregisterSelectedItemWatcher=$,ue.notFoundVisible=se,ue.loadingIsVisible=Q,m()}t.module("material.components.autocomplete").controller("MdAutocompleteCtrl",e);var n=41,i=5.5*n,o=8,a=2;e.$inject=["$scope","$element","$mdUtil","$mdConstant","$mdTheming","$window","$animate","$rootElement","$attrs","$q"]}(),function(){function e(e){return{controller:"MdAutocompleteCtrl",controllerAs:"$mdAutocompleteCtrl",scope:{inputName:"@mdInputName",inputMinlength:"@mdInputMinlength",inputMaxlength:"@mdInputMaxlength",searchText:"=?mdSearchText",selectedItem:"=?mdSelectedItem",itemsExpr:"@mdItems",itemText:"&mdItemText",placeholder:"@placeholder",noCache:"=?mdNoCache",selectOnMatch:"=?mdSelectOnMatch",matchInsensitive:"=?mdMatchCaseInsensitive",itemChange:"&?mdSelectedItemChange",textChange:"&?mdSearchTextChange",minLength:"=?mdMinLength",delay:"=?mdDelay",autofocus:"=?mdAutofocus",floatingLabel:"@?mdFloatingLabel",autoselect:"=?mdAutoselect",menuClass:"@?mdMenuClass",inputId:"@?mdInputId"},link:function(e,t,r,n){n.hasNotFound=!!t.attr("md-has-not-found")},template:function(t,r){function n(){var e=t.find("md-item-template").detach(),r=e.length?e.html():t.html();return e.length||t.empty(),"<md-autocomplete-parent-scope md-autocomplete-replace>"+r+"</md-autocomplete-parent-scope>"}function i(){var e=t.find("md-not-found").detach(),r=e.length?e.html():"";return r?'<li ng-if="$mdAutocompleteCtrl.notFoundVisible()"                         md-autocomplete-parent-scope>'+r+"</li>":""}function o(){return r.mdFloatingLabel?'            <md-input-container flex ng-if="floatingLabel">              <label>{{floatingLabel}}</label>              <input type="search"                  '+(null!=l?'tabindex="'+l+'"':"")+'                  id="{{ inputId || \'fl-input-\' + $mdAutocompleteCtrl.id }}"                  name="{{inputName}}"                  autocomplete="off"                  ng-required="$mdAutocompleteCtrl.isRequired"                  ng-readonly="$mdAutocompleteCtrl.isReadonly"                  ng-minlength="inputMinlength"                  ng-maxlength="inputMaxlength"                  ng-disabled="$mdAutocompleteCtrl.isDisabled"                  ng-model="$mdAutocompleteCtrl.scope.searchText"                  ng-keydown="$mdAutocompleteCtrl.keydown($event)"                  ng-blur="$mdAutocompleteCtrl.blur()"                  '+(null!=r.mdNoAsterisk?'md-no-asterisk="'+r.mdNoAsterisk+'"':"")+'                  ng-focus="$mdAutocompleteCtrl.focus($event)"                  aria-owns="ul-{{$mdAutocompleteCtrl.id}}"                  '+(null!=r.mdSelectOnFocus?'md-select-on-focus=""':"")+'                  aria-label="{{floatingLabel}}"                  aria-autocomplete="list"                  role="combobox"                  aria-haspopup="true"                  aria-activedescendant=""                  aria-expanded="{{!$mdAutocompleteCtrl.hidden}}"/>              <div md-autocomplete-parent-scope md-autocomplete-replace>'+c+"</div>            </md-input-container>":'            <input flex type="search"                '+(null!=l?'tabindex="'+l+'"':"")+'                id="{{ inputId || \'input-\' + $mdAutocompleteCtrl.id }}"                name="{{inputName}}"                ng-if="!floatingLabel"                autocomplete="off"                ng-required="$mdAutocompleteCtrl.isRequired"                ng-disabled="$mdAutocompleteCtrl.isDisabled"                ng-readonly="$mdAutocompleteCtrl.isReadonly"                ng-model="$mdAutocompleteCtrl.scope.searchText"                ng-keydown="$mdAutocompleteCtrl.keydown($event)"                ng-blur="$mdAutocompleteCtrl.blur()"                ng-focus="$mdAutocompleteCtrl.focus($event)"                placeholder="{{placeholder}}"                aria-owns="ul-{{$mdAutocompleteCtrl.id}}"                '+(null!=r.mdSelectOnFocus?'md-select-on-focus=""':"")+'                aria-label="{{placeholder}}"                aria-autocomplete="list"                role="combobox"                aria-haspopup="true"                aria-activedescendant=""                aria-expanded="{{!$mdAutocompleteCtrl.hidden}}"/>            <button                type="button"                tabindex="-1"                ng-if="$mdAutocompleteCtrl.scope.searchText && !$mdAutocompleteCtrl.isDisabled"                ng-click="$mdAutocompleteCtrl.clear($event)">              <md-icon md-svg-src="'+e.mdClose+'"></md-icon>              <span class="_md-visually-hidden">Clear</span>            </button>                ';
}var a=i(),s=n(),c=t.html(),l=r.tabindex;return a&&t.attr("md-has-not-found",!0),t.attr("tabindex","-1"),"        <md-autocomplete-wrap            layout=\"row\"            ng-class=\"{ 'md-whiteframe-z1': !floatingLabel, 'md-menu-showing': !$mdAutocompleteCtrl.hidden }\">          "+o()+'          <md-progress-linear              class="'+(r.mdFloatingLabel?"md-inline":"")+'"              ng-if="$mdAutocompleteCtrl.loadingIsVisible()"              md-mode="indeterminate"></md-progress-linear>          <md-virtual-repeat-container              md-auto-shrink              md-auto-shrink-min="1"              ng-mouseenter="$mdAutocompleteCtrl.listEnter()"              ng-mouseleave="$mdAutocompleteCtrl.listLeave()"              ng-mouseup="$mdAutocompleteCtrl.mouseUp()"              ng-hide="$mdAutocompleteCtrl.hidden"              class="md-autocomplete-suggestions-container md-whiteframe-z1"              ng-class="{ \'md-not-found\': $mdAutocompleteCtrl.notFoundVisible() }"              role="presentation">            <ul class="md-autocomplete-suggestions"                ng-class="::menuClass"                id="ul-{{$mdAutocompleteCtrl.id}}">              <li md-virtual-repeat="item in $mdAutocompleteCtrl.matches"                  ng-class="{ selected: $index === $mdAutocompleteCtrl.index }"                  ng-click="$mdAutocompleteCtrl.select($index)"                  md-extra-name="$mdAutocompleteCtrl.itemName">                  '+s+"                  </li>"+a+'            </ul>          </md-virtual-repeat-container>        </md-autocomplete-wrap>        <aria-status            class="_md-visually-hidden"            role="status"            aria-live="assertive">          <p ng-repeat="message in $mdAutocompleteCtrl.messages track by $index" ng-if="message">{{message}}</p>        </aria-status>'}}}t.module("material.components.autocomplete").directive("mdAutocomplete",e),e.$inject=["$$mdSvgRegistry"]}(),function(){function e(e,t){function r(e,r,n){return function(e,r,i){function o(r,n){c[n]=e[r],e.$watch(r,function(e){t.nextTick(function(){c[n]=e})})}function a(){var t=!1,r=!1;e.$watch(function(){r||t||(t=!0,e.$$postDigest(function(){r||c.$digest(),t=r=!1}))}),c.$watch(function(){r=!0})}var s=e.$mdAutocompleteCtrl,c=s.parent.$new(),l=s.itemName;o("$index","$index"),o("item",l),a(),n(c,function(e){r.after(e)})}}return{restrict:"AE",compile:r,terminal:!0,transclude:"element"}}t.module("material.components.autocomplete").directive("mdAutocompleteParentScope",e),e.$inject=["$compile","$mdUtil"]}(),function(){function e(e,r,n){function i(i,o){var s=null,c=null,l=n.mdHighlightFlags||"",u=e.$watch(function(e){return{term:i(e),unsafeText:o(e)}},function(e,n){null!==s&&e.unsafeText===n.unsafeText||(s=t.element("<div>").text(e.unsafeText).html()),null!==c&&e.term===n.term||(c=a(e.term,l)),r.html(s.replace(c,'<span class="highlight">$&</span>'))},!0);r.on("$destroy",u)}function o(e){return e&&e.replace(/[\\\^\$\*\+\?\.\(\)\|\{}\[\]]/g,"\\$&")}function a(e,t){var r="",n="";return t.indexOf("^")>=0&&(r="^"),t.indexOf("$")>=0&&(n="$"),new RegExp(r+o(e)+n,t.replace(/[\$\^]/g,""))}this.init=i}t.module("material.components.autocomplete").controller("MdHighlightCtrl",e),e.$inject=["$scope","$element","$attrs"]}(),function(){function e(e,t){return{terminal:!0,controller:"MdHighlightCtrl",compile:function(r,n){var i=t(n.mdHighlightText),o=e(r.html());return function(e,t,r,n){n.init(i,o)}}}}t.module("material.components.autocomplete").directive("mdHighlightText",e),e.$inject=["$interpolate","$parse"]}(),function(){function n(e,t,n,i,o){this.$scope=e,this.$element=t,this.$mdConstant=n,this.$timeout=i,this.$mdUtil=o,this.isEditting=!1,this.parentController=r,this.enableChipEdit=!1}t.module("material.components.chips").controller("MdChipCtrl",n),n.$inject=["$scope","$element","$mdConstant","$timeout","$mdUtil"],n.prototype.init=function(e){this.parentController=e,this.enableChipEdit=this.parentController.enableChipEdit,this.enableChipEdit&&(this.$element.on("keydown",this.chipKeyDown.bind(this)),this.$element.on("mousedown",this.chipMouseDown.bind(this)),this.getChipContent().addClass("_md-chip-content-edit-is-enabled"))},n.prototype.getChipContent=function(){var e=this.$element[0].getElementsByClassName("_md-chip-content");return t.element(e[0])},n.prototype.getContentElement=function(){return t.element(this.getChipContent().children()[0])},n.prototype.getChipIndex=function(){return parseInt(this.$element.attr("index"))},n.prototype.goOutOfEditMode=function(){if(this.isEditting){this.isEditting=!1,this.$element.removeClass("_md-chip-editing"),this.getChipContent()[0].contentEditable="false";var e=this.getChipIndex(),t=this.getContentElement().text();t?(this.parentController.updateChipContents(e,this.getContentElement().text()),this.$mdUtil.nextTick(function(){this.parentController.selectedChip===e&&this.parentController.focusChip(e)}.bind(this))):this.parentController.removeChipAndFocusInput(e)}},n.prototype.selectNodeContents=function(t){var r,n;document.body.createTextRange?(r=document.body.createTextRange(),r.moveToElementText(t),r.select()):e.getSelection&&(n=e.getSelection(),r=document.createRange(),r.selectNodeContents(t),n.removeAllRanges(),n.addRange(r))},n.prototype.goInEditMode=function(){this.isEditting=!0,this.$element.addClass("_md-chip-editing"),this.getChipContent()[0].contentEditable="true",this.getChipContent().on("blur",function(){this.goOutOfEditMode()}.bind(this)),this.selectNodeContents(this.getChipContent()[0])},n.prototype.chipKeyDown=function(e){this.isEditting||e.keyCode!==this.$mdConstant.KEY_CODE.ENTER&&e.keyCode!==this.$mdConstant.KEY_CODE.SPACE?this.isEditting&&e.keyCode===this.$mdConstant.KEY_CODE.ENTER&&(e.preventDefault(),this.goOutOfEditMode()):(e.preventDefault(),this.goInEditMode())},n.prototype.chipMouseDown=function(){this.getChipIndex()==this.parentController.selectedChip&&this.enableChipEdit&&!this.isEditting&&this.goInEditMode()}}(),function(){function e(e,n){function i(r,i){return r.append(n.processTemplate(o)),function(r,n,i,o){var a=o.shift(),s=o.shift();e(n),a&&(s.init(a),t.element(n[0].querySelector("._md-chip-content")).on("blur",function(){a.resetSelectedChip(),a.$scope.$applyAsync()}))}}var o=n.processTemplate(r);return{restrict:"E",require:["^?mdChips","mdChip"],compile:i,controller:"MdChipCtrl"}}t.module("material.components.chips").directive("mdChip",e);var r='    <span ng-if="!$mdChipsCtrl.readonly" class="_md-visually-hidden">      {{$mdChipsCtrl.deleteHint}}    </span>';e.$inject=["$mdTheming","$mdUtil"]}(),function(){function e(e){function t(t,r,n,i){r.on("click",function(e){t.$apply(function(){i.removeChip(t.$$replacedScope.$index)})}),e(function(){r.attr({tabindex:-1,"aria-hidden":!0}),r.find("button").attr("tabindex","-1")})}return{restrict:"A",require:"^mdChips",scope:!1,link:t}}t.module("material.components.chips").directive("mdChipRemove",e),e.$inject=["$timeout"]}(),function(){function e(e){function t(t,r,n){var i=t.$parent.$mdChipsCtrl,o=i.parent.$new(!1,i.parent);o.$$replacedScope=t,o.$chip=t.$chip,o.$index=t.$index,o.$mdChipsCtrl=i;var a=i.$scope.$eval(n.mdChipTransclude);r.html(a),e(r.contents())(o)}return{restrict:"EA",terminal:!0,link:t,scope:!1}}t.module("material.components.chips").directive("mdChipTransclude",e),e.$inject=["$compile"]}(),function(){function e(e,t,r,n,i,o){this.$timeout=i,this.$mdConstant=t,this.$scope=e,this.parent=e.$parent,this.$log=r,this.$element=n,this.ngModelCtrl=null,this.userInputNgModelCtrl=null,this.userInputElement=null,this.items=[],this.selectedChip=-1,this.hasAutocomplete=!1,this.enableChipEdit=o.parseAttributeBoolean(this.mdEnableChipEdit),this.deleteHint="Press delete to remove this chip.",this.deleteButtonLabel="Remove",this.chipBuffer="",this.useTransformChip=!1,this.useOnAdd=!1,this.useOnRemove=!1,this.useOnSelect=!1}t.module("material.components.chips").controller("MdChipsCtrl",e),e.$inject=["$scope","$mdConstant","$log","$element","$timeout","$mdUtil"],e.prototype.inputKeydown=function(e){var t=this.getChipBuffer();if(!(this.hasAutocomplete&&e.isDefaultPrevented&&e.isDefaultPrevented())){if(e.keyCode===this.$mdConstant.KEY_CODE.BACKSPACE){if(t)return;return e.preventDefault(),e.stopPropagation(),void(this.items.length&&this.selectAndFocusChipSafe(this.items.length-1))}if((!this.separatorKeys||this.separatorKeys.length<1)&&(this.separatorKeys=[this.$mdConstant.KEY_CODE.ENTER]),this.separatorKeys.indexOf(e.keyCode)!==-1){if(this.hasAutocomplete&&this.requireMatch||!t)return;if(e.preventDefault(),this.hasMaxChipsReached())return;this.appendChip(t.trim()),this.resetChipBuffer()}}},e.prototype.updateChipContents=function(e,t){e>=0&&e<this.items.length&&(this.items[e]=t,this.ngModelCtrl.$setDirty())},e.prototype.isEditingChip=function(){return!!this.$element[0].querySelector("._md-chip-editing")},e.prototype.chipKeydown=function(e){if(!this.getChipBuffer()&&!this.isEditingChip())switch(e.keyCode){case this.$mdConstant.KEY_CODE.BACKSPACE:case this.$mdConstant.KEY_CODE.DELETE:if(this.selectedChip<0)return;e.preventDefault(),this.removeAndSelectAdjacentChip(this.selectedChip);break;case this.$mdConstant.KEY_CODE.LEFT_ARROW:e.preventDefault(),this.selectedChip<0&&(this.selectedChip=this.items.length),this.items.length&&this.selectAndFocusChipSafe(this.selectedChip-1);break;case this.$mdConstant.KEY_CODE.RIGHT_ARROW:e.preventDefault(),this.selectAndFocusChipSafe(this.selectedChip+1);break;case this.$mdConstant.KEY_CODE.ESCAPE:case this.$mdConstant.KEY_CODE.TAB:if(this.selectedChip<0)return;e.preventDefault(),this.onFocus()}},e.prototype.getPlaceholder=function(){var e=this.items&&this.items.length&&(""==this.secondaryPlaceholder||this.secondaryPlaceholder);return e?this.secondaryPlaceholder:this.placeholder},e.prototype.removeAndSelectAdjacentChip=function(e){var r=this.getAdjacentChipIndex(e);this.removeChip(e),this.$timeout(t.bind(this,function(){this.selectAndFocusChipSafe(r)}))},e.prototype.resetSelectedChip=function(){this.selectedChip=-1},e.prototype.getAdjacentChipIndex=function(e){var t=this.items.length-1;return 0==t?-1:e==t?e-1:e},e.prototype.appendChip=function(e){if(this.useTransformChip&&this.transformChip){var r=this.transformChip({$chip:e});t.isDefined(r)&&(e=r)}if(t.isObject(e)){var n=this.items.some(function(r){return t.equals(e,r)});if(n)return}if(!(null==e||this.items.indexOf(e)+1)){var i=this.items.push(e);this.ngModelCtrl.$setDirty(),this.validateModel(),this.useOnAdd&&this.onAdd&&this.onAdd({$chip:e,$index:i})}},e.prototype.useTransformChipExpression=function(){this.useTransformChip=!0},e.prototype.useOnAddExpression=function(){this.useOnAdd=!0},e.prototype.useOnRemoveExpression=function(){this.useOnRemove=!0},e.prototype.useOnSelectExpression=function(){this.useOnSelect=!0},e.prototype.getChipBuffer=function(){return this.userInputElement?this.userInputNgModelCtrl?this.userInputNgModelCtrl.$viewValue:this.userInputElement[0].value:this.chipBuffer},e.prototype.resetChipBuffer=function(){this.userInputElement?this.userInputNgModelCtrl?(this.userInputNgModelCtrl.$setViewValue(""),this.userInputNgModelCtrl.$render()):this.userInputElement[0].value="":this.chipBuffer=""},e.prototype.hasMaxChipsReached=function(){return t.isString(this.maxChips)&&(this.maxChips=parseInt(this.maxChips,10)||0),this.maxChips>0&&this.items.length>=this.maxChips},e.prototype.validateModel=function(){this.ngModelCtrl.$setValidity("md-max-chips",!this.hasMaxChipsReached())},e.prototype.removeChip=function(e){var t=this.items.splice(e,1);this.ngModelCtrl.$setDirty(),this.validateModel(),t&&t.length&&this.useOnRemove&&this.onRemove&&this.onRemove({$chip:t[0],$index:e})},e.prototype.removeChipAndFocusInput=function(e){this.removeChip(e),this.onFocus()},e.prototype.selectAndFocusChipSafe=function(e){return this.items.length?e===this.items.length?this.onFocus():(e=Math.max(e,0),e=Math.min(e,this.items.length-1),this.selectChip(e),void this.focusChip(e)):(this.selectChip(-1),void this.onFocus())},e.prototype.selectChip=function(e){e>=-1&&e<=this.items.length?(this.selectedChip=e,this.useOnSelect&&this.onSelect&&this.onSelect({$chip:this.items[this.selectedChip]})):this.$log.warn("Selected Chip index out of bounds; ignoring.")},e.prototype.selectAndFocusChip=function(e){this.selectChip(e),e!=-1&&this.focusChip(e)},e.prototype.focusChip=function(e){this.$element[0].querySelector('md-chip[index="'+e+'"] ._md-chip-content').focus()},e.prototype.configureNgModel=function(e){this.ngModelCtrl=e;var t=this;e.$render=function(){t.items=t.ngModelCtrl.$viewValue}},e.prototype.onFocus=function(){var e=this.$element[0].querySelector("input");e&&e.focus(),this.resetSelectedChip()},e.prototype.onInputFocus=function(){this.inputHasFocus=!0,this.resetSelectedChip()},e.prototype.onInputBlur=function(){this.inputHasFocus=!1},e.prototype.configureUserInput=function(e){this.userInputElement=e;var r=e.controller("ngModel");r!=this.ngModelCtrl&&(this.userInputNgModelCtrl=r);var n=this.$scope,i=this,o=function(e,r){n.$evalAsync(t.bind(i,r,e))};e.attr({tabindex:0}).on("keydown",function(e){o(e,i.inputKeydown)}).on("focus",function(e){o(e,i.onInputFocus)}).on("blur",function(e){o(e,i.onInputBlur)})},e.prototype.configureAutocomplete=function(e){e&&(this.hasAutocomplete=!0,e.registerSelectedItemWatcher(t.bind(this,function(e){if(e){if(this.hasMaxChipsReached())return;this.appendChip(e),this.resetChipBuffer()}})),this.$element.find("input").on("focus",t.bind(this,this.onInputFocus)).on("blur",t.bind(this,this.onInputBlur)))},e.prototype.hasFocus=function(){return this.inputHasFocus||this.selectedChip>=0}}(),function(){function e(e,t,a,s,c,l){function u(r,n){function i(e){if(n.ngModel){var t=o[0].querySelector(e);return t&&t.outerHTML}}var o=n.$mdUserTemplate;n.$mdUserTemplate=null;var u=i("md-chips>md-chip-template"),d=t.prefixer().buildList("md-chip-remove").map(function(e){return"md-chips>*["+e+"]"}).join(","),f=i(d)||p.remove,h=u||p.default,m=i("md-chips>md-autocomplete")||i("md-chips>input")||p.input,g=o.find("md-chip");return o[0].querySelector("md-chip-template>*[md-chip-remove]")&&s.warn("invalid placement of md-chip-remove within md-chip-template."),function(r,i,o,s){t.initOptionalProperties(r,n),e(i);var d=s[0];if(u&&(d.enableChipEdit=!1),d.chipContentsTemplate=h,d.chipRemoveTemplate=f,d.chipInputTemplate=m,d.mdCloseIcon=l.mdClose,i.attr({"aria-hidden":!0,tabindex:-1}).on("focus",function(){d.onFocus()}),n.ngModel&&(d.configureNgModel(i.controller("ngModel")),o.mdTransformChip&&d.useTransformChipExpression(),o.mdOnAppend&&d.useOnAppendExpression(),o.mdOnAdd&&d.useOnAddExpression(),o.mdOnRemove&&d.useOnRemoveExpression(),o.mdOnSelect&&d.useOnSelectExpression(),m!=p.input&&r.$watch("$mdChipsCtrl.readonly",function(e){e||t.nextTick(function(){0===m.indexOf("<md-autocomplete")&&d.configureAutocomplete(i.find("md-autocomplete").controller("mdAutocomplete")),d.configureUserInput(i.find("input"))})}),t.nextTick(function(){var e=i.find("input");e&&e.toggleClass("md-input",!0)})),g.length>0){var v=a(g.clone())(r.$parent);c(function(){i.find("md-chips-wrap").prepend(v)})}}}function d(){return{chips:t.processTemplate(r),input:t.processTemplate(n),default:t.processTemplate(i),remove:t.processTemplate(o)}}var p=d();return{template:function(e,t){return t.$mdUserTemplate=e.clone(),p.chips},require:["mdChips"],restrict:"E",controller:"MdChipsCtrl",controllerAs:"$mdChipsCtrl",bindToController:!0,compile:u,scope:{readonly:"=readonly",placeholder:"@",mdEnableChipEdit:"@",secondaryPlaceholder:"@",maxChips:"@mdMaxChips",transformChip:"&mdTransformChip",onAppend:"&mdOnAppend",onAdd:"&mdOnAdd",onRemove:"&mdOnRemove",onSelect:"&mdOnSelect",deleteHint:"@",deleteButtonLabel:"@",separatorKeys:"=?mdSeparatorKeys",requireMatch:"=?mdRequireMatch"}}}t.module("material.components.chips").directive("mdChips",e);var r='      <md-chips-wrap          ng-keydown="$mdChipsCtrl.chipKeydown($event)"          ng-class="{ \'md-focused\': $mdChipsCtrl.hasFocus(), \'md-readonly\': !$mdChipsCtrl.ngModelCtrl || $mdChipsCtrl.readonly}"          class="md-chips">        <md-chip ng-repeat="$chip in $mdChipsCtrl.items"            index="{{$index}}"            ng-class="{\'md-focused\': $mdChipsCtrl.selectedChip == $index, \'md-readonly\': !$mdChipsCtrl.ngModelCtrl || $mdChipsCtrl.readonly}">          <div class="_md-chip-content"              tabindex="-1"              aria-hidden="true"              ng-click="!$mdChipsCtrl.readonly && $mdChipsCtrl.focusChip($index)"              ng-focus="!$mdChipsCtrl.readonly && $mdChipsCtrl.selectChip($index)"              md-chip-transclude="$mdChipsCtrl.chipContentsTemplate"></div>          <div ng-if="!$mdChipsCtrl.readonly"               class="_md-chip-remove-container"               md-chip-transclude="$mdChipsCtrl.chipRemoveTemplate"></div>        </md-chip>        <div class="_md-chip-input-container">          <div ng-if="!$mdChipsCtrl.readonly && $mdChipsCtrl.ngModelCtrl"               md-chip-transclude="$mdChipsCtrl.chipInputTemplate"></div>        </div>      </md-chips-wrap>',n='        <input            class="md-input"            tabindex="0"            placeholder="{{$mdChipsCtrl.getPlaceholder()}}"            aria-label="{{$mdChipsCtrl.getPlaceholder()}}"            ng-model="$mdChipsCtrl.chipBuffer"            ng-focus="$mdChipsCtrl.onInputFocus()"            ng-blur="$mdChipsCtrl.onInputBlur()"            ng-trim="false"            ng-keydown="$mdChipsCtrl.inputKeydown($event)">',i="      <span>{{$chip}}</span>",o='      <button          class="_md-chip-remove"          ng-if="!$mdChipsCtrl.readonly"          ng-click="$mdChipsCtrl.removeChipAndFocusInput($$replacedScope.$index)"          type="button"          aria-hidden="true"          tabindex="-1">        <md-icon md-svg-src="{{ $mdChipsCtrl.mdCloseIcon }}"></md-icon>        <span class="_md-visually-hidden">          {{$mdChipsCtrl.deleteButtonLabel}}        </span>      </button>';e.$inject=["$mdTheming","$mdUtil","$compile","$log","$timeout","$$mdSvgRegistry"]}(),function(){function e(){this.selectedItem=null,this.searchText=""}t.module("material.components.chips").controller("MdContactChipsCtrl",e),e.prototype.queryContact=function(e){var r=this.contactQuery({$query:e});return this.filterSelected?r.filter(t.bind(this,this.filterSelectedContacts)):r},e.prototype.itemName=function(e){return e[this.contactName]},e.prototype.filterSelectedContacts=function(e){return this.contacts.indexOf(e)==-1}}(),function(){function e(e,t){function n(r,n){return function(r,i,o,a){t.initOptionalProperties(r,n),e(i),i.attr("tabindex","-1")}}return{template:function(e,t){return r},restrict:"E",controller:"MdContactChipsCtrl",controllerAs:"$mdContactChipsCtrl",bindToController:!0,compile:n,scope:{contactQuery:"&mdContacts",placeholder:"@",secondaryPlaceholder:"@",contactName:"@mdContactName",contactImage:"@mdContactImage",contactEmail:"@mdContactEmail",contacts:"=ngModel",requireMatch:"=?mdRequireMatch",highlightFlags:"@?mdHighlightFlags"}}}t.module("material.components.chips").directive("mdContactChips",e);var r='      <md-chips class="md-contact-chips"          ng-model="$mdContactChipsCtrl.contacts"          md-require-match="$mdContactChipsCtrl.requireMatch"          md-autocomplete-snap>          <md-autocomplete              md-menu-class="md-contact-chips-suggestions"              md-selected-item="$mdContactChipsCtrl.selectedItem"              md-search-text="$mdContactChipsCtrl.searchText"              md-items="item in $mdContactChipsCtrl.queryContact($mdContactChipsCtrl.searchText)"              md-item-text="$mdContactChipsCtrl.itemName(item)"              md-no-cache="true"              md-autoselect              placeholder="{{$mdContactChipsCtrl.contacts.length == 0 ?                  $mdContactChipsCtrl.placeholder : $mdContactChipsCtrl.secondaryPlaceholder}}">            <div class="md-contact-suggestion">              <img                   ng-src="{{item[$mdContactChipsCtrl.contactImage]}}"                  alt="{{item[$mdContactChipsCtrl.contactName]}}"                  ng-if="item[$mdContactChipsCtrl.contactImage]" />              <span class="md-contact-name" md-highlight-text="$mdContactChipsCtrl.searchText"                    md-highlight-flags="{{$mdContactChipsCtrl.highlightFlags}}">                {{item[$mdContactChipsCtrl.contactName]}}              </span>              <span class="md-contact-email" >{{item[$mdContactChipsCtrl.contactEmail]}}</span>            </div>          </md-autocomplete>          <md-chip-template>            <div class="md-contact-avatar">              <img                   ng-src="{{$chip[$mdContactChipsCtrl.contactImage]}}"                  alt="{{$chip[$mdContactChipsCtrl.contactName]}}"                  ng-if="$chip[$mdContactChipsCtrl.contactImage]" />            </div>            <div class="md-contact-name">              {{$chip[$mdContactChipsCtrl.contactName]}}            </div>          </md-chip-template>      </md-chips>';e.$inject=["$mdTheming","$mdUtil"]}(),function(){function e(e,t,r,n){function i(i,a,s){function c(){var e=a.parent();return!(!e.attr("aria-label")&&!e.text())||!(!e.parent().attr("aria-label")&&!e.parent().text())}function l(){s.mdSvgIcon||s.mdSvgSrc||(s.mdFontIcon&&a.addClass("md-font "+s.mdFontIcon),a.addClass(e.fontSet(s.mdFontSet)))}t(a),l();var u=a[0].getAttribute(s.$attr.mdSvgSrc),d=s.alt||s.mdFontIcon||s.mdSvgIcon||a.text(),p=s.$normalize(s.$attr.mdSvgIcon||s.$attr.mdSvgSrc||"");s["aria-label"]||(""===d||c()?a.text()||r.expect(a,"aria-hidden","true"):(r.expect(a,"aria-label",d),r.expect(a,"role","img"))),p&&s.$observe(p,function(t){o(t)||t!==u||(t=n.trustAsUrl(t)),a.empty(),t&&e(t).then(function(e){a.empty(),a.append(e)})})}function o(e){var t=/^data:image\/svg\+xml[\s*;\w\-\=]*?(base64)?,(.*)$/i;return t.test(e)}return{restrict:"E",link:i}}t.module("material.components.icon").directive("mdIcon",["$mdIcon","$mdTheming","$mdAria","$sce",e])}(),function(){function r(){}function n(e,t){this.url=e,this.viewBoxSize=t||o.defaultViewBoxSize}function i(r,n,i,o,a,s){function c(e){if(e=e||"",t.isString(e)||(e=s.getTrustedUrl(e)),b[e])return i.when(u(b[e]));if(_.test(e)||w.test(e))return h(e).then(d(e));e.indexOf(":")==-1&&(e="$default:"+e);var n=r[e]?p:f;return n(e).then(d(e))}function l(e){var n=t.isUndefined(e)||!(e&&e.length);if(n)return r.defaultFontSet;var i=e;return t.forEach(r.fontSets,function(t){t.alias==e&&(i=t.fontSet||i)}),i}function u(e){var r=e.clone(),n="_cache"+a.nextUid();return r.id&&(r.id+=n),t.forEach(r.querySelectorAll("[id]"),function(e){e.id+=n}),r}function d(e){return function(t){return b[e]=m(t)?t:new g(t,r[e]),b[e].clone()}}function p(e){var t=r[e];return h(t.url).then(function(e){return new g(e,t)})}function f(e){function t(t){var r=e.slice(e.lastIndexOf(":")+1),i=t.querySelector("#"+r);return i?new g(i,s):n(e)}function n(e){var t="icon "+e+" not found";return o.warn(t),i.reject(t||e)}var a=e.substring(0,e.lastIndexOf(":"))||"$default",s=r[a];return s?h(s.url).then(t):n(e)}function h(r){function a(r){var n=w.exec(r),o=/base64/i.test(r),a=o?e.atob(n[2]):n[2];return i.when(t.element(a)[0])}function s(e){return i(function(r,i){var a=function(e){var r=t.isString(e)?e:e.message||e.data||e.statusText;o.warn(r),i(e)},s=function(n){S[e]||(S[e]=t.element("<div>").append(n)[0].querySelector("svg")),r(S[e])};n(e,!0).then(s,a)})}return w.test(r)?a(r):s(r)}function m(e){return t.isDefined(e.element)&&t.isDefined(e.config)}function g(e,r){e&&"svg"!=e.tagName&&(e=t.element('<svg xmlns="http://www.w3.org/2000/svg">').append(e.cloneNode(!0))[0]),e.getAttribute("xmlns")||e.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.element=e,this.config=r,this.prepare()}function v(){var e=this.config?this.config.viewBoxSize:r.defaultViewBoxSize;t.forEach({fit:"",height:"100%",width:"100%",preserveAspectRatio:"xMidYMid meet",viewBox:this.element.getAttribute("viewBox")||"0 0 "+e+" "+e,focusable:!1},function(e,t){this.element.setAttribute(t,e)},this)}function y(){return this.element.cloneNode(!0)}var b={},S={},_=/[-\w@:%\+.~#?&\/\/=]{2,}\.[a-z]{2,4}\b(\/[-\w@:%\+.~#?&\/\/=]*)?/i,w=/^data:image\/svg\+xml[\s*;\w\-\=]*?(base64)?,(.*)$/i;return g.prototype={clone:y,prepare:v},c.fontSet=l,c}t.module("material.components.icon").constant("$$mdSvgRegistry",{mdTabsArrow:"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxnPjxwb2x5Z29uIHBvaW50cz0iMTUuNCw3LjQgMTQsNiA4LDEyIDE0LDE4IDE1LjQsMTYuNiAxMC44LDEyICIvPjwvZz48L3N2Zz4=",mdClose:"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxnPjxwYXRoIGQ9Ik0xOSA2LjQxbC0xLjQxLTEuNDEtNS41OSA1LjU5LTUuNTktNS41OS0xLjQxIDEuNDEgNS41OSA1LjU5LTUuNTkgNS41OSAxLjQxIDEuNDEgNS41OS01LjU5IDUuNTkgNS41OSAxLjQxLTEuNDEtNS41OS01LjU5eiIvPjwvZz48L3N2Zz4=",mdCancel:"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxnPjxwYXRoIGQ9Ik0xMiAyYy01LjUzIDAtMTAgNC40Ny0xMCAxMHM0LjQ3IDEwIDEwIDEwIDEwLTQuNDcgMTAtMTAtNC40Ny0xMC0xMC0xMHptNSAxMy41OWwtMS40MSAxLjQxLTMuNTktMy41OS0zLjU5IDMuNTktMS40MS0xLjQxIDMuNTktMy41OS0zLjU5LTMuNTkgMS40MS0xLjQxIDMuNTkgMy41OSAzLjU5LTMuNTkgMS40MSAxLjQxLTMuNTkgMy41OSAzLjU5IDMuNTl6Ii8+PC9nPjwvc3ZnPg==",mdMenu:"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGQ9Ik0zLDZIMjFWOEgzVjZNMywxMUgyMVYxM0gzVjExTTMsMTZIMjFWMThIM1YxNloiIC8+PC9zdmc+",mdToggleArrow:"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNDggNDgiPjxwYXRoIGQ9Ik0yNCAxNmwtMTIgMTIgMi44MyAyLjgzIDkuMTctOS4xNyA5LjE3IDkuMTcgMi44My0yLjgzeiIvPjxwYXRoIGQ9Ik0wIDBoNDh2NDhoLTQ4eiIgZmlsbD0ibm9uZSIvPjwvc3ZnPg==",mdCalendar:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTkgM2gtMVYxaC0ydjJIOFYxSDZ2Mkg1Yy0xLjExIDAtMS45OS45LTEuOTkgMkwzIDE5YzAgMS4xLjg5IDIgMiAyaDE0YzEuMSAwIDItLjkgMi0yVjVjMC0xLjEtLjktMi0yLTJ6bTAgMTZINVY4aDE0djExek03IDEwaDV2NUg3eiIvPjwvc3ZnPg=="}).provider("$mdIcon",r);var o={defaultViewBoxSize:24,defaultFontSet:"material-icons",fontSets:[]};r.prototype={icon:function(e,t,r){return e.indexOf(":")==-1&&(e="$default:"+e),o[e]=new n(t,r),this},iconSet:function(e,t,r){return o[e]=new n(t,r),this},defaultIconSet:function(e,t){var r="$default";return o[r]||(o[r]=new n(e,t)),o[r].viewBoxSize=t||o.defaultViewBoxSize,this},defaultViewBoxSize:function(e){return o.defaultViewBoxSize=e,this},fontSet:function(e,t){return o.fontSets.push({alias:e,fontSet:t||e}),this},defaultFontSet:function(e){return o.defaultFontSet=e?e:"",this},defaultIconSize:function(e){return o.defaultIconSize=e,this},$get:["$templateRequest","$q","$log","$templateCache","$mdUtil","$sce",function(e,t,r,n,a,s){return i(o,e,t,r,a,s)}]},i.$inject=["config","$templateRequest","$q","$log","$mdUtil","$sce"]}(),function(){function e(e,r,i,o,a,s,c,l){this.$element=i,this.$attrs=o,this.$mdConstant=a,this.$mdUtil=c,this.$document=s,this.$scope=e,this.$rootScope=r,this.$timeout=l;var u=this;t.forEach(n,function(e){u[e]=t.bind(u,u[e])})}t.module("material.components.menuBar").controller("MenuBarController",e);var n=["handleKeyDown","handleMenuHover","scheduleOpenHoveredMenu","cancelScheduledOpen"];e.$inject=["$scope","$rootScope","$element","$attrs","$mdConstant","$document","$mdUtil","$timeout"],e.prototype.init=function(){var e=this.$element,t=this.$mdUtil,n=this.$scope,i=this,o=[];e.on("keydown",this.handleKeyDown),this.parentToolbar=t.getClosest(e,"MD-TOOLBAR"),o.push(this.$rootScope.$on("$mdMenuOpen",function(t,r){i.getMenus().indexOf(r[0])!=-1&&(e[0].classList.add("_md-open"),r[0].classList.add("_md-open"),i.currentlyOpenMenu=r.controller("mdMenu"),i.currentlyOpenMenu.registerContainerProxy(i.handleKeyDown),i.enableOpenOnHover())})),o.push(this.$rootScope.$on("$mdMenuClose",function(n,o,a){var s=i.getMenus();if(s.indexOf(o[0])!=-1&&(e[0].classList.remove("_md-open"),o[0].classList.remove("_md-open")),e[0].contains(o[0])){for(var c=o[0];c&&s.indexOf(c)==-1;)c=t.getClosest(c,"MD-MENU",!0);c&&(a.skipFocus||c.querySelector("button:not([disabled])").focus(),i.currentlyOpenMenu=r,i.disableOpenOnHover(),i.setKeyboardMode(!0))}})),n.$on("$destroy",function(){for(;o.length;)o.shift()()}),this.setKeyboardMode(!0)},e.prototype.setKeyboardMode=function(e){e?this.$element[0].classList.add("_md-keyboard-mode"):this.$element[0].classList.remove("_md-keyboard-mode")},e.prototype.enableOpenOnHover=function(){if(!this.openOnHoverEnabled){this.openOnHoverEnabled=!0;var e;(e=this.parentToolbar)&&(e.dataset.mdRestoreStyle=e.getAttribute("style"),e.style.position="relative",e.style.zIndex=100),t.element(this.getMenus()).on("mouseenter",this.handleMenuHover)}},e.prototype.handleMenuHover=function(e){this.setKeyboardMode(!1),this.openOnHoverEnabled&&this.scheduleOpenHoveredMenu(e)},e.prototype.disableOpenOnHover=function(){if(this.openOnHoverEnabled){this.openOnHoverEnabled=!1;var e;(e=this.parentToolbar)&&(e.style.cssText=e.dataset.mdRestoreStyle||""),t.element(this.getMenus()).off("mouseenter",this.handleMenuHover)}},e.prototype.scheduleOpenHoveredMenu=function(e){var r=t.element(e.currentTarget),n=r.controller("mdMenu");this.setKeyboardMode(!1),this.scheduleOpenMenu(n)},e.prototype.scheduleOpenMenu=function(e){var t=this,n=this.$timeout;e!=t.currentlyOpenMenu&&(n.cancel(t.pendingMenuOpen),t.pendingMenuOpen=n(function(){t.pendingMenuOpen=r,t.currentlyOpenMenu&&t.currentlyOpenMenu.close(!0,{closeAll:!0}),e.open()},200,!1))},e.prototype.handleKeyDown=function(e){var r=this.$mdConstant.KEY_CODE,n=this.currentlyOpenMenu,i=n&&n.isOpen;this.setKeyboardMode(!0);var o,a,s;switch(e.keyCode){case r.DOWN_ARROW:n?n.focusMenuContainer():this.openFocusedMenu(),o=!0;break;case r.UP_ARROW:n&&n.close(),o=!0;break;case r.LEFT_ARROW:a=this.focusMenu(-1),i&&(s=t.element(a).controller("mdMenu"),this.scheduleOpenMenu(s)),o=!0;break;case r.RIGHT_ARROW:a=this.focusMenu(1),i&&(s=t.element(a).controller("mdMenu"),this.scheduleOpenMenu(s)),o=!0}o&&(e&&e.preventDefault&&e.preventDefault(),e&&e.stopImmediatePropagation&&e.stopImmediatePropagation())},e.prototype.focusMenu=function(e){var t=this.getMenus(),r=this.getFocusedMenuIndex();r==-1&&(r=this.getOpenMenuIndex());var n=!1;if(r==-1?(r=0,n=!0):(e<0&&r>0||e>0&&r<t.length-e)&&(r+=e,n=!0),n)return t[r].querySelector("button").focus(),t[r]},e.prototype.openFocusedMenu=function(){var e=this.getFocusedMenu();e&&t.element(e).controller("mdMenu").open()},e.prototype.getMenus=function(){var e=this.$element;return this.$mdUtil.nodesToArray(e[0].children).filter(function(e){return"MD-MENU"==e.nodeName})},e.prototype.getFocusedMenu=function(){return this.getMenus()[this.getFocusedMenuIndex()]},e.prototype.getFocusedMenuIndex=function(){var e=this.$mdUtil,t=e.getClosest(this.$document[0].activeElement,"MD-MENU");if(!t)return-1;var r=this.getMenus().indexOf(t);return r},e.prototype.getOpenMenuIndex=function(){for(var e=this.getMenus(),t=0;t<e.length;++t)if(e[t].classList.contains("_md-open"))return t;return-1}}(),function(){function e(e,r){return{restrict:"E",require:"mdMenuBar",controller:"MenuBarController",compile:function(n,i){return i.ariaRole||n[0].setAttribute("role","menubar"),t.forEach(n[0].children,function(r){if("MD-MENU"==r.nodeName){r.hasAttribute("md-position-mode")||(r.setAttribute("md-position-mode","left bottom"),r.querySelector("button,a").setAttribute("role","menuitem"));var n=e.nodesToArray(r.querySelectorAll("md-menu-content"));t.forEach(n,function(e){e.classList.add("_md-menu-bar-menu"),e.classList.add("md-dense"),e.hasAttribute("width")||e.setAttribute("width",5)})}}),function(e,t,n,i){t.addClass("_md"),r(e,t),i.init()}}}}t.module("material.components.menuBar").directive("mdMenuBar",e),e.$inject=["$mdUtil","$mdTheming"]}(),function(){function e(){return{restrict:"E",compile:function(e,t){t.role||e[0].setAttribute("role","separator")}}}t.module("material.components.menuBar").directive("mdMenuDivider",e)}(),function(){
function e(e,t,r){this.$element=t,this.$attrs=r,this.$scope=e}t.module("material.components.menuBar").controller("MenuItemController",e),e.$inject=["$scope","$element","$attrs"],e.prototype.init=function(e){var t=this.$element,r=this.$attrs;this.ngModel=e,"checkbox"!=r.type&&"radio"!=r.type||(this.mode=r.type,this.iconEl=t[0].children[0],this.buttonEl=t[0].children[1],e&&this.initClickListeners())},e.prototype.clearNgAria=function(){var e=this.$element[0],r=["role","tabindex","aria-invalid","aria-checked"];t.forEach(r,function(t){e.removeAttribute(t)})},e.prototype.initClickListeners=function(){function e(){if("radio"==s){var e=a.ngValue?o.$eval(a.ngValue):a.value;return i.$modelValue==e}return i.$modelValue}function r(e){e?l.off("click",u):l.on("click",u)}var n=this,i=this.ngModel,o=this.$scope,a=this.$attrs,s=(this.$element,this.mode);this.handleClick=t.bind(this,this.handleClick);var c=this.iconEl,l=t.element(this.buttonEl),u=this.handleClick;a.$observe("disabled",r),r(a.disabled),i.$render=function(){n.clearNgAria(),e()?(c.style.display="",l.attr("aria-checked","true")):(c.style.display="none",l.attr("aria-checked","false"))},o.$$postDigest(i.$render)},e.prototype.handleClick=function(e){var t,r=this.mode,n=this.ngModel,i=this.$attrs;"checkbox"==r?t=!n.$modelValue:"radio"==r&&(t=i.ngValue?this.$scope.$eval(i.ngValue):i.value),n.$setViewValue(t),n.$render()}}(),function(){function e(e){return{require:["mdMenuItem","?ngModel"],priority:210,compile:function(r,n){function i(e,n,i){i=i||r,i instanceof t.element&&(i=i[0]),i.hasAttribute(e)||i.setAttribute(e,n)}function o(e){if(r[0].hasAttribute(e)){var t=r[0].getAttribute(e);c[0].setAttribute(e,t),r[0].removeAttribute(e)}}function a(){return!!e.getClosest(r,"md-menu-bar",!0)}if(!a()||"checkbox"!=n.type&&"radio"!=n.type)i("role","menuitem",r[0].querySelector("md-button, button, a"));else{var s=r[0].textContent,c=t.element('<md-button type="button"></md-button>');c.html(s),c.attr("tabindex","0"),r.html(""),r.append(t.element('<md-icon md-svg-icon="check"></md-icon>')),r.append(c),r[0].classList.add("md-indent"),i("role","checkbox"==n.type?"menuitemcheckbox":"menuitemradio",c),t.forEach(["ng-disabled"],o)}return function(e,t,r,n){var i=n[0],o=n[1];i.init(o)}},controller:"MenuItemController"}}t.module("material.components.menuBar").directive("mdMenuItem",e),e.$inject=["$mdUtil"]}(),function(){function e(e,n,i,o,a,s,c,l){var u,d,p=a.prefixer(),f=this;this.nestLevel=parseInt(n.mdNestLevel,10)||0,this.init=function(r,n){n=n||{},u=r,d=i[0].querySelector(p.buildSelector(["ng-click","ng-mouseenter"])),d.setAttribute("aria-expanded","false"),this.isInMenuBar=n.isInMenuBar,this.nestedMenus=a.nodesToArray(u[0].querySelectorAll(".md-nested-menu")),u.on("$mdInterimElementRemove",function(){f.isOpen=!1,a.nextTick(function(){f.onIsOpenChanged(f.isOpen)})}),a.nextTick(function(){f.onIsOpenChanged(f.isOpen)});var s="menu_container_"+a.nextUid();u.attr("id",s),t.element(d).attr({"aria-owns":s,"aria-haspopup":"true"}),o.$on("$destroy",this.disableHoverListener),u.on("$destroy",function(){e.destroy()})};var h,m,g=[];this.enableHoverListener=function(){g.push(c.$on("$mdMenuOpen",function(e,t){u[0].contains(t[0])&&(f.currentlyOpenMenu=t.controller("mdMenu"),f.isAlreadyOpening=!1,f.currentlyOpenMenu.registerContainerProxy(f.triggerContainerProxy.bind(f)))})),g.push(c.$on("$mdMenuClose",function(e,t){u[0].contains(t[0])&&(f.currentlyOpenMenu=r)})),m=t.element(a.nodesToArray(u[0].children[0].children)),m.on("mouseenter",f.handleMenuItemHover),m.on("mouseleave",f.handleMenuItemMouseLeave)},this.disableHoverListener=function(){for(;g.length;)g.shift()();m&&m.off("mouseenter",f.handleMenuItemHover),m&&m.off("mouseleave",f.handleMenuItemMouseLeave)},this.handleMenuItemHover=function(e){if(!f.isAlreadyOpening){var r=e.target.querySelector("md-menu")||a.getClosest(e.target,"MD-MENU");h=s(function(){if(r&&(r=t.element(r).controller("mdMenu")),f.currentlyOpenMenu&&f.currentlyOpenMenu!=r){var e=f.nestLevel+1;f.currentlyOpenMenu.close(!0,{closeTo:e}),f.isAlreadyOpening=!!r,r&&r.open()}else r&&!r.isOpen&&r.open&&(f.isAlreadyOpening=!!r,r&&r.open())},r?100:250);var n=e.currentTarget.querySelector(".md-button:not([disabled])");n&&n.focus()}},this.handleMenuItemMouseLeave=function(){h&&(s.cancel(h),h=r)},this.open=function(t){t&&t.stopPropagation(),t&&t.preventDefault(),f.isOpen||(f.enableHoverListener(),f.isOpen=!0,a.nextTick(function(){f.onIsOpenChanged(f.isOpen)}),d=d||(t?t.target:i[0]),d.setAttribute("aria-expanded","true"),o.$emit("$mdMenuOpen",i),e.show({scope:o,mdMenuCtrl:f,nestLevel:f.nestLevel,element:u,target:d,preserveElement:!0,parent:"body"}).finally(function(){d.setAttribute("aria-expanded","false"),f.disableHoverListener()}))},o.$mdOpenMenu=this.open,this.onIsOpenChanged=function(e){e?(u.attr("aria-hidden","false"),i[0].classList.add("_md-open"),t.forEach(f.nestedMenus,function(e){e.classList.remove("_md-open")})):(u.attr("aria-hidden","true"),i[0].classList.remove("_md-open")),o.$mdMenuIsOpen=f.isOpen},this.focusMenuContainer=function(){var e=u[0].querySelector(p.buildSelector(["md-menu-focus-target","md-autofocus"]));e||(e=u[0].querySelector(".md-button")),e.focus()},this.registerContainerProxy=function(e){this.containerProxy=e},this.triggerContainerProxy=function(e){this.containerProxy&&this.containerProxy(e)},this.destroy=function(){return f.isOpen?e.destroy():l.when(!1)},this.close=function(r,n){if(f.isOpen){f.isOpen=!1,a.nextTick(function(){f.onIsOpenChanged(f.isOpen)});var s=t.extend({},n,{skipFocus:r});if(o.$emit("$mdMenuClose",i,s),e.hide(null,n),!r){var c=f.restoreFocusTo||i.find("button")[0];c instanceof t.element&&(c=c[0]),c&&c.focus()}}},this.positionMode=function(){var e=(n.mdPositionMode||"target").split(" ");return 1==e.length&&e.push(e[0]),{left:e[0],top:e[1]}},this.offsets=function(){var e=(n.mdOffset||"0 0").split(" ").map(parseFloat);if(2==e.length)return{left:e[0],top:e[1]};if(1==e.length)return{top:e[0],left:e[0]};throw Error("Invalid offsets specified. Please follow format <x, y> or <n>")}}t.module("material.components.menu").controller("mdMenuCtrl",e),e.$inject=["$mdMenu","$attrs","$element","$scope","$mdUtil","$timeout","$rootScope","$q"]}(),function(){function e(e){function n(r){r.addClass("md-menu");var n=r.children()[0],a=e.prefixer();if(a.hasAttribute(n,"ng-click")||(n=n.querySelector(a.buildSelector(["ng-click","ng-mouseenter"]))||n),!n||"MD-BUTTON"!=n.nodeName&&"BUTTON"!=n.nodeName||n.hasAttribute("type")||n.setAttribute("type","button"),2!=r.children().length)throw Error(o+"Expected two children elements.");n&&n.setAttribute("aria-haspopup","true");var s=r[0].querySelectorAll("md-menu"),c=parseInt(r[0].getAttribute("md-nest-level"),10)||0;return s&&t.forEach(e.nodesToArray(s),function(e){e.hasAttribute("md-position-mode")||e.setAttribute("md-position-mode","cascade"),e.classList.add("_md-nested-menu"),e.setAttribute("md-nest-level",c+1)}),i}function i(e,n,i,o){var a=o[0],s=o[1]!=r,c=t.element('<div class="_md _md-open-menu-container md-whiteframe-z2"></div>'),l=n.children()[1];n.addClass("_md"),l.hasAttribute("role")||l.setAttribute("role","menu"),c.append(l),n.on("$destroy",function(){c.remove()}),n.append(c),c[0].style.display="none",a.init(c,{isInMenuBar:s})}var o="Invalid HTML for md-menu: ";return{restrict:"E",require:["mdMenu","?^mdMenuBar"],controller:"mdMenuCtrl",scope:!0,compile:n}}t.module("material.components.menu").directive("mdMenu",e),e.$inject=["$mdUtil"]}(),function(){function e(e){function n(e,n,a,s,c,l,u,d,p){function f(r,n,i){return i.nestLevel?t.noop:(i.disableParentScroll&&!e.getClosest(i.target,"MD-DIALOG")?i.restoreScroll=e.disableScrollAround(i.element,i.parent):i.disableParentScroll=!1,i.hasBackdrop&&(i.backdrop=e.createBackdrop(r,"_md-menu-backdrop _md-click-catcher"),p.enter(i.backdrop,s[0].body)),function(){i.backdrop&&i.backdrop.remove(),i.disableParentScroll&&i.restoreScroll()})}function h(e,t,r){function n(){return d(t,{addClass:"_md-leave"}).start()}function i(){t.removeClass("_md-active"),y(t,r),r.alreadyOpen=!1}return r.cleanupInteraction(),r.cleanupResizing(),r.hideBackdrop(),r.$destroy===!0?i():n().then(i)}function m(r,i,o){function s(){return o.parent.append(i),i[0].style.display="",l(function(e){var t=b(i,o);i.removeClass("_md-leave"),d(i,{addClass:"_md-active",from:_.toCss(t),to:_.toCss({transform:""})}).start().then(e)})}function p(){if(!o.target)throw Error("$mdMenu.show() expected a target to animate from in options.target");t.extend(o,{alreadyOpen:!1,isRemoved:!1,target:t.element(o.target),parent:t.element(o.parent),menuContentEl:t.element(i[0].querySelector("md-menu-content"))})}function h(){var e=function(e,t){return u.throttle(function(){if(!o.isRemoved){var r=b(e,t);e.css(_.toCss(r))}})}(i,o);return c.addEventListener("resize",e),c.addEventListener("orientationchange",e),function(){c.removeEventListener("resize",e),c.removeEventListener("orientationchange",e)}}function m(){function t(t){var r;switch(t.keyCode){case a.KEY_CODE.ESCAPE:o.mdMenuCtrl.close(!1,{closeAll:!0}),r=!0;break;case a.KEY_CODE.UP_ARROW:g(t,o.menuContentEl,o,-1)||o.nestLevel||o.mdMenuCtrl.triggerContainerProxy(t),r=!0;break;case a.KEY_CODE.DOWN_ARROW:g(t,o.menuContentEl,o,1)||o.nestLevel||o.mdMenuCtrl.triggerContainerProxy(t),r=!0;break;case a.KEY_CODE.LEFT_ARROW:o.nestLevel?o.mdMenuCtrl.close():o.mdMenuCtrl.triggerContainerProxy(t),r=!0;break;case a.KEY_CODE.RIGHT_ARROW:var n=e.getClosest(t.target,"MD-MENU");n&&n!=o.parent[0]?t.target.click():o.mdMenuCtrl.triggerContainerProxy(t),r=!0}r&&(t.preventDefault(),t.stopImmediatePropagation())}function n(e){e.preventDefault(),e.stopPropagation(),r.$apply(function(){o.mdMenuCtrl.close(!0,{closeAll:!0})})}function s(t){function n(){r.$apply(function(){o.mdMenuCtrl.close(!0,{closeAll:!0})})}function i(e,t){if(!e)return!1;for(var r,n=0;r=t[n];++n)if(S.hasAttribute(e,r))return!0;return!1}var a=t.target;do{if(a==o.menuContentEl[0])return;if((i(a,["ng-click","ng-href","ui-sref"])||"BUTTON"==a.nodeName||"MD-BUTTON"==a.nodeName)&&!i(a,["md-prevent-menu-close"])){var s=e.getClosest(a,"MD-MENU");a.hasAttribute("disabled")||s&&s!=o.parent[0]||n();break}}while(a=a.parentNode)}i.addClass("_md-clickable"),o.backdrop&&o.backdrop.on("click",n),o.menuContentEl.on("keydown",t),o.menuContentEl[0].addEventListener("click",s,!0);var c=o.menuContentEl[0].querySelector(S.buildSelector(["md-menu-focus-target","md-autofocus"]));if(!c){var l=o.menuContentEl[0].firstElementChild;c=l&&(l.querySelector(".md-button:not([disabled])")||l.firstElementChild)}return c&&c.focus(),function(){i.removeClass("_md-clickable"),o.backdrop&&o.backdrop.off("click",n),o.menuContentEl.off("keydown",t),o.menuContentEl[0].removeEventListener("click",s,!0)}}return p(o),n.inherit(o.menuContentEl,o.target),o.cleanupResizing=h(),o.hideBackdrop=f(r,i,o),s().then(function(e){return o.alreadyOpen=!0,o.cleanupInteraction=m(),e})}function g(t,r,n,i){for(var o,a=e.getClosest(t.target,"MD-MENU-ITEM"),s=e.nodesToArray(r[0].children),c=s.indexOf(a),l=c+i;l>=0&&l<s.length;l+=i){var u=s[l].querySelector(".md-button");if(o=v(u))break}return o}function v(e){if(e&&e.getAttribute("tabindex")!=-1)return e.focus(),s[0].activeElement==e}function y(e,t){t.preserveElement?i(e).style.display="none":i(e).parentNode===i(t.parent)&&i(t.parent).removeChild(i(e))}function b(t,n){function i(e){e.top=Math.max(Math.min(e.top,y.bottom-u.offsetHeight),y.top),e.left=Math.max(Math.min(e.left,y.right-u.offsetWidth),y.left)}function a(){for(var e=0;e<d.children.length;++e)if("none"!=c.getComputedStyle(d.children[e]).display)return d.children[e]}var l,u=t[0],d=t[0].firstElementChild,p=d.getBoundingClientRect(),f=s[0].body,h=f.getBoundingClientRect(),m=c.getComputedStyle(d),g=n.target[0].querySelector(S.buildSelector("md-menu-origin"))||n.target[0],v=g.getBoundingClientRect(),y={left:h.left+o,top:Math.max(h.top,0)+o,bottom:Math.max(h.bottom,Math.max(h.top,0)+h.height)-o,right:h.right-o},b={top:0,left:0,right:0,bottom:0},_={top:0,left:0,right:0,bottom:0},w=n.mdMenuCtrl.positionMode();"target"!=w.top&&"target"!=w.left&&"target-right"!=w.left||(l=a(),l&&(l=l.firstElementChild||l,l=l.querySelector(S.buildSelector("md-menu-align-target"))||l,b=l.getBoundingClientRect(),_={top:parseFloat(u.style.top||0),left:parseFloat(u.style.left||0)}));var E={},T="top ";switch(w.top){case"target":E.top=_.top+v.top-b.top;break;case"cascade":E.top=v.top-parseFloat(m.paddingTop)-g.style.top;break;case"bottom":E.top=v.top+v.height;break;default:throw new Error('Invalid target mode "'+w.top+'" specified for md-menu on Y axis.')}var O="rtl"==e.bidi();switch(w.left){case"target":E.left=_.left+v.left-b.left,T+=O?"right":"left";break;case"target-left":E.left=v.left,T+="left";break;case"target-right":E.left=v.right-p.width+(p.right-b.right),T+="right";break;case"cascade":var I=O?v.left-p.width<y.left:v.right+p.width<y.right;E.left=I?v.right-g.style.left:v.left-g.style.left-p.width,T+=I?"left":"right";break;case"left":O?(E.left=v.right-p.width,T+="right"):(E.left=v.left,T+="left");break;default:throw new Error('Invalid target mode "'+w.left+'" specified for md-menu on X axis.')}var P=n.mdMenuCtrl.offsets();E.top+=P.top,E.left+=P.left,i(E);var R=Math.round(100*Math.min(v.width/u.offsetWidth,1))/100,C=Math.round(100*Math.min(v.height/u.offsetHeight,1))/100;return{top:Math.round(E.top),left:Math.round(E.left),transform:n.alreadyOpen?r:e.supplant("scale({0},{1})",[R,C]),transformOrigin:T}}var S=e.prefixer(),_=e.dom.animator;return{parent:"body",onShow:m,onRemove:h,hasBackdrop:!0,disableParentScroll:!0,skipCompile:!0,preserveScope:!0,skipHide:!0,themable:!0}}function i(e){return e instanceof t.element&&(e=e[0]),e}var o=8;return n.$inject=["$mdUtil","$mdTheming","$mdConstant","$document","$window","$q","$$rAF","$animateCss","$animate"],e("$mdMenu").setDefaults({methods:["target"],options:n})}t.module("material.components.menu").provider("$mdMenu",e),e.$inject=["$$interimElementProvider"]}(),function(){function e(e,r,n,i,o,a){function s(a,s,l){function m(t,n,o,s,l){var u=++j,h=i.now(),m=n-t,g=d(a.mdDiameter),v=g-p(g),y=o||r.easeFn,b=s||r.duration;n===t?P.attr("d",c(n,g,v,l)):E=f(function r(n){var o=e.Math.max(0,e.Math.min((n||i.now())-h,b));P.attr("d",c(y(o,t,m,b),g,v,l)),u===j&&o<b&&(E=f(r))})}function S(){m(R,C,r.easeFnIndeterminate,r.durationIndeterminate,A),A=(A+C)%100;var e=R;R=-C,C=-e}function _(){T||(T=o(S,r.durationIndeterminate+50,0,!1),S(),s.addClass(b).removeAttr("aria-valuenow"))}function w(){T&&(o.cancel(T),T=null,s.removeClass(b))}var E,T,O=s[0],I=t.element(O.querySelector("svg")),P=t.element(O.querySelector("path")),R=r.startIndeterminate,C=r.endIndeterminate,A=0,j=0;n(s),s.toggleClass(y,l.hasOwnProperty("disabled")),a.mdMode===v&&_(),a.$on("$destroy",function(){w(),E&&h(E)}),a.$watchGroup(["value","mdMode",function(){var e=O.disabled;return e===!0||e===!1?e:t.isDefined(s.attr("disabled"))}],function(e,t){var r=e[1],n=e[2],i=t[2];if(n!==i&&s.toggleClass(y,!!n),n)w();else if(r!==g&&r!==v&&(r=v,l.$set("mdMode",r)),r===v)_();else{var o=u(e[0]);w(),s.attr("aria-valuenow",o),m(u(t[0]),o)}}),a.$watch("mdDiameter",function(e){var t=d(e),r=p(t),n=t/2+"px",i={width:t+"px",height:t+"px"};I[0].setAttribute("viewBox","0 0 "+t+" "+t),I.css(i).css("transform-origin",n+" "+n+" "+n),s.css(i),P.css("stroke-width",r+"px")})}function c(e,t,r,n){var i,o=3.5999,a=n||0,s=t/2,c=r/2,u=a*o,d=e*o,p=l(s,c,u),f=l(s,c,d+u),h=d<0?0:1;return i=d<0?d>=-180?0:1:d<=180?0:1,"M"+p+"A"+c+","+c+" 0 "+i+","+h+" "+f}function l(t,r,n){var i=(n-90)*m;return t+r*e.Math.cos(i)+","+(t+r*e.Math.sin(i))}function u(t){return e.Math.max(0,e.Math.min(t||0,100))}function d(e){var t=r.progressSize;if(e){var n=parseFloat(e);return e.lastIndexOf("%")===e.length-1&&(n=n/100*t),n}return t}function p(e){return r.strokeWidth/100*e}var f=e.requestAnimationFrame||t.noop,h=e.cancelAnimationFrame||t.noop,m=e.Math.PI/180,g="determinate",v="indeterminate",y="_md-progress-circular-disabled",b="_md-mode-indeterminate";return{restrict:"E",scope:{value:"@",mdDiameter:"@",mdMode:"@"},template:'<svg xmlns="http://www.w3.org/2000/svg"><path fill="none"/></svg>',compile:function(e,r){if(e.attr({"aria-valuemin":0,"aria-valuemax":100,role:"progressbar"}),t.isUndefined(r.mdMode)){var n=t.isDefined(r.value),i=n?g:v;r.$set("mdMode",i)}else r.$set("mdMode",r.mdMode.trim());return s}}}t.module("material.components.progressCircular").directive("mdProgressCircular",e),e.$inject=["$window","$mdProgressCircular","$mdTheming","$mdUtil","$interval","$log"]}(),function(){function e(){function e(e,t,r,n){return r*e/n+t}function r(e,t,r,n){var i=(e/=n)*e,o=i*e;return t+r*(6*o*i+-15*i*i+10*o)}var n={progressSize:50,strokeWidth:10,duration:100,easeFn:e,durationIndeterminate:500,startIndeterminate:3,endIndeterminate:80,easeFnIndeterminate:r,easingPresets:{linearEase:e,materialEase:r}};return{configure:function(e){return n=t.extend(n,e||{})},$get:function(){return n}}}t.module("material.components.progressCircular").provider("$mdProgressCircular",e)}(),function(){function e(){function e(e,n,i,o){if(o){var a=o.getTabElementIndex(n),s=r(n,"md-tab-body").remove(),c=r(n,"md-tab-label").remove(),l=o.insertTab({scope:e,parent:e.$parent,index:a,element:n,template:s.html(),label:c.html()},a);e.select=e.select||t.noop,e.deselect=e.deselect||t.noop,e.$watch("active",function(e){e&&o.select(l.getIndex(),!0)}),e.$watch("disabled",function(){o.refreshIndex()}),e.$watch(function(){return o.getTabElementIndex(n)},function(e){l.index=e,o.updateTabOrder()}),e.$on("$destroy",function(){o.removeTab(l)})}}function r(e,r){for(var n=e[0].children,i=0,o=n.length;i<o;i++){var a=n[i];if(a.tagName===r.toUpperCase())return t.element(a)}return t.element()}return{require:"^?mdTabs",terminal:!0,compile:function(n,i){var o=r(n,"md-tab-label"),a=r(n,"md-tab-body");if(0==o.length&&(o=t.element("<md-tab-label></md-tab-label>"),i.label?o.text(i.label):o.append(n.contents()),0==a.length)){var s=n.contents().detach();a=t.element("<md-tab-body></md-tab-body>"),a.append(s)}return n.append(o),a.html()&&n.append(a),e},scope:{active:"=?mdActive",disabled:"=?ngDisabled",select:"&?mdOnSelect",deselect:"&?mdOnDeselect"}}}t.module("material.components.tabs").directive("mdTab",e)}(),function(){function e(){return{require:"^?mdTabs",link:function(e,t,r,n){n&&n.attachRipple(e,t)}}}t.module("material.components.tabs").directive("mdTabItem",e)}(),function(){function e(){return{terminal:!0}}t.module("material.components.tabs").directive("mdTabLabel",e)}(),function(){function e(e){return{restrict:"A",compile:function(t,r){var n=e(r.mdTabScroll,null,!0);return function(e,t){t.on("mousewheel",function(t){e.$apply(function(){n(e,{$event:t})})})}}}}t.module("material.components.tabs").directive("mdTabScroll",e),e.$inject=["$parse"]}(),function(){function e(e,n,i,o,a,s,c,l,u,d){function p(){ue.selectedIndex=ue.selectedIndex||0,f(),m(),h(),d(n),s.nextTick(function(){pe=U(),oe(),te(),ae(),ue.tabs[ue.selectedIndex]&&ue.tabs[ue.selectedIndex].scope.select(),me=!0,G()})}function f(){var e=l.$mdTabsTemplate,r=t.element(n[0].querySelector("md-tab-data"));r.html(e),u(r.contents())(ue.parent),delete l.$mdTabsTemplate}function h(){t.element(i).on("resize",$),e.$on("$destroy",y)}function m(){e.$watch("$mdTabsCtrl.selectedIndex",I)}function g(e,t){var r=l.$normalize("md-"+e);t&&z(e,t),l.$observe(r,function(t){ue[e]=t})}function v(e,t){function r(t){ue[e]="false"!==t}var n=l.$normalize("md-"+e);t&&z(e,t),l.hasOwnProperty(n)&&r(l[n]),l.$observe(n,r)}function y(){he=!0,t.element(i).off("resize",$)}function b(e){var r=U();t.element(r.wrapper).toggleClass("md-stretch-tabs",q()),ae()}function S(e){ue.shouldCenterTabs=H()}function _(e,r){if(e!==r){var n=U();t.forEach(n.tabs,function(t){t.style.maxWidth=e+"px"}),s.nextTick(ue.updateInkBarStyles)}}function w(e,t){e!==t&&(ue.maxTabWidth=X(),ue.shouldCenterTabs=H(),s.nextTick(function(){ue.maxTabWidth=X(),te(ue.selectedIndex)}))}function E(e){n[e?"removeClass":"addClass"]("md-no-tab-content")}function T(r){var n=U(),i=ue.shouldCenterTabs?"":"-"+r+"px";t.element(n.paging).css(o.CSS.TRANSFORM,"translate3d("+i+", 0, 0)"),e.$broadcast("$mdTabsPaginationChanged")}function O(e,t){e!==t&&U().tabs[e]&&(te(),ee())}function I(t,r){t!==r&&(ue.selectedIndex=Y(t),ue.lastSelectedIndex=r,ue.updateInkBarStyles(),oe(),te(t),e.$broadcast("$mdTabsChanged"),ue.tabs[r]&&ue.tabs[r].scope.deselect(),ue.tabs[t]&&ue.tabs[t].scope.select())}function P(e){var t=n[0].getElementsByTagName("md-tab");return Array.prototype.indexOf.call(t,e[0])}function R(){R.watcher||(R.watcher=e.$watch(function(){s.nextTick(function(){R.watcher&&n.prop("offsetParent")&&(R.watcher(),R.watcher=null,$())},!1)}))}function C(e){switch(e.keyCode){case o.KEY_CODE.LEFT_ARROW:e.preventDefault(),Z(-1,!0);break;case o.KEY_CODE.RIGHT_ARROW:e.preventDefault(),Z(1,!0);break;case o.KEY_CODE.SPACE:case o.KEY_CODE.ENTER:e.preventDefault(),de||A(ue.focusIndex)}ue.lastClick=!1}function A(e,t){de||(ue.focusIndex=ue.selectedIndex=e),ue.lastClick=!0,t&&ue.noSelectClick||s.nextTick(function(){ue.tabs[e].element.triggerHandler("click")},!1)}function j(e){ue.shouldPaginate&&(e.preventDefault(),ue.offsetLeft=ce(ue.offsetLeft-e.wheelDelta))}function k(){var e,t,r=U(),n=r.canvas.clientWidth,i=n+ue.offsetLeft;for(e=0;e<r.tabs.length&&(t=r.tabs[e],!(t.offsetLeft+t.offsetWidth>i));e++);ue.offsetLeft=ce(t.offsetLeft)}function D(){var e,t,r=U();for(e=0;e<r.tabs.length&&(t=r.tabs[e],!(t.offsetLeft+t.offsetWidth>=ue.offsetLeft));e++);ue.offsetLeft=ce(t.offsetLeft+t.offsetWidth-r.canvas.clientWidth)}function $(){ue.lastSelectedIndex=ue.selectedIndex,ue.offsetLeft=ce(ue.offsetLeft),s.nextTick(function(){ue.updateInkBarStyles(),G()})}function M(e){t.element(U().inkBar).toggleClass("ng-hide",e)}function x(e){n.toggleClass("md-dynamic-height",e)}function F(e){if(!he){var t=ue.selectedIndex,r=ue.tabs.splice(e.getIndex(),1)[0];ie(),ue.selectedIndex===t&&(r.scope.deselect(),ue.tabs[ue.selectedIndex]&&ue.tabs[ue.selectedIndex].scope.select()),s.nextTick(function(){G(),ue.offsetLeft=ce(ue.offsetLeft)})}}function L(e,r){var n=me,i={getIndex:function(){return ue.tabs.indexOf(o)},isActive:function(){return this.getIndex()===ue.selectedIndex},isLeft:function(){return this.getIndex()<ue.selectedIndex},isRight:function(){return this.getIndex()>ue.selectedIndex},shouldRender:function(){return!ue.noDisconnect||this.isActive()},hasFocus:function(){return!ue.lastClick&&ue.hasFocus&&this.getIndex()===ue.focusIndex},id:s.nextUid()},o=t.extend(i,e);return t.isDefined(r)?ue.tabs.splice(r,0,o):ue.tabs.push(o),re(),ne(),s.nextTick(function(){G(),n&&ue.autoselect&&s.nextTick(function(){s.nextTick(function(){A(ue.tabs.indexOf(o))})})}),o}function U(){var e={},t=n[0];return e.wrapper=t.querySelector("md-tabs-wrapper"),e.canvas=e.wrapper.querySelector("md-tabs-canvas"),e.paging=e.canvas.querySelector("md-pagination-wrapper"),e.inkBar=e.paging.querySelector("md-ink-bar"),e.contents=t.querySelectorAll("md-tabs-content-wrapper > md-tab-content"),e.tabs=e.paging.querySelectorAll("md-tab-item"),e.dummies=e.canvas.querySelectorAll("md-dummy-tab"),e}function B(){return ue.offsetLeft>0}function N(){var e=U(),t=e.tabs[e.tabs.length-1];return t&&t.offsetLeft+t.offsetWidth>e.canvas.clientWidth+ue.offsetLeft}function q(){switch(ue.stretchTabs){case"always":return!0;case"never":return!1;default:return!ue.shouldPaginate&&i.matchMedia("(max-width: 600px)").matches}}function H(){return ue.centerTabs&&!ue.shouldPaginate}function V(){if(ue.noPagination||!me)return!1;var e=n.prop("clientWidth");return t.forEach(U().dummies,function(t){e-=t.offsetWidth}),e<0}function Y(e){if(e===-1)return-1;var t,r,n=Math.max(ue.tabs.length-e,e);for(t=0;t<=n;t++){if(r=ue.tabs[e+t],r&&r.scope.disabled!==!0)return r.getIndex();if(r=ue.tabs[e-t],r&&r.scope.disabled!==!0)return r.getIndex()}return e}function z(e,t,r){Object.defineProperty(ue,e,{get:function(){return r},set:function(e){var n=r;r=e,t&&t(e,n)}})}function G(){W(),ue.maxTabWidth=X(),ue.shouldPaginate=V()}function W(){var e=U();q()?t.element(e.paging).css("width",""):t.element(e.paging).css("width",Q()+"px")}function Q(){return K(U().dummies)}function K(e){var r=0;return t.forEach(e,function(e){r+=Math.max(e.offsetWidth,e.getBoundingClientRect().width)}),Math.ceil(r)}function X(){return n.prop("clientWidth")}function J(){var e=ue.tabs[ue.selectedIndex],t=ue.tabs[ue.focusIndex];ue.tabs=ue.tabs.sort(function(e,t){return e.index-t.index}),ue.selectedIndex=ue.tabs.indexOf(e),ue.focusIndex=ue.tabs.indexOf(t)}function Z(e,t){var r,n=t?"focusIndex":"selectedIndex",i=ue[n];for(r=i+e;ue.tabs[r]&&ue.tabs[r].scope.disabled;r+=e);ue.tabs[r]&&(ue[n]=r)}function ee(){U().dummies[ue.focusIndex].focus()}function te(e){var t=U();if(null==e&&(e=ue.focusIndex),t.tabs[e]&&!ue.shouldCenterTabs){var r=t.tabs[e],n=r.offsetLeft,i=r.offsetWidth+n;ue.offsetLeft=Math.max(ue.offsetLeft,ce(i-t.canvas.clientWidth+64)),ue.offsetLeft=Math.min(ue.offsetLeft,ce(n))}}function re(){fe.forEach(function(e){s.nextTick(e)}),fe=[]}function ne(){var e=!1;t.forEach(ue.tabs,function(t){t.template&&(e=!0)}),ue.hasContent=e}function ie(){ue.selectedIndex=Y(ue.selectedIndex),ue.focusIndex=Y(ue.focusIndex)}function oe(){if(!ue.dynamicHeight)return n.css("height","");if(!ue.tabs.length)return fe.push(oe);var e=U(),t=e.contents[ue.selectedIndex],i=t?t.offsetHeight:0,o=e.wrapper.offsetHeight,a=i+o,l=n.prop("clientHeight");if(l!==a){"bottom"===n.attr("md-align-tabs")&&(l-=o,a-=o,n.attr("md-border-bottom")!==r&&++l),de=!0;var u={height:l+"px"},d={height:a+"px"};n.css(u),c(n,{from:u,to:d,easing:"cubic-bezier(0.35, 0, 0.25, 1)",duration:.5}).start().done(function(){n.css({transition:"none",height:""}),s.nextTick(function(){n.css("transition","")}),de=!1})}}function ae(){var e=U();if(!e.tabs[ue.selectedIndex])return void t.element(e.inkBar).css({left:"auto",right:"auto"});if(!ue.tabs.length)return fe.push(ue.updateInkBarStyles);if(!n.prop("offsetParent"))return R();var r=ue.selectedIndex,i=e.paging.offsetWidth,o=e.tabs[r],a=o.offsetLeft,c=i-a-o.offsetWidth;if(ue.shouldCenterTabs){var l=K(e.tabs);i>l&&s.nextTick(ae,!1)}se(),t.element(e.inkBar).css({left:a+"px",right:c+"px"})}function se(){var e=U(),r=ue.selectedIndex,n=ue.lastSelectedIndex,i=t.element(e.inkBar);t.isNumber(n)&&i.toggleClass("md-left",r<n).toggleClass("md-right",r>n)}function ce(e){var t=U();if(!t.tabs.length||!ue.shouldPaginate)return 0;var r=t.tabs[t.tabs.length-1],n=r.offsetLeft+r.offsetWidth;return e=Math.max(0,e),e=Math.min(n-t.canvas.clientWidth,e)}function le(e,r){var n=U(),i={colorElement:t.element(n.inkBar)};a.attach(e,r,i)}var ue=this,de=!1,pe=U(),fe=[],he=!1,me=!1;g("stretchTabs",b),z("focusIndex",O,ue.selectedIndex||0),z("offsetLeft",T,0),z("hasContent",E,!1),z("maxTabWidth",_,X()),z("shouldPaginate",w,!1),v("noInkBar",M),v("dynamicHeight",x),v("noPagination"),v("swipeContent"),v("noDisconnect"),v("autoselect"),v("noSelectClick"),v("centerTabs",S,!1),v("enableDisconnect"),ue.scope=e,ue.parent=e.$parent,ue.tabs=[],ue.lastSelectedIndex=null,ue.hasFocus=!1,ue.lastClick=!0,ue.shouldCenterTabs=H(),ue.updatePagination=s.debounce(G,100),ue.redirectFocus=ee,ue.attachRipple=le,ue.insertTab=L,ue.removeTab=F,ue.select=A,ue.scroll=j,ue.nextPage=k,ue.previousPage=D,ue.keydown=C,ue.canPageForward=N,ue.canPageBack=B,ue.refreshIndex=ie,ue.incrementIndex=Z,ue.getTabElementIndex=P,ue.updateInkBarStyles=s.debounce(ae,100),ue.updateTabOrder=s.debounce(J,100),p()}t.module("material.components.tabs").controller("MdTabsController",e),e.$inject=["$scope","$element","$window","$mdConstant","$mdTabInkRipple","$mdUtil","$animateCss","$attrs","$compile","$mdTheming"]}(),function(){function e(e){return{scope:{selectedIndex:"=?mdSelected"},template:function(t,r){return r.$mdTabsTemplate=t.html(),'<md-tabs-wrapper> <md-tab-data></md-tab-data> <md-prev-button tabindex="-1" role="button" aria-label="Previous Page" aria-disabled="{{!$mdTabsCtrl.canPageBack()}}" ng-class="{ \'md-disabled\': !$mdTabsCtrl.canPageBack() }" ng-if="$mdTabsCtrl.shouldPaginate" ng-click="$mdTabsCtrl.previousPage()"> <md-icon md-svg-src="'+e.mdTabsArrow+'"></md-icon> </md-prev-button> <md-next-button tabindex="-1" role="button" aria-label="Next Page" aria-disabled="{{!$mdTabsCtrl.canPageForward()}}" ng-class="{ \'md-disabled\': !$mdTabsCtrl.canPageForward() }" ng-if="$mdTabsCtrl.shouldPaginate" ng-click="$mdTabsCtrl.nextPage()"> <md-icon md-svg-src="'+e.mdTabsArrow+'"></md-icon> </md-next-button> <md-tabs-canvas tabindex="{{ $mdTabsCtrl.hasFocus ? -1 : 0 }}" aria-activedescendant="tab-item-{{$mdTabsCtrl.tabs[$mdTabsCtrl.focusIndex].id}}" ng-focus="$mdTabsCtrl.redirectFocus()" ng-class="{ \'md-paginated\': $mdTabsCtrl.shouldPaginate, \'md-center-tabs\': $mdTabsCtrl.shouldCenterTabs }" ng-keydown="$mdTabsCtrl.keydown($event)" role="tablist"> <md-pagination-wrapper ng-class="{ \'md-center-tabs\': $mdTabsCtrl.shouldCenterTabs }" md-tab-scroll="$mdTabsCtrl.scroll($event)"> <md-tab-item tabindex="-1" class="md-tab" ng-repeat="tab in $mdTabsCtrl.tabs" role="tab" aria-controls="tab-content-{{::tab.id}}" aria-selected="{{tab.isActive()}}" aria-disabled="{{tab.scope.disabled || \'false\'}}" ng-click="$mdTabsCtrl.select(tab.getIndex())" ng-class="{ \'md-active\':    tab.isActive(), \'md-focused\':   tab.hasFocus(), \'md-disabled\':  tab.scope.disabled }" ng-disabled="tab.scope.disabled" md-swipe-left="$mdTabsCtrl.nextPage()" md-swipe-right="$mdTabsCtrl.previousPage()" md-tabs-template="::tab.label" md-scope="::tab.parent"></md-tab-item> <md-ink-bar></md-ink-bar> </md-pagination-wrapper> <md-tabs-dummy-wrapper class="_md-visually-hidden md-dummy-wrapper"> <md-dummy-tab class="md-tab" tabindex="-1" id="tab-item-{{::tab.id}}" role="tab" aria-controls="tab-content-{{::tab.id}}" aria-selected="{{tab.isActive()}}" aria-disabled="{{tab.scope.disabled || \'false\'}}" ng-focus="$mdTabsCtrl.hasFocus = true" ng-blur="$mdTabsCtrl.hasFocus = false" ng-repeat="tab in $mdTabsCtrl.tabs" md-tabs-template="::tab.label" md-scope="::tab.parent"></md-dummy-tab> </md-tabs-dummy-wrapper> </md-tabs-canvas> </md-tabs-wrapper> <md-tabs-content-wrapper ng-show="$mdTabsCtrl.hasContent && $mdTabsCtrl.selectedIndex >= 0" class="_md"> <md-tab-content id="tab-content-{{::tab.id}}" class="_md" role="tabpanel" aria-labelledby="tab-item-{{::tab.id}}" md-swipe-left="$mdTabsCtrl.swipeContent && $mdTabsCtrl.incrementIndex(1)" md-swipe-right="$mdTabsCtrl.swipeContent && $mdTabsCtrl.incrementIndex(-1)" ng-if="$mdTabsCtrl.hasContent" ng-repeat="(index, tab) in $mdTabsCtrl.tabs" ng-class="{ \'md-no-transition\': $mdTabsCtrl.lastSelectedIndex == null, \'md-active\':        tab.isActive(), \'md-left\':          tab.isLeft(), \'md-right\':         tab.isRight(), \'md-no-scroll\':     $mdTabsCtrl.dynamicHeight }"> <div md-tabs-template="::tab.template" md-connected-if="tab.isActive()" md-scope="::tab.parent" ng-if="$mdTabsCtrl.enableDisconnect || tab.shouldRender()"></div> </md-tab-content> </md-tabs-content-wrapper>'},controller:"MdTabsController",controllerAs:"$mdTabsCtrl",bindToController:!0}}t.module("material.components.tabs").directive("mdTabs",e),e.$inject=["$$mdSvgRegistry"]}(),function(){function e(e){return{require:"^?mdTabs",link:function(e,t,r,n){if(n){var i=new MutationObserver(function(e){n.updatePagination(),n.updateInkBarStyles()}),o={childList:!0,subtree:!0};i.observe(t[0],o),e.$on("$destroy",function(){i&&i.disconnect()})}}}}t.module("material.components.tabs").directive("mdTabsDummyWrapper",e),e.$inject=["$mdUtil"]}(),function(){function e(e,t){function r(r,n,i,o){function a(){r.$watch("connected",function(e){e===!1?s():c()}),r.$on("$destroy",c)}function s(){o.enableDisconnect&&t.disconnectScope(l)}function c(){o.enableDisconnect&&t.reconnectScope(l)}if(o){var l=o.enableDisconnect?r.compileScope.$new():r.compileScope;return n.html(r.template),e(n.contents())(l),t.nextTick(a)}}return{restrict:"A",link:r,scope:{template:"=mdTabsTemplate",connected:"=?mdConnectedIf",compileScope:"=mdScope"},require:"^?mdTabs"}}t.module("material.components.tabs").directive("mdTabsTemplate",e),
e.$inject=["$compile","$mdUtil"]}(),function(){t.module("material.core").constant("$MD_THEME_CSS","/*  Only used with Theme processes */html.md-THEME_NAME-theme, body.md-THEME_NAME-theme {  color: '{{foreground-1}}';  background-color: '{{background-color}}'; }md-autocomplete.md-THEME_NAME-theme {  background: '{{background-A100}}'; }  md-autocomplete.md-THEME_NAME-theme[disabled]:not([md-floating-label]) {    background: '{{background-100}}'; }  md-autocomplete.md-THEME_NAME-theme button md-icon path {    fill: '{{background-600}}'; }  md-autocomplete.md-THEME_NAME-theme button:after {    background: '{{background-600-0.3}}'; }.md-autocomplete-suggestions-container.md-THEME_NAME-theme {  background: '{{background-A100}}'; }  .md-autocomplete-suggestions-container.md-THEME_NAME-theme li {    color: '{{background-900}}'; }    .md-autocomplete-suggestions-container.md-THEME_NAME-theme li .highlight {      color: '{{background-600}}'; }    .md-autocomplete-suggestions-container.md-THEME_NAME-theme li:hover, .md-autocomplete-suggestions-container.md-THEME_NAME-theme li.selected {      background: '{{background-200}}'; }md-backdrop {  background-color: '{{background-900-0.0}}'; }  md-backdrop.md-opaque.md-THEME_NAME-theme {    background-color: '{{background-900-1.0}}'; }.md-button.md-THEME_NAME-theme:not([disabled]):hover {  background-color: '{{background-500-0.2}}'; }.md-button.md-THEME_NAME-theme:not([disabled]).md-focused {  background-color: '{{background-500-0.2}}'; }.md-button.md-THEME_NAME-theme:not([disabled]).md-icon-button:hover {  background-color: transparent; }.md-button.md-THEME_NAME-theme.md-fab {  background-color: '{{accent-color}}';  color: '{{accent-contrast}}'; }  .md-button.md-THEME_NAME-theme.md-fab md-icon {    color: '{{accent-contrast}}'; }  .md-button.md-THEME_NAME-theme.md-fab:not([disabled]):hover {    background-color: '{{accent-A700}}'; }  .md-button.md-THEME_NAME-theme.md-fab:not([disabled]).md-focused {    background-color: '{{accent-A700}}'; }.md-button.md-THEME_NAME-theme.md-primary {  color: '{{primary-color}}'; }  .md-button.md-THEME_NAME-theme.md-primary.md-raised, .md-button.md-THEME_NAME-theme.md-primary.md-fab {    color: '{{primary-contrast}}';    background-color: '{{primary-color}}'; }    .md-button.md-THEME_NAME-theme.md-primary.md-raised:not([disabled]) md-icon, .md-button.md-THEME_NAME-theme.md-primary.md-fab:not([disabled]) md-icon {      color: '{{primary-contrast}}'; }    .md-button.md-THEME_NAME-theme.md-primary.md-raised:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-primary.md-fab:not([disabled]):hover {      background-color: '{{primary-600}}'; }    .md-button.md-THEME_NAME-theme.md-primary.md-raised:not([disabled]).md-focused, .md-button.md-THEME_NAME-theme.md-primary.md-fab:not([disabled]).md-focused {      background-color: '{{primary-600}}'; }  .md-button.md-THEME_NAME-theme.md-primary:not([disabled]) md-icon {    color: '{{primary-color}}'; }.md-button.md-THEME_NAME-theme.md-fab {  background-color: '{{accent-color}}';  color: '{{accent-contrast}}'; }  .md-button.md-THEME_NAME-theme.md-fab:not([disabled]) .md-icon {    color: '{{accent-contrast}}'; }  .md-button.md-THEME_NAME-theme.md-fab:not([disabled]):hover {    background-color: '{{accent-A700}}'; }  .md-button.md-THEME_NAME-theme.md-fab:not([disabled]).md-focused {    background-color: '{{accent-A700}}'; }.md-button.md-THEME_NAME-theme.md-raised {  color: '{{background-900}}';  background-color: '{{background-50}}'; }  .md-button.md-THEME_NAME-theme.md-raised:not([disabled]) md-icon {    color: '{{background-900}}'; }  .md-button.md-THEME_NAME-theme.md-raised:not([disabled]):hover {    background-color: '{{background-50}}'; }  .md-button.md-THEME_NAME-theme.md-raised:not([disabled]).md-focused {    background-color: '{{background-200}}'; }.md-button.md-THEME_NAME-theme.md-warn {  color: '{{warn-color}}'; }  .md-button.md-THEME_NAME-theme.md-warn.md-raised, .md-button.md-THEME_NAME-theme.md-warn.md-fab {    color: '{{warn-contrast}}';    background-color: '{{warn-color}}'; }    .md-button.md-THEME_NAME-theme.md-warn.md-raised:not([disabled]) md-icon, .md-button.md-THEME_NAME-theme.md-warn.md-fab:not([disabled]) md-icon {      color: '{{warn-contrast}}'; }    .md-button.md-THEME_NAME-theme.md-warn.md-raised:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-warn.md-fab:not([disabled]):hover {      background-color: '{{warn-600}}'; }    .md-button.md-THEME_NAME-theme.md-warn.md-raised:not([disabled]).md-focused, .md-button.md-THEME_NAME-theme.md-warn.md-fab:not([disabled]).md-focused {      background-color: '{{warn-600}}'; }  .md-button.md-THEME_NAME-theme.md-warn:not([disabled]) md-icon {    color: '{{warn-color}}'; }.md-button.md-THEME_NAME-theme.md-accent {  color: '{{accent-color}}'; }  .md-button.md-THEME_NAME-theme.md-accent.md-raised, .md-button.md-THEME_NAME-theme.md-accent.md-fab {    color: '{{accent-contrast}}';    background-color: '{{accent-color}}'; }    .md-button.md-THEME_NAME-theme.md-accent.md-raised:not([disabled]) md-icon, .md-button.md-THEME_NAME-theme.md-accent.md-fab:not([disabled]) md-icon {      color: '{{accent-contrast}}'; }    .md-button.md-THEME_NAME-theme.md-accent.md-raised:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-accent.md-fab:not([disabled]):hover {      background-color: '{{accent-A700}}'; }    .md-button.md-THEME_NAME-theme.md-accent.md-raised:not([disabled]).md-focused, .md-button.md-THEME_NAME-theme.md-accent.md-fab:not([disabled]).md-focused {      background-color: '{{accent-A700}}'; }  .md-button.md-THEME_NAME-theme.md-accent:not([disabled]) md-icon {    color: '{{accent-color}}'; }.md-button.md-THEME_NAME-theme[disabled], .md-button.md-THEME_NAME-theme.md-raised[disabled], .md-button.md-THEME_NAME-theme.md-fab[disabled], .md-button.md-THEME_NAME-theme.md-accent[disabled], .md-button.md-THEME_NAME-theme.md-warn[disabled] {  color: '{{foreground-3}}';  cursor: default; }  .md-button.md-THEME_NAME-theme[disabled] md-icon, .md-button.md-THEME_NAME-theme.md-raised[disabled] md-icon, .md-button.md-THEME_NAME-theme.md-fab[disabled] md-icon, .md-button.md-THEME_NAME-theme.md-accent[disabled] md-icon, .md-button.md-THEME_NAME-theme.md-warn[disabled] md-icon {    color: '{{foreground-3}}'; }.md-button.md-THEME_NAME-theme.md-raised[disabled], .md-button.md-THEME_NAME-theme.md-fab[disabled] {  background-color: '{{foreground-4}}'; }.md-button.md-THEME_NAME-theme[disabled] {  background-color: transparent; }._md a.md-THEME_NAME-theme:not(.md-button).md-primary {  color: '{{primary-color}}'; }  ._md a.md-THEME_NAME-theme:not(.md-button).md-primary:hover {    color: '{{primary-700}}'; }._md a.md-THEME_NAME-theme:not(.md-button).md-accent {  color: '{{accent-color}}'; }  ._md a.md-THEME_NAME-theme:not(.md-button).md-accent:hover {    color: '{{accent-700}}'; }._md a.md-THEME_NAME-theme:not(.md-button).md-accent {  color: '{{accent-color}}'; }  ._md a.md-THEME_NAME-theme:not(.md-button).md-accent:hover {    color: '{{accent-A700}}'; }._md a.md-THEME_NAME-theme:not(.md-button).md-warn {  color: '{{warn-color}}'; }  ._md a.md-THEME_NAME-theme:not(.md-button).md-warn:hover {    color: '{{warn-700}}'; }md-bottom-sheet.md-THEME_NAME-theme {  background-color: '{{background-50}}';  border-top-color: '{{background-300}}'; }  md-bottom-sheet.md-THEME_NAME-theme.md-list md-list-item {    color: '{{foreground-1}}'; }  md-bottom-sheet.md-THEME_NAME-theme .md-subheader {    background-color: '{{background-50}}'; }  md-bottom-sheet.md-THEME_NAME-theme .md-subheader {    color: '{{foreground-1}}'; }md-card.md-THEME_NAME-theme {  color: '{{foreground-1}}';  background-color: '{{background-hue-1}}';  border-radius: 2px; }  md-card.md-THEME_NAME-theme .md-card-image {    border-radius: 2px 2px 0 0; }  md-card.md-THEME_NAME-theme md-card-header md-card-avatar md-icon {    color: '{{background-color}}';    background-color: '{{foreground-3}}'; }  md-card.md-THEME_NAME-theme md-card-header md-card-header-text .md-subhead {    color: '{{foreground-2}}'; }  md-card.md-THEME_NAME-theme md-card-title md-card-title-text:not(:only-child) .md-subhead {    color: '{{foreground-2}}'; }md-checkbox.md-THEME_NAME-theme .md-ripple {  color: '{{accent-A700}}'; }md-checkbox.md-THEME_NAME-theme.md-checked .md-ripple {  color: '{{background-600}}'; }md-checkbox.md-THEME_NAME-theme.md-checked.md-focused ._md-container:before {  background-color: '{{accent-color-0.26}}'; }md-checkbox.md-THEME_NAME-theme .md-ink-ripple {  color: '{{foreground-2}}'; }md-checkbox.md-THEME_NAME-theme.md-checked .md-ink-ripple {  color: '{{accent-color-0.87}}'; }md-checkbox.md-THEME_NAME-theme ._md-icon {  border-color: '{{foreground-2}}'; }md-checkbox.md-THEME_NAME-theme.md-checked ._md-icon {  background-color: '{{accent-color-0.87}}'; }md-checkbox.md-THEME_NAME-theme.md-checked ._md-icon:after {  border-color: '{{accent-contrast-0.87}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary .md-ripple {  color: '{{primary-600}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-ripple {  color: '{{background-600}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary .md-ink-ripple {  color: '{{foreground-2}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-ink-ripple {  color: '{{primary-color-0.87}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary ._md-icon {  border-color: '{{foreground-2}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked ._md-icon {  background-color: '{{primary-color-0.87}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked.md-focused ._md-container:before {  background-color: '{{primary-color-0.26}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked ._md-icon:after {  border-color: '{{primary-contrast-0.87}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary .md-indeterminate[disabled] ._md-container {  color: '{{foreground-3}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn .md-ripple {  color: '{{warn-600}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn .md-ink-ripple {  color: '{{foreground-2}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-ink-ripple {  color: '{{warn-color-0.87}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn ._md-icon {  border-color: '{{foreground-2}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked ._md-icon {  background-color: '{{warn-color-0.87}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked.md-focused:not([disabled]) ._md-container:before {  background-color: '{{warn-color-0.26}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked ._md-icon:after {  border-color: '{{background-200}}'; }md-checkbox.md-THEME_NAME-theme[disabled] ._md-icon {  border-color: '{{foreground-3}}'; }md-checkbox.md-THEME_NAME-theme[disabled].md-checked ._md-icon {  background-color: '{{foreground-3}}'; }md-checkbox.md-THEME_NAME-theme[disabled].md-checked ._md-icon:after {  border-color: '{{background-200}}'; }md-checkbox.md-THEME_NAME-theme[disabled] ._md-icon:after {  border-color: '{{foreground-3}}'; }md-checkbox.md-THEME_NAME-theme[disabled] ._md-label {  color: '{{foreground-3}}'; }md-chips.md-THEME_NAME-theme .md-chips {  box-shadow: 0 1px '{{foreground-4}}'; }  md-chips.md-THEME_NAME-theme .md-chips.md-focused {    box-shadow: 0 2px '{{primary-color}}'; }  md-chips.md-THEME_NAME-theme .md-chips ._md-chip-input-container input {    color: '{{foreground-1}}'; }    md-chips.md-THEME_NAME-theme .md-chips ._md-chip-input-container input::-webkit-input-placeholder {      color: '{{foreground-3}}'; }    md-chips.md-THEME_NAME-theme .md-chips ._md-chip-input-container input:-moz-placeholder {      color: '{{foreground-3}}'; }    md-chips.md-THEME_NAME-theme .md-chips ._md-chip-input-container input::-moz-placeholder {      color: '{{foreground-3}}'; }    md-chips.md-THEME_NAME-theme .md-chips ._md-chip-input-container input:-ms-input-placeholder {      color: '{{foreground-3}}'; }    md-chips.md-THEME_NAME-theme .md-chips ._md-chip-input-container input::-webkit-input-placeholder {      color: '{{foreground-3}}'; }md-chips.md-THEME_NAME-theme md-chip {  background: '{{background-300}}';  color: '{{background-800}}'; }  md-chips.md-THEME_NAME-theme md-chip md-icon {    color: '{{background-700}}'; }  md-chips.md-THEME_NAME-theme md-chip.md-focused {    background: '{{primary-color}}';    color: '{{primary-contrast}}'; }    md-chips.md-THEME_NAME-theme md-chip.md-focused md-icon {      color: '{{primary-contrast}}'; }  md-chips.md-THEME_NAME-theme md-chip._md-chip-editing {    background: transparent;    color: '{{background-800}}'; }md-chips.md-THEME_NAME-theme md-chip-remove .md-button md-icon path {  fill: '{{background-500}}'; }.md-contact-suggestion span.md-contact-email {  color: '{{background-400}}'; }md-content.md-THEME_NAME-theme {  color: '{{foreground-1}}';  background-color: '{{background-default}}'; }/** Theme styles for mdCalendar. */.md-calendar.md-THEME_NAME-theme {  background: '{{background-A100}}';  color: '{{background-A200-0.87}}'; }  .md-calendar.md-THEME_NAME-theme tr:last-child td {    border-bottom-color: '{{background-200}}'; }.md-THEME_NAME-theme .md-calendar-day-header {  background: '{{background-300}}';  color: '{{background-A200-0.87}}'; }.md-THEME_NAME-theme .md-calendar-date.md-calendar-date-today .md-calendar-date-selection-indicator {  border: 1px solid '{{primary-500}}'; }.md-THEME_NAME-theme .md-calendar-date.md-calendar-date-today.md-calendar-date-disabled {  color: '{{primary-500-0.6}}'; }.md-calendar-date.md-focus .md-THEME_NAME-theme .md-calendar-date-selection-indicator, .md-THEME_NAME-theme .md-calendar-date-selection-indicator:hover {  background: '{{background-300}}'; }.md-THEME_NAME-theme .md-calendar-date.md-calendar-selected-date .md-calendar-date-selection-indicator,.md-THEME_NAME-theme .md-calendar-date.md-focus.md-calendar-selected-date .md-calendar-date-selection-indicator {  background: '{{primary-500}}';  color: '{{primary-500-contrast}}';  border-color: transparent; }.md-THEME_NAME-theme .md-calendar-date-disabled,.md-THEME_NAME-theme .md-calendar-month-label-disabled {  color: '{{background-A200-0.435}}'; }/** Theme styles for mdDatepicker. */.md-THEME_NAME-theme .md-datepicker-input {  color: '{{foreground-1}}'; }  .md-THEME_NAME-theme .md-datepicker-input::-webkit-input-placeholder {    color: '{{foreground-3}}'; }  .md-THEME_NAME-theme .md-datepicker-input:-moz-placeholder {    color: '{{foreground-3}}'; }  .md-THEME_NAME-theme .md-datepicker-input::-moz-placeholder {    color: '{{foreground-3}}'; }  .md-THEME_NAME-theme .md-datepicker-input:-ms-input-placeholder {    color: '{{foreground-3}}'; }  .md-THEME_NAME-theme .md-datepicker-input::-webkit-input-placeholder {    color: '{{foreground-3}}'; }.md-THEME_NAME-theme .md-datepicker-input-container {  border-bottom-color: '{{foreground-4}}'; }  .md-THEME_NAME-theme .md-datepicker-input-container.md-datepicker-focused {    border-bottom-color: '{{primary-color}}'; }  .md-THEME_NAME-theme .md-datepicker-input-container.md-datepicker-invalid {    border-bottom-color: '{{warn-A700}}'; }.md-THEME_NAME-theme .md-datepicker-calendar-pane {  border-color: '{{background-hue-1}}'; }.md-THEME_NAME-theme .md-datepicker-triangle-button .md-datepicker-expand-triangle {  border-top-color: '{{foreground-3}}'; }.md-THEME_NAME-theme .md-datepicker-triangle-button:hover .md-datepicker-expand-triangle {  border-top-color: '{{foreground-2}}'; }.md-THEME_NAME-theme .md-datepicker-open .md-datepicker-calendar-icon {  fill: '{{primary-500}}'; }.md-THEME_NAME-theme .md-datepicker-open .md-datepicker-input-container,.md-THEME_NAME-theme .md-datepicker-input-mask-opaque {  background: '{{background-hue-1}}'; }.md-THEME_NAME-theme .md-datepicker-calendar {  background: '{{background-A100}}'; }md-dialog.md-THEME_NAME-theme {  border-radius: 4px;  background-color: '{{background-hue-1}}'; }  md-dialog.md-THEME_NAME-theme.md-content-overflow .md-actions, md-dialog.md-THEME_NAME-theme.md-content-overflow md-dialog-actions {    border-top-color: '{{foreground-4}}'; }md-divider.md-THEME_NAME-theme {  border-top-color: '{{foreground-4}}'; }.layout-row > md-divider.md-THEME_NAME-theme,.layout-xs-row > md-divider.md-THEME_NAME-theme, .layout-gt-xs-row > md-divider.md-THEME_NAME-theme,.layout-sm-row > md-divider.md-THEME_NAME-theme, .layout-gt-sm-row > md-divider.md-THEME_NAME-theme,.layout-md-row > md-divider.md-THEME_NAME-theme, .layout-gt-md-row > md-divider.md-THEME_NAME-theme,.layout-lg-row > md-divider.md-THEME_NAME-theme, .layout-gt-lg-row > md-divider.md-THEME_NAME-theme,.layout-xl-row > md-divider.md-THEME_NAME-theme {  border-right-color: '{{foreground-4}}'; }md-icon.md-THEME_NAME-theme {  color: '{{foreground-2}}'; }  md-icon.md-THEME_NAME-theme.md-primary {    color: '{{primary-color}}'; }  md-icon.md-THEME_NAME-theme.md-accent {    color: '{{accent-color}}'; }  md-icon.md-THEME_NAME-theme.md-warn {    color: '{{warn-color}}'; }md-list.md-THEME_NAME-theme md-list-item.md-2-line .md-list-item-text h3, md-list.md-THEME_NAME-theme md-list-item.md-2-line .md-list-item-text h4,md-list.md-THEME_NAME-theme md-list-item.md-3-line .md-list-item-text h3,md-list.md-THEME_NAME-theme md-list-item.md-3-line .md-list-item-text h4 {  color: '{{foreground-1}}'; }md-list.md-THEME_NAME-theme md-list-item.md-2-line .md-list-item-text p,md-list.md-THEME_NAME-theme md-list-item.md-3-line .md-list-item-text p {  color: '{{foreground-2}}'; }md-list.md-THEME_NAME-theme ._md-proxy-focus.md-focused div._md-no-style {  background-color: '{{background-100}}'; }md-list.md-THEME_NAME-theme md-list-item .md-avatar-icon {  background-color: '{{foreground-3}}';  color: '{{background-color}}'; }md-list.md-THEME_NAME-theme md-list-item > md-icon {  color: '{{foreground-2}}'; }  md-list.md-THEME_NAME-theme md-list-item > md-icon.md-highlight {    color: '{{primary-color}}'; }    md-list.md-THEME_NAME-theme md-list-item > md-icon.md-highlight.md-accent {      color: '{{accent-color}}'; }md-input-container.md-THEME_NAME-theme .md-input {  color: '{{foreground-1}}';  border-color: '{{foreground-4}}'; }  md-input-container.md-THEME_NAME-theme .md-input::-webkit-input-placeholder {    color: '{{foreground-3}}'; }  md-input-container.md-THEME_NAME-theme .md-input:-moz-placeholder {    color: '{{foreground-3}}'; }  md-input-container.md-THEME_NAME-theme .md-input::-moz-placeholder {    color: '{{foreground-3}}'; }  md-input-container.md-THEME_NAME-theme .md-input:-ms-input-placeholder {    color: '{{foreground-3}}'; }  md-input-container.md-THEME_NAME-theme .md-input::-webkit-input-placeholder {    color: '{{foreground-3}}'; }md-input-container.md-THEME_NAME-theme > md-icon {  color: '{{foreground-1}}'; }md-input-container.md-THEME_NAME-theme label,md-input-container.md-THEME_NAME-theme ._md-placeholder {  color: '{{foreground-3}}'; }md-input-container.md-THEME_NAME-theme label.md-required:after {  color: '{{warn-A700}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-focused):not(.md-input-invalid) label.md-required:after {  color: '{{foreground-2}}'; }md-input-container.md-THEME_NAME-theme .md-input-messages-animation, md-input-container.md-THEME_NAME-theme .md-input-message-animation {  color: '{{warn-A700}}'; }  md-input-container.md-THEME_NAME-theme .md-input-messages-animation .md-char-counter, md-input-container.md-THEME_NAME-theme .md-input-message-animation .md-char-counter {    color: '{{foreground-1}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-has-value label {  color: '{{foreground-2}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused .md-input, md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-resized .md-input {  border-color: '{{primary-color}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused label {  color: '{{primary-color}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused md-icon {  color: '{{primary-color}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-accent .md-input {  border-color: '{{accent-color}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-accent label {  color: '{{accent-color}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-warn .md-input {  border-color: '{{warn-A700}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-warn label {  color: '{{warn-A700}}'; }md-input-container.md-THEME_NAME-theme.md-input-invalid .md-input {  border-color: '{{warn-A700}}'; }md-input-container.md-THEME_NAME-theme.md-input-invalid label {  color: '{{warn-A700}}'; }md-input-container.md-THEME_NAME-theme.md-input-invalid .md-input-message-animation, md-input-container.md-THEME_NAME-theme.md-input-invalid .md-char-counter {  color: '{{warn-A700}}'; }md-input-container.md-THEME_NAME-theme .md-input[disabled],[disabled] md-input-container.md-THEME_NAME-theme .md-input {  border-bottom-color: transparent;  color: '{{foreground-3}}';  background-image: linear-gradient(to right, \"{{foreground-3}}\" 0%, \"{{foreground-3}}\" 33%, transparent 0%);  background-image: -ms-linear-gradient(left, transparent 0%, \"{{foreground-3}}\" 100%); }md-menu-bar.md-THEME_NAME-theme > button.md-button {  color: '{{foreground-2}}';  border-radius: 2px; }md-menu-bar.md-THEME_NAME-theme md-menu._md-open > button, md-menu-bar.md-THEME_NAME-theme md-menu > button:focus {  outline: none;  background: '{{background-200}}'; }md-menu-bar.md-THEME_NAME-theme._md-open:not(._md-keyboard-mode) md-menu:hover > button {  background-color: '{{ background-500-0.2}}'; }md-menu-bar.md-THEME_NAME-theme:not(._md-keyboard-mode):not(._md-open) md-menu button:hover,md-menu-bar.md-THEME_NAME-theme:not(._md-keyboard-mode):not(._md-open) md-menu button:focus {  background: transparent; }md-menu-content.md-THEME_NAME-theme .md-menu > .md-button:after {  color: '{{background-A200-0.54}}'; }md-menu-content.md-THEME_NAME-theme .md-menu._md-open > .md-button {  background-color: '{{ background-500-0.2}}'; }md-toolbar.md-THEME_NAME-theme.md-menu-toolbar {  background-color: '{{background-A100}}';  color: '{{background-A200}}'; }  md-toolbar.md-THEME_NAME-theme.md-menu-toolbar md-toolbar-filler {    background-color: '{{primary-color}}';    color: '{{background-A100-0.87}}'; }    md-toolbar.md-THEME_NAME-theme.md-menu-toolbar md-toolbar-filler md-icon {      color: '{{background-A100-0.87}}'; }md-menu-content.md-THEME_NAME-theme {  background-color: '{{background-A100}}'; }  md-menu-content.md-THEME_NAME-theme md-menu-item {    color: '{{background-A200-0.87}}'; }    md-menu-content.md-THEME_NAME-theme md-menu-item md-icon {      color: '{{background-A200-0.54}}'; }    md-menu-content.md-THEME_NAME-theme md-menu-item .md-button[disabled] {      color: '{{background-A200-0.25}}'; }      md-menu-content.md-THEME_NAME-theme md-menu-item .md-button[disabled] md-icon {        color: '{{background-A200-0.25}}'; }  md-menu-content.md-THEME_NAME-theme md-menu-divider {    background-color: '{{background-A200-0.11}}'; }md-nav-bar.md-THEME_NAME-theme .md-nav-bar {  background-color: transparent;  border-color: '{{foreground-4}}'; }md-nav-bar.md-THEME_NAME-theme .md-button._md-nav-button.md-unselected {  color: '{{foreground-2}}'; }md-nav-bar.md-THEME_NAME-theme md-nav-ink-bar {  color: '{{accent-color}}';  background: '{{accent-color}}'; }.md-panel {  background-color: '{{background-900-0.0}}'; }  .md-panel._md-panel-backdrop.md-THEME_NAME-theme {    background-color: '{{background-900-1.0}}'; }md-progress-circular.md-THEME_NAME-theme path {  stroke: '{{primary-color}}'; }md-progress-circular.md-THEME_NAME-theme.md-warn path {  stroke: '{{warn-color}}'; }md-progress-circular.md-THEME_NAME-theme.md-accent path {  stroke: '{{accent-color}}'; }md-progress-linear.md-THEME_NAME-theme ._md-container {  background-color: '{{primary-100}}'; }md-progress-linear.md-THEME_NAME-theme ._md-bar {  background-color: '{{primary-color}}'; }md-progress-linear.md-THEME_NAME-theme.md-warn ._md-container {  background-color: '{{warn-100}}'; }md-progress-linear.md-THEME_NAME-theme.md-warn ._md-bar {  background-color: '{{warn-color}}'; }md-progress-linear.md-THEME_NAME-theme.md-accent ._md-container {  background-color: '{{accent-A100}}'; }md-progress-linear.md-THEME_NAME-theme.md-accent ._md-bar {  background-color: '{{accent-color}}'; }md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-warn ._md-bar1 {  background-color: '{{warn-100}}'; }md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-warn ._md-dashed:before {  background: radial-gradient(\"{{warn-100}}\" 0%, \"{{warn-100}}\" 16%, transparent 42%); }md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-accent ._md-bar1 {  background-color: '{{accent-A100}}'; }md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-accent ._md-dashed:before {  background: radial-gradient(\"{{accent-A100}}\" 0%, \"{{accent-A100}}\" 16%, transparent 42%); }md-radio-button.md-THEME_NAME-theme ._md-off {  border-color: '{{foreground-2}}'; }md-radio-button.md-THEME_NAME-theme ._md-on {  background-color: '{{accent-color-0.87}}'; }md-radio-button.md-THEME_NAME-theme.md-checked ._md-off {  border-color: '{{accent-color-0.87}}'; }md-radio-button.md-THEME_NAME-theme.md-checked .md-ink-ripple {  color: '{{accent-color-0.87}}'; }md-radio-button.md-THEME_NAME-theme ._md-container .md-ripple {  color: '{{accent-A700}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary ._md-on, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary ._md-on,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary ._md-on,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary ._md-on {  background-color: '{{primary-color-0.87}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary .md-checked ._md-off, md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary.md-checked ._md-off, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary .md-checked ._md-off, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked ._md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary .md-checked ._md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary.md-checked ._md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary .md-checked ._md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked ._md-off {  border-color: '{{primary-color-0.87}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary .md-checked .md-ink-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary.md-checked .md-ink-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary .md-checked .md-ink-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary .md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary.md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary .md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-ink-ripple {  color: '{{primary-color-0.87}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary ._md-container .md-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary ._md-container .md-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary ._md-container .md-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary ._md-container .md-ripple {  color: '{{primary-600}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn ._md-on, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn ._md-on,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn ._md-on,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn ._md-on {  background-color: '{{warn-color-0.87}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn .md-checked ._md-off, md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn.md-checked ._md-off, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn .md-checked ._md-off, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked ._md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn .md-checked ._md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn.md-checked ._md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn .md-checked ._md-off,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked ._md-off {  border-color: '{{warn-color-0.87}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn .md-checked .md-ink-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn.md-checked .md-ink-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn .md-checked .md-ink-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn .md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn.md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn .md-checked .md-ink-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-ink-ripple {  color: '{{warn-color-0.87}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn ._md-container .md-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn ._md-container .md-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn ._md-container .md-ripple,md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn ._md-container .md-ripple {  color: '{{warn-600}}'; }md-radio-group.md-THEME_NAME-theme[disabled],md-radio-button.md-THEME_NAME-theme[disabled] {  color: '{{foreground-3}}'; }  md-radio-group.md-THEME_NAME-theme[disabled] ._md-container ._md-off,  md-radio-button.md-THEME_NAME-theme[disabled] ._md-container ._md-off {    border-color: '{{foreground-3}}'; }  md-radio-group.md-THEME_NAME-theme[disabled] ._md-container ._md-on,  md-radio-button.md-THEME_NAME-theme[disabled] ._md-container ._md-on {    border-color: '{{foreground-3}}'; }md-radio-group.md-THEME_NAME-theme .md-checked .md-ink-ripple {  color: '{{accent-color-0.26}}'; }md-radio-group.md-THEME_NAME-theme.md-primary .md-checked:not([disabled]) .md-ink-ripple, md-radio-group.md-THEME_NAME-theme .md-checked:not([disabled]).md-primary .md-ink-ripple {  color: '{{primary-color-0.26}}'; }md-radio-group.md-THEME_NAME-theme .md-checked.md-primary .md-ink-ripple {  color: '{{warn-color-0.26}}'; }md-radio-group.md-THEME_NAME-theme.md-focused:not(:empty) .md-checked ._md-container:before {  background-color: '{{accent-color-0.26}}'; }md-radio-group.md-THEME_NAME-theme.md-focused:not(:empty).md-primary .md-checked ._md-container:before,md-radio-group.md-THEME_NAME-theme.md-focused:not(:empty) .md-checked.md-primary ._md-container:before {  background-color: '{{primary-color-0.26}}'; }md-radio-group.md-THEME_NAME-theme.md-focused:not(:empty).md-warn .md-checked ._md-container:before,md-radio-group.md-THEME_NAME-theme.md-focused:not(:empty) .md-checked.md-warn ._md-container:before {  background-color: '{{warn-color-0.26}}'; }md-sidenav.md-THEME_NAME-theme, md-sidenav.md-THEME_NAME-theme md-content {  background-color: '{{background-hue-1}}'; }md-select.md-THEME_NAME-theme[disabled] ._md-select-value {  border-bottom-color: transparent;  background-image: linear-gradient(to right, \"{{foreground-3}}\" 0%, \"{{foreground-3}}\" 33%, transparent 0%);  background-image: -ms-linear-gradient(left, transparent 0%, \"{{foreground-3}}\" 100%); }md-select.md-THEME_NAME-theme ._md-select-value {  border-bottom-color: '{{foreground-4}}'; }  md-select.md-THEME_NAME-theme ._md-select-value._md-select-placeholder {    color: '{{foreground-3}}'; }md-select.md-THEME_NAME-theme.ng-invalid.ng-dirty ._md-select-value {  color: '{{warn-A700}}' !important;  border-bottom-color: '{{warn-A700}}' !important; }md-select.md-THEME_NAME-theme:not([disabled]):focus ._md-select-value {  border-bottom-color: '{{primary-color}}';  color: '{{ foreground-1 }}'; }  md-select.md-THEME_NAME-theme:not([disabled]):focus ._md-select-value._md-select-placeholder {    color: '{{ foreground-1 }}'; }md-select.md-THEME_NAME-theme:not([disabled]):focus.md-accent ._md-select-value {  border-bottom-color: '{{accent-color}}'; }md-select.md-THEME_NAME-theme:not([disabled]):focus.md-warn ._md-select-value {  border-bottom-color: '{{warn-color}}'; }md-select.md-THEME_NAME-theme[disabled] ._md-select-value {  color: '{{foreground-3}}'; }  md-select.md-THEME_NAME-theme[disabled] ._md-select-value._md-select-placeholder {    color: '{{foreground-3}}'; }md-select-menu.md-THEME_NAME-theme md-content {  background: '{{background-A100}}'; }  md-select-menu.md-THEME_NAME-theme md-content md-optgroup {    color: '{{background-600-0.87}}'; }  md-select-menu.md-THEME_NAME-theme md-content md-option {    color: '{{background-900-0.87}}'; }    md-select-menu.md-THEME_NAME-theme md-content md-option[disabled] ._md-text {      color: '{{background-400-0.87}}'; }    md-select-menu.md-THEME_NAME-theme md-content md-option:not([disabled]):focus, md-select-menu.md-THEME_NAME-theme md-content md-option:not([disabled]):hover {      background: '{{background-200}}'; }    md-select-menu.md-THEME_NAME-theme md-content md-option[selected] {      color: '{{primary-500}}'; }      md-select-menu.md-THEME_NAME-theme md-content md-option[selected]:focus {        color: '{{primary-600}}'; }      md-select-menu.md-THEME_NAME-theme md-content md-option[selected].md-accent {        color: '{{accent-color}}'; }        md-select-menu.md-THEME_NAME-theme md-content md-option[selected].md-accent:focus {          color: '{{accent-A700}}'; }._md-checkbox-enabled.md-THEME_NAME-theme .md-ripple {  color: '{{primary-600}}'; }._md-checkbox-enabled.md-THEME_NAME-theme[selected] .md-ripple {  color: '{{background-600}}'; }._md-checkbox-enabled.md-THEME_NAME-theme .md-ink-ripple {  color: '{{foreground-2}}'; }._md-checkbox-enabled.md-THEME_NAME-theme[selected] .md-ink-ripple {  color: '{{primary-color-0.87}}'; }._md-checkbox-enabled.md-THEME_NAME-theme ._md-icon {  border-color: '{{foreground-2}}'; }._md-checkbox-enabled.md-THEME_NAME-theme[selected] ._md-icon {  background-color: '{{primary-color-0.87}}'; }._md-checkbox-enabled.md-THEME_NAME-theme[selected].md-focused ._md-container:before {  background-color: '{{primary-color-0.26}}'; }._md-checkbox-enabled.md-THEME_NAME-theme[selected] ._md-icon:after {  border-color: '{{primary-contrast-0.87}}'; }._md-checkbox-enabled.md-THEME_NAME-theme .md-indeterminate[disabled] ._md-container {  color: '{{foreground-3}}'; }._md-checkbox-enabled.md-THEME_NAME-theme md-option ._md-text {  color: '{{background-900-0.87}}'; }md-slider.md-THEME_NAME-theme ._md-track {  background-color: '{{foreground-3}}'; }md-slider.md-THEME_NAME-theme ._md-track-ticks {  color: '{{background-contrast}}'; }md-slider.md-THEME_NAME-theme ._md-focus-ring {  background-color: '{{accent-A200-0.2}}'; }md-slider.md-THEME_NAME-theme ._md-disabled-thumb {  border-color: '{{background-color}}';  background-color: '{{background-color}}'; }md-slider.md-THEME_NAME-theme._md-min ._md-thumb:after {  background-color: '{{background-color}}';  border-color: '{{foreground-3}}'; }md-slider.md-THEME_NAME-theme._md-min ._md-focus-ring {  background-color: '{{foreground-3-0.38}}'; }md-slider.md-THEME_NAME-theme._md-min[md-discrete] ._md-thumb:after {  background-color: '{{background-contrast}}';  border-color: transparent; }md-slider.md-THEME_NAME-theme._md-min[md-discrete] ._md-sign {  background-color: '{{background-400}}'; }  md-slider.md-THEME_NAME-theme._md-min[md-discrete] ._md-sign:after {    border-top-color: '{{background-400}}'; }md-slider.md-THEME_NAME-theme._md-min[md-discrete][md-vertical] ._md-sign:after {  border-top-color: transparent;  border-left-color: '{{background-400}}'; }md-slider.md-THEME_NAME-theme ._md-track._md-track-fill {  background-color: '{{accent-color}}'; }md-slider.md-THEME_NAME-theme ._md-thumb:after {  border-color: '{{accent-color}}';  background-color: '{{accent-color}}'; }md-slider.md-THEME_NAME-theme ._md-sign {  background-color: '{{accent-color}}'; }  md-slider.md-THEME_NAME-theme ._md-sign:after {    border-top-color: '{{accent-color}}'; }md-slider.md-THEME_NAME-theme[md-vertical] ._md-sign:after {  border-top-color: transparent;  border-left-color: '{{accent-color}}'; }md-slider.md-THEME_NAME-theme ._md-thumb-text {  color: '{{accent-contrast}}'; }md-slider.md-THEME_NAME-theme.md-warn ._md-focus-ring {  background-color: '{{warn-200-0.38}}'; }md-slider.md-THEME_NAME-theme.md-warn ._md-track._md-track-fill {  background-color: '{{warn-color}}'; }md-slider.md-THEME_NAME-theme.md-warn ._md-thumb:after {  border-color: '{{warn-color}}';  background-color: '{{warn-color}}'; }md-slider.md-THEME_NAME-theme.md-warn ._md-sign {  background-color: '{{warn-color}}'; }  md-slider.md-THEME_NAME-theme.md-warn ._md-sign:after {    border-top-color: '{{warn-color}}'; }md-slider.md-THEME_NAME-theme.md-warn[md-vertical] ._md-sign:after {  border-top-color: transparent;  border-left-color: '{{warn-color}}'; }md-slider.md-THEME_NAME-theme.md-warn ._md-thumb-text {  color: '{{warn-contrast}}'; }md-slider.md-THEME_NAME-theme.md-primary ._md-focus-ring {  background-color: '{{primary-200-0.38}}'; }md-slider.md-THEME_NAME-theme.md-primary ._md-track._md-track-fill {  background-color: '{{primary-color}}'; }md-slider.md-THEME_NAME-theme.md-primary ._md-thumb:after {  border-color: '{{primary-color}}';  background-color: '{{primary-color}}'; }md-slider.md-THEME_NAME-theme.md-primary ._md-sign {  background-color: '{{primary-color}}'; }  md-slider.md-THEME_NAME-theme.md-primary ._md-sign:after {    border-top-color: '{{primary-color}}'; }md-slider.md-THEME_NAME-theme.md-primary[md-vertical] ._md-sign:after {  border-top-color: transparent;  border-left-color: '{{primary-color}}'; }md-slider.md-THEME_NAME-theme.md-primary ._md-thumb-text {  color: '{{primary-contrast}}'; }md-slider.md-THEME_NAME-theme[disabled] ._md-thumb:after {  border-color: transparent; }md-slider.md-THEME_NAME-theme[disabled]:not(._md-min) ._md-thumb:after, md-slider.md-THEME_NAME-theme[disabled][md-discrete] ._md-thumb:after {  background-color: '{{foreground-3}}';  border-color: transparent; }md-slider.md-THEME_NAME-theme[disabled][readonly] ._md-sign {  background-color: '{{background-400}}'; }  md-slider.md-THEME_NAME-theme[disabled][readonly] ._md-sign:after {    border-top-color: '{{background-400}}'; }md-slider.md-THEME_NAME-theme[disabled][readonly][md-vertical] ._md-sign:after {  border-top-color: transparent;  border-left-color: '{{background-400}}'; }md-slider.md-THEME_NAME-theme[disabled][readonly] ._md-disabled-thumb {  border-color: transparent;  background-color: transparent; }md-slider-container[disabled] > *:first-child:not(md-slider),md-slider-container[disabled] > *:last-child:not(md-slider) {  color: '{{foreground-3}}'; }md-switch.md-THEME_NAME-theme .md-ink-ripple {  color: '{{background-500}}'; }md-switch.md-THEME_NAME-theme ._md-thumb {  background-color: '{{background-50}}'; }md-switch.md-THEME_NAME-theme ._md-bar {  background-color: '{{background-500}}'; }md-switch.md-THEME_NAME-theme.md-checked .md-ink-ripple {  color: '{{accent-color}}'; }md-switch.md-THEME_NAME-theme.md-checked ._md-thumb {  background-color: '{{accent-color}}'; }md-switch.md-THEME_NAME-theme.md-checked ._md-bar {  background-color: '{{accent-color-0.5}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-focused ._md-thumb:before {  background-color: '{{accent-color-0.26}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-primary .md-ink-ripple {  color: '{{primary-color}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-primary ._md-thumb {  background-color: '{{primary-color}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-primary ._md-bar {  background-color: '{{primary-color-0.5}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-primary.md-focused ._md-thumb:before {  background-color: '{{primary-color-0.26}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-warn .md-ink-ripple {  color: '{{warn-color}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-warn ._md-thumb {  background-color: '{{warn-color}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-warn ._md-bar {  background-color: '{{warn-color-0.5}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-warn.md-focused ._md-thumb:before {  background-color: '{{warn-color-0.26}}'; }md-switch.md-THEME_NAME-theme[disabled] ._md-thumb {  background-color: '{{background-400}}'; }md-switch.md-THEME_NAME-theme[disabled] ._md-bar {  background-color: '{{foreground-4}}'; }.md-subheader.md-THEME_NAME-theme {  color: '{{ foreground-2-0.23 }}';  background-color: '{{background-default}}'; }  .md-subheader.md-THEME_NAME-theme.md-primary {    color: '{{primary-color}}'; }  .md-subheader.md-THEME_NAME-theme.md-accent {    color: '{{accent-color}}'; }  .md-subheader.md-THEME_NAME-theme.md-warn {    color: '{{warn-color}}'; }md-tabs.md-THEME_NAME-theme md-tabs-wrapper {  background-color: transparent;  border-color: '{{foreground-4}}'; }md-tabs.md-THEME_NAME-theme .md-paginator md-icon {  color: '{{primary-color}}'; }md-tabs.md-THEME_NAME-theme md-ink-bar {  color: '{{accent-color}}';  background: '{{accent-color}}'; }md-tabs.md-THEME_NAME-theme .md-tab {  color: '{{foreground-2}}'; }  md-tabs.md-THEME_NAME-theme .md-tab[disabled], md-tabs.md-THEME_NAME-theme .md-tab[disabled] md-icon {    color: '{{foreground-3}}'; }  md-tabs.md-THEME_NAME-theme .md-tab.md-active, md-tabs.md-THEME_NAME-theme .md-tab.md-active md-icon, md-tabs.md-THEME_NAME-theme .md-tab.md-focused, md-tabs.md-THEME_NAME-theme .md-tab.md-focused md-icon {    color: '{{primary-color}}'; }  md-tabs.md-THEME_NAME-theme .md-tab.md-focused {    background: '{{primary-color-0.1}}'; }  md-tabs.md-THEME_NAME-theme .md-tab .md-ripple-container {    color: '{{accent-A100}}'; }md-tabs.md-THEME_NAME-theme.md-accent > md-tabs-wrapper {  background-color: '{{accent-color}}'; }  md-tabs.md-THEME_NAME-theme.md-accent > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]) {    color: '{{accent-A100}}'; }    md-tabs.md-THEME_NAME-theme.md-accent > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active, md-tabs.md-THEME_NAME-theme.md-accent > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active md-icon, md-tabs.md-THEME_NAME-theme.md-accent > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused, md-tabs.md-THEME_NAME-theme.md-accent > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused md-icon {      color: '{{accent-contrast}}'; }    md-tabs.md-THEME_NAME-theme.md-accent > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused {      background: '{{accent-contrast-0.1}}'; }  md-tabs.md-THEME_NAME-theme.md-accent > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-ink-bar {    color: '{{primary-600-1}}';    background: '{{primary-600-1}}'; }md-tabs.md-THEME_NAME-theme.md-primary > md-tabs-wrapper {  background-color: '{{primary-color}}'; }  md-tabs.md-THEME_NAME-theme.md-primary > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]) {    color: '{{primary-100}}'; }    md-tabs.md-THEME_NAME-theme.md-primary > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active, md-tabs.md-THEME_NAME-theme.md-primary > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active md-icon, md-tabs.md-THEME_NAME-theme.md-primary > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused, md-tabs.md-THEME_NAME-theme.md-primary > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused md-icon {      color: '{{primary-contrast}}'; }    md-tabs.md-THEME_NAME-theme.md-primary > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused {      background: '{{primary-contrast-0.1}}'; }md-tabs.md-THEME_NAME-theme.md-warn > md-tabs-wrapper {  background-color: '{{warn-color}}'; }  md-tabs.md-THEME_NAME-theme.md-warn > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]) {    color: '{{warn-100}}'; }    md-tabs.md-THEME_NAME-theme.md-warn > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active, md-tabs.md-THEME_NAME-theme.md-warn > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active md-icon, md-tabs.md-THEME_NAME-theme.md-warn > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused, md-tabs.md-THEME_NAME-theme.md-warn > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused md-icon {      color: '{{warn-contrast}}'; }    md-tabs.md-THEME_NAME-theme.md-warn > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused {      background: '{{warn-contrast-0.1}}'; }md-toolbar > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper {  background-color: '{{primary-color}}'; }  md-toolbar > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]) {    color: '{{primary-100}}'; }    md-toolbar > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active, md-toolbar > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active md-icon, md-toolbar > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused, md-toolbar > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused md-icon {      color: '{{primary-contrast}}'; }    md-toolbar > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused {      background: '{{primary-contrast-0.1}}'; }md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper {  background-color: '{{accent-color}}'; }  md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]) {    color: '{{accent-A100}}'; }    md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active, md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active md-icon, md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused, md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused md-icon {      color: '{{accent-contrast}}'; }    md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused {      background: '{{accent-contrast-0.1}}'; }  md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-ink-bar {    color: '{{primary-600-1}}';    background: '{{primary-600-1}}'; }md-toolbar.md-warn > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper {  background-color: '{{warn-color}}'; }  md-toolbar.md-warn > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]) {    color: '{{warn-100}}'; }    md-toolbar.md-warn > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active, md-toolbar.md-warn > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-active md-icon, md-toolbar.md-warn > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused, md-toolbar.md-warn > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused md-icon {      color: '{{warn-contrast}}'; }    md-toolbar.md-warn > md-tabs.md-THEME_NAME-theme > md-tabs-wrapper > md-tabs-canvas > md-pagination-wrapper > md-tab-item:not([disabled]).md-focused {      background: '{{warn-contrast-0.1}}'; }md-toast.md-THEME_NAME-theme .md-toast-content {  background-color: #323232;  color: '{{background-50}}'; }  md-toast.md-THEME_NAME-theme .md-toast-content .md-button {    color: '{{background-50}}'; }    md-toast.md-THEME_NAME-theme .md-toast-content .md-button.md-highlight {      color: '{{accent-color}}'; }      md-toast.md-THEME_NAME-theme .md-toast-content .md-button.md-highlight.md-primary {        color: '{{primary-color}}'; }      md-toast.md-THEME_NAME-theme .md-toast-content .md-button.md-highlight.md-warn {        color: '{{warn-color}}'; }md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar) {  background-color: '{{primary-color}}';  color: '{{primary-contrast}}'; }  md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar) md-icon {    color: '{{primary-contrast}}';    fill: '{{primary-contrast}}'; }  md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar) .md-button[disabled] md-icon {    color: '{{primary-contrast-0.26}}';    fill: '{{primary-contrast-0.26}}'; }  md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar).md-accent {    background-color: '{{accent-color}}';    color: '{{accent-contrast}}'; }    md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar).md-accent .md-ink-ripple {      color: '{{accent-contrast}}'; }    md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar).md-accent md-icon {      color: '{{accent-contrast}}';      fill: '{{accent-contrast}}'; }    md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar).md-accent .md-button[disabled] md-icon {      color: '{{accent-contrast-0.26}}';      fill: '{{accent-contrast-0.26}}'; }  md-toolbar.md-THEME_NAME-theme:not(.md-menu-toolbar).md-warn {    background-color: '{{warn-color}}';    color: '{{warn-contrast}}'; }md-tooltip.md-THEME_NAME-theme {  color: '{{background-A100}}'; }  md-tooltip.md-THEME_NAME-theme ._md-content {    background-color: '{{foreground-2}}'; }");
}()}(window,window.angular),window.ngMaterial={version:{full:"1.1.0-rc.5"}}},{}],17:[function(e,t,r){e("angular"),e("angular-animate"),e("angular-aria"),e("./angular-material"),t.exports="ngMaterial"},{"./angular-material":16,angular:"angular","angular-animate":2,"angular-aria":4}],18:[function(e,t,r){!function(e,t){"use strict";function r(){function e(e,t){if(e)return i(e)?e.indexOf(t)>=0:e.hasOwnProperty(t)}return["$animate",function(t){return{restrict:"AE",transclude:"element",priority:1,terminal:!0,require:"^^ngMessages",link:function(r,n,o,a,s){var c,l=n[0],u=o.ngMessage||o.when,d=o.ngMessageExp||o.whenExp,p=function(e){c=e?i(e)?e:e.split(/[\s,]+/):null,a.reRender()};d?(p(r.$eval(d)),r.$watchCollection(d,p)):p(u);var f,h;a.register(l,h={test:function(t){return e(c,t)},attach:function(){f||s(function(e,r){t.enter(e,null,n),f=e;var i=f.$$attachId=a.getAttachId();f.on("$destroy",function(){f&&f.$$attachId===i&&(a.deregister(l),h.detach()),r.$destroy()})})},detach:function(){if(f){var e=f;f=null,t.leave(e)}}})}}}]}var n,i,o,a;t.module("ngMessages",[],function(){n=t.forEach,i=t.isArray,o=t.isString,a=t.element}).info({angularVersion:"1.6.3"}).directive("ngMessages",["$animate",function(e){function t(e,t){return o(t)&&0===t.length||r(e.$eval(t))}function r(e){return o(e)?e.length:!!e}var i="ng-active",a="ng-inactive";return{require:"ngMessages",restrict:"AE",controller:["$element","$scope","$attrs",function(o,s,c){function l(e,t){for(var r=t,n=[];r&&r!==e;){var i=r.$$ngMessageNode;if(i&&i.length)return v[i];r.childNodes.length&&n.indexOf(r)===-1?(n.push(r),r=r.childNodes[r.childNodes.length-1]):r.previousSibling?r=r.previousSibling:(r=r.parentNode,n.push(r))}}function u(e,t,r){var n=v[r];if(p.head){var i=l(e,t);i?(n.next=i.next,i.next=n):(n.next=p.head,p.head=n)}else p.head=n}function d(e,t,r){var n=v[r],i=l(e,t);i?i.next=n.next:p.head=n.next}var p=this,f=0,h=0;this.getAttachId=function(){return h++};var m,g,v=this.messages={};this.render=function(l){l=l||{},m=!1,g=l;for(var u=t(s,c.ngMessagesMultiple)||t(s,c.multiple),d=[],f={},h=p.head,v=!1,y=0;null!=h;){y++;var b=h.message,S=!1;v||n(l,function(e,t){if(!S&&r(e)&&b.test(t)){if(f[t])return;f[t]=!0,S=!0,b.attach()}}),S?v=!u:d.push(b),h=h.next}n(d,function(e){e.detach()}),d.length!==y?e.setClass(o,i,a):e.setClass(o,a,i)},s.$watchCollection(c.ngMessages||c.for,p.render),o.on("$destroy",function(){n(v,function(e){e.message.detach()})}),this.reRender=function(){m||(m=!0,s.$evalAsync(function(){m&&g&&p.render(g)}))},this.register=function(e,t){var r=f.toString();v[r]={message:t},u(o[0],e,r),e.$$ngMessageNode=r,f++,p.reRender()},this.deregister=function(e){var t=e.$$ngMessageNode;delete e.$$ngMessageNode,d(o[0],e,t),delete v[t],p.reRender()}}]}}]).directive("ngMessagesInclude",["$templateRequest","$document","$compile",function(e,t,r){function n(e,n){var i=r.$$createComment?r.$$createComment("ngMessagesInclude",n):t[0].createComment(" ngMessagesInclude: "+n+" "),o=a(i);e.after(o),e.remove()}return{restrict:"AE",require:"^^ngMessages",link:function(t,i,a){var s=a.ngMessagesInclude||a.src;e(s).then(function(e){t.$$destroyed||(o(e)&&!e.trim()?n(i,s):r(e)(t,function(e){i.after(e),n(i,s)}))})}}}]).directive("ngMessage",r()).directive("ngMessageExp",r())}(window,window.angular)},{}],19:[function(e,t,r){e("./angular-messages"),t.exports="ngMessages"},{"./angular-messages":18}],20:[function(e,t,r){(function(n){!function(e){if("object"==typeof r&&"undefined"!=typeof t)t.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof n?n:"undefined"!=typeof self?self:this,i.angularPerfectScrollbar2=e()}}(function(){return function t(r,n,i){function o(s,c){if(!n[s]){if(!r[s]){var l="function"==typeof e&&e;if(!c&&l)return l(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[s]={exports:{}};r[s][0].call(d.exports,function(e){var t=r[s][1][e];return o(t?t:e)},d,d.exports,t,r,n,i)}return n[s].exports}for(var a="function"==typeof e&&e,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,r){var n="/* perfect-scrollbar v0.6.11 */\n.ps-container {\n  -ms-touch-action: none;\n  touch-action: none;\n  overflow: hidden !important;\n  -ms-overflow-style: none;\n}\n@supports (-ms-overflow-style: none) {\n  .ps-container {\n    overflow: auto !important;\n  }\n}\n@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n  .ps-container {\n    overflow: auto !important;\n  }\n}\n.ps-container.ps-active-x>.ps-scrollbar-x-rail,\n.ps-container.ps-active-y>.ps-scrollbar-y-rail {\n  display: block;\n  background-color: transparent;\n}\n.ps-container.ps-in-scrolling {\n  pointer-events: none;\n}\n.ps-container.ps-in-scrolling.ps-x>.ps-scrollbar-x-rail {\n  background-color: #eee;\n  opacity: 0.9;\n}\n.ps-container.ps-in-scrolling.ps-x>.ps-scrollbar-x-rail>.ps-scrollbar-x {\n  background-color: #999;\n}\n.ps-container.ps-in-scrolling.ps-y>.ps-scrollbar-y-rail {\n  background-color: #eee;\n  opacity: 0.9;\n}\n.ps-container.ps-in-scrolling.ps-y>.ps-scrollbar-y-rail>.ps-scrollbar-y {\n  background-color: #999;\n}\n.ps-container>.ps-scrollbar-x-rail {\n  display: none;\n  position: absolute;\n  -webkit-border-radius: 4px;\n  -moz-border-radius: 4px;\n  border-radius: 4px;\n  opacity: 0;\n  -webkit-transition: background-color .2s linear, opacity .2s linear;\n  -moz-transition: background-color .2s linear, opacity .2s linear;\n  -o-transition: background-color .2s linear, opacity .2s linear;\n  transition: background-color .2s linear, opacity .2s linear;\n  bottom: 3px;\n  height: 8px;\n}\n.ps-container>.ps-scrollbar-x-rail>.ps-scrollbar-x {\n  position: absolute;\n  background-color: #aaa;\n  -webkit-border-radius: 4px;\n  -moz-border-radius: 4px;\n  border-radius: 4px;\n  -webkit-transition: background-color .2s linear;\n  -moz-transition: background-color .2s linear;\n  -o-transition: background-color .2s linear;\n  transition: background-color .2s linear;\n  bottom: 0;\n  height: 8px;\n}\n.ps-container>.ps-scrollbar-y-rail {\n  display: none;\n  position: absolute;\n  -webkit-border-radius: 4px;\n  -moz-border-radius: 4px;\n  border-radius: 4px;\n  opacity: 0;\n  -webkit-transition: background-color .2s linear, opacity .2s linear;\n  -moz-transition: background-color .2s linear, opacity .2s linear;\n  -o-transition: background-color .2s linear, opacity .2s linear;\n  transition: background-color .2s linear, opacity .2s linear;\n  right: 3px;\n  width: 8px;\n}\n.ps-container>.ps-scrollbar-y-rail>.ps-scrollbar-y {\n  position: absolute;\n  background-color: #aaa;\n  -webkit-border-radius: 4px;\n  -moz-border-radius: 4px;\n  border-radius: 4px;\n  -webkit-transition: background-color .2s linear;\n  -moz-transition: background-color .2s linear;\n  -o-transition: background-color .2s linear;\n  transition: background-color .2s linear;\n  right: 0;\n  width: 8px;\n}\n.ps-container:hover.ps-in-scrolling {\n  pointer-events: none;\n}\n.ps-container:hover.ps-in-scrolling.ps-x>.ps-scrollbar-x-rail {\n  background-color: #eee;\n  opacity: 0.9;\n}\n.ps-container:hover.ps-in-scrolling.ps-x>.ps-scrollbar-x-rail>.ps-scrollbar-x {\n  background-color: #999;\n}\n.ps-container:hover.ps-in-scrolling.ps-y>.ps-scrollbar-y-rail {\n  background-color: #eee;\n  opacity: 0.9;\n}\n.ps-container:hover.ps-in-scrolling.ps-y>.ps-scrollbar-y-rail>.ps-scrollbar-y {\n  background-color: #999;\n}\n.ps-container:hover>.ps-scrollbar-x-rail,\n.ps-container:hover>.ps-scrollbar-y-rail {\n  opacity: 0.6;\n}\n.ps-container:hover>.ps-scrollbar-x-rail:hover {\n  background-color: #eee;\n  opacity: 0.9;\n}\n.ps-container:hover>.ps-scrollbar-x-rail:hover>.ps-scrollbar-x {\n  background-color: #999;\n}\n.ps-container:hover>.ps-scrollbar-y-rail:hover {\n  background-color: #eee;\n  opacity: 0.9;\n}\n.ps-container:hover>.ps-scrollbar-y-rail:hover>.ps-scrollbar-y {\n  background-color: #999;\n}\n";e("browserify-css").createStyle(n,{href:"app.css"}),t.exports=n},{"browserify-css":3}],2:[function(e,t,r){(function(r){var n=e("perfect-scrollbar"),i="undefined"!=typeof window?window.angular:"undefined"!=typeof r?r.angular:null;e("./app.css"),r.PerfectScrollbar=n,t.exports="angular-perfect-scrollbar-2",i.module(t.exports,[]).directive("perfectScrollbar",["$parse",function(e){return{restrict:"EA",transclude:!0,template:"<div><div ng-transclude></div></div>",replace:!0,link:function(r,i,o){var a=e(o.opts)(r),s=i[0];n.initialize(s,a),obs_opts={childList:!0,subtree:!0,characterData:!0},"function"==typeof MutationObserver?(obs=new MutationObserver(function(){n.update(s)}),obs.observe(s,obs_opts)):console.warn(t.exports+": Your browser does not support MutationObserver."),r.$watch("update",function(e,t){e&&(n.update(s),r.update=!1)}),r.$on("destroy",function(){obs.disconnect(),n.destroy(s)})}}}])}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./app.css":1,"perfect-scrollbar":4}],3:[function(e,t,r){"use strict";t.exports={createLink:function(e,t){var r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("link");n.href=e,n.rel="stylesheet";for(var i in t)if(t.hasOwnProperty(i)){var o=t[i];n.setAttribute("data-"+i,o)}r.appendChild(n)},createStyle:function(e,t){var r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css";for(var i in t)if(t.hasOwnProperty(i)){var o=t[i];n.setAttribute("data-"+i,o)}n.sheet?(n.innerHTML=e,n.sheet.cssText=e,r.appendChild(n)):n.styleSheet?(r.appendChild(n),n.styleSheet.cssText=e):(n.appendChild(document.createTextNode(e)),r.appendChild(n))}}},{}],4:[function(e,t,r){"use strict";t.exports=e("./src/js/main")},{"./src/js/main":10}],5:[function(e,t,r){"use strict";function n(e,t){var r=e.className.split(" ");r.indexOf(t)<0&&r.push(t),e.className=r.join(" ")}function i(e,t){var r=e.className.split(" "),n=r.indexOf(t);n>=0&&r.splice(n,1),e.className=r.join(" ")}r.add=function(e,t){e.classList?e.classList.add(t):n(e,t)},r.remove=function(e,t){e.classList?e.classList.remove(t):i(e,t)},r.list=function(e){return e.classList?Array.prototype.slice.apply(e.classList):e.className.split(" ")}},{}],6:[function(e,t,r){"use strict";function n(e,t){return window.getComputedStyle(e)[t]}function i(e,t,r){return"number"==typeof r&&(r=r.toString()+"px"),e.style[t]=r,e}function o(e,t){for(var r in t){var n=t[r];"number"==typeof n&&(n=n.toString()+"px"),e.style[r]=n}return e}var a={};a.e=function(e,t){var r=document.createElement(e);return r.className=t,r},a.appendTo=function(e,t){return t.appendChild(e),e},a.css=function(e,t,r){return"object"==typeof t?o(e,t):"undefined"==typeof r?n(e,t):i(e,t,r)},a.matches=function(e,t){return"undefined"!=typeof e.matches?e.matches(t):"undefined"!=typeof e.matchesSelector?e.matchesSelector(t):"undefined"!=typeof e.webkitMatchesSelector?e.webkitMatchesSelector(t):"undefined"!=typeof e.mozMatchesSelector?e.mozMatchesSelector(t):"undefined"!=typeof e.msMatchesSelector?e.msMatchesSelector(t):void 0},a.remove=function(e){"undefined"!=typeof e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)},a.queryChildren=function(e,t){return Array.prototype.filter.call(e.childNodes,function(e){return a.matches(e,t)})},t.exports=a},{}],7:[function(e,t,r){"use strict";var n=function(e){this.element=e,this.events={}};n.prototype.bind=function(e,t){"undefined"==typeof this.events[e]&&(this.events[e]=[]),this.events[e].push(t),this.element.addEventListener(e,t,!1)},n.prototype.unbind=function(e,t){var r="undefined"!=typeof t;this.events[e]=this.events[e].filter(function(n){return!(!r||n===t)||(this.element.removeEventListener(e,n,!1),!1)},this)},n.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)};var i=function(){this.eventElements=[]};i.prototype.eventElement=function(e){var t=this.eventElements.filter(function(t){return t.element===e})[0];return"undefined"==typeof t&&(t=new n(e),this.eventElements.push(t)),t},i.prototype.bind=function(e,t,r){this.eventElement(e).bind(t,r)},i.prototype.unbind=function(e,t,r){this.eventElement(e).unbind(t,r)},i.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},i.prototype.once=function(e,t,r){var n=this.eventElement(e),i=function(e){n.unbind(t,i),r(e)};n.bind(t,i)},t.exports=i},{}],8:[function(e,t,r){"use strict";t.exports=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}()},{}],9:[function(e,t,r){"use strict";var n=e("./class"),i=e("./dom"),o=r.toInt=function(e){return parseInt(e,10)||0},a=r.clone=function(e){if(null===e)return null;if(e.constructor===Array)return e.map(a);if("object"==typeof e){var t={};for(var r in e)t[r]=a(e[r]);return t}return e};r.extend=function(e,t){var r=a(e);for(var n in t)r[n]=a(t[n]);return r},r.isEditable=function(e){return i.matches(e,"input,[contenteditable]")||i.matches(e,"select,[contenteditable]")||i.matches(e,"textarea,[contenteditable]")||i.matches(e,"button,[contenteditable]")},r.removePsClasses=function(e){for(var t=n.list(e),r=0;r<t.length;r++){var i=t[r];0===i.indexOf("ps-")&&n.remove(e,i)}},r.outerWidth=function(e){return o(i.css(e,"width"))+o(i.css(e,"paddingLeft"))+o(i.css(e,"paddingRight"))+o(i.css(e,"borderLeftWidth"))+o(i.css(e,"borderRightWidth"))},r.startScrolling=function(e,t){n.add(e,"ps-in-scrolling"),"undefined"!=typeof t?n.add(e,"ps-"+t):(n.add(e,"ps-x"),n.add(e,"ps-y"))},r.stopScrolling=function(e,t){n.remove(e,"ps-in-scrolling"),"undefined"!=typeof t?n.remove(e,"ps-"+t):(n.remove(e,"ps-x"),n.remove(e,"ps-y"))},r.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}},{"./class":5,"./dom":6}],10:[function(e,t,r){"use strict";var n=e("./plugin/destroy"),i=e("./plugin/initialize"),o=e("./plugin/update");t.exports={initialize:i,update:o,destroy:n}},{"./plugin/destroy":12,"./plugin/initialize":20,"./plugin/update":24}],11:[function(e,t,r){"use strict";t.exports={handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,stopPropagationOnClick:!0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}},{}],12:[function(e,t,r){"use strict";var n=e("../lib/helper"),i=e("../lib/dom"),o=e("./instances");t.exports=function(e){var t=o.get(e);t&&(t.event.unbindAll(),i.remove(t.scrollbarX),i.remove(t.scrollbarY),i.remove(t.scrollbarXRail),i.remove(t.scrollbarYRail),n.removePsClasses(e),o.remove(e))}},{"../lib/dom":6,"../lib/helper":9,"./instances":21}],13:[function(e,t,r){"use strict";function n(e,t){function r(e){return e.getBoundingClientRect()}var n=function(e){e.stopPropagation()};t.settings.stopPropagationOnClick&&t.event.bind(t.scrollbarY,"click",n),t.event.bind(t.scrollbarYRail,"click",function(n){var o=i.toInt(t.scrollbarYHeight/2),c=t.railYRatio*(n.pageY-window.pageYOffset-r(t.scrollbarYRail).top-o),l=t.railYRatio*(t.railYHeight-t.scrollbarYHeight),u=c/l;u<0?u=0:u>1&&(u=1),s(e,"top",(t.contentHeight-t.containerHeight)*u),a(e),n.stopPropagation()}),t.settings.stopPropagationOnClick&&t.event.bind(t.scrollbarX,"click",n),t.event.bind(t.scrollbarXRail,"click",function(n){var o=i.toInt(t.scrollbarXWidth/2),c=t.railXRatio*(n.pageX-window.pageXOffset-r(t.scrollbarXRail).left-o),l=t.railXRatio*(t.railXWidth-t.scrollbarXWidth),u=c/l;u<0?u=0:u>1&&(u=1),s(e,"left",(t.contentWidth-t.containerWidth)*u-t.negativeScrollAdjustment),a(e),n.stopPropagation()})}var i=e("../../lib/helper"),o=e("../instances"),a=e("../update-geometry"),s=e("../update-scroll");t.exports=function(e){var t=o.get(e);n(e,t)}},{"../../lib/helper":9,"../instances":21,"../update-geometry":22,"../update-scroll":23}],14:[function(e,t,r){"use strict";function n(e,t){function r(r){var i=n+r*t.railXRatio,a=Math.max(0,t.scrollbarXRail.getBoundingClientRect().left)+t.railXRatio*(t.railXWidth-t.scrollbarXWidth);i<0?t.scrollbarXLeft=0:i>a?t.scrollbarXLeft=a:t.scrollbarXLeft=i;var s=o.toInt(t.scrollbarXLeft*(t.contentWidth-t.containerWidth)/(t.containerWidth-t.railXRatio*t.scrollbarXWidth))-t.negativeScrollAdjustment;l(e,"left",s)}var n=null,i=null,s=function(t){r(t.pageX-i),c(e),t.stopPropagation(),t.preventDefault()},u=function(){o.stopScrolling(e,"x"),t.event.unbind(t.ownerDocument,"mousemove",s)};t.event.bind(t.scrollbarX,"mousedown",function(r){i=r.pageX,n=o.toInt(a.css(t.scrollbarX,"left"))*t.railXRatio,o.startScrolling(e,"x"),t.event.bind(t.ownerDocument,"mousemove",s),t.event.once(t.ownerDocument,"mouseup",u),r.stopPropagation(),r.preventDefault()})}function i(e,t){function r(r){var i=n+r*t.railYRatio,a=Math.max(0,t.scrollbarYRail.getBoundingClientRect().top)+t.railYRatio*(t.railYHeight-t.scrollbarYHeight);i<0?t.scrollbarYTop=0:i>a?t.scrollbarYTop=a:t.scrollbarYTop=i;var s=o.toInt(t.scrollbarYTop*(t.contentHeight-t.containerHeight)/(t.containerHeight-t.railYRatio*t.scrollbarYHeight));l(e,"top",s)}var n=null,i=null,s=function(t){r(t.pageY-i),c(e),t.stopPropagation(),t.preventDefault()},u=function(){o.stopScrolling(e,"y"),t.event.unbind(t.ownerDocument,"mousemove",s)};t.event.bind(t.scrollbarY,"mousedown",function(r){i=r.pageY,n=o.toInt(a.css(t.scrollbarY,"top"))*t.railYRatio,o.startScrolling(e,"y"),t.event.bind(t.ownerDocument,"mousemove",s),t.event.once(t.ownerDocument,"mouseup",u),r.stopPropagation(),r.preventDefault()})}var o=e("../../lib/helper"),a=e("../../lib/dom"),s=e("../instances"),c=e("../update-geometry"),l=e("../update-scroll");t.exports=function(e){var t=s.get(e);n(e,t),i(e,t)}},{"../../lib/dom":6,"../../lib/helper":9,"../instances":21,"../update-geometry":22,"../update-scroll":23}],15:[function(e,t,r){"use strict";function n(e,t){function r(r,n){var i=e.scrollTop;if(0===r){if(!t.scrollbarYActive)return!1;if(0===i&&n>0||i>=t.contentHeight-t.containerHeight&&n<0)return!t.settings.wheelPropagation}var o=e.scrollLeft;if(0===n){if(!t.scrollbarXActive)return!1;if(0===o&&r<0||o>=t.contentWidth-t.containerWidth&&r>0)return!t.settings.wheelPropagation}return!0}var n=!1;t.event.bind(e,"mouseenter",function(){n=!0}),t.event.bind(e,"mouseleave",function(){n=!1});var a=!1;t.event.bind(t.ownerDocument,"keydown",function(l){if(!l.isDefaultPrevented||!l.isDefaultPrevented()){var u=o.matches(t.scrollbarX,":focus")||o.matches(t.scrollbarY,":focus");if(n||u){var d=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(d){if("IFRAME"===d.tagName)d=d.contentDocument.activeElement;else for(;d.shadowRoot;)d=d.shadowRoot.activeElement;if(i.isEditable(d))return}var p=0,f=0;switch(l.which){case 37:p=-30;break;case 38:f=30;break;case 39:p=30;break;case 40:f=-30;break;case 33:f=90;break;case 32:f=l.shiftKey?90:-90;break;case 34:f=-90;break;case 35:f=l.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:f=l.ctrlKey?e.scrollTop:t.containerHeight;break;default:return}c(e,"top",e.scrollTop-f),c(e,"left",e.scrollLeft+p),s(e),a=r(p,f),a&&l.preventDefault()}}})}var i=e("../../lib/helper"),o=e("../../lib/dom"),a=e("../instances"),s=e("../update-geometry"),c=e("../update-scroll");t.exports=function(e){var t=a.get(e);n(e,t)}},{"../../lib/dom":6,"../../lib/helper":9,"../instances":21,"../update-geometry":22,"../update-scroll":23}],16:[function(e,t,r){"use strict";function n(e,t){function r(r,n){var i=e.scrollTop;if(0===r){if(!t.scrollbarYActive)return!1;if(0===i&&n>0||i>=t.contentHeight-t.containerHeight&&n<0)return!t.settings.wheelPropagation}var o=e.scrollLeft;if(0===n){if(!t.scrollbarXActive)return!1;if(0===o&&r<0||o>=t.contentWidth-t.containerWidth&&r>0)return!t.settings.wheelPropagation}return!0}function n(e){var t=e.deltaX,r=-1*e.deltaY;return"undefined"!=typeof t&&"undefined"!=typeof r||(t=-1*e.wheelDeltaX/6,r=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,r*=10),t!==t&&r!==r&&(t=0,r=e.wheelDelta),[t,r]}function i(t,r){var n=e.querySelector("textarea:hover, .ps-child:hover");if(n){if("TEXTAREA"!==n.tagName&&!window.getComputedStyle(n).overflow.match(/(scroll|auto)/))return!1;var i=n.scrollHeight-n.clientHeight;if(i>0&&!(0===n.scrollTop&&r>0||n.scrollTop===i&&r<0))return!0;var o=n.scrollLeft-n.clientWidth;if(o>0&&!(0===n.scrollLeft&&t<0||n.scrollLeft===o&&t>0))return!0}return!1}function s(s){var l=n(s),u=l[0],d=l[1];i(u,d)||(c=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(d?a(e,"top",e.scrollTop-d*t.settings.wheelSpeed):a(e,"top",e.scrollTop+u*t.settings.wheelSpeed),c=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(u?a(e,"left",e.scrollLeft+u*t.settings.wheelSpeed):a(e,"left",e.scrollLeft-d*t.settings.wheelSpeed),c=!0):(a(e,"top",e.scrollTop-d*t.settings.wheelSpeed),a(e,"left",e.scrollLeft+u*t.settings.wheelSpeed)),o(e),c=c||r(u,d),c&&(s.stopPropagation(),s.preventDefault()))}var c=!1;"undefined"!=typeof window.onwheel?t.event.bind(e,"wheel",s):"undefined"!=typeof window.onmousewheel&&t.event.bind(e,"mousewheel",s)}var i=e("../instances"),o=e("../update-geometry"),a=e("../update-scroll");t.exports=function(e){var t=i.get(e);n(e,t)}},{"../instances":21,"../update-geometry":22,"../update-scroll":23}],17:[function(e,t,r){"use strict";function n(e,t){t.event.bind(e,"scroll",function(){o(e)})}var i=e("../instances"),o=e("../update-geometry");t.exports=function(e){var t=i.get(e);n(e,t)}},{"../instances":21,"../update-geometry":22}],18:[function(e,t,r){"use strict";function n(e,t){function r(){var e=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===e.toString().length?null:e.getRangeAt(0).commonAncestorContainer}function n(){l||(l=setInterval(function(){return o.get(e)?(s(e,"top",e.scrollTop+u.top),s(e,"left",e.scrollLeft+u.left),void a(e)):void clearInterval(l)},50))}function c(){l&&(clearInterval(l),l=null),i.stopScrolling(e)}var l=null,u={top:0,left:0},d=!1;t.event.bind(t.ownerDocument,"selectionchange",function(){e.contains(r())?d=!0:(d=!1,c())}),t.event.bind(window,"mouseup",function(){d&&(d=!1,c())}),t.event.bind(window,"mousemove",function(t){if(d){var r={x:t.pageX,y:t.pageY},o={left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight};r.x<o.left+3?(u.left=-5,i.startScrolling(e,"x")):r.x>o.right-3?(u.left=5,i.startScrolling(e,"x")):u.left=0,r.y<o.top+3?(o.top+3-r.y<5?u.top=-5:u.top=-20,i.startScrolling(e,"y")):r.y>o.bottom-3?(r.y-o.bottom+3<5?u.top=5:u.top=20,i.startScrolling(e,"y")):u.top=0,0===u.top&&0===u.left?c():n()}})}var i=e("../../lib/helper"),o=e("../instances"),a=e("../update-geometry"),s=e("../update-scroll");t.exports=function(e){var t=o.get(e);n(e,t)}},{"../../lib/helper":9,"../instances":21,"../update-geometry":22,"../update-scroll":23}],19:[function(e,t,r){"use strict";function n(e,t,r,n){function i(r,n){var i=e.scrollTop,o=e.scrollLeft,a=Math.abs(r),s=Math.abs(n);if(s>a){if(n<0&&i===t.contentHeight-t.containerHeight||n>0&&0===i)return!t.settings.swipePropagation}else if(a>s&&(r<0&&o===t.contentWidth-t.containerWidth||r>0&&0===o))return!t.settings.swipePropagation;return!0}function c(t,r){s(e,"top",e.scrollTop-r),s(e,"left",e.scrollLeft-t),a(e)}function l(){S=!0}function u(){S=!1}function d(e){return e.targetTouches?e.targetTouches[0]:e}function p(e){return!(!e.targetTouches||1!==e.targetTouches.length)||!(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE)}function f(e){if(p(e)){_=!0;var t=d(e);g.pageX=t.pageX,g.pageY=t.pageY,v=(new Date).getTime(),null!==b&&clearInterval(b),e.stopPropagation()}}function h(e){if(!_&&t.settings.swipePropagation&&f(e),!S&&_&&p(e)){var r=d(e),n={pageX:r.pageX,pageY:r.pageY},o=n.pageX-g.pageX,a=n.pageY-g.pageY;c(o,a),g=n;var s=(new Date).getTime(),l=s-v;l>0&&(y.x=o/l,y.y=a/l,v=s),i(o,a)&&(e.stopPropagation(),e.preventDefault())}}function m(){!S&&_&&(_=!1,clearInterval(b),b=setInterval(function(){return o.get(e)?Math.abs(y.x)<.01&&Math.abs(y.y)<.01?void clearInterval(b):(c(30*y.x,30*y.y),y.x*=.8,void(y.y*=.8)):void clearInterval(b)},10))}var g={},v=0,y={},b=null,S=!1,_=!1;r&&(t.event.bind(window,"touchstart",l),t.event.bind(window,"touchend",u),t.event.bind(e,"touchstart",f),t.event.bind(e,"touchmove",h),t.event.bind(e,"touchend",m)),n&&(window.PointerEvent?(t.event.bind(window,"pointerdown",l),t.event.bind(window,"pointerup",u),t.event.bind(e,"pointerdown",f),t.event.bind(e,"pointermove",h),t.event.bind(e,"pointerup",m)):window.MSPointerEvent&&(t.event.bind(window,"MSPointerDown",l),t.event.bind(window,"MSPointerUp",u),t.event.bind(e,"MSPointerDown",f),t.event.bind(e,"MSPointerMove",h),t.event.bind(e,"MSPointerUp",m)))}var i=e("../../lib/helper"),o=e("../instances"),a=e("../update-geometry"),s=e("../update-scroll");t.exports=function(e){if(i.env.supportsTouch||i.env.supportsIePointer){var t=o.get(e);n(e,t,i.env.supportsTouch,i.env.supportsIePointer)}}},{"../../lib/helper":9,"../instances":21,"../update-geometry":22,"../update-scroll":23}],20:[function(e,t,r){"use strict";var n=e("../lib/helper"),i=e("../lib/class"),o=e("./instances"),a=e("./update-geometry"),s={"click-rail":e("./handler/click-rail"),"drag-scrollbar":e("./handler/drag-scrollbar"),keyboard:e("./handler/keyboard"),wheel:e("./handler/mouse-wheel"),touch:e("./handler/touch"),selection:e("./handler/selection")},c=e("./handler/native-scroll");t.exports=function(e,t){t="object"==typeof t?t:{},i.add(e,"ps-container");var r=o.add(e);r.settings=n.extend(r.settings,t),i.add(e,"ps-theme-"+r.settings.theme),r.settings.handlers.forEach(function(t){s[t](e)}),c(e),a(e)}},{"../lib/class":5,"../lib/helper":9,"./handler/click-rail":13,"./handler/drag-scrollbar":14,"./handler/keyboard":15,"./handler/mouse-wheel":16,"./handler/native-scroll":17,"./handler/selection":18,"./handler/touch":19,"./instances":21,"./update-geometry":22}],21:[function(e,t,r){"use strict";function n(e){function t(){c.add(e,"ps-focus")}function r(){c.remove(e,"ps-focus")}var n=this;n.settings=s.clone(l),n.containerWidth=null,n.containerHeight=null,n.contentWidth=null,n.contentHeight=null,n.isRtl="rtl"===u.css(e,"direction"),n.isNegativeScroll=function(){var t=e.scrollLeft,r=null;return e.scrollLeft=-1,r=e.scrollLeft<0,e.scrollLeft=t,r}(),n.negativeScrollAdjustment=n.isNegativeScroll?e.scrollWidth-e.clientWidth:0,n.event=new d,n.ownerDocument=e.ownerDocument||document,n.scrollbarXRail=u.appendTo(u.e("div","ps-scrollbar-x-rail"),e),n.scrollbarX=u.appendTo(u.e("div","ps-scrollbar-x"),n.scrollbarXRail),n.scrollbarX.setAttribute("tabindex",0),n.event.bind(n.scrollbarX,"focus",t),n.event.bind(n.scrollbarX,"blur",r),n.scrollbarXActive=null,n.scrollbarXWidth=null,n.scrollbarXLeft=null,n.scrollbarXBottom=s.toInt(u.css(n.scrollbarXRail,"bottom")),n.isScrollbarXUsingBottom=n.scrollbarXBottom===n.scrollbarXBottom,n.scrollbarXTop=n.isScrollbarXUsingBottom?null:s.toInt(u.css(n.scrollbarXRail,"top")),n.railBorderXWidth=s.toInt(u.css(n.scrollbarXRail,"borderLeftWidth"))+s.toInt(u.css(n.scrollbarXRail,"borderRightWidth")),u.css(n.scrollbarXRail,"display","block"),n.railXMarginWidth=s.toInt(u.css(n.scrollbarXRail,"marginLeft"))+s.toInt(u.css(n.scrollbarXRail,"marginRight")),u.css(n.scrollbarXRail,"display",""),n.railXWidth=null,n.railXRatio=null,n.scrollbarYRail=u.appendTo(u.e("div","ps-scrollbar-y-rail"),e),n.scrollbarY=u.appendTo(u.e("div","ps-scrollbar-y"),n.scrollbarYRail),n.scrollbarY.setAttribute("tabindex",0),n.event.bind(n.scrollbarY,"focus",t),n.event.bind(n.scrollbarY,"blur",r),n.scrollbarYActive=null,n.scrollbarYHeight=null,n.scrollbarYTop=null,n.scrollbarYRight=s.toInt(u.css(n.scrollbarYRail,"right")),n.isScrollbarYUsingRight=n.scrollbarYRight===n.scrollbarYRight,n.scrollbarYLeft=n.isScrollbarYUsingRight?null:s.toInt(u.css(n.scrollbarYRail,"left")),n.scrollbarYOuterWidth=n.isRtl?s.outerWidth(n.scrollbarY):null,n.railBorderYWidth=s.toInt(u.css(n.scrollbarYRail,"borderTopWidth"))+s.toInt(u.css(n.scrollbarYRail,"borderBottomWidth")),u.css(n.scrollbarYRail,"display","block"),n.railYMarginHeight=s.toInt(u.css(n.scrollbarYRail,"marginTop"))+s.toInt(u.css(n.scrollbarYRail,"marginBottom")),u.css(n.scrollbarYRail,"display",""),n.railYHeight=null,n.railYRatio=null}function i(e){return e.getAttribute("data-ps-id")}function o(e,t){e.setAttribute("data-ps-id",t)}function a(e){e.removeAttribute("data-ps-id")}var s=e("../lib/helper"),c=e("../lib/class"),l=e("./default-setting"),u=e("../lib/dom"),d=e("../lib/event-manager"),p=e("../lib/guid"),f={};r.add=function(e){var t=p();return o(e,t),f[t]=new n(e),f[t]},r.remove=function(e){delete f[i(e)],a(e)},r.get=function(e){return f[i(e)]}},{"../lib/class":5,"../lib/dom":6,"../lib/event-manager":7,"../lib/guid":8,"../lib/helper":9,"./default-setting":11}],22:[function(e,t,r){"use strict";function n(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function i(e,t){var r={width:t.railXWidth};t.isRtl?r.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:r.left=e.scrollLeft,t.isScrollbarXUsingBottom?r.bottom=t.scrollbarXBottom-e.scrollTop:r.top=t.scrollbarXTop+e.scrollTop,s.css(t.scrollbarXRail,r);var n={top:e.scrollTop,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?n.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:n.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?n.left=t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:n.left=t.scrollbarYLeft+e.scrollLeft,s.css(t.scrollbarYRail,n),s.css(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),s.css(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}var o=e("../lib/helper"),a=e("../lib/class"),s=e("../lib/dom"),c=e("./instances"),l=e("./update-scroll");t.exports=function(e){var t=c.get(e);t.containerWidth=e.clientWidth,t.containerHeight=e.clientHeight,t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight;var r;e.contains(t.scrollbarXRail)||(r=s.queryChildren(e,".ps-scrollbar-x-rail"),r.length>0&&r.forEach(function(e){s.remove(e)}),s.appendTo(t.scrollbarXRail,e)),e.contains(t.scrollbarYRail)||(r=s.queryChildren(e,".ps-scrollbar-y-rail"),r.length>0&&r.forEach(function(e){s.remove(e)}),s.appendTo(t.scrollbarYRail,e)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=n(t,o.toInt(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=o.toInt((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=n(t,o.toInt(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=o.toInt(e.scrollTop*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),i(e,t),t.scrollbarXActive?a.add(e,"ps-active-x"):(a.remove(e,"ps-active-x"),t.scrollbarXWidth=0,t.scrollbarXLeft=0,l(e,"left",0)),t.scrollbarYActive?a.add(e,"ps-active-y"):(a.remove(e,"ps-active-y"),t.scrollbarYHeight=0,t.scrollbarYTop=0,l(e,"top",0))}},{"../lib/class":5,"../lib/dom":6,"../lib/helper":9,"./instances":21,"./update-scroll":23}],23:[function(e,t,r){"use strict";
var n,i,o=e("./instances"),a=document.createEvent("Event"),s=document.createEvent("Event"),c=document.createEvent("Event"),l=document.createEvent("Event"),u=document.createEvent("Event"),d=document.createEvent("Event"),p=document.createEvent("Event"),f=document.createEvent("Event"),h=document.createEvent("Event"),m=document.createEvent("Event");a.initEvent("ps-scroll-up",!0,!0),s.initEvent("ps-scroll-down",!0,!0),c.initEvent("ps-scroll-left",!0,!0),l.initEvent("ps-scroll-right",!0,!0),u.initEvent("ps-scroll-y",!0,!0),d.initEvent("ps-scroll-x",!0,!0),p.initEvent("ps-x-reach-start",!0,!0),f.initEvent("ps-x-reach-end",!0,!0),h.initEvent("ps-y-reach-start",!0,!0),m.initEvent("ps-y-reach-end",!0,!0),t.exports=function(e,t,r){if("undefined"==typeof e)throw"You must provide an element to the update-scroll function";if("undefined"==typeof t)throw"You must provide an axis to the update-scroll function";if("undefined"==typeof r)throw"You must provide a value to the update-scroll function";"top"===t&&r<=0&&(e.scrollTop=r=0,e.dispatchEvent(h)),"left"===t&&r<=0&&(e.scrollLeft=r=0,e.dispatchEvent(p));var g=o.get(e);"top"===t&&r>=g.contentHeight-g.containerHeight&&(r=g.contentHeight-g.containerHeight,r-e.scrollTop<=1?r=e.scrollTop:e.scrollTop=r,e.dispatchEvent(m)),"left"===t&&r>=g.contentWidth-g.containerWidth&&(r=g.contentWidth-g.containerWidth,r-e.scrollLeft<=1?r=e.scrollLeft:e.scrollLeft=r,e.dispatchEvent(f)),n||(n=e.scrollTop),i||(i=e.scrollLeft),"top"===t&&r<n&&e.dispatchEvent(a),"top"===t&&r>n&&e.dispatchEvent(s),"left"===t&&r<i&&e.dispatchEvent(c),"left"===t&&r>i&&e.dispatchEvent(l),"top"===t&&(e.scrollTop=n=r,e.dispatchEvent(u)),"left"===t&&(e.scrollLeft=i=r,e.dispatchEvent(d))}},{"./instances":21}],24:[function(e,t,r){"use strict";var n=e("../lib/helper"),i=e("../lib/dom"),o=e("./instances"),a=e("./update-geometry"),s=e("./update-scroll");t.exports=function(e){var t=o.get(e);t&&(t.negativeScrollAdjustment=t.isNegativeScroll?e.scrollWidth-e.clientWidth:0,i.css(t.scrollbarXRail,"display","block"),i.css(t.scrollbarYRail,"display","block"),t.railXMarginWidth=n.toInt(i.css(t.scrollbarXRail,"marginLeft"))+n.toInt(i.css(t.scrollbarXRail,"marginRight")),t.railYMarginHeight=n.toInt(i.css(t.scrollbarYRail,"marginTop"))+n.toInt(i.css(t.scrollbarYRail,"marginBottom")),i.css(t.scrollbarXRail,"display","none"),i.css(t.scrollbarYRail,"display","none"),a(e),s(e,"top",e.scrollTop),s(e,"left",e.scrollLeft),i.css(t.scrollbarXRail,"display",""),i.css(t.scrollbarYRail,"display",""))}},{"../lib/dom":6,"../lib/helper":9,"./instances":21,"./update-geometry":22,"./update-scroll":23}]},{},[2])(2)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],21:[function(e,t,r){e("./release/angular-recaptcha.js"),t.exports="vcRecaptcha"},{"./release/angular-recaptcha.js":22}],22:[function(e,t,r){!function(e){"use strict";e.module("vcRecaptcha",[])}(angular),function(e){"use strict";function t(){throw new Error('You need to set the "key" attribute to your public reCaptcha key. If you don\'t have a key, please get one from https://www.google.com/recaptcha/admin/create')}var r=e.module("vcRecaptcha");r.provider("vcRecaptchaService",function(){var r=this,n={};r.onLoadFunctionName="vcRecaptchaApiLoaded",r.setDefaults=function(t){e.copy(t,n)},r.setSiteKey=function(e){n.key=e},r.setTheme=function(e){n.theme=e},r.setStoken=function(e){n.stoken=e},r.setSize=function(e){n.size=e},r.setType=function(e){n.type=e},r.setLang=function(e){n.lang=e},r.setBadge=function(e){n.badge=e},r.setOnLoadFunctionName=function(e){r.onLoadFunctionName=e},r.$get=["$rootScope","$window","$q","$document",function(i,o,a,s){function c(){return u?a.when(u):p}function l(){if(!u)throw new Error("reCaptcha has not been loaded yet.")}var u,d=a.defer(),p=d.promise,f={};o.vcRecaptchaApiLoadedCallback=o.vcRecaptchaApiLoadedCallback||[];var h=function(){u=o.grecaptcha,d.resolve(u)};if(o.vcRecaptchaApiLoadedCallback.push(h),o[r.onLoadFunctionName]=function(){o.vcRecaptchaApiLoadedCallback.forEach(function(e){e()})},e.isDefined(o.grecaptcha))h();else{var m=o.document.createElement("script");m.async=!0,m.defer=!0,m.src="https://www.google.com/recaptcha/api.js?onload="+r.onLoadFunctionName+"&render=explicit",s.find("body").append(m)}return{create:function(e,r){return r.sitekey=r.key||n.key,r.theme=r.theme||n.theme,r.stoken=r.stoken||n.stoken,r.size=r.size||n.size,r.type=r.type||n.type,r.hl=r.lang||n.lang,r.badge=r.badge||n.badge,r.sitekey&&40===r.sitekey.length||t(),c().then(function(t){var n=t.render(e,r);return f[n]=e,n})},reload:function(e){l(),u.reset(e),i.$broadcast("reCaptchaReset",e)},execute:function(e){l(),u.execute(e)},useLang:function(e,t){var r=f[e];if(!r)throw new Error("reCaptcha Widget ID not exists",e);var n=r.querySelector("iframe");if(!t)return n&&n.src&&/[?&]hl=\w+/.test(n.src)?n.src.replace(/.+[?&]hl=(\w+)([^\w].+)?/,"$1"):null;if(n&&n.src){var i=n.src;/[?&]hl=/.test(i)?i=i.replace(/([?&]hl=)\w+/,"$1"+t):i+=(i.indexOf("?")===-1?"?":"&")+"hl="+t,n.src=i}},getResponse:function(e){return l(),u.getResponse(e)},getInstance:function(e){return f[e]},destroy:function(e){delete f[e]}}}]})}(angular),function(e){"use strict";var t=e.module("vcRecaptcha");t.directive("vcRecaptcha",["$document","$timeout","vcRecaptchaService",function(t,r,n){return{restrict:"A",require:"?^^form",scope:{response:"=?ngModel",key:"=?",stoken:"=?",theme:"=?",size:"=?",type:"=?",lang:"=?",badge:"=?",tabindex:"=?",required:"=?",onCreate:"&",onSuccess:"&",onExpire:"&"},link:function(i,o,a,s){function c(){s&&s.$setValidity("recaptcha",null),d()}function l(){r(function(){i.response="",u(),i.onExpire({widgetId:i.widgetId})})}function u(){s&&s.$setValidity("recaptcha",i.required===!1?null:Boolean(i.response))}function d(){n.destroy(i.widgetId),e.element(t[0].querySelectorAll(".pls-container")).parent().remove()}i.widgetId=null,s&&e.isDefined(a.required)&&i.$watch("required",u);var p=i.$watch("key",function(t){var s=function(e){r(function(){i.response=e,u(),i.onSuccess({response:e,widgetId:i.widgetId})})};n.create(o[0],{callback:s,key:t,stoken:i.stoken||a.stoken||null,theme:i.theme||a.theme||null,type:i.type||a.type||null,lang:i.lang||a.lang||null,tabindex:i.tabindex||a.tabindex||null,size:i.size||a.size||null,badge:i.badge||a.badge||null,"expired-callback":l}).then(function(t){u(),i.widgetId=t,i.onCreate({widgetId:t}),i.$on("$destroy",c),i.$on("reCaptchaReset",function(r,n){(e.isUndefined(n)||t===n)&&(i.response="",u())})}),p()})}}}])}(angular)},{}],23:[function(e,t,r){!function(e,t){"use strict";function r(){function r(e,t){var r,n={},i=e.split(",");for(r=0;r<i.length;r++)n[t?c(i[r]):i[r]]=!0;return n}function n(t,r){null===t||void 0===t?t="":"string"!=typeof t&&(t=""+t),S.innerHTML=t;var n=5;do{if(0===n)throw f("uinput","Failed to sanitize html because the input is unstable");n--,e.document.documentMode&&v(S),t=S.innerHTML,S.innerHTML=t}while(t!==S.innerHTML);for(var i=S.firstChild;i;){switch(i.nodeType){case 1:r.start(i.nodeName.toLowerCase(),h(i.attributes));break;case 3:r.chars(i.textContent)}var o;if(!(o=i.firstChild)&&(1===i.nodeType&&r.end(i.nodeName.toLowerCase()),o=y("nextSibling",i),!o))for(;null==o&&(i=y("parentNode",i),i!==S);)o=y("nextSibling",i),1===i.nodeType&&r.end(i.nodeName.toLowerCase());i=o}for(;i=S.firstChild;)S.removeChild(i)}function h(e){for(var t={},r=0,n=e.length;r<n;r++){var i=e[r];t[i.name]=i.value}return t}function m(e){return e.replace(/&/g,"&amp;").replace(_,function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(r-56320)+65536)+";"}).replace(w,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function g(e,t){var r=!1,n=i(e,e.push);return{start:function(e,i){e=c(e),!r&&A[e]&&(r=e),r||j[e]!==!0||(n("<"),n(e),a(i,function(r,i){var o=c(i),a="img"===e&&"src"===o||"background"===o;M[o]!==!0||k[o]===!0&&!t(r,a)||(n(" "),n(i),n('="'),n(m(r)),n('"'))}),n(">"))},end:function(e){e=c(e),r||j[e]!==!0||E[e]===!0||(n("</"),n(e),n(">")),e==r&&(r=!1)},chars:function(e){r||n(m(e))}}}function v(t){for(;t;){if(t.nodeType===e.Node.ELEMENT_NODE)for(var r=t.attributes,n=0,i=r.length;n<i;n++){var o=r[n],a=o.name.toLowerCase();"xmlns:ns1"!==a&&0!==a.lastIndexOf("ns1:",0)||(t.removeAttributeNode(o),n--,i--)}var s=t.firstChild;s&&v(s),t=y("nextSibling",t)}}function y(e,t){var r=t[e];if(r&&u.call(t,r))throw f("elclob","Failed to sanitize html because the element is clobbered: {0}",t.outerHTML||t.outerText);return r}var b=!1;this.$get=["$$sanitizeUri",function(e){return b&&o(j,C),function(t){var r=[];return d(t,p(r,function(t,r){return!/^unsafe:/.test(e(t,r))})),r.join("")}}],this.enableSvg=function(e){return s(e)?(b=e,this):b},i=t.bind,o=t.extend,a=t.forEach,s=t.isDefined,c=t.lowercase,l=t.noop,d=n,p=g,u=e.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))};var S,_=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,w=/([^#-~ |!])/g,E=r("area,br,col,hr,img,wbr"),T=r("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),O=r("rp,rt"),I=o({},O,T),P=o({},T,r("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),R=o({},O,r("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),C=r("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),A=r("script,style"),j=o({},E,P,R,I),k=r("background,cite,href,longdesc,src,xlink:href"),D=r("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),$=r("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),M=o({},k,$,D);!function(e){var t;if(!e.document||!e.document.implementation)throw f("noinert","Can't create an inert html document");t=e.document.implementation.createHTMLDocument("inert");var r=t.documentElement||t.getDocumentElement(),n=r.getElementsByTagName("body");if(1===n.length)S=n[0];else{var i=t.createElement("html");S=t.createElement("body"),i.appendChild(S),t.appendChild(i)}}(e)}function n(e){var t=[],r=p(t,l);return r.chars(e),t.join("")}var i,o,a,s,c,l,u,d,p,f=t.$$minErr("$sanitize");t.module("ngSanitize",[]).provider("$sanitize",r).info({angularVersion:"1.6.3"}),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var r=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,i=/^mailto:/i,o=t.$$minErr("linky"),a=t.isDefined,s=t.isFunction,c=t.isObject,l=t.isString;return function(t,u,d){function p(e){e&&b.push(n(e))}function f(e,t){var r,n=v(e);b.push("<a ");for(r in n)b.push(r+'="'+n[r]+'" ');!a(u)||"target"in n||b.push('target="',u,'" '),b.push('href="',e.replace(/"/g,"&quot;"),'">'),p(t),b.push("</a>")}if(null==t||""===t)return t;if(!l(t))throw o("notstring","Expected string but received: {0}",t);for(var h,m,g,v=s(d)?d:c(d)?function(){return d}:function(){return{}},y=t,b=[];h=y.match(r);)m=h[0],h[2]||h[4]||(m=(h[3]?"http://":"mailto:")+m),g=h.index,p(y.substr(0,g)),f(m,h[0].replace(i,"")),y=y.substring(g+h[0].length);return p(y),e(b.join(""))}}])}(window,window.angular)},{}],24:[function(e,t,r){e("./angular-sanitize"),t.exports="ngSanitize"},{"./angular-sanitize":23}],25:[function(e,t,r){!function(e,n){"function"==typeof define&&define.amd?define([],function(){return n()}):"object"==typeof r?t.exports=n():n()}(this,function(){function e(e,t){"use strict";return function(r){if(!r||!r.url)throw new Error("Couldn't use urlLoader since no url is given!");var n={};return n[r.queryParameter||"lang"]=r.key,t(angular.extend({url:r.url,params:n,method:"GET"},r.$http)).then(function(e){return e.data},function(){return e.reject(r.key)})}}return e.$inject=["$q","$http"],angular.module("pascalprecht.translate").factory("$translateUrlLoader",e),e.displayName="$translateUrlLoader","pascalprecht.translate"})},{}],26:[function(e,t,r){!function(e,n){"function"==typeof define&&define.amd?define([],function(){return n()}):"object"==typeof r?t.exports=n():n()}(this,function(){function e(e){"use strict";var t=e.storageKey(),r=e.storage(),n=function(){var n=e.preferredLanguage();angular.isString(n)?e.use(n):r.put(t,e.use())};n.displayName="fallbackFromIncorrectStorageValue",r?r.get(t)?e.use(r.get(t)).catch(n):n():angular.isString(e.preferredLanguage())&&e.use(e.preferredLanguage())}function t(){"use strict";var e,t,r,n=null,i=!1,o=!1;r={sanitize:function(e,t){return"text"===t&&(e=s(e)),e},escape:function(e,t){return"text"===t&&(e=a(e)),e},sanitizeParameters:function(e,t){return"params"===t&&(e=l(e,s)),e},escapeParameters:function(e,t){return"params"===t&&(e=l(e,a)),e},sce:function(e,t,r){return"text"===t?e=c(e):"params"===t&&"filter"!==r&&(e=l(e,a)),e},sceParameters:function(e,t){return"params"===t&&(e=l(e,c)),e}},r.escaped=r.escapeParameters,this.addStrategy=function(e,t){return r[e]=t,this},this.removeStrategy=function(e){return delete r[e],this},this.useStrategy=function(e){return i=!0,n=e,this},this.$get=["$injector","$log",function(a,s){var c={},l=function(e,t,n,i){return angular.forEach(i,function(i){if(angular.isFunction(i))e=i(e,t,n);else if(angular.isFunction(r[i]))e=r[i](e,t,n);else{if(!angular.isString(r[i]))throw new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+i+"'");if(!c[r[i]])try{c[r[i]]=a.get(r[i])}catch(e){throw c[r[i]]=function(){},new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+i+"'")}e=c[r[i]](e,t,n)}}),e},u=function(){i||o||(s.warn("pascalprecht.translate.$translateSanitization: No sanitization strategy has been configured. This can have serious security implications. See http://angular-translate.github.io/docs/#/guide/19_security for details."),o=!0)};return a.has("$sanitize")&&(e=a.get("$sanitize")),a.has("$sce")&&(t=a.get("$sce")),{useStrategy:function(e){return function(t){e.useStrategy(t)}}(this),sanitize:function(e,t,r,i){if(n||u(),r||null===r||(r=n),!r)return e;i||(i="service");var o=angular.isArray(r)?r:[r];return l(e,t,i,o)}}}];var a=function(e){var t=angular.element("<div></div>");return t.text(e),t.html()},s=function(t){if(!e)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sanitize service. Either include the ngSanitize module (https://docs.angularjs.org/api/ngSanitize) or use a sanitization strategy which does not depend on $sanitize, such as 'escape'.");return e(t)},c=function(e){if(!t)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sce service.");return t.trustAsHtml(e)},l=function(e,t,r){if(angular.isDate(e))return e;if(angular.isObject(e)){var n=angular.isArray(e)?[]:{};if(r){if(r.indexOf(e)>-1)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot interpolate parameter due recursive object")}else r=[];return r.push(e),angular.forEach(e,function(e,i){angular.isFunction(e)||(n[i]=l(e,t,r))}),r.splice(-1,1),n}return angular.isNumber(e)?e:angular.isUndefined(e)||null===e?e:t(e)}}function r(e,t,r,n){"use strict";var i,o,a,s,c,l,u,d,p,f,h,m,g,v,y,b,S={},_=[],w=e,E=[],T="translate-cloak",O=!1,I=!1,P=".",R=!1,C=!1,A=0,j=!0,k="default",D={default:function(e){return(e||"").split("-").join("_")},java:function(e){var t=(e||"").split("-").join("_"),r=t.split("_");return r.length>1?r[0].toLowerCase()+"_"+r[1].toUpperCase():t},bcp47:function(e){var t=(e||"").split("_").join("-"),r=t.split("-");return r.length>1?r[0].toLowerCase()+"-"+r[1].toUpperCase():t},"iso639-1":function(e){var t=(e||"").split("_").join("-"),r=t.split("-");return r[0].toLowerCase()}},$="2.15.1",M=function(){if(angular.isFunction(n.getLocale))return n.getLocale();var e,r,i=t.$get().navigator,o=["language","browserLanguage","systemLanguage","userLanguage"];if(angular.isArray(i.languages))for(e=0;e<i.languages.length;e++)if(r=i.languages[e],r&&r.length)return r;for(e=0;e<o.length;e++)if(r=i[o[e]],r&&r.length)return r;return null};M.displayName="angular-translate/service: getFirstBrowserLanguage";var x=function(){var e=M()||"";return D[k]&&(e=D[k](e)),e};x.displayName="angular-translate/service: getLocale";var F=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},L=function(){return this.toString().replace(/^\s+|\s+$/g,"")},U=function(e){if(e){for(var t=[],r=angular.lowercase(e),n=0,i=_.length;n<i;n++)t.push(angular.lowercase(_[n]));if(F(t,r)>-1)return e;if(o){var a;for(var s in o)if(o.hasOwnProperty(s)){var c=!1,l=Object.prototype.hasOwnProperty.call(o,s)&&angular.lowercase(s)===angular.lowercase(e);if("*"===s.slice(-1)&&(c=s.slice(0,-1)===e.slice(0,s.length-1)),(l||c)&&(a=o[s],F(t,angular.lowercase(a))>-1))return a}}var u=e.split("_");return u.length>1&&F(t,angular.lowercase(u[0]))>-1?u[0]:void 0}},B=function(e,t){if(!e&&!t)return S;if(e&&!t){if(angular.isString(e))return S[e]}else angular.isObject(S[e])||(S[e]={}),angular.extend(S[e],N(t));return this};this.translations=B,this.cloakClassName=function(e){return e?(T=e,this):T},this.nestedObjectDelimeter=function(e){return e?(P=e,this):P};var N=function(e,t,r,n){var i,o,a,s;t||(t=[]),r||(r={});for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(s=e[i],angular.isObject(s)?N(s,t.concat(i),r,i):(o=t.length?""+t.join(P)+P+i:i,t.length&&i===n&&(a=""+t.join(P),r[a]="@:"+o),r[o]=s));return r};N.displayName="flatObject",this.addInterpolation=function(e){return E.push(e),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(e){return f=e,this},this.useSanitizeValueStrategy=function(e){return r.useStrategy(e),this},this.preferredLanguage=function(e){return e?(q(e),this):i};var q=function(e){return e&&(i=e),i};this.translationNotFoundIndicator=function(e){return this.translationNotFoundIndicatorLeft(e),this.translationNotFoundIndicatorRight(e),this},this.translationNotFoundIndicatorLeft=function(e){return e?(g=e,this):g},this.translationNotFoundIndicatorRight=function(e){return e?(v=e,this):v},this.fallbackLanguage=function(e){return H(e),this};var H=function(e){return e?(angular.isString(e)?(s=!0,a=[e]):angular.isArray(e)&&(s=!1,a=e),angular.isString(i)&&F(a,i)<0&&a.push(i),this):s?a[0]:a};this.use=function(e){if(e){if(!S[e]&&!h)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+e+"'");return c=e,this}return c},this.resolveClientLocale=function(){return x()};var V=function(e){return e?(w=e,this):d?d+w:w};this.storageKey=V,this.useUrlLoader=function(e,t){return this.useLoader("$translateUrlLoader",angular.extend({url:e},t))},this.useStaticFilesLoader=function(e){return this.useLoader("$translateStaticFilesLoader",e)},this.useLoader=function(e,t){return h=e,m=t||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(e){return u=e,this},this.storagePrefix=function(e){return e?(d=e,this):e},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(e){return p=e,this},this.usePostCompiling=function(e){return O=!!e,this},this.forceAsyncReload=function(e){return I=!!e,this},this.uniformLanguageTag=function(e){return e?angular.isString(e)&&(e={standard:e}):e={},k=e.standard,this},this.determinePreferredLanguage=function(e){var t=e&&angular.isFunction(e)?e():x();return i=_.length?U(t)||t:t,this},this.registerAvailableLanguageKeys=function(e,t){return e?(_=e,t&&(o=t),this):_},this.useLoaderCache=function(e){return e===!1?y=void 0:e===!0?y=!0:"undefined"==typeof e?y="$translationCache":e&&(y=e),this},this.directivePriority=function(e){return void 0===e?A:(A=e,this)},this.statefulFilter=function(e){return void 0===e?j:(j=e,this)},this.postProcess=function(e){return b=e?e:void 0,this},this.keepContent=function(e){return C=!!e,this},this.$get=["$log","$injector","$rootScope","$q",function(e,t,r,n){var o,d,k,D=t.get(f||"$translateDefaultInterpolation"),M=!1,Y={},z={},G=function(e,t,r,s,l){!c&&i&&(c=i);var p=l&&l!==c?U(l)||l:c;if(l&&ue(l),angular.isArray(e)){var f=function(e){for(var i={},o=[],a=function(e){var o=n.defer(),a=function(t){i[e]=t,o.resolve([e,t])};return G(e,t,r,s,l).then(a,a),o.promise},c=0,u=e.length;c<u;c++)o.push(a(e[c]));return n.all(o).then(function(){return i})};return f(e)}var h=n.defer();e&&(e=L.apply(e));var m=function(){var e=i?z[i]:z[p];if(d=0,u&&!e){var t=o.get(w);if(e=z[t],a&&a.length){var r=F(a,t);d=0===r?1:0,F(a,i)<0&&a.push(i)}}return e}();if(m){var g=function(){l||(p=c),ae(e,t,r,s,p).then(h.resolve,h.reject)};g.displayName="promiseResolved",m.finally(g).catch(angular.noop)}else ae(e,t,r,s,p).then(h.resolve,h.reject);return h.promise},W=function(e){return g&&(e=[g,e].join(" ")),v&&(e=[e,v].join(" ")),e},Q=function(e){c=e,u&&o.put(G.storageKey(),c),r.$emit("$translateChangeSuccess",{language:e}),D.setLocale(c);var t=function(e,t){Y[t].setLocale(c)};t.displayName="eachInterpolatorLocaleSetter",angular.forEach(Y,t),r.$emit("$translateChangeEnd",{language:e})},K=function(e){if(!e)throw"No language key specified for loading.";var i=n.defer();r.$emit("$translateLoadingStart",{language:e}),M=!0;var o=y;"string"==typeof o&&(o=t.get(o));var a=angular.extend({},m,{key:e,$http:angular.extend({},{cache:o},m.$http)}),s=function(t){var n={};r.$emit("$translateLoadingSuccess",{language:e}),angular.isArray(t)?angular.forEach(t,function(e){angular.extend(n,N(e))}):angular.extend(n,N(t)),M=!1,i.resolve({key:e,table:n}),r.$emit("$translateLoadingEnd",{language:e})};s.displayName="onLoaderSuccess";var c=function(e){r.$emit("$translateLoadingError",{language:e}),i.reject(e),r.$emit("$translateLoadingEnd",{language:e})};return c.displayName="onLoaderError",t.get(h)(a).then(s,c),i.promise};if(u&&(o=t.get(u),!o.get||!o.put))throw new Error("Couldn't use storage '"+u+"', missing get() or put() method!");if(E.length){var X=function(e){var r=t.get(e);r.setLocale(i||c),Y[r.getInterpolationIdentifier()]=r};X.displayName="interpolationFactoryAdder",angular.forEach(E,X)}var J=function(e){var t=n.defer();if(Object.prototype.hasOwnProperty.call(S,e))t.resolve(S[e]);else if(z[e]){var r=function(e){B(e.key,e.table),t.resolve(e.table)};r.displayName="translationTableResolver",z[e].then(r,t.reject)}else t.reject();return t.promise},Z=function(e,t,r,i,o){var a=n.defer(),s=function(n){if(Object.prototype.hasOwnProperty.call(n,t)&&null!==n[t]){i.setLocale(e);var s=n[t];if("@:"===s.substr(0,2))Z(e,s.substr(2),r,i,o).then(a.resolve,a.reject);else{var l=i.interpolate(n[t],r,"service",o,t);l=le(t,n[t],l,r,e),a.resolve(l)}i.setLocale(c)}else a.reject()};return s.displayName="fallbackTranslationResolver",J(e).then(s,a.reject),a.promise},ee=function(e,t,r,n,i){var o,a=S[e];if(a&&Object.prototype.hasOwnProperty.call(a,t)&&null!==a[t]){if(n.setLocale(e),o=n.interpolate(a[t],r,"filter",i,t),o=le(t,a[t],o,r,e,i),!angular.isString(o)&&angular.isFunction(o.$$unwrapTrustedValue)){var s=o.$$unwrapTrustedValue();if("@:"===s.substr(0,2))return ee(e,s.substr(2),r,n,i)}else if("@:"===o.substr(0,2))return ee(e,o.substr(2),r,n,i);n.setLocale(c)}return o},te=function(e,r,n,i){return p?t.get(p)(e,c,r,n,i):e},re=function(e,t,r,i,o,s){var c=n.defer();if(e<a.length){var l=a[e];Z(l,t,r,i,s).then(function(e){c.resolve(e)},function(){return re(e+1,t,r,i,o,s).then(c.resolve,c.reject)})}else if(o)c.resolve(o);else{var u=te(t,r,o);p&&u?c.resolve(u):c.reject(W(t))}return c.promise},ne=function(e,t,r,n,i){var o;if(e<a.length){var s=a[e];o=ee(s,t,r,n,i),o||""===o||(o=ne(e+1,t,r,n))}return o},ie=function(e,t,r,n,i){return re(k>0?k:d,e,t,r,n,i)},oe=function(e,t,r,n){return ne(k>0?k:d,e,t,r,n)},ae=function(e,t,r,i,o,s){var c=n.defer(),l=o?S[o]:S,u=r?Y[r]:D;if(l&&Object.prototype.hasOwnProperty.call(l,e)&&null!==l[e]){var d=l[e];if("@:"===d.substr(0,2))G(d.substr(2),t,r,i,o).then(c.resolve,c.reject);else{var f=u.interpolate(d,t,"service",s,e);f=le(e,d,f,t,o),c.resolve(f)}}else{var h;p&&!M&&(h=te(e,t,i)),o&&a&&a.length?ie(e,t,u,i,s).then(function(e){c.resolve(e)},function(e){c.reject(W(e))}):p&&!M&&h?i?c.resolve(i):c.resolve(h):i?c.resolve(i):c.reject(W(e))}return c.promise},se=function(e,t,r,n,i){var o,s=n?S[n]:S,c=D;if(Y&&Object.prototype.hasOwnProperty.call(Y,r)&&(c=Y[r]),s&&Object.prototype.hasOwnProperty.call(s,e)&&null!==s[e]){var l=s[e];"@:"===l.substr(0,2)?o=se(l.substr(2),t,r,n,i):(o=c.interpolate(l,t,"filter",i,e),o=le(e,l,o,t,n,i))}else{var u;p&&!M&&(u=te(e,t,i)),n&&a&&a.length?(d=0,o=oe(e,t,c,i)):o=p&&!M&&u?u:W(e)}return o},ce=function(e){l===e&&(l=void 0),z[e]=void 0},le=function(e,r,n,i,o,a){var s=b;return s&&("string"==typeof s&&(s=t.get(s)),s)?s(e,r,n,i,o,a):n},ue=function(e){S[e]||!h||z[e]||(z[e]=K(e).then(function(e){return B(e.key,e.table),e}))};G.preferredLanguage=function(e){return e&&q(e),i},G.cloakClassName=function(){return T},G.nestedObjectDelimeter=function(){return P},G.fallbackLanguage=function(e){if(void 0!==e&&null!==e){if(H(e),h&&a&&a.length)for(var t=0,r=a.length;t<r;t++)z[a[t]]||(z[a[t]]=K(a[t]));G.use(G.use())}return s?a[0]:a},G.useFallbackLanguage=function(e){if(void 0!==e&&null!==e)if(e){var t=F(a,e);t>-1&&(k=t)}else k=0},G.proposedLanguage=function(){return l},G.storage=function(){return o},G.negotiateLocale=U,G.use=function(e){if(!e)return c;var t=n.defer();t.promise.then(null,angular.noop),r.$emit("$translateChangeStart",{language:e});var i=U(e);return _.length>0&&!i?n.reject(e):(i&&(e=i),l=e,!I&&S[e]||!h||z[e]?z[e]?z[e].then(function(e){return l===e.key&&Q(e.key),t.resolve(e.key),e},function(e){return!c&&a&&a.length>0&&a[0]!==e?G.use(a[0]).then(t.resolve,t.reject):t.reject(e)}):(t.resolve(e),Q(e)):(z[e]=K(e).then(function(r){return B(r.key,r.table),t.resolve(r.key),l===e&&Q(r.key),r},function(e){return r.$emit("$translateChangeError",{language:e}),t.reject(e),r.$emit("$translateChangeEnd",{language:e}),n.reject(e)}),z[e].finally(function(){ce(e)}).catch(angular.noop)),t.promise)},G.resolveClientLocale=function(){return x()},G.storageKey=function(){return V()},G.isPostCompilingEnabled=function(){return O},G.isForceAsyncReloadEnabled=function(){return I},G.isKeepContent=function(){return C},G.refresh=function(e){function t(e){var t=K(e);return z[e]=t,t.then(function(t){S[e]={},B(e,t.table),o[e]=!0},angular.noop),t}if(!h)throw new Error("Couldn't refresh translation table, no loader registered!");r.$emit("$translateRefreshStart",{language:e});var i=n.defer(),o={};if(i.promise.then(function(){for(var e in S)S.hasOwnProperty(e)&&(e in o||delete S[e]);c&&Q(c)},angular.noop).finally(function(){r.$emit("$translateRefreshEnd",{language:e})}),e)S[e]?t(e).then(i.resolve,i.reject):i.reject();else{var s=a&&a.slice()||[];c&&s.indexOf(c)===-1&&s.push(c),n.all(s.map(t)).then(i.resolve,i.reject)}return i.promise},G.instant=function(e,t,r,n,o){var s=n&&n!==c?U(n)||n:c;if(null===e||angular.isUndefined(e))return e;if(n&&ue(n),angular.isArray(e)){for(var l={},u=0,d=e.length;u<d;u++)l[e[u]]=G.instant(e[u],t,r,n,o);return l}if(angular.isString(e)&&e.length<1)return e;e&&(e=L.apply(e));var f,h=[];i&&h.push(i),s&&h.push(s),a&&a.length&&(h=h.concat(a));for(var m=0,y=h.length;m<y;m++){var b=h[m];if(S[b]&&"undefined"!=typeof S[b][e]&&(f=se(e,t,r,s,o)),"undefined"!=typeof f)break}if(!f&&""!==f)if(g||v)f=W(e);else{f=D.interpolate(e,t,"filter",o);var _;p&&!M&&(_=te(e,t,o)),p&&!M&&_&&(f=_)}return f},G.versionInfo=function(){return $},G.loaderCache=function(){return y},G.directivePriority=function(){return A},G.statefulFilter=function(){return j},G.isReady=function(){return R};var de=n.defer();de.promise.then(function(){R=!0}),G.onReady=function(e){var t=n.defer();return angular.isFunction(e)&&t.promise.then(e),R?t.resolve():de.promise.then(t.resolve),t.promise},G.getAvailableLanguageKeys=function(){return _.length>0?_:null},G.getTranslationTable=function(e){return e=e||G.use(),e&&S[e]?angular.copy(S[e]):null};var pe=r.$on("$translateReady",function(){de.resolve(),pe(),pe=null}),fe=r.$on("$translateChangeEnd",function(){de.resolve(),fe(),fe=null});if(h){if(angular.equals(S,{})&&G.use()&&G.use(G.use()),a&&a.length)for(var he=function(e){return B(e.key,e.table),r.$emit("$translateChangeEnd",{language:e.key}),e},me=0,ge=a.length;me<ge;me++){var ve=a[me];!I&&S[ve]||(z[ve]=K(ve).then(he))}}else r.$emit("$translateReady",{language:G.use()});return G}]}function n(e,t){"use strict";var r,n={},i="default";return n.setLocale=function(e){r=e},n.getInterpolationIdentifier=function(){return i},n.useSanitizeValueStrategy=function(e){return t.useStrategy(e),this},n.interpolate=function(r,n,i,o,a){n=n||{},n=t.sanitize(n,"params",o,i);var s;return angular.isNumber(r)?s=""+r:angular.isString(r)?(s=e(r)(n),s=t.sanitize(s,"text",o,i)):s="",s},n}function i(e,t,r,n,i){"use strict";var a=function(){return this.toString().replace(/^\s+|\s+$/g,"")};return{restrict:"AE",scope:!0,priority:e.directivePriority(),compile:function(s,c){var l=c.translateValues?c.translateValues:void 0,u=c.translateInterpolation?c.translateInterpolation:void 0,d=s[0].outerHTML.match(/translate-value-+/i),p="^(.*)("+t.startSymbol()+".*"+t.endSymbol()+")(.*)",f="^(.*)"+t.startSymbol()+"(.*)"+t.endSymbol()+"(.*)";return function(s,h,m){s.interpolateParams={},s.preText="",s.postText="",s.translateNamespace=o(s);var g={},v=function(e,t,r){if(t.translateValues&&angular.extend(e,n(t.translateValues)(s.$parent)),d)for(var i in r)if(Object.prototype.hasOwnProperty.call(t,i)&&"translateValue"===i.substr(0,14)&&"translateValues"!==i){var o=angular.lowercase(i.substr(14,1))+i.substr(15);e[o]=r[i]}},y=function(e){if(angular.isFunction(y._unwatchOld)&&(y._unwatchOld(),y._unwatchOld=void 0),angular.equals(e,"")||!angular.isDefined(e)){var r=a.apply(h.text()),n=r.match(p);if(angular.isArray(n)){s.preText=n[1],s.postText=n[3],g.translate=t(n[2])(s.$parent);var i=r.match(f);angular.isArray(i)&&i[2]&&i[2].length&&(y._unwatchOld=s.$watch(i[2],function(e){g.translate=e,T()}))}else g.translate=r?r:void 0}else g.translate=e;T()},b=function(e){m.$observe(e,function(t){g[e]=t,T()})};v(s.interpolateParams,m,c);var S=!0;m.$observe("translate",function(e){"undefined"==typeof e?y(""):""===e&&S||(g.translate=e,T()),S=!1});for(var _ in m)m.hasOwnProperty(_)&&"translateAttr"===_.substr(0,13)&&_.length>13&&b(_);if(m.$observe("translateDefault",function(e){s.defaultText=e,T()}),l&&m.$observe("translateValues",function(e){
e&&s.$parent.$watch(function(){angular.extend(s.interpolateParams,n(e)(s.$parent))})}),d){var w=function(e){m.$observe(e,function(t){var r=angular.lowercase(e.substr(14,1))+e.substr(15);s.interpolateParams[r]=t})};for(var E in m)Object.prototype.hasOwnProperty.call(m,E)&&"translateValue"===E.substr(0,14)&&"translateValues"!==E&&w(E)}var T=function(){for(var e in g)g.hasOwnProperty(e)&&void 0!==g[e]&&O(e,g[e],s,s.interpolateParams,s.defaultText,s.translateNamespace)},O=function(t,r,n,i,o,a){r?(a&&"."===r.charAt(0)&&(r=a+r),e(r,i,u,o,n.translateLanguage).then(function(e){I(e,n,!0,t)},function(e){I(e,n,!1,t)})):I(r,n,!1,t)},I=function(t,n,i,o){if(i||"undefined"!=typeof n.defaultText&&(t=n.defaultText),"translate"===o){(i||!i&&!e.isKeepContent()&&"undefined"==typeof m.translateKeepContent)&&h.empty().append(n.preText+t+n.postText);var a=e.isPostCompilingEnabled(),s="undefined"!=typeof c.translateCompile,l=s&&"false"!==c.translateCompile;(a&&!s||l)&&r(h.contents())(n)}else{var u=m.$attr[o];"data-"===u.substr(0,5)&&(u=u.substr(5)),u=u.substr(15),h.attr(u,t)}};(l||d||m.translateDefault)&&s.$watch("interpolateParams",T,!0),s.$on("translateLanguageChanged",T);var P=i.$on("$translateChangeSuccess",T);h.text().length?y(m.translate?m.translate:""):m.translate&&y(m.translate),T(),s.$on("$destroy",P)}}}}function o(e){"use strict";return e.translateNamespace?e.translateNamespace:e.$parent?o(e.$parent):void 0}function a(e,t){"use strict";return{restrict:"A",priority:e.directivePriority(),link:function(r,n,i){var o,a,c={},l=function(){angular.forEach(o,function(t,o){t&&(c[o]=!0,r.translateNamespace&&"."===t.charAt(0)&&(t=r.translateNamespace+t),e(t,a,i.translateInterpolation,void 0,r.translateLanguage).then(function(e){n.attr(o,e)},function(e){n.attr(o,e)}))}),angular.forEach(c,function(e,t){o[t]||(n.removeAttr(t),delete c[t])})};s(r,i.translateAttr,function(e){o=e},l),s(r,i.translateValues,function(e){a=e},l),i.translateValues&&r.$watch(i.translateValues,l,!0),r.$on("translateLanguageChanged",l);var u=t.$on("$translateChangeSuccess",l);l(),r.$on("$destroy",u)}}}function s(e,t,r,n){"use strict";t&&("::"===t.substr(0,2)?t=t.substr(2):e.$watch(t,function(e){r(e),n()},!0),r(e.$eval(t)))}function c(e,t){"use strict";return{compile:function(r){var n=function(t){t.addClass(e.cloakClassName())},i=function(t){t.removeClass(e.cloakClassName())};return n(r),function(r,o,a){var s=i.bind(this,o),c=n.bind(this,o);a.translateCloak&&a.translateCloak.length?(a.$observe("translateCloak",function(t){e(t).then(s,c)}),t.$on("$translateChangeSuccess",function(){e(a.translateCloak).then(s,c)})):e.onReady(s)}}}}function l(){"use strict";return{restrict:"A",scope:!0,compile:function(){return{pre:function(e,t,r){e.translateNamespace=o(e),e.translateNamespace&&"."===r.translateNamespace.charAt(0)?e.translateNamespace+=r.translateNamespace:e.translateNamespace=r.translateNamespace}}}}}function o(e){"use strict";return e.translateNamespace?e.translateNamespace:e.$parent?o(e.$parent):void 0}function u(){"use strict";return{restrict:"A",scope:!0,compile:function(){return function(e,t,r){r.$observe("translateLanguage",function(t){e.translateLanguage=t}),e.$watch("translateLanguage",function(){e.$broadcast("translateLanguageChanged")})}}}}function d(e,t){"use strict";var r=function(r,n,i,o){if(!angular.isObject(n)){var a=this||{__SCOPE_IS_NOT_AVAILABLE:"More info at https://github.com/angular/angular.js/commit/8863b9d04c722b278fa93c5d66ad1e578ad6eb1f"};n=e(n)(a)}return t.instant(r,n,i,o)};return t.statefulFilter()&&(r.$stateful=!0),r}function p(e){"use strict";return e("translations")}return e.$inject=["$translate"],r.$inject=["$STORAGE_KEY","$windowProvider","$translateSanitizationProvider","pascalprechtTranslateOverrider"],n.$inject=["$interpolate","$translateSanitization"],i.$inject=["$translate","$interpolate","$compile","$parse","$rootScope"],a.$inject=["$translate","$rootScope"],c.$inject=["$translate","$rootScope"],d.$inject=["$parse","$translate"],p.$inject=["$cacheFactory"],angular.module("pascalprecht.translate",["ng"]).run(e),e.displayName="runTranslate",angular.module("pascalprecht.translate").provider("$translateSanitization",t),angular.module("pascalprecht.translate").constant("pascalprechtTranslateOverrider",{}).provider("$translate",r),r.displayName="displayName",angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",n),n.displayName="$translateDefaultInterpolation",angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",i),i.displayName="translateDirective",angular.module("pascalprecht.translate").directive("translateAttr",a),a.displayName="translateAttrDirective",angular.module("pascalprecht.translate").directive("translateCloak",c),c.displayName="translateCloakDirective",angular.module("pascalprecht.translate").directive("translateNamespace",l),l.displayName="translateNamespaceDirective",angular.module("pascalprecht.translate").directive("translateLanguage",u),u.displayName="translateLanguageDirective",angular.module("pascalprecht.translate").filter("translate",d),d.displayName="translateFilterFactory",angular.module("pascalprecht.translate").factory("$translationCache",p),p.displayName="$translationCache","pascalprecht.translate"})},{}],27:[function(e,t,r){"undefined"!=typeof t&&"undefined"!=typeof r&&t.exports===r&&(t.exports="ui.router"),function(e,t,r){"use strict";function n(e,t){return V(new(V(function(){},{prototype:e})),t)}function i(e){return H(arguments,function(t){t!==e&&H(t,function(t,r){e.hasOwnProperty(r)||(e[r]=t)})}),e}function o(e,t){var r=[];for(var n in e.path){if(e.path[n]!==t.path[n])break;r.push(e.path[n])}return r}function a(e){if(Object.keys)return Object.keys(e);var t=[];return H(e,function(e,r){t.push(r)}),t}function s(e,t){if(Array.prototype.indexOf)return e.indexOf(t,Number(arguments[2])||0);var r=e.length>>>0,n=Number(arguments[2])||0;for(n=n<0?Math.ceil(n):Math.floor(n),n<0&&(n+=r);n<r;n++)if(n in e&&e[n]===t)return n;return-1}function c(e,t,r,n){var i,c=o(r,n),l={},u=[];for(var d in c)if(c[d]&&c[d].params&&(i=a(c[d].params),i.length))for(var p in i)s(u,i[p])>=0||(u.push(i[p]),l[i[p]]=e[i[p]]);return V({},l,t)}function l(e,t,r){if(!r){r=[];for(var n in e)r.push(n)}for(var i=0;i<r.length;i++){var o=r[i];if(e[o]!=t[o])return!1}return!0}function u(e,t){var r={};return H(e,function(e){r[e]=t[e]}),r}function d(e){var t={},r=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return H(r,function(r){r in e&&(t[r]=e[r])}),t}function p(e){var t={},r=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var n in e)s(r,n)==-1&&(t[n]=e[n]);return t}function f(e,t){var r=q(e),n=r?[]:{};return H(e,function(e,i){t(e,i)&&(n[r?n.length:i]=e)}),n}function h(e,t){var r=q(e)?[]:{};return H(e,function(e,n){r[n]=t(e,n)}),r}function m(e){return e.then(r,function(){})&&e}function g(e,t){var n=1,o=2,c={},l=[],u=c,d=V(e.when(c),{$$promises:c,$$values:c});this.study=function(c){function f(e,r){if(y[r]!==o){if(v.push(r),y[r]===n)throw v.splice(0,s(v,r)),new Error("Cyclic dependency: "+v.join(" -> "));if(y[r]=n,B(e))g.push(r,[function(){return t.get(e)}],l);else{var i=t.annotate(e);H(i,function(e){e!==r&&c.hasOwnProperty(e)&&f(c[e],e)}),g.push(r,e,i)}v.pop(),y[r]=o}}function h(e){return N(e)&&e.then&&e.$$promises}if(!N(c))throw new Error("'invocables' must be an object");var m=a(c||{}),g=[],v=[],y={};return H(c,f),c=v=y=null,function(n,o,a){function s(){--S||(_||i(b,o.$$values),v.$$values=b,v.$$promises=v.$$promises||!0,delete v.$$inheritedValues,f.resolve(b))}function c(e){v.$$failure=e,f.reject(e)}function l(r,i,o){function l(e){d.reject(e),c(e)}function u(){if(!L(v.$$failure))try{d.resolve(t.invoke(i,a,b)),d.promise.then(function(e){b[r]=e,s()},l)}catch(e){l(e)}}var d=e.defer(),p=0;H(o,function(e){y.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(p++,y[e].then(function(t){b[e]=t,--p||u()},l))}),p||u(),y[r]=d.promise}if(h(n)&&a===r&&(a=o,o=n,n=null),n){if(!N(n))throw new Error("'locals' must be an object")}else n=u;if(o){if(!h(o))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else o=d;var f=e.defer(),v=f.promise,y=v.$$promises={},b=V({},n),S=1+g.length/3,_=!1;if(L(o.$$failure))return c(o.$$failure),v;o.$$inheritedValues&&i(b,p(o.$$inheritedValues,m)),V(y,o.$$promises),o.$$values?(_=i(b,p(o.$$values,m)),v.$$inheritedValues=p(o.$$values,m),s()):(o.$$inheritedValues&&(v.$$inheritedValues=p(o.$$inheritedValues,m)),o.then(s,c));for(var w=0,E=g.length;w<E;w+=3)n.hasOwnProperty(g[w])?s():l(g[w],g[w+1],g[w+2]);return v}},this.resolve=function(e,t,r,n){return this.study(e)(t,r,n)}}function v(e,t,r){this.fromConfig=function(e,t,r){return L(e.template)?this.fromString(e.template,t):L(e.templateUrl)?this.fromUrl(e.templateUrl,t):L(e.templateProvider)?this.fromProvider(e.templateProvider,t,r):null},this.fromString=function(e,t){return U(e)?e(t):e},this.fromUrl=function(r,n){return U(r)&&(r=r(n)),null==r?null:e.get(r,{cache:t,headers:{Accept:"text/html"}}).then(function(e){return e.data})},this.fromProvider=function(e,t,n){return r.invoke(e,null,n||{params:t})}}function y(e,t,i){function o(t,r,n,i){if(g.push(t),h[t])return h[t];if(!/^\w+([-.]+\w+)*(?:\[\])?$/.test(t))throw new Error("Invalid parameter name '"+t+"' in pattern '"+e+"'");if(m[t])throw new Error("Duplicate parameter name '"+t+"' in pattern '"+e+"'");return m[t]=new G.Param(t,r,n,i),m[t]}function a(e,t,r,n){var i=["",""],o=e.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!t)return o;switch(r){case!1:i=["(",")"+(n?"?":"")];break;case!0:o=o.replace(/\/$/,""),i=["(?:/(",")|/)?"];break;default:i=["("+r+"|",")?"]}return o+i[0]+t+i[1]}function s(i,o){var a,s,c,l,u;return a=i[2]||i[3],u=t.params[a],c=e.substring(p,i.index),s=o?i[4]:i[4]||("*"==i[1]?".*":null),s&&(l=G.type(s)||n(G.type("string"),{pattern:new RegExp(s,t.caseInsensitive?"i":r)})),{id:a,regexp:s,segment:c,type:l,cfg:u}}t=V({params:{}},N(t)?t:{});var c,l=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,u=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,d="^",p=0,f=this.segments=[],h=i?i.params:{},m=this.params=i?i.params.$$new():new G.ParamSet,g=[];this.source=e;for(var v,y,b;(c=l.exec(e))&&(v=s(c,!1),!(v.segment.indexOf("?")>=0));)y=o(v.id,v.type,v.cfg,"path"),d+=a(v.segment,y.type.pattern.source,y.squash,y.isOptional),f.push(v.segment),p=l.lastIndex;b=e.substring(p);var S=b.indexOf("?");if(S>=0){var _=this.sourceSearch=b.substring(S);if(b=b.substring(0,S),this.sourcePath=e.substring(0,p+S),_.length>0)for(p=0;c=u.exec(_);)v=s(c,!0),y=o(v.id,v.type,v.cfg,"search"),p=l.lastIndex}else this.sourcePath=e,this.sourceSearch="";d+=a(b)+(t.strict===!1?"/?":"")+"$",f.push(b),this.regexp=new RegExp(d,t.caseInsensitive?"i":r),this.prefix=f[0],this.$$paramNames=g}function b(e){V(this,e)}function S(){function e(e){return null!=e?e.toString().replace(/(~|\/)/g,function(e){return{"~":"~~","/":"~2F"}[e]}):e}function i(e){return null!=e?e.toString().replace(/(~~|~2F)/g,function(e){return{"~~":"~","~2F":"/"}[e]}):e}function o(){return{strict:m,caseInsensitive:p}}function c(e){return U(e)||q(e)&&U(e[e.length-1])}function l(){for(;w.length;){var e=w.shift();if(e.pattern)throw new Error("You cannot override a type's .pattern at runtime.");t.extend(v[e.name],d.invoke(e.def))}}function u(e){V(this,e||{})}G=this;var d,p=!1,m=!0,g=!1,v={},_=!0,w=[],E={string:{encode:e,decode:i,is:function(e){return null==e||!L(e)||"string"==typeof e},pattern:/[^\/]*/},int:{encode:e,decode:function(e){return parseInt(e,10)},is:function(e){return L(e)&&this.decode(e.toString())===e},pattern:/\d+/},bool:{encode:function(e){return e?1:0},decode:function(e){return 0!==parseInt(e,10)},is:function(e){return e===!0||e===!1},pattern:/0|1/},date:{encode:function(e){return this.is(e)?[e.getFullYear(),("0"+(e.getMonth()+1)).slice(-2),("0"+e.getDate()).slice(-2)].join("-"):r},decode:function(e){if(this.is(e))return e;var t=this.capture.exec(e);return t?new Date(t[1],t[2]-1,t[3]):r},is:function(e){return e instanceof Date&&!isNaN(e.valueOf())},equals:function(e,t){return this.is(e)&&this.is(t)&&e.toISOString()===t.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:t.toJson,decode:t.fromJson,is:t.isObject,equals:t.equals,pattern:/[^\/]*/},any:{encode:t.identity,decode:t.identity,equals:t.equals,pattern:/.*/}};S.$$getDefaultValue=function(e){if(!c(e.value))return e.value;if(!d)throw new Error("Injectable functions cannot be called at configuration time");return d.invoke(e.value)},this.caseInsensitive=function(e){return L(e)&&(p=e),p},this.strictMode=function(e){return L(e)&&(m=e),m},this.defaultSquashPolicy=function(e){if(!L(e))return g;if(e!==!0&&e!==!1&&!B(e))throw new Error("Invalid squash policy: "+e+". Valid policies: false, true, arbitrary-string");return g=e,e},this.compile=function(e,t){return new y(e,V(o(),t))},this.isMatcher=function(e){if(!N(e))return!1;var t=!0;return H(y.prototype,function(r,n){U(r)&&(t=t&&L(e[n])&&U(e[n]))}),t},this.type=function(e,t,r){if(!L(t))return v[e];if(v.hasOwnProperty(e))throw new Error("A type named '"+e+"' has already been defined.");return v[e]=new b(V({name:e},t)),r&&(w.push({name:e,def:r}),_||l()),this},H(E,function(e,t){v[t]=new b(V({name:t},e))}),v=n(v,{}),this.$get=["$injector",function(e){return d=e,_=!1,l(),H(E,function(e,t){v[t]||(v[t]=new b(e))}),this}],this.Param=function(e,n,i,o){function l(e){var t=N(e)?a(e):[],r=s(t,"value")===-1&&s(t,"type")===-1&&s(t,"squash")===-1&&s(t,"array")===-1;return r&&(e={value:e}),e.$$fn=c(e.value)?e.value:function(){return e.value},e}function u(r,n,i){if(r.type&&n)throw new Error("Param '"+e+"' has two type configurations.");return n?n:r.type?t.isString(r.type)?v[r.type]:r.type instanceof b?r.type:new b(r.type):"config"===i?v.any:v.string}function p(){var t={array:"search"===o&&"auto"},r=e.match(/\[\]$/)?{array:!0}:{};return V(t,r,i).array}function m(e,t){var r=e.squash;if(!t||r===!1)return!1;if(!L(r)||null==r)return g;if(r===!0||B(r))return r;throw new Error("Invalid squash policy: '"+r+"'. Valid policies: false, true, or arbitrary string")}function y(e,t,n,i){var o,a,c=[{from:"",to:n||t?r:""},{from:null,to:n||t?r:""}];return o=q(e.replace)?e.replace:[],B(i)&&o.push({from:i,to:r}),a=h(o,function(e){return e.from}),f(c,function(e){return s(a,e.from)===-1}).concat(o)}function S(){if(!d)throw new Error("Injectable functions cannot be called at configuration time");var e=d.invoke(i.$$fn);if(null!==e&&e!==r&&!E.type.is(e))throw new Error("Default value ("+e+") for parameter '"+E.id+"' is not an instance of Type ("+E.type.name+")");return e}function _(e){function t(e){return function(t){return t.from===e}}function r(e){var r=h(f(E.replace,t(e)),function(e){return e.to});return r.length?r[0]:e}return e=r(e),L(e)?E.type.$normalize(e):S()}function w(){return"{Param:"+e+" "+n+" squash: '"+I+"' optional: "+O+"}"}var E=this;i=l(i),n=u(i,n,o);var T=p();n=T?n.$asArray(T,"search"===o):n,"string"!==n.name||T||"path"!==o||i.value!==r||(i.value="");var O=i.value!==r,I=m(i,O),P=y(i,T,O,I);V(this,{id:e,type:n,location:o,array:T,squash:I,replace:P,isOptional:O,value:_,dynamic:r,config:i,toString:w})},u.prototype={$$new:function(){return n(this,V(new u,{$$parent:this}))},$$keys:function(){for(var e=[],t=[],r=this,n=a(u.prototype);r;)t.push(r),r=r.$$parent;return t.reverse(),H(t,function(t){H(a(t),function(t){s(e,t)===-1&&s(n,t)===-1&&e.push(t)})}),e},$$values:function(e){var t={},r=this;return H(r.$$keys(),function(n){t[n]=r[n].value(e&&e[n])}),t},$$equals:function(e,t){var r=!0,n=this;return H(n.$$keys(),function(i){var o=e&&e[i],a=t&&t[i];n[i].type.equals(o,a)||(r=!1)}),r},$$validates:function(e){var n,i,o,a,s,c=this.$$keys();for(n=0;n<c.length&&(i=this[c[n]],o=e[c[n]],o!==r&&null!==o||!i.isOptional);n++){if(a=i.type.$normalize(o),!i.type.is(a))return!1;if(s=i.type.encode(a),t.isString(s)&&!i.type.pattern.exec(s))return!1}return!0},$$parent:r},this.ParamSet=u}function _(e,n){function i(e){var t=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(e.source);return null!=t?t[1].replace(/\\(.)/g,"$1"):""}function o(e,t){return e.replace(/\$(\$|\d{1,2})/,function(e,r){return t["$"===r?0:Number(r)]})}function a(e,t,r){if(!r)return!1;var n=e.invoke(t,t,{$match:r});return!L(n)||n}function s(n,i,o,a,s){function p(e,t,r){return"/"===g?e:t?g.slice(0,-1)+e:r?g.slice(1)+e:e}function f(e){function t(e){var t=e(o,n);return!!t&&(B(t)&&n.replace().url(t),!0)}if(!e||!e.defaultPrevented){m&&n.url()===m;m=r;var i,a=l.length;for(i=0;i<a;i++)if(t(l[i]))return;u&&t(u)}}function h(){return c=c||i.$on("$locationChangeSuccess",f)}var m,g=a.baseHref(),v=n.url();return d||h(),{sync:function(){f()},listen:function(){return h()},update:function(e){return e?void(v=n.url()):void(n.url()!==v&&(n.url(v),n.replace()))},push:function(e,t,i){var o=e.format(t||{});null!==o&&t&&t["#"]&&(o+="#"+t["#"]),n.url(o),m=i&&i.$$avoidResync?n.url():r,i&&i.replace&&n.replace()},href:function(r,i,o){if(!r.validates(i))return null;var a=e.html5Mode();t.isObject(a)&&(a=a.enabled),a=a&&s.history;var c=r.format(i);if(o=o||{},a||null===c||(c="#"+e.hashPrefix()+c),null!==c&&i&&i["#"]&&(c+="#"+i["#"]),c=p(c,a,o.absolute),!o.absolute||!c)return c;var l=!a&&c?"/":"",u=n.port();return u=80===u||443===u?"":":"+u,[n.protocol(),"://",n.host(),u,l,c].join("")}}}var c,l=[],u=null,d=!1;this.rule=function(e){if(!U(e))throw new Error("'rule' must be a function");return l.push(e),this},this.otherwise=function(e){if(B(e)){var t=e;e=function(){return t}}else if(!U(e))throw new Error("'rule' must be a function");return u=e,this},this.when=function(e,t){var r,s=B(t);if(B(e)&&(e=n.compile(e)),!s&&!U(t)&&!q(t))throw new Error("invalid 'handler' in when()");var c={matcher:function(e,t){return s&&(r=n.compile(t),t=["$match",function(e){return r.format(e)}]),V(function(r,n){return a(r,t,e.exec(n.path(),n.search()))},{prefix:B(e.prefix)?e.prefix:""})},regex:function(e,t){if(e.global||e.sticky)throw new Error("when() RegExp must not be global or sticky");return s&&(r=t,t=["$match",function(e){return o(r,e)}]),V(function(r,n){return a(r,t,e.exec(n.path()))},{prefix:i(e)})}},l={matcher:n.isMatcher(e),regex:e instanceof RegExp};for(var u in l)if(l[u])return this.rule(c[u](e,t));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(e){e===r&&(e=!0),d=e},this.$get=s,s.$inject=["$location","$rootScope","$injector","$browser","$sniffer"]}function w(e,i){function o(e){return 0===e.indexOf(".")||0===e.indexOf("^")}function p(e,t){if(!e)return r;var n=B(e),i=n?e:e.name,a=o(i);if(a){if(!t)throw new Error("No reference point given for path '"+i+"'");t=p(t);for(var s=i.split("."),c=0,l=s.length,u=t;c<l;c++)if(""!==s[c]||0!==c){if("^"!==s[c])break;if(!u.parent)throw new Error("Path '"+i+"' not valid for state '"+t.name+"'");u=u.parent}else u=t;s=s.slice(c).join("."),i=u.name+(u.name&&s?".":"")+s}var d=I[i];return!d||!n&&(n||d!==e&&d.self!==e)?r:d}function f(e,t){P[e]||(P[e]=[]),P[e].push(t)}function g(e){for(var t=P[e]||[];t.length;)v(t.shift())}function v(t){t=n(t,{self:t,resolve:t.resolve||{},toString:function(){return this.name}});var r=t.name;if(!B(r)||r.indexOf("@")>=0)throw new Error("State must have a valid name");if(I.hasOwnProperty(r))throw new Error("State '"+r+"' is already defined");var i=r.indexOf(".")!==-1?r.substring(0,r.lastIndexOf(".")):B(t.parent)?t.parent:N(t.parent)&&B(t.parent.name)?t.parent.name:"";if(i&&!I[i])return f(i,t.self);for(var o in C)U(C[o])&&(t[o]=C[o](t,C.$delegates[o]));return I[r]=t,!t[R]&&t.url&&e.when(t.url,["$match","$stateParams",function(e,r){O.$current.navigable==t&&l(e,r)||O.transitionTo(t,e,{inherit:!0,location:!1})}]),g(r),t}function y(e){return e.indexOf("*")>-1}function b(e){for(var t=e.split("."),r=O.$current.name.split("."),n=0,i=t.length;n<i;n++)"*"===t[n]&&(r[n]="*");return"**"===t[0]&&(r=r.slice(s(r,t[1])),r.unshift("**")),"**"===t[t.length-1]&&(r.splice(s(r,t[t.length-2])+1,Number.MAX_VALUE),r.push("**")),t.length==r.length&&r.join("")===t.join("")}function S(e,t){return B(e)&&!L(t)?C[e]:U(t)&&B(e)?(C[e]&&!C.$delegates[e]&&(C.$delegates[e]=C[e]),C[e]=t,this):this}function _(e,t){return N(e)?t=e:t.name=e,v(t),this}function w(e,i,o,s,d,f,g,v,S){function _(t,r,n,o){var a=e.$broadcast("$stateNotFound",t,r,n);if(a.defaultPrevented)return g.update(),j;if(!a.retry)return null;if(o.$retry)return g.update(),k;var s=O.transition=i.when(a.retry);return s.then(function(){return s!==O.transition?(e.$broadcast("$stateChangeCancel",t.to,t.toParams,r,n),C):(t.options.$retry=!0,O.transitionTo(t.to,t.toParams,t.options))},function(){return j}),g.update(),s}function w(e,r,n,a,c,l){function p(){var r=[];return H(e.views,function(n,i){var a=n.resolve&&n.resolve!==e.resolve?n.resolve:{};a.$template=[function(){return o.load(i,{view:n,locals:c.globals,params:f,notify:l.notify})||""}],r.push(d.resolve(a,c.globals,c.resolve,e).then(function(r){if(U(n.controllerProvider)||q(n.controllerProvider)){var o=t.extend({},a,c.globals);r.$$controller=s.invoke(n.controllerProvider,null,o)}else r.$$controller=n.controller;r.$$state=e,r.$$controllerAs=n.controllerAs,r.$$resolveAs=n.resolveAs,c[i]=r}))}),i.all(r).then(function(){return c.globals})}var f=n?r:u(e.params.$$keys(),r),h={$stateParams:f};c.resolve=d.resolve(e.resolve,h,c.resolve,e);var m=[c.resolve.then(function(e){c.globals=e})];return a&&m.push(a),i.all(m).then(p).then(function(e){return c})}var P=new Error("transition superseded"),C=m(i.reject(P)),A=m(i.reject(new Error("transition prevented"))),j=m(i.reject(new Error("transition aborted"))),k=m(i.reject(new Error("transition failed")));return T.locals={resolve:null,globals:{$stateParams:{}}},O={params:{},current:T.self,$current:T,transition:null},O.reload=function(e){return O.transitionTo(O.current,f,{reload:e||!0,inherit:!1,notify:!0})},O.go=function(e,t,r){return O.transitionTo(e,t,V({inherit:!0,relative:O.$current},r))},O.transitionTo=function(t,r,o){r=r||{},o=V({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},o||{});var a,l=O.$current,d=O.params,h=l.path,m=p(t,o.relative),v=r["#"];if(!L(m)){var y={to:t,toParams:r,options:o},b=_(y,l.self,d,o);if(b)return b;if(t=y.to,r=y.toParams,o=y.options,m=p(t,o.relative),!L(m)){if(!o.relative)throw new Error("No such state '"+t+"'");throw new Error("Could not resolve '"+t+"' from state '"+o.relative+"'")}}if(m[R])throw new Error("Cannot transition to abstract state '"+t+"'");if(o.inherit&&(r=c(f,r||{},O.$current,m)),!m.params.$$validates(r))return k;r=m.params.$$values(r),t=m;var S=t.path,I=0,j=S[I],D=T.locals,$=[];if(o.reload){if(B(o.reload)||N(o.reload)){if(N(o.reload)&&!o.reload.name)throw new Error("Invalid reload state object");var M=o.reload===!0?h[0]:p(o.reload);if(o.reload&&!M)throw new Error("No such reload state '"+(B(o.reload)?o.reload:o.reload.name)+"'");for(;j&&j===h[I]&&j!==M;)D=$[I]=j.locals,I++,j=S[I]}}else for(;j&&j===h[I]&&j.ownParams.$$equals(r,d);)D=$[I]=j.locals,I++,j=S[I];if(E(t,r,l,d,D,o))return v&&(r["#"]=v),O.params=r,Y(O.params,f),Y(u(t.params.$$keys(),f),t.locals.globals.$stateParams),o.location&&t.navigable&&t.navigable.url&&(g.push(t.navigable.url,r,{$$avoidResync:!0,replace:"replace"===o.location}),g.update(!0)),O.transition=null,i.when(O.current);if(r=u(t.params.$$keys(),r||{}),v&&(r["#"]=v),o.notify&&e.$broadcast("$stateChangeStart",t.self,r,l.self,d,o).defaultPrevented)return e.$broadcast("$stateChangeCancel",t.self,r,l.self,d),null==O.transition&&g.update(),A;for(var x=i.when(D),F=I;F<S.length;F++,j=S[F])D=$[F]=n(D),x=w(j,r,j===t,x,D,o);var U=O.transition=x.then(function(){var n,i,a;if(O.transition!==U)return e.$broadcast("$stateChangeCancel",t.self,r,l.self,d),C;for(n=h.length-1;n>=I;n--)a=h[n],a.self.onExit&&s.invoke(a.self.onExit,a.self,a.locals.globals),a.locals=null;for(n=I;n<S.length;n++)i=S[n],i.locals=$[n],i.self.onEnter&&s.invoke(i.self.onEnter,i.self,i.locals.globals);return O.transition!==U?(e.$broadcast("$stateChangeCancel",t.self,r,l.self,d),C):(O.$current=t,O.current=t.self,O.params=r,Y(O.params,f),O.transition=null,o.location&&t.navigable&&g.push(t.navigable.url,t.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===o.location}),o.notify&&e.$broadcast("$stateChangeSuccess",t.self,r,l.self,d),g.update(!0),O.current)}).then(null,function(n){return n===P?C:O.transition!==U?(e.$broadcast("$stateChangeCancel",t.self,r,l.self,d),C):(O.transition=null,a=e.$broadcast("$stateChangeError",t.self,r,l.self,d,n),a.defaultPrevented||g.update(),i.reject(n))});return U},O.is=function(e,t,n){n=V({relative:O.$current},n||{});var i=p(e,n.relative);return L(i)?O.$current===i&&(!t||l(i.params.$$values(t),f)):r},O.includes=function(e,t,n){if(n=V({relative:O.$current},n||{}),B(e)&&y(e)){if(!b(e))return!1;e=O.$current.name}var i=p(e,n.relative);if(!L(i))return r;if(!L(O.$current.includes[i.name]))return!1;if(!t)return!0;for(var o=a(t),s=0;s<o.length;s++){var c=o[s],l=i.params[c];if(l&&!l.type.equals(f[c],t[c]))return!1}return!0},O.href=function(e,t,n){n=V({lossy:!0,inherit:!0,absolute:!1,relative:O.$current},n||{});var i=p(e,n.relative);if(!L(i))return null;n.inherit&&(t=c(f,t||{},O.$current,i));var o=i&&n.lossy?i.navigable:i;return o&&o.url!==r&&null!==o.url?g.href(o.url,u(i.params.$$keys().concat("#"),t||{}),{absolute:n.absolute}):null},O.get=function(e,t){if(0===arguments.length)return h(a(I),function(e){return I[e].self});var r=p(e,t||O.$current);return r&&r.self?r.self:null},O}function E(e,t,r,n,i,o){function a(e,t,r){function n(t){return"search"!=e.params[t].location}var i=e.params.$$keys().filter(n),o=d.apply({},[e.params].concat(i)),a=new G.ParamSet(o);return a.$$equals(t,r)}if(!o.reload&&e===r&&(i===r.locals||e.self.reloadOnSearch===!1&&a(r,n,t)))return!0}var T,O,I={},P={},R="abstract",C={parent:function(e){if(L(e.parent)&&e.parent)return p(e.parent);var t=/^(.+)\.[^.]+$/.exec(e.name);return t?p(t[1]):T},data:function(e){return e.parent&&e.parent.data&&(e.data=e.self.data=n(e.parent.data,e.data)),e.data},url:function(e){var t=e.url,r={params:e.params||{}};if(B(t))return"^"==t.charAt(0)?i.compile(t.substring(1),r):(e.parent.navigable||T).url.concat(t,r);if(!t||i.isMatcher(t))return t;throw new Error("Invalid url '"+t+"' in state '"+e+"'")},navigable:function(e){return e.url?e:e.parent?e.parent.navigable:null},ownParams:function(e){var t=e.url&&e.url.params||new G.ParamSet;return H(e.params||{},function(e,r){t[r]||(t[r]=new G.Param(r,null,e,"config"))}),t},params:function(e){var t=d(e.ownParams,e.ownParams.$$keys());return e.parent&&e.parent.params?V(e.parent.params.$$new(),t):new G.ParamSet},views:function(e){var t={};return H(L(e.views)?e.views:{"":e},function(r,n){n.indexOf("@")<0&&(n+="@"+e.parent.name),r.resolveAs=r.resolveAs||e.resolveAs||"$resolve",t[n]=r}),t},path:function(e){return e.parent?e.parent.path.concat(e):[]},includes:function(e){var t=e.parent?V({},e.parent.includes):{};return t[e.name]=!0,t},$delegates:{}};T=v({name:"",url:"^",views:null,abstract:!0}),T.navigable=null,this.decorator=S,this.state=_,this.$get=w,w.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function E(){function e(e,t){return{load:function(e,r){var n,i={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return r=V(i,r),r.view&&(n=t.fromConfig(r.view,r.params,r.locals)),n}}}this.$get=e,e.$inject=["$rootScope","$templateFactory"]}function T(){var e=!1;this.useAnchorScroll=function(){e=!0},this.$get=["$anchorScroll","$timeout",function(t,r){return e?t:function(e){return r(function(){e[0].scrollIntoView()},0,!1)}}]}function O(e,r,n,i,o){function a(){return r.has?function(e){return r.has(e)?r.get(e):null}:function(e){try{return r.get(e)}catch(e){return null}}}function s(e,r){var n=function(){return{enter:function(e,t,r){t.after(e),r()},leave:function(e,t){e.remove(),t()}}};if(u)return{enter:function(e,r,n){t.version.minor>2?u.enter(e,null,r).then(n):u.enter(e,null,r,n)},leave:function(e,r){t.version.minor>2?u.leave(e).then(r):u.leave(e,r)}};if(l){var i=l&&l(r,e);return{enter:function(e,t,r){i.enter(e,null,t),r()},leave:function(e,t){i.leave(e),t()}}}return n()}var c=a(),l=c("$animator"),u=c("$animate"),d={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(r,a,c){return function(r,a,l){function u(){if(p&&(p.remove(),p=null),h&&(h.$destroy(),h=null),f){var e=f.data("$uiViewAnim");y.leave(f,function(){e.$$animLeave.resolve(),p=null}),p=f,f=null}}function d(s){var d,p=P(r,l,a,i),b=p&&e.$current&&e.$current.locals[p];if(s||b!==m){d=r.$new(),m=e.$current.locals[p],d.$emit("$viewContentLoading",p);var S=c(d,function(e){var i=o.defer(),s=o.defer(),c={$animEnter:i.promise,$animLeave:s.promise,$$animLeave:s};e.data("$uiViewAnim",c),y.enter(e,a,function(){i.resolve(),h&&h.$emit("$viewContentAnimationEnded"),(t.isDefined(v)&&!v||r.$eval(v))&&n(e)}),u()});f=S,h=d,h.$emit("$viewContentLoaded",p),h.$eval(g)}}var p,f,h,m,g=l.onload||"",v=l.autoscroll,y=s(l,r);a.inheritedData("$uiView");r.$on("$stateChangeSuccess",function(){d(!1)}),d(!0)}}};return d}function I(e,r,n,i){return{restrict:"ECA",priority:-400,compile:function(o){var a=o.html();return function(o,s,c){var l=n.$current,u=P(o,c,s,i),d=l&&l.locals[u];if(d){s.data("$uiView",{name:u,state:d.$$state}),s.html(d.$template?d.$template:a);var p=t.extend({},d);o[d.$$resolveAs]=p;var f=e(s.contents());if(d.$$controller){d.$scope=o,d.$element=s;var h=r(d.$$controller,d);d.$$controllerAs&&(o[d.$$controllerAs]=h,o[d.$$controllerAs][d.$$resolveAs]=p),U(h.$onInit)&&h.$onInit(),s.data("$ngControllerController",h),s.children().data("$ngControllerController",h)}f(o)}}}}}function P(e,t,r,n){var i=n(t.uiView||t.name||"")(e),o=r.inheritedData("$uiView");return i.indexOf("@")>=0?i:i+"@"+(o?o.state.name:"")}function R(e,t){var r,n=e.match(/^\s*({[^}]*})\s*$/);if(n&&(e=t+"("+n[1]+")"),r=e.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!r||4!==r.length)throw new Error("Invalid state ref '"+e+"'");return{state:r[1],paramExpr:r[3]||null}}function C(e){var t=e.parent().inheritedData("$uiView");if(t&&t.state&&t.state.name)return t.state}function A(e){var t="[object SVGAnimatedString]"===Object.prototype.toString.call(e.prop("href")),r="FORM"===e[0].nodeName;return{attr:r?"action":t?"xlink:href":"href",isAnchor:"A"===e.prop("tagName").toUpperCase(),clickable:!r}}function j(e,t,r,n,i){return function(o){var a=o.which||o.button,s=i();if(!(a>1||o.ctrlKey||o.metaKey||o.shiftKey||e.attr("target"))){var c=r(function(){t.go(s.state,s.params,s.options)});o.preventDefault();var l=n.isAnchor&&!s.href?1:0;o.preventDefault=function(){l--<=0&&r.cancel(c)}}}}function k(e,t){return{relative:C(e)||t.$current,inherit:!0}}function D(e,r){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(n,i,o,a){var s,c=R(o.uiSref,e.current.name),l={state:c.state,href:null,params:null},u=A(i),d=a[1]||a[0],p=null;l.options=V(k(i,e),o.uiSrefOpts?n.$eval(o.uiSrefOpts):{});var f=function(r){r&&(l.params=t.copy(r)),l.href=e.href(c.state,l.params,l.options),p&&p(),d&&(p=d.$$addStateInfo(c.state,l.params)),null!==l.href&&o.$set(u.attr,l.href)};c.paramExpr&&(n.$watch(c.paramExpr,function(e){e!==l.params&&f(e)},!0),l.params=t.copy(n.$eval(c.paramExpr))),f(),u.clickable&&(s=j(i,e,r,u,function(){return l}),i[i.on?"on":"bind"]("click",s),n.$on("$destroy",function(){i[i.off?"off":"unbind"]("click",s)}))}}}function $(e,t){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(r,n,i,o){function a(t){p.state=t[0],p.params=t[1],p.options=t[2],p.href=e.href(p.state,p.params,p.options),f&&f(),l&&(f=l.$$addStateInfo(p.state,p.params)),p.href&&i.$set(c.attr,p.href)}var s,c=A(n),l=o[1]||o[0],u=[i.uiState,i.uiStateParams||null,i.uiStateOpts||null],d="["+u.map(function(e){return e||"null"}).join(", ")+"]",p={
state:null,params:null,options:null,href:null},f=null;r.$watch(d,a,!0),a(r.$eval(d)),c.clickable&&(s=j(n,e,t,c,function(){return p}),n[n.on?"on":"bind"]("click",s),r.$on("$destroy",function(){n[n.off?"off":"unbind"]("click",s)}))}}}function M(e,t,r){return{restrict:"A",controller:["$scope","$element","$attrs","$timeout",function(t,n,i,o){function a(t,r,i){var o=e.get(t,C(n)),a=s(t,r),c={state:o||{name:t},params:r,hash:a};return m.push(c),g[a]=i,function(){var e=m.indexOf(c);e!==-1&&m.splice(e,1)}}function s(e,r){if(!B(e))throw new Error("state should be a string");return N(r)?e+z(r):(r=t.$eval(r),N(r)?e+z(r):e)}function c(){for(var e=0;e<m.length;e++)d(m[e].state,m[e].params)?l(n,g[m[e].hash]):u(n,g[m[e].hash]),p(m[e].state,m[e].params)?l(n,f):u(n,f)}function l(e,t){o(function(){e.addClass(t)})}function u(e,t){e.removeClass(t)}function d(t,r){return e.includes(t.name,r)}function p(t,r){return e.is(t.name,r)}var f,h,m=[],g={};f=r(i.uiSrefActiveEq||"",!1)(t);try{h=t.$eval(i.uiSrefActive)}catch(e){}h=h||r(i.uiSrefActive||"",!1)(t),N(h)&&H(h,function(r,n){if(B(r)){var i=R(r,e.current.name);a(i.state,t.$eval(i.paramExpr),n)}}),this.$$addStateInfo=function(e,t){if(!(N(h)&&m.length>0)){var r=a(e,t,h);return c(),r}},t.$on("$stateChangeSuccess",c),c()}]}}function x(e){var t=function(t,r){return e.is(t,r)};return t.$stateful=!0,t}function F(e){var t=function(t,r,n){return e.includes(t,r,n)};return t.$stateful=!0,t}var L=t.isDefined,U=t.isFunction,B=t.isString,N=t.isObject,q=t.isArray,H=t.forEach,V=t.extend,Y=t.copy,z=t.toJson;t.module("ui.router.util",["ng"]),t.module("ui.router.router",["ui.router.util"]),t.module("ui.router.state",["ui.router.router","ui.router.util"]),t.module("ui.router",["ui.router.state"]),t.module("ui.router.compat",["ui.router"]),g.$inject=["$q","$injector"],t.module("ui.router.util").service("$resolve",g),v.$inject=["$http","$templateCache","$injector"],t.module("ui.router.util").service("$templateFactory",v);var G;y.prototype.concat=function(e,t){var r={caseInsensitive:G.caseInsensitive(),strict:G.strictMode(),squash:G.defaultSquashPolicy()};return new y(this.sourcePath+e+this.sourceSearch,V(r,t),this)},y.prototype.toString=function(){return this.source},y.prototype.exec=function(e,t){function r(e){function t(e){return e.split("").reverse().join("")}function r(e){return e.replace(/\\-/g,"-")}var n=t(e).split(/-(?!\\)/),i=h(n,t);return h(i,r).reverse()}var n=this.regexp.exec(e);if(!n)return null;t=t||{};var i,o,a,s=this.parameters(),c=s.length,l=this.segments.length-1,u={};if(l!==n.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");var d,p;for(i=0;i<l;i++){for(a=s[i],d=this.params[a],p=n[i+1],o=0;o<d.replace.length;o++)d.replace[o].from===p&&(p=d.replace[o].to);p&&d.array===!0&&(p=r(p)),L(p)&&(p=d.type.decode(p)),u[a]=d.value(p)}for(;i<c;i++){for(a=s[i],u[a]=this.params[a].value(t[a]),d=this.params[a],p=t[a],o=0;o<d.replace.length;o++)d.replace[o].from===p&&(p=d.replace[o].to);L(p)&&(p=d.type.decode(p)),u[a]=d.value(p)}return u},y.prototype.parameters=function(e){return L(e)?this.params[e]||null:this.$$paramNames},y.prototype.validates=function(e){return this.params.$$validates(e)},y.prototype.format=function(e){function t(e){return encodeURIComponent(e).replace(/-/g,function(e){return"%5C%"+e.charCodeAt(0).toString(16).toUpperCase()})}e=e||{};var r=this.segments,n=this.parameters(),i=this.params;if(!this.validates(e))return null;var o,a=!1,s=r.length-1,c=n.length,l=r[0];for(o=0;o<c;o++){var u=o<s,d=n[o],p=i[d],f=p.value(e[d]),m=p.isOptional&&p.type.equals(p.value(),f),g=!!m&&p.squash,v=p.type.encode(f);if(u){var y=r[o+1],b=o+1===s;if(g===!1)null!=v&&(l+=q(v)?h(v,t).join("-"):encodeURIComponent(v)),l+=y;else if(g===!0){var S=l.match(/\/$/)?/\/?(.*)/:/(.*)/;l+=y.match(S)[1]}else B(g)&&(l+=g+y);b&&p.squash===!0&&"/"===l.slice(-1)&&(l=l.slice(0,-1))}else{if(null==v||m&&g!==!1)continue;if(q(v)||(v=[v]),0===v.length)continue;v=h(v,encodeURIComponent).join("&"+d+"="),l+=(a?"&":"?")+(d+"="+v),a=!0}}return l},b.prototype.is=function(e,t){return!0},b.prototype.encode=function(e,t){return e},b.prototype.decode=function(e,t){return e},b.prototype.equals=function(e,t){return e==t},b.prototype.$subPattern=function(){var e=this.pattern.toString();return e.substr(1,e.length-2)},b.prototype.pattern=/.*/,b.prototype.toString=function(){return"{Type:"+this.name+"}"},b.prototype.$normalize=function(e){return this.is(e)?e:this.decode(e)},b.prototype.$asArray=function(e,t){function n(e,t){function n(e,t){return function(){return e[t].apply(e,arguments)}}function i(e){return q(e)?e:L(e)?[e]:[]}function o(e){switch(e.length){case 0:return r;case 1:return"auto"===t?e[0]:e;default:return e}}function a(e){return!e}function s(e,t){return function(r){if(q(r)&&0===r.length)return r;r=i(r);var n=h(r,e);return t===!0?0===f(n,a).length:o(n)}}function c(e){return function(t,r){var n=i(t),o=i(r);if(n.length!==o.length)return!1;for(var a=0;a<n.length;a++)if(!e(n[a],o[a]))return!1;return!0}}this.encode=s(n(e,"encode")),this.decode=s(n(e,"decode")),this.is=s(n(e,"is"),!0),this.equals=c(n(e,"equals")),this.pattern=e.pattern,this.$normalize=s(n(e,"$normalize")),this.name=e.name,this.$arrayMode=t}if(!e)return this;if("auto"===e&&!t)throw new Error("'auto' array mode is for query parameters only");return new n(this,e)},t.module("ui.router.util").provider("$urlMatcherFactory",S),t.module("ui.router.util").run(["$urlMatcherFactory",function(e){}]),_.$inject=["$locationProvider","$urlMatcherFactoryProvider"],t.module("ui.router.router").provider("$urlRouter",_),w.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],t.module("ui.router.state").factory("$stateParams",function(){return{}}).constant("$state.runtime",{autoinject:!0}).provider("$state",w).run(["$injector",function(e){e.get("$state.runtime").autoinject&&e.get("$state")}]),E.$inject=[],t.module("ui.router.state").provider("$view",E),t.module("ui.router.state").provider("$uiViewScroll",T),O.$inject=["$state","$injector","$uiViewScroll","$interpolate","$q"],I.$inject=["$compile","$controller","$state","$interpolate"],t.module("ui.router.state").directive("uiView",O),t.module("ui.router.state").directive("uiView",I),D.$inject=["$state","$timeout"],$.$inject=["$state","$timeout"],M.$inject=["$state","$stateParams","$interpolate"],t.module("ui.router.state").directive("uiSref",D).directive("uiSrefActive",M).directive("uiSrefActiveEq",M).directive("uiState",$),x.$inject=["$state"],F.$inject=["$state"],t.module("ui.router.state").filter("isState",x).filter("includedByState",F)}(window,window.angular)},{}],28:[function(e,t,r){var n={utf8:{stringToBytes:function(e){return n.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(n.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};t.exports=n},{}],29:[function(e,t,r){!function(e,r,n){"use strict";!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){r(1),r(50),r(51),r(52),r(54),r(55),r(58),r(59),r(60),r(61),r(62),r(63),r(64),r(65),r(66),r(68),r(70),r(72),r(74),r(77),r(78),r(79),r(83),r(86),r(87),r(88),r(89),r(91),r(92),r(93),r(94),r(95),r(97),r(99),r(100),r(101),r(103),r(104),r(105),r(107),r(108),r(109),r(111),r(112),r(113),r(114),r(115),r(116),r(117),r(118),r(119),r(120),r(121),r(122),r(123),r(124),r(126),r(130),r(131),r(132),r(133),r(137),r(139),r(140),r(141),r(142),r(143),r(144),r(145),r(146),r(147),r(148),r(149),r(150),r(151),r(152),r(158),r(159),r(161),r(162),r(163),r(167),r(168),r(169),r(170),r(171),r(173),r(174),r(175),r(176),r(179),r(181),r(182),r(183),r(185),r(187),r(189),r(190),r(191),r(193),r(194),r(195),r(196),r(203),r(206),r(207),r(209),r(210),r(211),r(212),r(213),r(214),r(215),r(216),r(217),r(218),r(219),r(220),r(222),r(223),r(224),r(225),r(226),r(227),r(228),r(229),r(231),r(234),r(235),r(237),r(238),r(239),r(240),r(241),r(242),r(243),r(244),r(245),r(246),r(247),r(249),r(250),r(251),r(252),r(253),r(254),r(255),r(256),r(258),r(259),r(261),r(262),r(263),r(264),r(267),r(268),r(269),r(270),r(271),r(272),r(273),r(274),r(276),r(277),r(278),r(279),r(280),r(281),r(282),r(283),r(284),r(285),r(286),r(287),e.exports=r(288)},function(e,t,r){var i=r(2),o=r(3),a=r(4),s=r(6),c=r(16),l=r(20).KEY,u=r(5),d=r(21),p=r(22),f=r(17),h=r(23),m=r(24),g=r(25),v=r(27),y=r(40),b=r(43),S=r(10),_=r(30),w=r(14),E=r(15),T=r(44),O=r(47),I=r(49),P=r(9),R=r(28),C=I.f,A=P.f,j=O.f,k=i.Symbol,D=i.JSON,$=D&&D.stringify,M="prototype",x=h("_hidden"),F=h("toPrimitive"),L={}.propertyIsEnumerable,U=d("symbol-registry"),B=d("symbols"),N=d("op-symbols"),q=Object[M],H="function"==typeof k,V=i.QObject,Y=!V||!V[M]||!V[M].findChild,z=a&&u(function(){return 7!=T(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=C(q,t);n&&delete q[t],A(e,t,r),n&&e!==q&&A(q,t,n)}:A,G=function(e){var t=B[e]=T(k[M]);return t._k=e,t},W=H&&"symbol"==typeof k.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof k},Q=function(e,t,r){return e===q&&Q(N,t,r),S(e),t=w(t,!0),S(r),o(B,t)?(r.enumerable?(o(e,x)&&e[x][t]&&(e[x][t]=!1),r=T(r,{enumerable:E(0,!1)})):(o(e,x)||A(e,x,E(1,{})),e[x][t]=!0),z(e,t,r)):A(e,t,r)},K=function(e,t){S(e);for(var r,n=y(t=_(t)),i=0,o=n.length;o>i;)Q(e,r=n[i++],t[r]);return e},X=function(e,t){return t===n?T(e):K(T(e),t)},J=function(e){var t=L.call(this,e=w(e,!0));return!(this===q&&o(B,e)&&!o(N,e))&&(!(t||!o(this,e)||!o(B,e)||o(this,x)&&this[x][e])||t)},Z=function(e,t){if(e=_(e),t=w(t,!0),e!==q||!o(B,t)||o(N,t)){var r=C(e,t);return!r||!o(B,t)||o(e,x)&&e[x][t]||(r.enumerable=!0),r}},ee=function(e){for(var t,r=j(_(e)),n=[],i=0;r.length>i;)o(B,t=r[i++])||t==x||t==l||n.push(t);return n},te=function(e){for(var t,r=e===q,n=j(r?N:_(e)),i=[],a=0;n.length>a;)!o(B,t=n[a++])||r&&!o(q,t)||i.push(B[t]);return i};H||(k=function(){if(this instanceof k)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:n),t=function(r){this===q&&t.call(N,r),o(this,x)&&o(this[x],e)&&(this[x][e]=!1),z(this,e,E(1,r))};return a&&Y&&z(q,e,{configurable:!0,set:t}),G(e)},c(k[M],"toString",function(){return this._k}),I.f=Z,P.f=Q,r(48).f=O.f=ee,r(42).f=J,r(41).f=te,a&&!r(26)&&c(q,"propertyIsEnumerable",J,!0),m.f=function(e){return G(h(e))}),s(s.G+s.W+s.F*!H,{Symbol:k});for(var re="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;re.length>ne;)h(re[ne++]);for(var re=R(h.store),ne=0;re.length>ne;)g(re[ne++]);s(s.S+s.F*!H,"Symbol",{for:function(e){return o(U,e+="")?U[e]:U[e]=k(e)},keyFor:function(e){if(W(e))return v(U,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){Y=!0},useSimple:function(){Y=!1}}),s(s.S+s.F*!H,"Object",{create:X,defineProperty:Q,defineProperties:K,getOwnPropertyDescriptor:Z,getOwnPropertyNames:ee,getOwnPropertySymbols:te}),D&&s(s.S+s.F*(!H||u(function(){var e=k();return"[null]"!=$([e])||"{}"!=$({a:e})||"{}"!=$(Object(e))})),"JSON",{stringify:function(e){if(e!==n&&!W(e)){for(var t,r,i=[e],o=1;arguments.length>o;)i.push(arguments[o++]);return t=i[1],"function"==typeof t&&(r=t),!r&&b(t)||(t=function(e,t){if(r&&(t=r.call(this,e,t)),!W(t))return t}),i[1]=t,$.apply(D,i)}}}),k[M][F]||r(8)(k[M],F,k[M].valueOf),p(k,"Symbol"),p(Math,"Math",!0),p(i.JSON,"JSON",!0)},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof r&&(r=n)},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){e.exports=!r(5)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,r){var i=r(2),o=r(7),a=r(8),s=r(16),c=r(18),l="prototype",u=function(e,t,r){var d,p,f,h,m=e&u.F,g=e&u.G,v=e&u.S,y=e&u.P,b=e&u.B,S=g?i:v?i[t]||(i[t]={}):(i[t]||{})[l],_=g?o:o[t]||(o[t]={}),w=_[l]||(_[l]={});g&&(r=t);for(d in r)p=!m&&S&&S[d]!==n,f=(p?S:r)[d],h=b&&p?c(f,i):y&&"function"==typeof f?c(Function.call,f):f,S&&s(S,d,f,e&u.U),_[d]!=f&&a(_,d,h),y&&w[d]!=f&&(w[d]=f)};i.core=o,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(t,r){var n=t.exports={version:"2.4.0"};"number"==typeof e&&(e=n)},function(e,t,r){var n=r(9),i=r(15);e.exports=r(4)?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){var n=r(10),i=r(12),o=r(14),a=Object.defineProperty;t.f=r(4)?Object.defineProperty:function(e,t,r){if(n(e),t=o(t,!0),n(r),i)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){var n=r(11);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){e.exports=!r(4)&&!r(5)(function(){return 7!=Object.defineProperty(r(13)("div"),"a",{get:function(){return 7}}).a})},function(e,t,r){var n=r(11),i=r(2).document,o=n(i)&&n(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,r){var n=r(11);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,r){var n=r(2),i=r(8),o=r(3),a=r(17)("src"),s="toString",c=Function[s],l=(""+c).split(s);r(7).inspectSource=function(e){return c.call(e)},(e.exports=function(e,t,r,s){var c="function"==typeof r;c&&(o(r,"name")||i(r,"name",t)),e[t]!==r&&(c&&(o(r,a)||i(r,a,e[t]?""+e[t]:l.join(String(t)))),e===n?e[t]=r:s?e[t]?e[t]=r:i(e,t,r):(delete e[t],i(e,t,r)))})(Function.prototype,s,function(){return"function"==typeof this&&this[a]||c.call(this)})},function(e,t){var r=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(e===n?"":e,")_",(++r+i).toString(36))}},function(e,t,r){var i=r(19);e.exports=function(e,t,r){if(i(e),t===n)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,r){var n=r(17)("meta"),i=r(11),o=r(3),a=r(9).f,s=0,c=Object.isExtensible||function(){return!0},l=!r(5)(function(){return c(Object.preventExtensions({}))}),u=function(e){a(e,n,{value:{i:"O"+ ++s,w:{}}})},d=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,n)){if(!c(e))return"F";if(!t)return"E";u(e)}return e[n].i},p=function(e,t){if(!o(e,n)){if(!c(e))return!0;if(!t)return!1;u(e)}return e[n].w},f=function(e){return l&&h.NEED&&c(e)&&!o(e,n)&&u(e),e},h=e.exports={KEY:n,NEED:!1,fastKey:d,getWeak:p,onFreeze:f}},function(e,t,r){var n=r(2),i="__core-js_shared__",o=n[i]||(n[i]={});e.exports=function(e){return o[e]||(o[e]={})}},function(e,t,r){var n=r(9).f,i=r(3),o=r(23)("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},function(e,t,r){var n=r(21)("wks"),i=r(17),o=r(2).Symbol,a="function"==typeof o,s=e.exports=function(e){return n[e]||(n[e]=a&&o[e]||(a?o:i)("Symbol."+e))};s.store=n},function(e,t,r){t.f=r(23)},function(e,t,r){var n=r(2),i=r(7),o=r(26),a=r(24),s=r(9).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t){e.exports=!1},function(e,t,r){var n=r(28),i=r(30);e.exports=function(e,t){for(var r,o=i(e),a=n(o),s=a.length,c=0;s>c;)if(o[r=a[c++]]===t)return r}},function(e,t,r){var n=r(29),i=r(39);e.exports=Object.keys||function(e){return n(e,i)}},function(e,t,r){var n=r(3),i=r(30),o=r(34)(!1),a=r(38)("IE_PROTO");e.exports=function(e,t){var r,s=i(e),c=0,l=[];for(r in s)r!=a&&n(s,r)&&l.push(r);for(;t.length>c;)n(s,r=t[c++])&&(~o(l,r)||l.push(r));return l}},function(e,t,r){var n=r(31),i=r(33);e.exports=function(e){return n(i(e))}},function(e,t,r){var n=r(32);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(e==n)throw TypeError("Can't call method on  "+e);return e}},function(e,t,r){var n=r(30),i=r(35),o=r(37);e.exports=function(e){return function(t,r,a){var s,c=n(t),l=i(c.length),u=o(a,l);if(e&&r!=r){for(;l>u;)if(s=c[u++],s!=s)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===r)return e||u||0;return!e&&-1}}},function(e,t,r){var n=r(36),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){var n=r(36),i=Math.max,o=Math.min;e.exports=function(e,t){return e=n(e),e<0?i(e+t,0):o(e,t)}},function(e,t,r){var n=r(21)("keys"),i=r(17);e.exports=function(e){return n[e]||(n[e]=i(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,r){var n=r(28),i=r(41),o=r(42);e.exports=function(e){var t=n(e),r=i.f;if(r)for(var a,s=r(e),c=o.f,l=0;s.length>l;)c.call(e,a=s[l++])&&t.push(a);return t}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,r){var n=r(32);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){var i=r(10),o=r(45),a=r(39),s=r(38)("IE_PROTO"),c=function(){},l="prototype",u=function(){var e,t=r(13)("iframe"),n=a.length,i="<",o=">";for(t.style.display="none",r(46).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(i+"script"+o+"document.F=Object"+i+"/script"+o),e.close(),u=e.F;n--;)delete u[l][a[n]];return u()};e.exports=Object.create||function(e,t){var r;return null!==e?(c[l]=i(e),r=new c,c[l]=null,r[s]=e):r=u(),t===n?r:o(r,t)}},function(e,t,r){var n=r(9),i=r(10),o=r(28);e.exports=r(4)?Object.defineProperties:function(e,t){i(e);for(var r,a=o(t),s=a.length,c=0;s>c;)n.f(e,r=a[c++],t[r]);return e}},function(e,t,r){e.exports=r(2).document&&document.documentElement},function(e,t,r){var n=r(30),i=r(48).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):i(n(e))}},function(e,t,r){var n=r(29),i=r(39).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},function(e,t,r){var n=r(42),i=r(15),o=r(30),a=r(14),s=r(3),c=r(12),l=Object.getOwnPropertyDescriptor;t.f=r(4)?l:function(e,t){if(e=o(e),t=a(t,!0),c)try{return l(e,t)}catch(e){}if(s(e,t))return i(!n.f.call(e,t),e[t])}},function(e,t,r){var n=r(6);n(n.S+n.F*!r(4),"Object",{defineProperty:r(9).f})},function(e,t,r){var n=r(6);n(n.S+n.F*!r(4),"Object",{defineProperties:r(45)})},function(e,t,r){var n=r(30),i=r(49).f;r(53)("getOwnPropertyDescriptor",function(){return function(e,t){return i(n(e),t)}})},function(e,t,r){var n=r(6),i=r(7),o=r(5);e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],a={};a[e]=t(r),n(n.S+n.F*o(function(){r(1)}),"Object",a)}},function(e,t,r){var n=r(6);n(n.S,"Object",{create:r(44)})},function(e,t,r){var n=r(56),i=r(57);r(53)("getPrototypeOf",function(){return function(e){return i(n(e))}})},function(e,t,r){var n=r(33);e.exports=function(e){return Object(n(e))}},function(e,t,r){var n=r(3),i=r(56),o=r(38)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,r){var n=r(56),i=r(28);r(53)("keys",function(){return function(e){return i(n(e))}})},function(e,t,r){r(53)("getOwnPropertyNames",function(){return r(47).f})},function(e,t,r){var n=r(11),i=r(20).onFreeze;r(53)("freeze",function(e){return function(t){return e&&n(t)?e(i(t)):t}})},function(e,t,r){var n=r(11),i=r(20).onFreeze;r(53)("seal",function(e){return function(t){return e&&n(t)?e(i(t)):t}})},function(e,t,r){var n=r(11),i=r(20).onFreeze;r(53)("preventExtensions",function(e){return function(t){return e&&n(t)?e(i(t)):t}})},function(e,t,r){var n=r(11);r(53)("isFrozen",function(e){return function(t){return!n(t)||!!e&&e(t)}})},function(e,t,r){var n=r(11);r(53)("isSealed",function(e){return function(t){return!n(t)||!!e&&e(t)}})},function(e,t,r){var n=r(11);r(53)("isExtensible",function(e){return function(t){return!!n(t)&&(!e||e(t))}})},function(e,t,r){var n=r(6);n(n.S+n.F,"Object",{assign:r(67)})},function(e,t,r){var n=r(28),i=r(41),o=r(42),a=r(56),s=r(31),c=Object.assign;e.exports=!c||r(5)(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=c({},e)[r]||Object.keys(c({},t)).join("")!=n})?function(e,t){for(var r=a(e),c=arguments.length,l=1,u=i.f,d=o.f;c>l;)for(var p,f=s(arguments[l++]),h=u?n(f).concat(u(f)):n(f),m=h.length,g=0;m>g;)d.call(f,p=h[g++])&&(r[p]=f[p]);return r}:c},function(e,t,r){var n=r(6);n(n.S,"Object",{is:r(69)})},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},function(e,t,r){var n=r(6);n(n.S,"Object",{setPrototypeOf:r(71).set})},function(e,t,r){var i=r(11),o=r(10),a=function(e,t){if(o(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=r(18)(Function.call,r(49).f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return a(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):n),check:a}},function(e,t,r){var n=r(73),i={};i[r(23)("toStringTag")]="z",i+""!="[object z]"&&r(16)(Object.prototype,"toString",function(){return"[object "+n(this)+"]"},!0)},function(e,t,r){var i=r(32),o=r(23)("toStringTag"),a="Arguments"==i(function(){return arguments}()),s=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,r,c;return e===n?"Undefined":null===e?"Null":"string"==typeof(r=s(t=Object(e),o))?r:a?i(t):"Object"==(c=i(t))&&"function"==typeof t.callee?"Arguments":c}},function(e,t,r){var n=r(6);n(n.P,"Function",{bind:r(75)})},function(e,t,r){var n=r(19),i=r(11),o=r(76),a=[].slice,s={},c=function(e,t,r){if(!(t in s)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";s[t]=Function("F,a","return new F("+n.join(",")+")")}return s[t](e,r)};e.exports=Function.bind||function(e){var t=n(this),r=a.call(arguments,1),s=function(){var n=r.concat(a.call(arguments));return this instanceof s?c(t,n.length,n):o(t,n,e)};return i(t.prototype)&&(s.prototype=t.prototype),s}},function(e,t){e.exports=function(e,t,r){var i=r===n;switch(t.length){case 0:return i?e():e.call(r);case 1:return i?e(t[0]):e.call(r,t[0]);case 2:return i?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){var n=r(9).f,i=r(15),o=r(3),a=Function.prototype,s=/^\s*function ([^ (]*)/,c="name",l=Object.isExtensible||function(){return!0};c in a||r(4)&&n(a,c,{configurable:!0,get:function(){try{var e=this,t=(""+e).match(s)[1];return o(e,c)||!l(e)||n(e,c,i(5,t)),t}catch(e){return""}}})},function(e,t,r){var n=r(11),i=r(57),o=r(23)("hasInstance"),a=Function.prototype;o in a||r(9).f(a,o,{value:function(e){if("function"!=typeof this||!n(e))return!1;if(!n(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,r){var n=r(2),i=r(3),o=r(32),a=r(80),s=r(14),c=r(5),l=r(48).f,u=r(49).f,d=r(9).f,p=r(81).trim,f="Number",h=n[f],m=h,g=h.prototype,v=o(r(44)(g))==f,y="trim"in String.prototype,b=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=y?t.trim():p(t,3);var r,n,i,o=t.charCodeAt(0);if(43===o||45===o){if(r=t.charCodeAt(2),88===r||120===r)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+t}for(var a,c=t.slice(2),l=0,u=c.length;l<u;l++)if(a=c.charCodeAt(l),a<48||a>i)return NaN;return parseInt(c,n)}}return+t};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof h&&(v?c(function(){g.valueOf.call(r)}):o(r)!=f)?a(new m(b(t)),r,h):b(t)};for(var S,_=r(4)?l(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;_.length>w;w++)i(m,S=_[w])&&!i(h,S)&&d(h,S,u(m,S));h.prototype=g,g.constructor=h,r(16)(n,f,h)}},function(e,t,r){var n=r(11),i=r(71).set;e.exports=function(e,t,r){var o,a=t.constructor;return a!==r&&"function"==typeof a&&(o=a.prototype)!==r.prototype&&n(o)&&i&&i(e,o),e}},function(e,t,r){var n=r(6),i=r(33),o=r(5),a=r(82),s="["+a+"]",c="​",l=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),d=function(e,t,r){var i={},s=o(function(){return!!a[e]()||c[e]()!=c}),l=i[e]=s?t(p):a[e];r&&(i[r]=l),n(n.P+n.F*s,"String",i)},p=d.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(u,"")),e};e.exports=d},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,r){var n=r(6),i=r(36),o=r(84),a=r(85),s=1..toFixed,c=Math.floor,l=[0,0,0,0,0,0],u="Number.toFixed: incorrect invocation!",d="0",p=function(e,t){for(var r=-1,n=t;++r<6;)n+=e*l[r],l[r]=n%1e7,n=c(n/1e7)},f=function(e){for(var t=6,r=0;--t>=0;)r+=l[t],l[t]=c(r/e),r=r%e*1e7},h=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==l[e]){var r=String(l[e]);t=""===t?r:t+a.call(d,7-r.length)+r}return t},m=function(e,t,r){return 0===t?r:t%2===1?m(e,t-1,r*e):m(e*e,t/2,r)},g=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t};n(n.P+n.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(5)(function(){s.call({})})),"Number",{toFixed:function(e){var t,r,n,s,c=o(this,u),l=i(e),v="",y=d;if(l<0||l>20)throw RangeError(u);if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(v="-",c=-c),c>1e-21)if(t=g(c*m(2,69,1))-69,r=t<0?c*m(2,-t,1):c/m(2,t,1),r*=4503599627370496,t=52-t,t>0){for(p(0,r),n=l;n>=7;)p(1e7,0),n-=7;for(p(m(10,n,1),0),n=t-1;n>=23;)f(1<<23),n-=23;f(1<<n),p(1,1),f(2),y=h()}else p(0,r),p(1<<-t,0),y=h()+a.call(d,l);return l>0?(s=y.length,y=v+(s<=l?"0."+a.call(d,l-s)+y:y.slice(0,s-l)+"."+y.slice(s-l))):y=v+y,y}})},function(e,t,r){var n=r(32);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=n(e))throw TypeError(t);return+e}},function(e,t,r){var n=r(36),i=r(33);e.exports=function(e){var t=String(i(this)),r="",o=n(e);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(r+=t);return r}},function(e,t,r){var i=r(6),o=r(5),a=r(84),s=1..toPrecision;i(i.P+i.F*(o(function(){return"1"!==s.call(1,n)})||!o(function(){s.call({})})),"Number",{toPrecision:function(e){var t=a(this,"Number#toPrecision: incorrect invocation!");return e===n?s.call(t):s.call(t,e)}})},function(e,t,r){var n=r(6);n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,r){var n=r(6),i=r(2).isFinite;n(n.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},function(e,t,r){var n=r(6);n(n.S,"Number",{isInteger:r(90)})},function(e,t,r){var n=r(11),i=Math.floor;e.exports=function(e){return!n(e)&&isFinite(e)&&i(e)===e}},function(e,t,r){var n=r(6);n(n.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,r){var n=r(6),i=r(90),o=Math.abs;n(n.S,"Number",{isSafeInteger:function(e){return i(e)&&o(e)<=9007199254740991}})},function(e,t,r){var n=r(6);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,r){var n=r(6);n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,r){var n=r(6),i=r(96);n(n.S+n.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(e,t,r){var n=r(2).parseFloat,i=r(81).trim;e.exports=1/n(r(82)+"-0")!==-(1/0)?function(e){var t=i(String(e),3),r=n(t);return 0===r&&"-"==t.charAt(0)?-0:r}:n},function(e,t,r){var n=r(6),i=r(98);n(n.S+n.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(e,t,r){var n=r(2).parseInt,i=r(81).trim,o=r(82),a=/^[\-+]?0[xX]/;e.exports=8!==n(o+"08")||22!==n(o+"0x16")?function(e,t){var r=i(String(e),3);return n(r,t>>>0||(a.test(r)?16:10))}:n},function(e,t,r){var n=r(6),i=r(98);n(n.G+n.F*(parseInt!=i),{parseInt:i})},function(e,t,r){var n=r(6),i=r(96);n(n.G+n.F*(parseFloat!=i),{parseFloat:i})},function(e,t,r){var n=r(6),i=r(102),o=Math.sqrt,a=Math.acosh;n(n.S+n.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:i(e-1+o(e-1)*o(e+1))}})},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,r){function n(e){return isFinite(e=+e)&&0!=e?e<0?-n(-e):Math.log(e+Math.sqrt(e*e+1)):e}var i=r(6),o=Math.asinh;i(i.S+i.F*!(o&&1/o(0)>0),"Math",{asinh:n})},function(e,t,r){var n=r(6),i=Math.atanh;n(n.S+n.F*!(i&&1/i(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,r){var n=r(6),i=r(106);n(n.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t,r){var n=r(6);n(n.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,r){var n=r(6),i=Math.exp;n(n.S,"Math",{cosh:function(e){return(i(e=+e)+i(-e))/2}})},function(e,t,r){var n=r(6),i=r(110);n(n.S+n.F*(i!=Math.expm1),"Math",{expm1:i})},function(e,t){var r=Math.expm1;e.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||r(-2e-17)!=-2e-17?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:r},function(e,t,r){var n=r(6),i=r(106),o=Math.pow,a=o(2,-52),s=o(2,-23),c=o(2,127)*(2-s),l=o(2,-126),u=function(e){return e+1/a-1/a};n(n.S,"Math",{fround:function(e){var t,r,n=Math.abs(e),o=i(e);return n<l?o*u(n/l/s)*l*s:(t=(1+s/a)*n,r=t-(t-n),r>c||r!=r?o*(1/0):o*r)}})},function(e,t,r){var n=r(6),i=Math.abs;n(n.S,"Math",{hypot:function(e,t){for(var r,n,o=0,a=0,s=arguments.length,c=0;a<s;)r=i(arguments[a++]),c<r?(n=c/r,o=o*n*n+1,c=r):r>0?(n=r/c,o+=n*n):o+=r;return c===1/0?1/0:c*Math.sqrt(o)}})},function(e,t,r){var n=r(6),i=Math.imul;n(n.S+n.F*r(5)(function(){return i(4294967295,5)!=-5||2!=i.length}),"Math",{imul:function(e,t){var r=65535,n=+e,i=+t,o=r&n,a=r&i;return 0|o*a+((r&n>>>16)*a+o*(r&i>>>16)<<16>>>0)}})},function(e,t,r){var n=r(6);n(n.S,"Math",{log10:function(e){return Math.log(e)/Math.LN10}})},function(e,t,r){var n=r(6);n(n.S,"Math",{log1p:r(102)})},function(e,t,r){var n=r(6);n(n.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,r){var n=r(6);n(n.S,"Math",{sign:r(106)})},function(e,t,r){var n=r(6),i=r(110),o=Math.exp;n(n.S+n.F*r(5)(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(o(e-1)-o(-e-1))*(Math.E/2)}})},function(e,t,r){var n=r(6),i=r(110),o=Math.exp;n(n.S,"Math",{tanh:function(e){var t=i(e=+e),r=i(-e);return t==1/0?1:r==1/0?-1:(t-r)/(o(e)+o(-e))}})},function(e,t,r){var n=r(6);n(n.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,r){var n=r(6),i=r(37),o=String.fromCharCode,a=String.fromCodePoint;
n(n.S+n.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(e){for(var t,r=[],n=arguments.length,a=0;n>a;){if(t=+arguments[a++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");r.push(t<65536?o(t):o(((t-=65536)>>10)+55296,t%1024+56320))}return r.join("")}})},function(e,t,r){var n=r(6),i=r(30),o=r(35);n(n.S,"String",{raw:function(e){for(var t=i(e.raw),r=o(t.length),n=arguments.length,a=[],s=0;r>s;)a.push(String(t[s++])),s<n&&a.push(String(arguments[s]));return a.join("")}})},function(e,t,r){r(81)("trim",function(e){return function(){return e(this,3)}})},function(e,t,r){var n=r(6),i=r(125)(!1);n(n.P,"String",{codePointAt:function(e){return i(this,e)}})},function(e,t,r){var i=r(36),o=r(33);e.exports=function(e){return function(t,r){var a,s,c=String(o(t)),l=i(r),u=c.length;return l<0||l>=u?e?"":n:(a=c.charCodeAt(l),a<55296||a>56319||l+1===u||(s=c.charCodeAt(l+1))<56320||s>57343?e?c.charAt(l):a:e?c.slice(l,l+2):(a-55296<<10)+(s-56320)+65536)}}},function(e,t,r){var i=r(6),o=r(35),a=r(127),s="endsWith",c=""[s];i(i.P+i.F*r(129)(s),"String",{endsWith:function(e){var t=a(this,e,s),r=arguments.length>1?arguments[1]:n,i=o(t.length),l=r===n?i:Math.min(o(r),i),u=String(e);return c?c.call(t,u,l):t.slice(l-u.length,l)===u}})},function(e,t,r){var n=r(128),i=r(33);e.exports=function(e,t,r){if(n(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(e))}},function(e,t,r){var i=r(11),o=r(32),a=r(23)("match");e.exports=function(e){var t;return i(e)&&((t=e[a])!==n?!!t:"RegExp"==o(e))}},function(e,t,r){var n=r(23)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,r){var i=r(6),o=r(127),a="includes";i(i.P+i.F*r(129)(a),"String",{includes:function(e){return!!~o(this,e,a).indexOf(e,arguments.length>1?arguments[1]:n)}})},function(e,t,r){var n=r(6);n(n.P,"String",{repeat:r(85)})},function(e,t,r){var i=r(6),o=r(35),a=r(127),s="startsWith",c=""[s];i(i.P+i.F*r(129)(s),"String",{startsWith:function(e){var t=a(this,e,s),r=o(Math.min(arguments.length>1?arguments[1]:n,t.length)),i=String(e);return c?c.call(t,i,r):t.slice(r,r+i.length)===i}})},function(e,t,r){var i=r(125)(!0);r(134)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:n,done:!0}:(e=i(t,r),this._i+=e.length,{value:e,done:!1})})},function(e,t,r){var i=r(26),o=r(6),a=r(16),s=r(8),c=r(3),l=r(135),u=r(136),d=r(22),p=r(57),f=r(23)("iterator"),h=!([].keys&&"next"in[].keys()),m="@@iterator",g="keys",v="values",y=function(){return this};e.exports=function(e,t,r,b,S,_,w){u(r,t,b);var E,T,O,I=function(e){if(!h&&e in A)return A[e];switch(e){case g:return function(){return new r(this,e)};case v:return function(){return new r(this,e)}}return function(){return new r(this,e)}},P=t+" Iterator",R=S==v,C=!1,A=e.prototype,j=A[f]||A[m]||S&&A[S],k=j||I(S),D=S?R?I("entries"):k:n,$="Array"==t?A.entries||j:j;if($&&(O=p($.call(new e)),O!==Object.prototype&&(d(O,P,!0),i||c(O,f)||s(O,f,y))),R&&j&&j.name!==v&&(C=!0,k=function(){return j.call(this)}),i&&!w||!h&&!C&&A[f]||s(A,f,k),l[t]=k,l[P]=y,S)if(E={values:R?k:I(v),keys:_?k:I(g),entries:D},w)for(T in E)T in A||a(A,T,E[T]);else o(o.P+o.F*(h||C),t,E);return E}},function(e,t){e.exports={}},function(e,t,r){var n=r(44),i=r(15),o=r(22),a={};r(8)(a,r(23)("iterator"),function(){return this}),e.exports=function(e,t,r){e.prototype=n(a,{next:i(1,r)}),o(e,t+" Iterator")}},function(e,t,r){r(138)("anchor",function(e){return function(t){return e(this,"a","name",t)}})},function(e,t,r){var n=r(6),i=r(5),o=r(33),a=/"/g,s=function(e,t,r,n){var i=String(o(e)),s="<"+t;return""!==r&&(s+=" "+r+'="'+String(n).replace(a,"&quot;")+'"'),s+">"+i+"</"+t+">"};e.exports=function(e,t){var r={};r[e]=t(s),n(n.P+n.F*i(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",r)}},function(e,t,r){r(138)("big",function(e){return function(){return e(this,"big","","")}})},function(e,t,r){r(138)("blink",function(e){return function(){return e(this,"blink","","")}})},function(e,t,r){r(138)("bold",function(e){return function(){return e(this,"b","","")}})},function(e,t,r){r(138)("fixed",function(e){return function(){return e(this,"tt","","")}})},function(e,t,r){r(138)("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},function(e,t,r){r(138)("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},function(e,t,r){r(138)("italics",function(e){return function(){return e(this,"i","","")}})},function(e,t,r){r(138)("link",function(e){return function(t){return e(this,"a","href",t)}})},function(e,t,r){r(138)("small",function(e){return function(){return e(this,"small","","")}})},function(e,t,r){r(138)("strike",function(e){return function(){return e(this,"strike","","")}})},function(e,t,r){r(138)("sub",function(e){return function(){return e(this,"sub","","")}})},function(e,t,r){r(138)("sup",function(e){return function(){return e(this,"sup","","")}})},function(e,t,r){var n=r(6);n(n.S,"Array",{isArray:r(43)})},function(e,t,r){var i=r(18),o=r(6),a=r(56),s=r(153),c=r(154),l=r(35),u=r(155),d=r(156);o(o.S+o.F*!r(157)(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,o,p,f=a(e),h="function"==typeof this?this:Array,m=arguments.length,g=m>1?arguments[1]:n,v=g!==n,y=0,b=d(f);if(v&&(g=i(g,m>2?arguments[2]:n,2)),b==n||h==Array&&c(b))for(t=l(f.length),r=new h(t);t>y;y++)u(r,y,v?g(f[y],y):f[y]);else for(p=b.call(f),r=new h;!(o=p.next()).done;y++)u(r,y,v?s(p,g,[o.value,y],!0):o.value);return r.length=y,r}})},function(e,t,r){var i=r(10);e.exports=function(e,t,r,o){try{return o?t(i(r)[0],r[1]):t(r)}catch(t){var a=e.return;throw a!==n&&i(a.call(e)),t}}},function(e,t,r){var i=r(135),o=r(23)("iterator"),a=Array.prototype;e.exports=function(e){return e!==n&&(i.Array===e||a[o]===e)}},function(e,t,r){var n=r(9),i=r(15);e.exports=function(e,t,r){t in e?n.f(e,t,i(0,r)):e[t]=r}},function(e,t,r){var i=r(73),o=r(23)("iterator"),a=r(135);e.exports=r(7).getIteratorMethod=function(e){if(e!=n)return e[o]||e["@@iterator"]||a[i(e)]}},function(e,t,r){var n=r(23)("iterator"),i=!1;try{var o=[7][n]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var o=[7],a=o[n]();a.next=function(){return{done:r=!0}},o[n]=function(){return a},e(o)}catch(e){}return r}},function(e,t,r){var n=r(6),i=r(155);n(n.S+n.F*r(5)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,r=new("function"==typeof this?this:Array)(t);t>e;)i(r,e,arguments[e++]);return r.length=t,r}})},function(e,t,r){var i=r(6),o=r(30),a=[].join;i(i.P+i.F*(r(31)!=Object||!r(160)(a)),"Array",{join:function(e){return a.call(o(this),e===n?",":e)}})},function(e,t,r){var n=r(5);e.exports=function(e,t){return!!e&&n(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t,r){var i=r(6),o=r(46),a=r(32),s=r(37),c=r(35),l=[].slice;i(i.P+i.F*r(5)(function(){o&&l.call(o)}),"Array",{slice:function(e,t){var r=c(this.length),i=a(this);if(t=t===n?r:t,"Array"==i)return l.call(this,e,t);for(var o=s(e,r),u=s(t,r),d=c(u-o),p=Array(d),f=0;f<d;f++)p[f]="String"==i?this.charAt(o+f):this[o+f];return p}})},function(e,t,r){var i=r(6),o=r(19),a=r(56),s=r(5),c=[].sort,l=[1,2,3];i(i.P+i.F*(s(function(){l.sort(n)})||!s(function(){l.sort(null)})||!r(160)(c)),"Array",{sort:function(e){return e===n?c.call(a(this)):c.call(a(this),o(e))}})},function(e,t,r){var n=r(6),i=r(164)(0),o=r(160)([].forEach,!0);n(n.P+n.F*!o,"Array",{forEach:function(e){return i(this,e,arguments[1])}})},function(e,t,r){var i=r(18),o=r(31),a=r(56),s=r(35),c=r(165);e.exports=function(e,t){var r=1==e,l=2==e,u=3==e,d=4==e,p=6==e,f=5==e||p,h=t||c;return function(t,c,m){for(var g,v,y=a(t),b=o(y),S=i(c,m,3),_=s(b.length),w=0,E=r?h(t,_):l?h(t,0):n;_>w;w++)if((f||w in b)&&(g=b[w],v=S(g,w,y),e))if(r)E[w]=v;else if(v)switch(e){case 3:return!0;case 5:return g;case 6:return w;case 2:E.push(g)}else if(d)return!1;return p?-1:u||d?d:E}}},function(e,t,r){var n=r(166);e.exports=function(e,t){return new(n(e))(t)}},function(e,t,r){var i=r(11),o=r(43),a=r(23)("species");e.exports=function(e){var t;return o(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!o(t.prototype)||(t=n),i(t)&&(t=t[a],null===t&&(t=n))),t===n?Array:t}},function(e,t,r){var n=r(6),i=r(164)(1);n(n.P+n.F*!r(160)([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},function(e,t,r){var n=r(6),i=r(164)(2);n(n.P+n.F*!r(160)([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},function(e,t,r){var n=r(6),i=r(164)(3);n(n.P+n.F*!r(160)([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},function(e,t,r){var n=r(6),i=r(164)(4);n(n.P+n.F*!r(160)([].every,!0),"Array",{every:function(e){return i(this,e,arguments[1])}})},function(e,t,r){var n=r(6),i=r(172);n(n.P+n.F*!r(160)([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},function(e,t,r){var n=r(19),i=r(56),o=r(31),a=r(35);e.exports=function(e,t,r,s,c){n(t);var l=i(e),u=o(l),d=a(l.length),p=c?d-1:0,f=c?-1:1;if(r<2)for(;;){if(p in u){s=u[p],p+=f;break}if(p+=f,c?p<0:d<=p)throw TypeError("Reduce of empty array with no initial value")}for(;c?p>=0:d>p;p+=f)p in u&&(s=t(s,u[p],p,l));return s}},function(e,t,r){var n=r(6),i=r(172);n(n.P+n.F*!r(160)([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,arguments.length,arguments[1],!0)}})},function(e,t,r){var n=r(6),i=r(34)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;n(n.P+n.F*(a||!r(160)(o)),"Array",{indexOf:function(e){return a?o.apply(this,arguments)||0:i(this,e,arguments[1])}})},function(e,t,r){var n=r(6),i=r(30),o=r(36),a=r(35),s=[].lastIndexOf,c=!!s&&1/[1].lastIndexOf(1,-0)<0;n(n.P+n.F*(c||!r(160)(s)),"Array",{lastIndexOf:function(e){if(c)return s.apply(this,arguments)||0;var t=i(this),r=a(t.length),n=r-1;for(arguments.length>1&&(n=Math.min(n,o(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in t&&t[n]===e)return n||0;return-1}})},function(e,t,r){var n=r(6);n(n.P,"Array",{copyWithin:r(177)}),r(178)("copyWithin")},function(e,t,r){var i=r(56),o=r(37),a=r(35);e.exports=[].copyWithin||function(e,t){var r=i(this),s=a(r.length),c=o(e,s),l=o(t,s),u=arguments.length>2?arguments[2]:n,d=Math.min((u===n?s:o(u,s))-l,s-c),p=1;for(l<c&&c<l+d&&(p=-1,l+=d-1,c+=d-1);d-- >0;)l in r?r[c]=r[l]:delete r[c],c+=p,l+=p;return r}},function(e,t,r){var i=r(23)("unscopables"),o=Array.prototype;o[i]==n&&r(8)(o,i,{}),e.exports=function(e){o[i][e]=!0}},function(e,t,r){var n=r(6);n(n.P,"Array",{fill:r(180)}),r(178)("fill")},function(e,t,r){var i=r(56),o=r(37),a=r(35);e.exports=function(e){for(var t=i(this),r=a(t.length),s=arguments.length,c=o(s>1?arguments[1]:n,r),l=s>2?arguments[2]:n,u=l===n?r:o(l,r);u>c;)t[c++]=e;return t}},function(e,t,r){var i=r(6),o=r(164)(5),a="find",s=!0;a in[]&&Array(1)[a](function(){s=!1}),i(i.P+i.F*s,"Array",{find:function(e){return o(this,e,arguments.length>1?arguments[1]:n)}}),r(178)(a)},function(e,t,r){var i=r(6),o=r(164)(6),a="findIndex",s=!0;a in[]&&Array(1)[a](function(){s=!1}),i(i.P+i.F*s,"Array",{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:n)}}),r(178)(a)},function(e,t,r){var i=r(178),o=r(184),a=r(135),s=r(30);e.exports=r(134)(Array,"Array",function(e,t){this._t=s(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=n,o(1)):"keys"==t?o(0,r):"values"==t?o(0,e[r]):o(0,[r,e[r]])},"values"),a.Arguments=a.Array,i("keys"),i("values"),i("entries")},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){r(186)("Array")},function(e,t,r){var n=r(2),i=r(9),o=r(4),a=r(23)("species");e.exports=function(e){var t=n[e];o&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t,r){var i=r(2),o=r(80),a=r(9).f,s=r(48).f,c=r(128),l=r(188),u=i.RegExp,d=u,p=u.prototype,f=/a/g,h=/a/g,m=new u(f)!==f;if(r(4)&&(!m||r(5)(function(){return h[r(23)("match")]=!1,u(f)!=f||u(h)==h||"/a/i"!=u(f,"i")}))){u=function(e,t){var r=this instanceof u,i=c(e),a=t===n;return!r&&i&&e.constructor===u&&a?e:o(m?new d(i&&!a?e.source:e,t):d((i=e instanceof u)?e.source:e,i&&a?l.call(e):t),r?this:p,u)};for(var g=(function(e){e in u||a(u,e,{configurable:!0,get:function(){return d[e]},set:function(t){d[e]=t}})}),v=s(d),y=0;v.length>y;)g(v[y++]);p.constructor=u,u.prototype=p,r(16)(i,"RegExp",u)}r(186)("RegExp")},function(e,t,r){var n=r(10);e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,r){r(190);var i=r(10),o=r(188),a=r(4),s="toString",c=/./[s],l=function(e){r(16)(RegExp.prototype,s,e,!0)};r(5)(function(){return"/a/b"!=c.call({source:"a",flags:"b"})})?l(function(){var e=i(this);return"/".concat(e.source,"/","flags"in e?e.flags:!a&&e instanceof RegExp?o.call(e):n)}):c.name!=s&&l(function(){return c.call(this)})},function(e,t,r){r(4)&&"g"!=/./g.flags&&r(9).f(RegExp.prototype,"flags",{configurable:!0,get:r(188)})},function(e,t,r){r(192)("match",1,function(e,t,r){return[function(r){var i=e(this),o=r==n?n:r[t];return o!==n?o.call(r,i):new RegExp(r)[t](String(i))},r]})},function(e,t,r){var n=r(8),i=r(16),o=r(5),a=r(33),s=r(23);e.exports=function(e,t,r){var c=s(e),l=r(a,c,""[e]),u=l[0],d=l[1];o(function(){var t={};return t[c]=function(){return 7},7!=""[e](t)})&&(i(String.prototype,e,u),n(RegExp.prototype,c,2==t?function(e,t){return d.call(e,this,t)}:function(e){return d.call(e,this)}))}},function(e,t,r){r(192)("replace",2,function(e,t,r){return[function(i,o){var a=e(this),s=i==n?n:i[t];return s!==n?s.call(i,a,o):r.call(String(a),i,o)},r]})},function(e,t,r){r(192)("search",1,function(e,t,r){return[function(r){var i=e(this),o=r==n?n:r[t];return o!==n?o.call(r,i):new RegExp(r)[t](String(i))},r]})},function(e,t,r){r(192)("split",2,function(e,t,i){var o=r(128),a=i,s=[].push,c="split",l="length",u="lastIndex";if("c"=="abbc"[c](/(b)*/)[1]||4!="test"[c](/(?:)/,-1)[l]||2!="ab"[c](/(?:ab)*/)[l]||4!="."[c](/(.?)(.?)/)[l]||"."[c](/()()/)[l]>1||""[c](/.?/)[l]){var d=/()??/.exec("")[1]===n;i=function(e,t){var r=String(this);if(e===n&&0===t)return[];if(!o(e))return a.call(r,e,t);var i,c,p,f,h,m=[],g=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),v=0,y=t===n?4294967295:t>>>0,b=new RegExp(e.source,g+"g");for(d||(i=new RegExp("^"+b.source+"$(?!\\s)",g));(c=b.exec(r))&&(p=c.index+c[0][l],!(p>v&&(m.push(r.slice(v,c.index)),!d&&c[l]>1&&c[0].replace(i,function(){for(h=1;h<arguments[l]-2;h++)arguments[h]===n&&(c[h]=n)}),c[l]>1&&c.index<r[l]&&s.apply(m,c.slice(1)),f=c[0][l],v=p,m[l]>=y)));)b[u]===c.index&&b[u]++;return v===r[l]?!f&&b.test("")||m.push(""):m.push(r.slice(v)),m[l]>y?m.slice(0,y):m}}else"0"[c](n,0)[l]&&(i=function(e,t){return e===n&&0===t?[]:a.call(this,e,t)});return[function(r,o){var a=e(this),s=r==n?n:r[t];return s!==n?s.call(r,a,o):i.call(String(a),r,o)},i]})},function(e,t,r){var i,o,a,s=r(26),c=r(2),l=r(18),u=r(73),d=r(6),p=r(11),f=r(19),h=r(197),m=r(198),g=r(199),v=r(200).set,y=r(201)(),b="Promise",S=c.TypeError,_=c.process,w=c[b],_=c.process,E="process"==u(_),T=function(){},O=!!function(){try{var e=w.resolve(1),t=(e.constructor={})[r(23)("species")]=function(e){e(T,T)};return(E||"function"==typeof PromiseRejectionEvent)&&e.then(T)instanceof t}catch(e){}}(),I=function(e,t){return e===t||e===w&&t===a},P=function(e){var t;return!(!p(e)||"function"!=typeof(t=e.then))&&t},R=function(e){return I(w,e)?new C(e):new o(e)},C=o=function(e){var t,r;this.promise=new e(function(e,i){if(t!==n||r!==n)throw S("Bad Promise constructor");t=e,r=i}),this.resolve=f(t),this.reject=f(r)},A=function(e){try{e()}catch(e){return{error:e}}},j=function(e,t){if(!e._n){e._n=!0;var r=e._c;y(function(){for(var n=e._v,i=1==e._s,o=0,a=function(t){var r,o,a=i?t.ok:t.fail,s=t.resolve,c=t.reject,l=t.domain;try{a?(i||(2==e._h&&$(e),e._h=1),a===!0?r=n:(l&&l.enter(),r=a(n),l&&l.exit()),r===t.promise?c(S("Promise-chain cycle")):(o=P(r))?o.call(r,s,c):s(r)):c(n)}catch(e){c(e)}};r.length>o;)a(r[o++]);e._c=[],e._n=!1,t&&!e._h&&k(e)})}},k=function(e){v.call(c,function(){var t,r,i,o=e._v;if(D(e)&&(t=A(function(){E?_.emit("unhandledRejection",o,e):(r=c.onunhandledrejection)?r({promise:e,reason:o}):(i=c.console)&&i.error&&i.error("Unhandled promise rejection",o)}),e._h=E||D(e)?2:1),e._a=n,t)throw t.error})},D=function(e){if(1==e._h)return!1;for(var t,r=e._a||e._c,n=0;r.length>n;)if(t=r[n++],t.fail||!D(t.promise))return!1;return!0},$=function(e){v.call(c,function(){var t;E?_.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})})},M=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),j(t,!0))},x=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw S("Promise can't be resolved itself");(t=P(e))?y(function(){var n={_w:r,_d:!1};try{t.call(e,l(x,n,1),l(M,n,1))}catch(e){M.call(n,e)}}):(r._v=e,r._s=1,j(r,!1))}catch(e){M.call({_w:r,_d:!1},e)}}};O||(w=function(e){h(this,w,b,"_h"),f(e),i.call(this);try{e(l(x,this,1),l(M,this,1))}catch(e){M.call(this,e)}},i=function(e){this._c=[],this._a=n,this._s=0,this._d=!1,this._v=n,this._h=0,this._n=!1},i.prototype=r(202)(w.prototype,{then:function(e,t){var r=R(g(this,w));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=E?_.domain:n,this._c.push(r),this._a&&this._a.push(r),this._s&&j(this,!1),r.promise},catch:function(e){return this.then(n,e)}}),C=function(){var e=new i;this.promise=e,this.resolve=l(x,e,1),this.reject=l(M,e,1)}),d(d.G+d.W+d.F*!O,{Promise:w}),r(22)(w,b),r(186)(b),a=r(7)[b],d(d.S+d.F*!O,b,{reject:function(e){var t=R(this),r=t.reject;return r(e),t.promise}}),d(d.S+d.F*(s||!O),b,{resolve:function(e){if(e instanceof w&&I(e.constructor,this))return e;var t=R(this),r=t.resolve;return r(e),t.promise}}),d(d.S+d.F*!(O&&r(157)(function(e){w.all(e).catch(T)})),b,{all:function(e){var t=this,r=R(t),i=r.resolve,o=r.reject,a=A(function(){var r=[],a=0,s=1;m(e,!1,function(e){var c=a++,l=!1;r.push(n),s++,t.resolve(e).then(function(e){l||(l=!0,r[c]=e,--s||i(r))},o)}),--s||i(r)});return a&&o(a.error),r.promise},race:function(e){var t=this,r=R(t),n=r.reject,i=A(function(){m(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return i&&n(i.error),r.promise}})},function(e,t){e.exports=function(e,t,r,i){if(!(e instanceof t)||i!==n&&i in e)throw TypeError(r+": incorrect invocation!");return e}},function(e,t,r){var n=r(18),i=r(153),o=r(154),a=r(10),s=r(35),c=r(156),l={},u={},t=e.exports=function(e,t,r,d,p){var f,h,m,g,v=p?function(){return e}:c(e),y=n(r,d,t?2:1),b=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(o(v)){for(f=s(e.length);f>b;b++)if(g=t?y(a(h=e[b])[0],h[1]):y(e[b]),g===l||g===u)return g}else for(m=v.call(e);!(h=m.next()).done;)if(g=i(m,y,h.value,t),g===l||g===u)return g};t.BREAK=l,t.RETURN=u},function(e,t,r){var i=r(10),o=r(19),a=r(23)("species");e.exports=function(e,t){var r,s=i(e).constructor;return s===n||(r=i(s)[a])==n?t:o(r)}},function(e,t,r){var n,i,o,a=r(18),s=r(76),c=r(46),l=r(13),u=r(2),d=u.process,p=u.setImmediate,f=u.clearImmediate,h=u.MessageChannel,m=0,g={},v="onreadystatechange",y=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},b=function(e){y.call(e.data)};p&&f||(p=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return g[++m]=function(){s("function"==typeof e?e:Function(e),t)},n(m),m},f=function(e){delete g[e]},"process"==r(32)(d)?n=function(e){d.nextTick(a(y,e,1))}:h?(i=new h,o=i.port2,i.port1.onmessage=b,n=a(o.postMessage,o,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(n=function(e){u.postMessage(e+"","*")},u.addEventListener("message",b,!1)):n=v in l("script")?function(e){c.appendChild(l("script"))[v]=function(){c.removeChild(this),y.call(e)}}:function(e){setTimeout(a(y,e,1),0)}),e.exports={set:p,clear:f}},function(e,t,r){var i=r(2),o=r(200).set,a=i.MutationObserver||i.WebKitMutationObserver,s=i.process,c=i.Promise,l="process"==r(32)(s);e.exports=function(){var e,t,r,u=function(){var i,o;for(l&&(i=s.domain)&&i.exit();e;){o=e.fn,e=e.next;try{o()}catch(i){throw e?r():t=n,i}}t=n,i&&i.enter()};if(l)r=function(){s.nextTick(u)};else if(a){var d=!0,p=document.createTextNode("");new a(u).observe(p,{characterData:!0}),r=function(){p.data=d=!d}}else if(c&&c.resolve){var f=c.resolve();r=function(){f.then(u)}}else r=function(){o.call(i,u)};return function(i){var o={fn:i,next:n};t&&(t.next=o),e||(e=o,r()),t=o}}},function(e,t,r){var n=r(16);e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},function(e,t,r){var i=r(204);e.exports=r(205)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:n)}},{get:function(e){var t=i.getEntry(this,e);return t&&t.v},set:function(e,t){return i.def(this,0===e?0:e,t)}},i,!0)},function(e,t,r){var i=r(9).f,o=r(44),a=r(202),s=r(18),c=r(197),l=r(33),u=r(198),d=r(134),p=r(184),f=r(186),h=r(4),m=r(20).fastKey,g=h?"_s":"size",v=function(e,t){var r,n=m(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,d){var p=e(function(e,i){c(e,p,t,"_i"),e._i=o(null),e._f=n,e._l=n,e[g]=0,i!=n&&u(i,r,e[d],e)});return a(p.prototype,{clear:function(){for(var e=this,t=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=n),delete t[r.i];e._f=e._l=n,e[g]=0},delete:function(e){var t=this,r=v(t,e);if(r){var n=r.n,i=r.p;delete t._i[r.i],r.r=!0,i&&(i.n=n),n&&(n.p=i),t._f==r&&(t._f=n),t._l==r&&(t._l=i),t[g]--}return!!r},forEach:function(e){c(this,p,"forEach");for(var t,r=s(e,arguments.length>1?arguments[1]:n,3);t=t?t.n:this._f;)for(r(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!v(this,e)}}),h&&i(p.prototype,"size",{get:function(){return l(this[g])}}),p},def:function(e,t,r){var i,o,a=v(e,t);return a?a.v=r:(e._l=a={i:o=m(t,!0),k:t,v:r,p:i=e._l,n:n,r:!1},e._f||(e._f=a),i&&(i.n=a),e[g]++,"F"!==o&&(e._i[o]=a)),e},getEntry:v,setStrong:function(e,t,r){d(e,t,function(e,t){this._t=e,this._k=t,this._l=n},function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?"keys"==t?p(0,r.k):"values"==t?p(0,r.v):p(0,[r.k,r.v]):(e._t=n,p(1))},r?"entries":"values",!r,!0),f(t)}}},function(e,t,r){var i=r(2),o=r(6),a=r(16),s=r(202),c=r(20),l=r(198),u=r(197),d=r(11),p=r(5),f=r(157),h=r(22),m=r(80);e.exports=function(e,t,r,g,v,y){var b=i[e],S=b,_=v?"set":"add",w=S&&S.prototype,E={},T=function(e){var t=w[e];a(w,e,"delete"==e?function(e){return!(y&&!d(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(y&&!d(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return y&&!d(e)?n:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,r){return t.call(this,0===e?0:e,r),this})};if("function"==typeof S&&(y||w.forEach&&!p(function(){(new S).entries().next()}))){var O=new S,I=O[_](y?{}:-0,1)!=O,P=p(function(){O.has(1)}),R=f(function(e){new S(e)}),C=!y&&p(function(){for(var e=new S,t=5;t--;)e[_](t,t);return!e.has(-0)});R||(S=t(function(t,r){u(t,S,e);var i=m(new b,t,S);return r!=n&&l(r,v,i[_],i),i}),S.prototype=w,w.constructor=S),(P||C)&&(T("delete"),T("has"),v&&T("get")),(C||I)&&T(_),y&&w.clear&&delete w.clear}else S=g.getConstructor(t,e,v,_),s(S.prototype,r),c.NEED=!0;return h(S,e),E[e]=S,o(o.G+o.W+o.F*(S!=b),E),y||g.setStrong(S,e,v),S}},function(e,t,r){var i=r(204);e.exports=r(205)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:n)}},{add:function(e){return i.def(this,e=0===e?0:e,e)}},i)},function(e,t,r){var i,o=r(164)(0),a=r(16),s=r(20),c=r(67),l=r(208),u=r(11),d=s.getWeak,p=Object.isExtensible,f=l.ufstore,h={},m=function(e){return function(){return e(this,arguments.length>0?arguments[0]:n)}},g={get:function(e){if(u(e)){var t=d(e);return t===!0?f(this).get(e):t?t[this._i]:n}},set:function(e,t){return l.def(this,e,t)}},v=e.exports=r(205)("WeakMap",m,g,l,!0,!0);7!=(new v).set((Object.freeze||Object)(h),7).get(h)&&(i=l.getConstructor(m),c(i.prototype,g),s.NEED=!0,o(["delete","has","get","set"],function(e){var t=v.prototype,r=t[e];a(t,e,function(t,n){if(u(t)&&!p(t)){this._f||(this._f=new i);var o=this._f[e](t,n);return"set"==e?this:o}return r.call(this,t,n)})}))},function(e,t,r){var i=r(202),o=r(20).getWeak,a=r(10),s=r(11),c=r(197),l=r(198),u=r(164),d=r(3),p=u(5),f=u(6),h=0,m=function(e){return e._l||(e._l=new g)},g=function(){this.a=[]},v=function(e,t){return p(e.a,function(e){return e[0]===t})};g.prototype={get:function(e){var t=v(this,e);if(t)return t[1]},has:function(e){return!!v(this,e)},set:function(e,t){var r=v(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=f(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,r,a){var u=e(function(e,i){c(e,u,t,"_i"),e._i=h++,e._l=n,i!=n&&l(i,r,e[a],e)});return i(u.prototype,{delete:function(e){if(!s(e))return!1;var t=o(e);return t===!0?m(this).delete(e):t&&d(t,this._i)&&delete t[this._i]},has:function(e){if(!s(e))return!1;var t=o(e);return t===!0?m(this).has(e):t&&d(t,this._i)}}),u},def:function(e,t,r){var n=o(a(t),!0);return n===!0?m(e).set(t,r):n[e._i]=r,e},ufstore:m}},function(e,t,r){var i=r(208);r(205)("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:n)}},{add:function(e){return i.def(this,e,!0)}},i,!1,!0)},function(e,t,r){var n=r(6),i=r(19),o=r(10),a=(r(2).Reflect||{}).apply,s=Function.apply;n(n.S+n.F*!r(5)(function(){a(function(){})}),"Reflect",{apply:function(e,t,r){var n=i(e),c=o(r);return a?a(n,t,c):s.call(n,t,c)}})},function(e,t,r){var n=r(6),i=r(44),o=r(19),a=r(10),s=r(11),c=r(5),l=r(75),u=(r(2).Reflect||{}).construct,d=c(function(){function e(){}return!(u(function(){},[],e)instanceof e)}),p=!c(function(){u(function(){})});n(n.S+n.F*(d||p),"Reflect",{construct:function(e,t){o(e),a(t);var r=arguments.length<3?e:o(arguments[2]);if(p&&!d)return u(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(l.apply(e,n))}var c=r.prototype,f=i(s(c)?c:Object.prototype),h=Function.apply.call(e,f,t);return s(h)?h:f}})},function(e,t,r){var n=r(9),i=r(6),o=r(10),a=r(14);i(i.S+i.F*r(5)(function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,r){o(e),t=a(t,!0),o(r);try{return n.f(e,t,r),!0}catch(e){return!1}}})},function(e,t,r){var n=r(6),i=r(49).f,o=r(10);n(n.S,"Reflect",{deleteProperty:function(e,t){var r=i(o(e),t);return!(r&&!r.configurable)&&delete e[t]}})},function(e,t,r){var i=r(6),o=r(10),a=function(e){this._t=o(e),this._i=0;var t,r=this._k=[];for(t in e)r.push(t)};r(136)(a,"Object",function(){var e,t=this,r=t._k;do if(t._i>=r.length)return{value:n,done:!0};while(!((e=r[t._i++])in t._t));return{value:e,done:!1}}),i(i.S,"Reflect",{enumerate:function(e){return new a(e)}})},function(e,t,r){function i(e,t){var r,c,d=arguments.length<3?e:arguments[2];return u(e)===d?e[t]:(r=o.f(e,t))?s(r,"value")?r.value:r.get!==n?r.get.call(d):n:l(c=a(e))?i(c,t,d):void 0}var o=r(49),a=r(57),s=r(3),c=r(6),l=r(11),u=r(10);c(c.S,"Reflect",{get:i})},function(e,t,r){var n=r(49),i=r(6),o=r(10);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return n.f(o(e),t)}})},function(e,t,r){var n=r(6),i=r(57),o=r(10);n(n.S,"Reflect",{getPrototypeOf:function(e){return i(o(e))}})},function(e,t,r){var n=r(6);n(n.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,r){var n=r(6),i=r(10),o=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(e){return i(e),!o||o(e)}})},function(e,t,r){var n=r(6);n(n.S,"Reflect",{ownKeys:r(221)})},function(e,t,r){var n=r(48),i=r(41),o=r(10),a=r(2).Reflect;e.exports=a&&a.ownKeys||function(e){var t=n.f(o(e)),r=i.f;return r?t.concat(r(e)):t}},function(e,t,r){var n=r(6),i=r(10),o=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(e){i(e);try{return o&&o(e),!0}catch(e){return!1}}})},function(e,t,r){function i(e,t,r){var l,f,h=arguments.length<4?e:arguments[3],m=a.f(d(e),t);if(!m){if(p(f=s(e)))return i(f,t,r,h);m=u(0)}return c(m,"value")?!(m.writable===!1||!p(h))&&(l=a.f(h,t)||u(0),l.value=r,o.f(h,t,l),!0):m.set!==n&&(m.set.call(h,r),!0)}var o=r(9),a=r(49),s=r(57),c=r(3),l=r(6),u=r(15),d=r(10),p=r(11);l(l.S,"Reflect",{set:i})},function(e,t,r){var n=r(6),i=r(71);i&&n(n.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},function(e,t,r){var n=r(6);n(n.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,r){var n=r(6),i=r(56),o=r(14);n(n.P+n.F*r(5)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=i(this),r=o(t);return"number"!=typeof r||isFinite(r)?t.toISOString():null}})},function(e,t,r){var n=r(6),i=r(5),o=Date.prototype.getTime,a=function(e){return e>9?e:"0"+e};n(n.P+n.F*(i(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!i(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),r=e.getUTCMilliseconds(),n=t<0?"-":t>9999?"+":"";return n+("00000"+Math.abs(t)).slice(n?-6:-4)+"-"+a(e.getUTCMonth()+1)+"-"+a(e.getUTCDate())+"T"+a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds())+"."+(r>99?r:"0"+a(r))+"Z"}})},function(e,t,r){var n=Date.prototype,i="Invalid Date",o="toString",a=n[o],s=n.getTime;new Date(NaN)+""!=i&&r(16)(n,o,function(){var e=s.call(this);return e===e?a.call(this):i})},function(e,t,r){var n=r(23)("toPrimitive"),i=Date.prototype;n in i||r(8)(i,n,r(230))},function(e,t,r){var n=r(10),i=r(14),o="number";e.exports=function(e){if("string"!==e&&e!==o&&"default"!==e)throw TypeError("Incorrect hint");return i(n(this),e!=o)}},function(e,t,r){var i=r(6),o=r(232),a=r(233),s=r(10),c=r(37),l=r(35),u=r(11),d=r(2).ArrayBuffer,p=r(199),f=a.ArrayBuffer,h=a.DataView,m=o.ABV&&d.isView,g=f.prototype.slice,v=o.VIEW,y="ArrayBuffer";i(i.G+i.W+i.F*(d!==f),{ArrayBuffer:f}),i(i.S+i.F*!o.CONSTR,y,{isView:function(e){return m&&m(e)||u(e)&&v in e}}),i(i.P+i.U+i.F*r(5)(function(){return!new f(2).slice(1,n).byteLength}),y,{slice:function(e,t){if(g!==n&&t===n)return g.call(s(this),e);for(var r=s(this).byteLength,i=c(e,r),o=c(t===n?r:t,r),a=new(p(this,f))(l(o-i)),u=new h(this),d=new h(a),m=0;i<o;)d.setUint8(m++,u.getUint8(i++));return a}}),r(186)(y)},function(e,t,r){for(var n,i=r(2),o=r(8),a=r(17),s=a("typed_array"),c=a("view"),l=!(!i.ArrayBuffer||!i.DataView),u=l,d=0,p=9,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");d<p;)(n=i[f[d++]])?(o(n.prototype,s,!0),o(n.prototype,c,!0)):u=!1;e.exports={ABV:l,CONSTR:u,TYPED:s,VIEW:c}},function(e,t,r){var i=r(2),o=r(4),a=r(26),s=r(232),c=r(8),l=r(202),u=r(5),d=r(197),p=r(36),f=r(35),h=r(48).f,m=r(9).f,g=r(180),v=r(22),y="ArrayBuffer",b="DataView",S="prototype",_="Wrong length!",w="Wrong index!",E=i[y],T=i[b],O=i.Math,I=i.RangeError,P=i.Infinity,R=E,C=O.abs,A=O.pow,j=O.floor,k=O.log,D=O.LN2,$="buffer",M="byteLength",x="byteOffset",F=o?"_b":$,L=o?"_l":M,U=o?"_o":x,B=function(e,t,r){var n,i,o,a=Array(r),s=8*r-t-1,c=(1<<s)-1,l=c>>1,u=23===t?A(2,-24)-A(2,-77):0,d=0,p=e<0||0===e&&1/e<0?1:0;for(e=C(e),e!=e||e===P?(i=e!=e?1:0,n=c):(n=j(k(e)/D),e*(o=A(2,-n))<1&&(n--,o*=2),e+=n+l>=1?u/o:u*A(2,1-l),e*o>=2&&(n++,o/=2),n+l>=c?(i=0,n=c):n+l>=1?(i=(e*o-1)*A(2,t),n+=l):(i=e*A(2,l-1)*A(2,t),n=0));t>=8;a[d++]=255&i,i/=256,t-=8);for(n=n<<t|i,s+=t;s>0;a[d++]=255&n,n/=256,s-=8);return a[--d]|=128*p,a},N=function(e,t,r){var n,i=8*r-t-1,o=(1<<i)-1,a=o>>1,s=i-7,c=r-1,l=e[c--],u=127&l;for(l>>=7;s>0;u=256*u+e[c],c--,s-=8);for(n=u&(1<<-s)-1,u>>=-s,s+=t;s>0;n=256*n+e[c],c--,s-=8);if(0===u)u=1-a;else{if(u===o)return n?NaN:l?-P:P;n+=A(2,t),u-=a}return(l?-1:1)*n*A(2,u-t)},q=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0];
},H=function(e){return[255&e]},V=function(e){return[255&e,e>>8&255]},Y=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},z=function(e){return B(e,52,8)},G=function(e){return B(e,23,4)},W=function(e,t,r){m(e[S],t,{get:function(){return this[r]}})},Q=function(e,t,r,n){var i=+r,o=p(i);if(i!=o||o<0||o+t>e[L])throw I(w);var a=e[F]._b,s=o+e[U],c=a.slice(s,s+t);return n?c:c.reverse()},K=function(e,t,r,n,i,o){var a=+r,s=p(a);if(a!=s||s<0||s+t>e[L])throw I(w);for(var c=e[F]._b,l=s+e[U],u=n(+i),d=0;d<t;d++)c[l+d]=u[o?d:t-d-1]},X=function(e,t){d(e,E,y);var r=+t,n=f(r);if(r!=n)throw I(_);return n};if(s.ABV){if(!u(function(){new E})||!u(function(){new E(.5)})){E=function(e){return new R(X(this,e))};for(var J,Z=E[S]=R[S],ee=h(R),te=0;ee.length>te;)(J=ee[te++])in E||c(E,J,R[J]);a||(Z.constructor=E)}var re=new T(new E(2)),ne=T[S].setInt8;re.setInt8(0,2147483648),re.setInt8(1,2147483649),!re.getInt8(0)&&re.getInt8(1)||l(T[S],{setInt8:function(e,t){ne.call(this,e,t<<24>>24)},setUint8:function(e,t){ne.call(this,e,t<<24>>24)}},!0)}else E=function(e){var t=X(this,e);this._b=g.call(Array(t),0),this[L]=t},T=function(e,t,r){d(this,T,b),d(e,E,b);var i=e[L],o=p(t);if(o<0||o>i)throw I("Wrong offset!");if(r=r===n?i-o:f(r),o+r>i)throw I(_);this[F]=e,this[U]=o,this[L]=r},o&&(W(E,M,"_l"),W(T,$,"_b"),W(T,M,"_l"),W(T,x,"_o")),l(T[S],{getInt8:function(e){return Q(this,1,e)[0]<<24>>24},getUint8:function(e){return Q(this,1,e)[0]},getInt16:function(e){var t=Q(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=Q(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return q(Q(this,4,e,arguments[1]))},getUint32:function(e){return q(Q(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return N(Q(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return N(Q(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){K(this,1,e,H,t)},setUint8:function(e,t){K(this,1,e,H,t)},setInt16:function(e,t){K(this,2,e,V,t,arguments[2])},setUint16:function(e,t){K(this,2,e,V,t,arguments[2])},setInt32:function(e,t){K(this,4,e,Y,t,arguments[2])},setUint32:function(e,t){K(this,4,e,Y,t,arguments[2])},setFloat32:function(e,t){K(this,4,e,G,t,arguments[2])},setFloat64:function(e,t){K(this,8,e,z,t,arguments[2])}});v(E,y),v(T,b),c(T[S],s.VIEW,!0),t[y]=E,t[b]=T},function(e,t,r){var n=r(6);n(n.G+n.W+n.F*!r(232).ABV,{DataView:r(233).DataView})},function(e,t,r){r(236)("Int8",1,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){if(r(4)){var i=r(26),o=r(2),a=r(5),s=r(6),c=r(232),l=r(233),u=r(18),d=r(197),p=r(15),f=r(8),h=r(202),m=r(36),g=r(35),v=r(37),y=r(14),b=r(3),S=r(69),_=r(73),w=r(11),E=r(56),T=r(154),O=r(44),I=r(57),P=r(48).f,R=r(156),C=r(17),A=r(23),j=r(164),k=r(34),D=r(199),$=r(183),M=r(135),x=r(157),F=r(186),L=r(180),U=r(177),B=r(9),N=r(49),q=B.f,H=N.f,V=o.RangeError,Y=o.TypeError,z=o.Uint8Array,G="ArrayBuffer",W="Shared"+G,Q="BYTES_PER_ELEMENT",K="prototype",X=Array[K],J=l.ArrayBuffer,Z=l.DataView,ee=j(0),te=j(2),re=j(3),ne=j(4),ie=j(5),oe=j(6),ae=k(!0),se=k(!1),ce=$.values,le=$.keys,ue=$.entries,de=X.lastIndexOf,pe=X.reduce,fe=X.reduceRight,he=X.join,me=X.sort,ge=X.slice,ve=X.toString,ye=X.toLocaleString,be=A("iterator"),Se=A("toStringTag"),_e=C("typed_constructor"),we=C("def_constructor"),Ee=c.CONSTR,Te=c.TYPED,Oe=c.VIEW,Ie="Wrong length!",Pe=j(1,function(e,t){return De(D(e,e[we]),t)}),Re=a(function(){return 1===new z(new Uint16Array([1]).buffer)[0]}),Ce=!!z&&!!z[K].set&&a(function(){new z(1).set({})}),Ae=function(e,t){if(e===n)throw Y(Ie);var r=+e,i=g(e);if(t&&!S(r,i))throw V(Ie);return i},je=function(e,t){var r=m(e);if(r<0||r%t)throw V("Wrong offset!");return r},ke=function(e){if(w(e)&&Te in e)return e;throw Y(e+" is not a typed array!")},De=function(e,t){if(!(w(e)&&_e in e))throw Y("It is not a typed array constructor!");return new e(t)},$e=function(e,t){return Me(D(e,e[we]),t)},Me=function(e,t){for(var r=0,n=t.length,i=De(e,n);n>r;)i[r]=t[r++];return i},xe=function(e,t,r){q(e,t,{get:function(){return this._d[r]}})},Fe=function(e){var t,r,i,o,a,s,c=E(e),l=arguments.length,d=l>1?arguments[1]:n,p=d!==n,f=R(c);if(f!=n&&!T(f)){for(s=f.call(c),i=[],t=0;!(a=s.next()).done;t++)i.push(a.value);c=i}for(p&&l>2&&(d=u(d,arguments[2],2)),t=0,r=g(c.length),o=De(this,r);r>t;t++)o[t]=p?d(c[t],t):c[t];return o},Le=function(){for(var e=0,t=arguments.length,r=De(this,t);t>e;)r[e]=arguments[e++];return r},Ue=!!z&&a(function(){ye.call(new z(1))}),Be=function(){return ye.apply(Ue?ge.call(ke(this)):ke(this),arguments)},Ne={copyWithin:function(e,t){return U.call(ke(this),e,t,arguments.length>2?arguments[2]:n)},every:function(e){return ne(ke(this),e,arguments.length>1?arguments[1]:n)},fill:function(e){return L.apply(ke(this),arguments)},filter:function(e){return $e(this,te(ke(this),e,arguments.length>1?arguments[1]:n))},find:function(e){return ie(ke(this),e,arguments.length>1?arguments[1]:n)},findIndex:function(e){return oe(ke(this),e,arguments.length>1?arguments[1]:n)},forEach:function(e){ee(ke(this),e,arguments.length>1?arguments[1]:n)},indexOf:function(e){return se(ke(this),e,arguments.length>1?arguments[1]:n)},includes:function(e){return ae(ke(this),e,arguments.length>1?arguments[1]:n)},join:function(e){return he.apply(ke(this),arguments)},lastIndexOf:function(e){return de.apply(ke(this),arguments)},map:function(e){return Pe(ke(this),e,arguments.length>1?arguments[1]:n)},reduce:function(e){return pe.apply(ke(this),arguments)},reduceRight:function(e){return fe.apply(ke(this),arguments)},reverse:function(){for(var e,t=this,r=ke(t).length,n=Math.floor(r/2),i=0;i<n;)e=t[i],t[i++]=t[--r],t[r]=e;return t},some:function(e){return re(ke(this),e,arguments.length>1?arguments[1]:n)},sort:function(e){return me.call(ke(this),e)},subarray:function(e,t){var r=ke(this),i=r.length,o=v(e,i);return new(D(r,r[we]))(r.buffer,r.byteOffset+o*r.BYTES_PER_ELEMENT,g((t===n?i:v(t,i))-o))}},qe=function(e,t){return $e(this,ge.call(ke(this),e,t))},He=function(e){ke(this);var t=je(arguments[1],1),r=this.length,n=E(e),i=g(n.length),o=0;if(i+t>r)throw V(Ie);for(;o<i;)this[t+o]=n[o++]},Ve={entries:function(){return ue.call(ke(this))},keys:function(){return le.call(ke(this))},values:function(){return ce.call(ke(this))}},Ye=function(e,t){return w(e)&&e[Te]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},ze=function(e,t){return Ye(e,t=y(t,!0))?p(2,e[t]):H(e,t)},Ge=function(e,t,r){return!(Ye(e,t=y(t,!0))&&w(r)&&b(r,"value"))||b(r,"get")||b(r,"set")||r.configurable||b(r,"writable")&&!r.writable||b(r,"enumerable")&&!r.enumerable?q(e,t,r):(e[t]=r.value,e)};Ee||(N.f=ze,B.f=Ge),s(s.S+s.F*!Ee,"Object",{getOwnPropertyDescriptor:ze,defineProperty:Ge}),a(function(){ve.call({})})&&(ve=ye=function(){return he.call(this)});var We=h({},Ne);h(We,Ve),f(We,be,Ve.values),h(We,{slice:qe,set:He,constructor:function(){},toString:ve,toLocaleString:Be}),xe(We,"buffer","b"),xe(We,"byteOffset","o"),xe(We,"byteLength","l"),xe(We,"length","e"),q(We,Se,{get:function(){return this[Te]}}),e.exports=function(e,t,r,l){l=!!l;var u=e+(l?"Clamped":"")+"Array",p="Uint8Array"!=u,h="get"+e,m="set"+e,v=o[u],y=v||{},b=v&&I(v),S=!v||!c.ABV,E={},T=v&&v[K],R=function(e,r){var n=e._d;return n.v[h](r*t+n.o,Re)},C=function(e,r,n){var i=e._d;l&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),i.v[m](r*t+i.o,n,Re)},A=function(e,t){q(e,t,{get:function(){return R(this,t)},set:function(e){return C(this,t,e)},enumerable:!0})};S?(v=r(function(e,r,i,o){d(e,v,u,"_d");var a,s,c,l,p=0,h=0;if(w(r)){if(!(r instanceof J||(l=_(r))==G||l==W))return Te in r?Me(v,r):Fe.call(v,r);a=r,h=je(i,t);var m=r.byteLength;if(o===n){if(m%t)throw V(Ie);if(s=m-h,s<0)throw V(Ie)}else if(s=g(o)*t,s+h>m)throw V(Ie);c=s/t}else c=Ae(r,!0),s=c*t,a=new J(s);for(f(e,"_d",{b:a,o:h,l:s,e:c,v:new Z(a)});p<c;)A(e,p++)}),T=v[K]=O(We),f(T,"constructor",v)):x(function(e){new v(null),new v(e)},!0)||(v=r(function(e,r,i,o){d(e,v,u);var a;return w(r)?r instanceof J||(a=_(r))==G||a==W?o!==n?new y(r,je(i,t),o):i!==n?new y(r,je(i,t)):new y(r):Te in r?Me(v,r):Fe.call(v,r):new y(Ae(r,p))}),ee(b!==Function.prototype?P(y).concat(P(b)):P(y),function(e){e in v||f(v,e,y[e])}),v[K]=T,i||(T.constructor=v));var j=T[be],k=!!j&&("values"==j.name||j.name==n),D=Ve.values;f(v,_e,!0),f(T,Te,u),f(T,Oe,!0),f(T,we,v),(l?new v(1)[Se]==u:Se in T)||q(T,Se,{get:function(){return u}}),E[u]=v,s(s.G+s.W+s.F*(v!=y),E),s(s.S,u,{BYTES_PER_ELEMENT:t,from:Fe,of:Le}),Q in T||f(T,Q,t),s(s.P,u,Ne),F(u),s(s.P+s.F*Ce,u,{set:He}),s(s.P+s.F*!k,u,Ve),s(s.P+s.F*(T.toString!=ve),u,{toString:ve}),s(s.P+s.F*a(function(){new v(1).slice()}),u,{slice:qe}),s(s.P+s.F*(a(function(){return[1,2].toLocaleString()!=new v([1,2]).toLocaleString()})||!a(function(){T.toLocaleString.call([1,2])})),u,{toLocaleString:Be}),M[u]=k?j:D,i||k||f(T,be,D)}}else e.exports=function(){}},function(e,t,r){r(236)("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(236)("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}},!0)},function(e,t,r){r(236)("Int16",2,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(236)("Uint16",2,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(236)("Int32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(236)("Uint32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(236)("Float32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(236)("Float64",8,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){var i=r(6),o=r(34)(!0);i(i.P,"Array",{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:n)}}),r(178)("includes")},function(e,t,r){var n=r(6),i=r(125)(!0);n(n.P,"String",{at:function(e){return i(this,e)}})},function(e,t,r){var i=r(6),o=r(248);i(i.P,"String",{padStart:function(e){return o(this,e,arguments.length>1?arguments[1]:n,!0)}})},function(e,t,r){var i=r(35),o=r(85),a=r(33);e.exports=function(e,t,r,s){var c=String(a(e)),l=c.length,u=r===n?" ":String(r),d=i(t);if(d<=l||""==u)return c;var p=d-l,f=o.call(u,Math.ceil(p/u.length));return f.length>p&&(f=f.slice(0,p)),s?f+c:c+f}},function(e,t,r){var i=r(6),o=r(248);i(i.P,"String",{padEnd:function(e){return o(this,e,arguments.length>1?arguments[1]:n,!1)}})},function(e,t,r){r(81)("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},function(e,t,r){r(81)("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},function(e,t,r){var n=r(6),i=r(33),o=r(35),a=r(128),s=r(188),c=RegExp.prototype,l=function(e,t){this._r=e,this._s=t};r(136)(l,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),n(n.P,"String",{matchAll:function(e){if(i(this),!a(e))throw TypeError(e+" is not a regexp!");var t=String(this),r="flags"in c?String(e.flags):s.call(e),n=new RegExp(e.source,~r.indexOf("g")?r:"g"+r);return n.lastIndex=o(e.lastIndex),new l(n,t)}})},function(e,t,r){r(25)("asyncIterator")},function(e,t,r){r(25)("observable")},function(e,t,r){var n=r(6),i=r(221),o=r(30),a=r(49),s=r(155);n(n.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,r=o(e),n=a.f,c=i(r),l={},u=0;c.length>u;)s(l,t=c[u++],n(r,t));return l}})},function(e,t,r){var n=r(6),i=r(257)(!1);n(n.S,"Object",{values:function(e){return i(e)}})},function(e,t,r){var n=r(28),i=r(30),o=r(42).f;e.exports=function(e){return function(t){for(var r,a=i(t),s=n(a),c=s.length,l=0,u=[];c>l;)o.call(a,r=s[l++])&&u.push(e?[r,a[r]]:a[r]);return u}}},function(e,t,r){var n=r(6),i=r(257)(!0);n(n.S,"Object",{entries:function(e){return i(e)}})},function(e,t,r){var n=r(6),i=r(56),o=r(19),a=r(9);r(4)&&n(n.P+r(260),"Object",{__defineGetter__:function(e,t){a.f(i(this),e,{get:o(t),enumerable:!0,configurable:!0})}})},function(e,t,r){e.exports=r(26)||!r(5)(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete r(2)[e]})},function(e,t,r){var n=r(6),i=r(56),o=r(19),a=r(9);r(4)&&n(n.P+r(260),"Object",{__defineSetter__:function(e,t){a.f(i(this),e,{set:o(t),enumerable:!0,configurable:!0})}})},function(e,t,r){var n=r(6),i=r(56),o=r(14),a=r(57),s=r(49).f;r(4)&&n(n.P+r(260),"Object",{__lookupGetter__:function(e){var t,r=i(this),n=o(e,!0);do if(t=s(r,n))return t.get;while(r=a(r))}})},function(e,t,r){var n=r(6),i=r(56),o=r(14),a=r(57),s=r(49).f;r(4)&&n(n.P+r(260),"Object",{__lookupSetter__:function(e){var t,r=i(this),n=o(e,!0);do if(t=s(r,n))return t.set;while(r=a(r))}})},function(e,t,r){var n=r(6);n(n.P+n.R,"Map",{toJSON:r(265)("Map")})},function(e,t,r){var n=r(73),i=r(266);e.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,r){var n=r(198);e.exports=function(e,t){var r=[];return n(e,!1,r.push,r,t),r}},function(e,t,r){var n=r(6);n(n.P+n.R,"Set",{toJSON:r(265)("Set")})},function(e,t,r){var n=r(6);n(n.S,"System",{global:r(2)})},function(e,t,r){var n=r(6),i=r(32);n(n.S,"Error",{isError:function(e){return"Error"===i(e)}})},function(e,t,r){var n=r(6);n(n.S,"Math",{iaddh:function(e,t,r,n){var i=e>>>0,o=t>>>0,a=r>>>0;return o+(n>>>0)+((i&a|(i|a)&~(i+a>>>0))>>>31)|0}})},function(e,t,r){var n=r(6);n(n.S,"Math",{isubh:function(e,t,r,n){var i=e>>>0,o=t>>>0,a=r>>>0;return o-(n>>>0)-((~i&a|~(i^a)&i-a>>>0)>>>31)|0}})},function(e,t,r){var n=r(6);n(n.S,"Math",{imulh:function(e,t){var r=65535,n=+e,i=+t,o=n&r,a=i&r,s=n>>16,c=i>>16,l=(s*a>>>0)+(o*a>>>16);return s*c+(l>>16)+((o*c>>>0)+(l&r)>>16)}})},function(e,t,r){var n=r(6);n(n.S,"Math",{umulh:function(e,t){var r=65535,n=+e,i=+t,o=n&r,a=i&r,s=n>>>16,c=i>>>16,l=(s*a>>>0)+(o*a>>>16);return s*c+(l>>>16)+((o*c>>>0)+(l&r)>>>16)}})},function(e,t,r){var n=r(275),i=r(10),o=n.key,a=n.set;n.exp({defineMetadata:function(e,t,r,n){a(e,t,i(r),o(n))}})},function(e,t,r){var i=r(203),o=r(6),a=r(21)("metadata"),s=a.store||(a.store=new(r(207))),c=function(e,t,r){var o=s.get(e);if(!o){if(!r)return n;s.set(e,o=new i)}var a=o.get(t);if(!a){if(!r)return n;o.set(t,a=new i)}return a},l=function(e,t,r){var i=c(t,r,!1);return i!==n&&i.has(e)},u=function(e,t,r){var i=c(t,r,!1);return i===n?n:i.get(e)},d=function(e,t,r,n){c(r,n,!0).set(e,t)},p=function(e,t){var r=c(e,t,!1),n=[];return r&&r.forEach(function(e,t){n.push(t)}),n},f=function(e){return e===n||"symbol"==typeof e?e:String(e)},h=function(e){o(o.S,"Reflect",e)};e.exports={store:s,map:c,has:l,get:u,set:d,keys:p,key:f,exp:h}},function(e,t,r){var i=r(275),o=r(10),a=i.key,s=i.map,c=i.store;i.exp({deleteMetadata:function(e,t){var r=arguments.length<3?n:a(arguments[2]),i=s(o(t),r,!1);if(i===n||!i.delete(e))return!1;if(i.size)return!0;var l=c.get(t);return l.delete(r),!!l.size||c.delete(t)}})},function(e,t,r){var i=r(275),o=r(10),a=r(57),s=i.has,c=i.get,l=i.key,u=function(e,t,r){var i=s(e,t,r);if(i)return c(e,t,r);var o=a(t);return null!==o?u(e,o,r):n};i.exp({getMetadata:function(e,t){return u(e,o(t),arguments.length<3?n:l(arguments[2]))}})},function(e,t,r){var i=r(206),o=r(266),a=r(275),s=r(10),c=r(57),l=a.keys,u=a.key,d=function(e,t){var r=l(e,t),n=c(e);if(null===n)return r;var a=d(n,t);return a.length?r.length?o(new i(r.concat(a))):a:r};a.exp({getMetadataKeys:function(e){return d(s(e),arguments.length<2?n:u(arguments[1]))}})},function(e,t,r){var i=r(275),o=r(10),a=i.get,s=i.key;i.exp({getOwnMetadata:function(e,t){return a(e,o(t),arguments.length<3?n:s(arguments[2]))}})},function(e,t,r){var i=r(275),o=r(10),a=i.keys,s=i.key;i.exp({getOwnMetadataKeys:function(e){return a(o(e),arguments.length<2?n:s(arguments[1]))}})},function(e,t,r){var i=r(275),o=r(10),a=r(57),s=i.has,c=i.key,l=function(e,t,r){var n=s(e,t,r);if(n)return!0;var i=a(t);return null!==i&&l(e,i,r)};i.exp({hasMetadata:function(e,t){return l(e,o(t),arguments.length<3?n:c(arguments[2]))}})},function(e,t,r){var i=r(275),o=r(10),a=i.has,s=i.key;i.exp({hasOwnMetadata:function(e,t){return a(e,o(t),arguments.length<3?n:s(arguments[2]))}})},function(e,t,r){var i=r(275),o=r(10),a=r(19),s=i.key,c=i.set;i.exp({metadata:function(e,t){return function(r,i){c(e,t,(i!==n?o:a)(r),s(i))}}})},function(e,t,r){var n=r(6),i=r(201)(),o=r(2).process,a="process"==r(32)(o);n(n.G,{asap:function(e){var t=a&&o.domain;i(t?t.bind(e):e)}})},function(e,t,r){var i=r(6),o=r(2),a=r(7),s=r(201)(),c=r(23)("observable"),l=r(19),u=r(10),d=r(197),p=r(202),f=r(8),h=r(198),m=h.RETURN,g=function(e){return null==e?n:l(e)},v=function(e){var t=e._c;t&&(e._c=n,t())},y=function(e){return e._o===n},b=function(e){y(e)||(e._o=n,v(e))},S=function(e,t){u(e),this._c=n,this._o=e,e=new _(this);try{var r=t(e),i=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){i.unsubscribe()}:l(r),this._c=r)}catch(t){return void e.error(t)}y(this)&&v(this)};S.prototype=p({},{unsubscribe:function(){b(this)}});var _=function(e){this._s=e};_.prototype=p({},{next:function(e){var t=this._s;if(!y(t)){var r=t._o;try{var n=g(r.next);if(n)return n.call(r,e)}catch(e){try{b(t)}finally{throw e}}}},error:function(e){var t=this._s;if(y(t))throw e;var r=t._o;t._o=n;try{var i=g(r.error);if(!i)throw e;e=i.call(r,e)}catch(e){try{v(t)}finally{throw e}}return v(t),e},complete:function(e){var t=this._s;if(!y(t)){var r=t._o;t._o=n;try{var i=g(r.complete);e=i?i.call(r,e):n}catch(e){try{v(t)}finally{throw e}}return v(t),e}}});var w=function(e){d(this,w,"Observable","_f")._f=l(e)};p(w.prototype,{subscribe:function(e){return new S(e,this._f)},forEach:function(e){var t=this;return new(a.Promise||o.Promise)(function(r,n){l(e);var i=t.subscribe({next:function(t){try{return e(t)}catch(e){n(e),i.unsubscribe()}},error:n,complete:r})})}}),p(w,{from:function(e){var t="function"==typeof this?this:w,r=g(u(e)[c]);if(r){var n=u(r.call(e));return n.constructor===t?n:new t(function(e){return n.subscribe(e)})}return new t(function(t){var r=!1;return s(function(){if(!r){try{if(h(e,!1,function(e){if(t.next(e),r)return m})===m)return}catch(e){if(r)throw e;return void t.error(e)}t.complete()}}),function(){r=!0}})},of:function(){for(var e=0,t=arguments.length,r=Array(t);e<t;)r[e]=arguments[e++];return new("function"==typeof this?this:w)(function(e){var t=!1;return s(function(){if(!t){for(var n=0;n<r.length;++n)if(e.next(r[n]),t)return;e.complete()}}),function(){t=!0}})}}),f(w.prototype,c,function(){return this}),i(i.G,{Observable:w}),r(186)("Observable")},function(e,t,r){var n=r(6),i=r(200);n(n.G+n.B,{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,r){for(var n=r(183),i=r(16),o=r(2),a=r(8),s=r(135),c=r(23),l=c("iterator"),u=c("toStringTag"),d=s.Array,p=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],f=0;f<5;f++){var h,m=p[f],g=o[m],v=g&&g.prototype;if(v){v[l]||a(v,l,d),v[u]||a(v,u,m),s[m]=d;for(h in n)v[h]||i(v,h,n[h],!0)}}},function(e,t,r){var n=r(2),i=r(6),o=r(76),a=r(289),s=n.navigator,c=!!s&&/MSIE .\./.test(s.userAgent),l=function(e){return c?function(t,r){return e(o(a,[].slice.call(arguments,2),"function"==typeof t?t:Function(t)),r)}:e};i(i.G+i.B+i.F*c,{setTimeout:l(n.setTimeout),setInterval:l(n.setInterval)})},function(e,t,r){var n=r(290),i=r(76),o=r(19);e.exports=function(){for(var e=o(this),t=arguments.length,r=Array(t),a=0,s=n._,c=!1;t>a;)(r[a]=arguments[a++])===s&&(c=!0);return function(){var n,o=this,a=arguments.length,l=0,u=0;if(!c&&!a)return i(e,r,o);if(n=r.slice(),c)for(;t>l;l++)n[l]===s&&(n[l]=arguments[u++]);for(;a>u;)n.push(arguments[u++]);return i(e,n,o)}}},function(e,t,r){e.exports=r(2)}]),"undefined"!=typeof t&&t.exports?t.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):r.core=e}(1,1)},{}],30:[function(e,t,r){!function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(t){for(var r=[],n=0;n<t.length;n+=3)for(var i=t[n]<<16|t[n+1]<<8|t[n+2],o=0;o<4;o++)8*n+6*o<=8*t.length?r.push(e.charAt(i>>>6*(3-o)&63)):r.push("=");return r.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],n=0,i=0;n<t.length;i=++n%4)0!=i&&r.push((e.indexOf(t.charAt(n-1))&Math.pow(2,-2*i+8)-1)<<2*i|e.indexOf(t.charAt(n))>>>6-2*i);return r}};t.exports=r}()},{}],31:[function(e,t,r){!function(e){"use strict";function n(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e}function i(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);var r=new Date(t.getFullYear(),0,4);r.setDate(r.getDate()-(r.getDay()+6)%7+3);var n=t.getTimezoneOffset()-r.getTimezoneOffset();t.setHours(t.getHours()-n);var i=(t-r)/6048e5;return 1+Math.floor(i)}function o(e){var t=e.getDay();return 0===t&&(t=7),t}function a(e){return null===e?"null":void 0===e?"undefined":"object"!=typeof e?typeof e:Array.isArray(e)?"array":{}.toString.call(e).slice(8,-1).toLowerCase()}var s=function(){var e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|'[^']*'|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,r=/[^-+\dA-Z]/g;return function(c,l,u,d){if(1!==arguments.length||"string"!==a(c)||/\d/.test(c)||(l=c,c=void 0),c=c||new Date,c instanceof Date||(c=new Date(c)),isNaN(c))throw TypeError("Invalid date");l=String(s.masks[l]||l||s.masks.default);var p=l.slice(0,4);"UTC:"!==p&&"GMT:"!==p||(l=l.slice(4),u=!0,"GMT:"===p&&(d=!0));var f=u?"getUTC":"get",h=c[f+"Date"](),m=c[f+"Day"](),g=c[f+"Month"](),v=c[f+"FullYear"](),y=c[f+"Hours"](),b=c[f+"Minutes"](),S=c[f+"Seconds"](),_=c[f+"Milliseconds"](),w=u?0:c.getTimezoneOffset(),E=i(c),T=o(c),O={d:h,dd:n(h),ddd:s.i18n.dayNames[m],dddd:s.i18n.dayNames[m+7],m:g+1,mm:n(g+1),mmm:s.i18n.monthNames[g],mmmm:s.i18n.monthNames[g+12],yy:String(v).slice(2),yyyy:v,h:y%12||12,hh:n(y%12||12),H:y,HH:n(y),M:b,MM:n(b),s:S,ss:n(S),l:n(_,3),L:n(Math.round(_/10)),t:y<12?"a":"p",tt:y<12?"am":"pm",T:y<12?"A":"P",TT:y<12?"AM":"PM",Z:d?"GMT":u?"UTC":(String(c).match(t)||[""]).pop().replace(r,""),o:(w>0?"-":"+")+n(100*Math.floor(Math.abs(w)/60)+Math.abs(w)%60,4),S:["th","st","nd","rd"][h%10>3?0:(h%100-h%10!=10)*h%10],W:E,N:T};return l.replace(e,function(e){return e in O?O[e]:e.slice(1,e.length-1)})}}();s.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},s.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},"function"==typeof define&&define.amd?define(function(){return s}):"object"==typeof r?t.exports=s:e.dateFormat=s}(this)},{}],32:[function(e,t,r){(function(e){!function(n){var i="object"==typeof r&&r,o="object"==typeof t&&t&&t.exports==i&&t,a="object"==typeof e&&e;a.global!==a&&a.window!==a||(n=a);var s=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=/[\x01-\x7F]/g,l=/[\x01-\t\x0B\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,u=/<\u20D2|=\u20E5|>\u20D2|\u205F\u200A|\u219D\u0338|\u2202\u0338|\u2220\u20D2|\u2229\uFE00|\u222A\uFE00|\u223C\u20D2|\u223D\u0331|\u223E\u0333|\u2242\u0338|\u224B\u0338|\u224D\u20D2|\u224E\u0338|\u224F\u0338|\u2250\u0338|\u2261\u20E5|\u2264\u20D2|\u2265\u20D2|\u2266\u0338|\u2267\u0338|\u2268\uFE00|\u2269\uFE00|\u226A\u0338|\u226A\u20D2|\u226B\u0338|\u226B\u20D2|\u227F\u0338|\u2282\u20D2|\u2283\u20D2|\u228A\uFE00|\u228B\uFE00|\u228F\u0338|\u2290\u0338|\u2293\uFE00|\u2294\uFE00|\u22B4\u20D2|\u22B5\u20D2|\u22D8\u0338|\u22D9\u0338|\u22DA\uFE00|\u22DB\uFE00|\u22F5\u0338|\u22F9\u0338|\u2933\u0338|\u29CF\u0338|\u29D0\u0338|\u2A6D\u0338|\u2A70\u0338|\u2A7D\u0338|\u2A7E\u0338|\u2AA1\u0338|\u2AA2\u0338|\u2AAC\uFE00|\u2AAD\uFE00|\u2AAF\u0338|\u2AB0\u0338|\u2AC5\u0338|\u2AC6\u0338|\u2ACB\uFE00|\u2ACC\uFE00|\u2AFD\u20E5|[\xA0-\u0113\u0116-\u0122\u0124-\u012B\u012E-\u014D\u0150-\u017E\u0192\u01B5\u01F5\u0237\u02C6\u02C7\u02D8-\u02DD\u0311\u0391-\u03A1\u03A3-\u03A9\u03B1-\u03C9\u03D1\u03D2\u03D5\u03D6\u03DC\u03DD\u03F0\u03F1\u03F5\u03F6\u0401-\u040C\u040E-\u044F\u0451-\u045C\u045E\u045F\u2002-\u2005\u2007-\u2010\u2013-\u2016\u2018-\u201A\u201C-\u201E\u2020-\u2022\u2025\u2026\u2030-\u2035\u2039\u203A\u203E\u2041\u2043\u2044\u204F\u2057\u205F-\u2063\u20AC\u20DB\u20DC\u2102\u2105\u210A-\u2113\u2115-\u211E\u2122\u2124\u2127-\u2129\u212C\u212D\u212F-\u2131\u2133-\u2138\u2145-\u2148\u2153-\u215E\u2190-\u219B\u219D-\u21A7\u21A9-\u21AE\u21B0-\u21B3\u21B5-\u21B7\u21BA-\u21DB\u21DD\u21E4\u21E5\u21F5\u21FD-\u2205\u2207-\u2209\u220B\u220C\u220F-\u2214\u2216-\u2218\u221A\u221D-\u2238\u223A-\u2257\u2259\u225A\u225C\u225F-\u2262\u2264-\u228B\u228D-\u229B\u229D-\u22A5\u22A7-\u22B0\u22B2-\u22BB\u22BD-\u22DB\u22DE-\u22E3\u22E6-\u22F7\u22F9-\u22FE\u2305\u2306\u2308-\u2310\u2312\u2313\u2315\u2316\u231C-\u231F\u2322\u2323\u232D\u232E\u2336\u233D\u233F\u237C\u23B0\u23B1\u23B4-\u23B6\u23DC-\u23DF\u23E2\u23E7\u2423\u24C8\u2500\u2502\u250C\u2510\u2514\u2518\u251C\u2524\u252C\u2534\u253C\u2550-\u256C\u2580\u2584\u2588\u2591-\u2593\u25A1\u25AA\u25AB\u25AD\u25AE\u25B1\u25B3-\u25B5\u25B8\u25B9\u25BD-\u25BF\u25C2\u25C3\u25CA\u25CB\u25EC\u25EF\u25F8-\u25FC\u2605\u2606\u260E\u2640\u2642\u2660\u2663\u2665\u2666\u266A\u266D-\u266F\u2713\u2717\u2720\u2736\u2758\u2772\u2773\u27C8\u27C9\u27E6-\u27ED\u27F5-\u27FA\u27FC\u27FF\u2902-\u2905\u290C-\u2913\u2916\u2919-\u2920\u2923-\u292A\u2933\u2935-\u2939\u293C\u293D\u2945\u2948-\u294B\u294E-\u2976\u2978\u2979\u297B-\u297F\u2985\u2986\u298B-\u2996\u299A\u299C\u299D\u29A4-\u29B7\u29B9\u29BB\u29BC\u29BE-\u29C5\u29C9\u29CD-\u29D0\u29DC-\u29DE\u29E3-\u29E5\u29EB\u29F4\u29F6\u2A00-\u2A02\u2A04\u2A06\u2A0C\u2A0D\u2A10-\u2A17\u2A22-\u2A27\u2A29\u2A2A\u2A2D-\u2A31\u2A33-\u2A3C\u2A3F\u2A40\u2A42-\u2A4D\u2A50\u2A53-\u2A58\u2A5A-\u2A5D\u2A5F\u2A66\u2A6A\u2A6D-\u2A75\u2A77-\u2A9A\u2A9D-\u2AA2\u2AA4-\u2AB0\u2AB3-\u2AC8\u2ACB\u2ACC\u2ACF-\u2ADB\u2AE4\u2AE6-\u2AE9\u2AEB-\u2AF3\u2AFD\uFB00-\uFB04]|\uD835[\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDD6B]/g,d={"­":"shy","‌":"zwnj","‍":"zwj","‎":"lrm","⁣":"ic","⁢":"it","⁡":"af","‏":"rlm","​":"ZeroWidthSpace","⁠":"NoBreak","̑":"DownBreve","⃛":"tdot","⃜":"DotDot","\t":"Tab","\n":"NewLine"," ":"puncsp"," ":"MediumSpace"," ":"thinsp"," ":"hairsp"," ":"emsp13"," ":"ensp"," ":"emsp14"," ":"emsp"," ":"numsp"," ":"nbsp","  ":"ThickSpace","‾":"oline",_:"lowbar","‐":"dash","–":"ndash","—":"mdash","―":"horbar",",":"comma",";":"semi","⁏":"bsemi",":":"colon","⩴":"Colone","!":"excl","¡":"iexcl","?":"quest","¿":"iquest",".":"period","‥":"nldr","…":"mldr","·":"middot","'":"apos","‘":"lsquo","’":"rsquo","‚":"sbquo","‹":"lsaquo","›":"rsaquo",'"':"quot","“":"ldquo","”":"rdquo","„":"bdquo","«":"laquo","»":"raquo","(":"lpar",")":"rpar","[":"lsqb","]":"rsqb","{":"lcub","}":"rcub","⌈":"lceil","⌉":"rceil","⌊":"lfloor","⌋":"rfloor","⦅":"lopar","⦆":"ropar","⦋":"lbrke","⦌":"rbrke","⦍":"lbrkslu","⦎":"rbrksld","⦏":"lbrksld","⦐":"rbrkslu","⦑":"langd","⦒":"rangd","⦓":"lparlt","⦔":"rpargt","⦕":"gtlPar","⦖":"ltrPar","⟦":"lobrk","⟧":"robrk","⟨":"lang","⟩":"rang","⟪":"Lang","⟫":"Rang","⟬":"loang","⟭":"roang","❲":"lbbrk","❳":"rbbrk","‖":"Vert","§":"sect","¶":"para","@":"commat","*":"ast","/":"sol",undefined:null,"&":"amp","#":"num","%":"percnt","‰":"permil","‱":"pertenk","†":"dagger","‡":"Dagger","•":"bull","⁃":"hybull","′":"prime","″":"Prime","‴":"tprime","⁗":"qprime","‵":"bprime","⁁":"caret","`":"grave","´":"acute","˜":"tilde","^":"Hat","¯":"macr","˘":"breve","˙":"dot","¨":"die","˚":"ring","˝":"dblac","¸":"cedil","˛":"ogon","ˆ":"circ","ˇ":"caron","°":"deg","©":"copy","®":"reg","℗":"copysr","℘":"wp","℞":"rx","℧":"mho","℩":"iiota","←":"larr","↚":"nlarr","→":"rarr","↛":"nrarr","↑":"uarr","↓":"darr","↔":"harr","↮":"nharr","↕":"varr","↖":"nwarr","↗":"nearr","↘":"searr","↙":"swarr","↝":"rarrw","↝̸":"nrarrw","↞":"Larr","↟":"Uarr","↠":"Rarr","↡":"Darr","↢":"larrtl","↣":"rarrtl","↤":"mapstoleft","↥":"mapstoup","↦":"map","↧":"mapstodown","↩":"larrhk","↪":"rarrhk","↫":"larrlp","↬":"rarrlp","↭":"harrw","↰":"lsh","↱":"rsh","↲":"ldsh","↳":"rdsh","↵":"crarr","↶":"cularr","↷":"curarr","↺":"olarr","↻":"orarr","↼":"lharu","↽":"lhard","↾":"uharr","↿":"uharl","⇀":"rharu","⇁":"rhard","⇂":"dharr","⇃":"dharl","⇄":"rlarr","⇅":"udarr","⇆":"lrarr","⇇":"llarr","⇈":"uuarr","⇉":"rrarr","⇊":"ddarr","⇋":"lrhar","⇌":"rlhar","⇐":"lArr","⇍":"nlArr","⇑":"uArr","⇒":"rArr","⇏":"nrArr","⇓":"dArr","⇔":"iff","⇎":"nhArr","⇕":"vArr","⇖":"nwArr","⇗":"neArr","⇘":"seArr","⇙":"swArr","⇚":"lAarr","⇛":"rAarr","⇝":"zigrarr","⇤":"larrb","⇥":"rarrb","⇵":"duarr","⇽":"loarr","⇾":"roarr","⇿":"hoarr","∀":"forall","∁":"comp","∂":"part","∂̸":"npart","∃":"exist","∄":"nexist","∅":"empty","∇":"Del","∈":"in","∉":"notin","∋":"ni","∌":"notni","϶":"bepsi","∏":"prod","∐":"coprod","∑":"sum","+":"plus","±":"pm","÷":"div","×":"times","<":"lt","≮":"nlt","<⃒":"nvlt","=":"equals","≠":"ne","=⃥":"bne","⩵":"Equal",">":"gt","≯":"ngt",">⃒":"nvgt","¬":"not","|":"vert","¦":"brvbar","−":"minus","∓":"mp","∔":"plusdo","⁄":"frasl","∖":"setmn","∗":"lowast","∘":"compfn","√":"Sqrt","∝":"prop","∞":"infin","∟":"angrt","∠":"ang","∠⃒":"nang","∡":"angmsd","∢":"angsph","∣":"mid","∤":"nmid","∥":"par","∦":"npar","∧":"and","∨":"or","∩":"cap","∩︀":"caps","∪":"cup","∪︀":"cups","∫":"int","∬":"Int","∭":"tint","⨌":"qint","∮":"oint","∯":"Conint","∰":"Cconint","∱":"cwint","∲":"cwconint","∳":"awconint","∴":"there4","∵":"becaus","∶":"ratio","∷":"Colon","∸":"minusd","∺":"mDDot","∻":"homtht","∼":"sim","≁":"nsim","∼⃒":"nvsim","∽":"bsim","∽̱":"race","∾":"ac","∾̳":"acE","∿":"acd","≀":"wr","≂":"esim","≂̸":"nesim","≃":"sime","≄":"nsime","≅":"cong","≇":"ncong","≆":"simne","≈":"ap","≉":"nap","≊":"ape","≋":"apid","≋̸":"napid","≌":"bcong","≍":"CupCap","≭":"NotCupCap","≍⃒":"nvap","≎":"bump","≎̸":"nbump","≏":"bumpe","≏̸":"nbumpe","≐":"doteq","≐̸":"nedot","≑":"eDot","≒":"efDot","≓":"erDot","≔":"colone","≕":"ecolon","≖":"ecir","≗":"cire","≙":"wedgeq","≚":"veeeq","≜":"trie","≟":"equest","≡":"equiv","≢":"nequiv","≡⃥":"bnequiv","≤":"le","≰":"nle","≤⃒":"nvle","≥":"ge","≱":"nge","≥⃒":"nvge","≦":"lE","≦̸":"nlE","≧":"gE","≧̸":"ngE","≨︀":"lvnE","≨":"lnE","≩":"gnE","≩︀":"gvnE","≪":"ll","≪̸":"nLtv","≪⃒":"nLt","≫":"gg","≫̸":"nGtv","≫⃒":"nGt","≬":"twixt","≲":"lsim","≴":"nlsim","≳":"gsim","≵":"ngsim","≶":"lg","≸":"ntlg","≷":"gl","≹":"ntgl","≺":"pr","⊀":"npr","≻":"sc","⊁":"nsc","≼":"prcue","⋠":"nprcue","≽":"sccue","⋡":"nsccue","≾":"prsim","≿":"scsim","≿̸":"NotSucceedsTilde","⊂":"sub","⊄":"nsub","⊂⃒":"vnsub","⊃":"sup","⊅":"nsup","⊃⃒":"vnsup","⊆":"sube","⊈":"nsube","⊇":"supe","⊉":"nsupe","⊊︀":"vsubne","⊊":"subne","⊋︀":"vsupne","⊋":"supne","⊍":"cupdot","⊎":"uplus","⊏":"sqsub","⊏̸":"NotSquareSubset","⊐":"sqsup","⊐̸":"NotSquareSuperset","⊑":"sqsube","⋢":"nsqsube","⊒":"sqsupe","⋣":"nsqsupe","⊓":"sqcap","⊓︀":"sqcaps","⊔":"sqcup","⊔︀":"sqcups","⊕":"oplus","⊖":"ominus","⊗":"otimes","⊘":"osol","⊙":"odot","⊚":"ocir","⊛":"oast","⊝":"odash","⊞":"plusb","⊟":"minusb","⊠":"timesb","⊡":"sdotb","⊢":"vdash","⊬":"nvdash","⊣":"dashv","⊤":"top","⊥":"bot","⊧":"models","⊨":"vDash","⊭":"nvDash","⊩":"Vdash",
"⊮":"nVdash","⊪":"Vvdash","⊫":"VDash","⊯":"nVDash","⊰":"prurel","⊲":"vltri","⋪":"nltri","⊳":"vrtri","⋫":"nrtri","⊴":"ltrie","⋬":"nltrie","⊴⃒":"nvltrie","⊵":"rtrie","⋭":"nrtrie","⊵⃒":"nvrtrie","⊶":"origof","⊷":"imof","⊸":"mumap","⊹":"hercon","⊺":"intcal","⊻":"veebar","⊽":"barvee","⊾":"angrtvb","⊿":"lrtri","⋀":"Wedge","⋁":"Vee","⋂":"xcap","⋃":"xcup","⋄":"diam","⋅":"sdot","⋆":"Star","⋇":"divonx","⋈":"bowtie","⋉":"ltimes","⋊":"rtimes","⋋":"lthree","⋌":"rthree","⋍":"bsime","⋎":"cuvee","⋏":"cuwed","⋐":"Sub","⋑":"Sup","⋒":"Cap","⋓":"Cup","⋔":"fork","⋕":"epar","⋖":"ltdot","⋗":"gtdot","⋘":"Ll","⋘̸":"nLl","⋙":"Gg","⋙̸":"nGg","⋚︀":"lesg","⋚":"leg","⋛":"gel","⋛︀":"gesl","⋞":"cuepr","⋟":"cuesc","⋦":"lnsim","⋧":"gnsim","⋨":"prnsim","⋩":"scnsim","⋮":"vellip","⋯":"ctdot","⋰":"utdot","⋱":"dtdot","⋲":"disin","⋳":"isinsv","⋴":"isins","⋵":"isindot","⋵̸":"notindot","⋶":"notinvc","⋷":"notinvb","⋹":"isinE","⋹̸":"notinE","⋺":"nisd","⋻":"xnis","⋼":"nis","⋽":"notnivc","⋾":"notnivb","⌅":"barwed","⌆":"Barwed","⌌":"drcrop","⌍":"dlcrop","⌎":"urcrop","⌏":"ulcrop","⌐":"bnot","⌒":"profline","⌓":"profsurf","⌕":"telrec","⌖":"target","⌜":"ulcorn","⌝":"urcorn","⌞":"dlcorn","⌟":"drcorn","⌢":"frown","⌣":"smile","⌭":"cylcty","⌮":"profalar","⌶":"topbot","⌽":"ovbar","⌿":"solbar","⍼":"angzarr","⎰":"lmoust","⎱":"rmoust","⎴":"tbrk","⎵":"bbrk","⎶":"bbrktbrk","⏜":"OverParenthesis","⏝":"UnderParenthesis","⏞":"OverBrace","⏟":"UnderBrace","⏢":"trpezium","⏧":"elinters","␣":"blank","─":"boxh","│":"boxv","┌":"boxdr","┐":"boxdl","└":"boxur","┘":"boxul","├":"boxvr","┤":"boxvl","┬":"boxhd","┴":"boxhu","┼":"boxvh","═":"boxH","║":"boxV","╒":"boxdR","╓":"boxDr","╔":"boxDR","╕":"boxdL","╖":"boxDl","╗":"boxDL","╘":"boxuR","╙":"boxUr","╚":"boxUR","╛":"boxuL","╜":"boxUl","╝":"boxUL","╞":"boxvR","╟":"boxVr","╠":"boxVR","╡":"boxvL","╢":"boxVl","╣":"boxVL","╤":"boxHd","╥":"boxhD","╦":"boxHD","╧":"boxHu","╨":"boxhU","╩":"boxHU","╪":"boxvH","╫":"boxVh","╬":"boxVH","▀":"uhblk","▄":"lhblk","█":"block","░":"blk14","▒":"blk12","▓":"blk34","□":"squ","▪":"squf","▫":"EmptyVerySmallSquare","▭":"rect","▮":"marker","▱":"fltns","△":"xutri","▴":"utrif","▵":"utri","▸":"rtrif","▹":"rtri","▽":"xdtri","▾":"dtrif","▿":"dtri","◂":"ltrif","◃":"ltri","◊":"loz","○":"cir","◬":"tridot","◯":"xcirc","◸":"ultri","◹":"urtri","◺":"lltri","◻":"EmptySmallSquare","◼":"FilledSmallSquare","★":"starf","☆":"star","☎":"phone","♀":"female","♂":"male","♠":"spades","♣":"clubs","♥":"hearts","♦":"diams","♪":"sung","✓":"check","✗":"cross","✠":"malt","✶":"sext","❘":"VerticalSeparator","⟈":"bsolhsub","⟉":"suphsol","⟵":"xlarr","⟶":"xrarr","⟷":"xharr","⟸":"xlArr","⟹":"xrArr","⟺":"xhArr","⟼":"xmap","⟿":"dzigrarr","⤂":"nvlArr","⤃":"nvrArr","⤄":"nvHarr","⤅":"Map","⤌":"lbarr","⤍":"rbarr","⤎":"lBarr","⤏":"rBarr","⤐":"RBarr","⤑":"DDotrahd","⤒":"UpArrowBar","⤓":"DownArrowBar","⤖":"Rarrtl","⤙":"latail","⤚":"ratail","⤛":"lAtail","⤜":"rAtail","⤝":"larrfs","⤞":"rarrfs","⤟":"larrbfs","⤠":"rarrbfs","⤣":"nwarhk","⤤":"nearhk","⤥":"searhk","⤦":"swarhk","⤧":"nwnear","⤨":"toea","⤩":"tosa","⤪":"swnwar","⤳":"rarrc","⤳̸":"nrarrc","⤵":"cudarrr","⤶":"ldca","⤷":"rdca","⤸":"cudarrl","⤹":"larrpl","⤼":"curarrm","⤽":"cularrp","⥅":"rarrpl","⥈":"harrcir","⥉":"Uarrocir","⥊":"lurdshar","⥋":"ldrushar","⥎":"LeftRightVector","⥏":"RightUpDownVector","⥐":"DownLeftRightVector","⥑":"LeftUpDownVector","⥒":"LeftVectorBar","⥓":"RightVectorBar","⥔":"RightUpVectorBar","⥕":"RightDownVectorBar","⥖":"DownLeftVectorBar","⥗":"DownRightVectorBar","⥘":"LeftUpVectorBar","⥙":"LeftDownVectorBar","⥚":"LeftTeeVector","⥛":"RightTeeVector","⥜":"RightUpTeeVector","⥝":"RightDownTeeVector","⥞":"DownLeftTeeVector","⥟":"DownRightTeeVector","⥠":"LeftUpTeeVector","⥡":"LeftDownTeeVector","⥢":"lHar","⥣":"uHar","⥤":"rHar","⥥":"dHar","⥦":"luruhar","⥧":"ldrdhar","⥨":"ruluhar","⥩":"rdldhar","⥪":"lharul","⥫":"llhard","⥬":"rharul","⥭":"lrhard","⥮":"udhar","⥯":"duhar","⥰":"RoundImplies","⥱":"erarr","⥲":"simrarr","⥳":"larrsim","⥴":"rarrsim","⥵":"rarrap","⥶":"ltlarr","⥸":"gtrarr","⥹":"subrarr","⥻":"suplarr","⥼":"lfisht","⥽":"rfisht","⥾":"ufisht","⥿":"dfisht","⦚":"vzigzag","⦜":"vangrt","⦝":"angrtvbd","⦤":"ange","⦥":"range","⦦":"dwangle","⦧":"uwangle","⦨":"angmsdaa","⦩":"angmsdab","⦪":"angmsdac","⦫":"angmsdad","⦬":"angmsdae","⦭":"angmsdaf","⦮":"angmsdag","⦯":"angmsdah","⦰":"bemptyv","⦱":"demptyv","⦲":"cemptyv","⦳":"raemptyv","⦴":"laemptyv","⦵":"ohbar","⦶":"omid","⦷":"opar","⦹":"operp","⦻":"olcross","⦼":"odsold","⦾":"olcir","⦿":"ofcir","⧀":"olt","⧁":"ogt","⧂":"cirscir","⧃":"cirE","⧄":"solb","⧅":"bsolb","⧉":"boxbox","⧍":"trisb","⧎":"rtriltri","⧏":"LeftTriangleBar","⧏̸":"NotLeftTriangleBar","⧐":"RightTriangleBar","⧐̸":"NotRightTriangleBar","⧜":"iinfin","⧝":"infintie","⧞":"nvinfin","⧣":"eparsl","⧤":"smeparsl","⧥":"eqvparsl","⧫":"lozf","⧴":"RuleDelayed","⧶":"dsol","⨀":"xodot","⨁":"xoplus","⨂":"xotime","⨄":"xuplus","⨆":"xsqcup","⨍":"fpartint","⨐":"cirfnint","⨑":"awint","⨒":"rppolint","⨓":"scpolint","⨔":"npolint","⨕":"pointint","⨖":"quatint","⨗":"intlarhk","⨢":"pluscir","⨣":"plusacir","⨤":"simplus","⨥":"plusdu","⨦":"plussim","⨧":"plustwo","⨩":"mcomma","⨪":"minusdu","⨭":"loplus","⨮":"roplus","⨯":"Cross","⨰":"timesd","⨱":"timesbar","⨳":"smashp","⨴":"lotimes","⨵":"rotimes","⨶":"otimesas","⨷":"Otimes","⨸":"odiv","⨹":"triplus","⨺":"triminus","⨻":"tritime","⨼":"iprod","⨿":"amalg","⩀":"capdot","⩂":"ncup","⩃":"ncap","⩄":"capand","⩅":"cupor","⩆":"cupcap","⩇":"capcup","⩈":"cupbrcap","⩉":"capbrcup","⩊":"cupcup","⩋":"capcap","⩌":"ccups","⩍":"ccaps","⩐":"ccupssm","⩓":"And","⩔":"Or","⩕":"andand","⩖":"oror","⩗":"orslope","⩘":"andslope","⩚":"andv","⩛":"orv","⩜":"andd","⩝":"ord","⩟":"wedbar","⩦":"sdote","⩪":"simdot","⩭":"congdot","⩭̸":"ncongdot","⩮":"easter","⩯":"apacir","⩰":"apE","⩰̸":"napE","⩱":"eplus","⩲":"pluse","⩳":"Esim","⩷":"eDDot","⩸":"equivDD","⩹":"ltcir","⩺":"gtcir","⩻":"ltquest","⩼":"gtquest","⩽":"les","⩽̸":"nles","⩾":"ges","⩾̸":"nges","⩿":"lesdot","⪀":"gesdot","⪁":"lesdoto","⪂":"gesdoto","⪃":"lesdotor","⪄":"gesdotol","⪅":"lap","⪆":"gap","⪇":"lne","⪈":"gne","⪉":"lnap","⪊":"gnap","⪋":"lEg","⪌":"gEl","⪍":"lsime","⪎":"gsime","⪏":"lsimg","⪐":"gsiml","⪑":"lgE","⪒":"glE","⪓":"lesges","⪔":"gesles","⪕":"els","⪖":"egs","⪗":"elsdot","⪘":"egsdot","⪙":"el","⪚":"eg","⪝":"siml","⪞":"simg","⪟":"simlE","⪠":"simgE","⪡":"LessLess","⪡̸":"NotNestedLessLess","⪢":"GreaterGreater","⪢̸":"NotNestedGreaterGreater","⪤":"glj","⪥":"gla","⪦":"ltcc","⪧":"gtcc","⪨":"lescc","⪩":"gescc","⪪":"smt","⪫":"lat","⪬":"smte","⪬︀":"smtes","⪭":"late","⪭︀":"lates","⪮":"bumpE","⪯":"pre","⪯̸":"npre","⪰":"sce","⪰̸":"nsce","⪳":"prE","⪴":"scE","⪵":"prnE","⪶":"scnE","⪷":"prap","⪸":"scap","⪹":"prnap","⪺":"scnap","⪻":"Pr","⪼":"Sc","⪽":"subdot","⪾":"supdot","⪿":"subplus","⫀":"supplus","⫁":"submult","⫂":"supmult","⫃":"subedot","⫄":"supedot","⫅":"subE","⫅̸":"nsubE","⫆":"supE","⫆̸":"nsupE","⫇":"subsim","⫈":"supsim","⫋︀":"vsubnE","⫋":"subnE","⫌︀":"vsupnE","⫌":"supnE","⫏":"csub","⫐":"csup","⫑":"csube","⫒":"csupe","⫓":"subsup","⫔":"supsub","⫕":"subsub","⫖":"supsup","⫗":"suphsub","⫘":"supdsub","⫙":"forkv","⫚":"topfork","⫛":"mlcp","⫤":"Dashv","⫦":"Vdashl","⫧":"Barv","⫨":"vBar","⫩":"vBarv","⫫":"Vbar","⫬":"Not","⫭":"bNot","⫮":"rnmid","⫯":"cirmid","⫰":"midcir","⫱":"topcir","⫲":"nhpar","⫳":"parsim","⫽":"parsl","⫽⃥":"nparsl","♭":"flat","♮":"natur","♯":"sharp","¤":"curren","¢":"cent",$:"dollar","£":"pound","¥":"yen","€":"euro","¹":"sup1","½":"half","⅓":"frac13","¼":"frac14","⅕":"frac15","⅙":"frac16","⅛":"frac18","²":"sup2","⅔":"frac23","⅖":"frac25","³":"sup3","¾":"frac34","⅗":"frac35","⅜":"frac38","⅘":"frac45","⅚":"frac56","⅝":"frac58","⅞":"frac78","𝒶":"ascr","𝕒":"aopf","𝔞":"afr","𝔸":"Aopf","𝔄":"Afr","𝒜":"Ascr","ª":"ordf","á":"aacute","Á":"Aacute","à":"agrave","À":"Agrave","ă":"abreve","Ă":"Abreve","â":"acirc","Â":"Acirc","å":"aring","Å":"angst","ä":"auml","Ä":"Auml","ã":"atilde","Ã":"Atilde","ą":"aogon","Ą":"Aogon","ā":"amacr","Ā":"Amacr","æ":"aelig","Æ":"AElig","𝒷":"bscr","𝕓":"bopf","𝔟":"bfr","𝔹":"Bopf","ℬ":"Bscr","𝔅":"Bfr","𝔠":"cfr","𝒸":"cscr","𝕔":"copf","ℭ":"Cfr","𝒞":"Cscr","ℂ":"Copf","ć":"cacute","Ć":"Cacute","ĉ":"ccirc","Ĉ":"Ccirc","č":"ccaron","Č":"Ccaron","ċ":"cdot","Ċ":"Cdot","ç":"ccedil","Ç":"Ccedil","℅":"incare","𝔡":"dfr","ⅆ":"dd","𝕕":"dopf","𝒹":"dscr","𝒟":"Dscr","𝔇":"Dfr","ⅅ":"DD","𝔻":"Dopf","ď":"dcaron","Ď":"Dcaron","đ":"dstrok","Đ":"Dstrok","ð":"eth","Ð":"ETH","ⅇ":"ee","ℯ":"escr","𝔢":"efr","𝕖":"eopf","ℰ":"Escr","𝔈":"Efr","𝔼":"Eopf","é":"eacute","É":"Eacute","è":"egrave","È":"Egrave","ê":"ecirc","Ê":"Ecirc","ě":"ecaron","Ě":"Ecaron","ë":"euml","Ë":"Euml","ė":"edot","Ė":"Edot","ę":"eogon","Ę":"Eogon","ē":"emacr","Ē":"Emacr","𝔣":"ffr","𝕗":"fopf","𝒻":"fscr","𝔉":"Ffr","𝔽":"Fopf","ℱ":"Fscr","ﬀ":"fflig","ﬃ":"ffilig","ﬄ":"ffllig","ﬁ":"filig",fj:"fjlig","ﬂ":"fllig","ƒ":"fnof","ℊ":"gscr","𝕘":"gopf","𝔤":"gfr","𝒢":"Gscr","𝔾":"Gopf","𝔊":"Gfr","ǵ":"gacute","ğ":"gbreve","Ğ":"Gbreve","ĝ":"gcirc","Ĝ":"Gcirc","ġ":"gdot","Ġ":"Gdot","Ģ":"Gcedil","𝔥":"hfr","ℎ":"planckh","𝒽":"hscr","𝕙":"hopf","ℋ":"Hscr","ℌ":"Hfr","ℍ":"Hopf","ĥ":"hcirc","Ĥ":"Hcirc","ℏ":"hbar","ħ":"hstrok","Ħ":"Hstrok","𝕚":"iopf","𝔦":"ifr","𝒾":"iscr","ⅈ":"ii","𝕀":"Iopf","ℐ":"Iscr","ℑ":"Im","í":"iacute","Í":"Iacute","ì":"igrave","Ì":"Igrave","î":"icirc","Î":"Icirc","ï":"iuml","Ï":"Iuml","ĩ":"itilde","Ĩ":"Itilde","İ":"Idot","į":"iogon","Į":"Iogon","ī":"imacr","Ī":"Imacr","ĳ":"ijlig","Ĳ":"IJlig","ı":"imath","𝒿":"jscr","𝕛":"jopf","𝔧":"jfr","𝒥":"Jscr","𝔍":"Jfr","𝕁":"Jopf","ĵ":"jcirc","Ĵ":"Jcirc","ȷ":"jmath","𝕜":"kopf","𝓀":"kscr","𝔨":"kfr","𝒦":"Kscr","𝕂":"Kopf","𝔎":"Kfr","ķ":"kcedil","Ķ":"Kcedil","𝔩":"lfr","𝓁":"lscr","ℓ":"ell","𝕝":"lopf","ℒ":"Lscr","𝔏":"Lfr","𝕃":"Lopf","ĺ":"lacute","Ĺ":"Lacute","ľ":"lcaron","Ľ":"Lcaron","ļ":"lcedil","Ļ":"Lcedil","ł":"lstrok","Ł":"Lstrok","ŀ":"lmidot","Ŀ":"Lmidot","𝔪":"mfr","𝕞":"mopf","𝓂":"mscr","𝔐":"Mfr","𝕄":"Mopf","ℳ":"Mscr","𝔫":"nfr","𝕟":"nopf","𝓃":"nscr","ℕ":"Nopf","𝒩":"Nscr","𝔑":"Nfr","ń":"nacute","Ń":"Nacute","ň":"ncaron","Ň":"Ncaron","ñ":"ntilde","Ñ":"Ntilde","ņ":"ncedil","Ņ":"Ncedil","№":"numero","ŋ":"eng","Ŋ":"ENG","𝕠":"oopf","𝔬":"ofr","ℴ":"oscr","𝒪":"Oscr","𝔒":"Ofr","𝕆":"Oopf","º":"ordm","ó":"oacute","Ó":"Oacute","ò":"ograve","Ò":"Ograve","ô":"ocirc","Ô":"Ocirc","ö":"ouml","Ö":"Ouml","ő":"odblac","Ő":"Odblac","õ":"otilde","Õ":"Otilde","ø":"oslash","Ø":"Oslash","ō":"omacr","Ō":"Omacr","œ":"oelig","Œ":"OElig","𝔭":"pfr","𝓅":"pscr","𝕡":"popf","ℙ":"Popf","𝔓":"Pfr","𝒫":"Pscr","𝕢":"qopf","𝔮":"qfr","𝓆":"qscr","𝒬":"Qscr","𝔔":"Qfr","ℚ":"Qopf","ĸ":"kgreen","𝔯":"rfr","𝕣":"ropf","𝓇":"rscr","ℛ":"Rscr","ℜ":"Re","ℝ":"Ropf","ŕ":"racute","Ŕ":"Racute","ř":"rcaron","Ř":"Rcaron","ŗ":"rcedil","Ŗ":"Rcedil","𝕤":"sopf","𝓈":"sscr","𝔰":"sfr","𝕊":"Sopf","𝔖":"Sfr","𝒮":"Sscr","Ⓢ":"oS","ś":"sacute","Ś":"Sacute","ŝ":"scirc","Ŝ":"Scirc","š":"scaron","Š":"Scaron","ş":"scedil","Ş":"Scedil","ß":"szlig","𝔱":"tfr","𝓉":"tscr","𝕥":"topf","𝒯":"Tscr","𝔗":"Tfr","𝕋":"Topf","ť":"tcaron","Ť":"Tcaron","ţ":"tcedil","Ţ":"Tcedil","™":"trade","ŧ":"tstrok","Ŧ":"Tstrok","𝓊":"uscr","𝕦":"uopf","𝔲":"ufr","𝕌":"Uopf","𝔘":"Ufr","𝒰":"Uscr","ú":"uacute","Ú":"Uacute","ù":"ugrave","Ù":"Ugrave","ŭ":"ubreve","Ŭ":"Ubreve","û":"ucirc","Û":"Ucirc","ů":"uring","Ů":"Uring","ü":"uuml","Ü":"Uuml","ű":"udblac","Ű":"Udblac","ũ":"utilde","Ũ":"Utilde","ų":"uogon","Ų":"Uogon","ū":"umacr","Ū":"Umacr","𝔳":"vfr","𝕧":"vopf","𝓋":"vscr","𝔙":"Vfr","𝕍":"Vopf","𝒱":"Vscr","𝕨":"wopf","𝓌":"wscr","𝔴":"wfr","𝒲":"Wscr","𝕎":"Wopf","𝔚":"Wfr","ŵ":"wcirc","Ŵ":"Wcirc","𝔵":"xfr","𝓍":"xscr","𝕩":"xopf","𝕏":"Xopf","𝔛":"Xfr","𝒳":"Xscr","𝔶":"yfr","𝓎":"yscr","𝕪":"yopf","𝒴":"Yscr","𝔜":"Yfr","𝕐":"Yopf","ý":"yacute","Ý":"Yacute","ŷ":"ycirc","Ŷ":"Ycirc","ÿ":"yuml","Ÿ":"Yuml","𝓏":"zscr","𝔷":"zfr","𝕫":"zopf","ℨ":"Zfr","ℤ":"Zopf","𝒵":"Zscr","ź":"zacute","Ź":"Zacute","ž":"zcaron","Ž":"Zcaron","ż":"zdot","Ż":"Zdot","Ƶ":"imped","þ":"thorn","Þ":"THORN","ŉ":"napos","α":"alpha","Α":"Alpha","β":"beta","Β":"Beta","γ":"gamma","Γ":"Gamma","δ":"delta","Δ":"Delta","ε":"epsi","ϵ":"epsiv","Ε":"Epsilon","ϝ":"gammad","Ϝ":"Gammad","ζ":"zeta","Ζ":"Zeta","η":"eta","Η":"Eta","θ":"theta","ϑ":"thetav","Θ":"Theta","ι":"iota","Ι":"Iota","κ":"kappa","ϰ":"kappav","Κ":"Kappa","λ":"lambda","Λ":"Lambda","μ":"mu","µ":"micro","Μ":"Mu","ν":"nu","Ν":"Nu","ξ":"xi","Ξ":"Xi","ο":"omicron","Ο":"Omicron","π":"pi","ϖ":"piv","Π":"Pi","ρ":"rho","ϱ":"rhov","Ρ":"Rho","σ":"sigma","Σ":"Sigma","ς":"sigmaf","τ":"tau","Τ":"Tau","υ":"upsi","Υ":"Upsilon","ϒ":"Upsi","φ":"phi","ϕ":"phiv","Φ":"Phi","χ":"chi","Χ":"Chi","ψ":"psi","Ψ":"Psi","ω":"omega","Ω":"ohm","а":"acy","А":"Acy","б":"bcy","Б":"Bcy","в":"vcy","В":"Vcy","г":"gcy","Г":"Gcy","ѓ":"gjcy","Ѓ":"GJcy","д":"dcy","Д":"Dcy","ђ":"djcy","Ђ":"DJcy","е":"iecy","Е":"IEcy","ё":"iocy","Ё":"IOcy","є":"jukcy","Є":"Jukcy","ж":"zhcy","Ж":"ZHcy","з":"zcy","З":"Zcy","ѕ":"dscy","Ѕ":"DScy","и":"icy","И":"Icy","і":"iukcy","І":"Iukcy","ї":"yicy","Ї":"YIcy","й":"jcy","Й":"Jcy","ј":"jsercy","Ј":"Jsercy","к":"kcy","К":"Kcy","ќ":"kjcy","Ќ":"KJcy","л":"lcy","Л":"Lcy","љ":"ljcy","Љ":"LJcy","м":"mcy","М":"Mcy","н":"ncy","Н":"Ncy","њ":"njcy","Њ":"NJcy","о":"ocy","О":"Ocy","п":"pcy","П":"Pcy","р":"rcy","Р":"Rcy","с":"scy","С":"Scy","т":"tcy","Т":"Tcy","ћ":"tshcy","Ћ":"TSHcy","у":"ucy","У":"Ucy","ў":"ubrcy","Ў":"Ubrcy","ф":"fcy","Ф":"Fcy","х":"khcy","Х":"KHcy","ц":"tscy","Ц":"TScy","ч":"chcy","Ч":"CHcy","џ":"dzcy","Џ":"DZcy","ш":"shcy","Ш":"SHcy","щ":"shchcy","Щ":"SHCHcy","ъ":"hardcy","Ъ":"HARDcy","ы":"ycy","Ы":"Ycy","ь":"softcy","Ь":"SOFTcy","э":"ecy","Э":"Ecy","ю":"yucy","Ю":"YUcy","я":"yacy","Я":"YAcy","ℵ":"aleph","ℶ":"beth","ℷ":"gimel","ℸ":"daleth"},p=/["&'<>`]/g,f={'"':"&quot;","&":"&amp;","'":"&#x27;","<":"&lt;",">":"&gt;","`":"&#x60;"},h=/&#(?:[xX][^a-fA-F0-9]|[^0-9xX])/,m=/[\0-\x08\x0B\x0E-\x1F\x7F-\x9F\uFDD0-\uFDEF\uFFFE\uFFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDFFE\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,g=/&#([0-9]+)(;?)|&#[xX]([a-fA-F0-9]+)(;?)|&([0-9a-zA-Z]+);|&(Aacute|Agrave|Atilde|Ccedil|Eacute|Egrave|Iacute|Igrave|Ntilde|Oacute|Ograve|Oslash|Otilde|Uacute|Ugrave|Yacute|aacute|agrave|atilde|brvbar|ccedil|curren|divide|eacute|egrave|frac12|frac14|frac34|iacute|igrave|iquest|middot|ntilde|oacute|ograve|oslash|otilde|plusmn|uacute|ugrave|yacute|AElig|Acirc|Aring|Ecirc|Icirc|Ocirc|THORN|Ucirc|acirc|acute|aelig|aring|cedil|ecirc|icirc|iexcl|laquo|micro|ocirc|pound|raquo|szlig|thorn|times|ucirc|Auml|COPY|Euml|Iuml|Ouml|QUOT|Uuml|auml|cent|copy|euml|iuml|macr|nbsp|ordf|ordm|ouml|para|quot|sect|sup1|sup2|sup3|uuml|yuml|AMP|ETH|REG|amp|deg|eth|not|reg|shy|uml|yen|GT|LT|gt|lt)([=a-zA-Z0-9])?/g,v={aacute:"á",Aacute:"Á",abreve:"ă",Abreve:"Ă",ac:"∾",acd:"∿",acE:"∾̳",acirc:"â",Acirc:"Â",acute:"´",acy:"а",Acy:"А",aelig:"æ",AElig:"Æ",af:"⁡",afr:"𝔞",Afr:"𝔄",agrave:"à",Agrave:"À",alefsym:"ℵ",aleph:"ℵ",alpha:"α",Alpha:"Α",amacr:"ā",Amacr:"Ā",amalg:"⨿",amp:"&",AMP:"&",and:"∧",And:"⩓",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",aogon:"ą",Aogon:"Ą",aopf:"𝕒",Aopf:"𝔸",ap:"≈",apacir:"⩯",ape:"≊",apE:"⩰",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",aring:"å",Aring:"Å",ascr:"𝒶",Ascr:"𝒜",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",atilde:"ã",Atilde:"Ã",auml:"ä",Auml:"Ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",barwed:"⌅",Barwed:"⌆",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",bcy:"б",Bcy:"Б",bdquo:"„",becaus:"∵",because:"∵",Because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",beta:"β",Beta:"Β",beth:"ℶ",between:"≬",bfr:"𝔟",Bfr:"𝔅",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bnot:"⌐",bNot:"⫭",bopf:"𝕓",Bopf:"𝔹",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxdl:"┐",boxdL:"╕",boxDl:"╖",boxDL:"╗",boxdr:"┌",boxdR:"╒",boxDr:"╓",boxDR:"╔",boxh:"─",boxH:"═",boxhd:"┬",boxhD:"╥",boxHd:"╤",boxHD:"╦",boxhu:"┴",boxhU:"╨",boxHu:"╧",boxHU:"╩",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxuL:"╛",boxUl:"╜",boxUL:"╝",boxur:"└",boxuR:"╘",boxUr:"╙",boxUR:"╚",boxv:"│",boxV:"║",boxvh:"┼",boxvH:"╪",boxVh:"╫",boxVH:"╬",boxvl:"┤",boxvL:"╡",boxVl:"╢",boxVL:"╣",boxvr:"├",boxvR:"╞",boxVr:"╟",boxVR:"╠",bprime:"‵",breve:"˘",Breve:"˘",brvbar:"¦",bscr:"𝒷",Bscr:"ℬ",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpe:"≏",bumpE:"⪮",bumpeq:"≏",Bumpeq:"≎",cacute:"ć",Cacute:"Ć",cap:"∩",Cap:"⋒",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",ccaron:"č",Ccaron:"Č",ccedil:"ç",Ccedil:"Ç",ccirc:"ĉ",Ccirc:"Ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",cdot:"ċ",Cdot:"Ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",centerdot:"·",CenterDot:"·",cfr:"𝔠",Cfr:"ℭ",chcy:"ч",CHcy:"Ч",check:"✓",checkmark:"✓",chi:"χ",Chi:"Χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cire:"≗",cirE:"⧃",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",colon:":",Colon:"∷",colone:"≔",Colone:"⩴",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",conint:"∮",Conint:"∯",ContourIntegral:"∮",copf:"𝕔",Copf:"ℂ",coprod:"∐",Coproduct:"∐",copy:"©",COPY:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",cross:"✗",Cross:"⨯",cscr:"𝒸",Cscr:"𝒞",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",cup:"∪",Cup:"⋓",cupbrcap:"⩈",cupcap:"⩆",CupCap:"≍",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",dagger:"†",Dagger:"‡",daleth:"ℸ",darr:"↓",dArr:"⇓",Darr:"↡",dash:"‐",dashv:"⊣",Dashv:"⫤",dbkarow:"⤏",dblac:"˝",dcaron:"ď",Dcaron:"Ď",dcy:"д",Dcy:"Д",dd:"ⅆ",DD:"ⅅ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",delta:"δ",Delta:"Δ",demptyv:"⦱",dfisht:"⥿",dfr:"𝔡",Dfr:"𝔇",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",diamond:"⋄",Diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",djcy:"ђ",DJcy:"Ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",dopf:"𝕕",Dopf:"𝔻",dot:"˙",Dot:"¨",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",downarrow:"↓",Downarrow:"⇓",DownArrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",dscr:"𝒹",Dscr:"𝒟",dscy:"ѕ",DScy:"Ѕ",dsol:"⧶",dstrok:"đ",Dstrok:"Đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",dzcy:"џ",DZcy:"Џ",dzigrarr:"⟿",eacute:"é",Eacute:"É",easter:"⩮",ecaron:"ě",Ecaron:"Ě",ecir:"≖",ecirc:"ê",Ecirc:"Ê",ecolon:"≕",ecy:"э",Ecy:"Э",eDDot:"⩷",edot:"ė",eDot:"≑",Edot:"Ė",ee:"ⅇ",efDot:"≒",efr:"𝔢",Efr:"𝔈",eg:"⪚",egrave:"è",Egrave:"È",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",emacr:"ē",Emacr:"Ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",eng:"ŋ",ENG:"Ŋ",ensp:" ",eogon:"ę",Eogon:"Ę",eopf:"𝕖",Eopf:"𝔼",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",epsilon:"ε",Epsilon:"Ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",escr:"ℯ",Escr:"ℰ",esdot:"≐",esim:"≂",Esim:"⩳",eta:"η",Eta:"Η",eth:"ð",ETH:"Ð",euml:"ë",Euml:"Ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",exponentiale:"ⅇ",ExponentialE:"ⅇ",fallingdotseq:"≒",fcy:"ф",Fcy:"Ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",ffr:"𝔣",Ffr:"𝔉",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",fopf:"𝕗",Fopf:"𝔽",forall:"∀",ForAll:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",fscr:"𝒻",Fscr:"ℱ",gacute:"ǵ",gamma:"γ",Gamma:"Γ",gammad:"ϝ",Gammad:"Ϝ",gap:"⪆",gbreve:"ğ",Gbreve:"Ğ",Gcedil:"Ģ",gcirc:"ĝ",Gcirc:"Ĝ",gcy:"г",Gcy:"Г",gdot:"ġ",Gdot:"Ġ",ge:"≥",gE:"≧",gel:"⋛",gEl:"⪌",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",gfr:"𝔤",Gfr:"𝔊",gg:"≫",Gg:"⋙",ggg:"⋙",gimel:"ℷ",gjcy:"ѓ",GJcy:"Ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gne:"⪈",gnE:"≩",gneq:"⪈",gneqq:"≩",gnsim:"⋧",gopf:"𝕘",Gopf:"𝔾",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",gscr:"ℊ",Gscr:"𝒢",gsim:"≳",gsime:"⪎",gsiml:"⪐",gt:">",Gt:"≫",GT:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",hardcy:"ъ",HARDcy:"Ъ",harr:"↔",hArr:"⇔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",hcirc:"ĥ",Hcirc:"Ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",hfr:"𝔥",Hfr:"ℌ",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",hopf:"𝕙",Hopf:"ℍ",horbar:"―",HorizontalLine:"─",hscr:"𝒽",Hscr:"ℋ",hslash:"ℏ",hstrok:"ħ",Hstrok:"Ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",iacute:"í",Iacute:"Í",ic:"⁣",icirc:"î",Icirc:"Î",icy:"и",Icy:"И",Idot:"İ",iecy:"е",IEcy:"Е",iexcl:"¡",iff:"⇔",ifr:"𝔦",Ifr:"ℑ",igrave:"ì",Igrave:"Ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",ijlig:"ĳ",IJlig:"Ĳ",Im:"ℑ",imacr:"ī",Imacr:"Ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",int:"∫",Int:"∬",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",iocy:"ё",IOcy:"Ё",iogon:"į",Iogon:"Į",iopf:"𝕚",Iopf:"𝕀",iota:"ι",Iota:"Ι",iprod:"⨼",iquest:"¿",iscr:"𝒾",Iscr:"ℐ",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",itilde:"ĩ",Itilde:"Ĩ",iukcy:"і",Iukcy:"І",iuml:"ï",Iuml:"Ï",jcirc:"ĵ",Jcirc:"Ĵ",jcy:"й",Jcy:"Й",jfr:"𝔧",Jfr:"𝔍",jmath:"ȷ",jopf:"𝕛",Jopf:"𝕁",jscr:"𝒿",Jscr:"𝒥",jsercy:"ј",Jsercy:"Ј",jukcy:"є",Jukcy:"Є",kappa:"κ",Kappa:"Κ",kappav:"ϰ",kcedil:"ķ",Kcedil:"Ķ",kcy:"к",Kcy:"К",kfr:"𝔨",Kfr:"𝔎",kgreen:"ĸ",khcy:"х",KHcy:"Х",kjcy:"ќ",KJcy:"Ќ",kopf:"𝕜",Kopf:"𝕂",kscr:"𝓀",Kscr:"𝒦",lAarr:"⇚",lacute:"ĺ",Lacute:"Ĺ",laemptyv:"⦴",lagran:"ℒ",lambda:"λ",Lambda:"Λ",lang:"⟨",Lang:"⟪",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",larr:"←",lArr:"⇐",Larr:"↞",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",latail:"⤙",lAtail:"⤛",late:"⪭",lates:"⪭︀",lbarr:"⤌",lBarr:"⤎",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",lcaron:"ľ",Lcaron:"Ľ",lcedil:"ļ",Lcedil:"Ļ",lceil:"⌈",lcub:"{",lcy:"л",Lcy:"Л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",lE:"≦",LeftAngleBracket:"⟨",leftarrow:"←",Leftarrow:"⇐",LeftArrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",Leftrightarrow:"⇔",LeftRightArrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",leg:"⋚",lEg:"⪋",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",lfr:"𝔩",Lfr:"𝔏",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",ljcy:"љ",LJcy:"Љ",ll:"≪",Ll:"⋘",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",lmidot:"ŀ",Lmidot:"Ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lne:"⪇",lnE:"≨",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",longleftarrow:"⟵",Longleftarrow:"⟸",LongLeftArrow:"⟵",longleftrightarrow:"⟷",Longleftrightarrow:"⟺",LongLeftRightArrow:"⟷",longmapsto:"⟼",longrightarrow:"⟶",Longrightarrow:"⟹",LongRightArrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",lopf:"𝕝",Lopf:"𝕃",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"𝓁",Lscr:"ℒ",lsh:"↰",Lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",lstrok:"ł",Lstrok:"Ł",lt:"<",Lt:"≪",LT:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",map:"↦",Map:"⤅",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",mcy:"м",Mcy:"М",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",mfr:"𝔪",Mfr:"𝔐",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",mopf:"𝕞",Mopf:"𝕄",mp:"∓",mscr:"𝓂",Mscr:"ℳ",mstpos:"∾",mu:"μ",Mu:"Μ",multimap:"⊸",mumap:"⊸",nabla:"∇",nacute:"ń",Nacute:"Ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",ncaron:"ň",Ncaron:"Ň",ncedil:"ņ",Ncedil:"Ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",ncy:"н",Ncy:"Н",ndash:"–",ne:"≠",nearhk:"⤤",nearr:"↗",neArr:"⇗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",nfr:"𝔫",Nfr:"𝔑",nge:"≱",ngE:"≧̸",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",ngt:"≯",nGt:"≫⃒",ngtr:"≯",nGtv:"≫̸",nharr:"↮",nhArr:"⇎",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",njcy:"њ",NJcy:"Њ",nlarr:"↚",nlArr:"⇍",nldr:"‥",nle:"≰",nlE:"≦̸",nleftarrow:"↚",nLeftarrow:"⇍",nleftrightarrow:"↮",nLeftrightarrow:"⇎",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nlt:"≮",nLt:"≪⃒",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",nopf:"𝕟",Nopf:"ℕ",not:"¬",Not:"⫬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrarr:"↛",nrArr:"⇏",nrarrc:"⤳̸",nrarrw:"↝̸",nrightarrow:"↛",nRightarrow:"⇏",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",nscr:"𝓃",Nscr:"𝒩",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsube:"⊈",nsubE:"⫅̸",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupe:"⊉",nsupE:"⫆̸",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",ntilde:"ñ",Ntilde:"Ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",nu:"ν",Nu:"Ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwarr:"↖",nwArr:"⇖",nwarrow:"↖",nwnear:"⤧",oacute:"ó",Oacute:"Ó",oast:"⊛",ocir:"⊚",ocirc:"ô",Ocirc:"Ô",ocy:"о",Ocy:"О",odash:"⊝",odblac:"ő",Odblac:"Ő",odiv:"⨸",odot:"⊙",odsold:"⦼",oelig:"œ",OElig:"Œ",ofcir:"⦿",ofr:"𝔬",Ofr:"𝔒",ogon:"˛",ograve:"ò",Ograve:"Ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",omacr:"ō",Omacr:"Ō",omega:"ω",Omega:"Ω",omicron:"ο",Omicron:"Ο",omid:"⦶",ominus:"⊖",oopf:"𝕠",Oopf:"𝕆",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",or:"∨",Or:"⩔",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",oscr:"ℴ",Oscr:"𝒪",oslash:"ø",Oslash:"Ø",osol:"⊘",otilde:"õ",Otilde:"Õ",otimes:"⊗",Otimes:"⨷",otimesas:"⨶",ouml:"ö",Ouml:"Ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",pcy:"п",Pcy:"П",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",pfr:"𝔭",Pfr:"𝔓",phi:"φ",Phi:"Φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",pi:"π",Pi:"Π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",popf:"𝕡",Popf:"ℙ",pound:"£",pr:"≺",Pr:"⪻",prap:"⪷",prcue:"≼",pre:"⪯",prE:"⪳",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",prime:"′",Prime:"″",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",pscr:"𝓅",Pscr:"𝒫",psi:"ψ",Psi:"Ψ",puncsp:" ",qfr:"𝔮",Qfr:"𝔔",qint:"⨌",qopf:"𝕢",Qopf:"ℚ",qprime:"⁗",qscr:"𝓆",Qscr:"𝒬",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",quot:'"',QUOT:'"',rAarr:"⇛",race:"∽̱",racute:"ŕ",Racute:"Ŕ",
radic:"√",raemptyv:"⦳",rang:"⟩",Rang:"⟫",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",rarr:"→",rArr:"⇒",Rarr:"↠",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",rarrtl:"↣",Rarrtl:"⤖",rarrw:"↝",ratail:"⤚",rAtail:"⤜",ratio:"∶",rationals:"ℚ",rbarr:"⤍",rBarr:"⤏",RBarr:"⤐",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",rcaron:"ř",Rcaron:"Ř",rcedil:"ŗ",Rcedil:"Ŗ",rceil:"⌉",rcub:"}",rcy:"р",Rcy:"Р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",reg:"®",REG:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",rfr:"𝔯",Rfr:"ℜ",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",rho:"ρ",Rho:"Ρ",rhov:"ϱ",RightAngleBracket:"⟩",rightarrow:"→",Rightarrow:"⇒",RightArrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",ropf:"𝕣",Ropf:"ℝ",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",rscr:"𝓇",Rscr:"ℛ",rsh:"↱",Rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",sacute:"ś",Sacute:"Ś",sbquo:"‚",sc:"≻",Sc:"⪼",scap:"⪸",scaron:"š",Scaron:"Š",sccue:"≽",sce:"⪰",scE:"⪴",scedil:"ş",Scedil:"Ş",scirc:"ŝ",Scirc:"Ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",scy:"с",Scy:"С",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",searr:"↘",seArr:"⇘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",sfr:"𝔰",Sfr:"𝔖",sfrown:"⌢",sharp:"♯",shchcy:"щ",SHCHcy:"Щ",shcy:"ш",SHcy:"Ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",sigma:"σ",Sigma:"Σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",softcy:"ь",SOFTcy:"Ь",sol:"/",solb:"⧄",solbar:"⌿",sopf:"𝕤",Sopf:"𝕊",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",square:"□",Square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",sscr:"𝓈",Sscr:"𝒮",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",star:"☆",Star:"⋆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",sub:"⊂",Sub:"⋐",subdot:"⪽",sube:"⊆",subE:"⫅",subedot:"⫃",submult:"⫁",subne:"⊊",subnE:"⫋",subplus:"⪿",subrarr:"⥹",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",sum:"∑",Sum:"∑",sung:"♪",sup:"⊃",Sup:"⋑",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supe:"⊇",supE:"⫆",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supne:"⊋",supnE:"⫌",supplus:"⫀",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swarr:"↙",swArr:"⇙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",tau:"τ",Tau:"Τ",tbrk:"⎴",tcaron:"ť",Tcaron:"Ť",tcedil:"ţ",Tcedil:"Ţ",tcy:"т",Tcy:"Т",tdot:"⃛",telrec:"⌕",tfr:"𝔱",Tfr:"𝔗",there4:"∴",therefore:"∴",Therefore:"∴",theta:"θ",Theta:"Θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",thorn:"þ",THORN:"Þ",tilde:"˜",Tilde:"∼",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",topf:"𝕥",Topf:"𝕋",topfork:"⫚",tosa:"⤩",tprime:"‴",trade:"™",TRADE:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",tscr:"𝓉",Tscr:"𝒯",tscy:"ц",TScy:"Ц",tshcy:"ћ",TSHcy:"Ћ",tstrok:"ŧ",Tstrok:"Ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",uacute:"ú",Uacute:"Ú",uarr:"↑",uArr:"⇑",Uarr:"↟",Uarrocir:"⥉",ubrcy:"ў",Ubrcy:"Ў",ubreve:"ŭ",Ubreve:"Ŭ",ucirc:"û",Ucirc:"Û",ucy:"у",Ucy:"У",udarr:"⇅",udblac:"ű",Udblac:"Ű",udhar:"⥮",ufisht:"⥾",ufr:"𝔲",Ufr:"𝔘",ugrave:"ù",Ugrave:"Ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",umacr:"ū",Umacr:"Ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",uogon:"ų",Uogon:"Ų",uopf:"𝕦",Uopf:"𝕌",uparrow:"↑",Uparrow:"⇑",UpArrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",updownarrow:"↕",Updownarrow:"⇕",UpDownArrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",upsi:"υ",Upsi:"ϒ",upsih:"ϒ",upsilon:"υ",Upsilon:"Υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",uring:"ů",Uring:"Ů",urtri:"◹",uscr:"𝓊",Uscr:"𝒰",utdot:"⋰",utilde:"ũ",Utilde:"Ũ",utri:"▵",utrif:"▴",uuarr:"⇈",uuml:"ü",Uuml:"Ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",varr:"↕",vArr:"⇕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",vBar:"⫨",Vbar:"⫫",vBarv:"⫩",vcy:"в",Vcy:"В",vdash:"⊢",vDash:"⊨",Vdash:"⊩",VDash:"⊫",Vdashl:"⫦",vee:"∨",Vee:"⋁",veebar:"⊻",veeeq:"≚",vellip:"⋮",verbar:"|",Verbar:"‖",vert:"|",Vert:"‖",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",vfr:"𝔳",Vfr:"𝔙",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",vopf:"𝕧",Vopf:"𝕍",vprop:"∝",vrtri:"⊳",vscr:"𝓋",Vscr:"𝒱",vsubne:"⊊︀",vsubnE:"⫋︀",vsupne:"⊋︀",vsupnE:"⫌︀",Vvdash:"⊪",vzigzag:"⦚",wcirc:"ŵ",Wcirc:"Ŵ",wedbar:"⩟",wedge:"∧",Wedge:"⋀",wedgeq:"≙",weierp:"℘",wfr:"𝔴",Wfr:"𝔚",wopf:"𝕨",Wopf:"𝕎",wp:"℘",wr:"≀",wreath:"≀",wscr:"𝓌",Wscr:"𝒲",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",xfr:"𝔵",Xfr:"𝔛",xharr:"⟷",xhArr:"⟺",xi:"ξ",Xi:"Ξ",xlarr:"⟵",xlArr:"⟸",xmap:"⟼",xnis:"⋻",xodot:"⨀",xopf:"𝕩",Xopf:"𝕏",xoplus:"⨁",xotime:"⨂",xrarr:"⟶",xrArr:"⟹",xscr:"𝓍",Xscr:"𝒳",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",yacute:"ý",Yacute:"Ý",yacy:"я",YAcy:"Я",ycirc:"ŷ",Ycirc:"Ŷ",ycy:"ы",Ycy:"Ы",yen:"¥",yfr:"𝔶",Yfr:"𝔜",yicy:"ї",YIcy:"Ї",yopf:"𝕪",Yopf:"𝕐",yscr:"𝓎",Yscr:"𝒴",yucy:"ю",YUcy:"Ю",yuml:"ÿ",Yuml:"Ÿ",zacute:"ź",Zacute:"Ź",zcaron:"ž",Zcaron:"Ž",zcy:"з",Zcy:"З",zdot:"ż",Zdot:"Ż",zeetrf:"ℨ",ZeroWidthSpace:"​",zeta:"ζ",Zeta:"Ζ",zfr:"𝔷",Zfr:"ℨ",zhcy:"ж",ZHcy:"Ж",zigrarr:"⇝",zopf:"𝕫",Zopf:"ℤ",zscr:"𝓏",Zscr:"𝒵",zwj:"‍",zwnj:"‌"},y={aacute:"á",Aacute:"Á",acirc:"â",Acirc:"Â",acute:"´",aelig:"æ",AElig:"Æ",agrave:"à",Agrave:"À",amp:"&",AMP:"&",aring:"å",Aring:"Å",atilde:"ã",Atilde:"Ã",auml:"ä",Auml:"Ä",brvbar:"¦",ccedil:"ç",Ccedil:"Ç",cedil:"¸",cent:"¢",copy:"©",COPY:"©",curren:"¤",deg:"°",divide:"÷",eacute:"é",Eacute:"É",ecirc:"ê",Ecirc:"Ê",egrave:"è",Egrave:"È",eth:"ð",ETH:"Ð",euml:"ë",Euml:"Ë",frac12:"½",frac14:"¼",frac34:"¾",gt:">",GT:">",iacute:"í",Iacute:"Í",icirc:"î",Icirc:"Î",iexcl:"¡",igrave:"ì",Igrave:"Ì",iquest:"¿",iuml:"ï",Iuml:"Ï",laquo:"«",lt:"<",LT:"<",macr:"¯",micro:"µ",middot:"·",nbsp:" ",not:"¬",ntilde:"ñ",Ntilde:"Ñ",oacute:"ó",Oacute:"Ó",ocirc:"ô",Ocirc:"Ô",ograve:"ò",Ograve:"Ò",ordf:"ª",ordm:"º",oslash:"ø",Oslash:"Ø",otilde:"õ",Otilde:"Õ",ouml:"ö",Ouml:"Ö",para:"¶",plusmn:"±",pound:"£",quot:'"',QUOT:'"',raquo:"»",reg:"®",REG:"®",sect:"§",shy:"­",sup1:"¹",sup2:"²",sup3:"³",szlig:"ß",thorn:"þ",THORN:"Þ",times:"×",uacute:"ú",Uacute:"Ú",ucirc:"û",Ucirc:"Û",ugrave:"ù",Ugrave:"Ù",uml:"¨",uuml:"ü",Uuml:"Ü",yacute:"ý",Yacute:"Ý",yen:"¥",yuml:"ÿ"},b={0:"�",128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},S=[1,2,3,4,5,6,7,8,11,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,64976,64977,64978,64979,64980,64981,64982,64983,64984,64985,64986,64987,64988,64989,64990,64991,64992,64993,64994,64995,64996,64997,64998,64999,65e3,65001,65002,65003,65004,65005,65006,65007,65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111],_=String.fromCharCode,w={},E=w.hasOwnProperty,T=function(e,t){return E.call(e,t)},O=function(e,t){for(var r=-1,n=e.length;++r<n;)if(e[r]==t)return!0;return!1},I=function(e,t){if(!e)return t;var r,n={};for(r in t)n[r]=T(e,r)?e[r]:t[r];return n},P=function(e,t){var r="";return e>=55296&&e<=57343||e>1114111?(t&&A("character reference outside the permissible Unicode range"),"�"):T(b,e)?(t&&A("disallowed character reference"),b[e]):(t&&O(S,e)&&A("disallowed character reference"),e>65535&&(e-=65536,r+=_(e>>>10&1023|55296),e=56320|1023&e),r+=_(e))},R=function(e){return"&#x"+e.toString(16).toUpperCase()+";"},C=function(e){return"&#"+e+";"},A=function(e){throw Error("Parse error: "+e)},j=function(e,t){t=I(t,j.options);var r=t.strict;r&&m.test(e)&&A("forbidden code point");var n=t.encodeEverything,i=t.useNamedReferences,o=t.allowUnsafeSymbols,a=t.decimal?C:R,f=function(e){return a(e.charCodeAt(0))};return n?(e=e.replace(c,function(e){return i&&T(d,e)?"&"+d[e]+";":f(e)}),i&&(e=e.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;").replace(/&#x66;&#x6A;/g,"&fjlig;")),i&&(e=e.replace(u,function(e){return"&"+d[e]+";"}))):i?(o||(e=e.replace(p,function(e){return"&"+d[e]+";"})),e=e.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;"),e=e.replace(u,function(e){return"&"+d[e]+";"})):o||(e=e.replace(p,f)),e.replace(s,function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1),n=1024*(t-55296)+r-56320+65536;return a(n)}).replace(l,f)};j.options={allowUnsafeSymbols:!1,encodeEverything:!1,strict:!1,useNamedReferences:!1,decimal:!1};var k=function(e,t){t=I(t,k.options);var r=t.strict;return r&&h.test(e)&&A("malformed character reference"),e.replace(g,function(e,n,i,o,a,s,c,l){var u,d,p,f,h,m;return n?(p=n,d=i,r&&!d&&A("character reference was not terminated by a semicolon"),u=parseInt(p,10),P(u,r)):o?(f=o,d=a,r&&!d&&A("character reference was not terminated by a semicolon"),u=parseInt(f,16),P(u,r)):s?(h=s,T(v,h)?v[h]:(r&&A("named character reference was not terminated by a semicolon"),e)):(h=c,m=l,m&&t.isAttributeValue?(r&&"="==m&&A("`&` did not start a character reference"),e):(r&&A("named character reference was not terminated by a semicolon"),y[h]+(m||"")))})};k.options={isAttributeValue:!1,strict:!1};var D=function(e){return e.replace(p,function(e){return f[e]})},$={version:"1.1.0",encode:j,decode:k,escape:D,unescape:k};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return $});else if(i&&!i.nodeType)if(o)o.exports=$;else for(var M in $)T($,M)&&(i[M]=$[M]);else n.he=$}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],33:[function(e,t,r){"use strict";t.exports=e("./js")},{"./js":36}],34:[function(e,t,r){!function(e){"use strict";function t(t,r,n){"addEventListener"in e?t.addEventListener(r,n,!1):"attachEvent"in e&&t.attachEvent("on"+r,n)}function r(t,r,n){"removeEventListener"in e?t.removeEventListener(r,n,!1):"detachEvent"in e&&t.detachEvent("on"+r,n)}function n(e){return e.charAt(0).toUpperCase()+e.slice(1)}function i(e){var t,r,n,i=null,o=0,a=function(){o=je(),i=null,n=e.apply(t,r),i||(t=r=null)};return function(){var s=je();o||(o=s);var c=Ee-(s-o);return t=this,r=arguments,c<=0||c>Ee?(i&&(clearTimeout(i),i=null),o=s,n=e.apply(t,r),i||(t=r=null)):i||(i=setTimeout(a,c)),n}}function o(e){return pe+"["+he+"] "+e}function a(t){de&&"object"==typeof e.console&&console.log(o(t))}function s(t){"object"==typeof e.console&&console.warn(o(t))}function c(){l(),a("Initialising iFrame ("+location.href+")"),u(),f(),p("background",W),p("padding",J),I(),y(),b(),h(),R(),S(),ce=P(),U("init","Init message from host page"),Ce()}function l(){function e(e){return"true"===e}var t=se.substr(fe).split(":");he=t[0],Q=void 0!==t[1]?Number(t[1]):Q,Z=void 0!==t[2]?e(t[2]):Z,de=void 0!==t[3]?e(t[3]):de,le=void 0!==t[4]?Number(t[4]):le,z=void 0!==t[6]?e(t[6]):z,K=t[7],oe=void 0!==t[8]?t[8]:oe,W=t[9],J=t[10],Se=void 0!==t[11]?Number(t[11]):Se,ce.enable=void 0!==t[12]&&e(t[12]),ge=void 0!==t[13]?t[13]:ge,Ie=void 0!==t[14]?t[14]:Ie}function u(){function t(){var t=e.iFrameResizer;a("Reading data from page: "+JSON.stringify(t)),Re="messageCallback"in t?t.messageCallback:Re,Ce="readyCallback"in t?t.readyCallback:Ce,be="targetOrigin"in t?t.targetOrigin:be,oe="heightCalculationMethod"in t?t.heightCalculationMethod:oe,Ie="widthCalculationMethod"in t?t.widthCalculationMethod:Ie}"iFrameResizer"in e&&Object===e.iFrameResizer.constructor&&t(),a("TargetOrigin for parent set to: "+be)}function d(e,t){return-1!==t.indexOf("-")&&(s("Negative CSS value ignored for "+e),t=""),t}function p(e,t){void 0!==t&&""!==t&&"null"!==t&&(document.body.style[e]=t,a("Body "+e+' set to "'+t+'"'))}function f(){void 0===K&&(K=Q+"px"),p("margin",d("margin",K))}function h(){document.documentElement.style.height="",document.body.style.height="",a('HTML & body height set to "auto"')}function m(i){function o(){U(i.eventName,i.eventType)}var s={add:function(r){t(e,r,o)},remove:function(t){r(e,t,o)}};i.eventNames&&Array.prototype.map?(i.eventName=i.eventNames[0],i.eventNames.map(s[i.method])):s[i.method](i.eventName),a(n(i.method)+" event listener: "+i.eventType)}function g(e){m({method:e,eventType:"Animation Start",eventNames:["animationstart","webkitAnimationStart"]}),m({method:e,eventType:"Animation Iteration",eventNames:["animationiteration","webkitAnimationIteration"]}),m({method:e,eventType:"Animation End",eventNames:["animationend","webkitAnimationEnd"]}),m({method:e,eventType:"Input",eventName:"input"}),m({method:e,eventType:"Mouse Up",eventName:"mouseup"}),m({method:e,eventType:"Mouse Down",eventName:"mousedown"}),m({method:e,eventType:"Orientation Change",eventName:"orientationchange"}),m({method:e,eventType:"Touch Start",eventName:"touchstart"}),m({method:e,eventType:"Touch End",eventName:"touchend"}),m({method:e,eventType:"Touch Cancel",eventName:"touchcancel"}),m({method:e,eventType:"Print",eventName:["afterprint","beforeprint"]}),m({method:e,eventType:"Transition Start",eventNames:["transitionstart","webkitTransitionStart","MSTransitionStart","oTransitionStart","otransitionstart"]}),m({method:e,eventType:"Transition Iteration",eventNames:["transitioniteration","webkitTransitionIteration","MSTransitionIteration","oTransitionIteration","otransitioniteration"]}),m({method:e,eventType:"Transition End",eventNames:["transitionend","webkitTransitionEnd","MSTransitionEnd","oTransitionEnd","otransitionend"]}),"child"===ge&&m({method:e,eventType:"IFrame Resized",eventName:"resize"})}function v(e,t,r,n){return t!==e&&(e in r||(s(e+" is not a valid option for "+n+"CalculationMethod."),e=t),a(n+' calculation method set to "'+e+'"')),e}function y(){oe=v(oe,ie,ke,"height")}function b(){Ie=v(Ie,Oe,De,"width")}function S(){!0===z?(g("add"),j()):a("Auto Resize disabled")}function _(){a("Disable outgoing messages"),ve=!1}function w(){a("Remove event listener: Message"),r(e,"message",V)}function E(){null!==X&&X.disconnect()}function T(){g("remove"),E(),clearInterval(ue)}function O(){_(),w(),!0===z&&T()}function I(){var e=document.createElement("div");e.style.clear="both",e.style.display="block",document.body.appendChild(e)}function P(){function r(){return{x:void 0!==e.pageXOffset?e.pageXOffset:document.documentElement.scrollLeft,y:void 0!==e.pageYOffset?e.pageYOffset:document.documentElement.scrollTop}}function n(e){var t=e.getBoundingClientRect(),n=r();return{x:parseInt(t.left,10)+parseInt(n.x,10),y:parseInt(t.top,10)+parseInt(n.y,10)}}function i(e){function t(e){var t=n(e);a("Moving to in page link (#"+r+") at x: "+t.x+" y: "+t.y),H(t.y,t.x,"scrollToOffset")}var r=e.split("#")[1]||e,i=decodeURIComponent(r),o=document.getElementById(i)||document.getElementsByName(i)[0];void 0!==o?t(o):(a("In page link (#"+r+") not found in iFrame, so sending to parent"),H(0,0,"inPageLink","#"+r))}function o(){""!==location.hash&&"#"!==location.hash&&i(location.href)}function c(){function e(e){function r(e){e.preventDefault(),i(this.getAttribute("href"))}"#"!==e.getAttribute("href")&&t(e,"click",r)}Array.prototype.forEach.call(document.querySelectorAll('a[href^="#"]'),e)}function l(){t(e,"hashchange",o)}function u(){setTimeout(o,te)}function d(){Array.prototype.forEach&&document.querySelectorAll?(a("Setting up location.hash handlers"),c(),l(),u()):s("In page linking not fully supported in this browser! (See README.md for IE8 workaround)")}return ce.enable?d():a("In page linking not enabled"),{findTarget:i}}function R(){a("Enable public methods"),Pe.parentIFrame={autoResize:function(e){return!0===e&&!1===z?(z=!0,S()):!1===e&&!0===z&&(z=!1,T()),z},close:function(){H(0,0,"close"),O()},getId:function(){return he},getPageInfo:function(e){"function"==typeof e?(Ae=e,H(0,0,"pageInfo")):(Ae=e,H(0,0,"pageInfoStop"))},moveToAnchor:function(e){ce.findTarget(e)},reset:function(){q("parentIFrame.reset")},scrollTo:function(e,t){H(t,e,"scrollTo")},scrollToOffset:function(e,t){H(t,e,"scrollToOffset")},sendMessage:function(e,t){H(0,0,"message",JSON.stringify(e),t)},setHeightCalculationMethod:function(e){oe=e,y()},setWidthCalculationMethod:function(e){Ie=e,b()},setTargetOrigin:function(e){a("Set targetOrigin: "+e),be=e},size:function(e,t){var r=""+(e?e:"")+(t?","+t:"");U("size","parentIFrame.size("+r+")",e,t)}}}function C(){0!==le&&(a("setInterval: "+le+"ms"),ue=setInterval(function(){U("interval","setInterval: "+le)},Math.abs(le)))}function A(){function t(e){function t(e){!1===e.complete&&(a("Attach listeners to "+e.src),e.addEventListener("load",o,!1),e.addEventListener("error",s,!1),u.push(e))}"attributes"===e.type&&"src"===e.attributeName?t(e.target):"childList"===e.type&&Array.prototype.forEach.call(e.target.querySelectorAll("img"),t)}function r(e){u.splice(u.indexOf(e),1)}function n(e){a("Remove listeners from "+e.src),e.removeEventListener("load",o,!1),e.removeEventListener("error",s,!1),r(e)}function i(e,t,r){n(e.target),U(t,r+": "+e.target.src,void 0,void 0)}function o(e){i(e,"imageLoad","Image loaded")}function s(e){i(e,"imageLoadFailed","Image load failed")}function c(e){U("mutationObserver","mutationObserver: "+e[0].target+" "+e[0].type),e.forEach(t)}function l(){var e=document.querySelector("body"),t={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0};return p=new d(c),a("Create body MutationObserver"),p.observe(e,t),p}var u=[],d=e.MutationObserver||e.WebKitMutationObserver,p=l();return{disconnect:function(){"disconnect"in p&&(a("Disconnect body MutationObserver"),p.disconnect(),u.forEach(n))}}}function j(){var t=0>le;e.MutationObserver||e.WebKitMutationObserver?t?C():X=A():(a("MutationObserver not supported in this browser!"),C())}function k(e,t){function r(e){var r=/^\d+(px)?$/i;if(r.test(e))return parseInt(e,G);var n=t.style.left,i=t.runtimeStyle.left;return t.runtimeStyle.left=t.currentStyle.left,t.style.left=e||0,e=t.style.pixelLeft,t.style.left=n,t.runtimeStyle.left=i,e}var n=0;return t=t||document.body,"defaultView"in document&&"getComputedStyle"in document.defaultView?(n=document.defaultView.getComputedStyle(t,null),n=null!==n?n[e]:0):n=r(t.currentStyle[e]),parseInt(n,G)}function D(e){e>Ee/2&&(Ee=2*e,a("Event throttle increased to "+Ee+"ms"))}function $(e,t){for(var r=t.length,i=0,o=0,s=n(e),c=je(),l=0;l<r;l++)i=t[l].getBoundingClientRect()[e]+k("margin"+s,t[l]),i>o&&(o=i);return c=je()-c,a("Parsed "+r+" HTML elements"),a("Element position calculated in "+c+"ms"),D(c),o}function M(e){return[e.bodyOffset(),e.bodyScroll(),e.documentElementOffset(),e.documentElementScroll()]}function x(e,t){function r(){return s("No tagged elements ("+t+") found on page"),ne}var n=document.querySelectorAll("["+t+"]");return 0===n.length?r():$(e,n)}function F(){return document.querySelectorAll("body *")}function L(e,t,r,n){function i(){ne=d,Te=p,H(ne,Te,e)}function o(){function e(e,t){var r=Math.abs(e-t)<=Se;return!r}return d=void 0!==r?r:ke[oe](),p=void 0!==n?n:De[Ie](),e(ne,d)||Z&&e(Te,p)}function s(){return!(e in{init:1,interval:1,size:1})}function c(){return oe in me||Z&&Ie in me}function l(){a("No change in size detected")}function u(){s()&&c()?q(t):e in{interval:1}||l()}var d,p;o()||"init"===e?(B(),i()):u()}function U(e,t,r,n){function i(){e in{reset:1,resetPage:1,init:1}||a("Trigger event: "+t)}function o(){return _e&&e in ee}o()?a("Trigger event cancelled: "+e):(i(),$e(e,t,r,n))}function B(){_e||(_e=!0,a("Trigger event lock on")),clearTimeout(we),we=setTimeout(function(){_e=!1,a("Trigger event lock off"),a("--")},te)}function N(e){ne=ke[oe](),Te=De[Ie](),H(ne,Te,e)}function q(e){var t=oe;oe=ie,a("Reset trigger event: "+e),B(),N("reset"),oe=t}function H(e,t,r,n,i){function o(){void 0===i?i=be:a("Message targetOrigin: "+i)}function s(){var o=e+":"+t,s=he+":"+o+":"+r+(void 0!==n?":"+n:"");a("Sending message to host page ("+s+")"),ye.postMessage(pe+s,i)}!0===ve&&(o(),s())}function V(t){function r(){return pe===(""+t.data).substr(0,fe)}function n(){se=t.data,ye=t.source,c(),re=!1,setTimeout(function(){ae=!1},te)}function i(){ae?a("Page reset ignored by init"):(a("Page size reset by host page"),N("resetPage"))}function o(){U("resizeParent","Parent window requested size check")}function l(){var e=d();ce.findTarget(e)}function u(){return t.data.split("]")[1].split(":")[0]}function d(){return t.data.substr(t.data.indexOf(":")+1)}function p(){return"iFrameResize"in e}function f(){var e=d();a("MessageCallback called from parent: "+e),Re(JSON.parse(e)),a(" --")}function h(){var e=d();a("PageInfoFromParent called from parent: "+e),Ae(JSON.parse(e)),a(" --")}function m(){return t.data.split(":")[2]in{true:1,false:1}}function g(){switch(u()){case"reset":i();break;case"resize":o();break;case"moveToAnchor":l();break;case"message":f();break;case"pageInfo":h();break;default:p()||m()||s("Unexpected message ("+t.data+")")}}function v(){!1===re?g():m()?n():a('Ignored message of type "'+u()+'". Received before initialization.')}r()&&v()}function Y(){"loading"!==document.readyState&&e.parent.postMessage("[iFrameResizerChild]Ready","*")}var z=!0,G=10,W="",Q=0,K="",X=null,J="",Z=!1,ee={resize:1,click:1},te=128,re=!0,ne=1,ie="bodyOffset",oe=ie,ae=!0,se="",ce={},le=32,ue=null,de=!1,pe="[iFrameSizer]",fe=pe.length,he="",me={max:1,min:1,bodyScroll:1,documentElementScroll:1},ge="child",ve=!0,ye=e.parent,be="*",Se=0,_e=!1,we=null,Ee=16,Te=1,Oe="scroll",Ie=Oe,Pe=e,Re=function(){s("MessageCallback function not defined")},Ce=function(){},Ae=function(){},je=Date.now||function(){return(new Date).getTime()},ke={bodyOffset:function(){return document.body.offsetHeight+k("marginTop")+k("marginBottom")},offset:function(){return ke.bodyOffset()},bodyScroll:function(){return document.body.scrollHeight},documentElementOffset:function(){return document.documentElement.offsetHeight},documentElementScroll:function(){return document.documentElement.scrollHeight},max:function(){return Math.max.apply(null,M(ke))},min:function(){return Math.min.apply(null,M(ke))},grow:function(){return ke.max()},lowestElement:function(){return Math.max(ke.bodyOffset(),$("bottom",F()))},taggedElement:function(){return x("bottom","data-iframe-height")}},De={bodyScroll:function(){return document.body.scrollWidth},bodyOffset:function(){return document.body.offsetWidth},documentElementScroll:function(){return document.documentElement.scrollWidth},documentElementOffset:function(){return document.documentElement.offsetWidth},scroll:function(){return Math.max(De.bodyScroll(),De.documentElementScroll())},max:function(){return Math.max.apply(null,M(De))},min:function(){return Math.min.apply(null,M(De))},rightMostElement:function(){return $("right",F())},taggedElement:function(){return x("right","data-iframe-width")}},$e=i(L);t(e,"message",V),Y()}(window||{})},{}],35:[function(e,t,r){!function(e){"use strict";function r(t,r,n){"addEventListener"in e?t.addEventListener(r,n,!1):"attachEvent"in e&&t.attachEvent("on"+r,n)}function n(t,r,n){"removeEventListener"in e?t.removeEventListener(r,n,!1):"detachEvent"in e&&t.detachEvent("on"+r,n)}function i(){var t,r=["moz","webkit","o","ms"];for(t=0;t<r.length&&!B;t+=1)B=e[r[t]+"RequestAnimationFrame"];B||c("setup","RequestAnimationFrame not supported")}function o(t){var r="Host page: "+t;return e.top!==e.self&&(r=e.parentIFrame&&e.parentIFrame.getId?e.parentIFrame.getId()+": "+t:"Nested host page: "+t),r}function a(e){return F+"["+o(e)+"]"}function s(e){return q[e]?q[e].log:D}function c(e,t){d("log",e,t,s(e))}function l(e,t){d("info",e,t,s(e))}function u(e,t){d("warn",e,t,!0)}function d(t,r,n,i){!0===i&&"object"==typeof e.console&&console[t](a(r),n)}function p(t){function i(){function e(){b(G),g(W)}a("Height"),a("Width"),S(e,G,"init")}function o(){var e=z.substr(L).split(":");return{iframe:q[e[0]].iframe,id:e[0],height:e[1],width:e[2],type:e[3]}}function a(e){var t=Number(q[W]["max"+e]),r=Number(q[W]["min"+e]),n=e.toLowerCase(),i=Number(G[n]);c(W,"Checking "+n+" is in range "+r+"-"+t),i<r&&(i=r,c(W,"Set "+n+" to min value")),i>t&&(i=t,c(W,"Set "+n+" to max value")),G[n]=""+i}function s(){function e(){function e(){var e=0,t=!1;for(c(W,"Checking connection is from allowed list of origins: "+n);e<n.length;e++)if(n[e]===r){t=!0;break}return t}function t(){var e=q[W].remoteHost;return c(W,"Checking connection is from: "+e),r===e}return n.constructor===Array?e():t()}var r=t.origin,n=q[W].checkOrigin;if(n&&""+r!="null"&&!e())throw new Error("Unexpected message received from: "+r+" for "+G.iframe.id+". Message was: "+t.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}function d(){return F===(""+z).substr(0,L)&&z.substr(L).split(":")[0]in q}function p(){var e=G.type in{true:1,false:1,undefined:1};return e&&c(W,"Ignoring init message from meta parent page"),e}function E(e){return z.substr(z.indexOf(":")+x+e)}function O(e){c(W,"MessageCallback passed: {iframe: "+G.iframe.id+", message: "+e+"}"),M("messageCallback",{iframe:G.iframe,message:JSON.parse(e)}),c(W,"--")}function I(){var t=document.body.getBoundingClientRect(),r=G.iframe.getBoundingClientRect();return JSON.stringify({clientHeight:Math.max(document.documentElement.clientHeight,e.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,e.innerWidth||0),offsetTop:parseInt(r.top-t.top,10),offsetLeft:parseInt(r.left-t.left,10),scrollTop:e.pageYOffset,scrollLeft:e.pageXOffset})}function P(e,t){function r(){_("Send Page Info","pageInfo:"+I(),e,t)}T(r,32)}function R(){function t(t,r){function n(){q[a]?P(q[a].iframe,a):i()}["scroll","resize"].forEach(function(i){c(a,t+i+" listener for sendPageInfo"),r(e,i,n)})}function i(){t("Remove ",n)}function o(){t("Add ",r)}var a=W;o(),q[a].stopPageInfo=i}function C(){q[W]&&q[W].stopPageInfo&&(q[W].stopPageInfo(),delete q[W].stopPageInfo)}function A(){var e=!0;return null===G.iframe&&(u(W,"IFrame ("+G.id+") not found"),e=!1),e}function j(e){var t=e.getBoundingClientRect();return m(W),{x:Math.floor(Number(t.left)+Number(U.x)),y:Math.floor(Number(t.top)+Number(U.y))}}function k(t){function r(){U=a,D(),c(W,"--")}function n(){return{x:Number(G.width)+o.x,y:Number(G.height)+o.y}}function i(){e.parentIFrame?e.parentIFrame["scrollTo"+(t?"Offset":"")](a.x,a.y):u(W,"Unable to scroll to requested position, window.parentIFrame not found")}var o=t?j(G.iframe):{x:0,y:0},a=n();c(W,"Reposition requested from iFrame (offset x:"+o.x+" y:"+o.y+")"),e.top!==e.self?i():r()}function D(){!1!==M("scrollCallback",U)?g(W):v()}function $(t){function r(){var e=j(a);c(W,"Moving to in page link (#"+i+") at x: "+e.x+" y: "+e.y),U={x:e.x,y:e.y},D(),c(W,"--")}function n(){e.parentIFrame?e.parentIFrame.moveToAnchor(i):c(W,"In page link #"+i+" not found and window.parentIFrame not found")}var i=t.split("#")[1]||"",o=decodeURIComponent(i),a=document.getElementById(o)||document.getElementsByName(o)[0];a?r():e.top!==e.self?n():c(W,"In page link #"+i+" not found")}function M(e,t){return f(W,e,t)}function B(){switch(q[W].firstRun&&Y(),G.type){case"close":h(G.iframe);break;case"message":O(E(6));break;case"scrollTo":k(!1);break;case"scrollToOffset":k(!0);break;case"pageInfo":P(q[W].iframe,W),R();break;case"pageInfoStop":C();break;case"inPageLink":$(E(9));break;case"reset":y(G);break;case"init":i(),M("initCallback",G.iframe),M("resizedCallback",G);break;default:i(),M("resizedCallback",G)}}function N(e){var t=!0;return q[e]||(t=!1,u(G.type+" No settings for "+e+". Message was: "+z)),t}function H(){for(var e in q)_("iFrame requested init",w(e),document.getElementById(e),e)}function Y(){q[W].firstRun=!1}var z=t.data,G={},W=null;"[iFrameResizerChild]Ready"===z?H():d()?(G=o(),W=V=G.id,!p()&&N(W)&&(c(W,"Received: "+z),A()&&s()&&B())):l(W,"Ignored: "+z)}function f(e,t,r){var n=null,i=null;if(q[e]){if(n=q[e][t],"function"!=typeof n)throw new TypeError(t+" on iFrame["+e+"] is not a function");i=n(r)}return i}function h(e){var t=e.id;c(t,"Removing iFrame: "+t),e.parentNode.removeChild(e),f(t,"closedCallback",t),c(t,"--"),delete q[t]}function m(t){null===U&&(U={x:void 0!==e.pageXOffset?e.pageXOffset:document.documentElement.scrollLeft,y:void 0!==e.pageYOffset?e.pageYOffset:document.documentElement.scrollTop},c(t,"Get page position: "+U.x+","+U.y))}function g(t){null!==U&&(e.scrollTo(U.x,U.y),c(t,"Set page position: "+U.x+","+U.y),v())}function v(){U=null}function y(e){function t(){b(e),_("reset","reset",e.iframe,e.id)}c(e.id,"Size reset requested by "+("init"===e.type?"host page":"iFrame")),m(e.id),S(t,e,"reset")}function b(e){function t(t){e.iframe.style[t]=e[t]+"px",c(e.id,"IFrame ("+i+") "+t+" set to "+e[t]+"px")}function r(t){$||"0"!==e[t]||($=!0,c(i,"Hidden iFrame detected, creating visibility listener"),O())}function n(e){t(e),r(e)}var i=e.iframe.id;q[i]&&(q[i].sizeHeight&&n("height"),q[i].sizeWidth&&n("width"))}function S(e,t,r){r!==t.type&&B?(c(t.id,"Requesting animation frame"),B(e)):e()}function _(e,t,r,n){function i(){var i=q[n].targetOrigin;c(n,"["+e+"] Sending msg to iframe["+n+"] ("+t+") targetOrigin: "+i),r.contentWindow.postMessage(F+t,i)}function o(){l(n,"["+e+"] IFrame("+n+") not found"),q[n]&&delete q[n]}function a(){r&&"contentWindow"in r&&null!==r.contentWindow?i():o()}n=n||r.id,q[n]&&a()}function w(e){return e+":"+q[e].bodyMarginV1+":"+q[e].sizeWidth+":"+q[e].log+":"+q[e].interval+":"+q[e].enablePublicMethods+":"+q[e].autoResize+":"+q[e].bodyMargin+":"+q[e].heightCalculationMethod+":"+q[e].bodyBackground+":"+q[e].bodyPadding+":"+q[e].tolerance+":"+q[e].inPageLinks+":"+q[e].resizeFrom+":"+q[e].widthCalculationMethod}function E(e,t){function n(){function t(t){1/0!==q[S][t]&&0!==q[S][t]&&(e.style[t]=q[S][t]+"px",c(S,"Set "+t+" = "+q[S][t]+"px"));
}function r(e){if(q[S]["min"+e]>q[S]["max"+e])throw new Error("Value for min"+e+" can not be greater than max"+e)}r("Height"),r("Width"),t("maxHeight"),t("minHeight"),t("maxWidth"),t("minWidth")}function i(){var e=t&&t.id||Y.id+k++;return null!==document.getElementById(e)&&(e+=k++),e}function o(r){return V=r,""===r&&(e.id=r=i(),D=(t||{}).log,V=r,c(r,"Added missing iframe ID: "+r+" ("+e.src+")")),r}function a(){c(S,"IFrame scrolling "+(q[S].scrolling?"enabled":"disabled")+" for "+S),e.style.overflow=!1===q[S].scrolling?"hidden":"auto",e.scrolling=!1===q[S].scrolling?"no":"yes"}function s(){"number"!=typeof q[S].bodyMargin&&"0"!==q[S].bodyMargin||(q[S].bodyMarginV1=q[S].bodyMargin,q[S].bodyMargin=""+q[S].bodyMargin+"px")}function l(){var t=q[S].firstRun,r=q[S].heightCalculationMethod in N;!t&&r&&y({iframe:e,height:0,width:0,type:"init"})}function d(){Function.prototype.bind&&(q[S].iframe.iFrameResizer={close:h.bind(null,q[S].iframe),resize:_.bind(null,"Window resize","resize",q[S].iframe),moveToAnchor:function(e){_("Move to anchor","inPageLink:"+e,q[S].iframe,S)},sendMessage:function(e){e=JSON.stringify(e),_("Send Message","message:"+e,q[S].iframe,S)}})}function p(t){function n(){_("iFrame.onload",t,e),l()}r(e,"load",n),_("init",t,e)}function f(e){if("object"!=typeof e)throw new TypeError("Options is not an object")}function m(e){for(var t in Y)Y.hasOwnProperty(t)&&(q[S][t]=e.hasOwnProperty(t)?e[t]:Y[t])}function g(e){return""===e||"file://"===e?"*":e}function v(t){t=t||{},q[S]={firstRun:!0,iframe:e,remoteHost:e.src.split("/").slice(0,3).join("/")},f(t),m(t),q[S].targetOrigin=!0===q[S].checkOrigin?g(q[S].remoteHost):"*"}function b(){return S in q&&"iFrameResizer"in e}var S=o(e.id);b()?u(S,"Ignored iFrame, already setup."):(v(t),a(),n(),s(),p(w(S)),d())}function T(e,t){null===H&&(H=setTimeout(function(){H=null,e()},t))}function O(){function t(){function e(e){function t(t){return"0px"===q[e].iframe.style[t]}function r(e){return null!==e.offsetParent}r(q[e].iframe)&&(t("height")||t("width"))&&_("Visibility change","resize",q[e].iframe,e)}for(var t in q)e(t)}function r(e){c("window","Mutation observed: "+e[0].target+" "+e[0].type),T(t,16)}function n(){var e=document.querySelector("body"),t={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0},n=new i(r);n.observe(e,t)}var i=e.MutationObserver||e.WebKitMutationObserver;i&&n()}function I(e){function t(){R("Window "+e,"resize")}c("window","Trigger event: "+e),T(t,16)}function P(){function e(){R("Tab Visable","resize")}"hidden"!==document.visibilityState&&(c("document","Trigger event: Visiblity change"),T(e,16))}function R(e,t){function r(e){return"parent"===q[e].resizeFrom&&q[e].autoResize&&!q[e].firstRun}for(var n in q)r(n)&&_(e,t,document.getElementById(n),n)}function C(){r(e,"message",p),r(e,"resize",function(){I("resize")}),r(document,"visibilitychange",P),r(document,"-webkit-visibilitychange",P),r(e,"focusin",function(){I("focus")}),r(e,"focus",function(){I("focus")})}function A(){function e(e,r){function n(){if(!r.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==r.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+r.tagName+">")}r&&(n(),E(r,e),t.push(r))}var t;return i(),C(),function(r,n){switch(t=[],typeof n){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(n||"iframe"),e.bind(void 0,r));break;case"object":e(r,n);break;default:throw new TypeError("Unexpected data type ("+typeof n+")")}return t}}function j(e){e.fn.iFrameResize=function(e){return this.filter("iframe").each(function(t,r){E(r,e)}).end()}}var k=0,D=!1,$=!1,M="message",x=M.length,F="[iFrameSizer]",L=F.length,U=null,B=e.requestAnimationFrame,N={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},q={},H=null,V="Host Page",Y={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,tolerance:0,widthCalculationMethod:"scroll",closedCallback:function(){},initCallback:function(){},messageCallback:function(){u("MessageCallback function not defined")},resizedCallback:function(){},scrollCallback:function(){return!0}};e.jQuery&&j(jQuery),"function"==typeof define&&define.amd?define([],A):"object"==typeof t&&"object"==typeof t.exports?t.exports=A():e.iFrameResize=e.iFrameResize||A()}(window||{})},{}],36:[function(e,t,r){r.iframeResizer=e("./iframeResizer"),r.iframeResizerContentWindow=e("./iframeResizer.contentWindow")},{"./iframeResizer":35,"./iframeResizer.contentWindow":34}],37:[function(e,t,r){t.exports=function(e){return!(null==e||!(e._isBuffer||e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)))}},{}],38:[function(e,t,r){function n(e){return l.lastIndex=0,l.test(e)?'"'+e.replace(l,function(e){var t=u[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function i(e,t,r){var o,l,u,d,p,f=a,h=t[e];switch(h&&"object"==typeof h&&"function"==typeof h.toJSON&&(h=h.toJSON(e)),"function"==typeof c&&(h=c.call(t,e,h)),typeof h){case"string":return n(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h)return"null";if(a+=s,p=[],"[object Array]"===Object.prototype.toString.apply(h)){for(d=h.length,o=0;o<d;o+=1)p[o]=i(o,h,r)||"null";return u=0===p.length?"[]":a?a.length+p.join(", ").length+4>r?"[\n"+a+p.join(",\n"+a)+"\n"+f+"]":"[ "+p.join(", ")+" ]":"["+p.join(",")+"]",a=f,u}if(c&&"object"==typeof c)for(d=c.length,o=0;o<d;o+=1)"string"==typeof c[o]&&(l=c[o],u=i(l,h,r),u&&p.push(n(l)+(a?": ":":")+u));else for(l in h)Object.prototype.hasOwnProperty.call(h,l)&&(u=i(l,h,r),u&&p.push(n(l)+(a?": ":":")+u));return u=0===p.length?"{}":a?a.length+p.join(", ").length+4>r?"{\n"+a+p.join(",\n"+a)+"\n"+f+"}":"{ "+p.join(", ")+" }":"{"+p.join(",")+"}",a=f,u}}function o(e,t,r,n){var o;if(a="",s="",n||(n=0),"number"!=typeof n)throw new Error("beaufifier: limit must be a number");if("number"==typeof r)for(o=0;o<r;o+=1)s+=" ";else"string"==typeof r&&(s=r);if(c=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("beautifier: wrong replacer parameter");return i("",{"":e},n)}var a,s,c,l=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,u={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};t.exports=o},{}],39:[function(e,t,r){(function(n){!function(e){if("object"==typeof r&&"undefined"!=typeof t)t.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof n?n:"undefined"!=typeof self?self:this,i.localforage=e()}}(function(){return function t(r,n,i){function o(s,c){if(!n[s]){if(!r[s]){var l="function"==typeof e&&e;if(!c&&l)return l(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[s]={exports:{}};r[s][0].call(d.exports,function(e){var t=r[s][1][e];return o(t?t:e)},d,d.exports,t,r,n,i)}return n[s].exports}for(var a="function"==typeof e&&e,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,r){"use strict";function n(){}function i(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,e!==n&&c(this,e)}function o(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function a(e,t,r){h(function(){var n;try{n=t(r)}catch(t){return m.reject(e,t)}n===e?m.reject(e,new TypeError("Cannot resolve promise with itself")):m.resolve(e,n)})}function s(e){var t=e&&e.then;if(e&&"object"==typeof e&&"function"==typeof t)return function(){t.apply(e,arguments)}}function c(e,t){function r(t){o||(o=!0,m.reject(e,t))}function n(t){o||(o=!0,m.resolve(e,t))}function i(){t(n,r)}var o=!1,a=l(i);"error"===a.status&&r(a.value)}function l(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}function u(e){return e instanceof this?e:m.resolve(new this(n),e)}function d(e){var t=new this(n);return m.reject(t,e)}function p(e){function t(e,t){function n(e){a[t]=e,++s!==i||o||(o=!0,m.resolve(l,a))}r.resolve(e).then(n,function(e){o||(o=!0,m.reject(l,e))})}var r=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var i=e.length,o=!1;if(!i)return this.resolve([]);for(var a=new Array(i),s=0,c=-1,l=new this(n);++c<i;)t(e[c],c);return l}function f(e){function t(e){r.resolve(e).then(function(e){o||(o=!0,m.resolve(s,e))},function(e){o||(o=!0,m.reject(s,e))})}var r=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var i=e.length,o=!1;if(!i)return this.resolve([]);for(var a=-1,s=new this(n);++a<i;)t(e[a]);return s}var h=e(2),m={},g=["REJECTED"],v=["FULFILLED"],y=["PENDING"];t.exports=r=i,i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){if("function"!=typeof e&&this.state===v||"function"!=typeof t&&this.state===g)return this;var r=new this.constructor(n);if(this.state!==y){var i=this.state===v?e:t;a(r,i,this.outcome)}else this.queue.push(new o(r,e,t));return r},o.prototype.callFulfilled=function(e){m.resolve(this.promise,e)},o.prototype.otherCallFulfilled=function(e){a(this.promise,this.onFulfilled,e)},o.prototype.callRejected=function(e){m.reject(this.promise,e)},o.prototype.otherCallRejected=function(e){a(this.promise,this.onRejected,e)},m.resolve=function(e,t){var r=l(s,t);if("error"===r.status)return m.reject(e,r.value);var n=r.value;if(n)c(e,n);else{e.state=v,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},m.reject=function(e,t){e.state=g,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},r.resolve=u,r.reject=d,r.all=p,r.race=f},{2:2}],2:[function(e,t,r){(function(e){"use strict";function r(){u=!0;for(var e,t,r=d.length;r;){for(t=d,d=[],e=-1;++e<r;)t[e]();r=d.length}u=!1}function n(e){1!==d.push(e)||u||i()}var i,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var a=0,s=new o(r),c=e.document.createTextNode("");s.observe(c,{characterData:!0}),i=function(){c.data=a=++a%2}}else if(e.setImmediate||"undefined"==typeof e.MessageChannel)i="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){r(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(r,0)};else{var l=new e.MessageChannel;l.port1.onmessage=r,i=function(){l.port2.postMessage(0)}}var u,d=[];t.exports=n}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,r){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(1))}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{1:1}],4:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){}}function o(){try{return!!oe&&(!("undefined"!=typeof openDatabase&&"undefined"!=typeof navigator&&navigator.userAgent&&/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent))&&(oe&&"function"==typeof oe.open&&"undefined"!=typeof IDBKeyRange))}catch(e){return!1}}function a(){return"function"==typeof openDatabase}function s(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&localStorage.setItem}catch(e){return!1}}function c(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var r="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,n=new r,i=0;i<e.length;i+=1)n.append(e[i]);return n.getBlob(t.type)}}function l(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function u(e,t,r){"function"==typeof t&&e.then(t),"function"==typeof r&&e.catch(r)}function d(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),i=0;i<t;i++)n[i]=e.charCodeAt(i);return r}function p(e){return new ce(function(t){var r=c([""]);e.objectStore(le).put(r,"key"),e.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},e.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);t(r||!e||parseInt(e[1],10)>=43)}}).catch(function(){return!1})}function f(e){return"boolean"==typeof ae?ce.resolve(ae):p(e).then(function(e){return ae=e})}function h(e){var t=se[e.name],r={};r.promise=new ce(function(e){r.resolve=e}),t.deferredOperations.push(r),t.dbReady?t.dbReady=t.dbReady.then(function(){return r.promise}):t.dbReady=r.promise}function m(e){var t=se[e.name],r=t.deferredOperations.pop();r&&r.resolve()}function g(e,t){return new ce(function(r,n){if(e.db){if(!t)return r(e.db);h(e),e.db.close()}var i=[e.name];t&&i.push(e.version);var o=oe.open.apply(oe,i);t&&(o.onupgradeneeded=function(t){var r=o.result;try{r.createObjectStore(e.storeName),t.oldVersion<=1&&r.createObjectStore(le)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),o.onerror=function(){n(o.error)},o.onsuccess=function(){r(o.result),m(e)}})}function v(e){return g(e,!1)}function y(e){return g(e,!0)}function b(e,t){if(!e.db)return!0;var r=!e.db.objectStoreNames.contains(e.storeName),n=e.version<e.db.version,i=e.version>e.db.version;if(n&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||r){if(r){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function S(e){return new ce(function(t,r){var n=new FileReader;n.onerror=r,n.onloadend=function(r){var n=btoa(r.target.result||"");t({__local_forage_encoded_blob:!0,data:n,type:e.type})},n.readAsBinaryString(e)})}function _(e){var t=d(atob(e.data));return c([t],{type:e.type})}function w(e){return e&&e.__local_forage_encoded_blob}function E(e){var t=this,r=t._initReady().then(function(){var e=se[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return u(r,e,e),r}function T(e){function t(){return ce.resolve()}var r=this,n={db:null};if(e)for(var i in e)n[i]=e[i];se||(se={});var o=se[n.name];o||(o={forages:[],db:null,dbReady:null,deferredOperations:[]},se[n.name]=o),o.forages.push(r),r._initReady||(r._initReady=r.ready,r.ready=E);for(var a=[],s=0;s<o.forages.length;s++){var c=o.forages[s];c!==r&&a.push(c._initReady().catch(t))}var l=o.forages.slice(0);return ce.all(a).then(function(){return n.db=o.db,v(n)}).then(function(e){return n.db=e,b(n,r._defaultConfig.version)?y(n):e}).then(function(e){n.db=o.db=e,r._dbInfo=n;for(var t=0;t<l.length;t++){var i=l[t];i!==r&&(i._dbInfo.db=n.db,i._dbInfo.version=n.version)}})}function O(e,t){var r=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var n=new ce(function(t,n){r.ready().then(function(){var i=r._dbInfo,o=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName),a=o.get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),w(e)&&(e=_(e)),t(e)},a.onerror=function(){n(a.error)}}).catch(n)});return l(n,t),n}function I(e,t){var r=this,n=new ce(function(t,n){r.ready().then(function(){var i=r._dbInfo,o=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName),a=o.openCursor(),s=1;a.onsuccess=function(){var r=a.result;if(r){var n=r.value;w(n)&&(n=_(n));var i=e(n,r.key,s++);void 0!==i?t(i):r.continue()}else t()},a.onerror=function(){n(a.error)}}).catch(n)});return l(n,t),n}function P(e,t,r){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var i=new ce(function(r,i){var o;n.ready().then(function(){return o=n._dbInfo,"[object Blob]"===ue.call(t)?f(o.db).then(function(e){return e?t:S(t)}):t}).then(function(t){var n=o.db.transaction(o.storeName,"readwrite"),a=n.objectStore(o.storeName);null===t&&(t=void 0),n.oncomplete=function(){void 0===t&&(t=null),r(t)},n.onabort=n.onerror=function(){var e=s.error?s.error:s.transaction.error;i(e)};var s=a.put(t,e)}).catch(i)});return l(i,r),i}function R(e,t){var r=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var n=new ce(function(t,n){r.ready().then(function(){var i=r._dbInfo,o=i.db.transaction(i.storeName,"readwrite"),a=o.objectStore(i.storeName),s=a.delete(e);o.oncomplete=function(){t()},o.onerror=function(){n(s.error)},o.onabort=function(){var e=s.error?s.error:s.transaction.error;n(e)}}).catch(n)});return l(n,t),n}function C(e){var t=this,r=new ce(function(e,r){t.ready().then(function(){var n=t._dbInfo,i=n.db.transaction(n.storeName,"readwrite"),o=i.objectStore(n.storeName),a=o.clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=a.error?a.error:a.transaction.error;r(e)}}).catch(r)});return l(r,e),r}function A(e){var t=this,r=new ce(function(e,r){t.ready().then(function(){var n=t._dbInfo,i=n.db.transaction(n.storeName,"readonly").objectStore(n.storeName),o=i.count();o.onsuccess=function(){e(o.result)},o.onerror=function(){r(o.error)}}).catch(r)});return l(r,e),r}function j(e,t){var r=this,n=new ce(function(t,n){return e<0?void t(null):void r.ready().then(function(){var i=r._dbInfo,o=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName),a=!1,s=o.openCursor();s.onsuccess=function(){var r=s.result;return r?void(0===e?t(r.key):a?t(r.key):(a=!0,r.advance(e))):void t(null)},s.onerror=function(){n(s.error)}}).catch(n)});return l(n,t),n}function k(e){var t=this,r=new ce(function(e,r){t.ready().then(function(){var n=t._dbInfo,i=n.db.transaction(n.storeName,"readonly").objectStore(n.storeName),o=i.openCursor(),a=[];o.onsuccess=function(){var t=o.result;return t?(a.push(t.key),void t.continue()):void e(a)},o.onerror=function(){r(o.error)}}).catch(r)});return l(r,e),r}function D(e){var t,r,n,i,o,a=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var l=new ArrayBuffer(a),u=new Uint8Array(l);for(t=0;t<s;t+=4)r=pe.indexOf(e[t]),n=pe.indexOf(e[t+1]),i=pe.indexOf(e[t+2]),o=pe.indexOf(e[t+3]),u[c++]=r<<2|n>>4,u[c++]=(15&n)<<4|i>>2,u[c++]=(3&i)<<6|63&o;return l}function $(e){var t,r=new Uint8Array(e),n="";for(t=0;t<r.length;t+=3)n+=pe[r[t]>>2],n+=pe[(3&r[t])<<4|r[t+1]>>4],n+=pe[(15&r[t+1])<<2|r[t+2]>>6],n+=pe[63&r[t+2]];return r.length%3===2?n=n.substring(0,n.length-1)+"=":r.length%3===1&&(n=n.substring(0,n.length-2)+"=="),n}function M(e,t){var r="";if(e&&(r=Ce.call(e)),e&&("[object ArrayBuffer]"===r||e.buffer&&"[object ArrayBuffer]"===Ce.call(e.buffer))){var n,i=me;e instanceof ArrayBuffer?(n=e,i+=ve):(n=e.buffer,"[object Int8Array]"===r?i+=be:"[object Uint8Array]"===r?i+=Se:"[object Uint8ClampedArray]"===r?i+=_e:"[object Int16Array]"===r?i+=we:"[object Uint16Array]"===r?i+=Te:"[object Int32Array]"===r?i+=Ee:"[object Uint32Array]"===r?i+=Oe:"[object Float32Array]"===r?i+=Ie:"[object Float64Array]"===r?i+=Pe:t(new Error("Failed to get type for BinaryArray"))),t(i+$(n))}else if("[object Blob]"===r){var o=new FileReader;o.onload=function(){var r=fe+e.type+"~"+$(this.result);t(me+ye+r)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(r){console.error("Couldn't convert value into a JSON string: ",e),t(null,r)}}function x(e){if(e.substring(0,ge)!==me)return JSON.parse(e);var t,r=e.substring(Re),n=e.substring(ge,Re);if(n===ye&&he.test(r)){var i=r.match(he);t=i[1],r=r.substring(i[0].length)}var o=D(r);switch(n){case ve:return o;case ye:return c([o],{type:t});case be:return new Int8Array(o);case Se:return new Uint8Array(o);case _e:return new Uint8ClampedArray(o);case we:return new Int16Array(o);case Te:return new Uint16Array(o);case Ee:return new Int32Array(o);case Oe:return new Uint32Array(o);case Ie:return new Float32Array(o);case Pe:return new Float64Array(o);default:throw new Error("Unkown type: "+n)}}function F(e){var t=this,r={db:null};if(e)for(var n in e)r[n]="string"!=typeof e[n]?e[n].toString():e[n];var i=new ce(function(e,n){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(e){return n(e)}r.db.transaction(function(i){i.executeSql("CREATE TABLE IF NOT EXISTS "+r.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){t._dbInfo=r,e()},function(e,t){n(t)})})});return r.serializer=Ae,i}function L(e,t){var r=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var n=new ce(function(t,n){r.ready().then(function(){var i=r._dbInfo;i.db.transaction(function(r){r.executeSql("SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],function(e,r){var n=r.rows.length?r.rows.item(0).value:null;n&&(n=i.serializer.deserialize(n)),t(n)},function(e,t){n(t)})})}).catch(n)});return l(n,t),n}function U(e,t){var r=this,n=new ce(function(t,n){r.ready().then(function(){var i=r._dbInfo;i.db.transaction(function(r){r.executeSql("SELECT * FROM "+i.storeName,[],function(r,n){for(var o=n.rows,a=o.length,s=0;s<a;s++){var c=o.item(s),l=c.value;if(l&&(l=i.serializer.deserialize(l)),l=e(l,c.key,s+1),void 0!==l)return void t(l)}t()},function(e,t){n(t)})})}).catch(n)});return l(n,t),n}function B(e,t,r){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var i=new ce(function(r,i){n.ready().then(function(){void 0===t&&(t=null);var o=t,a=n._dbInfo;a.serializer.serialize(t,function(t,n){n?i(n):a.db.transaction(function(n){n.executeSql("INSERT OR REPLACE INTO "+a.storeName+" (key, value) VALUES (?, ?)",[e,t],function(){r(o)},function(e,t){i(t)})},function(e){e.code===e.QUOTA_ERR&&i(e)})})}).catch(i)});return l(i,r),i}function N(e,t){var r=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var n=new ce(function(t,n){r.ready().then(function(){var i=r._dbInfo;i.db.transaction(function(r){r.executeSql("DELETE FROM "+i.storeName+" WHERE key = ?",[e],function(){t()},function(e,t){n(t)})})}).catch(n)});return l(n,t),n}function q(e){var t=this,r=new ce(function(e,r){t.ready().then(function(){var n=t._dbInfo;n.db.transaction(function(t){t.executeSql("DELETE FROM "+n.storeName,[],function(){e()},function(e,t){r(t)})})}).catch(r)});return l(r,e),r}function H(e){var t=this,r=new ce(function(e,r){t.ready().then(function(){var n=t._dbInfo;n.db.transaction(function(t){t.executeSql("SELECT COUNT(key) as c FROM "+n.storeName,[],function(t,r){var n=r.rows.item(0).c;e(n)},function(e,t){r(t)})})}).catch(r)});return l(r,e),r}function V(e,t){var r=this,n=new ce(function(t,n){r.ready().then(function(){var i=r._dbInfo;i.db.transaction(function(r){r.executeSql("SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,r){var n=r.rows.length?r.rows.item(0).key:null;t(n)},function(e,t){n(t)})})}).catch(n)});return l(n,t),n}function Y(e){var t=this,r=new ce(function(e,r){t.ready().then(function(){var n=t._dbInfo;n.db.transaction(function(t){t.executeSql("SELECT key FROM "+n.storeName,[],function(t,r){for(var n=[],i=0;i<r.rows.length;i++)n.push(r.rows.item(i).key);e(n)},function(e,t){r(t)})})}).catch(r)});return l(r,e),r}function z(e){var t=this,r={};if(e)for(var n in e)r[n]=e[n];return r.keyPrefix=r.name+"/",r.storeName!==t._defaultConfig.storeName&&(r.keyPrefix+=r.storeName+"/"),t._dbInfo=r,r.serializer=Ae,ce.resolve()}function G(e){var t=this,r=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,r=localStorage.length-1;r>=0;r--){var n=localStorage.key(r);0===n.indexOf(e)&&localStorage.removeItem(n)}});return l(r,e),r}function W(e,t){var r=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var n=r.ready().then(function(){var t=r._dbInfo,n=localStorage.getItem(t.keyPrefix+e);return n&&(n=t.serializer.deserialize(n)),n});return l(n,t),n}function Q(e,t){var r=this,n=r.ready().then(function(){for(var t=r._dbInfo,n=t.keyPrefix,i=n.length,o=localStorage.length,a=1,s=0;s<o;s++){var c=localStorage.key(s);if(0===c.indexOf(n)){var l=localStorage.getItem(c);if(l&&(l=t.serializer.deserialize(l)),l=e(l,c.substring(i),a++),void 0!==l)return l}}});return l(n,t),n}function K(e,t){var r=this,n=r.ready().then(function(){var t,n=r._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(n.keyPrefix.length)),t});return l(n,t),n}function X(e){var t=this,r=t.ready().then(function(){for(var e=t._dbInfo,r=localStorage.length,n=[],i=0;i<r;i++)0===localStorage.key(i).indexOf(e.keyPrefix)&&n.push(localStorage.key(i).substring(e.keyPrefix.length));return n});return l(r,e),r}function J(e){var t=this,r=t.keys().then(function(e){return e.length});return l(r,e),r}function Z(e,t){var r=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var n=r.ready().then(function(){var t=r._dbInfo;localStorage.removeItem(t.keyPrefix+e)});return l(n,t),n}function ee(e,t,r){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var i=n.ready().then(function(){void 0===t&&(t=null);var r=t;return new ce(function(i,o){var a=n._dbInfo;a.serializer.serialize(t,function(t,n){if(n)o(n);else try{localStorage.setItem(a.keyPrefix+e,t),i(r)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||o(e),o(e)}})})});return l(i,r),i}function te(e,t){e[t]=function(){var r=arguments;return e.ready().then(function(){return e[t].apply(e,r)})}}function re(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var r in t)t.hasOwnProperty(r)&&(Ue(t[r])?arguments[0][r]=t[r].slice():arguments[0][r]=t[r])}return arguments[0]}function ne(e){for(var t in $e)if($e.hasOwnProperty(t)&&$e[t]===e)return!0;return!1}var ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oe=i();"undefined"==typeof Promise&&"undefined"!=typeof e&&e(3);var ae,se,ce=Promise,le="local-forage-detect-blob-support",ue=Object.prototype.toString,de={_driver:"asyncStorage",_initStorage:T,iterate:I,getItem:O,setItem:P,removeItem:R,clear:C,length:A,key:j,keys:k},pe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fe="~~local_forage_type~",he=/^~~local_forage_type~([^~]+)~/,me="__lfsc__:",ge=me.length,ve="arbf",ye="blob",be="si08",Se="ui08",_e="uic8",we="si16",Ee="si32",Te="ur16",Oe="ui32",Ie="fl32",Pe="fl64",Re=ge+ve.length,Ce=Object.prototype.toString,Ae={serialize:M,deserialize:x,stringToBuffer:D,bufferToString:$},je={_driver:"webSQLStorage",_initStorage:F,iterate:U,getItem:L,setItem:B,removeItem:N,clear:q,length:H,key:V,keys:Y},ke={_driver:"localStorageWrapper",_initStorage:z,iterate:Q,getItem:W,setItem:ee,removeItem:Z,clear:G,length:J,key:K,keys:X},De={},$e={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},Me=[$e.INDEXEDDB,$e.WEBSQL,$e.LOCALSTORAGE],xe=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],Fe={description:"",driver:Me.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},Le={};Le[$e.INDEXEDDB]=o(),Le[$e.WEBSQL]=a(),Le[$e.LOCALSTORAGE]=s();var Ue=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Be=function(){function e(t){n(this,e),this.INDEXEDDB=$e.INDEXEDDB,this.LOCALSTORAGE=$e.LOCALSTORAGE,this.WEBSQL=$e.WEBSQL,this._defaultConfig=re({},Fe),this._config=re({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver)}return e.prototype.config=function(e){if("object"===("undefined"==typeof e?"undefined":ie(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e)"storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),this._config[t]=e[t];return"driver"in e&&e.driver&&this.setDriver(this._config.driver),!0}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,r){var n=new ce(function(t,r){try{var n=e._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),o=new Error("Custom driver name already in use: "+e._driver);if(!e._driver)return void r(i);if(ne(e._driver))return void r(o);for(var a=xe.concat("_initStorage"),s=0;s<a.length;s++){var c=a[s];if(!c||!e[c]||"function"!=typeof e[c])return void r(i)}var l=ce.resolve(!0);"_support"in e&&(l=e._support&&"function"==typeof e._support?e._support():ce.resolve(!!e._support)),l.then(function(r){Le[n]=r,De[n]=e,t()},r)}catch(e){r(e)}});return u(n,t,r),n},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,r){var n=this,i=ce.resolve().then(function(){if(!ne(e)){if(De[e])return De[e];throw new Error("Driver not found.")}switch(e){case n.INDEXEDDB:return de;case n.LOCALSTORAGE:return ke;case n.WEBSQL:return je}});return u(i,t,r),i},e.prototype.getSerializer=function(e){var t=ce.resolve(Ae);return u(t,e),t},e.prototype.ready=function(e){var t=this,r=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return u(r,e,e),r},e.prototype.setDriver=function(e,t,r){function n(){o._config.driver=o.driver()}function i(e){return function(){function t(){for(;r<e.length;){var i=e[r];return r++,o._dbInfo=null,o._ready=null,o.getDriver(i).then(function(e){return o._extend(e),n(),o._ready=o._initStorage(o._config),o._ready}).catch(t)}n();var a=new Error("No available storage method found.");return o._driverSet=ce.reject(a),o._driverSet}var r=0;return t()}}var o=this;Ue(e)||(e=[e]);var a=this._getSupportedDrivers(e),s=null!==this._driverSet?this._driverSet.catch(function(){return ce.resolve()}):ce.resolve();return this._driverSet=s.then(function(){var e=a[0];return o._dbInfo=null,o._ready=null,o.getDriver(e).then(function(e){o._driver=e._driver,n(),o._wrapLibraryMethodsWithReady(),o._initDriver=i(a)})}).catch(function(){n();var e=new Error("No available storage method found.");return o._driverSet=ce.reject(e),o._driverSet}),u(this._driverSet,t,r),this._driverSet},e.prototype.supports=function(e){return!!Le[e]},e.prototype._extend=function(e){re(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r];this.supports(i)&&t.push(i)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0;e<xe.length;e++)te(this,xe[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),Ne=new Be;t.exports=Ne},{3:3}]},{},[4])(4)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],40:[function(e,t,r){var n=e("./_getNative"),i=e("./_root"),o=n(i,"DataView");t.exports=o},{"./_getNative":169,"./_root":215}],41:[function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}var i=e("./_hashClear"),o=e("./_hashDelete"),a=e("./_hashGet"),s=e("./_hashHas"),c=e("./_hashSet");n.prototype.clear=i,n.prototype.delete=o,n.prototype.get=a,n.prototype.has=s,n.prototype.set=c,t.exports=n},{"./_hashClear":178,
"./_hashDelete":179,"./_hashGet":180,"./_hashHas":181,"./_hashSet":182}],42:[function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}var i=e("./_listCacheClear"),o=e("./_listCacheDelete"),a=e("./_listCacheGet"),s=e("./_listCacheHas"),c=e("./_listCacheSet");n.prototype.clear=i,n.prototype.delete=o,n.prototype.get=a,n.prototype.has=s,n.prototype.set=c,t.exports=n},{"./_listCacheClear":194,"./_listCacheDelete":195,"./_listCacheGet":196,"./_listCacheHas":197,"./_listCacheSet":198}],43:[function(e,t,r){var n=e("./_getNative"),i=e("./_root"),o=n(i,"Map");t.exports=o},{"./_getNative":169,"./_root":215}],44:[function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}var i=e("./_mapCacheClear"),o=e("./_mapCacheDelete"),a=e("./_mapCacheGet"),s=e("./_mapCacheHas"),c=e("./_mapCacheSet");n.prototype.clear=i,n.prototype.delete=o,n.prototype.get=a,n.prototype.has=s,n.prototype.set=c,t.exports=n},{"./_mapCacheClear":199,"./_mapCacheDelete":200,"./_mapCacheGet":201,"./_mapCacheHas":202,"./_mapCacheSet":203}],45:[function(e,t,r){var n=e("./_getNative"),i=e("./_root"),o=n(i,"Promise");t.exports=o},{"./_getNative":169,"./_root":215}],46:[function(e,t,r){var n=e("./_getNative"),i=e("./_root"),o=n(i,"Set");t.exports=o},{"./_getNative":169,"./_root":215}],47:[function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new i;++t<r;)this.add(e[t])}var i=e("./_MapCache"),o=e("./_setCacheAdd"),a=e("./_setCacheHas");n.prototype.add=n.prototype.push=o,n.prototype.has=a,t.exports=n},{"./_MapCache":44,"./_setCacheAdd":216,"./_setCacheHas":217}],48:[function(e,t,r){function n(e){var t=this.__data__=new i(e);this.size=t.size}var i=e("./_ListCache"),o=e("./_stackClear"),a=e("./_stackDelete"),s=e("./_stackGet"),c=e("./_stackHas"),l=e("./_stackSet");n.prototype.clear=o,n.prototype.delete=a,n.prototype.get=s,n.prototype.has=c,n.prototype.set=l,t.exports=n},{"./_ListCache":42,"./_stackClear":221,"./_stackDelete":222,"./_stackGet":223,"./_stackHas":224,"./_stackSet":225}],49:[function(e,t,r){var n=e("./_root"),i=n.Symbol;t.exports=i},{"./_root":215}],50:[function(e,t,r){var n=e("./_root"),i=n.Uint8Array;t.exports=i},{"./_root":215}],51:[function(e,t,r){var n=e("./_getNative"),i=e("./_root"),o=n(i,"WeakMap");t.exports=o},{"./_getNative":169,"./_root":215}],52:[function(e,t,r){function n(e,t){return e.set(t[0],t[1]),e}t.exports=n},{}],53:[function(e,t,r){function n(e,t){return e.add(t),e}t.exports=n},{}],54:[function(e,t,r){function n(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}t.exports=n},{}],55:[function(e,t,r){function n(e,t,r,n){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(n,a,r(a),e)}return n}t.exports=n},{}],56:[function(e,t,r){function n(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}t.exports=n},{}],57:[function(e,t,r){function n(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var a=e[r];t(a,r,e)&&(o[i++]=a)}return o}t.exports=n},{}],58:[function(e,t,r){function n(e,t){var r=null==e?0:e.length;return!!r&&i(e,t,0)>-1}var i=e("./_baseIndexOf");t.exports=n},{"./_baseIndexOf":91}],59:[function(e,t,r){function n(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}t.exports=n},{}],60:[function(e,t,r){function n(e,t){var r=a(e),n=!r&&o(e),u=!r&&!n&&s(e),p=!r&&!n&&!u&&l(e),f=r||n||u||p,h=f?i(e.length,String):[],m=h.length;for(var g in e)!t&&!d.call(e,g)||f&&("length"==g||u&&("offset"==g||"parent"==g)||p&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||c(g,m))||h.push(g);return h}var i=e("./_baseTimes"),o=e("./isArguments"),a=e("./isArray"),s=e("./isBuffer"),c=e("./_isIndex"),l=e("./isTypedArray"),u=Object.prototype,d=u.hasOwnProperty;t.exports=n},{"./_baseTimes":125,"./_isIndex":187,"./isArguments":263,"./isArray":264,"./isBuffer":267,"./isTypedArray":279}],61:[function(e,t,r){function n(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}t.exports=n},{}],62:[function(e,t,r){function n(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}t.exports=n},{}],63:[function(e,t,r){function n(e,t,r,n){var i=-1,o=null==e?0:e.length;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}t.exports=n},{}],64:[function(e,t,r){function n(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}t.exports=n},{}],65:[function(e,t,r){var n=e("./_baseProperty"),i=n("length");t.exports=i},{"./_baseProperty":113}],66:[function(e,t,r){function n(e){return e.split("")}t.exports=n},{}],67:[function(e,t,r){function n(e,t,r){(void 0===r||o(e[t],r))&&(void 0!==r||t in e)||i(e,t,r)}var i=e("./_baseAssignValue"),o=e("./eq");t.exports=n},{"./_baseAssignValue":73,"./eq":243}],68:[function(e,t,r){function n(e,t,r){var n=e[t];s.call(e,t)&&o(n,r)&&(void 0!==r||t in e)||i(e,t,r)}var i=e("./_baseAssignValue"),o=e("./eq"),a=Object.prototype,s=a.hasOwnProperty;t.exports=n},{"./_baseAssignValue":73,"./eq":243}],69:[function(e,t,r){function n(e,t){for(var r=e.length;r--;)if(i(e[r][0],t))return r;return-1}var i=e("./eq");t.exports=n},{"./eq":243}],70:[function(e,t,r){function n(e,t,r,n){return i(e,function(e,i,o){t(n,e,r(e),o)}),n}var i=e("./_baseEach");t.exports=n},{"./_baseEach":78}],71:[function(e,t,r){function n(e,t){return e&&i(t,o(t),e)}var i=e("./_copyObject"),o=e("./keys");t.exports=n},{"./_copyObject":149,"./keys":281}],72:[function(e,t,r){function n(e,t){return e&&i(t,o(t),e)}var i=e("./_copyObject"),o=e("./keysIn");t.exports=n},{"./_copyObject":149,"./keysIn":282}],73:[function(e,t,r){function n(e,t,r){"__proto__"==t&&i?i(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var i=e("./_defineProperty");t.exports=n},{"./_defineProperty":160}],74:[function(e,t,r){function n(e,t,r){return e===e&&(void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=e>=t?e:t)),e}t.exports=n},{}],75:[function(e,t,r){function n(e,t,r,P,R,C){var A,D=t&E,$=t&T,x=t&O;if(r&&(A=R?r(e,P,R,C):r(e)),void 0!==A)return A;if(!_(e))return e;var F=b(e);if(F){if(A=g(e),!D)return u(e,A)}else{var L=m(e),U=L==j||L==k;if(S(e))return l(e,D);if(L==M||L==I||U&&!R){if(A=$||U?{}:y(e),!D)return $?p(e,c(A,e)):d(e,s(A,e))}else{if(!J[L])return R?e:{};A=v(e,L,n,D)}}C||(C=new i);var B=C.get(e);if(B)return B;C.set(e,A);var N=x?$?h:f:$?keysIn:w,q=F?void 0:N(e);return o(q||e,function(i,o){q&&(o=i,i=e[o]),a(A,o,n(i,t,r,o,e,C))}),A}var i=e("./_Stack"),o=e("./_arrayEach"),a=e("./_assignValue"),s=e("./_baseAssign"),c=e("./_baseAssignIn"),l=e("./_cloneBuffer"),u=e("./_copyArray"),d=e("./_copySymbols"),p=e("./_copySymbolsIn"),f=e("./_getAllKeys"),h=e("./_getAllKeysIn"),m=e("./_getTag"),g=e("./_initCloneArray"),v=e("./_initCloneByTag"),y=e("./_initCloneObject"),b=e("./isArray"),S=e("./isBuffer"),_=e("./isObject"),w=e("./keys"),E=1,T=2,O=4,I="[object Arguments]",P="[object Array]",R="[object Boolean]",C="[object Date]",A="[object Error]",j="[object Function]",k="[object GeneratorFunction]",D="[object Map]",$="[object Number]",M="[object Object]",x="[object RegExp]",F="[object Set]",L="[object String]",U="[object Symbol]",B="[object WeakMap]",N="[object ArrayBuffer]",q="[object DataView]",H="[object Float32Array]",V="[object Float64Array]",Y="[object Int8Array]",z="[object Int16Array]",G="[object Int32Array]",W="[object Uint8Array]",Q="[object Uint8ClampedArray]",K="[object Uint16Array]",X="[object Uint32Array]",J={};J[I]=J[P]=J[N]=J[q]=J[R]=J[C]=J[H]=J[V]=J[Y]=J[z]=J[G]=J[D]=J[$]=J[M]=J[x]=J[F]=J[L]=J[U]=J[W]=J[Q]=J[K]=J[X]=!0,J[A]=J[j]=J[B]=!1,t.exports=n},{"./_Stack":48,"./_arrayEach":56,"./_assignValue":68,"./_baseAssign":71,"./_baseAssignIn":72,"./_cloneBuffer":139,"./_copyArray":148,"./_copySymbols":150,"./_copySymbolsIn":151,"./_getAllKeys":165,"./_getAllKeysIn":166,"./_getTag":174,"./_initCloneArray":183,"./_initCloneByTag":184,"./_initCloneObject":185,"./isArray":264,"./isBuffer":267,"./isObject":273,"./keys":281}],76:[function(e,t,r){var n=e("./isObject"),i=Object.create,o=function(){function e(){}return function(t){if(!n(t))return{};if(i)return i(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();t.exports=o},{"./isObject":273}],77:[function(e,t,r){function n(e,t,r,n){var d=-1,p=o,f=!0,h=e.length,m=[],g=t.length;if(!h)return m;r&&(t=s(t,c(r))),n?(p=a,f=!1):t.length>=u&&(p=l,f=!1,t=new i(t));e:for(;++d<h;){var v=e[d],y=null==r?v:r(v);if(v=n||0!==v?v:0,f&&y===y){for(var b=g;b--;)if(t[b]===y)continue e;m.push(v)}else p(t,y,n)||m.push(v)}return m}var i=e("./_SetCache"),o=e("./_arrayIncludes"),a=e("./_arrayIncludesWith"),s=e("./_arrayMap"),c=e("./_baseUnary"),l=e("./_cacheHas"),u=200;t.exports=n},{"./_SetCache":47,"./_arrayIncludes":58,"./_arrayIncludesWith":59,"./_arrayMap":61,"./_baseUnary":127,"./_cacheHas":132}],78:[function(e,t,r){var n=e("./_baseForOwn"),i=e("./_createBaseEach"),o=i(n);t.exports=o},{"./_baseForOwn":85,"./_createBaseEach":155}],79:[function(e,t,r){function n(e,t,r){for(var n=-1,o=e.length;++n<o;){var a=e[n],s=t(a);if(null!=s&&(void 0===c?s===s&&!i(s):r(s,c)))var c=s,l=a}return l}var i=e("./isSymbol");t.exports=n},{"./isSymbol":278}],80:[function(e,t,r){function n(e,t){var r=[];return i(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r}var i=e("./_baseEach");t.exports=n},{"./_baseEach":78}],81:[function(e,t,r){function n(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}t.exports=n},{}],82:[function(e,t,r){function n(e,t,r){var n;return r(e,function(e,r,i){if(t(e,r,i))return n=r,!1}),n}t.exports=n},{}],83:[function(e,t,r){function n(e,t,r,a,s){var c=-1,l=e.length;for(r||(r=o),s||(s=[]);++c<l;){var u=e[c];t>0&&r(u)?t>1?n(u,t-1,r,a,s):i(s,u):a||(s[s.length]=u)}return s}var i=e("./_arrayPush"),o=e("./_isFlattenable");t.exports=n},{"./_arrayPush":62,"./_isFlattenable":186}],84:[function(e,t,r){var n=e("./_createBaseFor"),i=n();t.exports=i},{"./_createBaseFor":156}],85:[function(e,t,r){function n(e,t){return e&&i(e,t,o)}var i=e("./_baseFor"),o=e("./keys");t.exports=n},{"./_baseFor":84,"./keys":281}],86:[function(e,t,r){function n(e,t){t=i(t,e);for(var r=0,n=t.length;null!=e&&r<n;)e=e[o(t[r++])];return r&&r==n?e:void 0}var i=e("./_castPath"),o=e("./_toKey");t.exports=n},{"./_castPath":135,"./_toKey":230}],87:[function(e,t,r){function n(e,t,r){var n=t(e);return o(e)?n:i(n,r(e))}var i=e("./_arrayPush"),o=e("./isArray");t.exports=n},{"./_arrayPush":62,"./isArray":264}],88:[function(e,t,r){function n(e){return null==e?void 0===e?c:s:l&&l in Object(e)?o(e):a(e)}var i=e("./_Symbol"),o=e("./_getRawTag"),a=e("./_objectToString"),s="[object Null]",c="[object Undefined]",l=i?i.toStringTag:void 0;t.exports=n},{"./_Symbol":49,"./_getRawTag":171,"./_objectToString":211}],89:[function(e,t,r){function n(e,t){return null!=e&&o.call(e,t)}var i=Object.prototype,o=i.hasOwnProperty;t.exports=n},{}],90:[function(e,t,r){function n(e,t){return null!=e&&t in Object(e)}t.exports=n},{}],91:[function(e,t,r){function n(e,t,r){return t===t?a(e,t,r):i(e,o,r)}var i=e("./_baseFindIndex"),o=e("./_baseIsNaN"),a=e("./_strictIndexOf");t.exports=n},{"./_baseFindIndex":81,"./_baseIsNaN":98,"./_strictIndexOf":226}],92:[function(e,t,r){function n(e,t,r,n){for(var i=r-1,o=e.length;++i<o;)if(n(e[i],t))return i;return-1}t.exports=n},{}],93:[function(e,t,r){function n(e,t,r){for(var n=r?a:o,d=e[0].length,p=e.length,f=p,h=Array(p),m=1/0,g=[];f--;){var v=e[f];f&&t&&(v=s(v,c(t))),m=u(v.length,m),h[f]=!r&&(t||d>=120&&v.length>=120)?new i(f&&v):void 0}v=e[0];var y=-1,b=h[0];e:for(;++y<d&&g.length<m;){var S=v[y],_=t?t(S):S;if(S=r||0!==S?S:0,!(b?l(b,_):n(g,_,r))){for(f=p;--f;){var w=h[f];if(!(w?l(w,_):n(e[f],_,r)))continue e}b&&b.push(_),g.push(S)}}return g}var i=e("./_SetCache"),o=e("./_arrayIncludes"),a=e("./_arrayIncludesWith"),s=e("./_arrayMap"),c=e("./_baseUnary"),l=e("./_cacheHas"),u=Math.min;t.exports=n},{"./_SetCache":47,"./_arrayIncludes":58,"./_arrayIncludesWith":59,"./_arrayMap":61,"./_baseUnary":127,"./_cacheHas":132}],94:[function(e,t,r){function n(e){return o(e)&&i(e)==a}var i=e("./_baseGetTag"),o=e("./isObjectLike"),a="[object Arguments]";t.exports=n},{"./_baseGetTag":88,"./isObjectLike":274}],95:[function(e,t,r){function n(e,t,r,a,s){return e===t||(null==e||null==t||!o(e)&&!o(t)?e!==e&&t!==t:i(e,t,r,a,n,s))}var i=e("./_baseIsEqualDeep"),o=e("./isObjectLike");t.exports=n},{"./_baseIsEqualDeep":96,"./isObjectLike":274}],96:[function(e,t,r){function n(e,t,r,n,g,y){var b=l(e),S=l(t),_=b?h:c(e),w=S?h:c(t);_=_==f?m:_,w=w==f?m:w;var E=_==m,T=w==m,O=_==w;if(O&&u(e)){if(!u(t))return!1;b=!0,E=!1}if(O&&!E)return y||(y=new i),b||d(e)?o(e,t,r,n,g,y):a(e,t,_,r,n,g,y);if(!(r&p)){var I=E&&v.call(e,"__wrapped__"),P=T&&v.call(t,"__wrapped__");if(I||P){var R=I?e.value():e,C=P?t.value():t;return y||(y=new i),g(R,C,r,n,y)}}return!!O&&(y||(y=new i),s(e,t,r,n,g,y))}var i=e("./_Stack"),o=e("./_equalArrays"),a=e("./_equalByTag"),s=e("./_equalObjects"),c=e("./_getTag"),l=e("./isArray"),u=e("./isBuffer"),d=e("./isTypedArray"),p=1,f="[object Arguments]",h="[object Array]",m="[object Object]",g=Object.prototype,v=g.hasOwnProperty;t.exports=n},{"./_Stack":48,"./_equalArrays":161,"./_equalByTag":162,"./_equalObjects":163,"./_getTag":174,"./isArray":264,"./isBuffer":267,"./isTypedArray":279}],97:[function(e,t,r){function n(e,t,r,n){var c=r.length,l=c,u=!n;if(null==e)return!l;for(e=Object(e);c--;){var d=r[c];if(u&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++c<l;){d=r[c];var p=d[0],f=e[p],h=d[1];if(u&&d[2]){if(void 0===f&&!(p in e))return!1}else{var m=new i;if(n)var g=n(f,h,p,e,t,m);if(!(void 0===g?o(h,f,a|s,n,m):g))return!1}}return!0}var i=e("./_Stack"),o=e("./_baseIsEqual"),a=1,s=2;t.exports=n},{"./_Stack":48,"./_baseIsEqual":95}],98:[function(e,t,r){function n(e){return e!==e}t.exports=n},{}],99:[function(e,t,r){function n(e){if(!a(e)||o(e))return!1;var t=i(e)?h:l;return t.test(s(e))}var i=e("./isFunction"),o=e("./_isMasked"),a=e("./isObject"),s=e("./_toSource"),c=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,u=Function.prototype,d=Object.prototype,p=u.toString,f=d.hasOwnProperty,h=RegExp("^"+p.call(f).replace(c,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=n},{"./_isMasked":191,"./_toSource":231,"./isFunction":270,"./isObject":273}],100:[function(e,t,r){function n(e){return o(e)&&i(e)==a}var i=e("./_baseGetTag"),o=e("./isObjectLike"),a="[object RegExp]";t.exports=n},{"./_baseGetTag":88,"./isObjectLike":274}],101:[function(e,t,r){function n(e){return a(e)&&o(e.length)&&!!j[i(e)]}var i=e("./_baseGetTag"),o=e("./isLength"),a=e("./isObjectLike"),s="[object Arguments]",c="[object Array]",l="[object Boolean]",u="[object Date]",d="[object Error]",p="[object Function]",f="[object Map]",h="[object Number]",m="[object Object]",g="[object RegExp]",v="[object Set]",y="[object String]",b="[object WeakMap]",S="[object ArrayBuffer]",_="[object DataView]",w="[object Float32Array]",E="[object Float64Array]",T="[object Int8Array]",O="[object Int16Array]",I="[object Int32Array]",P="[object Uint8Array]",R="[object Uint8ClampedArray]",C="[object Uint16Array]",A="[object Uint32Array]",j={};j[w]=j[E]=j[T]=j[O]=j[I]=j[P]=j[R]=j[C]=j[A]=!0,j[s]=j[c]=j[S]=j[l]=j[_]=j[u]=j[d]=j[p]=j[f]=j[h]=j[m]=j[g]=j[v]=j[y]=j[b]=!1,t.exports=n},{"./_baseGetTag":88,"./isLength":271,"./isObjectLike":274}],102:[function(e,t,r){function n(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?s(e)?o(e[0],e[1]):i(e):c(e)}var i=e("./_baseMatches"),o=e("./_baseMatchesProperty"),a=e("./identity"),s=e("./isArray"),c=e("./property");t.exports=n},{"./_baseMatches":107,"./_baseMatchesProperty":108,"./identity":259,"./isArray":264,"./property":296}],103:[function(e,t,r){function n(e){if(!i(e))return o(e);var t=[];for(var r in Object(e))s.call(e,r)&&"constructor"!=r&&t.push(r);return t}var i=e("./_isPrototype"),o=e("./_nativeKeys"),a=Object.prototype,s=a.hasOwnProperty;t.exports=n},{"./_isPrototype":192,"./_nativeKeys":208}],104:[function(e,t,r){function n(e){if(!i(e))return a(e);var t=o(e),r=[];for(var n in e)("constructor"!=n||!t&&c.call(e,n))&&r.push(n);return r}var i=e("./isObject"),o=e("./_isPrototype"),a=e("./_nativeKeysIn"),s=Object.prototype,c=s.hasOwnProperty;t.exports=n},{"./_isPrototype":192,"./_nativeKeysIn":209,"./isObject":273}],105:[function(e,t,r){function n(e,t){return e<t}t.exports=n},{}],106:[function(e,t,r){function n(e,t){var r=-1,n=o(e)?Array(e.length):[];return i(e,function(e,i,o){n[++r]=t(e,i,o)}),n}var i=e("./_baseEach"),o=e("./isArrayLike");t.exports=n},{"./_baseEach":78,"./isArrayLike":265}],107:[function(e,t,r){function n(e){var t=o(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(r){return r===e||i(r,e,t)}}var i=e("./_baseIsMatch"),o=e("./_getMatchData"),a=e("./_matchesStrictComparable");t.exports=n},{"./_baseIsMatch":97,"./_getMatchData":168,"./_matchesStrictComparable":205}],108:[function(e,t,r){function n(e,t){return s(e)&&c(t)?l(u(e),t):function(r){var n=o(r,e);return void 0===n&&n===t?a(r,e):i(t,n,d|p)}}var i=e("./_baseIsEqual"),o=e("./get"),a=e("./hasIn"),s=e("./_isKey"),c=e("./_isStrictComparable"),l=e("./_matchesStrictComparable"),u=e("./_toKey"),d=1,p=2;t.exports=n},{"./_baseIsEqual":95,"./_isKey":189,"./_isStrictComparable":193,"./_matchesStrictComparable":205,"./_toKey":230,"./get":255,"./hasIn":258}],109:[function(e,t,r){function n(e,t,r,u,d){e!==t&&a(t,function(a,l){if(c(a))d||(d=new i),s(e,t,l,r,n,u,d);else{var p=u?u(e[l],a,l+"",e,t,d):void 0;void 0===p&&(p=a),o(e,l,p)}},l)}var i=e("./_Stack"),o=e("./_assignMergeValue"),a=e("./_baseFor"),s=e("./_baseMergeDeep"),c=e("./isObject"),l=e("./keysIn");t.exports=n},{"./_Stack":48,"./_assignMergeValue":67,"./_baseFor":84,"./_baseMergeDeep":110,"./isObject":273,"./keysIn":282}],110:[function(e,t,r){function n(e,t,r,n,y,b,S){var _=e[r],w=t[r],E=S.get(w);if(E)return void i(e,r,E);var T=b?b(_,w,r+"",e,t,S):void 0,O=void 0===T;if(O){var I=u(w),P=!I&&p(w),R=!I&&!P&&g(w);T=w,I||P||R?u(_)?T=_:d(_)?T=s(_):P?(O=!1,T=o(w,!0)):R?(O=!1,T=a(w,!0)):T=[]:m(w)||l(w)?(T=_,l(_)?T=v(_):(!h(_)||n&&f(_))&&(T=c(w))):O=!1}O&&(S.set(w,T),y(T,w,n,b,S),S.delete(w)),i(e,r,T)}var i=e("./_assignMergeValue"),o=e("./_cloneBuffer"),a=e("./_cloneTypedArray"),s=e("./_copyArray"),c=e("./_initCloneObject"),l=e("./isArguments"),u=e("./isArray"),d=e("./isArrayLikeObject"),p=e("./isBuffer"),f=e("./isFunction"),h=e("./isObject"),m=e("./isPlainObject"),g=e("./isTypedArray"),v=e("./toPlainObject");t.exports=n},{"./_assignMergeValue":67,"./_cloneBuffer":139,"./_cloneTypedArray":145,"./_copyArray":148,"./_initCloneObject":185,"./isArguments":263,"./isArray":264,"./isArrayLikeObject":266,"./isBuffer":267,"./isFunction":270,"./isObject":273,"./isPlainObject":275,"./isTypedArray":279,"./toPlainObject":315}],111:[function(e,t,r){function n(e,t,r){var n=-1;t=i(t.length?t:[u],c(o));var d=a(e,function(e,r,o){var a=i(t,function(t){return t(e)});return{criteria:a,index:++n,value:e}});return s(d,function(e,t){return l(e,t,r)})}var i=e("./_arrayMap"),o=e("./_baseIteratee"),a=e("./_baseMap"),s=e("./_baseSortBy"),c=e("./_baseUnary"),l=e("./_compareMultiple"),u=e("./identity");t.exports=n},{"./_arrayMap":61,"./_baseIteratee":102,"./_baseMap":106,"./_baseSortBy":123,"./_baseUnary":127,"./_compareMultiple":147,"./identity":259}],112:[function(e,t,r){function n(e,t,r){for(var n=-1,s=t.length,c={};++n<s;){var l=t[n],u=i(e,l);r(u,l)&&o(c,a(l,e),u)}return c}var i=e("./_baseGet"),o=e("./_baseSet"),a=e("./_castPath");t.exports=n},{"./_baseGet":86,"./_baseSet":119,"./_castPath":135}],113:[function(e,t,r){function n(e){return function(t){return null==t?void 0:t[e]}}t.exports=n},{}],114:[function(e,t,r){function n(e){return function(t){return i(t,e)}}var i=e("./_baseGet");t.exports=n},{"./_baseGet":86}],115:[function(e,t,r){function n(e,t,r,n){var l=n?a:o,d=-1,p=t.length,f=e;for(e===t&&(t=c(t)),r&&(f=i(e,s(r)));++d<p;)for(var h=0,m=t[d],g=r?r(m):m;(h=l(f,g,h,n))>-1;)f!==e&&u.call(f,h,1),u.call(e,h,1);return e}var i=e("./_arrayMap"),o=e("./_baseIndexOf"),a=e("./_baseIndexOfWith"),s=e("./_baseUnary"),c=e("./_copyArray"),l=Array.prototype,u=l.splice;t.exports=n},{"./_arrayMap":61,"./_baseIndexOf":91,"./_baseIndexOfWith":92,"./_baseUnary":127,"./_copyArray":148}],116:[function(e,t,r){function n(e,t){for(var r=e?t.length:0,n=r-1;r--;){var a=t[r];if(r==n||a!==c){var c=a;o(a)?s.call(e,a,1):i(e,a)}}return e}var i=e("./_baseUnset"),o=e("./_isIndex"),a=Array.prototype,s=a.splice;t.exports=n},{"./_baseUnset":129,"./_isIndex":187}],117:[function(e,t,r){function n(e,t,r,n){for(var a=-1,s=o(i((t-e)/(r||1)),0),c=Array(s);s--;)c[n?s:++a]=e,e+=r;return c}var i=Math.ceil,o=Math.max;t.exports=n},{}],118:[function(e,t,r){function n(e,t){return a(o(e,t,i),e+"")}var i=e("./identity"),o=e("./_overRest"),a=e("./_setToString");t.exports=n},{"./_overRest":213,"./_setToString":219,"./identity":259}],119:[function(e,t,r){function n(e,t,r,n){if(!s(e))return e;t=o(t,e);for(var l=-1,u=t.length,d=u-1,p=e;null!=p&&++l<u;){var f=c(t[l]),h=r;if(l!=d){var m=p[f];h=n?n(m,f,p):void 0,void 0===h&&(h=s(m)?m:a(t[l+1])?[]:{})}i(p,f,h),p=p[f]}return e}var i=e("./_assignValue"),o=e("./_castPath"),a=e("./_isIndex"),s=e("./isObject"),c=e("./_toKey");t.exports=n},{"./_assignValue":68,"./_castPath":135,"./_isIndex":187,"./_toKey":230,"./isObject":273}],120:[function(e,t,r){var n=e("./constant"),i=e("./_defineProperty"),o=e("./identity"),a=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:o;t.exports=a},{"./_defineProperty":160,"./constant":238,"./identity":259}],121:[function(e,t,r){function n(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),r=r>i?i:r,r<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(i);++n<i;)o[n]=e[n+t];return o}t.exports=n},{}],122:[function(e,t,r){function n(e,t){var r;return i(e,function(e,n,i){return r=t(e,n,i),!r}),!!r}var i=e("./_baseEach");t.exports=n},{"./_baseEach":78}],123:[function(e,t,r){function n(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}t.exports=n},{}],124:[function(e,t,r){function n(e,t){for(var r,n=-1,i=e.length;++n<i;){var o=t(e[n]);void 0!==o&&(r=void 0===r?o:r+o)}return r}t.exports=n},{}],125:[function(e,t,r){function n(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}t.exports=n},{}],126:[function(e,t,r){function n(e){if("string"==typeof e)return e;if(a(e))return o(e,n)+"";if(s(e))return u?u.call(e):"";var t=e+"";return"0"==t&&1/e==-c?"-0":t}var i=e("./_Symbol"),o=e("./_arrayMap"),a=e("./isArray"),s=e("./isSymbol"),c=1/0,l=i?i.prototype:void 0,u=l?l.toString:void 0;t.exports=n},{"./_Symbol":49,"./_arrayMap":61,"./isArray":264,"./isSymbol":278}],127:[function(e,t,r){function n(e){return function(t){return e(t)}}t.exports=n},{}],128:[function(e,t,r){function n(e,t,r){var n=-1,d=o,p=e.length,f=!0,h=[],m=h;if(r)f=!1,d=a;else if(p>=u){var g=t?null:c(e);if(g)return l(g);f=!1,d=s,m=new i}else m=t?[]:h;e:for(;++n<p;){var v=e[n],y=t?t(v):v;if(v=r||0!==v?v:0,f&&y===y){for(var b=m.length;b--;)if(m[b]===y)continue e;t&&m.push(y),h.push(v)}else d(m,y,r)||(m!==h&&m.push(y),h.push(v))}return h}var i=e("./_SetCache"),o=e("./_arrayIncludes"),a=e("./_arrayIncludesWith"),s=e("./_cacheHas"),c=e("./_createSet"),l=e("./_setToArray"),u=200;t.exports=n},{"./_SetCache":47,"./_arrayIncludes":58,"./_arrayIncludesWith":59,"./_cacheHas":132,"./_createSet":159,"./_setToArray":218}],129:[function(e,t,r){function n(e,t){return t=i(t,e),e=a(e,t),null==e||delete e[s(o(t))]}var i=e("./_castPath"),o=e("./last"),a=e("./_parent"),s=e("./_toKey");t.exports=n},{"./_castPath":135,"./_parent":214,"./_toKey":230,"./last":283}],130:[function(e,t,r){function n(e,t){return i(t,function(t){return e[t]})}var i=e("./_arrayMap");t.exports=n},{"./_arrayMap":61}],131:[function(e,t,r){function n(e,t,r){for(var n=-1,i=e.length,o=t.length,a={};++n<i;){var s=n<o?t[n]:void 0;r(a,e[n],s)}return a}t.exports=n},{}],132:[function(e,t,r){function n(e,t){return e.has(t)}t.exports=n},{}],133:[function(e,t,r){function n(e){return i(e)?e:[]}var i=e("./isArrayLikeObject");t.exports=n},{"./isArrayLikeObject":266}],134:[function(e,t,r){function n(e){return"function"==typeof e?e:i}var i=e("./identity");t.exports=n},{"./identity":259}],135:[function(e,t,r){function n(e,t){return i(e)?e:o(e,t)?[e]:a(s(e))}var i=e("./isArray"),o=e("./_isKey"),a=e("./_stringToPath"),s=e("./toString");t.exports=n},{"./_isKey":189,"./_stringToPath":229,"./isArray":264,"./toString":316}],136:[function(e,t,r){function n(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:i(e,t,r)}var i=e("./_baseSlice");t.exports=n},{"./_baseSlice":121}],137:[function(e,t,r){function n(e,t){for(var r=e.length;r--&&i(t,e[r],0)>-1;);return r}var i=e("./_baseIndexOf");t.exports=n},{"./_baseIndexOf":91}],138:[function(e,t,r){function n(e){var t=new e.constructor(e.byteLength);return new i(t).set(new i(e)),t}var i=e("./_Uint8Array");t.exports=n},{"./_Uint8Array":50}],139:[function(e,t,r){function n(e,t){if(t)return e.slice();var r=e.length,n=l?l(r):new e.constructor(r);return e.copy(n),n}var i=e("./_root"),o="object"==typeof r&&r&&!r.nodeType&&r,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o,c=s?i.Buffer:void 0,l=c?c.allocUnsafe:void 0;t.exports=n},{"./_root":215}],140:[function(e,t,r){function n(e,t){var r=t?i(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var i=e("./_cloneArrayBuffer");t.exports=n},{"./_cloneArrayBuffer":138}],141:[function(e,t,r){function n(e,t,r){var n=t?r(a(e),s):a(e);return o(n,i,new e.constructor)}var i=e("./_addMapEntry"),o=e("./_arrayReduce"),a=e("./_mapToArray"),s=1;t.exports=n},{"./_addMapEntry":52,"./_arrayReduce":63,"./_mapToArray":204}],142:[function(e,t,r){function n(e){var t=new e.constructor(e.source,i.exec(e));return t.lastIndex=e.lastIndex,t}var i=/\w*$/;t.exports=n},{}],143:[function(e,t,r){function n(e,t,r){var n=t?r(a(e),s):a(e);return o(n,i,new e.constructor)}var i=e("./_addSetEntry"),o=e("./_arrayReduce"),a=e("./_setToArray"),s=1;t.exports=n},{"./_addSetEntry":53,"./_arrayReduce":63,"./_setToArray":218}],144:[function(e,t,r){function n(e){return a?Object(a.call(e)):{}}var i=e("./_Symbol"),o=i?i.prototype:void 0,a=o?o.valueOf:void 0;t.exports=n},{"./_Symbol":49}],145:[function(e,t,r){function n(e,t){var r=t?i(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var i=e("./_cloneArrayBuffer");t.exports=n},{"./_cloneArrayBuffer":138}],146:[function(e,t,r){function n(e,t){if(e!==t){var r=void 0!==e,n=null===e,o=e===e,a=i(e),s=void 0!==t,c=null===t,l=t===t,u=i(t);if(!c&&!u&&!a&&e>t||a&&s&&l&&!c&&!u||n&&s&&l||!r&&l||!o)return 1;if(!n&&!a&&!u&&e<t||u&&r&&o&&!n&&!a||c&&r&&o||!s&&o||!l)return-1}return 0}var i=e("./isSymbol");t.exports=n},{"./isSymbol":278}],147:[function(e,t,r){function n(e,t,r){for(var n=-1,o=e.criteria,a=t.criteria,s=o.length,c=r.length;++n<s;){var l=i(o[n],a[n]);if(l){if(n>=c)return l;var u=r[n];return l*("desc"==u?-1:1)}}return e.index-t.index}var i=e("./_compareAscending");t.exports=n},{"./_compareAscending":146}],148:[function(e,t,r){function n(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}t.exports=n},{}],149:[function(e,t,r){function n(e,t,r,n){var a=!r;r||(r={});for(var s=-1,c=t.length;++s<c;){var l=t[s],u=n?n(r[l],e[l],l,r,e):void 0;void 0===u&&(u=e[l]),a?o(r,l,u):i(r,l,u)}return r}var i=e("./_assignValue"),o=e("./_baseAssignValue");t.exports=n},{"./_assignValue":68,"./_baseAssignValue":73}],150:[function(e,t,r){function n(e,t){return i(e,o(e),t)}var i=e("./_copyObject"),o=e("./_getSymbols");t.exports=n},{"./_copyObject":149,"./_getSymbols":172}],151:[function(e,t,r){function n(e,t){return i(e,o(e),t)}var i=e("./_copyObject"),o=e("./_getSymbolsIn");t.exports=n},{"./_copyObject":149,"./_getSymbolsIn":173}],152:[function(e,t,r){var n=e("./_root"),i=n["__core-js_shared__"];t.exports=i},{"./_root":215}],153:[function(e,t,r){function n(e,t){return function(r,n){var c=s(r)?i:o,l=t?t():{};return c(r,e,a(n,2),l)}}var i=e("./_arrayAggregator"),o=e("./_baseAggregator"),a=e("./_baseIteratee"),s=e("./isArray");t.exports=n},{"./_arrayAggregator":55,"./_baseAggregator":70,"./_baseIteratee":102,"./isArray":264}],154:[function(e,t,r){function n(e){return i(function(t,r){var n=-1,i=r.length,a=i>1?r[i-1]:void 0,s=i>2?r[2]:void 0;for(a=e.length>3&&"function"==typeof a?(i--,a):void 0,s&&o(r[0],r[1],s)&&(a=i<3?void 0:a,i=1),t=Object(t);++n<i;){var c=r[n];c&&e(t,c,n,a)}return t})}var i=e("./_baseRest"),o=e("./_isIterateeCall");t.exports=n},{"./_baseRest":118,"./_isIterateeCall":188}],155:[function(e,t,r){function n(e,t){return function(r,n){if(null==r)return r;if(!i(r))return e(r,n);for(var o=r.length,a=t?o:-1,s=Object(r);(t?a--:++a<o)&&n(s[a],a,s)!==!1;);return r}}var i=e("./isArrayLike");t.exports=n},{"./isArrayLike":265}],156:[function(e,t,r){function n(e){return function(t,r,n){for(var i=-1,o=Object(t),a=n(t),s=a.length;s--;){var c=a[e?s:++i];if(r(o[c],c,o)===!1)break}return t}}t.exports=n},{}],157:[function(e,t,r){function n(e){return function(t,r,n){var s=Object(t);if(!o(t)){var c=i(r,3);t=a(t),r=function(e){return c(s[e],e,s)}}var l=e(t,r,n);return l>-1?s[c?t[l]:l]:void 0}}var i=e("./_baseIteratee"),o=e("./isArrayLike"),a=e("./keys");t.exports=n},{"./_baseIteratee":102,"./isArrayLike":265,"./keys":281}],158:[function(e,t,r){function n(e){return function(t,r,n){return n&&"number"!=typeof n&&o(t,r,n)&&(r=n=void 0),t=a(t),void 0===r?(r=t,t=0):r=a(r),n=void 0===n?t<r?1:-1:a(n),i(t,r,n,e)}}var i=e("./_baseRange"),o=e("./_isIterateeCall"),a=e("./toFinite");t.exports=n},{"./_baseRange":117,"./_isIterateeCall":188,"./toFinite":312}],159:[function(e,t,r){var n=e("./_Set"),i=e("./noop"),o=e("./_setToArray"),a=1/0,s=n&&1/o(new n([,-0]))[1]==a?function(e){return new n(e)}:i;t.exports=s},{"./_Set":46,"./_setToArray":218,"./noop":290}],160:[function(e,t,r){var n=e("./_getNative"),i=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();t.exports=i},{"./_getNative":169}],161:[function(e,t,r){function n(e,t,r,n,l,u){var d=r&s,p=e.length,f=t.length;if(p!=f&&!(d&&f>p))return!1;var h=u.get(e);if(h&&u.get(t))return h==t;var m=-1,g=!0,v=r&c?new i:void 0;for(u.set(e,t),u.set(t,e);++m<p;){var y=e[m],b=t[m];if(n)var S=d?n(b,y,m,t,e,u):n(y,b,m,e,t,u);if(void 0!==S){if(S)continue;g=!1;break}if(v){if(!o(t,function(e,t){if(!a(v,t)&&(y===e||l(y,e,r,n,u)))return v.push(t)})){g=!1;break}}else if(y!==b&&!l(y,b,r,n,u)){g=!1;break}}return u.delete(e),u.delete(t),g}var i=e("./_SetCache"),o=e("./_arraySome"),a=e("./_cacheHas"),s=1,c=2;t.exports=n},{"./_SetCache":47,"./_arraySome":64,"./_cacheHas":132}],162:[function(e,t,r){function n(e,t,r,n,i,E,O){switch(r){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case _:return!(e.byteLength!=t.byteLength||!E(new o(e),new o(t)));case p:case f:case g:return a(+e,+t);case h:return e.name==t.name&&e.message==t.message;case v:case b:return e==t+"";case m:var I=c;case y:var P=n&u;if(I||(I=l),e.size!=t.size&&!P)return!1;var R=O.get(e);if(R)return R==t;n|=d,O.set(e,t);var C=s(I(e),I(t),n,i,E,O);return O.delete(e),C;case S:if(T)return T.call(e)==T.call(t)}return!1}var i=e("./_Symbol"),o=e("./_Uint8Array"),a=e("./eq"),s=e("./_equalArrays"),c=e("./_mapToArray"),l=e("./_setToArray"),u=1,d=2,p="[object Boolean]",f="[object Date]",h="[object Error]",m="[object Map]",g="[object Number]",v="[object RegExp]",y="[object Set]",b="[object String]",S="[object Symbol]",_="[object ArrayBuffer]",w="[object DataView]",E=i?i.prototype:void 0,T=E?E.valueOf:void 0;t.exports=n},{"./_Symbol":49,"./_Uint8Array":50,"./_equalArrays":161,"./_mapToArray":204,"./_setToArray":218,"./eq":243}],163:[function(e,t,r){function n(e,t,r,n,a,c){var l=r&o,u=i(e),d=u.length,p=i(t),f=p.length;if(d!=f&&!l)return!1;for(var h=d;h--;){var m=u[h];if(!(l?m in t:s.call(t,m)))return!1}var g=c.get(e);if(g&&c.get(t))return g==t;var v=!0;c.set(e,t),c.set(t,e);for(var y=l;++h<d;){m=u[h];var b=e[m],S=t[m];if(n)var _=l?n(S,b,m,t,e,c):n(b,S,m,e,t,c);if(!(void 0===_?b===S||a(b,S,r,n,c):_)){
v=!1;break}y||(y="constructor"==m)}if(v&&!y){var w=e.constructor,E=t.constructor;w!=E&&"constructor"in e&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof E&&E instanceof E)&&(v=!1)}return c.delete(e),c.delete(t),v}var i=e("./_getAllKeys"),o=1,a=Object.prototype,s=a.hasOwnProperty;t.exports=n},{"./_getAllKeys":165}],164:[function(e,t,r){(function(e){var r="object"==typeof e&&e&&e.Object===Object&&e;t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],165:[function(e,t,r){function n(e){return i(e,a,o)}var i=e("./_baseGetAllKeys"),o=e("./_getSymbols"),a=e("./keys");t.exports=n},{"./_baseGetAllKeys":87,"./_getSymbols":172,"./keys":281}],166:[function(e,t,r){function n(e){return i(e,a,o)}var i=e("./_baseGetAllKeys"),o=e("./_getSymbolsIn"),a=e("./keysIn");t.exports=n},{"./_baseGetAllKeys":87,"./_getSymbolsIn":173,"./keysIn":282}],167:[function(e,t,r){function n(e,t){var r=e.__data__;return i(t)?r["string"==typeof t?"string":"hash"]:r.map}var i=e("./_isKeyable");t.exports=n},{"./_isKeyable":190}],168:[function(e,t,r){function n(e){for(var t=o(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,i(a)]}return t}var i=e("./_isStrictComparable"),o=e("./keys");t.exports=n},{"./_isStrictComparable":193,"./keys":281}],169:[function(e,t,r){function n(e,t){var r=o(e,t);return i(r)?r:void 0}var i=e("./_baseIsNative"),o=e("./_getValue");t.exports=n},{"./_baseIsNative":99,"./_getValue":175}],170:[function(e,t,r){var n=e("./_overArg"),i=n(Object.getPrototypeOf,Object);t.exports=i},{"./_overArg":212}],171:[function(e,t,r){function n(e){var t=a.call(e,c),r=e[c];try{e[c]=void 0;var n=!0}catch(e){}var i=s.call(e);return n&&(t?e[c]=r:delete e[c]),i}var i=e("./_Symbol"),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,c=i?i.toStringTag:void 0;t.exports=n},{"./_Symbol":49}],172:[function(e,t,r){var n=e("./_arrayFilter"),i=e("./stubArray"),o=Object.prototype,a=o.propertyIsEnumerable,s=Object.getOwnPropertySymbols,c=s?function(e){return null==e?[]:(e=Object(e),n(s(e),function(t){return a.call(e,t)}))}:i;t.exports=c},{"./_arrayFilter":57,"./stubArray":306}],173:[function(e,t,r){var n=e("./_arrayPush"),i=e("./_getPrototype"),o=e("./_getSymbols"),a=e("./stubArray"),s=Object.getOwnPropertySymbols,c=s?function(e){for(var t=[];e;)n(t,o(e)),e=i(e);return t}:a;t.exports=c},{"./_arrayPush":62,"./_getPrototype":170,"./_getSymbols":172,"./stubArray":306}],174:[function(e,t,r){var n=e("./_DataView"),i=e("./_Map"),o=e("./_Promise"),a=e("./_Set"),s=e("./_WeakMap"),c=e("./_baseGetTag"),l=e("./_toSource"),u="[object Map]",d="[object Object]",p="[object Promise]",f="[object Set]",h="[object WeakMap]",m="[object DataView]",g=l(n),v=l(i),y=l(o),b=l(a),S=l(s),_=c;(n&&_(new n(new ArrayBuffer(1)))!=m||i&&_(new i)!=u||o&&_(o.resolve())!=p||a&&_(new a)!=f||s&&_(new s)!=h)&&(_=function(e){var t=c(e),r=t==d?e.constructor:void 0,n=r?l(r):"";if(n)switch(n){case g:return m;case v:return u;case y:return p;case b:return f;case S:return h}return t}),t.exports=_},{"./_DataView":40,"./_Map":43,"./_Promise":45,"./_Set":46,"./_WeakMap":51,"./_baseGetTag":88,"./_toSource":231}],175:[function(e,t,r){function n(e,t){return null==e?void 0:e[t]}t.exports=n},{}],176:[function(e,t,r){function n(e,t,r){t=i(t,e);for(var n=-1,u=t.length,d=!1;++n<u;){var p=l(t[n]);if(!(d=null!=e&&r(e,p)))break;e=e[p]}return d||++n!=u?d:(u=null==e?0:e.length,!!u&&c(u)&&s(p,u)&&(a(e)||o(e)))}var i=e("./_castPath"),o=e("./isArguments"),a=e("./isArray"),s=e("./_isIndex"),c=e("./isLength"),l=e("./_toKey");t.exports=n},{"./_castPath":135,"./_isIndex":187,"./_toKey":230,"./isArguments":263,"./isArray":264,"./isLength":271}],177:[function(e,t,r){function n(e){return d.test(e)}var i="\\ud800-\\udfff",o="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",c=o+a+s,l="\\ufe0e\\ufe0f",u="\\u200d",d=RegExp("["+u+i+c+l+"]");t.exports=n},{}],178:[function(e,t,r){function n(){this.__data__=i?i(null):{},this.size=0}var i=e("./_nativeCreate");t.exports=n},{"./_nativeCreate":207}],179:[function(e,t,r){function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}t.exports=n},{}],180:[function(e,t,r){function n(e){var t=this.__data__;if(i){var r=t[e];return r===o?void 0:r}return s.call(t,e)?t[e]:void 0}var i=e("./_nativeCreate"),o="__lodash_hash_undefined__",a=Object.prototype,s=a.hasOwnProperty;t.exports=n},{"./_nativeCreate":207}],181:[function(e,t,r){function n(e){var t=this.__data__;return i?void 0!==t[e]:a.call(t,e)}var i=e("./_nativeCreate"),o=Object.prototype,a=o.hasOwnProperty;t.exports=n},{"./_nativeCreate":207}],182:[function(e,t,r){function n(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=i&&void 0===t?o:t,this}var i=e("./_nativeCreate"),o="__lodash_hash_undefined__";t.exports=n},{"./_nativeCreate":207}],183:[function(e,t,r){function n(e){var t=e.length,r=e.constructor(t);return t&&"string"==typeof e[0]&&o.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var i=Object.prototype,o=i.hasOwnProperty;t.exports=n},{}],184:[function(e,t,r){function n(e,t,r,n){var A=e.constructor;switch(t){case b:return i(e);case d:case p:return new A((+e));case S:return o(e,n);case _:case w:case E:case T:case O:case I:case P:case R:case C:return u(e,n);case f:return a(e,n,r);case h:case v:return new A(e);case m:return s(e);case g:return c(e,n,r);case y:return l(e)}}var i=e("./_cloneArrayBuffer"),o=e("./_cloneDataView"),a=e("./_cloneMap"),s=e("./_cloneRegExp"),c=e("./_cloneSet"),l=e("./_cloneSymbol"),u=e("./_cloneTypedArray"),d="[object Boolean]",p="[object Date]",f="[object Map]",h="[object Number]",m="[object RegExp]",g="[object Set]",v="[object String]",y="[object Symbol]",b="[object ArrayBuffer]",S="[object DataView]",_="[object Float32Array]",w="[object Float64Array]",E="[object Int8Array]",T="[object Int16Array]",O="[object Int32Array]",I="[object Uint8Array]",P="[object Uint8ClampedArray]",R="[object Uint16Array]",C="[object Uint32Array]";t.exports=n},{"./_cloneArrayBuffer":138,"./_cloneDataView":140,"./_cloneMap":141,"./_cloneRegExp":142,"./_cloneSet":143,"./_cloneSymbol":144,"./_cloneTypedArray":145}],185:[function(e,t,r){function n(e){return"function"!=typeof e.constructor||a(e)?{}:i(o(e))}var i=e("./_baseCreate"),o=e("./_getPrototype"),a=e("./_isPrototype");t.exports=n},{"./_baseCreate":76,"./_getPrototype":170,"./_isPrototype":192}],186:[function(e,t,r){function n(e){return a(e)||o(e)||!!(s&&e&&e[s])}var i=e("./_Symbol"),o=e("./isArguments"),a=e("./isArray"),s=i?i.isConcatSpreadable:void 0;t.exports=n},{"./_Symbol":49,"./isArguments":263,"./isArray":264}],187:[function(e,t,r){function n(e,t){return t=null==t?i:t,!!t&&("number"==typeof e||o.test(e))&&e>-1&&e%1==0&&e<t}var i=9007199254740991,o=/^(?:0|[1-9]\d*)$/;t.exports=n},{}],188:[function(e,t,r){function n(e,t,r){if(!s(r))return!1;var n=typeof t;return!!("number"==n?o(r)&&a(t,r.length):"string"==n&&t in r)&&i(r[t],e)}var i=e("./eq"),o=e("./isArrayLike"),a=e("./_isIndex"),s=e("./isObject");t.exports=n},{"./_isIndex":187,"./eq":243,"./isArrayLike":265,"./isObject":273}],189:[function(e,t,r){function n(e,t){if(i(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!o(e))||(s.test(e)||!a.test(e)||null!=t&&e in Object(t))}var i=e("./isArray"),o=e("./isSymbol"),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=n},{"./isArray":264,"./isSymbol":278}],190:[function(e,t,r){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}t.exports=n},{}],191:[function(e,t,r){function n(e){return!!o&&o in e}var i=e("./_coreJsData"),o=function(){var e=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();t.exports=n},{"./_coreJsData":152}],192:[function(e,t,r){function n(e){var t=e&&e.constructor,r="function"==typeof t&&t.prototype||i;return e===r}var i=Object.prototype;t.exports=n},{}],193:[function(e,t,r){function n(e){return e===e&&!i(e)}var i=e("./isObject");t.exports=n},{"./isObject":273}],194:[function(e,t,r){function n(){this.__data__=[],this.size=0}t.exports=n},{}],195:[function(e,t,r){function n(e){var t=this.__data__,r=i(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():a.call(t,r,1),--this.size,!0}var i=e("./_assocIndexOf"),o=Array.prototype,a=o.splice;t.exports=n},{"./_assocIndexOf":69}],196:[function(e,t,r){function n(e){var t=this.__data__,r=i(t,e);return r<0?void 0:t[r][1]}var i=e("./_assocIndexOf");t.exports=n},{"./_assocIndexOf":69}],197:[function(e,t,r){function n(e){return i(this.__data__,e)>-1}var i=e("./_assocIndexOf");t.exports=n},{"./_assocIndexOf":69}],198:[function(e,t,r){function n(e,t){var r=this.__data__,n=i(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var i=e("./_assocIndexOf");t.exports=n},{"./_assocIndexOf":69}],199:[function(e,t,r){function n(){this.size=0,this.__data__={hash:new i,map:new(a||o),string:new i}}var i=e("./_Hash"),o=e("./_ListCache"),a=e("./_Map");t.exports=n},{"./_Hash":41,"./_ListCache":42,"./_Map":43}],200:[function(e,t,r){function n(e){var t=i(this,e).delete(e);return this.size-=t?1:0,t}var i=e("./_getMapData");t.exports=n},{"./_getMapData":167}],201:[function(e,t,r){function n(e){return i(this,e).get(e)}var i=e("./_getMapData");t.exports=n},{"./_getMapData":167}],202:[function(e,t,r){function n(e){return i(this,e).has(e)}var i=e("./_getMapData");t.exports=n},{"./_getMapData":167}],203:[function(e,t,r){function n(e,t){var r=i(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var i=e("./_getMapData");t.exports=n},{"./_getMapData":167}],204:[function(e,t,r){function n(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}t.exports=n},{}],205:[function(e,t,r){function n(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}t.exports=n},{}],206:[function(e,t,r){function n(e){var t=i(e,function(e){return r.size===o&&r.clear(),e}),r=t.cache;return t}var i=e("./memoize"),o=500;t.exports=n},{"./memoize":286}],207:[function(e,t,r){var n=e("./_getNative"),i=n(Object,"create");t.exports=i},{"./_getNative":169}],208:[function(e,t,r){var n=e("./_overArg"),i=n(Object.keys,Object);t.exports=i},{"./_overArg":212}],209:[function(e,t,r){function n(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}t.exports=n},{}],210:[function(e,t,r){var n=e("./_freeGlobal"),i="object"==typeof r&&r&&!r.nodeType&&r,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i,s=a&&n.process,c=function(){try{return s&&s.binding&&s.binding("util")}catch(e){}}();t.exports=c},{"./_freeGlobal":164}],211:[function(e,t,r){function n(e){return o.call(e)}var i=Object.prototype,o=i.toString;t.exports=n},{}],212:[function(e,t,r){function n(e,t){return function(r){return e(t(r))}}t.exports=n},{}],213:[function(e,t,r){function n(e,t,r){return t=o(void 0===t?e.length-1:t,0),function(){for(var n=arguments,a=-1,s=o(n.length-t,0),c=Array(s);++a<s;)c[a]=n[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=n[a];return l[t]=r(c),i(e,this,l)}}var i=e("./_apply"),o=Math.max;t.exports=n},{"./_apply":54}],214:[function(e,t,r){function n(e,t){return t.length<2?e:i(e,o(t,0,-1))}var i=e("./_baseGet"),o=e("./_baseSlice");t.exports=n},{"./_baseGet":86,"./_baseSlice":121}],215:[function(e,t,r){var n=e("./_freeGlobal"),i="object"==typeof self&&self&&self.Object===Object&&self,o=n||i||Function("return this")();t.exports=o},{"./_freeGlobal":164}],216:[function(e,t,r){function n(e){return this.__data__.set(e,i),this}var i="__lodash_hash_undefined__";t.exports=n},{}],217:[function(e,t,r){function n(e){return this.__data__.has(e)}t.exports=n},{}],218:[function(e,t,r){function n(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}t.exports=n},{}],219:[function(e,t,r){var n=e("./_baseSetToString"),i=e("./_shortOut"),o=i(n);t.exports=o},{"./_baseSetToString":120,"./_shortOut":220}],220:[function(e,t,r){function n(e){var t=0,r=0;return function(){var n=a(),s=o-(n-r);if(r=n,s>0){if(++t>=i)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var i=800,o=16,a=Date.now;t.exports=n},{}],221:[function(e,t,r){function n(){this.__data__=new i,this.size=0}var i=e("./_ListCache");t.exports=n},{"./_ListCache":42}],222:[function(e,t,r){function n(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}t.exports=n},{}],223:[function(e,t,r){function n(e){return this.__data__.get(e)}t.exports=n},{}],224:[function(e,t,r){function n(e){return this.__data__.has(e)}t.exports=n},{}],225:[function(e,t,r){function n(e,t){var r=this.__data__;if(r instanceof i){var n=r.__data__;if(!o||n.length<s-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new a(n)}return r.set(e,t),this.size=r.size,this}var i=e("./_ListCache"),o=e("./_Map"),a=e("./_MapCache"),s=200;t.exports=n},{"./_ListCache":42,"./_Map":43,"./_MapCache":44}],226:[function(e,t,r){function n(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}t.exports=n},{}],227:[function(e,t,r){function n(e){return o(e)?a(e):i(e)}var i=e("./_asciiSize"),o=e("./_hasUnicode"),a=e("./_unicodeSize");t.exports=n},{"./_asciiSize":65,"./_hasUnicode":177,"./_unicodeSize":232}],228:[function(e,t,r){function n(e){return o(e)?a(e):i(e)}var i=e("./_asciiToArray"),o=e("./_hasUnicode"),a=e("./_unicodeToArray");t.exports=n},{"./_asciiToArray":66,"./_hasUnicode":177,"./_unicodeToArray":233}],229:[function(e,t,r){var n=e("./_memoizeCapped"),i=/^\./,o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,s=n(function(e){var t=[];return i.test(e)&&t.push(""),e.replace(o,function(e,r,n,i){t.push(n?i.replace(a,"$1"):r||e)}),t});t.exports=s},{"./_memoizeCapped":206}],230:[function(e,t,r){function n(e){if("string"==typeof e||i(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}var i=e("./isSymbol"),o=1/0;t.exports=n},{"./isSymbol":278}],231:[function(e,t,r){function n(e){if(null!=e){try{return o.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var i=Function.prototype,o=i.toString;t.exports=n},{}],232:[function(e,t,r){function n(e){for(var t=E.lastIndex=0;E.test(e);)++t;return t}var i="\\ud800-\\udfff",o="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",c=o+a+s,l="\\ufe0e\\ufe0f",u="["+i+"]",d="["+c+"]",p="\\ud83c[\\udffb-\\udfff]",f="(?:"+d+"|"+p+")",h="[^"+i+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",v="\\u200d",y=f+"?",b="["+l+"]?",S="(?:"+v+"(?:"+[h,m,g].join("|")+")"+b+y+")*",_=b+y+S,w="(?:"+[h+d+"?",d,m,g,u].join("|")+")",E=RegExp(p+"(?="+p+")|"+w+_,"g");t.exports=n},{}],233:[function(e,t,r){function n(e){return e.match(E)||[]}var i="\\ud800-\\udfff",o="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",c=o+a+s,l="\\ufe0e\\ufe0f",u="["+i+"]",d="["+c+"]",p="\\ud83c[\\udffb-\\udfff]",f="(?:"+d+"|"+p+")",h="[^"+i+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",v="\\u200d",y=f+"?",b="["+l+"]?",S="(?:"+v+"(?:"+[h,m,g].join("|")+")"+b+y+")*",_=b+y+S,w="(?:"+[h+d+"?",d,m,g,u].join("|")+")",E=RegExp(p+"(?="+p+")|"+w+_,"g");t.exports=n},{}],234:[function(e,t,r){var n=e("./_assignValue"),i=e("./_copyObject"),o=e("./_createAssigner"),a=e("./isArrayLike"),s=e("./_isPrototype"),c=e("./keys"),l=Object.prototype,u=l.hasOwnProperty,d=o(function(e,t){if(s(t)||a(t))return void i(t,c(t),e);for(var r in t)u.call(t,r)&&n(e,r,t[r])});t.exports=d},{"./_assignValue":68,"./_copyObject":149,"./_createAssigner":154,"./_isPrototype":192,"./isArrayLike":265,"./keys":281}],235:[function(e,t,r){var n=e("./_copyObject"),i=e("./_createAssigner"),o=e("./keysIn"),a=i(function(e,t){n(t,o(t),e)});t.exports=a},{"./_copyObject":149,"./_createAssigner":154,"./keysIn":282}],236:[function(e,t,r){function n(e){return i(e,o)}var i=e("./_baseClone"),o=4;t.exports=n},{"./_baseClone":75}],237:[function(e,t,r){function n(e){return i(e,o|a)}var i=e("./_baseClone"),o=1,a=4;t.exports=n},{"./_baseClone":75}],238:[function(e,t,r){function n(e){return function(){return e}}t.exports=n},{}],239:[function(e,t,r){function n(e,t,r){function n(t){var r=y,n=b;return y=b=void 0,T=t,_=e.apply(n,r)}function u(e){return T=e,w=setTimeout(f,t),O?n(e):_}function d(e){var r=e-E,n=e-T,i=t-r;return I?l(i,S-n):i}function p(e){var r=e-E,n=e-T;return void 0===E||r>=t||r<0||I&&n>=S}function f(){var e=o();return p(e)?h(e):void(w=setTimeout(f,d(e)))}function h(e){return w=void 0,P&&y?n(e):(y=b=void 0,_)}function m(){void 0!==w&&clearTimeout(w),T=0,y=E=b=w=void 0}function g(){return void 0===w?_:h(o())}function v(){var e=o(),r=p(e);if(y=arguments,b=this,E=e,r){if(void 0===w)return u(E);if(I)return w=setTimeout(f,t),n(E)}return void 0===w&&(w=setTimeout(f,t)),_}var y,b,S,_,w,E,T=0,O=!1,I=!1,P=!0;if("function"!=typeof e)throw new TypeError(s);return t=a(t)||0,i(r)&&(O=!!r.leading,I="maxWait"in r,S=I?c(a(r.maxWait)||0,t):S,P="trailing"in r?!!r.trailing:P),v.cancel=m,v.flush=g,v}var i=e("./isObject"),o=e("./now"),a=e("./toNumber"),s="Expected a function",c=Math.max,l=Math.min;t.exports=n},{"./isObject":273,"./now":291,"./toNumber":314}],240:[function(e,t,r){var n=e("./_baseDifference"),i=e("./_baseFlatten"),o=e("./_baseRest"),a=e("./isArrayLikeObject"),s=o(function(e,t){return a(e)?n(e,i(t,1,a,!0)):[]});t.exports=s},{"./_baseDifference":77,"./_baseFlatten":83,"./_baseRest":118,"./isArrayLikeObject":266}],241:[function(e,t,r){var n=e("./_baseDifference"),i=e("./_baseFlatten"),o=e("./_baseRest"),a=e("./isArrayLikeObject"),s=e("./last"),c=o(function(e,t){var r=s(t);return a(r)&&(r=void 0),a(e)?n(e,i(t,1,a,!0),void 0,r):[]});t.exports=c},{"./_baseDifference":77,"./_baseFlatten":83,"./_baseRest":118,"./isArrayLikeObject":266,"./last":283}],242:[function(e,t,r){function n(e,t,r){e=s(e),t=o(t);var n=e.length;r=void 0===r?n:i(a(r),0,n);var c=r;return r-=t.length,r>=0&&e.slice(r,c)==t}var i=e("./_baseClamp"),o=e("./_baseToString"),a=e("./toInteger"),s=e("./toString");t.exports=n},{"./_baseClamp":74,"./_baseToString":126,"./toInteger":313,"./toString":316}],243:[function(e,t,r){function n(e,t){return e===t||e!==e&&t!==t}t.exports=n},{}],244:[function(e,t,r){function n(e){return e=i(e),e&&a.test(e)?e.replace(o,"\\$&"):e}var i=e("./toString"),o=/[\\^$.*+?()[\]{}|]/g,a=RegExp(o.source);t.exports=n},{"./toString":316}],245:[function(e,t,r){t.exports=e("./assignIn")},{"./assignIn":235}],246:[function(e,t,r){function n(e,t){var r=s(e)?i:o;return r(e,a(t,3))}var i=e("./_arrayFilter"),o=e("./_baseFilter"),a=e("./_baseIteratee"),s=e("./isArray");t.exports=n},{"./_arrayFilter":57,"./_baseFilter":80,"./_baseIteratee":102,"./isArray":264}],247:[function(e,t,r){var n=e("./_createFind"),i=e("./findIndex"),o=n(i);t.exports=o},{"./_createFind":157,"./findIndex":248}],248:[function(e,t,r){function n(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var c=null==r?0:a(r);return c<0&&(c=s(n+c,0)),i(e,o(t,3),c)}var i=e("./_baseFindIndex"),o=e("./_baseIteratee"),a=e("./toInteger"),s=Math.max;t.exports=n},{"./_baseFindIndex":81,"./_baseIteratee":102,"./toInteger":313}],249:[function(e,t,r){function n(e,t){return i(e,a(t,3),o)}var i=e("./_baseFindKey"),o=e("./_baseForOwn"),a=e("./_baseIteratee");t.exports=n},{"./_baseFindKey":82,"./_baseForOwn":85,"./_baseIteratee":102}],250:[function(e,t,r){function n(e,t){return i(o(e,t),1)}var i=e("./_baseFlatten"),o=e("./map");t.exports=n},{"./_baseFlatten":83,"./map":284}],251:[function(e,t,r){function n(e){var t=null==e?0:e.length;return t?i(e,1):[]}var i=e("./_baseFlatten");t.exports=n},{"./_baseFlatten":83}],252:[function(e,t,r){function n(e){var t=null==e?0:e.length;return t?i(e,o):[]}var i=e("./_baseFlatten"),o=1/0;t.exports=n},{"./_baseFlatten":83}],253:[function(e,t,r){function n(e,t){var r=s(e)?i:o;return r(e,a(t))}var i=e("./_arrayEach"),o=e("./_baseEach"),a=e("./_castFunction"),s=e("./isArray");t.exports=n},{"./_arrayEach":56,"./_baseEach":78,"./_castFunction":134,"./isArray":264}],254:[function(e,t,r){function n(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var i=e[t];n[i[0]]=i[1]}return n}t.exports=n},{}],255:[function(e,t,r){function n(e,t,r){var n=null==e?void 0:i(e,t);return void 0===n?r:n}var i=e("./_baseGet");t.exports=n},{"./_baseGet":86}],256:[function(e,t,r){var n=e("./_baseAssignValue"),i=e("./_createAggregator"),o=Object.prototype,a=o.hasOwnProperty,s=i(function(e,t,r){a.call(e,r)?e[r].push(t):n(e,r,[t])});t.exports=s},{"./_baseAssignValue":73,"./_createAggregator":153}],257:[function(e,t,r){function n(e,t){return null!=e&&o(e,t,i)}var i=e("./_baseHas"),o=e("./_hasPath");t.exports=n},{"./_baseHas":89,"./_hasPath":176}],258:[function(e,t,r){function n(e,t){return null!=e&&o(e,t,i)}var i=e("./_baseHasIn"),o=e("./_hasPath");t.exports=n},{"./_baseHasIn":90,"./_hasPath":176}],259:[function(e,t,r){function n(e){return e}t.exports=n},{}],260:[function(e,t,r){function n(e,t,r,n){e=o(e)?e:c(e),r=r&&!n?s(r):0;var u=e.length;return r<0&&(r=l(u+r,0)),a(e)?r<=u&&e.indexOf(t,r)>-1:!!u&&i(e,t,r)>-1}var i=e("./_baseIndexOf"),o=e("./isArrayLike"),a=e("./isString"),s=e("./toInteger"),c=e("./values"),l=Math.max;t.exports=n},{"./_baseIndexOf":91,"./isArrayLike":265,"./isString":277,"./toInteger":313,"./values":323}],261:[function(e,t,r){function n(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var s=null==r?0:o(r);return s<0&&(s=a(n+s,0)),i(e,t,s)}var i=e("./_baseIndexOf"),o=e("./toInteger"),a=Math.max;t.exports=n},{"./_baseIndexOf":91,"./toInteger":313}],262:[function(e,t,r){var n=e("./_arrayMap"),i=e("./_baseIntersection"),o=e("./_baseRest"),a=e("./_castArrayLikeObject"),s=o(function(e){var t=n(e,a);return t.length&&t[0]===e[0]?i(t):[]});t.exports=s},{"./_arrayMap":61,"./_baseIntersection":93,"./_baseRest":118,"./_castArrayLikeObject":133}],263:[function(e,t,r){var n=e("./_baseIsArguments"),i=e("./isObjectLike"),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,c=n(function(){return arguments}())?n:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};t.exports=c},{"./_baseIsArguments":94,"./isObjectLike":274}],264:[function(e,t,r){var n=Array.isArray;t.exports=n},{}],265:[function(e,t,r){function n(e){return null!=e&&o(e.length)&&!i(e)}var i=e("./isFunction"),o=e("./isLength");t.exports=n},{"./isFunction":270,"./isLength":271}],266:[function(e,t,r){function n(e){return o(e)&&i(e)}var i=e("./isArrayLike"),o=e("./isObjectLike");t.exports=n},{"./isArrayLike":265,"./isObjectLike":274}],267:[function(e,t,r){var n=e("./_root"),i=e("./stubFalse"),o="object"==typeof r&&r&&!r.nodeType&&r,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o,c=s?n.Buffer:void 0,l=c?c.isBuffer:void 0,u=l||i;t.exports=u},{"./_root":215,"./stubFalse":307}],268:[function(e,t,r){function n(e){if(null==e)return!0;if(c(e)&&(s(e)||"string"==typeof e||"function"==typeof e.splice||l(e)||d(e)||a(e)))return!e.length;var t=o(e);if(t==p||t==f)return!e.size;if(u(e))return!i(e).length;for(var r in e)if(m.call(e,r))return!1;return!0}var i=e("./_baseKeys"),o=e("./_getTag"),a=e("./isArguments"),s=e("./isArray"),c=e("./isArrayLike"),l=e("./isBuffer"),u=e("./_isPrototype"),d=e("./isTypedArray"),p="[object Map]",f="[object Set]",h=Object.prototype,m=h.hasOwnProperty;t.exports=n},{"./_baseKeys":103,"./_getTag":174,"./_isPrototype":192,"./isArguments":263,"./isArray":264,"./isArrayLike":265,"./isBuffer":267,"./isTypedArray":279}],269:[function(e,t,r){function n(e,t){return i(e,t)}var i=e("./_baseIsEqual");t.exports=n},{"./_baseIsEqual":95}],270:[function(e,t,r){function n(e){if(!o(e))return!1;var t=i(e);return t==s||t==c||t==a||t==l}var i=e("./_baseGetTag"),o=e("./isObject"),a="[object AsyncFunction]",s="[object Function]",c="[object GeneratorFunction]",l="[object Proxy]";t.exports=n},{"./_baseGetTag":88,"./isObject":273}],271:[function(e,t,r){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}var i=9007199254740991;t.exports=n},{}],272:[function(e,t,r){function n(e,t){return e===t||i(e,t,o(t))}var i=e("./_baseIsMatch"),o=e("./_getMatchData");t.exports=n},{"./_baseIsMatch":97,"./_getMatchData":168}],273:[function(e,t,r){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}t.exports=n},{}],274:[function(e,t,r){function n(e){return null!=e&&"object"==typeof e}t.exports=n},{}],275:[function(e,t,r){function n(e){if(!a(e)||i(e)!=s)return!1;var t=o(e);if(null===t)return!0;var r=d.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&u.call(r)==p}var i=e("./_baseGetTag"),o=e("./_getPrototype"),a=e("./isObjectLike"),s="[object Object]",c=Function.prototype,l=Object.prototype,u=c.toString,d=l.hasOwnProperty,p=u.call(Object);t.exports=n},{"./_baseGetTag":88,"./_getPrototype":170,"./isObjectLike":274}],276:[function(e,t,r){var n=e("./_baseIsRegExp"),i=e("./_baseUnary"),o=e("./_nodeUtil"),a=o&&o.isRegExp,s=a?i(a):n;t.exports=s},{"./_baseIsRegExp":100,"./_baseUnary":127,"./_nodeUtil":210}],277:[function(e,t,r){function n(e){return"string"==typeof e||!o(e)&&a(e)&&i(e)==s}var i=e("./_baseGetTag"),o=e("./isArray"),a=e("./isObjectLike"),s="[object String]";t.exports=n},{"./_baseGetTag":88,"./isArray":264,"./isObjectLike":274}],278:[function(e,t,r){function n(e){return"symbol"==typeof e||o(e)&&i(e)==a}var i=e("./_baseGetTag"),o=e("./isObjectLike"),a="[object Symbol]";t.exports=n},{"./_baseGetTag":88,"./isObjectLike":274}],279:[function(e,t,r){var n=e("./_baseIsTypedArray"),i=e("./_baseUnary"),o=e("./_nodeUtil"),a=o&&o.isTypedArray,s=a?i(a):n;t.exports=s},{"./_baseIsTypedArray":101,"./_baseUnary":127,"./_nodeUtil":210}],280:[function(e,t,r){function n(e,t){return null==e?"":o.call(e,t)}var i=Array.prototype,o=i.join;t.exports=n},{}],281:[function(e,t,r){function n(e){return a(e)?i(e):o(e)}var i=e("./_arrayLikeKeys"),o=e("./_baseKeys"),a=e("./isArrayLike");t.exports=n},{"./_arrayLikeKeys":60,"./_baseKeys":103,"./isArrayLike":265}],282:[function(e,t,r){function n(e){return a(e)?i(e,!0):o(e)}var i=e("./_arrayLikeKeys"),o=e("./_baseKeysIn"),a=e("./isArrayLike");t.exports=n},{"./_arrayLikeKeys":60,"./_baseKeysIn":104,"./isArrayLike":265}],283:[function(e,t,r){function n(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}t.exports=n},{}],284:[function(e,t,r){function n(e,t){var r=s(e)?i:a;return r(e,o(t,3))}var i=e("./_arrayMap"),o=e("./_baseIteratee"),a=e("./_baseMap"),s=e("./isArray");t.exports=n},{"./_arrayMap":61,"./_baseIteratee":102,"./_baseMap":106,"./isArray":264}],285:[function(e,t,r){function n(e,t){var r={};return t=a(t,3),o(e,function(e,n,o){i(r,n,t(e,n,o))}),r}var i=e("./_baseAssignValue"),o=e("./_baseForOwn"),a=e("./_baseIteratee");t.exports=n},{"./_baseAssignValue":73,"./_baseForOwn":85,"./_baseIteratee":102}],286:[function(e,t,r){function n(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(o);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(n.Cache||i),r}var i=e("./_MapCache"),o="Expected a function";n.Cache=i,t.exports=n},{"./_MapCache":44}],287:[function(e,t,r){var n=e("./_baseMerge"),i=e("./_createAssigner"),o=i(function(e,t,r){n(e,t,r)});t.exports=o},{"./_baseMerge":109,"./_createAssigner":154}],288:[function(e,t,r){function n(e){return e&&e.length?i(e,a,o):void 0}var i=e("./_baseExtremum"),o=e("./_baseLt"),a=e("./identity");t.exports=n},{"./_baseExtremum":79,"./_baseLt":105,"./identity":259}],289:[function(e,t,r){function n(e){if("function"!=typeof e)throw new TypeError(i);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}var i="Expected a function";t.exports=n},{}],290:[function(e,t,r){function n(){}t.exports=n},{}],291:[function(e,t,r){var n=e("./_root"),i=function(){return n.Date.now()};t.exports=i},{"./_root":215}],292:[function(e,t,r){function n(e,t){return a(e,o(i(t)))}var i=e("./_baseIteratee"),o=e("./negate"),a=e("./pickBy");t.exports=n},{"./_baseIteratee":102,"./negate":289,"./pickBy":295}],293:[function(e,t,r){function n(e,t,r,n){return null==e?[]:(o(t)||(t=null==t?[]:[t]),r=n?void 0:r,o(r)||(r=null==r?[]:[r]),i(e,t,r))}var i=e("./_baseOrderBy"),o=e("./isArray");t.exports=n},{"./_baseOrderBy":111,"./isArray":264}],294:[function(e,t,r){var n=e("./_createAggregator"),i=n(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]});t.exports=i},{"./_createAggregator":153}],295:[function(e,t,r){function n(e,t){if(null==e)return{};var r=i(s(e),function(e){return[e]});return t=o(t),a(e,r,function(e,r){return t(e,r[0])})}var i=e("./_arrayMap"),o=e("./_baseIteratee"),a=e("./_basePickBy"),s=e("./_getAllKeysIn");t.exports=n},{"./_arrayMap":61,"./_baseIteratee":102,"./_basePickBy":112,"./_getAllKeysIn":166}],296:[function(e,t,r){function n(e){return a(e)?i(s(e)):o(e)}var i=e("./_baseProperty"),o=e("./_basePropertyDeep"),a=e("./_isKey"),s=e("./_toKey");t.exports=n},{"./_baseProperty":113,"./_basePropertyDeep":114,"./_isKey":189,"./_toKey":230}],297:[function(e,t,r){function n(e,t,r){return e&&e.length&&t&&t.length?i(e,t,void 0,r):e}var i=e("./_basePullAll");t.exports=n},{"./_basePullAll":115}],298:[function(e,t,r){var n=e("./_createRange"),i=n();t.exports=i},{"./_createRange":158}],299:[function(e,t,r){function n(e,t){var r=[];if(!e||!e.length)return r;var n=-1,a=[],s=e.length;for(t=i(t,3);++n<s;){var c=e[n];t(c,n,e)&&(r.push(c),a.push(n))}return o(e,a),r}var i=e("./_baseIteratee"),o=e("./_basePullAt");t.exports=n},{"./_baseIteratee":102,"./_basePullAt":116}],300:[function(e,t,r){function n(){var e=arguments,t=i(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var i=e("./toString");t.exports=n},{"./toString":316}],301:[function(e,t,r){function n(e,t,r){return null==e?e:i(e,t,r)}var i=e("./_baseSet");t.exports=n},{"./_baseSet":119}],302:[function(e,t,r){function n(e,t,r){var n=null==e?0:e.length;return n?(r&&"number"!=typeof r&&o(e,t,r)?(t=0,r=n):(t=null==t?0:a(t),r=void 0===r?n:a(r)),i(e,t,r)):[]}var i=e("./_baseSlice"),o=e("./_isIterateeCall"),a=e("./toInteger");t.exports=n},{"./_baseSlice":121,"./_isIterateeCall":188,"./toInteger":313}],303:[function(e,t,r){function n(e,t,r){var n=s(e)?i:a;return r&&c(e,t,r)&&(t=void 0),n(e,o(t,3))}var i=e("./_arraySome"),o=e("./_baseIteratee"),a=e("./_baseSome"),s=e("./isArray"),c=e("./_isIterateeCall");t.exports=n},{"./_arraySome":64,"./_baseIteratee":102,"./_baseSome":122,"./_isIterateeCall":188,"./isArray":264}],304:[function(e,t,r){var n=e("./_baseFlatten"),i=e("./_baseOrderBy"),o=e("./_baseRest"),a=e("./_isIterateeCall"),s=o(function(e,t){if(null==e)return[];var r=t.length;return r>1&&a(e,t[0],t[1])?t=[]:r>2&&a(t[0],t[1],t[2])&&(t=[t[0]]),i(e,n(t,1),[])});t.exports=s},{"./_baseFlatten":83,"./_baseOrderBy":111,"./_baseRest":118,"./_isIterateeCall":188}],305:[function(e,t,r){function n(e,t,r){return r&&"number"!=typeof r&&s(e,t,r)&&(t=r=void 0),(r=void 0===r?d:r>>>0)?(e=u(e),e&&("string"==typeof t||null!=t&&!c(t))&&(t=i(t),!t&&a(e))?o(l(e),0,r):e.split(t,r)):[]}var i=e("./_baseToString"),o=e("./_castSlice"),a=e("./_hasUnicode"),s=e("./_isIterateeCall"),c=e("./isRegExp"),l=e("./_stringToArray"),u=e("./toString"),d=4294967295;t.exports=n},{"./_baseToString":126,"./_castSlice":136,"./_hasUnicode":177,"./_isIterateeCall":188,"./_stringToArray":228,"./isRegExp":276,"./toString":316}],306:[function(e,t,r){function n(){return[]}t.exports=n},{}],307:[function(e,t,r){function n(){return!1}t.exports=n},{}],308:[function(e,t,r){function n(e,t){return e&&e.length?o(e,i(t,2)):0}var i=e("./_baseIteratee"),o=e("./_baseSum");t.exports=n},{"./_baseIteratee":102,"./_baseSum":124}],309:[function(e,t,r){function n(e){var t=null==e?0:e.length;return t?i(e,1,t):[]}var i=e("./_baseSlice");t.exports=n},{"./_baseSlice":121}],310:[function(e,t,r){function n(e,t,r){return e&&e.length?(t=r||void 0===t?1:o(t),i(e,0,t<0?0:t)):[]}var i=e("./_baseSlice"),o=e("./toInteger");t.exports=n},{"./_baseSlice":121,"./toInteger":313}],311:[function(e,t,r){function n(e,t,r){var n=!0,s=!0;if("function"!=typeof e)throw new TypeError(a);return o(r)&&(n="leading"in r?!!r.leading:n,
s="trailing"in r?!!r.trailing:s),i(e,t,{leading:n,maxWait:t,trailing:s})}var i=e("./debounce"),o=e("./isObject"),a="Expected a function";t.exports=n},{"./debounce":239,"./isObject":273}],312:[function(e,t,r){function n(e){if(!e)return 0===e?e:0;if(e=i(e),e===o||e===-o){var t=e<0?-1:1;return t*a}return e===e?e:0}var i=e("./toNumber"),o=1/0,a=1.7976931348623157e308;t.exports=n},{"./toNumber":314}],313:[function(e,t,r){function n(e){var t=i(e),r=t%1;return t===t?r?t-r:t:0}var i=e("./toFinite");t.exports=n},{"./toFinite":312}],314:[function(e,t,r){function n(e){if("number"==typeof e)return e;if(o(e))return a;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var r=l.test(e);return r||u.test(e)?d(e.slice(2),r?2:8):c.test(e)?a:+e}var i=e("./isObject"),o=e("./isSymbol"),a=NaN,s=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,d=parseInt;t.exports=n},{"./isObject":273,"./isSymbol":278}],315:[function(e,t,r){function n(e){return i(e,o(e))}var i=e("./_copyObject"),o=e("./keysIn");t.exports=n},{"./_copyObject":149,"./keysIn":282}],316:[function(e,t,r){function n(e){return null==e?"":i(e)}var i=e("./_baseToString");t.exports=n},{"./_baseToString":126}],317:[function(e,t,r){function n(e,t,r){if(e=c(e),e&&(r||void 0===t))return e.replace(l,"");if(!e||!(t=i(t)))return e;var n=s(e),u=a(n,s(t))+1;return o(n,0,u).join("")}var i=e("./_baseToString"),o=e("./_castSlice"),a=e("./_charsEndIndex"),s=e("./_stringToArray"),c=e("./toString"),l=/\s+$/;t.exports=n},{"./_baseToString":126,"./_castSlice":136,"./_charsEndIndex":137,"./_stringToArray":228,"./toString":316}],318:[function(e,t,r){function n(e,t){var r=f,n=h;if(s(t)){var g="separator"in t?t.separator:g;r="length"in t?d(t.length):r,n="omission"in t?i(t.omission):n}e=p(e);var v=e.length;if(a(e)){var y=u(e);v=y.length}if(r>=v)return e;var b=r-l(n);if(b<1)return n;var S=y?o(y,0,b).join(""):e.slice(0,b);if(void 0===g)return S+n;if(y&&(b+=S.length-b),c(g)){if(e.slice(b).search(g)){var _,w=S;for(g.global||(g=RegExp(g.source,p(m.exec(g))+"g")),g.lastIndex=0;_=g.exec(w);)var E=_.index;S=S.slice(0,void 0===E?b:E)}}else if(e.indexOf(i(g),b)!=b){var T=S.lastIndexOf(g);T>-1&&(S=S.slice(0,T))}return S+n}var i=e("./_baseToString"),o=e("./_castSlice"),a=e("./_hasUnicode"),s=e("./isObject"),c=e("./isRegExp"),l=e("./_stringSize"),u=e("./_stringToArray"),d=e("./toInteger"),p=e("./toString"),f=30,h="...",m=/\w*$/;t.exports=n},{"./_baseToString":126,"./_castSlice":136,"./_hasUnicode":177,"./_stringSize":227,"./_stringToArray":228,"./isObject":273,"./isRegExp":276,"./toInteger":313,"./toString":316}],319:[function(e,t,r){var n=e("./_baseFlatten"),i=e("./_baseRest"),o=e("./_baseUniq"),a=e("./isArrayLikeObject"),s=i(function(e){return o(n(e,1,a,!0))});t.exports=s},{"./_baseFlatten":83,"./_baseRest":118,"./_baseUniq":128,"./isArrayLikeObject":266}],320:[function(e,t,r){var n=e("./_baseFlatten"),i=e("./_baseIteratee"),o=e("./_baseRest"),a=e("./_baseUniq"),s=e("./isArrayLikeObject"),c=e("./last"),l=o(function(e){var t=c(e);return s(t)&&(t=void 0),a(n(e,1,s,!0),i(t,2))});t.exports=l},{"./_baseFlatten":83,"./_baseIteratee":102,"./_baseRest":118,"./_baseUniq":128,"./isArrayLikeObject":266,"./last":283}],321:[function(e,t,r){function n(e){return e&&e.length?i(e):[]}var i=e("./_baseUniq");t.exports=n},{"./_baseUniq":128}],322:[function(e,t,r){function n(e,t){return e&&e.length?o(e,i(t,2)):[]}var i=e("./_baseIteratee"),o=e("./_baseUniq");t.exports=n},{"./_baseIteratee":102,"./_baseUniq":128}],323:[function(e,t,r){function n(e){return null==e?[]:i(e,o(e))}var i=e("./_baseValues"),o=e("./keys");t.exports=n},{"./_baseValues":130,"./keys":281}],324:[function(e,t,r){function n(e,t){return o(e||[],t||[],i)}var i=e("./_assignValue"),o=e("./_baseZipObject");t.exports=n},{"./_assignValue":68,"./_baseZipObject":131}],325:[function(e,t,r){!function(){var r=e("crypt"),n=e("charenc").utf8,i=e("is-buffer"),o=e("charenc").bin,a=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?o.stringToBytes(e):n.stringToBytes(e):i(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var s=r.bytesToWords(e),c=8*e.length,l=1732584193,u=-271733879,d=-1732584194,p=271733878,f=0;f<s.length;f++)s[f]=16711935&(s[f]<<8|s[f]>>>24)|4278255360&(s[f]<<24|s[f]>>>8);s[c>>>5]|=128<<c%32,s[(c+64>>>9<<4)+14]=c;for(var h=a._ff,m=a._gg,g=a._hh,v=a._ii,f=0;f<s.length;f+=16){var y=l,b=u,S=d,_=p;l=h(l,u,d,p,s[f+0],7,-680876936),p=h(p,l,u,d,s[f+1],12,-389564586),d=h(d,p,l,u,s[f+2],17,606105819),u=h(u,d,p,l,s[f+3],22,-1044525330),l=h(l,u,d,p,s[f+4],7,-176418897),p=h(p,l,u,d,s[f+5],12,1200080426),d=h(d,p,l,u,s[f+6],17,-1473231341),u=h(u,d,p,l,s[f+7],22,-45705983),l=h(l,u,d,p,s[f+8],7,1770035416),p=h(p,l,u,d,s[f+9],12,-1958414417),d=h(d,p,l,u,s[f+10],17,-42063),u=h(u,d,p,l,s[f+11],22,-1990404162),l=h(l,u,d,p,s[f+12],7,1804603682),p=h(p,l,u,d,s[f+13],12,-40341101),d=h(d,p,l,u,s[f+14],17,-1502002290),u=h(u,d,p,l,s[f+15],22,1236535329),l=m(l,u,d,p,s[f+1],5,-165796510),p=m(p,l,u,d,s[f+6],9,-1069501632),d=m(d,p,l,u,s[f+11],14,643717713),u=m(u,d,p,l,s[f+0],20,-373897302),l=m(l,u,d,p,s[f+5],5,-701558691),p=m(p,l,u,d,s[f+10],9,38016083),d=m(d,p,l,u,s[f+15],14,-660478335),u=m(u,d,p,l,s[f+4],20,-405537848),l=m(l,u,d,p,s[f+9],5,568446438),p=m(p,l,u,d,s[f+14],9,-1019803690),d=m(d,p,l,u,s[f+3],14,-187363961),u=m(u,d,p,l,s[f+8],20,1163531501),l=m(l,u,d,p,s[f+13],5,-1444681467),p=m(p,l,u,d,s[f+2],9,-51403784),d=m(d,p,l,u,s[f+7],14,1735328473),u=m(u,d,p,l,s[f+12],20,-1926607734),l=g(l,u,d,p,s[f+5],4,-378558),p=g(p,l,u,d,s[f+8],11,-2022574463),d=g(d,p,l,u,s[f+11],16,1839030562),u=g(u,d,p,l,s[f+14],23,-35309556),l=g(l,u,d,p,s[f+1],4,-1530992060),p=g(p,l,u,d,s[f+4],11,1272893353),d=g(d,p,l,u,s[f+7],16,-155497632),u=g(u,d,p,l,s[f+10],23,-1094730640),l=g(l,u,d,p,s[f+13],4,681279174),p=g(p,l,u,d,s[f+0],11,-358537222),d=g(d,p,l,u,s[f+3],16,-722521979),u=g(u,d,p,l,s[f+6],23,76029189),l=g(l,u,d,p,s[f+9],4,-640364487),p=g(p,l,u,d,s[f+12],11,-421815835),d=g(d,p,l,u,s[f+15],16,530742520),u=g(u,d,p,l,s[f+2],23,-995338651),l=v(l,u,d,p,s[f+0],6,-198630844),p=v(p,l,u,d,s[f+7],10,1126891415),d=v(d,p,l,u,s[f+14],15,-1416354905),u=v(u,d,p,l,s[f+5],21,-57434055),l=v(l,u,d,p,s[f+12],6,1700485571),p=v(p,l,u,d,s[f+3],10,-1894986606),d=v(d,p,l,u,s[f+10],15,-1051523),u=v(u,d,p,l,s[f+1],21,-2054922799),l=v(l,u,d,p,s[f+8],6,1873313359),p=v(p,l,u,d,s[f+15],10,-30611744),d=v(d,p,l,u,s[f+6],15,-1560198380),u=v(u,d,p,l,s[f+13],21,1309151649),l=v(l,u,d,p,s[f+4],6,-145523070),p=v(p,l,u,d,s[f+11],10,-1120210379),d=v(d,p,l,u,s[f+2],15,718787259),u=v(u,d,p,l,s[f+9],21,-343485551),l=l+y>>>0,u=u+b>>>0,d=d+S>>>0,p=p+_>>>0}return r.endian([l,u,d,p])};a._ff=function(e,t,r,n,i,o,a){var s=e+(t&r|~t&n)+(i>>>0)+a;return(s<<o|s>>>32-o)+t},a._gg=function(e,t,r,n,i,o,a){var s=e+(t&n|r&~n)+(i>>>0)+a;return(s<<o|s>>>32-o)+t},a._hh=function(e,t,r,n,i,o,a){var s=e+(t^r^n)+(i>>>0)+a;return(s<<o|s>>>32-o)+t},a._ii=function(e,t,r,n,i,o,a){var s=e+(r^(t|~n))+(i>>>0)+a;return(s<<o|s>>>32-o)+t},a._blocksize=16,a._digestsize=16,t.exports=function(e,t){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var n=r.wordsToBytes(a(e,t));return t&&t.asBytes?n:t&&t.asString?o.bytesToString(n):r.bytesToHex(n)}}()},{charenc:28,crypt:30,"is-buffer":37}],326:[function(e,t,r){!function(e,n){"object"==typeof r&&"undefined"!=typeof t?t.exports=n():"function"==typeof define&&define.amd?define(n):e.moment=n()}(this,function(){"use strict";function r(){return _n.apply(null,arguments)}function n(e){_n=e}function i(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function o(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function a(e){var t;for(t in e)return!1;return!0}function s(e){return void 0===e}function c(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function l(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function u(e,t){var r,n=[];for(r=0;r<e.length;++r)n.push(t(e[r],r));return n}function d(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function p(e,t){for(var r in t)d(t,r)&&(e[r]=t[r]);return d(t,"toString")&&(e.toString=t.toString),d(t,"valueOf")&&(e.valueOf=t.valueOf),e}function f(e,t,r,n){return St(e,t,r,n,!0).utc()}function h(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function m(e){return null==e._pf&&(e._pf=h()),e._pf}function g(e){if(null==e._isValid){var t=m(e),r=En.call(t.parsedDateParts,function(e){return null!=e}),n=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r);if(e._strict&&(n=n&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return n;e._isValid=n}return e._isValid}function v(e){var t=f(NaN);return null!=e?p(m(t),e):m(t).userInvalidated=!0,t}function y(e,t){var r,n,i;if(s(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),s(t._i)||(e._i=t._i),s(t._f)||(e._f=t._f),s(t._l)||(e._l=t._l),s(t._strict)||(e._strict=t._strict),s(t._tzm)||(e._tzm=t._tzm),s(t._isUTC)||(e._isUTC=t._isUTC),s(t._offset)||(e._offset=t._offset),s(t._pf)||(e._pf=m(t)),s(t._locale)||(e._locale=t._locale),Tn.length>0)for(r=0;r<Tn.length;r++)n=Tn[r],i=t[n],s(i)||(e[n]=i);return e}function b(e){y(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),On===!1&&(On=!0,r.updateOffset(this),On=!1)}function S(e){return e instanceof b||null!=e&&null!=e._isAMomentObject}function _(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function w(e){var t=+e,r=0;return 0!==t&&isFinite(t)&&(r=_(t)),r}function E(e,t,r){var n,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(n=0;n<i;n++)(r&&e[n]!==t[n]||!r&&w(e[n])!==w(t[n]))&&a++;return a+o}function T(e){r.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function O(e,t){var n=!0;return p(function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,e),n){for(var i,o=[],a=0;a<arguments.length;a++){if(i="","object"==typeof arguments[a]){i+="\n["+a+"] ";for(var s in arguments[0])i+=s+": "+arguments[0][s]+", ";i=i.slice(0,-2)}else i=arguments[a];o.push(i)}T(e+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)},t)}function I(e,t){null!=r.deprecationHandler&&r.deprecationHandler(e,t),In[e]||(T(t),In[e]=!0)}function P(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function R(e){var t,r;for(r in e)t=e[r],P(t)?this[r]=t:this["_"+r]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function C(e,t){var r,n=p({},e);for(r in t)d(t,r)&&(o(e[r])&&o(t[r])?(n[r]={},p(n[r],e[r]),p(n[r],t[r])):null!=t[r]?n[r]=t[r]:delete n[r]);for(r in e)d(e,r)&&!d(t,r)&&o(e[r])&&(n[r]=p({},n[r]));return n}function A(e){null!=e&&this.set(e)}function j(e,t,r){var n=this._calendar[e]||this._calendar.sameElse;return P(n)?n.call(t,r):n}function k(e){var t=this._longDateFormat[e],r=this._longDateFormat[e.toUpperCase()];return t||!r?t:(this._longDateFormat[e]=r.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function D(){return this._invalidDate}function $(e){return this._ordinal.replace("%d",e)}function M(e,t,r,n){var i=this._relativeTime[r];return P(i)?i(e,t,r,n):i.replace(/%d/i,e)}function x(e,t){var r=this._relativeTime[e>0?"future":"past"];return P(r)?r(t):r.replace(/%s/i,t)}function F(e,t){var r=e.toLowerCase();xn[r]=xn[r+"s"]=xn[t]=e}function L(e){return"string"==typeof e?xn[e]||xn[e.toLowerCase()]:void 0}function U(e){var t,r,n={};for(r in e)d(e,r)&&(t=L(r),t&&(n[t]=e[r]));return n}function B(e,t){Fn[e]=t}function N(e){var t=[];for(var r in e)t.push({unit:r,priority:Fn[r]});return t.sort(function(e,t){return e.priority-t.priority}),t}function q(e,t){return function(n){return null!=n?(V(this,e,n),r.updateOffset(this,t),this):H(this,e)}}function H(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function V(e,t,r){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](r)}function Y(e){return e=L(e),P(this[e])?this[e]():this}function z(e,t){if("object"==typeof e){e=U(e);for(var r=N(e),n=0;n<r.length;n++)this[r[n].unit](e[r[n].unit])}else if(e=L(e),P(this[e]))return this[e](t);return this}function G(e,t,r){var n=""+Math.abs(e),i=t-n.length,o=e>=0;return(o?r?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+n}function W(e,t,r,n){var i=n;"string"==typeof n&&(i=function(){return this[n]()}),e&&(Nn[e]=i),t&&(Nn[t[0]]=function(){return G(i.apply(this,arguments),t[1],t[2])}),r&&(Nn[r]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function Q(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function K(e){var t,r,n=e.match(Ln);for(t=0,r=n.length;t<r;t++)Nn[n[t]]?n[t]=Nn[n[t]]:n[t]=Q(n[t]);return function(t){var i,o="";for(i=0;i<r;i++)o+=P(n[i])?n[i].call(t,e):n[i];return o}}function X(e,t){return e.isValid()?(t=J(t,e.localeData()),Bn[t]=Bn[t]||K(t),Bn[t](e)):e.localeData().invalidDate()}function J(e,t){function r(e){return t.longDateFormat(e)||e}var n=5;for(Un.lastIndex=0;n>=0&&Un.test(e);)e=e.replace(Un,r),Un.lastIndex=0,n-=1;return e}function Z(e,t,r){oi[e]=P(t)?t:function(e,n){return e&&r?r:t}}function ee(e,t){return d(oi,e)?oi[e](t._strict,t._locale):new RegExp(te(e))}function te(e){return re(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,r,n,i){return t||r||n||i}))}function re(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ne(e,t){var r,n=t;for("string"==typeof e&&(e=[e]),c(t)&&(n=function(e,r){r[t]=w(e)}),r=0;r<e.length;r++)ai[e[r]]=n}function ie(e,t){ne(e,function(e,r,n,i){n._w=n._w||{},t(e,n._w,n,i)})}function oe(e,t,r){null!=t&&d(ai,e)&&ai[e](t,r._a,r,e)}function ae(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function se(e,t){return e?i(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||vi).test(t)?"format":"standalone"][e.month()]:i(this._months)?this._months:this._months.standalone}function ce(e,t){return e?i(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[vi.test(t)?"format":"standalone"][e.month()]:i(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function le(e,t,r){var n,i,o,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)o=f([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(o,"").toLocaleLowerCase();return r?"MMM"===t?(i=gi.call(this._shortMonthsParse,a),i!==-1?i:null):(i=gi.call(this._longMonthsParse,a),i!==-1?i:null):"MMM"===t?(i=gi.call(this._shortMonthsParse,a),i!==-1?i:(i=gi.call(this._longMonthsParse,a),i!==-1?i:null)):(i=gi.call(this._longMonthsParse,a),i!==-1?i:(i=gi.call(this._shortMonthsParse,a),i!==-1?i:null))}function ue(e,t,r){var n,i,o;if(this._monthsParseExact)return le.call(this,e,t,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(i=f([2e3,n]),r&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),r||this._monthsParse[n]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[n]=new RegExp(o.replace(".",""),"i")),r&&"MMMM"===t&&this._longMonthsParse[n].test(e))return n;if(r&&"MMM"===t&&this._shortMonthsParse[n].test(e))return n;if(!r&&this._monthsParse[n].test(e))return n}}function de(e,t){var r;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=w(t);else if(t=e.localeData().monthsParse(t),!c(t))return e;return r=Math.min(e.date(),ae(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,r),e}function pe(e){return null!=e?(de(this,e),r.updateOffset(this,!0),this):H(this,"Month")}function fe(){return ae(this.year(),this.month())}function he(e){return this._monthsParseExact?(d(this,"_monthsRegex")||ge.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(d(this,"_monthsShortRegex")||(this._monthsShortRegex=Si),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function me(e){return this._monthsParseExact?(d(this,"_monthsRegex")||ge.call(this),e?this._monthsStrictRegex:this._monthsRegex):(d(this,"_monthsRegex")||(this._monthsRegex=_i),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function ge(){function e(e,t){return t.length-e.length}var t,r,n=[],i=[],o=[];for(t=0;t<12;t++)r=f([2e3,t]),n.push(this.monthsShort(r,"")),i.push(this.months(r,"")),o.push(this.months(r,"")),o.push(this.monthsShort(r,""));for(n.sort(e),i.sort(e),o.sort(e),t=0;t<12;t++)n[t]=re(n[t]),i[t]=re(i[t]);for(t=0;t<24;t++)o[t]=re(o[t]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function ve(e){return ye(e)?366:365}function ye(e){return e%4===0&&e%100!==0||e%400===0}function be(){return ye(this.year())}function Se(e,t,r,n,i,o,a){var s=new Date(e,t,r,n,i,o,a);return e<100&&e>=0&&isFinite(s.getFullYear())&&s.setFullYear(e),s}function _e(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function we(e,t,r){var n=7+t-r,i=(7+_e(e,0,n).getUTCDay()-t)%7;return-i+n-1}function Ee(e,t,r,n,i){var o,a,s=(7+r-n)%7,c=we(e,n,i),l=1+7*(t-1)+s+c;return l<=0?(o=e-1,a=ve(o)+l):l>ve(e)?(o=e+1,a=l-ve(e)):(o=e,a=l),{year:o,dayOfYear:a}}function Te(e,t,r){var n,i,o=we(e.year(),t,r),a=Math.floor((e.dayOfYear()-o-1)/7)+1;return a<1?(i=e.year()-1,n=a+Oe(i,t,r)):a>Oe(e.year(),t,r)?(n=a-Oe(e.year(),t,r),i=e.year()+1):(i=e.year(),n=a),{week:n,year:i}}function Oe(e,t,r){var n=we(e,t,r),i=we(e+1,t,r);return(ve(e)-n+i)/7}function Ie(e){return Te(e,this._week.dow,this._week.doy).week}function Pe(){return this._week.dow}function Re(){return this._week.doy}function Ce(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Ae(e){var t=Te(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function je(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function ke(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function De(e,t){return e?i(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:i(this._weekdays)?this._weekdays:this._weekdays.standalone}function $e(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Me(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function xe(e,t,r){var n,i,o,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)o=f([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(o,"").toLocaleLowerCase();return r?"dddd"===t?(i=gi.call(this._weekdaysParse,a),i!==-1?i:null):"ddd"===t?(i=gi.call(this._shortWeekdaysParse,a),i!==-1?i:null):(i=gi.call(this._minWeekdaysParse,a),i!==-1?i:null):"dddd"===t?(i=gi.call(this._weekdaysParse,a),i!==-1?i:(i=gi.call(this._shortWeekdaysParse,a),i!==-1?i:(i=gi.call(this._minWeekdaysParse,a),i!==-1?i:null))):"ddd"===t?(i=gi.call(this._shortWeekdaysParse,a),i!==-1?i:(i=gi.call(this._weekdaysParse,a),i!==-1?i:(i=gi.call(this._minWeekdaysParse,a),i!==-1?i:null))):(i=gi.call(this._minWeekdaysParse,a),i!==-1?i:(i=gi.call(this._weekdaysParse,a),i!==-1?i:(i=gi.call(this._shortWeekdaysParse,a),i!==-1?i:null)))}function Fe(e,t,r){var n,i,o;if(this._weekdaysParseExact)return xe.call(this,e,t,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(i=f([2e3,1]).day(n),r&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(i,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(i,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(i,"").replace(".",".?")+"$","i")),this._weekdaysParse[n]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[n]=new RegExp(o.replace(".",""),"i")),r&&"dddd"===t&&this._fullWeekdaysParse[n].test(e))return n;if(r&&"ddd"===t&&this._shortWeekdaysParse[n].test(e))return n;if(r&&"dd"===t&&this._minWeekdaysParse[n].test(e))return n;if(!r&&this._weekdaysParse[n].test(e))return n}}function Le(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=je(e,this.localeData()),this.add(e-t,"d")):t}function Ue(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Be(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=ke(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Ne(e){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||Ve.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(d(this,"_weekdaysRegex")||(this._weekdaysRegex=Pi),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function qe(e){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||Ve.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(d(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ri),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function He(e){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||Ve.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(d(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ci),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Ve(){function e(e,t){return t.length-e.length}var t,r,n,i,o,a=[],s=[],c=[],l=[];for(t=0;t<7;t++)r=f([2e3,1]).day(t),n=this.weekdaysMin(r,""),i=this.weekdaysShort(r,""),o=this.weekdays(r,""),a.push(n),s.push(i),c.push(o),l.push(n),l.push(i),l.push(o);for(a.sort(e),s.sort(e),c.sort(e),l.sort(e),t=0;t<7;t++)s[t]=re(s[t]),c[t]=re(c[t]),l[t]=re(l[t]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Ye(){return this.hours()%12||12}function ze(){return this.hours()||24}function Ge(e,t){W(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function We(e,t){return t._meridiemParse}function Qe(e){return"p"===(e+"").toLowerCase().charAt(0)}function Ke(e,t,r){return e>11?r?"pm":"PM":r?"am":"AM"}function Xe(e){return e?e.toLowerCase().replace("_","-"):e}function Je(e){for(var t,r,n,i,o=0;o<e.length;){for(i=Xe(e[o]).split("-"),t=i.length,r=Xe(e[o+1]),r=r?r.split("-"):null;t>0;){if(n=Ze(i.slice(0,t).join("-")))return n;if(r&&r.length>=t&&E(i,r,!0)>=t-1)break;t--}o++}return null}function Ze(r){var n=null;if(!$i[r]&&"undefined"!=typeof t&&t&&t.exports)try{n=Ai._abbr,e("./locale/"+r),et(n)}catch(e){}return $i[r]}function et(e,t){var r;return e&&(r=s(t)?nt(e):tt(e,t),r&&(Ai=r)),Ai._abbr}function tt(e,t){if(null!==t){var r=Di;if(t.abbr=e,null!=$i[e])I("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=$i[e]._config;else if(null!=t.parentLocale){if(null==$i[t.parentLocale])return Mi[t.parentLocale]||(Mi[t.parentLocale]=[]),Mi[t.parentLocale].push({name:e,config:t}),null;r=$i[t.parentLocale]._config}return $i[e]=new A(C(r,t)),Mi[e]&&Mi[e].forEach(function(e){tt(e.name,e.config)}),et(e),$i[e]}return delete $i[e],null}function rt(e,t){if(null!=t){var r,n=Di;null!=$i[e]&&(n=$i[e]._config),t=C(n,t),r=new A(t),r.parentLocale=$i[e],$i[e]=r,et(e)}else null!=$i[e]&&(null!=$i[e].parentLocale?$i[e]=$i[e].parentLocale:null!=$i[e]&&delete $i[e]);return $i[e]}function nt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Ai;if(!i(e)){if(t=Ze(e))return t;e=[e]}return Je(e)}function it(){return Cn($i)}function ot(e){var t,r=e._a;return r&&m(e).overflow===-2&&(t=r[ci]<0||r[ci]>11?ci:r[li]<1||r[li]>ae(r[si],r[ci])?li:r[ui]<0||r[ui]>24||24===r[ui]&&(0!==r[di]||0!==r[pi]||0!==r[fi])?ui:r[di]<0||r[di]>59?di:r[pi]<0||r[pi]>59?pi:r[fi]<0||r[fi]>999?fi:-1,m(e)._overflowDayOfYear&&(t<si||t>li)&&(t=li),m(e)._overflowWeeks&&t===-1&&(t=hi),m(e)._overflowWeekday&&t===-1&&(t=mi),m(e).overflow=t),e}function at(e){var t,r,n,i,o,a,s=e._i,c=xi.exec(s)||Fi.exec(s);if(c){for(m(e).iso=!0,t=0,r=Ui.length;t<r;t++)if(Ui[t][1].exec(c[1])){i=Ui[t][0],n=Ui[t][2]!==!1;break}if(null==i)return void(e._isValid=!1);if(c[3]){for(t=0,r=Bi.length;t<r;t++)if(Bi[t][1].exec(c[3])){o=(c[2]||" ")+Bi[t][0];break}if(null==o)return void(e._isValid=!1)}if(!n&&null!=o)return void(e._isValid=!1);if(c[4]){if(!Li.exec(c[4]))return void(e._isValid=!1);a="Z"}e._f=i+(o||"")+(a||""),ft(e)}else e._isValid=!1}function st(e){var t,r,n,i,o,a,s,c,l={" GMT":" +0000"," EDT":" -0400"," EST":" -0500"," CDT":" -0500"," CST":" -0600"," MDT":" -0600"," MST":" -0700"," PDT":" -0700"," PST":" -0800"},u="YXWVUTSRQPONZABCDEFGHIKLM";if(t=e._i.replace(/\([^\)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s|\s$/g,""),r=qi.exec(t)){if(n=r[1]?"ddd"+(5===r[1].length?", ":" "):"",i="D MMM "+(r[2].length>10?"YYYY ":"YY "),o="HH:mm"+(r[4]?":ss":""),r[1]){var d=new Date(r[2]),p=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][d.getDay()];if(r[1].substr(0,3)!==p)return m(e).weekdayMismatch=!0,void(e._isValid=!1)}switch(r[5].length){case 2:0===c?s=" +0000":(c=u.indexOf(r[5][1].toUpperCase())-12,s=(c<0?" -":" +")+(""+c).replace(/^-?/,"0").match(/..$/)[0]+"00");break;case 4:s=l[r[5]];break;default:s=l[" GMT"]}r[5]=s,e._i=r.splice(1).join(""),a=" ZZ",e._f=n+i+o+a,ft(e),m(e).rfc2822=!0}else e._isValid=!1}function ct(e){var t=Ni.exec(e._i);return null!==t?void(e._d=new Date((+t[1]))):(at(e),void(e._isValid===!1&&(delete e._isValid,st(e),e._isValid===!1&&(delete e._isValid,r.createFromInputFallback(e)))))}function lt(e,t,r){return null!=e?e:null!=t?t:r}function ut(e){var t=new Date(r.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function dt(e){var t,r,n,i,o=[];if(!e._d){for(n=ut(e),e._w&&null==e._a[li]&&null==e._a[ci]&&pt(e),null!=e._dayOfYear&&(i=lt(e._a[si],n[si]),(e._dayOfYear>ve(i)||0===e._dayOfYear)&&(m(e)._overflowDayOfYear=!0),r=_e(i,0,e._dayOfYear),e._a[ci]=r.getUTCMonth(),e._a[li]=r.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=o[t]=n[t];for(;t<7;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[ui]&&0===e._a[di]&&0===e._a[pi]&&0===e._a[fi]&&(e._nextDay=!0,e._a[ui]=0),e._d=(e._useUTC?_e:Se).apply(null,o),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ui]=24)}}function pt(e){var t,r,n,i,o,a,s,c;if(t=e._w,null!=t.GG||null!=t.W||null!=t.E)o=1,a=4,r=lt(t.GG,e._a[si],Te(_t(),1,4).year),n=lt(t.W,1),i=lt(t.E,1),(i<1||i>7)&&(c=!0);else{o=e._locale._week.dow,a=e._locale._week.doy;var l=Te(_t(),o,a);r=lt(t.gg,e._a[si],l.year),n=lt(t.w,l.week),null!=t.d?(i=t.d,(i<0||i>6)&&(c=!0)):null!=t.e?(i=t.e+o,(t.e<0||t.e>6)&&(c=!0)):i=o}n<1||n>Oe(r,o,a)?m(e)._overflowWeeks=!0:null!=c?m(e)._overflowWeekday=!0:(s=Ee(r,n,i,o,a),e._a[si]=s.year,e._dayOfYear=s.dayOfYear)}function ft(e){if(e._f===r.ISO_8601)return void at(e);if(e._f===r.RFC_2822)return void st(e);e._a=[],m(e).empty=!0;var t,n,i,o,a,s=""+e._i,c=s.length,l=0;for(i=J(e._f,e._locale).match(Ln)||[],t=0;t<i.length;t++)o=i[t],n=(s.match(ee(o,e))||[])[0],n&&(a=s.substr(0,s.indexOf(n)),a.length>0&&m(e).unusedInput.push(a),s=s.slice(s.indexOf(n)+n.length),l+=n.length),Nn[o]?(n?m(e).empty=!1:m(e).unusedTokens.push(o),oe(o,n,e)):e._strict&&!n&&m(e).unusedTokens.push(o);m(e).charsLeftOver=c-l,s.length>0&&m(e).unusedInput.push(s),e._a[ui]<=12&&m(e).bigHour===!0&&e._a[ui]>0&&(m(e).bigHour=void 0),m(e).parsedDateParts=e._a.slice(0),m(e).meridiem=e._meridiem,e._a[ui]=ht(e._locale,e._a[ui],e._meridiem),dt(e),ot(e)}function ht(e,t,r){var n;return null==r?t:null!=e.meridiemHour?e.meridiemHour(t,r):null!=e.isPM?(n=e.isPM(r),n&&t<12&&(t+=12),n||12!==t||(t=0),t):t}function mt(e){var t,r,n,i,o;if(0===e._f.length)return m(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)o=0,t=y({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],ft(t),g(t)&&(o+=m(t).charsLeftOver,o+=10*m(t).unusedTokens.length,m(t).score=o,(null==n||o<n)&&(n=o,r=t));p(e,r||t)}function gt(e){if(!e._d){var t=U(e._i);e._a=u([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),dt(e)}}function vt(e){var t=new b(ot(yt(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function yt(e){var t=e._i,r=e._f;return e._locale=e._locale||nt(e._l),null===t||void 0===r&&""===t?v({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),S(t)?new b(ot(t)):(l(t)?e._d=t:i(r)?mt(e):r?ft(e):bt(e),g(e)||(e._d=null),e))}function bt(e){var t=e._i;s(t)?e._d=new Date(r.now()):l(t)?e._d=new Date(t.valueOf()):"string"==typeof t?ct(e):i(t)?(e._a=u(t.slice(0),function(e){return parseInt(e,10)}),dt(e)):o(t)?gt(e):c(t)?e._d=new Date(t):r.createFromInputFallback(e)}function St(e,t,r,n,s){var c={};return r!==!0&&r!==!1||(n=r,r=void 0),(o(e)&&a(e)||i(e)&&0===e.length)&&(e=void 0),c._isAMomentObject=!0,c._useUTC=c._isUTC=s,c._l=r,c._i=e,c._f=t,c._strict=n,vt(c)}function _t(e,t,r,n){return St(e,t,r,n,!1)}function wt(e,t){var r,n;if(1===t.length&&i(t[0])&&(t=t[0]),!t.length)return _t();for(r=t[0],n=1;n<t.length;++n)t[n].isValid()&&!t[n][e](r)||(r=t[n]);return r}function Et(){var e=[].slice.call(arguments,0);return wt("isBefore",e)}function Tt(){var e=[].slice.call(arguments,0);return wt("isAfter",e)}function Ot(e){for(var t in e)if(zi.indexOf(t)===-1||null!=e[t]&&isNaN(e[t]))return!1;for(var r=!1,n=0;n<zi.length;++n)if(e[zi[n]]){if(r)return!1;parseFloat(e[zi[n]])!==w(e[zi[n]])&&(r=!0)}return!0}function It(){return this._isValid}function Pt(){return zt(NaN)}function Rt(e){var t=U(e),r=t.year||0,n=t.quarter||0,i=t.month||0,o=t.week||0,a=t.day||0,s=t.hour||0,c=t.minute||0,l=t.second||0,u=t.millisecond||0;this._isValid=Ot(t),this._milliseconds=+u+1e3*l+6e4*c+1e3*s*60*60,this._days=+a+7*o,this._months=+i+3*n+12*r,this._data={},this._locale=nt(),this._bubble()}function Ct(e){return e instanceof Rt}function At(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function jt(e,t){W(e,0,0,function(){var e=this.utcOffset(),r="+";return e<0&&(e=-e,r="-"),r+G(~~(e/60),2)+t+G(~~e%60,2)})}function kt(e,t){var r=(t||"").match(e);if(null===r)return null;var n=r[r.length-1]||[],i=(n+"").match(Gi)||["-",0,0],o=+(60*i[1])+w(i[2]);return 0===o?0:"+"===i[0]?o:-o}function Dt(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(S(e)||l(e)?e.valueOf():_t(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),r.updateOffset(n,!1),n):_t(e).local()}function $t(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Mt(e,t,n){var i,o=this._offset||0;
if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(e=kt(ri,e),null===e)return this}else Math.abs(e)<16&&!n&&(e=60*e);return!this._isUTC&&t&&(i=$t(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==e&&(!t||this._changeInProgress?Xt(this,zt(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:$t(this)}function xt(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Ft(e){return this.utcOffset(0,e)}function Lt(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract($t(this),"m")),this}function Ut(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=kt(ti,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Bt(e){return!!this.isValid()&&(e=e?_t(e).utcOffset():0,(this.utcOffset()-e)%60===0)}function Nt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function qt(){if(!s(this._isDSTShifted))return this._isDSTShifted;var e={};if(y(e,this),e=yt(e),e._a){var t=e._isUTC?f(e._a):_t(e._a);this._isDSTShifted=this.isValid()&&E(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Ht(){return!!this.isValid()&&!this._isUTC}function Vt(){return!!this.isValid()&&this._isUTC}function Yt(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function zt(e,t){var r,n,i,o=e,a=null;return Ct(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:c(e)?(o={},t?o[t]=e:o.milliseconds=e):(a=Wi.exec(e))?(r="-"===a[1]?-1:1,o={y:0,d:w(a[li])*r,h:w(a[ui])*r,m:w(a[di])*r,s:w(a[pi])*r,ms:w(At(1e3*a[fi]))*r}):(a=Qi.exec(e))?(r="-"===a[1]?-1:1,o={y:Gt(a[2],r),M:Gt(a[3],r),w:Gt(a[4],r),d:Gt(a[5],r),h:Gt(a[6],r),m:Gt(a[7],r),s:Gt(a[8],r)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(i=Qt(_t(o.from),_t(o.to)),o={},o.ms=i.milliseconds,o.M=i.months),n=new Rt(o),Ct(e)&&d(e,"_locale")&&(n._locale=e._locale),n}function Gt(e,t){var r=e&&parseFloat(e.replace(",","."));return(isNaN(r)?0:r)*t}function Wt(e,t){var r={milliseconds:0,months:0};return r.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(r.months,"M").isAfter(t)&&--r.months,r.milliseconds=+t-+e.clone().add(r.months,"M"),r}function Qt(e,t){var r;return e.isValid()&&t.isValid()?(t=Dt(t,e),e.isBefore(t)?r=Wt(e,t):(r=Wt(t,e),r.milliseconds=-r.milliseconds,r.months=-r.months),r):{milliseconds:0,months:0}}function Kt(e,t){return function(r,n){var i,o;return null===n||isNaN(+n)||(I(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=r,r=n,n=o),r="string"==typeof r?+r:r,i=zt(r,n),Xt(this,i,e),this}}function Xt(e,t,n,i){var o=t._milliseconds,a=At(t._days),s=At(t._months);e.isValid()&&(i=null==i||i,o&&e._d.setTime(e._d.valueOf()+o*n),a&&V(e,"Date",H(e,"Date")+a*n),s&&de(e,H(e,"Month")+s*n),i&&r.updateOffset(e,a||s))}function Jt(e,t){var r=e.diff(t,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"}function Zt(e,t){var n=e||_t(),i=Dt(n,this).startOf("day"),o=r.calendarFormat(this,i)||"sameElse",a=t&&(P(t[o])?t[o].call(this,n):t[o]);return this.format(a||this.localeData().calendar(o,this,_t(n)))}function er(){return new b(this)}function tr(e,t){var r=S(e)?e:_t(e);return!(!this.isValid()||!r.isValid())&&(t=L(s(t)?"millisecond":t),"millisecond"===t?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(t).valueOf())}function rr(e,t){var r=S(e)?e:_t(e);return!(!this.isValid()||!r.isValid())&&(t=L(s(t)?"millisecond":t),"millisecond"===t?this.valueOf()<r.valueOf():this.clone().endOf(t).valueOf()<r.valueOf())}function nr(e,t,r,n){return n=n||"()",("("===n[0]?this.isAfter(e,r):!this.isBefore(e,r))&&(")"===n[1]?this.isBefore(t,r):!this.isAfter(t,r))}function ir(e,t){var r,n=S(e)?e:_t(e);return!(!this.isValid()||!n.isValid())&&(t=L(t||"millisecond"),"millisecond"===t?this.valueOf()===n.valueOf():(r=n.valueOf(),this.clone().startOf(t).valueOf()<=r&&r<=this.clone().endOf(t).valueOf()))}function or(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function ar(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function sr(e,t,r){var n,i,o,a;return this.isValid()?(n=Dt(e,this),n.isValid()?(i=6e4*(n.utcOffset()-this.utcOffset()),t=L(t),"year"===t||"month"===t||"quarter"===t?(a=cr(this,n),"quarter"===t?a/=3:"year"===t&&(a/=12)):(o=this-n,a="second"===t?o/1e3:"minute"===t?o/6e4:"hour"===t?o/36e5:"day"===t?(o-i)/864e5:"week"===t?(o-i)/6048e5:o),r?a:_(a)):NaN):NaN}function cr(e,t){var r,n,i=12*(t.year()-e.year())+(t.month()-e.month()),o=e.clone().add(i,"months");return t-o<0?(r=e.clone().add(i-1,"months"),n=(t-o)/(o-r)):(r=e.clone().add(i+1,"months"),n=(t-o)/(r-o)),-(i+n)||0}function lr(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ur(){if(!this.isValid())return null;var e=this.clone().utc();return e.year()<0||e.year()>9999?X(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):P(Date.prototype.toISOString)?this.toDate().toISOString():X(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function dr(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var r="["+e+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",o=t+'[")]';return this.format(r+n+i+o)}function pr(e){e||(e=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var t=X(this,e);return this.localeData().postformat(t)}function fr(e,t){return this.isValid()&&(S(e)&&e.isValid()||_t(e).isValid())?zt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function hr(e){return this.from(_t(),e)}function mr(e,t){return this.isValid()&&(S(e)&&e.isValid()||_t(e).isValid())?zt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function gr(e){return this.to(_t(),e)}function vr(e){var t;return void 0===e?this._locale._abbr:(t=nt(e),null!=t&&(this._locale=t),this)}function yr(){return this._locale}function br(e){switch(e=L(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function Sr(e){return e=L(e),void 0===e||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))}function _r(){return this._d.valueOf()-6e4*(this._offset||0)}function wr(){return Math.floor(this.valueOf()/1e3)}function Er(){return new Date(this.valueOf())}function Tr(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Or(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Ir(){return this.isValid()?this.toISOString():null}function Pr(){return g(this)}function Rr(){return p({},m(this))}function Cr(){return m(this).overflow}function Ar(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function jr(e,t){W(0,[e,e.length],0,t)}function kr(e){return xr.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Dr(e){return xr.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function $r(){return Oe(this.year(),1,4)}function Mr(){var e=this.localeData()._week;return Oe(this.year(),e.dow,e.doy)}function xr(e,t,r,n,i){var o;return null==e?Te(this,n,i).year:(o=Oe(e,n,i),t>o&&(t=o),Fr.call(this,e,t,r,n,i))}function Fr(e,t,r,n,i){var o=Ee(e,t,r,n,i),a=_e(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function Lr(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Ur(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function Br(e,t){t[fi]=w(1e3*("0."+e))}function Nr(){return this._isUTC?"UTC":""}function qr(){return this._isUTC?"Coordinated Universal Time":""}function Hr(e){return _t(1e3*e)}function Vr(){return _t.apply(null,arguments).parseZone()}function Yr(e){return e}function zr(e,t,r,n){var i=nt(),o=f().set(n,t);return i[r](o,e)}function Gr(e,t,r){if(c(e)&&(t=e,e=void 0),e=e||"",null!=t)return zr(e,t,r,"month");var n,i=[];for(n=0;n<12;n++)i[n]=zr(e,n,r,"month");return i}function Wr(e,t,r,n){"boolean"==typeof e?(c(t)&&(r=t,t=void 0),t=t||""):(t=e,r=t,e=!1,c(t)&&(r=t,t=void 0),t=t||"");var i=nt(),o=e?i._week.dow:0;if(null!=r)return zr(t,(r+o)%7,n,"day");var a,s=[];for(a=0;a<7;a++)s[a]=zr(t,(a+o)%7,n,"day");return s}function Qr(e,t){return Gr(e,t,"months")}function Kr(e,t){return Gr(e,t,"monthsShort")}function Xr(e,t,r){return Wr(e,t,r,"weekdays")}function Jr(e,t,r){return Wr(e,t,r,"weekdaysShort")}function Zr(e,t,r){return Wr(e,t,r,"weekdaysMin")}function en(){var e=this._data;return this._milliseconds=ao(this._milliseconds),this._days=ao(this._days),this._months=ao(this._months),e.milliseconds=ao(e.milliseconds),e.seconds=ao(e.seconds),e.minutes=ao(e.minutes),e.hours=ao(e.hours),e.months=ao(e.months),e.years=ao(e.years),this}function tn(e,t,r,n){var i=zt(t,r);return e._milliseconds+=n*i._milliseconds,e._days+=n*i._days,e._months+=n*i._months,e._bubble()}function rn(e,t){return tn(this,e,t,1)}function nn(e,t){return tn(this,e,t,-1)}function on(e){return e<0?Math.floor(e):Math.ceil(e)}function an(){var e,t,r,n,i,o=this._milliseconds,a=this._days,s=this._months,c=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*on(cn(s)+a),a=0,s=0),c.milliseconds=o%1e3,e=_(o/1e3),c.seconds=e%60,t=_(e/60),c.minutes=t%60,r=_(t/60),c.hours=r%24,a+=_(r/24),i=_(sn(a)),s+=i,a-=on(cn(i)),n=_(s/12),s%=12,c.days=a,c.months=s,c.years=n,this}function sn(e){return 4800*e/146097}function cn(e){return 146097*e/4800}function ln(e){if(!this.isValid())return NaN;var t,r,n=this._milliseconds;if(e=L(e),"month"===e||"year"===e)return t=this._days+n/864e5,r=this._months+sn(t),"month"===e?r:r/12;switch(t=this._days+Math.round(cn(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return 24*t+n/36e5;case"minute":return 1440*t+n/6e4;case"second":return 86400*t+n/1e3;case"millisecond":return Math.floor(864e5*t)+n;default:throw new Error("Unknown unit "+e)}}function un(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*w(this._months/12):NaN}function dn(e){return function(){return this.as(e)}}function pn(e){return e=L(e),this.isValid()?this[e+"s"]():NaN}function fn(e){return function(){return this.isValid()?this._data[e]:NaN}}function hn(){return _(this.days()/7)}function mn(e,t,r,n,i){return i.relativeTime(t||1,!!r,e,n)}function gn(e,t,r){var n=zt(e).abs(),i=Eo(n.as("s")),o=Eo(n.as("m")),a=Eo(n.as("h")),s=Eo(n.as("d")),c=Eo(n.as("M")),l=Eo(n.as("y")),u=i<=To.ss&&["s",i]||i<To.s&&["ss",i]||o<=1&&["m"]||o<To.m&&["mm",o]||a<=1&&["h"]||a<To.h&&["hh",a]||s<=1&&["d"]||s<To.d&&["dd",s]||c<=1&&["M"]||c<To.M&&["MM",c]||l<=1&&["y"]||["yy",l];return u[2]=t,u[3]=+e>0,u[4]=r,mn.apply(null,u)}function vn(e){return void 0===e?Eo:"function"==typeof e&&(Eo=e,!0)}function yn(e,t){return void 0!==To[e]&&(void 0===t?To[e]:(To[e]=t,"s"===e&&(To.ss=t-1),!0))}function bn(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),r=gn(this,!e,t);return e&&(r=t.pastFuture(+this,r)),t.postformat(r)}function Sn(){if(!this.isValid())return this.localeData().invalidDate();var e,t,r,n=Oo(this._milliseconds)/1e3,i=Oo(this._days),o=Oo(this._months);e=_(n/60),t=_(e/60),n%=60,e%=60,r=_(o/12),o%=12;var a=r,s=o,c=i,l=t,u=e,d=n,p=this.asSeconds();return p?(p<0?"-":"")+"P"+(a?a+"Y":"")+(s?s+"M":"")+(c?c+"D":"")+(l||u||d?"T":"")+(l?l+"H":"")+(u?u+"M":"")+(d?d+"S":""):"P0D"}var _n,wn;wn=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),r=t.length>>>0,n=0;n<r;n++)if(n in t&&e.call(this,t[n],n,t))return!0;return!1};var En=wn,Tn=r.momentProperties=[],On=!1,In={};r.suppressDeprecationWarnings=!1,r.deprecationHandler=null;var Pn;Pn=Object.keys?Object.keys:function(e){var t,r=[];for(t in e)d(e,t)&&r.push(t);return r};var Rn,Cn=Pn,An={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},jn={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},kn="Invalid date",Dn="%d",$n=/\d{1,2}/,Mn={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},xn={},Fn={},Ln=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Un=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Bn={},Nn={},qn=/\d/,Hn=/\d\d/,Vn=/\d{3}/,Yn=/\d{4}/,zn=/[+-]?\d{6}/,Gn=/\d\d?/,Wn=/\d\d\d\d?/,Qn=/\d\d\d\d\d\d?/,Kn=/\d{1,3}/,Xn=/\d{1,4}/,Jn=/[+-]?\d{1,6}/,Zn=/\d+/,ei=/[+-]?\d+/,ti=/Z|[+-]\d\d:?\d\d/gi,ri=/Z|[+-]\d\d(?::?\d\d)?/gi,ni=/[+-]?\d+(\.\d{1,3})?/,ii=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,oi={},ai={},si=0,ci=1,li=2,ui=3,di=4,pi=5,fi=6,hi=7,mi=8;Rn=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};var gi=Rn;W("M",["MM",2],"Mo",function(){return this.month()+1}),W("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),W("MMMM",0,0,function(e){return this.localeData().months(this,e)}),F("month","M"),B("month",8),Z("M",Gn),Z("MM",Gn,Hn),Z("MMM",function(e,t){return t.monthsShortRegex(e)}),Z("MMMM",function(e,t){return t.monthsRegex(e)}),ne(["M","MM"],function(e,t){t[ci]=w(e)-1}),ne(["MMM","MMMM"],function(e,t,r,n){var i=r._locale.monthsParse(e,n,r._strict);null!=i?t[ci]=i:m(r).invalidMonth=e});var vi=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,yi="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),bi="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Si=ii,_i=ii;W("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),W(0,["YY",2],0,function(){return this.year()%100}),W(0,["YYYY",4],0,"year"),W(0,["YYYYY",5],0,"year"),W(0,["YYYYYY",6,!0],0,"year"),F("year","y"),B("year",1),Z("Y",ei),Z("YY",Gn,Hn),Z("YYYY",Xn,Yn),Z("YYYYY",Jn,zn),Z("YYYYYY",Jn,zn),ne(["YYYYY","YYYYYY"],si),ne("YYYY",function(e,t){t[si]=2===e.length?r.parseTwoDigitYear(e):w(e)}),ne("YY",function(e,t){t[si]=r.parseTwoDigitYear(e)}),ne("Y",function(e,t){t[si]=parseInt(e,10)}),r.parseTwoDigitYear=function(e){return w(e)+(w(e)>68?1900:2e3)};var wi=q("FullYear",!0);W("w",["ww",2],"wo","week"),W("W",["WW",2],"Wo","isoWeek"),F("week","w"),F("isoWeek","W"),B("week",5),B("isoWeek",5),Z("w",Gn),Z("ww",Gn,Hn),Z("W",Gn),Z("WW",Gn,Hn),ie(["w","ww","W","WW"],function(e,t,r,n){t[n.substr(0,1)]=w(e)});var Ei={dow:0,doy:6};W("d",0,"do","day"),W("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),W("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),W("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),W("e",0,0,"weekday"),W("E",0,0,"isoWeekday"),F("day","d"),F("weekday","e"),F("isoWeekday","E"),B("day",11),B("weekday",11),B("isoWeekday",11),Z("d",Gn),Z("e",Gn),Z("E",Gn),Z("dd",function(e,t){return t.weekdaysMinRegex(e)}),Z("ddd",function(e,t){return t.weekdaysShortRegex(e)}),Z("dddd",function(e,t){return t.weekdaysRegex(e)}),ie(["dd","ddd","dddd"],function(e,t,r,n){var i=r._locale.weekdaysParse(e,n,r._strict);null!=i?t.d=i:m(r).invalidWeekday=e}),ie(["d","e","E"],function(e,t,r,n){t[n]=w(e)});var Ti="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Oi="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ii="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Pi=ii,Ri=ii,Ci=ii;W("H",["HH",2],0,"hour"),W("h",["hh",2],0,Ye),W("k",["kk",2],0,ze),W("hmm",0,0,function(){return""+Ye.apply(this)+G(this.minutes(),2)}),W("hmmss",0,0,function(){return""+Ye.apply(this)+G(this.minutes(),2)+G(this.seconds(),2)}),W("Hmm",0,0,function(){return""+this.hours()+G(this.minutes(),2)}),W("Hmmss",0,0,function(){return""+this.hours()+G(this.minutes(),2)+G(this.seconds(),2)}),Ge("a",!0),Ge("A",!1),F("hour","h"),B("hour",13),Z("a",We),Z("A",We),Z("H",Gn),Z("h",Gn),Z("k",Gn),Z("HH",Gn,Hn),Z("hh",Gn,Hn),Z("kk",Gn,Hn),Z("hmm",Wn),Z("hmmss",Qn),Z("Hmm",Wn),Z("Hmmss",Qn),ne(["H","HH"],ui),ne(["k","kk"],function(e,t,r){var n=w(e);t[ui]=24===n?0:n}),ne(["a","A"],function(e,t,r){r._isPm=r._locale.isPM(e),r._meridiem=e}),ne(["h","hh"],function(e,t,r){t[ui]=w(e),m(r).bigHour=!0}),ne("hmm",function(e,t,r){var n=e.length-2;t[ui]=w(e.substr(0,n)),t[di]=w(e.substr(n)),m(r).bigHour=!0}),ne("hmmss",function(e,t,r){var n=e.length-4,i=e.length-2;t[ui]=w(e.substr(0,n)),t[di]=w(e.substr(n,2)),t[pi]=w(e.substr(i)),m(r).bigHour=!0}),ne("Hmm",function(e,t,r){var n=e.length-2;t[ui]=w(e.substr(0,n)),t[di]=w(e.substr(n))}),ne("Hmmss",function(e,t,r){var n=e.length-4,i=e.length-2;t[ui]=w(e.substr(0,n)),t[di]=w(e.substr(n,2)),t[pi]=w(e.substr(i))});var Ai,ji=/[ap]\.?m?\.?/i,ki=q("Hours",!0),Di={calendar:An,longDateFormat:jn,invalidDate:kn,ordinal:Dn,dayOfMonthOrdinalParse:$n,relativeTime:Mn,months:yi,monthsShort:bi,week:Ei,weekdays:Ti,weekdaysMin:Ii,weekdaysShort:Oi,meridiemParse:ji},$i={},Mi={},xi=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Fi=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Li=/Z|[+-]\d\d(?::?\d\d)?/,Ui=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Bi=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ni=/^\/?Date\((\-?\d+)/i,qi=/^((?:Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d?\d\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(?:\d\d)?\d\d\s)(\d\d:\d\d)(\:\d\d)?(\s(?:UT|GMT|[ECMP][SD]T|[A-IK-Za-ik-z]|[+-]\d{4}))$/;r.createFromInputFallback=O("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),r.ISO_8601=function(){},r.RFC_2822=function(){};var Hi=O("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=_t.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:v()}),Vi=O("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=_t.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:v()}),Yi=function(){return Date.now?Date.now():+new Date},zi=["year","quarter","month","week","day","hour","minute","second","millisecond"];jt("Z",":"),jt("ZZ",""),Z("Z",ri),Z("ZZ",ri),ne(["Z","ZZ"],function(e,t,r){r._useUTC=!0,r._tzm=kt(ri,e)});var Gi=/([\+\-]|\d\d)/gi;r.updateOffset=function(){};var Wi=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Qi=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;zt.fn=Rt.prototype,zt.invalid=Pt;var Ki=Kt(1,"add"),Xi=Kt(-1,"subtract");r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Ji=O("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});W(0,["gg",2],0,function(){return this.weekYear()%100}),W(0,["GG",2],0,function(){return this.isoWeekYear()%100}),jr("gggg","weekYear"),jr("ggggg","weekYear"),jr("GGGG","isoWeekYear"),jr("GGGGG","isoWeekYear"),F("weekYear","gg"),F("isoWeekYear","GG"),B("weekYear",1),B("isoWeekYear",1),Z("G",ei),Z("g",ei),Z("GG",Gn,Hn),Z("gg",Gn,Hn),Z("GGGG",Xn,Yn),Z("gggg",Xn,Yn),Z("GGGGG",Jn,zn),Z("ggggg",Jn,zn),ie(["gggg","ggggg","GGGG","GGGGG"],function(e,t,r,n){t[n.substr(0,2)]=w(e)}),ie(["gg","GG"],function(e,t,n,i){t[i]=r.parseTwoDigitYear(e)}),W("Q",0,"Qo","quarter"),F("quarter","Q"),B("quarter",7),Z("Q",qn),ne("Q",function(e,t){t[ci]=3*(w(e)-1)}),W("D",["DD",2],"Do","date"),F("date","D"),B("date",9),Z("D",Gn),Z("DD",Gn,Hn),Z("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),ne(["D","DD"],li),ne("Do",function(e,t){t[li]=w(e.match(Gn)[0],10)});var Zi=q("Date",!0);W("DDD",["DDDD",3],"DDDo","dayOfYear"),F("dayOfYear","DDD"),B("dayOfYear",4),Z("DDD",Kn),Z("DDDD",Vn),ne(["DDD","DDDD"],function(e,t,r){r._dayOfYear=w(e)}),W("m",["mm",2],0,"minute"),F("minute","m"),B("minute",14),Z("m",Gn),Z("mm",Gn,Hn),ne(["m","mm"],di);var eo=q("Minutes",!1);W("s",["ss",2],0,"second"),F("second","s"),B("second",15),Z("s",Gn),Z("ss",Gn,Hn),ne(["s","ss"],pi);var to=q("Seconds",!1);W("S",0,0,function(){return~~(this.millisecond()/100)}),W(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),W(0,["SSS",3],0,"millisecond"),W(0,["SSSS",4],0,function(){return 10*this.millisecond()}),W(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),W(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),W(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),W(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),W(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),F("millisecond","ms"),B("millisecond",16),Z("S",Kn,qn),Z("SS",Kn,Hn),Z("SSS",Kn,Vn);var ro;for(ro="SSSS";ro.length<=9;ro+="S")Z(ro,Zn);for(ro="S";ro.length<=9;ro+="S")ne(ro,Br);var no=q("Milliseconds",!1);W("z",0,0,"zoneAbbr"),W("zz",0,0,"zoneName");var io=b.prototype;io.add=Ki,io.calendar=Zt,io.clone=er,io.diff=sr,io.endOf=Sr,io.format=pr,io.from=fr,io.fromNow=hr,io.to=mr,io.toNow=gr,io.get=Y,io.invalidAt=Cr,io.isAfter=tr,io.isBefore=rr,io.isBetween=nr,io.isSame=ir,io.isSameOrAfter=or,io.isSameOrBefore=ar,io.isValid=Pr,io.lang=Ji,io.locale=vr,io.localeData=yr,io.max=Vi,io.min=Hi,io.parsingFlags=Rr,io.set=z,io.startOf=br,io.subtract=Xi,io.toArray=Tr,io.toObject=Or,io.toDate=Er,io.toISOString=ur,io.inspect=dr,io.toJSON=Ir,io.toString=lr,io.unix=wr,io.valueOf=_r,io.creationData=Ar,io.year=wi,io.isLeapYear=be,io.weekYear=kr,io.isoWeekYear=Dr,io.quarter=io.quarters=Lr,io.month=pe,io.daysInMonth=fe,io.week=io.weeks=Ce,io.isoWeek=io.isoWeeks=Ae,io.weeksInYear=Mr,io.isoWeeksInYear=$r,io.date=Zi,io.day=io.days=Le,io.weekday=Ue,io.isoWeekday=Be,io.dayOfYear=Ur,io.hour=io.hours=ki,io.minute=io.minutes=eo,io.second=io.seconds=to,io.millisecond=io.milliseconds=no,io.utcOffset=Mt,io.utc=Ft,io.local=Lt,io.parseZone=Ut,io.hasAlignedHourOffset=Bt,io.isDST=Nt,io.isLocal=Ht,io.isUtcOffset=Vt,io.isUtc=Yt,io.isUTC=Yt,io.zoneAbbr=Nr,io.zoneName=qr,io.dates=O("dates accessor is deprecated. Use date instead.",Zi),io.months=O("months accessor is deprecated. Use month instead",pe),io.years=O("years accessor is deprecated. Use year instead",wi),io.zone=O("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",xt),io.isDSTShifted=O("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",qt);var oo=A.prototype;oo.calendar=j,oo.longDateFormat=k,oo.invalidDate=D,oo.ordinal=$,oo.preparse=Yr,oo.postformat=Yr,oo.relativeTime=M,oo.pastFuture=x,oo.set=R,oo.months=se,oo.monthsShort=ce,oo.monthsParse=ue,oo.monthsRegex=me,oo.monthsShortRegex=he,oo.week=Ie,oo.firstDayOfYear=Re,oo.firstDayOfWeek=Pe,oo.weekdays=De,oo.weekdaysMin=Me,oo.weekdaysShort=$e,oo.weekdaysParse=Fe,oo.weekdaysRegex=Ne,oo.weekdaysShortRegex=qe,oo.weekdaysMinRegex=He,oo.isPM=Qe,oo.meridiem=Ke,et("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,r=1===w(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+r}}),r.lang=O("moment.lang is deprecated. Use moment.locale instead.",et),r.langData=O("moment.langData is deprecated. Use moment.localeData instead.",nt);var ao=Math.abs,so=dn("ms"),co=dn("s"),lo=dn("m"),uo=dn("h"),po=dn("d"),fo=dn("w"),ho=dn("M"),mo=dn("y"),go=fn("milliseconds"),vo=fn("seconds"),yo=fn("minutes"),bo=fn("hours"),So=fn("days"),_o=fn("months"),wo=fn("years"),Eo=Math.round,To={ss:44,s:45,m:45,h:22,d:26,M:11},Oo=Math.abs,Io=Rt.prototype;return Io.isValid=It,Io.abs=en,Io.add=rn,Io.subtract=nn,Io.as=ln,Io.asMilliseconds=so,Io.asSeconds=co,Io.asMinutes=lo,Io.asHours=uo,Io.asDays=po,Io.asWeeks=fo,Io.asMonths=ho,Io.asYears=mo,Io.valueOf=un,Io._bubble=an,Io.get=pn,Io.milliseconds=go,Io.seconds=vo,Io.minutes=yo,Io.hours=bo,Io.days=So,Io.weeks=hn,Io.months=_o,Io.years=wo,Io.humanize=bn,Io.toISOString=Sn,Io.toString=Sn,Io.toJSON=Sn,Io.locale=vr,Io.localeData=yr,Io.toIsoString=O("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Sn),Io.lang=Ji,W("X",0,0,"unix"),W("x",0,0,"valueOf"),Z("x",ei),Z("X",ni),ne("X",function(e,t,r){r._d=new Date(1e3*parseFloat(e,10))}),ne("x",function(e,t,r){r._d=new Date(w(e))}),r.version="2.18.1",n(_t),r.fn=io,r.min=Et,r.max=Tt,r.now=Yi,r.utc=f,r.unix=Hr,r.months=Qr,r.isDate=l,r.locale=et,r.invalid=v,r.duration=zt,r.isMoment=S,r.weekdays=Xr,r.parseZone=Vr,r.localeData=nt,r.isDuration=Ct,r.monthsShort=Kr,r.weekdaysMin=Zr,r.defineLocale=tt,r.updateLocale=rt,r.locales=it,r.weekdaysShort=Jr,r.normalizeUnits=L,r.relativeTimeRounding=vn,r.relativeTimeThreshold=yn,r.calendarFormat=Jt,r.prototype=io,r})},{}],327:[function(e,t,r){!function(){function e(e,t){window.XMLHttpRequest.prototype[e]=t(window.XMLHttpRequest.prototype[e])}function t(e,t,r){try{Object.defineProperty(e,t,{get:r})}catch(e){}}if(window.FileAPI||(window.FileAPI={}),!window.XMLHttpRequest)throw"AJAX is not supported. XMLHttpRequest is not defined.";if(FileAPI.shouldLoad=!window.FormData||FileAPI.forceLoad,FileAPI.shouldLoad){var r=function(e){if(!e.__listeners){e.upload||(e.upload={}),e.__listeners=[];var t=e.upload.addEventListener;e.upload.addEventListener=function(r,n){e.__listeners[r]=n,t&&t.apply(this,arguments)}}};e("open",function(e){return function(t,n,i){r(this),this.__url=n;try{e.apply(this,[t,n,i])}catch(r){r.message.indexOf("Access is denied")>-1&&(this.__origError=r,e.apply(this,[t,"_fix_for_ie_crossdomain__",i]))}}}),e("getResponseHeader",function(e){return function(t){return this.__fileApiXHR&&this.__fileApiXHR.getResponseHeader?this.__fileApiXHR.getResponseHeader(t):null==e?null:e.apply(this,[t])}}),e("getAllResponseHeaders",function(e){return function(){return this.__fileApiXHR&&this.__fileApiXHR.getAllResponseHeaders?this.__fileApiXHR.getAllResponseHeaders():null==e?null:e.apply(this)}}),e("abort",function(e){return function(){return this.__fileApiXHR&&this.__fileApiXHR.abort?this.__fileApiXHR.abort():null==e?null:e.apply(this)}}),e("setRequestHeader",function(e){return function(t,n){if("__setXHR_"===t){r(this);var i=n(this);i instanceof Function&&i(this)}else this.__requestHeaders=this.__requestHeaders||{},this.__requestHeaders[t]=n,e.apply(this,arguments)}}),e("send",function(e){return function(){var r=this;if(arguments[0]&&arguments[0].__isFileAPIShim){var n=arguments[0],i={url:r.__url,jsonp:!1,cache:!0,complete:function(e,n){e&&angular.isString(e)&&e.indexOf("#2174")!==-1&&(e=null),r.__completed=!0,!e&&r.__listeners.load&&r.__listeners.load({type:"load",loaded:r.__loaded,total:r.__total,target:r,lengthComputable:!0}),!e&&r.__listeners.loadend&&r.__listeners.loadend({type:"loadend",loaded:r.__loaded,total:r.__total,target:r,lengthComputable:!0}),"abort"===e&&r.__listeners.abort&&r.__listeners.abort({type:"abort",loaded:r.__loaded,total:r.__total,target:r,lengthComputable:!0}),void 0!==n.status&&t(r,"status",function(){return 0===n.status&&e&&"abort"!==e?500:n.status}),void 0!==n.statusText&&t(r,"statusText",function(){return n.statusText}),t(r,"readyState",function(){return 4}),void 0!==n.response&&t(r,"response",function(){return n.response});var i=n.responseText||(e&&0===n.status&&"abort"!==e?e:void 0);t(r,"responseText",function(){return i}),t(r,"response",function(){return i}),e&&t(r,"err",function(){return e}),r.__fileApiXHR=n,r.onreadystatechange&&r.onreadystatechange(),r.onload&&r.onload()},progress:function(e){if(e.target=r,r.__listeners.progress&&r.__listeners.progress(e),r.__total=e.total,r.__loaded=e.loaded,e.total===e.loaded){var t=this;setTimeout(function(){r.__completed||(r.getAllResponseHeaders=function(){},t.complete(null,{status:204,statusText:"No Content"}))},FileAPI.noContentTimeout||1e4)}},headers:r.__requestHeaders};i.data={},i.files={};for(var o=0;o<n.data.length;o++){var a=n.data[o];null!=a.val&&null!=a.val.name&&null!=a.val.size&&null!=a.val.type?i.files[a.key]=a.val:i.data[a.key]=a.val}setTimeout(function(){if(!FileAPI.hasFlash)throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';r.__fileApiXHR=FileAPI.upload(i)},1)}else{if(this.__origError)throw this.__origError;e.apply(r,arguments)}}}),window.XMLHttpRequest.__isFileAPIShim=!0,window.FormData=FormData=function(){return{append:function(e,t,r){t.__isFileAPIBlobShim&&(t=t.data[0]),this.data.push({key:e,val:t,name:r})},data:[],__isFileAPIShim:!0}},window.Blob=Blob=function(e){return{data:e,__isFileAPIBlobShim:!0}}}}(),function(){function e(e){return"input"===e[0].tagName.toLowerCase()&&e.attr("type")&&"file"===e.attr("type").toLowerCase()}function t(){try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(e)return!0}catch(e){if(void 0!==navigator.mimeTypes["application/x-shockwave-flash"])return!0}return!1}function r(e){var t=0,r=0;if(window.jQuery)return jQuery(e).offset();if(e.offsetParent)do t+=e.offsetLeft-e.scrollLeft,r+=e.offsetTop-e.scrollTop,e=e.offsetParent;while(e);return{left:t,top:r}}if(FileAPI.shouldLoad){if(FileAPI.hasFlash=t(),FileAPI.forceLoad&&(FileAPI.html5=!1),!FileAPI.upload){var n,i,o,a,s,c=document.createElement("script"),l=document.getElementsByTagName("script");if(window.FileAPI.jsUrl)n=window.FileAPI.jsUrl;else if(window.FileAPI.jsPath)i=window.FileAPI.jsPath;else for(o=0;o<l.length;o++)if(s=l[o].src,a=s.search(/\/ng\-file\-upload[\-a-zA-z0-9\.]*\.js/),a>-1){i=s.substring(0,a+1);break}null==FileAPI.staticPath&&(FileAPI.staticPath=i),c.setAttribute("src",n||i+"FileAPI.min.js"),document.getElementsByTagName("head")[0].appendChild(c)}FileAPI.ngfFixIE=function(n,i,o){if(!t())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';var a=function(){n.attr("disabled")?i&&i.removeClass("js-fileapi-wrapper"):(i.attr("__ngf_flash_")||(i.unbind("change"),i.unbind("click"),i.bind("change",function(e){s.apply(this,[e]),o.apply(this,[e])}),i.attr("__ngf_flash_","true")),i.addClass("js-fileapi-wrapper"),e(n)||i.css("position","absolute").css("top",r(n[0]).top+"px").css("left",r(n[0]).left+"px").css("width",n[0].offsetWidth+"px").css("height",n[0].offsetHeight+"px").css("filter","alpha(opacity=0)").css("display",n.css("display")).css("overflow","hidden").css("z-index","900000").css("visibility","visible"));
};n.bind("mouseenter",a);var s=function(e){for(var t=FileAPI.getFiles(e),r=0;r<t.length;r++)void 0===t[r].size&&(t[r].size=0),void 0===t[r].name&&(t[r].name="file"),void 0===t[r].type&&(t[r].type="undefined");e.target||(e.target={}),e.target.files=t,e.target.files!==t&&(e.__files_=t),(e.__files_||e.target.files).item=function(t){return(e.__files_||e.target.files)[t]||null}}},FileAPI.disableFileInput=function(e,t){t?e.removeClass("js-fileapi-wrapper"):e.addClass("js-fileapi-wrapper")}}}(),window.FileReader||(window.FileReader=function(){var e=this,t=!1;this.listeners={},this.addEventListener=function(t,r){e.listeners[t]=e.listeners[t]||[],e.listeners[t].push(r)},this.removeEventListener=function(t,r){e.listeners[t]&&e.listeners[t].splice(e.listeners[t].indexOf(r),1)},this.dispatchEvent=function(t){var r=e.listeners[t.type];if(r)for(var n=0;n<r.length;n++)r[n].call(e,t)},this.onabort=this.onerror=this.onload=this.onloadstart=this.onloadend=this.onprogress=null;var r=function(t,r){var n={type:t,target:e,loaded:r.loaded,total:r.total,error:r.error};return null!=r.result&&(n.target.result=r.result),n},n=function(n){t||(t=!0,e.onloadstart&&e.onloadstart(r("loadstart",n)));var i;"load"===n.type?(e.onloadend&&e.onloadend(r("loadend",n)),i=r("load",n),e.onload&&e.onload(i),e.dispatchEvent(i)):"progress"===n.type?(i=r("progress",n),e.onprogress&&e.onprogress(i),e.dispatchEvent(i)):(i=r("error",n),e.onerror&&e.onerror(i),e.dispatchEvent(i))};this.readAsArrayBuffer=function(e){FileAPI.readAsBinaryString(e,n)},this.readAsBinaryString=function(e){FileAPI.readAsBinaryString(e,n)},this.readAsDataURL=function(e){FileAPI.readAsDataURL(e,n)},this.readAsText=function(e){FileAPI.readAsText(e,n)}}),!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(e){return function(t,r){if("__setXHR_"===t){var n=r(this);n instanceof Function&&n(this)}else e.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var n=angular.module("ngFileUpload",[]);n.version="8.0.4",n.service("UploadBase",["$http","$q","$timeout",function(e,t,r){function i(n){function i(e){l.notify&&l.notify(e),u.progressFunc&&r(function(){u.progressFunc(e)})}function s(e){return null!=n._start&&a?{loaded:e.loaded+n._start,total:n._file.size,type:e.type,config:n,lengthComputable:!0,target:e.target}:e}function c(){e(n).then(function(e){a&&n._chunkSize&&!n._finished?(i({loaded:n._end,total:n._file.size,config:n,type:"progress"}),o.upload(n)):(n._finished&&delete n._finished,l.resolve(e))},function(e){l.reject(e)},function(e){l.notify(e)})}n.method=n.method||"POST",n.headers=n.headers||{};var l=n._deferred=n._deferred||t.defer(),u=l.promise;return n.headers.__setXHR_=function(){return function(e){e&&e instanceof XMLHttpRequest&&(n.__XHR=e,n.xhrFn&&n.xhrFn(e),e.upload.addEventListener("progress",function(e){e.config=n,i(s(e))},!1),e.upload.addEventListener("load",function(e){e.lengthComputable&&(e.config=n,i(s(e)))},!1))}},a?n._chunkSize&&n._end&&!n._finished?(n._start=n._end,n._end+=n._chunkSize,c()):n.resumeSizeUrl?e.get(n.resumeSizeUrl).then(function(e){n.resumeSizeResponseReader?n._start=n.resumeSizeResponseReader(e.data):n._start=parseInt((null==e.data.size?e.data:e.data.size).toString()),n._chunkSize&&(n._end=n._start+n._chunkSize),c()},function(e){throw e}):n.resumeSize?n.resumeSize().then(function(e){n._start=e,c()},function(e){throw e}):c():c(),u.success=function(e){return u.then(function(t){e(t.data,t.status,t.headers,n)}),u},u.error=function(e){return u.then(null,function(t){e(t.data,t.status,t.headers,n)}),u},u.progress=function(e){return u.progressFunc=e,u.then(null,null,function(t){e(t)}),u},u.abort=u.pause=function(){return n.__XHR&&r(function(){n.__XHR.abort()}),u},u.xhr=function(e){return n.xhrFn=function(t){return function(){t&&t.apply(u,arguments),e.apply(u,arguments)}}(n.xhrFn),u},u}var o=this;this.isResumeSupported=function(){return window.Blob&&Blob instanceof Function&&(new Blob).slice};var a=this.isResumeSupported();this.rename=function(e,t){return e.ngfName=t,e},this.jsonBlob=function(e){var t=new Blob([e],{type:"application/json"});return t._ngfBlob=!0,t},this.json=function(e){return angular.toJson(e)},this.upload=function(e){function t(e){return e instanceof Blob||e.flashId&&e.name&&e.size}function r(t,r){if(t._ngfBlob)return t;if(e._file=e._file||t,null!=e._start&&a){e._end&&e._end>=t.size&&(e._finished=!0,e._end=t.size);var n=t.slice(e._start,e._end||t.size);return n.name=t.name,n.ngfName=t.ngfName,e._chunkSize&&(r.append("_chunkSize",e._end-e._start),r.append("_chunkNumber",Math.floor(e._start/e._chunkSize)),r.append("_totalSize",e._file.size)),n}return t}function n(i,o,a){if(void 0!==o)if(angular.isDate(o)&&(o=o.toISOString()),angular.isString(o))i.append(a,o);else if(t(o)){var s=r(o,i),c=a.split(",");c[1]&&(s.ngfName=c[1].replace(/^\s+|\s+$/g,""),a=c[0]),e._fileKey=e._fileKey||a,i.append(a,s,s.ngfName||s.name)}else if(angular.isObject(o)){for(var l in o)if(o.hasOwnProperty(l)){var u=null==e.objectKey?"[i]":e.objectKey;o.length&&parseInt(l)>-1&&(u=null==e.arrayKey?u:e.arrayKey),n(i,o[l],a+u.replace(/[ik]/g,l))}}else i.append(a,o)}function s(){e._chunkSize=o.translateScalars(e.resumeChunkSize),e._chunkSize=e._chunkSize?parseInt(e._chunkSize.toString()):null,e.headers=e.headers||{},e.headers["Content-Type"]=void 0,e.transformRequest=e.transformRequest?angular.isArray(e.transformRequest)?e.transformRequest:[e.transformRequest]:[],e.transformRequest.push(function(t){var r,i=new FormData;t=t||e.fields||{},e.file&&(t.file=e.file);for(r in t)if(t.hasOwnProperty(r)){var o=t[r];e.formDataAppender?e.formDataAppender(i,r,o):n(i,o,r)}return i})}return e._isDigested||(e._isDigested=!0,s()),i(e)},this.http=function(t){return t.transformRequest=t.transformRequest||function(t){return window.ArrayBuffer&&t instanceof window.ArrayBuffer||t instanceof Blob?t:e.defaults.transformRequest[0].apply(this,arguments)},t._chunkSize=o.translateScalars(t.resumeChunkSize),t._chunkSize=t._chunkSize?parseInt(t._chunkSize.toString()):null,i(t)},this.translateScalars=function(e){if(angular.isString(e)){if(e.search(/kb/i)===e.length-2)return parseFloat(1e3*e.substring(0,e.length-2));if(e.search(/mb/i)===e.length-2)return parseFloat(1e6*e.substring(0,e.length-2));if(e.search(/gb/i)===e.length-2)return parseFloat(1e9*e.substring(0,e.length-2));if(e.search(/b/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/s/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/m/i)===e.length-1)return parseFloat(60*e.substring(0,e.length-1));if(e.search(/h/i)===e.length-1)return parseFloat(3600*e.substring(0,e.length-1))}return e},this.setDefaults=function(e){this.defaults=e||{}},this.defaults={},this.version=n.version}]),n.service("Upload",["$parse","$timeout","$compile","UploadResize",function(e,t,r,n){var i=n;return i.getAttrWithDefaults=function(e,t){return null!=e[t]?e[t]:null==i.defaults[t]?i.defaults[t]:i.defaults[t].toString()},i.attrGetter=function(t,r,n,i){if(!n)return this.getAttrWithDefaults(r,t);try{return i?e(this.getAttrWithDefaults(r,t))(n,i):e(this.getAttrWithDefaults(r,t))(n)}catch(e){if(t.search(/min|max|pattern/i))return this.getAttrWithDefaults(r,t);throw e}},i.updateModel=function(r,n,o,a,s,c,l){function u(){var l=s&&s.length?s[0]:null;if(r){var u=!i.attrGetter("ngfMultiple",n,o)&&!i.attrGetter("multiple",n)&&!m;e(i.attrGetter("ngModel",n)).assign(o,u?l:s)}var d=i.attrGetter("ngfModel",n);d&&e(d).assign(o,s),a&&e(a)(o,{$files:s,$file:l,$newFiles:p,$duplicateFiles:f,$event:c}),t(function(){})}function d(e,t){var r=i.attrGetter("ngfResize",n,o);if(!r||!i.isResizeSupported())return t();for(var a=e.length,s=function(){a--,0===a&&t()},c=function(t){return function(r){e.splice(t,1,r),s()}},l=function(e){return function(t){s(),e.$error="resize",e.$errorParam=(t?(t.message?t.message:t)+": ":"")+(e&&e.name)}},u=0;u<e.length;u++){var d=e[u];d.$error||0!==d.type.indexOf("image")?s():i.resize(d,r.width,r.height,r.quality).then(c(u),l(d))}}var p=s,f=[],h=(r&&r.$modelValue||n.$$ngfPrevFiles||[]).slice(0),m=i.attrGetter("ngfKeep",n,o);if(m===!0){if(!s||!s.length)return;var g=!1;if(i.attrGetter("ngfKeepDistinct",n,o)===!0){for(var v=h.length,y=0;y<s.length;y++){for(var b=0;b<v;b++)if(s[y].name===h[b].name){f.push(s[y]);break}b===v&&(h.push(s[y]),g=!0)}if(!g)return;s=h}else s=h.concat(s)}n.$$ngfPrevFiles=s,l?u():i.validate(s,r,n,o,i.attrGetter("ngfValidateLater",n),function(){if(i.attrGetter("ngfValidOnly",n,o)===!0){var e=[];angular.forEach(s,function(t){t.$error||e.push(t)}),s=e}d(s,function(){t(function(){u()})})});for(var S=h.length;S--;){var _=h[S];window.URL&&_.blobUrl&&(URL.revokeObjectURL(_.blobUrl),delete _.blobUrl)}},i}]),n.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(e,t,r,n){function i(e){var t=e.match(/Android[^\d]*(\d+)\.(\d+)/);if(t&&t.length>2){var r=n.defaults.androidFixMinorVersion||4;return parseInt(t[1])<4||parseInt(t[1])===r&&parseInt(t[2])<r}return e.indexOf("Chrome")===-1&&/.*Windows.*Safari.*/.test(e)}function o(e,t,r,n,o,s,c,l){function u(){return"input"===t[0].tagName.toLowerCase()&&r.type&&"file"===r.type.toLowerCase()}function d(){return b("ngfChange")||b("ngfSelect")}function p(t){for(var i=t.__files_||t.target&&t.target.files,o=[],a=0;a<i.length;a++)o.push(i[a]);l.updateModel(n,r,e,d(),o.length?o:null,t)}function f(e){if(t!==e)for(var r=0;r<t[0].attributes.length;r++){var n=t[0].attributes[r];"type"!==n.name&&"class"!==n.name&&"id"!==n.name&&"style"!==n.name&&(null!=n.value&&""!==n.value||("required"===n.name&&(n.value="required"),"multiple"===n.name&&(n.value="multiple")),e.attr(n.name,n.value))}}function h(){if(u())return t;var e=angular.element('<input type="file">');return f(e),e.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),a.push({el:t,ref:e}),document.body.appendChild(e[0]),e}function m(r){if(t.attr("disabled")||b("ngfSelectDisabled",e))return!1;var n=g(r);return null!=n?n:(v(r),i(navigator.userAgent)?setTimeout(function(){w[0].click()},0):w[0].click(),!1)}function g(e){var t=e.changedTouches||e.originalEvent&&e.originalEvent.changedTouches;if("touchstart"===e.type)return _=t?t[0].clientY:0,!0;if(e.stopPropagation(),e.preventDefault(),"touchend"===e.type){var r=t?t[0].clientY:0;if(Math.abs(r-_)>20)return!1}}function v(t){b("ngfResetOnClick",e)!==!1&&w.val()&&(w.val(null),l.updateModel(n,r,e,d(),null,t,!0))}function y(e){if(w&&!w.attr("__ngf_ie10_Fix_")){if(!w[0].parentNode)return void(w=null);e.preventDefault(),e.stopPropagation(),w.unbind("click");var t=w.clone();return w.replaceWith(t),w=t,w.attr("__ngf_ie10_Fix_","true"),w.bind("change",p),w.bind("click",y),w[0].click(),!1}w.removeAttr("__ngf_ie10_Fix_")}var b=function(e,t){return l.attrGetter(e,r,t)},S=[];S.push(e.$watch(b("ngfMultiple"),function(){w.attr("multiple",b("ngfMultiple",e))})),S.push(e.$watch(b("ngfCapture"),function(){w.attr("capture",b("ngfCapture",e))})),r.$observe("accept",function(){w.attr("accept",b("accept"))}),S.push(function(){r.$$observers&&delete r.$$observers.accept});var _=0,w=t;u()||(w=h()),w.bind("change",p),u()?t.bind("click",v):t.bind("click touchstart touchend",m),l.registerValidators(n,w,r,e),navigator.appVersion.indexOf("MSIE 10")!==-1&&w.bind("click",y),e.$on("$destroy",function(){u()||w.remove(),angular.forEach(S,function(e){e()})}),s(function(){for(var e=0;e<a.length;e++){var t=a[e];document.body.contains(t.el[0])||(a.splice(e,1),t.ref.remove())}}),window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(t,w,p)}var a=[];return{restrict:"AEC",require:"?ngModel",link:function(i,a,s,c){o(i,a,s,c,e,t,r,n)}}}]),function(){function e(e){return"img"===e.tagName.toLowerCase()?"image":"audio"===e.tagName.toLowerCase()?"audio":"video"===e.tagName.toLowerCase()?"video":/./}function t(t,r,n,i,o,a,s,c){function l(e){var a=t.attrGetter("ngfNoObjectUrl",o,n);t.dataUrl(e,a).finally(function(){r(function(){var t=(a?e.$ngfDataUrl:e.$ngfBlobUrl)||e.$ngfDataUrl;c?i.css("background-image","url('"+(t||"")+"')"):i.attr("src",t),t?i.removeClass("ngf-hide"):i.addClass("ngf-hide")})})}r(function(){var r=n.$watch(o[a],function(r){var n=s;if("ngfThumbnail"===a&&(n||(n={width:i[0].clientWidth,height:i[0].clientHeight}),0===n.width&&window.getComputedStyle)){var o=getComputedStyle(i[0]);n={width:parseInt(o.width.slice(0,-2)),height:parseInt(o.height.slice(0,-2))}}return angular.isString(r)?(i.removeClass("ngf-hide"),c?i.css("background-image","url('"+r+"')"):i.attr("src",r)):void(!r||!r.type||0!==r.type.search(e(i[0]))||c&&0!==r.type.indexOf("image")?i.addClass("ngf-hide"):n&&t.isResizeSupported()?t.resize(r,n.width,n.height,n.quality).then(function(e){l(e)},function(e){throw e}):l(r))});n.$on("$destroy",function(){r()})})}n.service("UploadDataUrl",["UploadBase","$timeout","$q",function(e,t,r){var n=e;return n.dataUrl=function(e,n){if(n&&null!=e.$ngfDataUrl||!n&&null!=e.$ngfBlobUrl){var i=r.defer();return t(function(){i.resolve(n?e.$ngfDataUrl:e.$ngfBlobUrl)}),i.promise}var o=n?e.$$ngfDataUrlPromise:e.$$ngfBlobUrlPromise;if(o)return o;var a=r.defer();return t(function(){if(window.FileReader&&e&&(!window.FileAPI||navigator.userAgent.indexOf("MSIE 8")===-1||e.size<2e4)&&(!window.FileAPI||navigator.userAgent.indexOf("MSIE 9")===-1||e.size<4e6)){var r=window.URL||window.webkitURL;if(r&&r.createObjectURL&&!n){var i;try{i=r.createObjectURL(e)}catch(r){return void t(function(){e.$ngfBlobUrl="",a.reject()})}t(function(){e.$ngfBlobUrl=i,i&&a.resolve(i)})}else{var o=new FileReader;o.onload=function(r){t(function(){e.$ngfDataUrl=r.target.result,a.resolve(r.target.result)})},o.onerror=function(){t(function(){e.$ngfDataUrl="",a.reject()})},o.readAsDataURL(e)}}else t(function(){e[n?"dataUrl":"blobUrl"]="",a.reject()})}),o=n?e.$$ngfDataUrlPromise=a.promise:e.$$ngfBlobUrlPromise=a.promise,o.finally(function(){delete e[n?"$$ngfDataUrlPromise":"$$ngfBlobUrlPromise"]}),o},n}]);var r=angular.element("<style>.ngf-hide{display:none !important}</style>");document.getElementsByTagName("head")[0].appendChild(r[0]),n.directive("ngfSrc",["Upload","$timeout",function(e,r){return{restrict:"AE",link:function(n,i,o){t(e,r,n,i,o,"ngfSrc",e.attrGetter("ngfResize",o,n),!1)}}}]),n.directive("ngfBackground",["Upload","$timeout",function(e,r){return{restrict:"AE",link:function(n,i,o){t(e,r,n,i,o,"ngfBackground",e.attrGetter("ngfResize",o,n),!0)}}}]),n.directive("ngfThumbnail",["Upload","$timeout",function(e,r){return{restrict:"AE",link:function(n,i,o){var a=e.attrGetter("ngfSize",o,n);t(e,r,n,i,o,"ngfThumbnail",a,e.attrGetter("ngfAsBackground",o,n))}}}])}(),n.service("UploadValidate",["UploadDataUrl","$q","$timeout",function(e,t,r){function n(e){var t="",r=[];if(e.length>2&&"/"===e[0]&&"/"===e[e.length-1])t=e.substring(1,e.length-1);else{var i=e.split(",");if(i.length>1)for(var o=0;o<i.length;o++){var a=n(i[o]);a.regexp?(t+="("+a.regexp+")",o<i.length-1&&(t+="|")):r=r.concat(a.excludes)}else 0===e.indexOf("!")?r.push("^((?!"+n(e.substring(1)).regexp+").)*$"):(0===e.indexOf(".")&&(e="*"+e),t="^"+e.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",t=t.replace(/\\\*/g,".*").replace(/\\\?/g,"."))}return{regexp:t,excludes:r}}var i=e;return i.registerValidators=function(e,t,r,n){function o(e){angular.forEach(e.$ngfValidations,function(t){e.$setValidity(t.name,t.valid)})}e&&(e.$ngfValidations=[],e.$formatters.push(function(a){return i.attrGetter("ngfValidateLater",r,n)||!e.$$ngfValidated?(i.validate(a,e,r,n,!1,function(){o(e),e.$$ngfValidated=!1}),a&&0===a.length&&(a=null),!t||null!=a&&0!==a.length||t.val()&&t.val(null)):(o(e),e.$$ngfValidated=!1),a}))},i.validatePattern=function(e,t){if(!t)return!0;var r=n(t),i=!0;if(r.regexp&&r.regexp.length){var o=new RegExp(r.regexp,"i");i=null!=e.type&&o.test(e.type)||null!=e.name&&o.test(e.name)}for(var a=r.excludes.length;a--;){var s=new RegExp(r.excludes[a],"i");i=i&&(null==e.type||s.test(e.type))&&(null==e.name||s.test(e.name))}return i},i.validate=function(e,t,r,n,o,a){function s(r,n,i){if(e){for(var o="ngf"+r[0].toUpperCase()+r.substr(1),a=e.length,s=null;a--;){var c=e[a],u=l(o,{$file:c});null==u&&(u=n(l("ngfValidate")||{}),s=null==s||s),null!=u&&(i(c,u)||(c.$error=r,c.$errorParam=u,e.splice(a,1),s=!1))}null!==s&&t.$ngfValidations.push({name:r,valid:s})}}function c(r,n,i,o,s){if(e){var c=0,d=!1,p="ngf"+r[0].toUpperCase()+r.substr(1);e=void 0===e.length?[e]:e,angular.forEach(e,function(e){if(0!==e.type.search(i))return!0;var f=l(p,{$file:e})||n(l("ngfValidate",{$file:e})||{});f&&(u++,c++,o(e,f).then(function(t){s(t,f)||(e.$error=r,e.$errorParam=f,d=!0)},function(){l("ngfValidateForce",{$file:e})&&(e.$error=r,e.$errorParam=f,d=!0)}).finally(function(){u--,c--,c||t.$ngfValidations.push({name:r,valid:!d}),u||a.call(t,t.$ngfValidations)}))})}}t=t||{},t.$ngfValidations=t.$ngfValidations||[],angular.forEach(t.$ngfValidations,function(e){e.valid=!0});var l=function(e,t){return i.attrGetter(e,r,n,t)};if(o)return void a.call(t);if(t.$$ngfValidated=!0,null==e||0===e.length)return void a.call(t);if(e=void 0===e.length?[e]:e.slice(0),s("pattern",function(e){return e.pattern},i.validatePattern),s("minSize",function(e){return e.size&&e.size.min},function(e,t){return e.size>=i.translateScalars(t)}),s("maxSize",function(e){return e.size&&e.size.max},function(e,t){return e.size<=i.translateScalars(t)}),s("validateFn",function(){return null},function(e,t){return t===!0||null===t||""===t}),!e.length)return void a.call(t,t.$ngfValidations);var u=0;c("maxHeight",function(e){return e.height&&e.height.max},/image/,this.imageDimensions,function(e,t){return e.height<=t}),c("minHeight",function(e){return e.height&&e.height.min},/image/,this.imageDimensions,function(e,t){return e.height>=t}),c("maxWidth",function(e){return e.width&&e.width.max},/image/,this.imageDimensions,function(e,t){return e.width<=t}),c("minWidth",function(e){return e.width&&e.width.min},/image/,this.imageDimensions,function(e,t){return e.width>=t}),c("ratio",function(e){return e.ratio},/image/,this.imageDimensions,function(e,t){for(var r=t.toString().split(","),n=!1,i=0;i<r.length;i++){var o=r[i],a=o.search(/x/i);o=a>-1?parseFloat(o.substring(0,a))/parseFloat(o.substring(a+1)):parseFloat(o),Math.abs(e.width/e.height-o)<1e-4&&(n=!0)}return n}),c("maxDuration",function(e){return e.duration&&e.duration.max},/audio|video/,this.mediaDuration,function(e,t){return e<=i.translateScalars(t)}),c("minDuration",function(e){return e.duration&&e.duration.min},/audio|video/,this.mediaDuration,function(e,t){return e>=i.translateScalars(t)}),c("validateAsyncFn",function(){return null},/./,function(e,t){return t},function(e){return e===!0||null===e||""===e}),u||a.call(t,t.$ngfValidations)},i.imageDimensions=function(e){if(e.$ngfWidth&&e.$ngfHeight){var n=t.defer();return r(function(){n.resolve({width:e.$ngfWidth,height:e.$ngfHeight})}),n.promise}if(e.$ngfDimensionPromise)return e.$ngfDimensionPromise;var o=t.defer();return r(function(){return 0!==e.type.indexOf("image")?void o.reject("not image"):void i.dataUrl(e).then(function(t){function n(){var t=s[0].clientWidth,r=s[0].clientHeight;s.remove(),e.$ngfWidth=t,e.$ngfHeight=r,o.resolve({width:t,height:r})}function i(){s.remove(),o.reject("load error")}function a(){r(function(){s[0].parentNode&&(s[0].clientWidth?n():c>10?i():a())},1e3)}var s=angular.element("<img>").attr("src",t).css("visibility","hidden").css("position","fixed");s.on("load",n),s.on("error",i);var c=0;a(),angular.element(document.getElementsByTagName("body")[0]).append(s)},function(){o.reject("load error")})}),e.$ngfDimensionPromise=o.promise,e.$ngfDimensionPromise.finally(function(){delete e.$ngfDimensionPromise}),e.$ngfDimensionPromise},i.mediaDuration=function(e){if(e.$ngfDuration){var n=t.defer();return r(function(){n.resolve(e.$ngfDuration)}),n.promise}if(e.$ngfDurationPromise)return e.$ngfDurationPromise;var o=t.defer();return r(function(){return 0!==e.type.indexOf("audio")&&0!==e.type.indexOf("video")?void o.reject("not media"):void i.dataUrl(e).then(function(t){function n(){var t=s[0].duration;e.$ngfDuration=t,s.remove(),o.resolve(t)}function i(){s.remove(),o.reject("load error")}function a(){r(function(){s[0].parentNode&&(s[0].duration?n():c>10?i():a())},1e3)}var s=angular.element(0===e.type.indexOf("audio")?"<audio>":"<video>").attr("src",t).css("visibility","none").css("position","fixed");s.on("loadedmetadata",n),s.on("error",i);var c=0;a(),angular.element(document.body).append(s)},function(){o.reject("load error")})}),e.$ngfDurationPromise=o.promise,e.$ngfDurationPromise.finally(function(){delete e.$ngfDurationPromise}),e.$ngfDurationPromise},i}]),n.service("UploadResize",["UploadValidate","$q","$timeout",function(e,t,r){var n=e,i=function(e,t,r,n){var i=Math.min(r/e,n/t);return{width:e*i,height:t*i}},o=function(e,r,n,o,a){var s=t.defer(),c=document.createElement("canvas"),l=document.createElement("img");return 0===r&&(r=l.width,n=l.height),l.onload=function(){try{var e=i(l.width,l.height,r,n);c.width=e.width,c.height=e.height;var t=c.getContext("2d");t.drawImage(l,0,0,e.width,e.height),s.resolve(c.toDataURL(a||"image/WebP",o||1))}catch(e){s.reject(e)}},l.onerror=function(){s.reject()},l.src=e,s.promise},a=function(e){for(var t=e.split(","),r=t[0].match(/:(.*?);/)[1],n=atob(t[1]),i=n.length,o=new Uint8Array(i);i--;)o[i]=n.charCodeAt(i);return new Blob([o],{type:r})};return n.isResizeSupported=function(){var e=document.createElement("canvas");return window.atob&&e.getContext&&e.getContext("2d")},n.resize=function(e,i,s,c){var l=t.defer();return 0!==e.type.indexOf("image")?(r(function(){l.resolve("Only images are allowed for resizing!")}),l.promise):(n.dataUrl(e,!0).then(function(t){o(t,i,s,c,e.type).then(function(t){var r=a(t);r.name=e.name,l.resolve(r)},function(){l.reject()})},function(){l.reject()}),l.promise)},n}]),function(){function e(e,r,n,i,o,a,s,c){function l(){return r.attr("disabled")||f("ngfDropDisabled",e)}function u(e,t,r,n){var i=f("ngfDragOverClass",e,{$event:r}),o="dragover";if(angular.isString(i))o=i;else if(i&&(i.delay&&(v=i.delay),i.accept||i.reject)){var a=r.dataTransfer.items;if(null!=a&&a.length)for(var s=i.pattern||f("ngfPattern",e,{$event:r}),l=a.length;l--;){if("file"!==a[l].kind||!c.validatePattern(a[l],s)){o=i.reject;break}o=i.accept}else o=i.accept}n(o)}function d(e,t,r,n){function i(e,t,r){if(null!=t)if(t.isDirectory){var n=(r||"")+t.name;e.push({name:t.name,type:"directory",path:n});var o=t.createReader(),a=[];c++;var s=function(){o.readEntries(function(n){try{if(n.length)a=a.concat(Array.prototype.slice.call(n||[],0)),s();else{for(var o=0;o<a.length;o++)i(e,a[o],(r?r:"")+t.name+"/");c--}}catch(e){c--,console.error(e)}},function(){c--})};s()}else c++,t.file(function(t){try{c--,t.path=(r?r:"")+t.name,e.push(t)}catch(e){c--,console.error(e)}},function(){c--})}var o=[],c=0,l=e.dataTransfer.items;if(l&&l.length>0&&"file"!==s.protocol())for(var u=0;u<l.length;u++){if(l[u].webkitGetAsEntry&&l[u].webkitGetAsEntry()&&l[u].webkitGetAsEntry().isDirectory){var d=l[u].webkitGetAsEntry();if(d.isDirectory&&!r)continue;null!=d&&i(o,d)}else{var p=l[u].getAsFile();null!=p&&o.push(p)}if(!n&&o.length>0)break}else{var f=e.dataTransfer.files;if(null!=f)for(var h=0;h<f.length&&(o.push(f.item(h)),n||!(o.length>0));h++);}var m=0;!function e(r){a(function(){if(c)10*m++<2e4&&e(10);else{if(!n&&o.length>1){for(u=0;"directory"===o[u].type;)u++;o=[o[u]]}t(o)}},r||0)}()}var p=t(),f=function(e,t,r){return c.attrGetter(e,n,t,r)};if(f("dropAvailable")&&a(function(){e[f("dropAvailable")]?e[f("dropAvailable")].value=p:e[f("dropAvailable")]=p}),!p)return void(f("ngfHideOnDropNotAvailable",e)===!0&&r.css("display","none"));c.registerValidators(i,null,n,e);var h,m=null,g=o(f("ngfStopPropagation")),v=1;r[0].addEventListener("dragover",function(t){if(!l()){if(t.preventDefault(),g(e)&&t.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var i=t.dataTransfer.effectAllowed;t.dataTransfer.dropEffect="move"===i||"linkMove"===i?"move":"copy"}a.cancel(m),h||(h="C",u(e,n,t,function(e){h=e,r.addClass(h)}))}},!1),r[0].addEventListener("dragenter",function(t){l()||(t.preventDefault(),g(e)&&t.stopPropagation())},!1),r[0].addEventListener("dragleave",function(){l()||(m=a(function(){h&&r.removeClass(h),h=null},v||1))},!1),r[0].addEventListener("drop",function(t){l()||(t.preventDefault(),g(e)&&t.stopPropagation(),h&&r.removeClass(h),h=null,d(t,function(r){c.updateModel(i,n,e,f("ngfChange")||f("ngfDrop"),r,t)},f("ngfAllowDir",e)!==!1,f("multiple")||f("ngfMultiple",e)))},!1),r[0].addEventListener("paste",function(t){if(!l()){var r=[],o=t.clipboardData||t.originalEvent.clipboardData;if(o&&o.items){for(var a=0;a<o.items.length;a++)o.items[a].type.indexOf("image")!==-1&&r.push(o.items[a].getAsFile());c.updateModel(i,n,e,f("ngfChange")||f("ngfDrop"),r,t)}}},!1)}function t(){var e=document.createElement("div");return"draggable"in e&&"ondrop"in e&&!/Edge\/12./i.test(navigator.userAgent)}n.directive("ngfDrop",["$parse","$timeout","$location","Upload",function(t,r,n,i){return{restrict:"AEC",require:"?ngModel",link:function(o,a,s,c){e(o,a,s,c,t,r,n,i)}}}]),n.directive("ngfNoFileDrop",function(){return function(e,r){t()&&r.css("display","none")}}),n.directive("ngfDropAvailable",["$parse","$timeout","Upload",function(e,r,n){return function(i,o,a){if(t()){var s=e(n.attrGetter("ngfDropAvailable",a));r(function(){s(i),s.assign&&s.assign(i,!0)})}}}])}()},{}],328:[function(e,t,r){e("./dist/ng-file-upload-all"),t.exports="ngFileUpload"},{"./dist/ng-file-upload-all":327}],329:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],r=s.bundleStore.get("selector",e),n=document.querySelector(r);return(0,a.default)(r,e,t),angular.bootstrap(n,[r])}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var o=e("./bundle"),a=n(o),s=e("./writers");t.exports=r.default},{"./bundle":330,"./writers":357}],330:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){function r(e){if(e){if(g.has(e)||d(g,e.token))return;g.add(e);var t=e.useClass||e.useFactory||e;l(t).forEach(function(e){return v.add(e)}),s(t).forEach(r)}}var n,o=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],s=function(e){return a.bundleStore.get("providers",e)||[]},l=function(e){return a.bundleStore.get("modules",e)||[]},d=function(e,t){return[].concat(i(e)).filter(function(e){return t&&e.token===t}).length>0},f=(0,p.default)([t].concat(i(o)),"during bundle entry point for '"+e+"' module"),h=f.modules,m=f.providers,g=new Set,v=new Set(h);return m.forEach(r),(n=(0,c.default)(e,[].concat(i(v)))).add.apply(n,i(u.default.resolve()).concat(i(g)))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var a=e("./writers"),s=e("./classes/module"),c=n(s),l=e("./events/events"),u=n(l),d=e("./util/group-modules-providers"),p=n(d);t.exports=r.default},{"./classes/module":332,"./events/events":344,"./util/group-modules-providers":353,"./writers":357}],331:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t){n(this,e),this.namespace=t}return i(e,[{key:"_map",value:function(e,t){return Reflect.hasOwnMetadata(this.namespace,e,t)||Reflect.defineMetadata(this.namespace,new Map,e,t),Reflect.getOwnMetadata(this.namespace,e,t)}},{key:"get",value:function(e,t,r){return this._map(t,r).get(e)}},{key:"set",value:function(e,t,r,n){this._map(r,n).set(e,t)}},{key:"has",value:function(e,t,r){return this._map(t,r).has(e)}},{key:"push",value:function(e,t,r,n){this.has(e,r,n)||this.set(e,[],r,n);var i=this.get(e,r,n);if(!Array.isArray(i))throw new Error("Metastores can only push metadata to array values");i.push(t)}},{key:"merge",value:function(e,t,r,n){var i=this.get(e,r,n)||{},o=Object.assign({},i,t);this.set(e,o,r,n)}},{key:"forEach",value:function(e,t,r){this._map(t,r).forEach(e)}}]),e}();r.default=o,t.exports=r.default},{}],332:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e("../writers"),a={},s=function(){function e(t){var r=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];n(this,e),this.name=t,r?(this.moduleList(r),this._module=angular.module(t,this._dependencies)):this._module=angular.module(t)}return i(e,[{key:"add",value:function(){for(var e=this,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r.filter(function(e){return!e.isProvider}),s=r.filter(function(e){return e.isProvider}),c=function(t){if(!o.providerStore.has("type",t))throw new Error("Cannot read provider metadata. Are you adding a class that hasn't been decorated yet?");var r=o.providerStore.get("type",t),n=o.providerStore.get("name",t),i=o.bundleStore.get("$inject",t)||[];if(!a[r])throw new Error("No parser registered for type '"+r+"'");a[r](t,n,i,e._module)};return i.forEach(c),s.forEach(c),this}},{key:"publish",value:function(){return this._module}},{key:"moduleList",value:function(e){if(this._dependencies=[],e&&0!==e.length)for(var t=0;t<e.length;t++)if("string"==typeof e[t])this._dependencies.push(e[t]);else{if(!e[t]||!e[t].name)throw new Error("Cannot read module: Unknown module in "+this.name);this._dependencies.push(e[t].name)}}},{key:"config",value:function(e){return this._module.config(e),this}},{key:"run",value:function(e){return this._module.run(e),this}},{key:"value",value:function(e,t){return this._module.value(e,t),this}},{key:"constant",value:function(e,t){return this._module.constant(e,t),this}}]),e}();r.DecoratedModule=s;var c=function(e,t){return new s(e,t)};c.addProvider=function(e,t){a[e]=t},c.getParser=function(e){return a[e]},r.default=c},{"../writers":357}],333:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t){n(this,e),this._desc=t}return i(e,[{key:"toString",value:function(){return"Token "+this._desc}}]),e}();r.OpaqueToken=o},{}],334:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("../writers"),c=e("./module"),l=n(c),u=e("../decorators/inject"),d=e("../util/get-injectable-name"),p=e("../decorators/providers"),f=e("../decorators/injectable"),h="provider",m=function(){function e(t,r){var n=r.useClass,a=r.useValue,c=r.useConstant,l=r.useFactory,f=r.deps;
o(this,e),this.isProvider=!0,this._dependencies=[];try{this.token=(0,d.getInjectableNameWithJitCreation)(t)}catch(e){throw new Error("new Provider() Error: Invalid token "+t)}if(Object.assign(this,{useClass:n,useValue:a,useConstant:c,useFactory:l}),!(n||a||c||l))throw new Error("new Provider("+t+") Error: No usage provided (i.e. useClass, useValue, useConstant, useFactory)");f&&(u.Inject.apply(void 0,i(f))(this.useFactory),p.Providers.apply(void 0,i(f.filter(function(e){return"string"!=typeof e})))(this.useFactory,"while analyzing Provider '"+this.token+"' useFactory deps"),this._dependencies=s.bundleStore.get("$inject",this.useFactory)),s.providerStore.set("name",this.token,this),s.providerStore.set("type",h,this)}return a(e,[{key:"type",get:function(){var e=this;return this._type?this._type:(this._type=Object.keys(this).find(function(t){return t.startsWith("use")&&void 0!==e[t]}),this._type)}},{key:"dependencies",get:function(){return this._dependencies}}]),e}();r.Provider=m,l.default.addProvider(h,function(e,t,r,n){switch(e.type){case"useValue":n.value(e.token,e.useValue);break;case"useConstant":n.constant(e.token,e.useConstant);break;case"useClass":r=s.bundleStore.get("$inject",e.useClass)||[],l.default.getParser(f.INJECTABLE)(e.useClass,e.token,r,n);break;case"useFactory":n.factory(e.token,[].concat(i(e.dependencies),[e.useFactory]))}});var g=function(e,t){var r=t.useClass,n=t.useValue,i=t.useConstant,o=t.useFactory,a=t.deps;return new m(e,{useClass:r,useValue:n,useConstant:i,useFactory:o,deps:a})};r.provide=g},{"../decorators/inject":337,"../decorators/injectable":338,"../decorators/providers":341,"../util/get-injectable-name":352,"../writers":357,"./module":332}],335:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e){var t=e.selector,r=e.controllerAs,n=e.template,o=e.templateUrl,c=e.providers,p=void 0===c?[]:c,f=e.inputs,h=void 0===f?[]:f,m=e.outputs,v=void 0===m?[]:m,y=e.pipes,S=void 0===y?[]:y,w=e.directives,E=void 0===w?[]:w;return function(e){if(!t)throw new Error('Component Decorator Error in "'+e.name+'": Component selector must be provided');var c=(0,l.default)(t),f=c.name,m=c.type;u.providerStore.set("name",f,e),u.providerStore.set("type",_,e),u.bundleStore.set("selector",t,e),d.Providers.apply(void 0,i(p))(e,"while analyzing Component '"+e.name+"' providers"),u.componentStore.set("restrict",m,e),u.componentStore.set("scope",{},e),u.componentStore.set("transclude",!0,e),u.componentStore.set("bindToController",!0,e),[["inputs",h],["providers",p],["directives",E],["outputs",v]].forEach(function(t){var r=s(t,2),n=r[0],i=r[1];if(void 0!==i&&!Array.isArray(i))throw new TypeError('Component Decorator Error in "'+e.name+'": Component '+n+" must be an array")}),(0,g.writeMapMulti)(e,h,"inputMap");var y=(0,g.writeMapMulti)(e,v,"outputMap");Object.keys(y).forEach(function(e){return b.default.add(e)}),"$auto"===r?u.componentStore.set("controllerAs",f,e):r?u.componentStore.set("controllerAs",r,e):u.componentStore.set("controllerAs","ctrl",e),e.link&&u.componentStore.set("link",e.link,e),e.compile&&u.componentStore.set("compile",e.compile,e),a({selector:t,template:n,templateUrl:o,pipes:S,directives:E})(e)}}function a(e){var t=e.selector,r=e.template,n=e.templateUrl,o=e.pipes,a=void 0===o?[]:o,s=e.directives,c=void 0===s?[]:s;return function(e){if(n)u.componentStore.set("templateUrl",n,e);else{if(!r)throw new Error("@Component config must include either a template or a template url for component with selector "+t+" on "+e.name);u.componentStore.set("template",r,e)}d.Providers.apply(void 0,i(c))(e,"while analyzing Component '"+e.name+"' directives"),d.Providers.apply(void 0,i(a))(e,"while analyzing Component '"+e.name+"' pipes")}}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();r.Component=o,r.View=a;var c=e("../util/parse-selector"),l=n(c),u=e("../writers"),d=e("./providers"),p=e("../classes/module"),f=n(p),h=e("../util/directive-controller"),m=n(h),g=e("./input-output"),v=e("../properties/inputs-builder"),y=e("../events/events"),b=n(y),S=e("../util/helpers"),_="component",w={_after:[],_extendDDO:[],_beforeCtrlInvoke:[],_afterCtrlInvoke:[],after:function(e){this._after.push(e)},extendDDO:function(e){this._extendDDO.push(e)},beforeCtrlInvoke:function(e){this._beforeCtrlInvoke.push(e)},afterCtrlInvoke:function(e){this._afterCtrlInvoke.push(e)}};r.componentHooks=w,f.default.addProvider(_,function(e,t,r,n){function i(t,n,i,a,s){var c={$scope:t,$element:n,$attrs:i,$transclude:a};return(0,m.default)(this,r,e,o,s,c)}var o={};u.componentStore.forEach(function(e,t){return o[t]=e},e);var a=angular.version.minor>=4?"bindToController":"scope";if(o[a]=(0,v.inputsMap)(o.inputMap),"E"!==o.restrict)throw new Error((0,S.createConfigErrorMessage)(e,n,"@Component selectors can only be elements. Perhaps you meant to use @Directive?"));i.$inject=["$scope","$element","$attrs","$transclude","$injector"],o.controller=i,"function"==typeof e.prototype.ngAfterViewInit&&(o.link=function(){return o.ngAfterViewInitBound()}),o.template&&o.template.replace&&(o.template=o.template.replace(/ng-content/g,"ng-transclude")),w._extendDDO.forEach(function(i){return i(o,e,t,r,n)}),n.directive(t,function(){return o}),w._after.forEach(function(i){return i(e,t,r,n)})})},{"../classes/module":332,"../events/events":344,"../properties/inputs-builder":346,"../util/directive-controller":351,"../util/helpers":354,"../util/parse-selector":356,"../writers":357,"./input-output":339,"./providers":341}],336:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e){var t=e.selector,r=e.providers,n=void 0===r?[]:r;return function(e){if(!t)throw new Error("Directive selector must be provided");var r=(0,s.default)(t),o=r.name,a=r.type;if(void 0!==n&&!Array.isArray(n))throw new TypeError("Directive providers must be an array");c.providerStore.set("name",o,e),c.providerStore.set("type",m,e),c.bundleStore.set("selector",t,e),l.Providers.apply(void 0,i(n))(e,"while analyzing Directive '"+e.name+"' providers"),c.componentStore.set("restrict",a,e)}}Object.defineProperty(r,"__esModule",{value:!0}),r.Directive=o;var a=e("../util/parse-selector"),s=n(a),c=e("../writers"),l=e("./providers"),u=e("../classes/module"),d=n(u),p=e("../util/directive-controller"),f=n(p),h=e("../util/helpers"),m="directive";d.default.addProvider(m,function(e,t,r,n){var i={};if(c.componentStore.forEach(function(e,t){return i[t]=e},e),"A"!==i.restrict)throw new Error((0,h.createConfigErrorMessage)(e,n,"@Directive selectors can only be attributes, e.g. selector: '[my-directive]'"));n.directive(t,["$injector",function(t){return i.link=function(n,o,a,s,c){var l={$scope:n,$element:o,$attrs:a,$transclude:c,$requires:s};return(0,f.default)(this,r,e,i,t,l)},i}])})},{"../classes/module":332,"../util/directive-controller":351,"../util/helpers":354,"../util/parse-selector":356,"../writers":357,"./providers":341}],337:[function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e,r){var i=arguments.length<=2||void 0===arguments[2]?{value:void 0}:arguments[2],o=i.value,u=1===arguments.length,d=u?e:o,p=function(e){return"string"!=typeof e&&!(e instanceof l.OpaqueToken)},f=function(e){if(!a.providerStore.get("name",e)||!a.providerStore.get("type",e))throw new Error('Processing "'+d.name+'" @Inject parameter: "'+(e.name||e.toString())+'" is not a valid injectable.\n\t\t\t\tPlease ensure '+(e.name||e.toString())+" is injectable. Valid examples can be:\n\t\t\t\t- a string representing an ng1 provider, e.g. '$q'\n\t\t\t\t- an @Injectable ng-forward class\n\t\t\t\t- a Provider, e.g. provide(SOME_CONFIG, {asValue: 100})");return e},h=t.filter(p).map(f);c.Providers.apply(void 0,n(h))(d,"while analyzing '"+d.name+"' injected providers");var m=t.map(s.getInjectableName).filter(function(e){return void 0!==e});if(a.bundleStore.has("$inject",d)){var g=a.bundleStore.get("$inject",d);a.bundleStore.set("$inject",[].concat(n(m),n(g)),d)}else a.bundleStore.set("$inject",m,d)}}function o(e,t,r,n,i,o){t.forEach(function(e){if(!i.has(e)){var t=o.$element;do if(t.controller){var r=t.controller(e);if(r)return void(o[e]=r)}while((t=t.parent())&&t.length>0)}})}Object.defineProperty(r,"__esModule",{value:!0}),r.Inject=i;var a=e("../writers"),s=e("../util/get-injectable-name"),c=e("../decorators/providers"),l=e("../classes/opaque-token"),u=e("./component");u.componentHooks.beforeCtrlInvoke(o)},{"../classes/opaque-token":333,"../decorators/providers":341,"../util/get-injectable-name":352,"../writers":357,"./component":335}],338:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(r,"__esModule",{value:!0});var o=e("../classes/module"),a=n(o),s=e("../util/decorator-factory"),c=n(s),l="injectable";r.INJECTABLE=l;var u=(0,c.default)(l);r.Injectable=u,a.default.addProvider(l,function(e,t,r,n){n.service(t,[].concat(i(r),[e]))})},{"../classes/module":332,"../util/decorator-factory":350}],339:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return function(t,r){d(t.constructor,r,e,"inputMap")}}function o(e){return function(t,r){var n=d(t.constructor,r,e,"outputMap");Object.keys(n).forEach(function(e){return u.default.add(e)})}}Object.defineProperty(r,"__esModule",{value:!0}),r.Input=i,r.Output=o;var a=e("../writers"),s=e("../properties/parse-property-map"),c=n(s),l=e("../events/events"),u=n(l),d=function(e,t,r,n){var i=t+(r?":"+r:""),o=(0,c.default)([i]),s=a.componentStore.get(n,e)||{};return a.componentStore.set(n,Object.assign({},s,o),e),o};r.writeMapSingle=d;var p=function(e,t,r){var n=(0,c.default)(t),i=a.componentStore.get(r,e)||{};return a.componentStore.set(r,Object.assign({},i,n),e),n};r.writeMapMulti=p},{"../events/events":344,"../properties/parse-property-map":348,"../writers":357}],340:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(r,"__esModule",{value:!0});var o=Function.prototype.bind,a=e("../classes/module"),s=n(a),c=e("../util/decorator-factory"),l=n(c),u="pipe",d=(0,l.default)(u);r.Pipe=d,s.default.addProvider(u,function(e,t,r,n){n.filter(t,[].concat(i(r),[function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=new(o.apply(e,[null].concat(n)));if(!a.transform)throw new Error("Filters must implement a transform method");return function(e){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];if(a.supports&&!a.supports(e))throw new Error("Filter "+t+" does not support "+e);return a.transform.apply(a,[e].concat(n))}}]))})},{"../classes/module":332,"../util/decorator-factory":350}],341:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){var r=arguments.length<=1||void 0===arguments[1]?"while parsing "+e.name+"'s providers":arguments[1];return function(){var n=(0,c.default)(t,r),o=n.modules,s=n.providers,l=a.bundleStore.get("modules",e)||[];a.bundleStore.set("modules",[].concat(i(o),i(l)),e);var u=a.bundleStore.get("providers",e)||[];a.bundleStore.set("providers",[].concat(i(s),i(u)),e)}()}}Object.defineProperty(r,"__esModule",{value:!0}),r.Providers=o;var a=e("../writers"),s=e("../util/group-modules-providers"),c=n(s)},{"../util/group-modules-providers":353,"../writers":357}],342:[function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e){return function(t){l.Providers.apply(void 0,n(e.map(function(e){return e.component})))(t,"while analyzing StateConfig '"+t.name+"' state components"),c.componentStore.set(h,e,t),e.forEach(function(e){if(e.component){var t=c.componentStore.get(f,e.component)||[];c.componentStore.set(f,[].concat(n(t),[e]),e.component)}})}}function a(e){return void 0!==e.name&&"Function"===e.constructor.name}function s(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0];return function(t,r,n){var o=n.value;if(!a(t))throw new Error("@Resolve target must be a static method.");c.componentStore.merge(m,i({},e||r,o),t)}}Object.defineProperty(r,"__esModule",{value:!0}),r.StateConfig=o,r.Resolve=s;var c=e("../writers"),l=e("./providers"),u=e("./component"),d=e("../util/helpers"),p=e("../util/get-injectable-name"),f="ui-router.stateConfigs",h="ui-router.stateChildConfigs",m="ui-router.annotatedResolves",g="ui-router.resolvedMap";u.componentHooks.extendDDO(function(e){e.template&&e.template.replace&&(e.template=e.template.replace(/ng-outlet/g,"ui-view"))}),u.componentHooks.after(function(e,t,r,i){var o=c.componentStore.get(h,e);if(o){if(!Array.isArray(o))throw new TypeError((0,d.createConfigErrorMessage)(e,i,"@StateConfig param must be an array of state objects."));i.config(["$stateProvider",function(e){e&&o.forEach(function(t){function r(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r.reduce(function(e,t,r){return e[s[r]]=t,e},{});c.componentStore.set(g,i,t.component)}var i=c.bundleStore.get("selector",t.component);t.template=t.template||"<"+i+"></"+i+">";var o=c.componentStore.get(m,t.component)||{};Object.keys(o).forEach(function(e){var t=o[e],r=c.bundleStore.get("$inject",t);t.$inject=r}),t.resolve=Object.assign({},t.resolve,o);var a=c.bundleStore.get("$inject",t.component),s=a?a.map(p.getInjectableName):[];t.controller=t.controller||[].concat(n(s),[r]),e.state(t.name,t)})}])}}),u.componentHooks.beforeCtrlInvoke(function(e,t,r,n,i,o){var a=c.componentStore.get(g,r);Object.assign(o,a)})},{"../util/get-injectable-name":352,"../util/helpers":354,"../writers":357,"./component":335,"./providers":341}],343:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e,t,r){for(var n=!0;n;){var i=e,o=t,a=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var c=s.get;if(void 0===c)return;return c.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,r=a,n=!0,s=l=void 0}},s=e("rxjs/Subject"),c=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]||arguments[0];n(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this._isAsync=e}return i(t,e),o(t,[{key:"subscribe",value:function(e,r,n){if(e&&"object"==typeof e){var i=this._isAsync?function(t){setTimeout(function(){return e.next(t)})}:function(t){e.next(t)};return a(Object.getPrototypeOf(t.prototype),"subscribe",this).call(this,i,function(t){return e.error?e.error(t):null},function(){return e.complete?e.complete():null})}var i=this._isAsync?function(t){setTimeout(function(){return e(t)})}:function(t){e(t)};return a(Object.getPrototypeOf(t.prototype),"subscribe",this).call(this,i,function(e){return r?r(e):null},function(){return n?n():null})}}]),t}(s.Subject);r.default=c,t.exports=r.default},{"rxjs/Subject":416}],344:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=[];return m.forEach(function(t){var r="[("+(0,p.dasherize)(t)+")]",n=function(){function e(n,o,a,s){var c=this;i(this,e),this.$element=o,this.$scope=s;var l=(0,d.default)(r),u=l.name;this.expression=n(a[u]),o.on(t,function(e){return c.eventHandler(e)}),s.$on("$destroy",function(){return c.onDestroy()})}return s(e,[{key:"eventHandler",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.detail;!t&&e.originalEvent&&e.originalEvent.detail?t=e.originalEvent.detail:t||(t={}),this.expression(this.$scope,Object.assign(t,{$event:e})),this.$scope.$applyAsync()}},{key:"onDestroy",value:function(){this.$element.off(t)}}]),e}();n=f([(0,c.Directive)({selector:r}),(0,l.Inject)("$parse","$element","$attrs","$scope"),h("design:paramtypes",[Function,Object,Object,Object])],n),e.push(n)}),e}function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(function(e){return m.add(e)})}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=e("../decorators/directive"),l=e("../decorators/inject"),u=e("../util/parse-selector"),d=n(u),p=e("../util/helpers"),f=function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},h=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=new Set(["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","keydown","keyup","keypress","submit","focus","blur","copy","cut","paste","change","dragstart","drag","dragenter","dragleave","dragover","drop","dragend","error","input","load","wheel","scroll"]);r.default={resolve:o,add:a},t.exports=r.default},{"../decorators/directive":336,"../decorators/inject":337,"../util/helpers":354,"../util/parse-selector":356}],345:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("./classes/module"),o=n(i),a=e("./classes/metastore"),s=n(a),c=e("./classes/opaque-token"),l=e("./classes/provider"),u=e("./decorators/component"),d=e("./decorators/directive"),p=e("./decorators/inject"),f=e("./decorators/injectable"),h=e("./decorators/pipe"),m=e("./decorators/providers"),g=e("./decorators/input-output"),v=e("./decorators/state-config"),y=e("./events/events"),b=n(y),S=e("./events/event-emitter"),_=n(S),w=e("./bootstrap"),E=n(w),T=e("./bundle"),O=n(T),I=e("./util/get-injectable-name"),P=e("./writers");e("./util/jqlite-extensions"),r.Module=o.default,r.Metastore=s.default,r.OpaqueToken=c.OpaqueToken,r.Provider=l.Provider,r.provide=l.provide,r.Component=u.Component,r.Directive=d.Directive,r.Inject=p.Inject,r.Injectable=f.Injectable,r.Pipe=h.Pipe,r.Providers=m.Providers,r.Input=g.Input,r.Output=g.Output,r.StateConfig=v.StateConfig,r.Resolve=v.Resolve,r.events=b.default,r.EventEmitter=_.default,r.bootstrap=E.default,r.bundle=O.default,r.getInjectableName=I.getInjectableName,r.bundleStore=P.bundleStore,r.providerStore=P.providerStore,r.componentStore=P.componentStore},{"./bootstrap":329,"./bundle":330,"./classes/metastore":331,"./classes/module":332,"./classes/opaque-token":333,"./classes/provider":334,"./decorators/component":335,"./decorators/directive":336,"./decorators/inject":337,"./decorators/injectable":338,"./decorators/input-output":339,"./decorators/pipe":340,"./decorators/providers":341,"./decorators/state-config":342,"./events/event-emitter":343,"./events/events":344,"./util/get-injectable-name":352,"./util/jqlite-extensions":355,"./writers":357}],346:[function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e){return"undefined"!=typeof e}function o(e){var t={};for(var r in e){var n=e[r];t["@"+r]="@"+n,t["["+e[r]+"]"]="=?",t["[("+e[r]+")]"]="=?"}return t}function a(e,t,r){function o(r,n){return function(o){this[n]=o,i(o)&&a(r,t),e[v][t]===r&&(this[t]=o)}}function a(t,r){if(e[v][r]&&e[v][r]!==t)throw new Error("Can not use more than one type of attribute binding simultaneously: "+r+", ["+r+"], [("+r+")]. Choose one.");e[v][r]=t}var u,d="@"+t,p="["+r+"]",f="[("+r+")]",h=Symbol(),m=Symbol(),g=Symbol(),v=Symbol();Object.defineProperties(e,(u={},n(u,d,{enumerable:!1,configurable:!1,set:o(s,h),get:function(){return this[h]}}),n(u,p,{enumerable:!1,configurable:!1,set:o(c,m),get:function(){return this[m]}}),n(u,f,{enumerable:!1,configurable:!1,set:o(l,g),get:function(){return this[t]}}),n(u,v,{enumerable:!1,configurable:!1,writable:!0,value:e.__using_binding||{}}),u))}Object.defineProperty(r,"__esModule",{value:!0}),r.inputsMap=o,r.default=a;var s="_bind_string_",c="_bind_oneway_",l="_bind_twoway_"},{}],347:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("../events/event-emitter"),o=n(i),a=e("../util/custom-event"),s=n(a);r.default=function(e,t,r,n){var i=[],a=function(e,r){return r.subscribe(function(r){var n=new s.default(e,{detail:r,bubbles:!1});t[0].dispatchEvent(n)})};for(var c in n)e[c]&&e[c]instanceof o.default&&i.push(a(n[c],e[c]));r.$on("$destroy",function(e){i.forEach(function(e){return e.unsubscribe()})})},t.exports=r.default},{"../events/event-emitter":343,"../util/custom-event":349}],348:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){for(var t={},r=0;r<e.length;r++){for(var n=e[r].split(":"),i=0;i<n.length;i++)n[i]=n[i].trim();if(1===n.length)t[n[0]]=n[0];else{if(2!==n.length)throw new Error('Inputs and outputs must be in the form of "propName: attrName" or in the form of "attrName"');t[n[0]]=n[1]}}return t},t.exports=r.default},{}],349:[function(e,t,r){"use strict";function n(){try{var e=new a("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){return!1}}function i(e){var t=arguments.length<=1||void 0===arguments[1]?{bubbles:!1,cancelable:!1,detail:{}}:arguments[1],r=document.createEvent("CustomEvent");return r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r}function o(e){var t=arguments.length<=1||void 0===arguments[1]?{bubbles:!1,cancelable:!1,detail:{}}:arguments[1],r=document.createEventObject();return r.type=e,r.bubbles=t.bubbles,r.cancelable=t.cancelable,r.detail=t.detail,r}Object.defineProperty(r,"__esModule",{value:!0});var a=CustomEvent,s=void 0;s=n()?a:"function"==typeof document.createEvent?i:o,r.default=s,t.exports=r.default},{}],350:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../writers"),i=function(){return Math.floor(100*Math.random())};r.default=function(e){function t(e){for(var t=!0;t;){var n=e;t=!1;{if(!r.has(n))return n;e=""+n+i(),t=!0}}}var r=(arguments.length<=1||void 0===arguments[1]?"provider":arguments[1],new Set),o=function(t){return new Error("A provider with type "+e+" and name "+t+" has already been registered")};return function(){var i=function(i){var a=function(i){var o=t(i.name);n.providerStore.set("type",e,i),n.providerStore.set("name",o,i),r.add(o)};if("string"==typeof i){if(r.has(i))throw o(i);return function(t){n.providerStore.set("type",e,t),n.providerStore.set("name",i,t),r.add(i)}}return void 0===i?function(e){return a(e)}:void a(i)};return i.clearNameCache=function(){return r.clear()},i}()},t.exports=r.default},{"../writers":357}],351:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(r,"__esModule",{value:!0});var o=e("../properties/inputs-builder"),a=n(o),s=e("../properties/outputs-builder"),c=n(s),l=e("../decorators/component");r.default=function(e,t,r,n,o,s){var u=Object.create(r.prototype);l.componentHooks._beforeCtrlInvoke.forEach(function(i){return i(e,t,r,n,o,s)}),o.invoke([].concat(i(t),[r]),u,s),l.componentHooks._afterCtrlInvoke.forEach(function(i){return i(e,t,r,n,o,s)});for(var d in n.inputMap)(0,a.default)(u,d,n.inputMap[d]);Object.assign(u,e);var p=s.$element,f=s.$scope;return(0,c.default)(u,p,f,n.outputMap||{}),"function"==typeof u.ngOnInit&&u.ngOnInit(),"function"==typeof u.ngOnDestroy&&f.$on("$destroy",u.ngOnDestroy.bind(u)),"function"==typeof u.ngAfterViewInit&&(n.ngAfterViewInitBound=u.ngAfterViewInit.bind(u)),u},t.exports=r.default},{"../decorators/component":335,"../properties/inputs-builder":346,"../properties/outputs-builder":347}],352:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../writers"),i=e("../decorators/injectable"),o=e("../classes/opaque-token"),a=function(e){return"string"==typeof e||e instanceof o.OpaqueToken?e.toString():n.providerStore.has("type",e)?n.providerStore.get("name",e):void 0};r.getInjectableName=a;var s=function(e){var t=a(e);return t?t:"function"==typeof e?((0,i.Injectable)(e),n.providerStore.get("name",e)):void 0};r.getInjectableNameWithJitCreation=s},{"../classes/opaque-token":333,"../decorators/injectable":338,"../writers":357}],353:[function(e,t,r){"use strict";function n(e){var t=arguments.length<=1||void 0===arguments[1]?"while analyzing providers":arguments[1];e=(0,o.flatten)(e);var r=e.filter(s),n=e.filter(c),i=e.filter(function(e){return!s(e)}).filter(function(e){return!c(e)});if(i.length>0)throw new TypeError("TypeError "+t+".\n    Invalid Providers: please make sure all providers are an Injectable(), Component(), Directive(), a Provider, or a module string.\n    Here's the invalid values: "+i.join(", "));return{modules:r,providers:n}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var i=e("../writers"),o=e("./helpers"),a=e("./../classes/provider"),s=function(e){return"string"==typeof e},c=function(e){return("function"==typeof e||e instanceof a.Provider)&&i.providerStore.has("name",e)};t.exports=r.default},{"../writers":357,"./../classes/provider":334,"./helpers":354}],354:[function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function i(e){return""+e.charAt(0).toUpperCase()+e.substring(1)}function o(e){var t=e.split("-");return""+t.shift()+t.map(i).join("")}function a(e){var t=arguments.length<=1||void 0===arguments[1]?"-":arguments[1];return e.replace(u,function(e,r){return""+(r?t:"")+e.toLowerCase()})}function s(e){var t=arguments.length<=1||void 0===arguments[1]?"-":arguments[1];return e.replace(u,function(e,r){return""+(r?t:"")+e.toLowerCase()})}function c(e){var t=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;Array.isArray(l)?t.push.apply(t,n(c(l))):t.push(l)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return t}function l(e,t,r){return'Processing "'+e.name+'" in "'+t.name+'": '+r}Object.defineProperty(r,"__esModule",{value:!0}),r.ucFirst=i,r.dashToCamel=o,r.dasherize=a,r.snakeCase=s,r.flatten=c,r.createConfigErrorMessage=l;var u=/[A-Z]/g},{}],355:[function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../writers"),s=e("./get-injectable-name"),c=function(){function e(){i(this,e)}return o(e,null,[{key:"all",value:function(){return"*"}},{key:"css",value:function(e){return e}},{key:"directive",value:function(e){return a.bundleStore.get("selector",e)}}]),e}();r.By=c,function(e){Object.defineProperties(e,{nativeElement:{get:function(){return this[0]}},componentInstance:{get:function(){if(this._componentInstance)return this._componentInstance;var e=this.isolateScope();return this._componentInstance=e&&e.ctrl||null,this._componentInstance}},componentViewChildren:{get:function(){return[].concat(n(this.children())).map(function(e){return angular.element(e)})}},getLocal:{value:function(e){return(this.injector()||this.inheritedData("$injector")).get((0,s.getInjectableName)(e))}},query:{value:function(e,t){var r=this.queryAll(e,t);return r.length>0?r[0]:null}},queryAll:{value:function(e,t){if(t)throw Error("scope argument not yet supported. All queries are done with Scope.all for now.");return Array.from(this[0].querySelectorAll(e)).map(function(e){return angular.element(e)})}},getDirectiveInstance:{value:function(e){throw new Error("Not yet implemented in ng-forward.")}},triggerEventHandler:{value:function(e,t){throw new Error("Not yet implemented in ng-forward.")}},inject:{value:function(e){throw new Error("Not yet implemented in ng-forward.")}},hasDirective:{value:function(e){throw new Error("Not yet implemented in ng-forward.")}}})}(angular.element.prototype),r.default=angular.element},{"../writers":357,"./get-injectable-name":352}],356:[function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=void 0,r=void 0;null!==e.match(/\[(.*?)\]/)?(t=e.slice(1,e.length-1).split("-"),r="A"):"."===e[0]?(t=e.slice(1,e.length).split("-"),r="C"):(t=e.split("-"),r="E");var i=t.shift(),o=void 0;if(t.length>0){for(var a=0;a<t.length;a++){var s=t[a];s=s.slice(0,1).toUpperCase()+s.slice(1,s.length),t[a]=s}o=[i].concat(n(t)).join("")}else o=i;return{name:o,type:r}},t.exports=r.default},{}],357:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("./classes/metastore"),o=n(i),a=new o.default("$component");r.componentStore=a;var s=new o.default("$provider");r.providerStore=s;var c=new o.default("$bundle");r.bundleStore=c},{"./classes/metastore":331}],358:[function(e,t,r){t.exports=e("./cjs")},{"./cjs":345}],359:[function(e,t,r){!function(e,t,r){"use strict";t.module("ngIdle",["ngIdle.keepalive","ngIdle.idle","ngIdle.countdown","ngIdle.title","ngIdle.localStorage"]),t.module("ngIdle.keepalive",[]).provider("Keepalive",function(){var e={http:null,interval:600};this.http=function(r){if(!r)throw new Error("Argument must be a string containing a URL, or an object containing the HTTP request configuration.");
t.isString(r)&&(r={url:r,method:"GET"}),r.cache=!1,e.http=r};var r=this.interval=function(t){if(t=parseInt(t),isNaN(t)||t<=0)throw new Error("Interval must be expressed in seconds and be greater than 0.");e.interval=t};this.$get=["$rootScope","$log","$interval","$http",function(n,i,o,a){function s(e){n.$broadcast("KeepaliveResponse",e.data,e.status)}function c(){n.$broadcast("Keepalive"),t.isObject(e.http)&&a(e.http).then(s).catch(s)}var l={ping:null};return{_options:function(){return e},setInterval:r,start:function(){return o.cancel(l.ping),l.ping=o(c,1e3*e.interval),l.ping},stop:function(){o.cancel(l.ping)},ping:function(){c()}}}]}),t.module("ngIdle.idle",["ngIdle.keepalive","ngIdle.localStorage"]).provider("Idle",function(){var e={idle:1200,timeout:30,autoResume:"idle",interrupt:"mousemove keydown DOMMouseScroll mousewheel mousedown touchstart touchmove scroll",windowInterrupt:null,keepalive:!0},r=this.timeout=function(r){if(r===!1)e.timeout=0;else{if(!(t.isNumber(r)&&r>=0))throw new Error("Timeout must be zero or false to disable the feature, or a positive integer (in seconds) to enable it.");e.timeout=r}};this.interrupt=function(t){e.interrupt=t},this.windowInterrupt=function(t){e.windowInterrupt=t};var n=this.idle=function(t){if(t<=0)throw new Error("Idle must be a value in seconds, greater than 0.");e.idle=t};this.autoResume=function(t){t===!0?e.autoResume="idle":t===!1?e.autoResume="off":e.autoResume=t},this.keepalive=function(t){e.keepalive=t===!0},this.$get=["$interval","$log","$rootScope","$document","Keepalive","IdleLocalStorage","$window",function(i,o,a,s,c,l,u){function d(){e.keepalive&&(S.running&&c.ping(),c.start())}function p(){e.keepalive&&c.stop()}function f(){S.idling=!S.idling;var t=S.idling?"IdleStart":"IdleEnd";S.idling?(a.$broadcast(t),p(),e.timeout&&(S.countdown=e.timeout,h(),S.timeout=i(h,1e3,e.timeout,!1))):(d(),a.$broadcast(t)),i.cancel(S.idle)}function h(){if(S.idling){if(S.countdown<=0)return void g();a.$broadcast("IdleWarn",S.countdown),S.countdown--}}function m(e){a.$broadcast("IdleInterrupt",e)}function g(){p(),i.cancel(S.idle),i.cancel(S.timeout),S.idling=!0,S.running=!1,S.countdown=0,a.$broadcast("IdleTimeout")}function v(e,t,r){var n=e.running();e.unwatch(),t(r),n&&e.watch()}function y(){var e=l.get("expiry");return e&&e.time?new Date(e.time):null}function b(e){e?l.set("expiry",{id:_,time:e}):l.remove("expiry")}var S={idle:null,timeout:null,idling:!1,running:!1,countdown:null},_=(new Date).getTime(),w={_options:function(){return e},_getNow:function(){return new Date},getIdle:function(){return e.idle},getTimeout:function(){return e.timeout},setIdle:function(e){v(this,n,e)},setTimeout:function(e){v(this,r,e)},isExpired:function(){var e=y();return null!==e&&e<=this._getNow()},running:function(){return S.running},idling:function(){return S.idling},watch:function(t){i.cancel(S.idle),i.cancel(S.timeout);var r=e.timeout?e.timeout:0;t||b(new Date((new Date).getTime()+1e3*(e.idle+r))),S.idling?f():S.running||d(),S.running=!0,S.idle=i(f,1e3*e.idle,0,!1)},unwatch:function(){i.cancel(S.idle),i.cancel(S.timeout),S.idling=!1,S.running=!1,b(null),p()},interrupt:function(t){if(S.running){if(e.timeout&&this.isExpired())return void g();m(t),(t||"idle"===e.autoResume||"notIdle"===e.autoResume&&!S.idling)&&this.watch(t)}}},E={clientX:null,clientY:null,swap:function(e){var t={clientX:this.clientX,clientY:this.clientY};return this.clientX=e.clientX,this.clientY=e.clientY,t},hasMoved:function(e){var t=this.swap(e);return!(null!==this.clientX&&!e.movementX&&!e.movementY)||(t.clientX!=e.clientX||t.clientY!=e.clientY)}};if(s.find("html").on(e.interrupt,function(e){"mousemove"===e.type&&e.originalEvent&&0===e.originalEvent.movementX&&0===e.originalEvent.movementY||("mousemove"!==e.type||E.hasMoved(e))&&w.interrupt()}),e.windowInterrupt)for(var T=e.windowInterrupt.split(" "),O=function(){w.interrupt()},I=0;I<T.length;I++)u.addEventListener?u.addEventListener(T[I],O,!1):u.attachEvent(T[I],O);var P=function(e){if("ngIdle.expiry"===e.key&&e.newValue&&e.newValue!==e.oldValue){var r=t.fromJson(e.newValue);if(r.id===_)return;w.interrupt(!0)}};return u.addEventListener?u.addEventListener("storage",P,!1):u.attachEvent&&u.attachEvent("onstorage",P),w}]}),t.module("ngIdle.countdown",["ngIdle.idle"]).directive("idleCountdown",["Idle",function(e){return{restrict:"A",scope:{value:"=idleCountdown"},link:function(t){t.value=e.getTimeout(),t.$on("IdleWarn",function(e,r){t.$evalAsync(function(){t.value=r})}),t.$on("IdleTimeout",function(){t.$evalAsync(function(){t.value=0})})}}}]),t.module("ngIdle.title",[]).provider("Title",function(){function e(e,t,r){return new Array(t-String(e).length+1).join(r||"0")+e}var r={enabled:!0},n=this.enabled=function(e){r.enabled=e===!0};this.$get=["$document","$interpolate",function(i,o){var a={original:null,idle:"{{minutes}}:{{seconds}} until your session times out!",timedout:"Your session has expired."};return{setEnabled:n,isEnabled:function(){return r.enabled},original:function(e){return t.isUndefined(e)?a.original:void(a.original=e)},store:function(e){!e&&a.original||(a.original=this.value())},value:function(e){return t.isUndefined(e)?i[0].title:void(i[0].title=e)},idleMessage:function(e){return t.isUndefined(e)?a.idle:void(a.idle=e)},timedOutMessage:function(e){return t.isUndefined(e)?a.timedout:void(a.timedout=e)},setAsIdle:function(t){this.store();var r={totalSeconds:t};r.minutes=Math.floor(t/60),r.seconds=e(t-60*r.minutes,2),this.value(o(this.idleMessage())(r))},setAsTimedOut:function(){this.store(),this.value(this.timedOutMessage())},restore:function(){this.original()&&this.value(this.original())}}}]}).directive("title",["Title",function(e){return{restrict:"E",link:function(t,r,n){e.isEnabled()&&!n.idleDisabled&&(e.store(!0),t.$on("IdleStart",function(){e.original(r[0].innerText)}),t.$on("IdleWarn",function(t,r){e.setAsIdle(r)}),t.$on("IdleEnd",function(){e.restore()}),t.$on("IdleTimeout",function(){e.setAsTimedOut()}))}}}]),t.module("ngIdle.localStorage",[]).service("IdleStorageAccessor",["$window",function(e){return{get:function(){return e.localStorage}}}]).service("IdleLocalStorage",["IdleStorageAccessor",function(e){function n(){var e={};this.setItem=function(t,r){e[t]=r},this.getItem=function(t){return"undefined"!=typeof e[t]?e[t]:null},this.removeItem=function(t){e[t]=r}}function i(){try{var t=e.get();return t.setItem("ngIdleStorage",""),t.removeItem("ngIdleStorage"),t}catch(e){return new n}}var o=i();return{set:function(e,r){o.setItem("ngIdle."+e,t.toJson(r))},get:function(e){return t.fromJson(o.getItem("ngIdle."+e))},remove:function(e){o.removeItem("ngIdle."+e)},_wrapped:function(){return o}}}])}(window,window.angular)},{}],360:[function(e,t,r){e("./angular-idle"),t.exports="ngIdle"},{"./angular-idle":359}],361:[function(e,t,r){angular.module("infinite-scroll",[]).value("THROTTLE_MILLISECONDS",null).directive("infiniteScroll",["$rootScope","$window","$interval","THROTTLE_MILLISECONDS",function(e,t,r,n){return{scope:{infiniteScroll:"&",infiniteScrollContainer:"=",infiniteScrollDistance:"=",infiniteScrollDisabled:"=",infiniteScrollUseDocumentBottom:"=",infiniteScrollListenForEvent:"@"},link:function(i,o,a){var s,c,l,u,d,p,f,h,m,g,v,y,b,S,_,w,E,T,O;return O=angular.element(t),S=null,_=null,l=null,u=null,v=!0,T=!1,E=null,c=!1,g=function(e){return e=e[0]||e,isNaN(e.offsetHeight)?e.document.documentElement.clientHeight:e.offsetHeight},y=function(e){if(e[0].getBoundingClientRect&&!e.css("none"))return e[0].getBoundingClientRect().top+b(e)},b=function(e){return e=e[0]||e,isNaN(window.pageYOffset)?e.document.documentElement.scrollTop:e.ownerDocument.defaultView.pageYOffset},m=function(){var t,n,a,s,d;return u===O?(t=g(u)+b(u[0].document.documentElement),a=y(o)+g(o)):(t=g(u),n=0,void 0!==y(u)&&(n=y(u)),a=y(o)-n+g(o)),T&&(a=g((o[0].ownerDocument||o[0].document).documentElement)),s=a-t,d=s<=g(u)*S+1,d?(l=!0,_?i.$$phase||e.$$phase?i.infiniteScroll():i.$apply(i.infiniteScroll):void 0):(c&&r.cancel(c),l=!1)},w=function(e,t){var n,i,o;return o=null,i=0,n=function(){return i=(new Date).getTime(),r.cancel(o),o=null,e.call()},function(){var a,s;return a=(new Date).getTime(),s=t-(a-i),s<=0?(r.cancel(o),o=null,i=a,e.call()):o?void 0:o=r(n,s,1)}},null!=n&&(m=w(m,n)),i.$on("$destroy",function(){if(u.unbind("scroll",m),null!=E&&(E(),E=null),c)return r.cancel(c)}),f=function(e){return S=parseFloat(e)||0},i.$watch("infiniteScrollDistance",f),f(i.infiniteScrollDistance),p=function(e){if(_=!e,_&&l)return l=!1,m()},i.$watch("infiniteScrollDisabled",p),p(i.infiniteScrollDisabled),h=function(e){return T=e},i.$watch("infiniteScrollUseDocumentBottom",h),h(i.infiniteScrollUseDocumentBottom),s=function(e){if(null!=u&&u.unbind("scroll",m),u=e,null!=e)return u.bind("scroll",m)},s(O),i.infiniteScrollListenForEvent&&(E=e.$on(i.infiniteScrollListenForEvent,m)),d=function(e){if(null!=e&&0!==e.length){if(e.nodeType&&1===e.nodeType?e=angular.element(e):"function"==typeof e.append?e=angular.element(e[e.length-1]):"string"==typeof e&&(e=angular.element(document.querySelector(e))),null!=e)return s(e);throw new Error("invalid infinite-scroll-container attribute.")}},i.$watch("infiniteScrollContainer",d),d(i.infiniteScrollContainer||[]),null!=a.infiniteScrollParent&&s(angular.element(o.parent())),null!=a.infiniteScrollImmediateCheck&&(v=i.$eval(a.infiniteScrollImmediateCheck)),c=r(function(){return v&&m(),r.cancel(c)})}}}]),"undefined"!=typeof t&&"undefined"!=typeof r&&t.exports===r&&(t.exports="infinite-scroll")},{}],362:[function(e,t,r){"use strict";function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}n(e("./src/core/di"));var i=e("./src/core/util");r.bundle=i.bundle;var o=e("./src/core/directives");r.Directive=o.Directive,r.Component=o.Component,r.NgModule=o.NgModule,r.Attr=o.Attr,r.Input=o.Input,r.Output=o.Output,r.HostBinding=o.HostBinding,r.HostListener=o.HostListener,r.ViewChild=o.ViewChild,r.ViewChildren=o.ViewChildren,r.ContentChild=o.ContentChild,r.ContentChildren=o.ContentChildren;var a=e("./src/core/pipes");r.Pipe=a.Pipe,n(e("./src/core/change_detection"));var s=e("./src/facade/lang");r.enableProdMode=s.enableProdMode;var c=e("./src/facade/facade");r.EventEmitter=c.EventEmitter},{"./src/core/change_detection":363,"./src/core/di":368,"./src/core/directives":377,"./src/core/pipes":395,"./src/core/util":403,"./src/facade/facade":409,"./src/facade/lang":410}],363:[function(e,t,r){"use strict";var n=e("./change_detection/change_detection_util");r.SimpleChange=n.SimpleChange;var i=e("./change_detection/constants");r.ChangeDetectionStrategy=i.ChangeDetectionStrategy;var o=e("./change_detection/change_detector_ref");r.ChangeDetectorRef=o.ChangeDetectorRef},{"./change_detection/change_detection_util":364,"./change_detection/change_detector_ref":365,"./change_detection/constants":367}],364:[function(e,t,r){"use strict";var n=e("../../facade/lang"),i=function(){function e(){}return e}();r.UninitializedValue=i;var o=new i,a=function(){function e(e,t){this.previousValue=e,this.currentValue=t}return e.prototype.isFirstChange=function(){return this.previousValue===o},e}();r.SimpleChange=a;var s=function(){function e(){}return e.simpleChange=function(e,t){return new a(e,t)},e.isOnPushChangeDetectionStrategy=function(e){return n.isPresent(e)&&0===e},e}();s.uninitialized=o,r.ChangeDetectionUtil=s},{"../../facade/lang":410}],365:[function(e,t,r){"use strict";function n(e){if(e&&e.$root!==e&&!e.$$destroyed){var t=e.$parent;e.$$disconnected=!0,t.$$childHead===e&&(t.$$childHead=e.$$nextSibling),t.$$childTail===e&&(t.$$childTail=e.$$prevSibling),e.$$prevSibling&&(e.$$prevSibling.$$nextSibling=e.$$nextSibling),e.$$nextSibling&&(e.$$nextSibling.$$prevSibling=e.$$prevSibling),e.$$nextSibling=e.$$prevSibling=null}}function i(e){if(e&&e.$root!==e&&e.$$disconnected){var t=e,r=t.$parent;t.$$disconnected=!1,t.$$prevSibling=r.$$childTail,r.$$childHead?(r.$$childTail.$$nextSibling=t,r.$$childTail=t):r.$$childHead=r.$$childTail=t}}var o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=e("../di/decorators"),c=l=function(){function e(e){this.$scope=e}return e.create=function(e){return new l(e)},e.prototype.markForCheck=function(){this.$scope.$applyAsync()},e.prototype.detach=function(){n(this.$scope)},e.prototype.detectChanges=function(){this.$scope.$digest()},e.prototype.checkNoChanges=function(){},e.prototype.reattach=function(){i(this.$scope)},e}();c=l=o([s.Injectable("changeDetectorRef"),a("design:paramtypes",[Object])],c),r.ChangeDetectorRef=c;var l},{"../di/decorators":369}],366:[function(e,t,r){"use strict";var n=e("../../facade/lang"),i=10,o=i,a=function(){function e(){}return e.prototype.buildFlushOnChanges=function(e){function t(e){return n.isFunction(a.flushOnChangesQueue)?a.flushOnChangesQueue:(a.flushOnChangesQueue=r(e),a.flushOnChangesQueue)}function r(e){return function(){try{if(!--o)throw a.onChangesQueue=void 0,new Error("infchng, "+i+" ngOnChanges() iterations reached. Aborting!\n");e.$apply(function(){for(var e=0,t=a.onChangesQueue.length;e<t;++e)a.onChangesQueue[e]();a.onChangesQueue=void 0})}finally{o++}}}var a=this;t(e)},e}();r.ChangesQueue=a,r.changesQueueService=new a},{"../../facade/lang":410}],367:[function(e,t,r){"use strict";function n(e){return o.isBlank(e)||1===e}var i,o=e("../../facade/lang");!function(e){e[e.NeverChecked=0]="NeverChecked",e[e.CheckedBefore=1]="CheckedBefore",e[e.Errored=2]="Errored"}(i=r.ChangeDetectorState||(r.ChangeDetectorState={}));var a;!function(e){e[e.OnPush=0]="OnPush",e[e.Default=1]="Default"}(a=r.ChangeDetectionStrategy||(r.ChangeDetectionStrategy={})),r.CHANGE_DETECTION_STRATEGY_VALUES=[0,1],r.CHANGE_DETECTOR_STATE_VALUES=[0,1,2],r.isDefaultChangeDetectionStrategy=n},{"../../facade/lang":410}],368:[function(e,t,r){"use strict";function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}n(e("./di/decorators")),n(e("./di/metadata"));var i=e("./di/opaque_token");r.OpaqueToken=i.OpaqueToken;var o=e("./di/forward_ref");r.forwardRef=o.forwardRef;var a=e("./di/provider");r.provide=a.provide,r.getInjectableName=a.getInjectableName},{"./di/decorators":369,"./di/forward_ref":370,"./di/metadata":372,"./di/opaque_token":373,"./di/provider":374}],369:[function(e,t,r){"use strict";var n=e("./metadata"),i=e("../util/decorators");r.Inject=i.makeParamDecorator(n.InjectMetadata,n.InjectMetadata.paramDecoratorForNonConstructor),r.Optional=i.makeParamDecorator(n.OptionalMetadata),r.Injectable=i.makeDecorator(n.InjectableMetadata),r.Self=i.makeParamDecorator(n.SelfMetadata),r.Host=i.makeParamDecorator(n.HostMetadata),r.SkipSelf=i.makeParamDecorator(n.SkipSelfMetadata)},{"../util/decorators":405,"./metadata":372}],370:[function(e,t,r){"use strict";function n(e){return e.__forward_ref__=n,e.toString=function(){return o.stringify(this())},e}function i(e){function t(e){return o.isFunction(e)&&e.hasOwnProperty("__forward_ref__")&&e.__forward_ref__===n}return t(e)?e():e}var o=e("../../facade/lang");r.forwardRef=n,r.resolveForwardRef=i},{"../../facade/lang":410}],371:[function(e,t,r){"use strict";var n=e("../../facade/lang"),i=e("../../facade/collections"),o=e("../../facade/lang"),a=e("../../facade/lang"),s=function(){function e(){this._allKeys=i.ListWrapper.create(),this._idCounter=0}return e.prototype.get=function(t){if(!o.isType(t))throw new Error("KeyRegistry#get:\n                        ================\n                        you'v tried to create a key for `"+t+"`\n                        creating and getting key tokens is avaialable only for Type");var r=""+a.getTypeName(t)+e._suffix+this._uniqueId();return this._allKeys.push(r),r},Object.defineProperty(e.prototype,"numberOfKeys",{get:function(){return i.ListWrapper.size(this._allKeys)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allKeys",{get:function(){return i.ListWrapper.clone(this._allKeys)},enumerable:!0,configurable:!0}),e.prototype._reset=function(){i.ListWrapper.clear(this._allKeys),this._idCounter=0},e.prototype._uniqueId=function(e){var t=++this._idCounter;return""+n.baseToString(e)+t},e}();s._suffix="#",r.KeyRegistry=s,r.globalKeyRegistry=new s},{"../../facade/collections":407,"../../facade/lang":410}],372:[function(e,t,r){"use strict";var n=e("../../facade/lang"),i=function(){function e(){}return Object.defineProperty(e.prototype,"token",{get:function(){return null},enumerable:!0,configurable:!0}),e}();r.DependencyMetadata=i;var o=function(){function e(e){this.token=e}return e.paramDecoratorForNonConstructor=function(e,t,r,n){var i=t[r];i.$inject=i.$inject||[],i.$inject[n]=e.token},e.prototype.toString=function(){return"@Inject("+n.stringify(this.token)+")"},e}();r.InjectMetadata=o;var a=function(){function e(){}return e.prototype.toString=function(){return"@Optional()"},e}();r.OptionalMetadata=a;var s=function(){function e(e){this._id=e}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),e}();r.InjectableMetadata=s;var c=function(){function e(){}return e.prototype.toString=function(){return"@Self()"},e}();r.SelfMetadata=c;var l=function(){function e(){}return e.prototype.toString=function(){return"@SkipSelf()"},e}();r.SkipSelfMetadata=l;var u=function(){function e(){}return e.prototype.toString=function(){return"@Host()"},e}();r.HostMetadata=u},{"../../facade/lang":410}],373:[function(e,t,r){"use strict";var n=function(){function e(e){this._desc=e}return Object.defineProperty(e.prototype,"desc",{get:function(){return this._desc},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"Token "+this._desc},e}();r.OpaqueToken=n},{}],374:[function(e,t,r){"use strict";function n(e,t){var r=void 0===t?{}:t,n=r.useClass,i=r.useValue,o=r.useFactory,a=r.deps;return b.createFromType(e,{useClass:n,useValue:i,useFactory:o,deps:a})}function i(e){var t=l.reflector.parameters(e);if(c.isBlank(t))return[];if(t.some(function(e){return c.isBlank(e)||p.ListWrapper.isEmpty(e)}))throw new Error(h.getErrorMsg(e,"you cannot have holes in constructor DI injection"));return t.map(function(e){return o(e)})}function o(e){var t=e.filter(c.isType)[0],r=e.filter(v.isInjectMetadata)[0];if(!c.isBlank(r)||!c.isBlank(t)){var n=(r||{}).token,i=void 0===n?void 0:n,o=f.resolveForwardRef(i)||t;return a(o)}}function a(e){if(c.isString(e))return e;if(m.isOpaqueToken(e))return e.desc;if(c.isType(e)){var t=l.reflector.annotations(e)[0];if(c.isBlank(t))throw new Error("\n        cannot get injectable name token from none decorated class "+c.getFuncName(e)+"\n        Only decorated classes by one of [ @Injectable,@Directive,@Component,@Pipe ], can be injected by reference\n      ");if(m.isPipe(t))return t.name;if(m.isDirectiveLike(t))return c.resolveDirectiveNameFromSelector(t.selector);if(m.isService(t))return t.id}}function s(e){return e.every(function(e,t,r){var n=e.length>1,i=t>0,o=t<r.length-1;if(i){var a=r[t-1],s=a.length>1;if(s&&!n)return!1}if(o){var c=r[t+1],l=c.length>1;if(!l&&l)return!1}return!0})}var c=e("../../facade/lang"),l=e("../reflection/reflection"),u=e("../pipes/pipe_provider"),d=e("../directives/directive_provider"),p=e("../../facade/collections"),f=e("./forward_ref"),h=e("../../facade/exceptions"),m=e("./provider_util"),g=e("./provider_util"),v=e("./provider_util"),y=function(){function e(e,t){var r=t.useClass,n=t.useValue,i=t.useExisting,o=t.useFactory,a=t.deps,s=t.multi;this.token=e,this.useClass=r,this.useValue=n,this.useExisting=i,this.useFactory=o,this.dependencies=a,this._multi=s}return Object.defineProperty(e.prototype,"multi",{get:function(){return c.normalizeBool(this._multi)},enumerable:!0,configurable:!0}),e}();r.Provider=y;var b=function(){function e(){}return e.createFromType=function(e,t){var r=t.useClass,n=t.useValue,o=t.useFactory,s=t.deps;if(c.isPresent(o)){var h=a(e),v=c.isArray(s)?s.map(a):[];return o.$inject=v,[h,o]}if(c.isPresent(n)){var y=a(e);return[y,n]}var b=c.isString(e)||m.isOpaqueToken(e)?f.resolveForwardRef(r):f.resolveForwardRef(e),S=c.isString(e)||m.isOpaqueToken(e)?a(e):"";if(!c.isType(b))throw new Error('\n      Provider registration: "'+c.stringify(b)+'":\n      =======================================================\n      token '+c.stringify(b)+" must be type of Type, You cannot provide none class\n      ");var _=l.reflector.annotations(b),w=_[0];if(p.ListWrapper.isEmpty(_))return[b];if(p.ListWrapper.size(_)>1){var E=_.some(function(e){return g.isComponent(e)}),T=_.some(function(e){return m.isDirectiveLike(e)||m.isService(e)||m.isPipe(e)});if(!E||T&&E)throw Error('\n        Provider registration: "'+c.stringify(b)+"\":\n        =======================================================\n        - you cannot use more than 1 class decorator,\n        - you've used "+_.map(function(e){return c.stringify(e.constructor)})+"\n        Multiple class decorators are allowed only for component class: [ @Component, @StateConfig? ]\n        ")}return b.$inject=i(b),m.isPipe(w)?u.pipeProvider.createFromType(b):m.isDirectiveLike(w)?d.directiveProvider.createFromType(b):m.isService(w)?[S||w.id,b]:void 0},e}();r.provide=n,r._dependenciesFor=i,r._extractToken=o,r.getInjectableName=a,r._areAllDirectiveInjectionsAtTail=s},{"../../facade/collections":407,"../../facade/exceptions":408,"../../facade/lang":410,"../directives/directive_provider":384,"../pipes/pipe_provider":398,"../reflection/reflection":399,"./forward_ref":370,"./provider_util":375}],375:[function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&e.provide}function i(e){return new v.Provider(e.provide,e)}function o(e){return e instanceof y.OpaqueToken}function a(e){return h.isString(e.selector)&&e instanceof m.DirectiveMetadata}function s(e){return a(e)&&!l(e)}function c(e){return h.isString(e.selector)&&l(e)&&e instanceof m.ComponentMetadata}function l(e){return h.isPresent(e.template||e.templateUrl)}function u(e){return e instanceof b.InjectableMetadata}function d(e){return h.isString(e.name)&&e instanceof g.PipeMetadata}function p(e){return e instanceof b.InjectMetadata}function f(e){return e instanceof m.NgModuleMetadata}var h=e("../../facade/lang"),m=e("../directives/metadata_directives"),g=e("../pipes/metadata"),v=e("./provider"),y=e("./opaque_token"),b=e("./metadata");r.isProviderLiteral=n,r.createProvider=i,r.isOpaqueToken=o,r.isDirectiveLike=a,r.isDirective=s,r.isComponent=c,r.isService=u,r.isPipe=d,r.isInjectMetadata=p,r.isNgModule=f},{"../../facade/lang":410,"../directives/metadata_directives":389,"../pipes/metadata":397,"./metadata":372,"./opaque_token":373,"./provider":374}],376:[function(e,t,r){"use strict";function n(e){var t=e.token;if(c.isPresent(e.useValue)){var r=u.provide(t,{useValue:e.useValue}),n=r[0],i=r[1],o="value";return{method:o,name:n,value:i}}if(e.useFactory){var a=u.provide(t,{useFactory:e.useFactory,deps:e.dependencies}),s=a[0],i=a[1],o="factory";return{method:o,name:s,value:i}}if(e.useClass){var l=u.provide(t,{useClass:e.useClass}),d=l[0],i=l[1],o="service";return{method:o,name:d,value:i}}if(e.useExisting){var p=u.provide(e.useExisting),i=(p[0],p[1]),o="factory";throw new Error("useExisting is unimplemented")}throw new Error("invalid provider type! please specify one of: [useValue,useFactory,useClass]")}function i(e){var t=l.reflector.annotations(e)[0];if(c.isBlank(t)){if(c.isType(e))return{providerName:"$injector",providerMethod:"invoke",moduleMethod:"config"};throw new Error("\n        cannot get injectable name token from none decorated class "+c.getFuncName(e)+"\n        Only decorated classes by one of [ @Injectable,@Directive,@Component,@Pipe ], can be injected by reference\n      ")}return d.isPipe(t)?{providerName:"$filterProvider",providerMethod:"register",moduleMethod:"filter"}:d.isDirectiveLike(t)?{providerName:"$compileProvider",providerMethod:"directive",moduleMethod:"directive"}:d.isService(t)?{providerName:"$provide",providerMethod:"service",moduleMethod:"service"}:void 0}function o(e,t){return t.forEach(function(t){if(c.isString(t))return void e.requires.push(t);if(d.isProviderLiteral(t)){var r=d.createProvider(t),s=n(r),l=s.method,p=s.name,f=s.value;return void(a(p,e,"$provide",l)||e[l](p,f))}if(c.isType(t)){var h=u.provide(t),m=h[0],f=h[1],g=i(t),v=g.providerName,y=g.providerMethod,b=g.moduleMethod;return c.isType(m)?void e.config(m):void(a(m,e,v,y)||e[b](m,f))}if(!c.isArray(t))throw new Error("InvalidProviderError("+t+")");o(e,t)}),e}function a(e,t,r,n){var i=t._invokeQueue,o=i.filter(function(e){var t=e[0],i=e[1];return t===r&&i===n}).map(function(e){var t=(e[0],e[1],e[2]);return t});return o.some(function(t){var r=t[0];t[1];return e===r})}function s(e,t,r){var n=r.moduleMethod,i=r.name,o=r.value,a=l.reflector.annotations(t)[0];c.isBlank(a)||(d.isDirective(a)?(e[n](i,o),e[n]("["+i+"]",o),e[n]("("+i+")",o)):e[n](i,o))}var c=e("../../facade/lang"),l=e("../reflection/reflection"),u=e("./provider"),d=e("./provider_util");r.resolveReflectiveProvider=n,r._getAngular1ModuleMetadataByType=i,r._normalizeProviders=o,r._isTypeRegistered=a,r._registerTypeProvider=s},{"../../facade/lang":410,"../reflection/reflection":399,"./provider":374,"./provider_util":375}],377:[function(e,t,r){"use strict";function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}n(e("./directives/decorators")),n(e("./directives/metadata_di")),n(e("./directives/metadata_directives"))},{"./directives/decorators":383,"./directives/metadata_di":388,"./directives/metadata_directives":389}],378:[function(e,t,r){"use strict";function n(e,t,r,n,p,f){function h(e,t,r,i){if(void 0===i&&(i=!1),r){var a=E(r),s=n[e]=a(I);return $[e]=o.ChangeDetectionUtil.simpleChange(o.ChangeDetectionUtil.uninitialized,n[e]),I.$watch(a,function(t,r){if(r===t){if(r===s)return;r=s}y(e,t,r),n[e]=i?c.global.angular.copy(t):t},a.literal)}}function m(e,t,i){function o(e,t){return e===t||e!==e&&t!==t}if(i){var a,s=E(i),l=s.assign||function(){throw a=n[e]=s(I),new Error("nonassign,\n          Expression '"+r[t]+"' in attribute '"+t+"' used with directive '{2}' is non-assignable!")},u=s.literal?c.global.angular.equals:o,d=function(t){return u(t,n[e])||(u(t,a)?l(I,t=n[e]):n[e]=t),a=t};return d.$stateful=!0,a=n[e]=s(I),I.$watch(E(i,d),null,s.literal)}}function g(e,t,r){var i=r?E(r):c.noop;if(i!==c.noop){var o=new l.EventEmitter;o.wrapNgExpBindingToEmitter(function(e){return i(I,e)}),n[e]=o}}function v(e,t,i){var a=i,s=r.$observe(t,function(t){if(c.isString(t)||c.isBoolean(t)){var r=n[e];y(e,t,r),n[e]=t}});return r.$$observers[t].$$scope=I,c.isString(a)?n[e]=w(a)(I):c.isBoolean(a)&&(n[e]=a),$[e]=o.ChangeDetectionUtil.simpleChange(o.ChangeDetectionUtil.uninitialized,n[e]),s}function y(e,t,r){c.isFunction(n.ngOnChanges)&&t!==r&&(a.changesQueueService.onChangesQueue||(I.$$postDigest(a.changesQueueService.flushOnChangesQueue),a.changesQueueService.onChangesQueue=[]),_||(_={},a.changesQueueService.onChangesQueue.push(b)),_[e]&&(r=_[e].previousValue),_[e]=o.ChangeDetectionUtil.simpleChange(r,t))}function b(){n.ngOnChanges(_),_=void 0}function S(){for(var e=k.concat(D),t=0,r=e.length;t<r;++t)e[t]&&c.isFunction(e[t])&&e[t]()}var _,w=f.$interpolate,E=f.$parse,T=f.$rootScope,O=i.isComponentDirective(p)&&o.ChangeDetectionUtil.isOnPushChangeDetectionStrategy(p.changeDetection),I=e?t.$parent:t,P=p.inputs,R=void 0===P?[]:P,C=p.outputs,A=void 0===C?[]:C,j=d.setupFields(r,R,A),k=[],D=[],$={};return a.changesQueueService.buildFlushOnChanges(T),s.StringMapWrapper.forEach(j.inputs,function(t,r){var n=t.exp,i=t.attrName,o=t.mode,a=e&&o===u.BINDING_MODE.twoWay,s=a?m(r,i,n):h(r,i,n,O);k.push(s)}),s.StringMapWrapper.forEach(j.attrs,function(e,t){var r=e.attrName,n=e.exp,i=(e.mode,v(t,r,n));D.push(i)}),s.StringMapWrapper.forEach(j.outputs,function(e,t){var r=e.exp,n=e.attrName;e.mode;g(t,n,r)}),{initialChanges:$,removeWatches:S,_watchers:{watchers:k,observers:D}}}var i=e("../directives_utils"),o=e("../../change_detection/change_detection_util"),a=e("../../change_detection/changes_queue"),s=e("../../../facade/collections"),c=e("../../../facade/lang"),l=e("../../../facade/async"),u=e("./constants"),d=e("./binding_parser");r._createDirectiveBindings=n},{"../../../facade/async":406,"../../../facade/collections":407,"../../../facade/lang":410,"../../change_detection/change_detection_util":364,"../../change_detection/changes_queue":366,"../directives_utils":385,"./binding_parser":379,"./constants":380}],379:[function(e,t,r){"use strict";function n(e,t,r){void 0===t&&(t=[]),void 0===r&&(r=[]);var n=c(i(t),e),o=n.inputs,a=n.attrs,s=l(i(r),e).outputs;return{inputs:o,attrs:a,outputs:s}}function i(e){var t=[];if(!e)return t;for(var r=0,n=e;r<n.length;r++){var i=n[r],c=i.split(":"),l=c[0].trim(),u=(c[1]||c[0]).trim(),d=a(u),p=s(u,l,d),f=o(u,d);t.push({prop:l,attr:p,bracketAttr:"["+p+"]",parenAttr:"("+p+")",bracketParenAttr:"[("+p+")]",type:f,typeByTemplate:!d})}return t}function o(e,t){return t?e.charAt(0):""}function a(e){return d.ListWrapper.contains([p.BINDING_MODE.attr,p.BINDING_MODE.oneWay,p.BINDING_MODE.twoWay],e.charAt(0))}function s(e,t,r){return r?e.length>1?e.substring(1):t:e}function c(e,t){for(var r={},n={},i=0,o=e;i<o.length;i++){var a=o[i];if(a.typeByTemplate)t.hasOwnProperty(a.attr)?r[a.prop]={mode:p.BINDING_MODE.attr,exp:t[a.attr],attrName:a.attr}:t.hasOwnProperty(a.bracketAttr)?n[a.prop]={mode:p.BINDING_MODE.oneWay,exp:t[a.bracketAttr],attrName:a.bracketAttr}:t.hasOwnProperty(a.bracketParenAttr)&&(n[a.prop]={mode:p.BINDING_MODE.twoWay,exp:t[a.bracketParenAttr],attrName:a.bracketParenAttr});else if(t.hasOwnProperty(a.attr)){var s={mode:a.type,exp:t[a.attr],attrName:a.attr};a.type===p.BINDING_MODE.attr?r[a.prop]=s:n[a.prop]=s}}return{inputs:n,attrs:r}}function l(e,t){for(var r={},n=0;n<e.length;n+=1){var i=e[n],o={mode:p.BINDING_MODE.output,exp:void 0,attrName:""};t.hasOwnProperty(i.attr)?r[i.prop]=d.StringMapWrapper.assign({},o,{exp:t[i.attr],attrName:i.attr}):t.hasOwnProperty(i.parenAttr)&&(r[i.prop]=d.StringMapWrapper.assign({},o,{exp:t[i.parenAttr],attrName:i.parenAttr}))}return{outputs:r}}function u(e){function t(e,t,r){return void 0===r&&(r=[]),e.reduce(function(e,n){var i=n.split(c).map(function(e){return e.trim()}),o=i[0],a=i[1],s=void 0===a?"":a,l=s.match(p.INPUT_MODE_REGEX),u=l||[],d=u[1],f=void 0===d?t:d,h=u[2],m=void 0===h?"":h,g=u[3],v=void 0===g?"":g;return r.indexOf(f)!==-1?e:(t===p.BINDING_MODE.output||l&&l[1]||console.warn("\n        You need to explicitly provide type of binding(=,<,@) within your <code>'@Input() "+o+";</code>.\n        Next version 2.0 will create binding by parsing template if you provide '@Input()' without binding type.\n        "),e[o]={mode:f,alias:v,optional:m===p.BINDING_MODE.optional||!0},e)},{})}var r=e.inputs,n=void 0===r?[]:r,i=e.outputs,o=void 0===i?[]:i,a=e.attrs,s=void 0===a?[]:a,c=":";return{inputs:t(n,p.BINDING_MODE.twoWay,[p.BINDING_MODE.attr]),outputs:t(o,p.BINDING_MODE.output),attrs:d.StringMapWrapper.merge(t(s,p.BINDING_MODE.attr),t(n,p.BINDING_MODE.twoWay,[p.BINDING_MODE.oneWay,p.BINDING_MODE.twoWay]))}}var d=e("../../../facade/collections"),p=e("./constants");r.setupFields=n,r._parseFields=i,r._setupInputs=c,r._setupOutputs=l,r._parseBindings=u},{"../../../facade/collections":407,"./constants":380}],380:[function(e,t,r){"use strict";r.INPUT_MODE_REGEX=/^(<|=|@)?(\??)(\w*)$/,r.BINDING_MODE=Object.freeze({oneWay:"<",twoWay:"=",output:"&",attr:"@",optional:"?"})},{}],381:[function(e,t,r){"use strict";r.REQUIRE_PREFIX_REGEXP=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/},{}],382:[function(e,t,r){"use strict";function n(e,t,r,n,h,m,g){function v(e){y.$on("$destroy",function(){return e})}var y=n.$scope,b=n.$element,S=n.$attrs,_={$parse:r.get("$parse"),$interpolate:r.get("$interpolate"),$rootScope:r.get("$rootScope")
},w={changeDetectorRef:u.ChangeDetectorRef.create(y)},E=Object.create(t.prototype),T=d._createDirectiveBindings(!p.isAttrDirective(g),y,S,E,g,_),O=T.removeWatches,I=T.initialChanges;v(O),l.StringMapWrapper.size(h)&&(t.$inject=c(t.$inject,h));var P=s(h),R=o(E);return r.invoke(t,E,l.StringMapWrapper.assign(n,w,P)),l.StringMapWrapper.assign(E,R),f.isFunction(E.ngOnChanges)&&E.ngOnChanges(I),m._ngOnInitBound=function(){if(l.StringMapWrapper.size(h)){var e=a(h,b,t),s=o(E);r.invoke(t,E,l.StringMapWrapper.assign(n,w,e)),l.StringMapWrapper.assign(E,s)}if(f.isFunction(E.ngOnInit)&&E.ngOnInit(),f.isFunction(E.ngDoCheck)){var c=i(y,function(){return E.ngDoCheck()});v(c)}},E}function i(e,t){var r=!1,n=e.$watch(function(){r||(r=!0,e.$$postDigest(function(){r=!1,t()}))});return n}function o(e){var t={};return l.StringMapWrapper.forEach(e,function(r,n){e[n]&&(t[n]=r)}),t}function a(e,t,r){var n;if(f.isString(e)){var i=e.match(m.REQUIRE_PREFIX_REGEXP),o=e.substring(i[0].length),s=i[1]||i[3],c="?"===i[2];if("^^"===s&&(t=t.parent()),!n){var u="$"+o+"Controller";n=s?t.inheritedData(u):t.data(u)}if(!n&&!c)throw new Error("Directive/Controller '"+o+"', required by directive '"+f.getFuncName(r)+"', can't be found!")}else if(f.isArray(e)){n=[];for(var d=0,p=e.length;d<p;d++)n[d]=a(e[d],t,r)}else f.isJsObject(e)&&(n={},l.StringMapWrapper.forEach(e,function(e,i){n[i]=a(e,t,r)}));return n||null}function s(e){return l.StringMapWrapper.keys(e).reduce(function(e,t){return e[t]=void 0,e},{})}function c(e,t){var r=l.StringMapWrapper.keys(t);return e.slice().map(function(e){var t=r.filter(function(t){return h.StringWrapper.startsWith(t,e)})[0];if(t){var n=r.indexOf(t);r.splice(n,1)}return t||e})}var l=e("../../../facade/collections"),u=e("../../change_detection/change_detector_ref"),d=e("../binding/binding_factory"),p=e("../directives_utils"),f=e("../../../facade/lang"),h=e("../../../facade/primitives"),m=e("./constants");r.directiveControllerFactory=n,r.getRequiredControllers=a,r.getEmptyRequiredControllers=s,r.createNewInjectablesToMatchLocalDi=c},{"../../../facade/collections":407,"../../../facade/lang":410,"../../../facade/primitives":411,"../../change_detection/change_detector_ref":365,"../binding/binding_factory":378,"../directives_utils":385,"./constants":381}],383:[function(e,t,r){"use strict";var n=e("../util/decorators"),i=e("./metadata_di"),o=e("./metadata_directives");r.Component=n.makeDecorator(o.ComponentMetadata),r.Directive=n.makeDecorator(o.DirectiveMetadata),r.ContentChildren=n.makePropDecorator(i.ContentChildrenMetadata),r.ContentChild=n.makePropDecorator(i.ContentChildMetadata),r.ViewChildren=n.makePropDecorator(i.ViewChildrenMetadata),r.ViewChild=n.makePropDecorator(i.ViewChildMetadata),r.Input=n.makePropDecorator(o.InputMetadata),r.Attr=n.makePropDecorator(o.AttrMetadata),r.Output=n.makePropDecorator(o.OutputMetadata),r.HostBinding=n.makePropDecorator(o.HostBindingMetadata),r.HostListener=n.makePropDecorator(o.HostListenerMetadata),r.NgModule=n.makeDecorator(o.NgModuleMetadata)},{"../util/decorators":405,"./metadata_di":388,"./metadata_directives":389}],384:[function(e,t,r){"use strict";var n=e("../linker/directive_resolver"),i=e("../../facade/lang"),o=e("../../facade/collections"),a=e("../linker/directive_lifecycles_reflector"),s=e("../linker/directive_lifecycle_interfaces"),c=e("./metadata_directives"),l=e("./controller/controller_factory"),u=e("./query/children_resolver"),d=e("./host/host_parser"),p=e("./host/host_resolver"),f=e("./directives_utils"),h=function(){function e(e){this.directiveResolver=e}return e.prototype.createFromType=function(t){function r(e,r,n,i,o){var a={$scope:e,$element:r,$attrs:n,$transclude:i};return l.directiveControllerFactory(this,t,o,a,d,f,s)}function n(){return g}var s=this.directiveResolver.resolve(t),u=i.resolveDirectiveNameFromSelector(s.selector),d=this.directiveResolver.getRequiredDirectivesMap(t),p=a.resolveImplementedLifeCycleHooks(t),f={restrict:"A",controller:r,link:{pre:function(){f._ngOnInitBound()},post:this._createLink(t,s,p)},require:this._createRequires(d,u),_ngOnInitBound:i.noop};if(r.$inject=["$scope","$element","$attrs","$transclude","$injector"],s instanceof c.ComponentMetadata){var h=this.directiveResolver.parseAssetUrl(s),m={restrict:"E",scope:{},bindToController:{},controllerAs:e._controllerAs,transclude:e._transclude};if(s.template&&s.templateUrl)throw new Error("cannot have both template and templateUrl");s.template&&(m.template=s.template),s.templateUrl&&(m.templateUrl=""+h+s.templateUrl),o.StringMapWrapper.assign(f,m)}i.isFunction(t.compile)&&(f.compile=function(e,r){var n=t.compile(e,r);return i.isJsObject(n)?n:this.link}),i.isFunction(t.link)&&(f.link=t.link);var g=this._createDDO(f,s.legacy);return o.StringMapWrapper.forEach(g,function(e,t){"$"===t.charAt(0)&&(n[t]=e,i.isFunction(g.controller)&&(g.controller[t]=e))}),i.isFunction(t.$canActivate)&&(n.$canActivate=t.$canActivate),[u,n]},e.prototype._createDDO=function(t,r){return i.assign({},e._ddoShell,t,r)},e.prototype._createRequires=function(e,t){return[t].concat(o.StringMapWrapper.values(e))},e.prototype._createLink=function(e,t,r){function n(e,n,i,c,l){var d=[],h=c[0],m=c.slice(1);p._setHostStaticAttributes(n,a.hostStatic),d.push.apply(d,p._setHostBindings(e,n,h,a.hostBindings)),p._setHostListeners(e,n,h,a.hostListeners);var g=u._getParentCheckNotifiers(h,m);d.push.apply(d,g),u._setupQuery(e,n,h,t.queries),o.StringMapWrapper.size(t.queries)?(h._ngOnChildrenChanged(s.ChildrenChangeHook.FromView,[g.forEach(function(e){return e()}),h.ngAfterViewInit&&h.ngAfterViewInit.bind(h),h.ngAfterViewChecked&&h.ngAfterViewChecked.bind(h)]),h._ngOnChildrenChanged(s.ChildrenChangeHook.FromContent,[g.forEach(function(e){return e()}),h.ngAfterContentInit&&h.ngAfterContentInit.bind(h),h.ngAfterContentChecked&&h.ngAfterContentChecked.bind(h)])):(g.forEach(function(e){return e()}),h.ngAfterViewInit&&h.ngAfterViewInit(),h.ngAfterContentInit&&h.ngAfterContentInit()),f._setupDestroyHandler(e,n,h,r.ngOnDestroy,d)}if((r.ngAfterContentChecked||r.ngAfterViewChecked)&&0===o.StringMapWrapper.size(t.queries))throw new Error("\n              Hooks Impl for "+i.stringify(e)+":\n              ===================================\n              You've implement AfterContentChecked/AfterViewChecked lifecycle, but @ViewChild(ren)/@ContentChild(ren) decorators are not used.\n              we cannot invoke After(Content|View)Checked without provided @Query decorators\n              ");if(t instanceof c.ComponentMetadata&&(r.ngAfterContentInit||r.ngAfterContentChecked)&&!o.StringMapWrapper.getValueFromPath(t,"legacy.transclude"))throw new Error("\n              Hooks Impl for "+i.stringify(e)+":\n              ===================================\n              You cannot implement AfterContentInit lifecycle, without allowed transclusion.\n              turn transclusion on within decorator like this: @Component({legacy:{transclude:true}})\n              ");o.StringMapWrapper.size(t.queries)&&(e.prototype._ngOnChildrenChanged=i.noop);var a=d._parseHost(t.host);return n},e}();h._ddoShell={require:[],controller:i.noop,link:{pre:i.noop,post:i.noop}},h._controllerAs="$ctrl",h._transclude=!1,r.DirectiveProvider=h,r.directiveProvider=new h(new n.DirectiveResolver)},{"../../facade/collections":407,"../../facade/lang":410,"../linker/directive_lifecycle_interfaces":391,"../linker/directive_lifecycles_reflector":392,"../linker/directive_resolver":393,"./controller/controller_factory":382,"./directives_utils":385,"./host/host_parser":386,"./host/host_resolver":387,"./metadata_directives":389,"./query/children_resolver":390}],385:[function(e,t,r){"use strict";function n(e){return e instanceof a.DirectiveMetadata&&!(e instanceof a.ComponentMetadata)}function i(e){return e instanceof a.ComponentMetadata}function o(e,t,r,n,i,o){void 0===i&&(i=[]),void 0===o&&(o=[]),e.$on("$destroy",function(){n&&r.ngOnDestroy(),i.forEach(function(e){return e()}),o.forEach(function(e){return e()})})}var a=e("./metadata_directives");r.isAttrDirective=n,r.isComponentDirective=i,r._setupDestroyHandler=o},{"./metadata_directives":389}],386:[function(e,t,r){"use strict";function n(e){function t(e){return a.test(e)}function r(e){return s.test(e)}function n(e){return!(t(e)||r(e))}function u(e){return e.replace(/\[|\]|\(|\)/g,"")}function d(e){var t=Object.keys(e)[0],r=e[t],n=/^(\w+)\(([$\w.\s,]*)\)$/.exec(r),i=n[1],o=n[2],a=[i].concat(o.split(",").filter(function(e){return Boolean(e)}).map(function(e){return e.trim()}));return s={},s[t.replace(/\s/g,"")]=a,s;var s}if(i.isPresent(e)){var p={},f=[],h={};o.StringMapWrapper.forEach(e,function(e,o){var a=(s={},s[u(o)]=e,s);if(n(o))return void i.assign(p,a);if(t(o))return void f.push(a);r(o)&&i.assign(h,d(a));var s});var m=f.reduce(function(e,t){var r=Object.keys(t)[0],n=t[r];return c.test(r)?(e.classes[r.replace(c,"")]=n,e):l.test(r)?(e.attributes[r.replace(l,"")]=n,e):(i.assign(e.properties,t),e)},{classes:{},attributes:{},properties:{}});return{hostStatic:p,hostBindings:m,hostListeners:h}}}var i=e("../../../facade/lang"),o=e("../../../facade/collections"),a=/^\[.*\]$/,s=/^\(.*\)$/,c=/^class./,l=/^attr./;r._parseHost=n},{"../../../facade/collections":407,"../../../facade/lang":410}],387:[function(e,t,r){"use strict";function n(e,t){e.attr(t)}function i(e,t,r,n){function i(n,i){var o=[];return u.StringMapWrapper.forEach(i[n],function(i,a){o.push(e.$watch(function(){return r[i]},function(e){"classes"===n&&t.toggleClass(a,e),"attributes"===n&&t.attr(a,e),"properties"===n&&u.StringMapWrapper.setValueInPath(t[0],a,e)}))}),o}return i("classes",n).concat(i("attributes",n),i("properties",n))}function o(e,t,r,n){function i(n,i){function o(t){var n=a(t,l);e.$apply(function(){var e=r[s].apply(r,n);e===!1&&t.preventDefault()})}var s=n[0],l=n.slice(1),u=c(i,t),d=u.event,p=u.target;p.on(d,o),p!==t&&e.$on("$destroy",function(){return p.off(d,o)})}u.StringMapWrapper.forEach(n,i)}function a(e,t){var r="$event";return t.reduce(function(t,n){if(!d.StringWrapper.startsWith(n,r))throw new Error("\n              only $event.* is supported. Please provide correct listener parameter @example: $event,$event.target\n              ");return n===r?t.concat([e]):t.concat([u.StringMapWrapper.getValueFromPath(e,n.replace(r,""))])},[])}function s(e,t){var r=["document","window","body"],n=e.get("$document");if("document"===t)return n;if("window"===t)return l.global.angular.element(e.get("$"+t));if("body"===t)return l.global.angular.element(n[0][t]);throw new Error("unsupported global target '"+t+"', only '"+r+"' are supported")}function c(e,t){var r=e.split(/\s*:\s*/);if(2===r.length){var n=r[0],i=r[1];return{event:i,target:s(t.injector(),n)}}return{event:e,target:t}}var l=e("../../../facade/lang"),u=e("../../../facade/collections"),d=e("../../../facade/primitives");r._setHostStaticAttributes=n,r._setHostBindings=i,r._setHostListeners=o,r._getHostListenerCbParams=a},{"../../../facade/collections":407,"../../../facade/lang":410,"../../../facade/primitives":411}],388:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../facade/lang"),o=e("../di/forward_ref"),a=e("../di/metadata"),s=function(e){function t(t,r){var n=void 0===r?{}:r,i=n.descendants,o=void 0!==i&&i,a=n.first,s=void 0!==a&&a,c=e.call(this)||this;return c._selector=t,c.descendants=o,c.first=s,c}return n(t,e),Object.defineProperty(t.prototype,"isViewQuery",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selector",{get:function(){return o.resolveForwardRef(this._selector)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isVarBindingQuery",{get:function(){return i.isString(this.selector)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"varBindings",{get:function(){return this.isVarBindingQuery?this.selector.split(","):[]},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"@Query("+i.stringify(this.selector)+")"},t}(a.DependencyMetadata);r.QueryMetadata=s;var c=function(e){function t(t,r){var n=(void 0===r?{}:r).descendants,i=void 0!==n&&n;return e.call(this,t,{descendants:i})||this}return n(t,e),t}(s);r.ContentChildrenMetadata=c;var l=function(e){function t(t){return e.call(this,t,{descendants:!0,first:!0})||this}return n(t,e),t}(s);r.ContentChildMetadata=l;var u=function(e){function t(t,r){var n=void 0===r?{}:r,i=n.descendants,o=void 0!==i&&i,a=n.first,s=void 0!==a&&a;return e.call(this,t,{descendants:o,first:s})||this}return n(t,e),Object.defineProperty(t.prototype,"isViewQuery",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"@ViewQuery("+i.stringify(this.selector)+")"},t}(s);r.ViewQueryMetadata=u;var d=function(e){function t(t){return e.call(this,t,{descendants:!0})||this}return n(t,e),t}(u);r.ViewChildrenMetadata=d;var p=function(e){function t(t){return e.call(this,t,{descendants:!0,first:!0})||this}return n(t,e),t}(u);r.ViewChildMetadata=p},{"../../facade/lang":410,"../di/forward_ref":370,"../di/metadata":372}],389:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../di/metadata"),o=function(e){function t(t){var r=void 0===t?{}:t,n=r.selector,i=r.inputs,o=r.attrs,a=r.outputs,s=r.host,c=r.providers,l=r.exportAs,u=r.queries,d=r.legacy,p=e.call(this)||this;return p.selector=n,p._inputs=i,p._attrs=o,p._outputs=a,p.host=s,p.exportAs=l,p.queries=u,p._providers=c,p.legacy=d,p}return n(t,e),Object.defineProperty(t.prototype,"inputs",{get:function(){return this._inputs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"attrs",{get:function(){return this._attrs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputs",{get:function(){return this._outputs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providers",{get:function(){return this._providers},enumerable:!0,configurable:!0}),t}(i.InjectableMetadata);r.DirectiveMetadata=o;var a=function(e){function t(t){var r=void 0===t?{}:t,n=r.selector,i=r.inputs,o=r.attrs,a=r.outputs,s=r.host,c=r.exportAs,l=r.moduleId,u=r.providers,d=r.viewProviders,p=r.changeDetection,f=void 0===p?1:p,h=r.queries,m=r.templateUrl,g=r.template,v=r.styleUrls,y=r.styles,b=r.legacy,S=e.call(this,{selector:n,inputs:i,attrs:o,outputs:a,host:s,exportAs:c,providers:u,queries:h,legacy:b})||this;return S.changeDetection=f,S._viewProviders=d,S.templateUrl=m,S.template=g,S.styleUrls=v,S.styles=y,S.moduleId=l,S}return n(t,e),Object.defineProperty(t.prototype,"viewProviders",{get:function(){return this._viewProviders},enumerable:!0,configurable:!0}),t}(o);r.ComponentMetadata=a;var s=function(){function e(e){this.bindingPropertyName=e}return e}();r.InputMetadata=s;var c=function(){function e(e){this.bindingPropertyName=e}return e}();r.AttrMetadata=c;var l=function(){function e(e){this.bindingPropertyName=e}return e}();r.OutputMetadata=l;var u=function(){function e(e){this.hostPropertyName=e}return e}();r.HostBindingMetadata=u;var d=function(){function e(e,t){this.eventName=e,this.args=t}return e}();r.HostListenerMetadata=d;var p=function(e){function t(t){void 0===t&&(t={});var r=e.call(this)||this;return r._providers=t.providers,r.declarations=t.declarations,r.imports=t.imports,r}return n(t,e),Object.defineProperty(t.prototype,"providers",{get:function(){return this._providers},enumerable:!0,configurable:!0}),t}(i.InjectableMetadata);r.NgModuleMetadata=p},{"../di/metadata":372}],390:[function(e,t,r){"use strict";function n(e,t,r,n){function o(e,t,r){function n(e,t,r,n){return i(e,t,r,n.selector,s.view,!0)}function o(e,t,r,n){return i(e,t,r,n.selector,s.content,!0)}function a(e,t,r,n){return i(e,t,r,n.selector,s.view)}function c(e,t,r,n){return i(e,t,r,n.selector,s.content)}var l=(u={},u[s.view]=[],u[s.content]=[],u);return d.StringMapWrapper.forEach(r,function(r,i){r instanceof g.ViewChildMetadata&&l[s.view].push(n(e,t,i,r)),r instanceof g.ViewChildrenMetadata&&l[s.view].push(a(e,t,i,r)),r instanceof g.ContentChildMetadata&&l[s.content].push(o(e,t,i,r)),r instanceof g.ContentChildrenMetadata&&l[s.content].push(c(e,t,i,r))}),l;var u}var a=Object.freeze({view:"__readViewChildrenOrderScheduled",content:"__readContentChildrenOrderScheduled"}),s=Object.freeze({view:"view",content:"content"});if(0!==d.StringMapWrapper.size(n)){var c=o(t,r,n);r.__readContentChildrenOrderScheduled=!1,r.__readViewChildrenOrderScheduled=!1;var l=function(t,n,i){void 0===n&&(n=[]),void 0===i&&(i=c);var o="",l="";if(t===p.ChildrenChangeHook.FromView)o=a.view,l=s.view;else{if(t!==p.ChildrenChangeHook.FromContent)throw new Error("_ngOnChildrenChanged: queryType("+t+") must be one of FromView|FromContent");l=s.content,o=a.content}r[o]||(r[o]=!0,e.$evalAsync(function(){r[o]=!1,i[l].forEach(function(e){return e()}),n.forEach(function(e){u.isFunction(e)&&e()})}))};r._ngOnChildrenChanged=l.bind(r)}}function i(e,t,r,n,i,s){function c(){if(s){t[r]=null;var a=o(e,p,i,s),c=u.isString(n)?a:l(a,f);t[r]=c}else{t[r]=[];var d=o(e,p,i);if(u.isString(n))return void(t[r]=d);for(var h=0;h<d.length;h++)t[r].push(l(d.eq(h),f))}}void 0===s&&(s=!1);var d=a(n),p=d.selector,f=d.childCtrlName;return c}function o(e,t,r,n){void 0===n&&(n=!1);var i="";"view"===r&&(i=":not(ng-transclude):not([ng-transclude]) > "+t),"content"===r&&(i="ng-transclude "+t+", [ng-transclude] "+t);var o=n?"querySelector":"querySelectorAll";return u.global.angular.element(e[0][o](i))}function a(e){var t=s(e),r=h.getInjectableName(e);return{selector:t,childCtrlName:r}}function s(e){if(u.isString(e))return e;if(u.isType(e)){var t=f.reflector.annotations(e)[0];if(t instanceof m.DirectiveMetadata)return t.selector}throw new Error("cannot query for non Directive/Component type "+u.getFuncName(e))}function c(e,t){var r=t.reduce(function(t,r){if(!u.isJsObject(r))return t;var n=r.constructor;if(!u.isType(n))return t;var i=f.reflector.propMetadata(n);if(!d.StringMapWrapper.size(i))return t;var o=[];return d.StringMapWrapper.forEach(i,function(t){t.filter(function(t){return!!(t instanceof g.QueryMetadata&&u.isType(t.selector))&&e instanceof t.selector}).forEach(function(e){e.isViewQuery||o.push(function(){return r._ngOnChildrenChanged(p.ChildrenChangeHook.FromContent,[r.ngAfterContentChecked.bind(r)])}),e.isViewQuery&&o.push(function(){return r._ngOnChildrenChanged(p.ChildrenChangeHook.FromView,[r.ngAfterViewChecked.bind(r)])})})}),t.concat(o)},[]);return d.ListWrapper.size(r)?r:[u.noop]}function l(e,t){return e?e.controller(t):null}var u=e("../../../facade/lang"),d=e("../../../facade/collections"),p=e("../../linker/directive_lifecycle_interfaces"),f=e("../../reflection/reflection"),h=e("../../di/provider"),m=e("../metadata_directives"),g=e("../metadata_di");r._setupQuery=n,r._resolveChildrenFactory=i,r._getChildElements=o,r._getSelectorAndCtrlName=a,r._getSelector=s,r._getParentCheckNotifiers=c,r.getControllerOnElement=l},{"../../../facade/collections":407,"../../../facade/lang":410,"../../di/provider":374,"../../linker/directive_lifecycle_interfaces":391,"../../reflection/reflection":399,"../metadata_di":388,"../metadata_directives":389}],391:[function(e,t,r){"use strict";var n;!function(e){e[e.OnInit=0]="OnInit",e[e.OnDestroy=1]="OnDestroy",e[e.DoCheck=2]="DoCheck",e[e.OnChanges=3]="OnChanges",e[e.AfterContentInit=4]="AfterContentInit",e[e.AfterContentChecked=5]="AfterContentChecked",e[e.AfterViewInit=6]="AfterViewInit",e[e.AfterViewChecked=7]="AfterViewChecked",e[e._OnChildrenChanged=8]="_OnChildrenChanged"}(n=r.LifecycleHooks||(r.LifecycleHooks={})),r.LIFECYCLE_HOOKS_VALUES=[n.OnInit,n.OnDestroy,n.DoCheck,n.OnChanges,n.AfterContentInit,n.AfterContentChecked,n.AfterViewInit,n.AfterViewChecked,n._OnChildrenChanged];var i;!function(e){e[e.FromView=0]="FromView",e[e.FromContent=1]="FromContent"}(i=r.ChildrenChangeHook||(r.ChildrenChangeHook={}))},{}],392:[function(e,t,r){"use strict";function n(e,t){if(!(t instanceof o.Type))return!1;var r=t.prototype;switch(e){case a.LifecycleHooks.AfterContentInit:return!!r.ngAfterContentInit;case a.LifecycleHooks.AfterContentChecked:return!!r.ngAfterContentChecked;case a.LifecycleHooks.AfterViewInit:return!!r.ngAfterViewInit;case a.LifecycleHooks.AfterViewChecked:return!!r.ngAfterViewChecked;case a.LifecycleHooks.OnDestroy:return!!r.ngOnDestroy;case a.LifecycleHooks.OnInit:return!!r.ngOnInit;case a.LifecycleHooks.OnChanges:return!!r.ngOnChanges;case a.LifecycleHooks.DoCheck:return!!r.ngDoCheck;case a.LifecycleHooks._OnChildrenChanged:return!!r._ngOnChildrenChanged;default:return!1}}function i(e){return{ngOnInit:n(a.LifecycleHooks.OnInit,e),ngOnChanges:n(a.LifecycleHooks.OnChanges,e),ngDoCheck:n(a.LifecycleHooks.DoCheck,e),ngAfterContentInit:n(a.LifecycleHooks.AfterContentInit,e),ngAfterContentChecked:n(a.LifecycleHooks.AfterContentChecked,e),ngAfterViewInit:n(a.LifecycleHooks.AfterViewInit,e),ngAfterViewChecked:n(a.LifecycleHooks.AfterViewChecked,e),ngOnDestroy:n(a.LifecycleHooks.OnDestroy,e),_ngOnChildrenChanged:n(a.LifecycleHooks._OnChildrenChanged,e)}}var o=e("../../facade/type"),a=e("./directive_lifecycle_interfaces");r.hasLifecycleHook=n,r.resolveImplementedLifeCycleHooks=i},{"../../facade/type":412,"./directive_lifecycle_interfaces":391}],393:[function(e,t,r){"use strict";function n(e){return e instanceof c.DirectiveMetadata}function i(e,t,r){function n(e){return o.isType(p.resolveForwardRef(e))?d.getInjectableName(p.resolveForwardRef(e)):e}function i(){return b?"":v?"^":S?"^^":void 0}function s(e){if(e.length<2)return!1;if(2===e.length){var t=e.filter(function(e){return e instanceof u.InjectMetadata||o.isType(e)}).length;if(2===t)return!1}return!0}if(s(e)){var c=a.ListWrapper.find(e,function(e){return e instanceof u.InjectMetadata}),l=a.ListWrapper.find(e,o.isType),h=(c||{token:l}).token,m=void 0===h?void 0:h,g=c&&l?e.length-1:e.length;if(!m)throw new Error(f.getErrorMsg(r,"no Directive instance name provided within @Inject() or :DirectiveClass annotation missing"));var v=a.ListWrapper.findIndex(e,function(e){return e instanceof u.HostMetadata})!==-1,y=a.ListWrapper.findIndex(e,function(e){return e instanceof u.OptionalMetadata})!==-1,b=a.ListWrapper.findIndex(e,function(e){return e instanceof u.SelfMetadata})!==-1,S=a.ListWrapper.findIndex(e,function(e){return e instanceof u.SkipSelfMetadata})!==-1;if(y&&3!==g)throw new Error(f.getErrorMsg(r,"you cannot use @Optional() without related decorator for injecting Directives. use one of @Host|@Self()|@SkipSelf() + @Optional()"));if(b&&S)throw new Error(f.getErrorMsg(r,"you cannot provide both @Self() and @SkipSelf() with @Inject("+o.getFuncName(m)+") for Directive Injection"));if(v&&b||v&&S)throw new Error(f.getErrorMsg(r,"you cannot provide both @Host(),@SkipSelf() or @Host(),@Self() with @Inject("+o.getFuncName(m)+") for Directive Injections"));var _=i(),w=y?"?":"",E=""+w+_,T=n(m);return O={},O[T+"#"+t]=""+E+T,O;var O}}var o=e("../../facade/lang"),a=e("../../facade/collections"),s=e("../reflection/reflection"),c=e("../directives/metadata_directives"),l=e("../directives/metadata_di"),u=e("../di/metadata"),d=e("../di/provider"),p=e("../di/forward_ref"),f=e("../../facade/exceptions"),h=/^(.+)\/.+\.js$/,m=function(){function e(){}return e.prototype.resolve=function(e){var t=this._getDirectiveMeta(e),r=s.reflector.propMetadata(e);return this._mergeWithPropertyMetadata(t,r)},e.prototype.getRequiredDirectivesMap=function(e){var t=(this._getDirectiveMeta(e),s.reflector.parameters(e));return o.isPresent(t)?t.reduce(function(t,r,n){var a=i(r,n,e);return o.isPresent(a)&&o.assign(t,a),t},{}):{}},e.prototype.parseAssetUrl=function(e){if(o.isBlank(e.moduleId))return"";var t=e.moduleId,r=t.match(h)||[],n=r[1],i=void 0===n?"":n;return i+"/"},e.prototype._getDirectiveMeta=function(e){var t=s.reflector.annotations(p.resolveForwardRef(e));if(o.isPresent(t)){var r=a.ListWrapper.find(t,n);if(o.isPresent(r))return r}throw new Error("No Directive annotation found on "+o.stringify(e))},e.prototype._mergeWithPropertyMetadata=function(e,t){var r=[],n=[],i=[],s={},u={};return a.StringMapWrapper.forEach(t,function(e,t){e.forEach(function(e){if(e instanceof c.InputMetadata&&(o.isPresent(e.bindingPropertyName)?r.push(t+": "+e.bindingPropertyName):r.push(t)),e instanceof c.AttrMetadata&&(o.isPresent(e.bindingPropertyName)?n.push(t+": "+e.bindingPropertyName):n.push(t)),e instanceof c.OutputMetadata&&(o.isPresent(e.bindingPropertyName)?i.push(t+": "+e.bindingPropertyName):i.push(t)),e instanceof c.HostBindingMetadata&&(o.isPresent(e.hostPropertyName)?s["["+e.hostPropertyName+"]"]=t:s["["+t+"]"]=t),e instanceof c.HostListenerMetadata){var a=o.isPresent(e.args)?e.args.join(", "):"";s["("+e.eventName+")"]=t+"("+a+")"}e instanceof l.ContentChildrenMetadata&&(u[t]=e),e instanceof l.ViewChildrenMetadata&&(u[t]=e),e instanceof l.ContentChildMetadata&&(u[t]=e),e instanceof l.ViewChildMetadata&&(u[t]=e)})}),this._merge(e,r,n,i,s,u)},e.prototype._merge=function(e,t,r,n,i,s){var l=o.isPresent(e.inputs)?a.ListWrapper.concat(e.inputs,t):t,u=o.isPresent(e.attrs)?a.ListWrapper.concat(e.attrs,r):r,d=o.isPresent(e.outputs)?a.ListWrapper.concat(e.outputs,n):n,p=o.isPresent(e.host)?a.StringMapWrapper.merge(e.host,i):i,f=o.isPresent(e.queries)?a.StringMapWrapper.merge(e.queries,s):s,h={selector:e.selector,inputs:l,attrs:u,outputs:d,host:p,queries:f,legacy:e.legacy};if(e instanceof c.ComponentMetadata){var m=a.StringMapWrapper.assign({},h,{moduleId:e.moduleId,template:e.template,templateUrl:e.templateUrl,changeDetection:o.isPresent(e.changeDetection)?e.changeDetection:1});return new c.ComponentMetadata(m)}return new c.DirectiveMetadata(h)},e}();r.DirectiveResolver=m},{"../../facade/collections":407,"../../facade/exceptions":408,"../../facade/lang":410,"../di/forward_ref":370,"../di/metadata":372,"../di/provider":374,"../directives/metadata_di":388,"../directives/metadata_directives":389,"../reflection/reflection":399}],394:[function(e,t,r){"use strict";function n(e){return e instanceof a.PipeMetadata}var i=e("../../facade/lang"),o=e("../../facade/collections"),a=e("../pipes/metadata"),s=e("../reflection/reflection"),c=e("../di/forward_ref"),l=function(){function e(){}return e.prototype.resolve=function(e){var t=s.reflector.annotations(c.resolveForwardRef(e));if(i.isPresent(t)){var r=o.ListWrapper.find(t,n);if(i.isPresent(r))return r}throw new Error("No Pipe decorator found on "+i.stringify(e))},e}();r.PipeResolver=l},{"../../facade/collections":407,"../../facade/lang":410,"../di/forward_ref":370,"../pipes/metadata":397,"../reflection/reflection":399}],395:[function(e,t,r){"use strict";var n=e("./pipes/decorators");r.Pipe=n.Pipe},{"./pipes/decorators":396}],396:[function(e,t,r){"use strict";var n=e("../util/decorators"),i=e("./metadata");r.Pipe=n.makeDecorator(i.PipeMetadata)},{"../util/decorators":405,"./metadata":397}],397:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("../../facade/lang"),o=e("../di/metadata"),a=function(e){function t(t){var r=t.name,n=t.pure,i=e.call(this)||this;return i.name=r,i._pure=n,i}return n(t,e),Object.defineProperty(t.prototype,"pure",{get:function(){return!i.isPresent(this._pure)||this._pure},enumerable:!0,configurable:!0}),t}(o.InjectableMetadata);r.PipeMetadata=a},{"../../facade/lang":410,"../di/metadata":372}],398:[function(e,t,r){"use strict";var n=e("../../facade/lang"),i=e("../linker/pipe_resolver"),o=function(){function e(e){this.pipeResolver=e}return e.prototype.createFromType=function(e){function t(t){var n=t.instantiate(e),i=n.transform.bind(n);return r.pure===!1&&(i.$stateful=!0),i}var r=this.pipeResolver.resolve(e);if(!n.isFunction(e.prototype.transform))throw new Error("@Pipe: must implement '#transform' method");return t.$inject=["$injector"],[r.name,t]},e}();r.PipeProvider=o,r.pipeProvider=new o(new i.PipeResolver)},{"../../facade/lang":410,"../linker/pipe_resolver":394}],399:[function(e,t,r){"use strict";var n=e("./reflector"),i=e("./reflection_capabilities");r.reflector=new n.Reflector(new i.ReflectionCapabilities)},{"./reflection_capabilities":400,"./reflector":401}],400:[function(e,t,r){"use strict";function n(e){return i.isPresent(e)&&i.isPresent(e.getMetadata)}var i=e("../../facade/lang"),o=e("../../facade/collections"),a=i.global.Reflect;if(!n(a))throw'\n    Reflect.*metadata shim is required when using class decorators.\n    You can use one of: \n    - "reflect-metadata" (https://www.npmjs.com/package/reflect-metadata) \n    - "core-js/es7/reflect" (https://github.com/zloirock/core-js)\n  ';r.CLASS_META_KEY="annotations",r.PARAM_META_KEY="parameters",r.PARAM_REFLECT_META_KEY="design:paramtypes",r.PROP_META_KEY="propMetadata",r.DOWNGRADED_COMPONENT_NAME_KEY="downgradeComponentName";var s=function(){function e(e){void 0===e&&(e=i.global.Reflect),this._reflect=e}return e.prototype.isReflectionEnabled=function(){return!0},e.prototype.factory=function(e){switch(e.length){case 0:return function(){return new e};case 1:return function(t){return new e(t)};case 2:return function(t,r){return new e(t,r)};case 3:return function(t,r,n){return new e(t,r,n)};case 4:return function(t,r,n,i){return new e(t,r,n,i)};case 5:return function(t,r,n,i,o){return new e(t,r,n,i,o)};case 6:return function(t,r,n,i,o,a){return new e(t,r,n,i,o,a)};case 7:return function(t,r,n,i,o,a,s){return new e(t,r,n,i,o,a,s)};case 8:return function(t,r,n,i,o,a,s,c){return new e(t,r,n,i,o,a,s,c)};case 9:return function(t,r,n,i,o,a,s,c,l){return new e(t,r,n,i,o,a,s,c,l)};case 10:return function(t,r,n,i,o,a,s,c,l,u){return new e(t,r,n,i,o,a,s,c,l,u)};case 11:return function(t,r,n,i,o,a,s,c,l,u,d){return new e(t,r,n,i,o,a,s,c,l,u,d)};case 12:return function(t,r,n,i,o,a,s,c,l,u,d,p){return new e(t,r,n,i,o,a,s,c,l,u,d,p)};case 13:return function(t,r,n,i,o,a,s,c,l,u,d,p,f){return new e(t,r,n,i,o,a,s,c,l,u,d,p,f)};case 14:return function(t,r,n,i,o,a,s,c,l,u,d,p,f,h){return new e(t,r,n,i,o,a,s,c,l,u,d,p,f,h)};case 15:return function(t,r,n,i,o,a,s,c,l,u,d,p,f,h,m){return new e(t,r,n,i,o,a,s,c,l,u,d,p,f,h,m)};case 16:return function(t,r,n,i,o,a,s,c,l,u,d,p,f,h,m,g){return new e(t,r,n,i,o,a,s,c,l,u,d,p,f,h,m,g)};case 17:return function(t,r,n,i,o,a,s,c,l,u,d,p,f,h,m,g,v){return new e(t,r,n,i,o,a,s,c,l,u,d,p,f,h,m,g,v)};case 18:return function(t,r,n,i,o,a,s,c,l,u,d,p,f,h,m,g,v,y){return new e(t,r,n,i,o,a,s,c,l,u,d,p,f,h,m,g,v,y)};case 19:return function(t,r,n,i,o,a,s,c,l,u,d,p,f,h,m,g,v,y,b){return new e(t,r,n,i,o,a,s,c,l,u,d,p,f,h,m,g,v,y,b)};case 20:return function(t,r,n,i,o,a,s,c,l,u,d,p,f,h,m,g,v,y,b,S){return new e(t,r,n,i,o,a,s,c,l,u,d,p,f,h,m,g,v,y,b,S)}}throw new Error("Cannot create a factory for '"+i.stringify(e)+"' because its constructor has more than 20 arguments")},e.prototype._zipTypesAndAnnotations=function(e,t){var r;r="undefined"==typeof e?new Array(t.length):new Array(e.length);for(var n=0;n<r.length;n++)"undefined"==typeof e?r[n]=[]:e[n]!=Object?r[n]=[e[n]]:r[n]=[],i.isPresent(t)&&i.isPresent(t[n])&&(r[n]=r[n].concat(t[n]));return r},e.prototype.parameters=function(e){if(n(this._reflect)){var t=this._reflect.getMetadata(r.PARAM_META_KEY,e),a=this._reflect.getMetadata(r.PARAM_REFLECT_META_KEY,e);if(i.isPresent(a)||i.isPresent(t))return this._zipTypesAndAnnotations(a,t)}var s=new Array(e.length);return o.ListWrapper.fill(s,void 0),s},e.prototype.rawParameters=function(e){return this._reflect.getMetadata(r.PARAM_META_KEY,e)},e.prototype.registerParameters=function(e,t){this._reflect.defineMetadata(r.PARAM_META_KEY,e,t)},e.prototype.annotations=function(e){if(n(this._reflect)){var t=this._reflect.getMetadata(r.CLASS_META_KEY,e);if(i.isPresent(t))return t}return[]},e.prototype.ownAnnotations=function(e){
return this._reflect.getOwnMetadata(r.CLASS_META_KEY,e)},e.prototype.registerAnnotations=function(e,t){this._reflect.defineMetadata(r.CLASS_META_KEY,e,t)},e.prototype.propMetadata=function(e){if(n(this._reflect)){var t=this._reflect.getMetadata(r.PROP_META_KEY,e);if(i.isPresent(t))return t}return{}},e.prototype.ownPropMetadata=function(e){return this._reflect.getOwnMetadata(r.PROP_META_KEY,e)},e.prototype.registerPropMetadata=function(e,t){this._reflect.defineMetadata(r.PROP_META_KEY,e,t)},e.prototype.registerDowngradedNg2ComponentName=function(e,t){this._reflect.defineMetadata(r.DOWNGRADED_COMPONENT_NAME_KEY,e,t)},e.prototype.downgradedNg2ComponentName=function(e){return this._reflect.getOwnMetadata(r.DOWNGRADED_COMPONENT_NAME_KEY,e)},e.prototype.interfaces=function(e){throw new Error("JavaScript does not support interfaces")},e.prototype.getter=function(e){return new Function("o","return o."+e+";")},e.prototype.setter=function(e){return new Function("o","v","return o."+e+" = v;")},e.prototype.method=function(e){var t="if (!o."+e+") throw new Error('\""+e+"\" is undefined');\n        return o."+e+".apply(o, args);";return new Function("o","args",t)},e}();r.ReflectionCapabilities=s},{"../../facade/collections":407,"../../facade/lang":410}],401:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./reflector_reader"),o=function(){function e(e,t,r,n,i){this.annotations=e,this.parameters=t,this.factory=r,this.interfaces=n,this.propMetadata=i}return e}();r.ReflectionInfo=o;var a=function(e){function t(t){var r=e.call(this)||this;return r.reflectionCapabilities=t,r}return n(t,e),t.prototype.isReflectionEnabled=function(){return this.reflectionCapabilities.isReflectionEnabled()},t.prototype.parameters=function(e){return this.reflectionCapabilities.parameters(e)},t.prototype.rawParameters=function(e){return this.reflectionCapabilities.rawParameters(e)},t.prototype.registerParameters=function(e,t){this.reflectionCapabilities.registerParameters(e,t)},t.prototype.annotations=function(e){return this.reflectionCapabilities.annotations(e)},t.prototype.ownAnnotations=function(e){return this.reflectionCapabilities.ownAnnotations(e)},t.prototype.registerAnnotations=function(e,t){this.reflectionCapabilities.registerAnnotations(e,t)},t.prototype.propMetadata=function(e){return this.reflectionCapabilities.propMetadata(e)},t.prototype.ownPropMetadata=function(e){return this.reflectionCapabilities.ownPropMetadata(e)},t.prototype.registerPropMetadata=function(e,t){this.reflectionCapabilities.registerPropMetadata(e,t)},t.prototype.registerDowngradedNg2ComponentName=function(e,t){this.reflectionCapabilities.registerDowngradedNg2ComponentName(e,t)},t.prototype.downgradedNg2ComponentName=function(e){return this.reflectionCapabilities.downgradedNg2ComponentName(e)},t.prototype._getReflectionInfo=function(e){},t.prototype._containsReflectionInfo=function(e){},t}(i.ReflectorReader);r.Reflector=a},{"./reflector_reader":402}],402:[function(e,t,r){"use strict";var n=function(){function e(){}return e}();r.ReflectorReader=n},{}],403:[function(e,t,r){"use strict";function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}n(e("./util/decorators"));var i=e("./util/bundler");r.bundle=i.bundle},{"./util/bundler":404,"./util/decorators":405}],404:[function(e,t,r){"use strict";function n(e,t,r){void 0===t&&(t=[]);var n=a.reflector.downgradedNg2ComponentName(e);if(n){var i=r||o.global.angular.module(n,[]);return i.directive(n,e),i}var c=s.getInjectableName(e),u=r||o.global.angular.module(c,[]),d=a.reflector.annotations(e),p=d[0],f=p.providers,h=void 0===f?[]:f,m=p.viewProviders,g=void 0===m?[]:m,v=s.provide(e),y=v[0],b=v[1],S=l._getAngular1ModuleMetadataByType(e),_=S.providerName,w=S.providerMethod,E=S.moduleMethod;return l._isTypeRegistered(y,u,_,w)?u:(u[E](y,b),l._normalizeProviders(u,h),l._normalizeProviders(u,g),l._normalizeProviders(u,t),u)}function i(e,t,r){void 0===t&&(t=[]);var d=s.getInjectableName(e),p=r||o.global.angular.module(d,[]),f=a.reflector.annotations(e),h=f[0];if(!c.isNgModule(h))throw new Error("bundle() requires a decorated NgModule as its first argument");var m=h.declarations,g=void 0===m?[]:m,v=h.providers,y=void 0===v?[]:v,b=h.imports,S=void 0===b?[]:b;u.ListWrapper.flattenDeep(g).forEach(function(e){n(e,[],p)}),l._normalizeProviders(p,y);var _=S.filter(function(e){if(!o.isFunction(e))return!0;a.reflector.annotations(e);return!c.isNgModule(h)});l._normalizeProviders(p,_);var w=S.filter(function(e){if(!o.isFunction(e))return!1;a.reflector.annotations(e);return c.isNgModule(h)});return w.forEach(function(e){i(e,[],p)}),l._normalizeProviders(p,t),p}var o=e("../../facade/lang"),a=e("../reflection/reflection"),s=e("../di/provider"),c=e("../di/provider_util"),l=e("../di/reflective_provider"),u=e("../../facade/collections");r.bundle=i},{"../../facade/collections":407,"../../facade/lang":410,"../di/provider":374,"../di/provider_util":375,"../di/reflective_provider":376,"../reflection/reflection":399}],405:[function(e,t,r){"use strict";function n(e,t){function r(r){function n(e){i instanceof c.InjectableMetadata&&(i.id=i.id||l.globalKeyRegistry.get(e));var t=s.reflector.ownAnnotations(e);return t=t||[],t.push(i),s.reflector.registerAnnotations(t,e),e}var i=new e(r);return this instanceof e?i:(t&&t(n),n)}return void 0===t&&(t=null),r.prototype=Object.create(e.prototype),r}function i(e,t){function r(){function r(e,r,n){if(a.isFunction(t)&&a.isPresent(r))return t(o,e,r,n);var i=s.reflector.rawParameters(e);for(i=i||[];i.length<=n;)i.push(null);i[n]=i[n]||[];var c=i[n];return c.push(o),s.reflector.registerParameters(i,e),e}for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=Object.create(e.prototype);return e.apply(o,n),this instanceof e?o:r}return void 0===t&&(t=null),r.prototype=Object.create(e.prototype),r}function o(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=Object.create(e.prototype);return e.apply(n,t),this instanceof e?n:function(e,t){var r=s.reflector.ownPropMetadata(e.constructor);r=r||{},r[t]=r[t]||[],r[t].unshift(n),s.reflector.registerPropMetadata(r,e.constructor)}}return t.prototype=Object.create(e.prototype),t}var a=e("../../facade/lang"),s=e("../reflection/reflection"),c=e("../di/metadata"),l=e("../di/key");r.makeDecorator=n,r.makeParamDecorator=i,r.makePropDecorator=o},{"../../facade/lang":410,"../di/key":371,"../di/metadata":372,"../reflection/reflection":399}],406:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./lang"),o=e("rxjs/Subject"),a=function(e){function t(t){void 0===t&&(t=!1);var r=e.call(this)||this;return r._ngExpressionBindingCb=i.noop,r.__isAsync=t,r}return n(t,e),t.prototype.wrapNgExpBindingToEmitter=function(e){this._ngExpressionBindingCb=e},t.prototype.emit=function(t){var r={$event:t};e.prototype.next.call(this,t),this._ngExpressionBindingCb(r)},t.prototype.subscribe=function(t,r,n){var i,o=function(e){return null},a=function(){return null};return t&&"object"==typeof t?(i=this.__isAsync?function(e){setTimeout(function(){return t.next(e)})}:function(e){t.next(e)},t.error&&(o=this.__isAsync?function(e){setTimeout(function(){return t.error(e)})}:function(e){t.error(e)}),t.complete&&(a=this.__isAsync?function(){setTimeout(function(){return t.complete()})}:function(){t.complete()})):(i=this.__isAsync?function(e){setTimeout(function(){return t(e)})}:function(e){t(e)},r&&(o=this.__isAsync?function(e){setTimeout(function(){return r(e)})}:function(e){r(e)}),n&&(a=this.__isAsync?function(){setTimeout(function(){return n()})}:function(){n()})),e.prototype.subscribe.call(this,i,o,a)},t}(o.Subject);r.EventEmitter=a},{"./lang":410,"rxjs/Subject":416}],407:[function(e,t,r){"use strict";var n=e("./lang"),i=1/0,o=function(){function e(){}return e.create=function(){return{}},e.contains=function(e,t){return e.hasOwnProperty(t)},e.baseGet=function(e,t,r){if(null!=e){e=n.toObject(e),void 0!==r&&r in e&&(t=[r]);for(var i=0,o=t.length;null!=e&&i<o;)e=n.toObject(e)[t[i++]];return i&&i==o?e:void 0}},e.getValueFromPath=function(t,r,i){var o=null==t?void 0:e.baseGet(t,n.toPath(r),r+"");return void 0===o?i:o},e.setValueInPath=function(e,t,r){if(null==e)return e;var i=t+"";t=null!=e[i]||n.isKey(t,e)?[i]:n.toPath(t);for(var o=-1,a=t.length,s=a-1,c=e;null!=c&&++o<a;){var l=t[o];n.isJsObject(c)&&(o==s?c[l]=r:null==c[l]&&(c[l]=n.isIndex(t[o+1])?[]:{})),c=c[l]}return e},e.get=function(e,t){return e.hasOwnProperty(t)?e[t]:void 0},e.set=function(e,t,r){e[t]=r},e.keys=function(e){return Object.keys(e)},e.size=function(t){return e.keys(t).length},e.isEmpty=function(e){for(var t in e)return!1;return!0},e.delete=function(e,t){delete e[t]},e.forEach=function(e,t){for(var r in e)e.hasOwnProperty(r)&&t(e[r],r)},e.values=function(e){return Object.keys(e).reduce(function(t,r){return t.push(e[r]),t},[])},e.merge=function(e,t){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);return r},e.equals=function(e,t){var r=Object.keys(e),n=Object.keys(t);if(r.length!=n.length)return!1;for(var i,o=0;o<r.length;o++)if(i=r[o],e[i]!==t[i])return!1;return!0},e.assign=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!n.isPresent(e))throw new TypeError("Object.assign cannot be called with null or undefined");var i=Object.prototype.hasOwnProperty;if(Object.assign)return(l=Object).assign.apply(l,[e].concat(t));for(var o,a=Object(e),s=0;s<t.length;s++){o=Object(t[s]);for(var c in o)i.call(o,c)&&(a[c]=o[c])}return a;var l},e}();r.StringMapWrapper=o;var a=function(){function e(){}return e.create=function(){return[]},e.size=function(e){return e.length},e.createFixedSize=function(e){return new Array(e)},e.createGrowableSize=function(e){return new Array(e)},e.clone=function(e){return e.slice(0)},e.forEachWithIndex=function(e,t){for(var r=0;r<e.length;r++)t(e[r],r)},e.first=function(e){return e?e[0]:null},e.last=function(e){return e&&0!=e.length?e[e.length-1]:null},e.indexOf=function(e,t,r){return void 0===r&&(r=0),e.indexOf(t,r)},e.contains=function(e,t){return e.indexOf(t)!==-1},e.reversed=function(t){var r=e.clone(t);return r.reverse()},e.concat=function(e,t){return e.concat(t)},e.insert=function(e,t,r){e.splice(t,0,r)},e.removeAt=function(e,t){var r=e[t];return e.splice(t,1),r},e.removeAll=function(e,t){for(var r=0;r<t.length;++r){var n=e.indexOf(t[r]);e.splice(n,1)}},e.remove=function(e,t){var r=e.indexOf(t);return r>-1&&(e.splice(r,1),!0)},e.clear=function(e){e.length=0},e.isEmpty=function(e){return 0==e.length},e.fill=function(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=null),Array.prototype.fill||(Array.prototype.fill=function(e){if(null==this)throw new TypeError("this is null or not defined");for(var t=Object(this),r=t.length>>>0,n=arguments[1],i=n>>0,o=i<0?Math.max(r+i,0):Math.min(i,r),a=arguments[2],s=void 0===a?r:a>>0,c=s<0?Math.max(r+s,0):Math.min(s,r);o<c;)t[o]=e,o++;return t}),e.fill(t,r,null===n?e.length:n)},e.equals=function(e,t){if(e.length!=t.length)return!1;for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0},e.slice=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=null),e.slice(t,null===r?void 0:r)},e.splice=function(e,t,r){return e.splice(t,r)},e.sort=function(e,t){n.isPresent(t)?e.sort(t):e.sort()},e.toString=function(e){return e.toString()},e.toJSON=function(e){return JSON.stringify(e)},e.maximum=function(e,t){if(0==e.length)return null;for(var r=null,i=-(1/0),o=0;o<e.length;o++){var a=e[o];if(!n.isBlank(a)){var s=t(a);s>i&&(r=a,i=s)}}return r},e.find=function(e,t,r){if(n.isFunction(Array.prototype.find))return e.find(t,r);r=r||this;var i,o=e.length;if(!n.isFunction(t))throw new TypeError(t+" is not a function");for(i=0;i<o;i++)if(t.call(r,e[i],i,e))return e[i]},e.findIndex=function(e,t,r){if(n.isFunction(Array.prototype.findIndex))return e.findIndex(t,r);if(!n.isFunction(t))throw new TypeError("predicate must be a function");var i=Object(e),o=i.length;if(0===o)return-1;for(var a=0;a<o;a++)if(t.call(r,i[a],a,i))return a;return-1},e.isFlattenable=function(e){return n.isArray(e)||n.isArguments(e)},e.arrayPush=function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e},e.baseFlatten=function(t,r,n,i,o){void 0===n&&(n=e.isFlattenable),void 0===i&&(i=!1),void 0===o&&(o=[]);for(var a=-1,s=t.length;++a<s;){var c=t[a];r>0&&n(c)?r>1?e.baseFlatten(c,r-1,n,i,o):e.arrayPush(o,c):i||(o[o.length]=c)}return o},e.flatten=function(t){var r=t?t.length:0;return r?e.baseFlatten(t,1):[]},e.flattenDeep=function(t){var r=t?t.length:0;return r?e.baseFlatten(t,i):[]},e}();r.ListWrapper=a},{"./lang":410}],408:[function(e,t,r){"use strict";function n(e,t){return"\n      "+o.getFuncName(e)+":\n      ===========================\n      "+t+"\n    "}var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=e("./lang"),a=function(e){function t(t){void 0===t&&(t="--");var r=e.call(this,t)||this;return r.message=t,r.stack=new Error(t).stack,r}return i(t,e),t.prototype.toString=function(){return this.message},t}(Error);r.BaseException=a,r.getErrorMsg=n},{"./lang":410}],409:[function(e,t,r){"use strict";var n=e("./type");r.Type=n.Type;var i=e("./async");r.EventEmitter=i.EventEmitter},{"./async":406,"./type":412}],410:[function(e,t,r){(function(e){"use strict";function t(){X=!1}function n(){return X}function i(e){return void 0!==e&&null!==e}function o(e){return void 0===e||null===e}function a(e){return"string"==typeof e}function s(e){return"function"==typeof e}function c(e){return"boolean"==typeof e}function l(e){return Array.isArray(e)}function u(e){return"number"==typeof e}function d(e){return e instanceof Date&&!isNaN(e.valueOf())}function p(e){return s(e)}function f(e){return"object"==typeof e&&null!==e}function h(e){return e instanceof H.Promise}function m(e){return Boolean(i(e)&&e.then)}function g(e){return Boolean(i(e)&&e.subscribe)}function v(e){return m(e)||g(e)}function y(e){return i(e)&&e.$digest&&e.$on}function b(e){return i(e)&&e.unsubscribe}function S(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function _(e){return"length"in e&&Object.prototype.hasOwnProperty.call(e,"callee")&&(!Object.prototype.propertyIsEnumerable.call(e,"callee")||Object.prototype.toString.call(e)==K)}function w(){}function E(e){if("string"==typeof e)return e;if(void 0===e||null===e)return""+e;if(e.name)return e.name;var t=e.toString(),r=t.indexOf("\n");return r===-1?t:t.substring(0,r).replace("\r","")}function T(e){return null==e?"":e+""}function O(e){if(l(e))return e;var t=[];return T(e).replace(z,function(e,r,n,i){var o=n?i.replace(G,"$1"):r||e;return t.push(o),o}),t}function I(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=H.Object.assign||H.angular.extend;return n.apply(void 0,[e].concat(t))}function P(e){if(!e.match(Z))throw new Error("Only selectors matching element names or base attributes are supported, got: "+e);return e.trim().replace(J,"").replace(ee,function(e,t){return t.toUpperCase()})}function R(e){var t=C(e);return k(t)}function C(e){var t=/function\s*([^\s(]+)/.exec(E(e)),r=t||[],n=r[1],i=void 0===n?"":n;return i||E(e)}function A(e){return"$"+e+"Controller"}function j(e){return Array.isArray(e.$inject)&&0!==e.$inject.length}function k(e){return $(e,String.prototype.toLowerCase)}function D(e){return $(e,String.prototype.toUpperCase)}function $(e,t){return t.call(e.charAt(0))+e.substring(1)}function M(e){return o(e)?null:e}function x(e){return!o(e)&&e}function F(e){console.log(e)}function L(e,t,r){for(var n=t.split("."),o=e;n.length>1;){var a=n.shift();o=o.hasOwnProperty(a)&&i(o[a])?o[a]:o[a]={}}void 0!==o&&null!==o||(o={}),o[n.shift()]=r}function U(e){return S(e)?e:Object(e)}function B(e,t){return void 0===t&&(t=Q),e=u(e)||W.test(e)?+e:-1,e>-1&&e%1==0&&e<t}function N(e,t){if(a(e)&&Y.test(e)||u(e))return!0;if(l(e))return!1;var r=!V.test(e);return r||null!=t&&e in U(t)}var q;q="undefined"==typeof window?e:window;var H=q;r.global=H;var V=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,Y=/^\w*$/,z=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,G=/\\(\\)?/g,W=/^\d+$/,Q=9007199254740991,K="[object Arguments]",X=!0;r.enableProdMode=t,r.assertionsEnabled=n,r.isPresent=i,r.isBlank=o,r.isString=a,r.isFunction=s,r.isBoolean=c,r.isArray=l,r.isNumber=u,r.isDate=d,r.isType=p,r.isStringMap=f,r.isPromise=h,r.isPromiseLike=m,r.isObservable=g,r.isPromiseOrObservable=v,r.isScope=y,r.isSubscription=b,r.isJsObject=S,r.isArguments=_,r.noop=w,r.stringify=E,r.baseToString=T,r.toPath=O,r.assign=I;var J=/\[|\]/g,Z=/^\[?[\w|-]*\]?$/,ee=/-(\w)/g;r.resolveDirectiveNameFromSelector=P,r.getTypeName=R,r.getFuncName=C,r.controllerKey=A,r.hasCtorInjectables=j,r.firstToLowerCase=k,r.firstToUpperCase=D,r.normalizeBlank=M,r.normalizeBool=x,r.print=F,r.setValueOnPath=L,r.toObject=U,r.isIndex=B,r.isKey=N}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],411:[function(e,t,r){"use strict";function n(e){function t(t){return t.replace(r,function(t,r){return(r?e:"")+t.toLowerCase()})}var r=/[A-Z]/g;return t}var i=e("./lang"),o=n("-"),a=n("_"),s=function(){function e(){}return e.fromCharCode=function(e){return String.fromCharCode(e)},e.charCodeAt=function(e,t){return e.charCodeAt(t)},e.split=function(e,t){return e.split(t)},e.equals=function(e,t){return e===t},e.stripLeft=function(e,t){if(e&&e.length){for(var r=0,n=0;n<e.length&&e[n]==t;n++)r++;e=e.substring(r)}return e},e.stripRight=function(e,t){if(e&&e.length){for(var r=e.length,n=e.length-1;n>=0&&e[n]==t;n--)r--;e=e.substring(0,r)}return e},e.replace=function(e,t,r){return e.replace(t,r)},e.replaceAll=function(e,t,r){return e.replace(t,r)},e.slice=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=null),e.slice(t,null===r?void 0:r)},e.replaceAllMapped=function(e,t,r){return e.replace(t,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.splice(-2,2),r(e)})},e.compare=function(e,t){return e<t?-1:e>t?1:0},e.includes=function(e,t,r){return void 0===r&&(r=0),String.prototype.includes?e.includes(t,r):e.indexOf(t,r)===r},e.startsWith=function(e,t,r){return void 0===r&&(r=0),String.prototype.startsWith?e.startsWith(t,r):e.indexOf(t,r)===r},e.endsWith=function(e,t,r){if(String.prototype.endsWith)return e.endsWith(t,r);var n=e.toString();(!i.isNumber(r)||!isFinite(r)||Math.floor(r)!==r||r>n.length)&&(r=n.length),r-=t.length;var o=n.indexOf(t,r);return o!==-1&&o===r},e.kebabCase=function(e){return o(e)},e.snakeCase=function(e){return a(e)},e}();r.StringWrapper=s},{"./lang":410}],412:[function(e,t,r){"use strict";r.Type=Function},{}],413:[function(e,t,r){(function(e){var t;!function(t){"use strict";function r(e,t,r,n){if(E(r)){if(!k(e))throw new TypeError;if(!$(t))throw new TypeError;return p(e,t)}if(!k(e))throw new TypeError;if(!I(t))throw new TypeError;if(!I(n)&&!E(n)&&!T(n))throw new TypeError;return T(n)&&(n=void 0),r=j(r),f(e,t,r,n)}function n(e,t){function r(r,n){if(E(n)){if(!$(r))throw new TypeError;b(e,t,r,void 0)}else{if(!I(r))throw new TypeError;n=j(n),b(e,t,r,n)}}return r}function i(e,t,r,n){if(!I(r))throw new TypeError;return E(n)||(n=j(n)),b(e,t,r,n)}function o(e,t,r){if(!I(t))throw new TypeError;return E(r)||(r=j(r)),m(e,t,r)}function a(e,t,r){if(!I(t))throw new TypeError;return E(r)||(r=j(r)),g(e,t,r)}function s(e,t,r){if(!I(t))throw new TypeError;return E(r)||(r=j(r)),v(e,t,r)}function c(e,t,r){if(!I(t))throw new TypeError;return E(r)||(r=j(r)),y(e,t,r)}function l(e,t){if(!I(e))throw new TypeError;return E(t)||(t=j(t)),S(e,t)}function u(e,t){if(!I(e))throw new TypeError;return E(t)||(t=j(t)),_(e,t)}function d(e,t,r){if(!I(t))throw new TypeError;E(r)||(r=j(r));var n=h(t,r,!1);if(E(n))return!1;if(!n.delete(e))return!1;if(n.size>0)return!0;var i=ne.get(t);return i.delete(r),i.size>0||(ne.delete(t),!0)}function p(e,t){for(var r=e.length-1;r>=0;--r){var n=e[r],i=n(t);if(!E(i)&&!T(i)){if(!$(i))throw new TypeError;t=i}}return t}function f(e,t,r,n){for(var i=e.length-1;i>=0;--i){var o=e[i],a=o(t,r,n);if(!E(a)&&!T(a)){if(!I(a))throw new TypeError;n=a}}return n}function h(e,t,r){var n=ne.get(e);if(E(n)){if(!r)return;n=new ee,ne.set(e,n)}var i=n.get(t);if(E(i)){if(!r)return;i=new ee,n.set(t,i)}return i}function m(e,t,r){var n=g(e,t,r);if(n)return!0;var i=B(t);return!T(i)&&m(e,i,r)}function g(e,t,r){var n=h(t,r,!1);return!E(n)&&C(n.has(e))}function v(e,t,r){var n=g(e,t,r);if(n)return y(e,t,r);var i=B(t);return T(i)?void 0:v(e,i,r)}function y(e,t,r){var n=h(t,r,!1);if(!E(n))return n.get(e)}function b(e,t,r,n){var i=h(r,n,!0);i.set(e,t)}function S(e,t){var r=_(e,t),n=B(e);if(null===n)return r;var i=S(n,t);if(i.length<=0)return r;if(r.length<=0)return i;for(var o=new te,a=[],s=0,c=r;s<c.length;s++){var l=c[s],u=o.has(l);u||(o.add(l),a.push(l))}for(var d=0,p=i;d<p.length;d++){var l=p[d],u=o.has(l);u||(o.add(l),a.push(l))}return a}function _(e,t){var r=h(e,t,!1),n=[];if(E(r))return n;for(var i=r.keys(),o=x(i);;){var a=L(o);try{if(!a)return n;var s=F(a);n.push(s)}catch(e){try{a&&(a=!1,U(o))}finally{throw e}}finally{a&&U(o)}}}function w(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function E(e){return void 0===e}function T(e){return null===e}function O(e){return"symbol"==typeof e}function I(e){return"object"==typeof e?null!==e:"function"==typeof e}function P(e,t){switch(w(e)){case 0:return e;case 1:return e;case 2:return e;case 3:return e;case 4:return e;case 5:return e}var r=3===t?"string":5===t?"number":"default",n=M(e,K);if(void 0!==n){var i=n.call(e,r);if(I(i))throw new TypeError;return i}return R(e,"default"===r?"number":r)}function R(e,t){if("string"===t){var r=e.toString;if(D(r)){var n=r.call(e);if(!I(n))return n}var i=e.valueOf;if(D(i)){var n=i.call(e);if(!I(n))return n}}else{var i=e.valueOf;if(D(i)){var n=i.call(e);if(!I(n))return n}var o=e.toString;if(D(o)){var n=o.call(e);if(!I(n))return n}}throw new TypeError}function C(e){return!!e}function A(e){return""+e}function j(e){var t=P(e,3);return O(t)?t:A(t)}function k(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function D(e){return"function"==typeof e}function $(e){return"function"==typeof e}function M(e,t){var r=e[t];if(void 0!==r&&null!==r){if(!D(r))throw new TypeError;return r}}function x(e){var t=M(e,X);if(!D(t))throw new TypeError;var r=t.call(e);if(!I(r))throw new TypeError;return r}function F(e){return e.value}function L(e){var t=e.next();return!t.done&&t}function U(e){var t=e.return;t&&t.call(e)}function B(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===Z)return t;if(t!==Z)return t;var r=e.prototype,n=r&&Object.getPrototypeOf(r);if(null==n||n===Object.prototype)return t;var i=n.constructor;return"function"!=typeof i?t:i===e?t:i}function N(){function e(e,t){return e}function t(e,t){return t}function r(e,t){return[e,t]}var n={},i=[],o=function(){function e(e,t,r){this._index=0,this._keys=e,this._values=t,this._selector=r}return e.prototype["@@iterator"]=function(){return this},e.prototype[X]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var t=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=i,this._values=i):this._index++,{value:t,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=i,this._values=i),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=i,this._values=i),{value:e,done:!0}},e}();return function(){function i(){this._keys=[],this._values=[],this._cacheKey=n,this._cacheIndex=-2}return Object.defineProperty(i.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),i.prototype.has=function(e){return this._find(e,!1)>=0},i.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},i.prototype.set=function(e,t){var r=this._find(e,!0);return this._values[r]=t,this},i.prototype.delete=function(e){var t=this._find(e,!1);if(t>=0){for(var r=this._keys.length,i=t+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=n,this._cacheIndex=-2),!0}return!1},i.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=n,this._cacheIndex=-2},i.prototype.keys=function(){return new o(this._keys,this._values,e)},i.prototype.values=function(){return new o(this._keys,this._values,t)},i.prototype.entries=function(){return new o(this._keys,this._values,r)},i.prototype["@@iterator"]=function(){return this.entries()},i.prototype[X]=function(){return this.entries()},i.prototype._find=function(e,t){if(this._cacheKey===e)return this._cacheIndex;var r=this._keys.indexOf(e);return r<0&&t&&(r=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheKey=e,this._cacheIndex=r},i}()}function q(){return function(){function e(){this._map=new ee}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[X]=function(){return this.keys()},e}()}function H(){function e(){var e;do e="@@WeakMap@@"+i();while(Y.has(a,e));return a[e]=!0,e}function t(e,t){if(!z.call(e,s)){if(!t)return;Object.defineProperty(e,s,{value:J()})}return e[s]}function r(e,t){for(var r=0;r<t;++r)e[r]=255*Math.random()|0;return e}function n(e){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):r(new Uint8Array(e),e):r(new Array(e),e)}function i(){var e=n(o);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var t="",r=0;r<o;++r){var i=e[r];4!==r&&6!==r&&8!==r||(t+="-"),i<16&&(t+="0"),t+=i.toString(16).toLowerCase()}return t}var o=16,a=J(),s=e();return function(){function r(){this._key=e()}return r.prototype.has=function(e){var r=t(e,!1);return void 0!==r&&Y.has(r,this._key)},r.prototype.get=function(e){var r=t(e,!1);return void 0!==r?Y.get(r,this._key):void 0},r.prototype.set=function(e,r){var n=t(e,!0);return n[this._key]=r,this},r.prototype.delete=function(e){var r=t(e,!1);return void 0!==r&&delete r[this._key]},r.prototype.clear=function(){this._key=e()},r}()}function V(e){return e.__=void 0,delete e.__,e}var Y,z=Object.prototype.hasOwnProperty,G="function"==typeof Object.create,W={__proto__:[]}instanceof Array,Q="function"==typeof Symbol,K=Q&&"undefined"!=typeof Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",X=Q&&"undefined"!=typeof Symbol.iterator?Symbol.iterator:"@@iterator",J=G?function(){return V(Object.create(null))}:W?function(){return V({__proto__:null})}:function(){return V({})};!function(e){var t=!G&&!W;e.has=t?function(e,t){return z.call(e,t)}:function(e,t){return t in e},e.get=t?function(e,t){return z.call(e,t)?e[t]:void 0}:function(e,t){return e[t]}}(Y||(Y={}));var Z=Object.getPrototypeOf(Function),ee="function"==typeof Map&&"function"==typeof Map.prototype.entries?Map:N(),te="function"==typeof Set&&"function"==typeof Set.prototype.entries?Set:q(),re="function"==typeof WeakMap?WeakMap:H(),ne=new re;t.decorate=r,t.metadata=n,t.defineMetadata=i,t.hasMetadata=o,t.hasOwnMetadata=a,t.getMetadata=s,t.getOwnMetadata=c,t.getMetadataKeys=l,t.getOwnMetadataKeys=u,t.deleteMetadata=d,function(e){if("undefined"!=typeof e.Reflect){if(e.Reflect!==t)for(var r in t)z.call(t,r)&&(e.Reflect[r]=t[r])}else e.Reflect=t}("undefined"!=typeof e?e:"undefined"!=typeof self?self:Function("return this;")())}(t||(t={}))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],414:[function(e,t,r){"use strict";var n=e("./util/root"),i=e("./util/toSubscriber"),o=e("./symbol/observable"),a=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n=this.operator,o=i.toSubscriber(e,t,r);if(n?n.call(o,this.source):o.add(this._subscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype.forEach=function(e,t){var r=this;if(t||(n.root.Rx&&n.root.Rx.config&&n.root.Rx.config.Promise?t=n.root.Rx.config.Promise:n.root.Promise&&(t=n.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,n){var i=r.subscribe(function(t){if(i)try{e(t)}catch(e){n(e),i.unsubscribe()}else e(t)},n,t)})},e.prototype._subscribe=function(e){return this.source.subscribe(e)},e.prototype[o.$$observable]=function(){return this},e.create=function(t){return new e(t)},e}();r.Observable=a},{"./symbol/observable":420,"./util/root":428,"./util/toSubscriber":429}],415:[function(e,t,r){"use strict";r.empty={closed:!0,next:function(e){},error:function(e){throw e},complete:function(){}}},{}],416:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./Observable"),o=e("./Subscriber"),a=e("./Subscription"),s=e("./util/ObjectUnsubscribedError"),c=e("./SubjectSubscription"),l=e("./symbol/rxSubscriber"),u=function(e){function t(t){e.call(this,t),this.destination=t}return n(t,e),t}(o.Subscriber);r.SubjectSubscriber=u;var d=function(e){function t(){e.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return n(t,e),t.prototype[l.$$rxSubscriber]=function(){return new u(this)},t.prototype.lift=function(e){var t=new p(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new s.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,r=e.slice(),n=0;n<t;n++)r[n].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._subscribe=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),a.Subscription.EMPTY):this.isStopped?(e.complete(),a.Subscription.EMPTY):(this.observers.push(e),new c.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new i.Observable;return e.source=this,e},t.create=function(e,t){return new p(e,t)},t}(i.Observable);r.Subject=d;var p=function(e){function t(t,r){e.call(this),this.destination=t,this.source=r}return n(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){
var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){var t=this.source;return t?this.source.subscribe(e):a.Subscription.EMPTY},t}(d);r.AnonymousSubject=p},{"./Observable":414,"./SubjectSubscription":417,"./Subscriber":418,"./Subscription":419,"./symbol/rxSubscriber":421,"./util/ObjectUnsubscribedError":422}],417:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./Subscription"),o=function(e){function t(t,r){e.call(this),this.subject=t,this.subscriber=r,this.closed=!1}return n(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var r=t.indexOf(this.subscriber);r!==-1&&t.splice(r,1)}}},t}(i.Subscription);r.SubjectSubscription=o},{"./Subscription":419}],418:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=e("./util/isFunction"),o=e("./Subscription"),a=e("./Observer"),s=e("./symbol/rxSubscriber"),c=function(e){function t(r,n,i){switch(e.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a.empty;break;case 1:if(!r){this.destination=a.empty;break}if("object"==typeof r){r instanceof t?(this.destination=r,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,r));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,r,n,i)}}return n(t,e),t.prototype[s.$$rxSubscriber]=function(){return this},t.create=function(e,r,n){var i=new t(e,r,n);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t}(o.Subscription);r.Subscriber=c;var l=function(e){function t(t,r,n,o){e.call(this),this._parent=t;var a,s=this;i.isFunction(r)?a=r:r&&(s=r,a=r.next,n=r.error,o=r.complete,i.isFunction(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this)),this._context=s,this._next=a,this._error=n,this._complete=o}return n(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parent;t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parent;if(this._error)t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else{if(!t.syncErrorThrowable)throw this.unsubscribe(),e;t.syncErrorValue=e,t.syncErrorThrown=!0,this.unsubscribe()}}},t.prototype.complete=function(){if(!this.isStopped){var e=this._parent;this._complete?e.syncErrorThrowable?(this.__tryOrSetError(e,this._complete),this.unsubscribe()):(this.__tryOrUnsub(this._complete),this.unsubscribe()):this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){throw this.unsubscribe(),e}},t.prototype.__tryOrSetError=function(e,t,r){try{t.call(this._context,r)}catch(t){return e.syncErrorValue=t,e.syncErrorThrown=!0,!0}return!1},t.prototype._unsubscribe=function(){var e=this._parent;this._context=null,this._parent=null,e.unsubscribe()},t}(c)},{"./Observer":415,"./Subscription":419,"./symbol/rxSubscriber":421,"./util/isFunction":426}],419:[function(e,t,r){"use strict";function n(e){return e.reduce(function(e,t){return e.concat(t instanceof u.UnsubscriptionError?t.errors:t)},[])}var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=e("./util/isArray"),a=e("./util/isObject"),s=e("./util/isFunction"),c=e("./util/tryCatch"),l=e("./util/errorObject"),u=e("./util/UnsubscriptionError"),d=function(){function e(e){this.closed=!1,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){this.closed=!0;var r=this,i=r._unsubscribe,d=r._subscriptions;if(this._subscriptions=null,s.isFunction(i)){var p=c.tryCatch(i).call(this);p===l.errorObject&&(t=!0,e=e||(l.errorObject.e instanceof u.UnsubscriptionError?n(l.errorObject.e.errors):[l.errorObject.e]))}if(o.isArray(d))for(var f=-1,h=d.length;++f<h;){var m=d[f];if(a.isObject(m)){var p=c.tryCatch(m.unsubscribe).call(m);if(p===l.errorObject){t=!0,e=e||[];var g=l.errorObject.e;g instanceof u.UnsubscriptionError?e=e.concat(n(g.errors)):e.push(g)}}}if(t)throw new u.UnsubscriptionError(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var r=t;switch(typeof t){case"function":r=new e(t);case"object":if(r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var n=new p(r,this);return this._subscriptions=this._subscriptions||[],this._subscriptions.push(n),n},e.prototype.remove=function(t){if(null!=t&&t!==this&&t!==e.EMPTY){var r=this._subscriptions;if(r){var n=r.indexOf(t);n!==-1&&r.splice(n,1)}}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();r.Subscription=d;var p=function(e){function t(t,r){e.call(this),this._innerSub=t,this._parent=r}return i(t,e),t.prototype._unsubscribe=function(){var e=this,t=e._innerSub,r=e._parent;r.remove(this),t.unsubscribe()},t}(d);r.ChildSubscription=p},{"./util/UnsubscriptionError":423,"./util/errorObject":424,"./util/isArray":425,"./util/isFunction":426,"./util/isObject":427,"./util/tryCatch":430}],420:[function(e,t,r){"use strict";function n(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}var i=e("../util/root");r.getSymbolObservable=n,r.$$observable=n(i.root)},{"../util/root":428}],421:[function(e,t,r){"use strict";var n=e("../util/root"),i=n.root.Symbol;r.$$rxSubscriber="function"==typeof i&&"function"==typeof i.for?i.for("rxSubscriber"):"@@rxSubscriber"},{"../util/root":428}],422:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(){var t=e.call(this,"object unsubscribed");this.name=t.name="ObjectUnsubscribedError",this.stack=t.stack,this.message=t.message}return n(t,e),t}(Error);r.ObjectUnsubscribedError=i},{}],423:[function(e,t,r){"use strict";var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(t){e.call(this),this.errors=t;var r=Error.call(this,t?t.length+" errors occurred during unsubscription:\n  "+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"");this.name=r.name="UnsubscriptionError",this.stack=r.stack,this.message=r.message}return n(t,e),t}(Error);r.UnsubscriptionError=i},{}],424:[function(e,t,r){"use strict";r.errorObject={e:{}}},{}],425:[function(e,t,r){"use strict";r.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},{}],426:[function(e,t,r){"use strict";function n(e){return"function"==typeof e}r.isFunction=n},{}],427:[function(e,t,r){"use strict";function n(e){return null!=e&&"object"==typeof e}r.isObject=n},{}],428:[function(e,t,r){(function(e){"use strict";if(r.root="object"==typeof window&&window.window===window&&window||"object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e,!r.root)throw new Error("RxJS could not find any global context (window, self, global)")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],429:[function(e,t,r){"use strict";function n(e,t,r){if(e){if(e instanceof i.Subscriber)return e;if(e[o.$$rxSubscriber])return e[o.$$rxSubscriber]()}return e||t||r?new i.Subscriber(e,t,r):new i.Subscriber(a.empty)}var i=e("../Subscriber"),o=e("../symbol/rxSubscriber"),a=e("../Observer");r.toSubscriber=n},{"../Observer":415,"../Subscriber":418,"../symbol/rxSubscriber":421}],430:[function(e,t,r){"use strict";function n(){try{return o.apply(this,arguments)}catch(e){return a.errorObject.e=e,a.errorObject}}function i(e){return o=e,n}var o,a=e("./errorObject");r.tryCatch=i},{"./errorObject":424}],431:[function(e,t,r){},{}],432:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("../appConfig/appConfigForward"),s=e("ng-metadata/core"),c=e("./account.service"),l=e("../appConfig/appConfigForward"),u=e("../analytics/primolytics.service"),d=e("../infra/mediaQueries.service"),p=e("../search/topbar/skipTo/skipTo.service"),f=e("../primoExplore/primoExploreStates.module"),h=e("../search/search.fields.service"),m=e("../journals/journals.service"),g=function(){function e(e,t,r,n,i,o,a,s){this.accountService=e,this.$state=t,this.accountIcons=r,this.primolyticsService=n,this.skipToService=i,this.mediaQueries=o,this.searchFieldsService=a,this.journalsService=s,this.vid=l.getVid(),this.displayBackToSearchLink=e.getDisplayBackToSearchLink()}return e.prototype.backToSearch=function(){var e=f.STATE_NAMES.SEARCH;this.journalsService.returnToJournalsSearch()&&(e=f.STATE_NAMES.JOURNAL_SEARCH),this.$state.go(e,this.searchFieldsService.searchParams,{reload:!1})},e.prototype.isOvp=function(){return""!==a.getApiBaseUrl()},Object.defineProperty(e.prototype,"skipLinks",{get:function(){return this.skipToService.skipLinks.account},enumerable:!0,configurable:!0}),e}();n([u.beacon({p:"general",op:"gotoSearch"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],g.prototype,"backToSearch",null),g=n([s.Component({selector:"prm-account",templateUrl:"components/account/account.html"}),o(1,s.Inject("$state")),o(2,s.Inject("accountIcons")),i("design:paramtypes",[c.AccountService,Object,Object,u.PrimolyticsService,p.SkipToService,d.MediaQueries,h.SearchFieldsService,m.JournalsService])],g),r.PrmAccount=g},{"../analytics/primolytics.service":480,"../appConfig/appConfigForward":484,"../infra/mediaQueries.service":562,"../journals/journals.service":588,"../primoExplore/primoExploreStates.module":620,"../search/search.fields.service":790,"../search/topbar/skipTo/skipTo.service":824,"./account.service":434,"ng-metadata/core":362}],433:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./personalInfo/personalInfo.directive"),a=e("./messagesAndBlocks/messagesAndBlocks.directive"),s=e("./loans/loans.directive"),c=e("./fines/fines.directive"),l=e("./deposits/deposits.directive"),u=e("./overview/accountOverview.directive"),d=e("./linkedUserSelector/linkedUserSelector.directive"),p=e("./account.directive"),f=e("./account.service"),h=e("angular-material"),m=e("./accountLinks/accountLinks.module"),g=e("./deposits/deposits.module"),v=e("./personalInfo/personalInfo.module"),y=e("./requests/requests.module"),b=e("./linkedUserSelector/linkedUserSelector.module"),S=e("./loans/loans.module"),_=e("../infra/password/changePassword.module"),w=e("./messagesAndBlocks/messagesAndBlocks.module"),E=e("./fines/fines.module"),T=e("./overview/accountOverview.module"),O=function(){function e(){}return e}();O=n([i.NgModule({declarations:[o.PrmPersonalInfo,a.PrmMessagesAndBlocks,s.PrmLoans,c.PrmFines,l.PrmDeposits,u.PrmAccountOverview,d.PrmLinkedUserSelector,p.PrmAccount],providers:[f.AccountService],imports:[h,m.AccountLinksModule,g.DepositsModule,v.PersonalInfoModule,y.RequestsModule,b.LinkedUserSelectorModule,S.LoansModule,_.ChangePasswordModule,w.MessagesAndBlocksModule,E.FinesModule,T.AccountOverviewModule]})],O),r.AccountModule=O},{"../infra/password/changePassword.module":564,"./account.directive":432,"./account.service":434,"./accountLinks/accountLinks.module":436,"./deposits/deposits.directive":438,"./deposits/deposits.module":439,"./fines/fines.directive":443,"./fines/fines.module":444,"./linkedUserSelector/linkedUserSelector.directive":446,"./linkedUserSelector/linkedUserSelector.module":447,"./loans/loans.directive":451,"./loans/loans.module":452,"./messagesAndBlocks/messagesAndBlocks.directive":454,"./messagesAndBlocks/messagesAndBlocks.module":455,"./overview/accountOverview.directive":457,"./overview/accountOverview.module":458,"./personalInfo/personalInfo.directive":470,"./personalInfo/personalInfo.module":472,"./requests/requests.module":476,"angular-material":17,"ng-metadata/core":362}],434:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../infra/httpRequest/http.service"),c=e("../nddUtils/configurationUtil.service"),l=e("./linkedUserSelector/linkedUserSelector.service"),u=e("../appConfig/appConfig.module"),d=function(){function e(e,t,r,n){this.restBaseURLs=e,this.httpService=t,this.configurationUtil=r,this.linkedUserSelectorService=n,this.resquestInProgress={},this.ilsServices={counters:{path:"/primo_library/libweb/webservices/rest/v1/myaccount/counters",method:"GET"},loans:{path:"/primo_library/libweb/webservices/rest/v1/myaccount/loans",method:"GET"},renew_loan:{path:"/primo_library/libweb/webservices/rest/v1/myaccount/renew_loans",method:"POST"},renew_all_loans:{path:"/primo_library/libweb/webservices/rest/v1/myaccount/renew_all_loans",method:"POST"},requests:{path:"/primo_library/libweb/webservices/rest/v1/myaccount/requests",method:"GET"},deposits:{path:"/primo_library/libweb/webservices/rest/v1/myaccount/depositsInfo",method:"GET"},fines:{path:"/primo_library/libweb/webservices/rest/v1/myaccount/fines",method:"GET"},cancel_requests:{path:"/primo_library/libweb/webservices/rest/v1/myaccount/cancel_requests",method:"POST"},blocks_messages:{path:"/primo_library/libweb/webservices/rest/v1/myaccount/blocks_messages",method:"GET"},personal_settings:{path:"/primo_library/libweb/webservices/rest/v1/myaccount/personal_settings",method:"GET"},update_personal_settings:{path:"/primo_library/libweb/webservices/rest/v1/myaccount/update_personal_settings",method:"POST"},submit_deposit:{path:"/primo_library/libweb/webservices/rest/v1/myaccount/submit_deposit",method:"POST"},withdraw_deposit:{path:"/primo_library/libweb/webservices/rest/v1/myaccount/withdraw_deposit",method:"POST"},collection:{path:"/primo_library/libweb/webservices/rest/v1/myaccount/collection",method:"GET"}},this.myAccountBaseUrl=e.myAccountBaseURL,this.refreshRestPaths()}return e.prototype.getServices=function(){return this.ilsServices},e.prototype.makeIlsRequest=function(e,t){var r=this;t||(t={}),this.linkedUserSelectorService.selectedInstitution&&(t.linked_inst=this.linkedUserSelectorService.selectedInstitution.institutionCode||"",t.patron_id=this.linkedUserSelectorService.selectedInstitution.patronId||"");var n=this.ilsServices[e];return this.resquestInProgress[e]=!0,this.httpService.call(n.method,n.path,t).then(function(e){return r.ilsRequestSuccess(e)},function(n){return r.ilsRequestFailure(n,e,t)}).finally(function(){return r.resquestInProgress[e]=!1})},e.prototype.getDisplayBackToSearchLink=function(){return"suprima"!==this.configurationUtil.getBackendSystem()||this.configurationUtil.getSummonOverAlma()!==!0},Object.defineProperty(e.prototype,"requestInProgress",{get:function(){return this.resquestInProgress||!1},enumerable:!0,configurable:!0}),e.prototype.refreshRestPaths=function(){var e=this.ilsServices;this.httpService.call("GET",this.myAccountBaseUrl).then(function(t){var r=t;Object.keys(r).map(function(t){e[t]=r[t]})})},e.prototype.ilsRequestSuccess=function(e){return e},e.prototype.ilsRequestFailure=function(e,t,r){return console.error(e,t),e},e}();d=n([a.Injectable(),o(0,a.Inject("restBaseURLs")),i("design:paramtypes",[Object,s.HttpService,c.ConfigurationUtil,l.LinkedUserSelectorService])],d),r.AccountService=d;var p=function(){function e(e,t){this.isSuccess=e,this.msg=t}return e}();r.StatusMsg=p,r.default=[u.default.name]},{"../appConfig/appConfig.module":482,"../infra/httpRequest/http.service":556,"../nddUtils/configurationUtil.service":596,"./linkedUserSelector/linkedUserSelector.service":448,"ng-metadata/core":362}],435:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../security/jwtUtil.service"),c=e("./accountLinks.service"),l=function(){function e(e,t,r,n){this.accountLinksService=e,this.accountIcons=t,this.$interpolate=r,this.jwtUtilService=n,this.pdsHandle=this.jwtUtilService.getPdsHandle()}return e.prototype.ngOnInit=function(){this._links=this.accountLinksService.getLinks(this.tabName)},Object.defineProperty(e.prototype,"links",{get:function(){return this._links},enumerable:!0,configurable:!0}),e.prototype.getTarget=function(e){return this.$interpolate(e.target)({pds_handle:this.pdsHandle})},e}();n([a.Input(),i("design:type",String)],l.prototype,"tabName",void 0),l=n([a.Component({selector:"prm-account-links",templateUrl:"components/account/accountLinks/account-links.html"}),o(1,a.Inject("accountIcons")),o(2,a.Inject("$interpolate")),i("design:paramtypes",[c.AccountLinksService,Object,Object,s.JwtUtilService])],l),r.PrmAccountLinks=l},{"../../security/jwtUtil.service":842,"./accountLinks.service":437,"ng-metadata/core":362}],436:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./accountLinks.service"),a=function(){function e(){}return e}();a=n([i.NgModule({declarations:[],providers:[o.AccountLinksService]})],a),r.AccountLinksModule=a},{"./accountLinks.service":437,"ng-metadata/core":362}],437:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../mappingTablesCache/mappingTablesCache.service"),c=e("../../appConfig/appConfigForward"),l=function(){function e(e,t){this.mappingTablesCache=e,this.$filter=t,this.vid=c.getVid()}return e.prototype.getLinks=function(e){for(var t=[],r=0;r<3;r++){var n=this.mappingTablesCache.findByProperties("My Account Links",{source1:this.vid,source2:e+".link"+(r+1)});n.length>0?t.push(n[0]):(n=this.mappingTablesCache.findByProperties("My Account Links",{source1:"default",source2:e+".link"+(r+1)}),n.length>0&&t.push(n[0]))}return this.$filter("orderBy")(t,"+source3")},e}();l=n([a.Injectable(),o(1,a.Inject("$filter")),i("design:paramtypes",[s.MappingTablesCache,Function])],l),r.AccountLinksService=l,r.default=[]},{"../../appConfig/appConfigForward":484,"../../mappingTablesCache/mappingTablesCache.service":592,"ng-metadata/core":362}],438:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./deposits.service"),c=e("../overview/accountOverview.service"),l=e("../../infra/widgets/dialogs/dialog.service"),u=e("lodash/includes"),d=e("angular"),p=function(){function e(e,t,r,n,i,o,a){this.depositsService=e,this.accountOverviewService=t,this.dialogService=r,this.$translate=n,this.accountIcons=i,this.$mdDialog=o,this.$mdMenu=a,this.dialogTimeout=2e3,this.isAllExpanded=!1,this.isInCancelAction=!1,this.depositInProcess=!1,this._sortOptions=[{optionName:"nui.deposits.sort.updatedDate",fieldName:"+updatedate"},{optionName:"nui.deposits.sort.submissionDate",fieldName:"+submissiondate"},{optionName:"nui.deposits.sort.status",fieldName:"+status"}]}return Object.defineProperty(e.prototype,"sortOptions",{get:function(){return this._sortOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depositsDisplay",{get:function(){return this.depositsService.depositsDisplay},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depositProfilesOptions",{get:function(){return this.depositsService.depositProfilesOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depositTermsOfUse",{get:function(){return this.depositsService.termsOfUse},enumerable:!0,configurable:!0}),e.prototype.depositInProcess=function(){return this.depositInProcess},e.prototype.depositInProcess=function(e){this.depositInProcess=e},e.prototype.sortDepositsDisplay=function(){this.depositsService.sortDepositsDisplay(this.sortBy)},e.prototype.openMenu=function(e,t){this.originatorEv=t,e(t)},e.prototype.showCreateDeposit=function(){return 0!=this.depositsService.depositProfilesOptions.length},e.prototype.toggleAllExpand=function(){this.isAllExpanded=!this.isAllExpanded;for(var e=0;e<this.depositsDisplay.length;e++)this.depositsDisplay[e].isExpanded=this.isAllExpanded},e.prototype.getDepositsCountPlaceHolder=function(){return{idx_0:this.depositsCounter||0}},e.prototype.getDepositProfile=function(e,t){var r;if(""===e)r=this.depositsService.depositProfilesOptions[t];else{var n=this.depositsDisplay[e].depositProfileId,i=this.depositsService.depositProfilesOptions.filter(function(e){return e.depositProfileId==n});r=i[0]}return r},e.prototype.getDepositFiles=function(e){var t=this,r=[];return e.forEach(function(e){return r.push(t.parseDepositFile(e))}),r},e.prototype.parseDepositFile=function(e){var t={fileName:e.filename,label:e.label,fileId:e.fileid,isUploaded:!0,fileKey:"",action:""};return t},e.prototype.parseDepositsDisplay=function(e){var t=this,r=[];return e.forEach(function(e){return r.push(t.parseDepositDisplay(e))}),r},e.prototype.showDepositForm=function(e,t){var r=this.getDepositProfile(e,t),n={depositProfileInfo:r,depositId:"",mmsId:"",repId:"",title:"",abstract:"",note:"",saveAsDraft:!1,editMode:!1,termsOfUse:decodeURI(this.depositsService.termsOfUse),amazonInfo:this.depositsService.amazonInfo,isDraft:!1,depositFiles:[],depositNotes:[],deleteFiles:[]};if(""!==e){var i=this.depositsDisplay[e];n.depositId=i.depositId,n.title=i.title,n.abstract=i.abstract,n.editMode=!0,n.isDraft="DRAFT"===i.statusCode,n.depositFiles=this.getDepositFiles(i.files),n.previousNotes=i.notes}var o='<md-dialog class="deposit-dialog" aria-label="Create Deposit" md-component-id="fullView"><prm-deposit-details [deposit-info]="ctrl.depositInfo" (on-cancel)="ctrl.onCancel()" (on-save)="ctrl.onSave($event)" </prm-deposit-details></md-dialog>',a=this;this.$mdDialog.show({template:o,bindToController:!0,controller:function(){this.depositInfo=n,this.onCancel=function(){a.$mdDialog.hide()},this.onSave=function(e){a.$mdDialog.hide(),a.depositInProcess=!0,a.submitDeposit(this.depositInfo)}},controllerAs:"ctrl"})},e.prototype.showCancelPrompt=function(e,t){this.failedDepositId=null;var r=this;this.$mdDialog.show({templateUrl:"components/account/deposits/deposit-confirm-dialog.html",parent:this.getCancelPromptParentElement(e),targetEvent:e,escapeToClose:!0,clickOutsideToClose:!1,hasBackdrop:!1,locals:{classThis:this},controller:function(){this.hide=r.$mdDialog.hide,this.cancelIt=function(){r.withdrawDeposit(t)}},controllerAs:"ctrl"})},e.prototype.undoCancel=function(){this.cancelPromptDisplayId=null},e.prototype.withdrawDeposit=function(e){var t=this;this.isInCancelAction=!0,this.depositInProcess=!0,this.cancelPromptDisplayId=null,this.cancelDepositId=e,this.depositsService.withdrawDeposit(e).then(function(e){return t.cancelCallback(e)})},e.prototype.getCancelPromptParentElement=function(e){for(var t=d.element(e.target).parent();!u(t[0].classList,"in-element-dialog-parent");)t=t.parent();return t[0]},e.prototype.cancelCallback=function(e){return"ok"===e.status?void this.cancelSuccessCallback():void this.cancelFailCallback(e)},e.prototype.cancelSuccessCallback=function(){this.depositInProcess=!1,this.isInCancelAction=!1,this.cancelDepositId=null,this.showCancelActionSuccessFeedBack(),this.depositsService.updateDeposits(),this.accountOverviewService.updateCounters()},e.prototype.submitDeposit=function(e){var t=this;this.depositsService.submitDeposit(e).then(function(r){return t.submitCallback(r,e.saveAsDraft)})},e.prototype.submitCallback=function(e,t){if("ok"===e.status)return void this.submitSuccessCallback(t)},e.prototype.ngOnInit=function(){this.depositsService.updateDeposits()},e.prototype.submitSuccessCallback=function(e){this.depositInProcess=!1,this.showSubmitActionSuccessFeedBack(e),this.depositsService.updateDeposits(),this.accountOverviewService.updateCounters()},e.prototype.cancelFailCallback=function(e){this.isInCancelAction=!1,this.failedDepositId=this.cancelDepositId,this.cancelDepositId=null,this.failedDepositMessage=e.note||e["reply-text"]},e.prototype.showCancelActionSuccessFeedBack=function(){var e=this,t=this.dialogService;this.$translate("nui.deposit.cancel.success").then(function(r){return t.showConfirmDialogTimeout("",r,e.dialogTimeout)})},e.prototype.showSubmitActionSuccessFeedBack=function(e){var t=this,r=this.dialogService,n="nui.deposit.submit.success";e&&(n="nui.deposit.submitAsDraft.success"),this.$translate(n).then(function(e){return r.showConfirmDialogTimeout("",e,t.dialogTimeout)})},e}();p=n([a.Component({inputs:["depositsCounter"],selector:"prm-deposits",templateUrl:"components/account/deposits/deposits.html"}),o(3,a.Inject("$translate")),o(4,a.Inject("accountIcons")),o(5,a.Inject("$mdDialog")),o(6,a.Inject("$mdMenu")),i("design:paramtypes",[s.DepositsService,c.AccountOverviewService,l.DialogService,Object,Object,Object,Object])],p),r.PrmDeposits=p},{"../../infra/widgets/dialogs/dialog.service":577,"../overview/accountOverview.service":459,"./deposits.service":440,angular:"angular","lodash/includes":260,"ng-metadata/core":362}],439:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("../../infra/deposit/depositForm.directive"),a=e("../accountLinks/accountLinks.directive"),s=e("./deposits.service"),c=e("angular-material"),l=function(){function e(){}return e}();l=n([i.NgModule({declarations:[o.PrmDepositForm,a.PrmAccountLinks],providers:[s.DepositsService],imports:[c]})],l),r.DepositsModule=l},{"../../infra/deposit/depositForm.directive":542,"../accountLinks/accountLinks.directive":435,"./deposits.service":440,"angular-material":17,"ng-metadata/core":362}],440:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../account.service"),c=e("../../mappingTablesCache/mappingTablesCache.service"),l=e("../../nddUtils/dateUtils.service"),u=e("../../nddUtils/stringUtils.service"),d=e("../../appConfig/appConfigForward"),p=(e("lodash/filter"),e("lodash/cloneDeep"),function(){function e(e,t,r,n,i,o){this.accountService=e,this.mappingTablesCache=t,this.$filter=r,this.dateUtils=n,this.stringUtils=i,this.$translate=o,this.vid=d.getVid(),this._depositsDisplay=[],this._depositProfilesOptions=[],this._termsOfUse="",this._depositsOverviewDisplay=[],this._hasAlerts=!1,this.dateFields=["enddepositdate","lastinterestdate","depositcreationdate","depositdate","updatedate","laststatusdate","endcallslipdate","endholddate"]}return e.prototype.setDepositToPersistantFullDisplay=function(e){
this.expandedDepositId=e},e.prototype.expandDepositToFullDisplay=function(e){for(var t=0;t<this._depositsDisplay.length;t++){var r=this._depositsDisplay[t];if(r.depositId===e){r.isExpanded=!0;break}}},e.prototype.updateDeposits=function(){var e=this;this.accountService.makeIlsRequest("deposits",{vid:this.vid}).then(function(t){return e.setDepositsDisplay(t)})},e.prototype.setDepositsDisplay=function(e){if(this._hasAlerts=!1,e.data){var t=e.data.deposits,r=this.parseDepositsDisplay(t.deposit);this._depositsDisplay=r,this._depositsOverviewDisplay=r.slice(0,3),this.expandedDepositId&&(this.expandDepositToFullDisplay(this.expandedDepositId),this.expandedDepositId=null);var n=e.data.depositprofiles;this._depositProfilesOptions=this.parseDepositsProfiles(n.depositprofile),this._termsOfUse=e.data.termsofuse,this._amazonInfo=e.data.amazoninfo}},e.prototype.parseDepositsProfiles=function(e){var t=this,r=[],n=0;return e.forEach(function(e){return r.push(t.parseDepositProfile(e,n++))}),r},e.prototype.parseDepositProfile=function(e,t){var r={index:t,depositProfileId:e.depositprofileid,depositLibraryId:e.depositlibraryid,depositProfileName:e.depositprofilename,depositProfileInstruction:e.instruction};return r},e.prototype.parseDepositsDisplay=function(e){var t=this,r=[];return e.forEach(function(e){return r.push(t.parseDepositDisplay(e))}),r},e.prototype.parseDepositDisplay=function(e){var t={depositId:e.depositid,depositProfileId:e.depositprofileid,depositType:e.type,title:e.title,abstract:e.abstract,creator:e.creator,status:e.depositstatus,statusCode:e.status,updatedate:e.updatedate,submissiondate:e.submissiondate,isCancelable:"Y"===e.cancel,firstLineLeft:e.title,firstLineRight:e.depositstatus,deliveryUrl:e.deliveryurl,secondLineLeft:"",secondLineRight:this.dateUtils.convertIlsDateStringToPrimoDateString(e.updatedate),isExpanded:!1,isSubmitted:!0,files:e.file,notes:e.notes.note,expandedDisplay:[],isAlert:"Y"===e.available};return t.statusCode!==f.RETURNED&&t.statusCode!==f.DRAFT||(t.isSubmitted=!1),t.isAlert&&(this._hasAlerts=!0),t.expandedDisplay.push({data:this.dateUtils.convertIlsDateStringToPrimoDateString(e.submissiondate),label:"nui.deposits.submittedOn"}),t},Object.defineProperty(e.prototype,"depositsDisplay",{get:function(){return this._depositsDisplay},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depositProfilesOptions",{get:function(){return this._depositProfilesOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"termsOfUse",{get:function(){return this._termsOfUse},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"amazonInfo",{get:function(){return this._amazonInfo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDepositInProgress",{get:function(){return this.accountService.DepositInProgress.deposits},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depositsOverviewDispaly",{get:function(){return this._depositsOverviewDisplay},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"links",{get:function(){return this._links},enumerable:!0,configurable:!0}),e.prototype.sortDepositsDisplay=function(e){this._sortSelection=e,this._depositsDisplay=this.$filter("orderBy")(this._depositsDisplay,this._sortSelection)},e.prototype.withdrawDeposit=function(e){var t={deposit_id:e};return this.accountService.makeIlsRequest("withdraw_deposit",t)},e.prototype.submitDeposit=function(e){var t={lang:"eng",vid:this.vid,data:e};return this.accountService.makeIlsRequest("submit_deposit",t)},Object.defineProperty(e.prototype,"hasAlerts",{get:function(){return this._hasAlerts},enumerable:!0,configurable:!0}),e}());p=n([a.Injectable(),o(2,a.Inject("$filter")),o(5,a.Inject("$translate")),i("design:paramtypes",[s.AccountService,c.MappingTablesCache,Object,l.DateUtils,u.StringUtils,Object])],p),r.DepositsService=p;var f;!function(e){e[e.SUBMITTED="SUBMITTED"]="SUBMITTED",e[e.RETURNED="RETURNED"]="RETURNED",e[e.DRAFT="DRAFT"]="DRAFT"}(f||(f={})),r.default=[]},{"../../appConfig/appConfigForward":484,"../../mappingTablesCache/mappingTablesCache.service":592,"../../nddUtils/dateUtils.service":597,"../../nddUtils/stringUtils.service":608,"../account.service":434,"lodash/cloneDeep":237,"lodash/filter":246,"ng-metadata/core":362}],441:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("../overview/accountOverview.service"),s=(e("lodash/includes"),e("angular"),function(){function e(e){this.accountOverviewService=e,this.accountOverviewService.updateCounters()}return Object.defineProperty(e.prototype,"depositsCounter",{get:function(){return this.accountOverviewService.depositsCounter},enumerable:!0,configurable:!0}),e}());s=n([o.Component({selector:"prm-deposits-link",templateUrl:"components/account/depositsLink/deposits-link.html"}),o.Inject(a.AccountOverviewService),i("design:paramtypes",[a.AccountOverviewService])],s),r.PrmDepositsLink=s},{"../overview/accountOverview.service":459,angular:"angular","lodash/includes":260,"ng-metadata/core":362}],442:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./depositsLink.directive"),a=e("../overview/accountOverview.service"),s=e("angular-material"),c=function(){function e(){}return e}();c=n([i.NgModule({declarations:[o.PrmDepositsLink],providers:[a.AccountOverviewService],imports:[s]})],c),r.DepositsLinkModule=c},{"../overview/accountOverview.service":459,"./depositsLink.directive":441,"angular-material":17,"ng-metadata/core":362}],443:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./fines.service"),c=function(){function e(e,t,r){this.finesService=e,this.$filter=t,this.accountIcons=r,this.sortOptions=[{optionName:"nui.fine.sort.date_newest",fieldName:"-finedate"},{optionName:"nui.fine.sort.date_oldest",fieldName:"+finedate"},{optionName:"nui.fine.sort.title",fieldName:"+title"}],this.sortBy=this.sortOptions[0].fieldName,this.isAllExpanded=!1}return Object.defineProperty(e.prototype,"numOfFines",{get:function(){return this.finesService.numOfFines},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"finesBalance",{get:function(){return this.finesCounters},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"demeritsBalance",{get:function(){return this.demeritsCounter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"finesDisplay",{get:function(){return this.finesService.finesDisplay},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"payFinesLink",{get:function(){return this.finesService.payFinesLink},enumerable:!0,configurable:!0}),e.prototype.sortFinesDisplay=function(){this.finesService.sortFinesDisplay(this.sortBy)},e.prototype.toggleSingleExpand=function(e){e.isExpanded=!e.isExpanded},e.prototype.toggleAllExpand=function(){this.isAllExpanded=!this.isAllExpanded;for(var e=0;e<this.finesDisplay.length;e++)this.finesDisplay[e].isExpanded=this.isAllExpanded},e.prototype.getFinesBalancePlaceHolder=function(){return{idx_0:this.$filter("number")(this.finesBalance,2)}},e.prototype.getDemeritsBalancePlaceHolder=function(){return{idx_0:this.$filter("number")(this.demeritsBalance,2)}},e}();n([a.Input(),i("design:type",String)],c.prototype,"finesCounters",void 0),n([a.Input(),i("design:type",String)],c.prototype,"demeritsCounter",void 0),c=n([a.Component({selector:"prm-fines",templateUrl:"components/account/fines/fines.html"}),o(1,a.Inject("$filter")),o(2,a.Inject("accountIcons")),i("design:paramtypes",[s.FinesService,Object,Object])],c),r.PrmFines=c},{"./fines.service":445,"ng-metadata/core":362}],444:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("../accountLinks/accountLinks.directive"),a=e("./fines.service"),s=e("../../mappingTablesCache/mappingTablesCache.service"),c=e("angular-material"),l=function(){function e(){}return e}();l=n([i.NgModule({declarations:[o.PrmAccountLinks],providers:[a.FinesService,s.MappingTablesCache],imports:[c]})],l),r.FinesModule=l},{"../../mappingTablesCache/mappingTablesCache.service":592,"../accountLinks/accountLinks.directive":435,"./fines.service":445,"angular-material":17,"ng-metadata/core":362}],445:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../account.service"),c=e("../../mappingTablesCache/mappingTablesCache.service"),l=e("../../nddUtils/dateUtils.service"),u=e("../../security/jwtUtil.service"),d=e("../../nddUtils/stringUtils.service"),p=e("../../appConfig/appConfigForward"),f=function(){function e(e,t,r,n,i,o,a,s){this.accountService=e,this.mappingTablesCache=t,this.$filter=r,this.dateUtils=n,this.stringUtils=i,this.$translate=o,this.$interpolate=a,this.jwtUtilService=s,this._finesDisplay=[],this._finesOverviewDisplay=[],this._sortSelection="-finedate",this._generalAlert=!1,this.vid=p.getVid(),this.initConfigurations(this.vid)}return e.prototype.initConfigurations=function(e){this._payFinesLink=this.getPayFinesLink(e),this.finesBriefConfig=this.mappingTablesCache.getTable("Fines Brief Display"),this.fines1Config=this.getFinesBriefConfig("fines.brief.1",e),this.fines1Delimiter="&nbsp"===this.fines1Config.target?" ":this.fines1Config.target,this.fines1Config=[this.fines1Config.source3,this.fines1Config.source4,this.fines1Config.source5],this.fines2Config=this.getFinesBriefConfig("fines.brief.2",e),this.fines2Delimiter="&nbsp"===this.fines2Config.target?" ":this.fines2Config.target,this.fines2Config=[this.fines2Config.source3,this.fines2Config.source4,this.fines2Config.source5],this.finesExpandedConfig=this.getFinesExpandedConfig()},e.prototype.getPayFinesLink=function(e){var t="",r=this.mappingTablesCache.findByProperties("My Account Links",{source1:e,source2:"fines.payfinelink"});if(0===r.length&&(r=this.mappingTablesCache.findByProperties("My Account Links",{source1:"default",source2:"fines.payfinelink"})),r.length>0){var n=this.jwtUtilService.getPdsHandle();t=this.$interpolate(r[0].target)({pds_handle:n})}return t},e.prototype.getFinesBriefConfig=function(e,t){var r=this.mappingTablesCache.findByProperties("Fines Brief Display",{source1:t,source2:e});return r.length>0?r[0]:this.mappingTablesCache.findByProperties("Fines Brief Display",{source1:"default",source2:e})[0]},e.prototype.getFinesExpandedConfig=function(){var e=this.mappingTablesCache.getTable("Fines Detailed Display");e.map(function(e){return e.source2=parseInt(e.source2)}),e=this.$filter("orderBy")(e,"+source2");for(var t=0;t<e.length;t++)e[t].labelName="fines."+e[t].source1,e[t].source1=e[t].source1.replace(/_/g,"");return e},e.prototype.getFinesBalance=function(e){for(var t=0,r=0;r<e.length;r++)t-=parseInt(e[r].finesum);return t},e.prototype.updateFines=function(){var e=this;this.accountService.makeIlsRequest("fines",{vid:this.vid}).then(function(t){return e.setFinesDisplay(t)})},e.prototype.setFinesDisplay=function(e){var t=this;if(this._generalAlert=e.hasAlerts,e.data){var r=e.data.fines?e.data.fines.fine:[],n=r.map(function(e){return t.parseFineDisplay(e)});this._finesOverviewDisplay=this.$filter("orderBy")(n,"-finedate").slice(0,3),this._finesDisplay=this.$filter("orderBy")(n,this._sortSelection),this.expandedFineId&&(this.expandFineToFullDisplay(this.expandedFineId),this.expandedFineId=null)}},e.prototype.sortFinesDisplay=function(e){this._sortSelection=e,this._finesDisplay=this.$filter("orderBy")(this._finesDisplay,this._sortSelection)},Object.defineProperty(e.prototype,"finesOverviewDisplay",{get:function(){return this._finesOverviewDisplay},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"finesDisplay",{get:function(){return this._finesDisplay},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"generalAlert",{get:function(){return this._generalAlert},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"payFinesLink",{get:function(){return this._payFinesLink},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfFines",{get:function(){return this._finesDisplay.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"links",{get:function(){return this._links},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRequestInProgress",{get:function(){return this.accountService.requestInProgress.fines},enumerable:!0,configurable:!0}),e.prototype.setFineToPersistantFullDisplay=function(e){this.expandedFineId=e},e.prototype.expandFineToFullDisplay=function(e){for(var t=0;t<this._finesDisplay.length;t++){var r=this._finesDisplay[t];if(r.fineid===e){r.isExpanded=!0;break}}},e.prototype.parseFineDisplay=function(e){var t={fineid:e.fineid,isAlert:e.isAlert,finedate:e.finedate,title:e.title,firstLineLeft:"",firstLineRight:"",secondLineLeft:"",secondLineRight:"",isExpanded:!1,expandedDisplay:[]};"demerit"!==e.type&&(t.firstLineLeft+=e.description||e.finestatus),(e.type._string||e.type)&&this.$translate(["fines.type."+(e.type._string||e.type),"nui.fine.brief.sum"]).then(function(r){t.firstLineRight=r["fines.type."+(e.type._string||e.type)]+" "+e.finesum});for(var r=0;r<this.fines1Config.length;r++){if(this.fines1Config[r]){var n=e[this.fines1Config[r]];"finedate"===this.fines1Config[r]&&(n=this.dateUtils.convertIlsDateStringToPrimoDateString(n)),n&&(t.secondLineLeft=t.secondLineLeft+n+this.fines1Delimiter)}if(this.fines2Config[r]){var i=e[this.fines2Config[r]];"finedate"===this.fines2Config[r]&&(i=this.dateUtils.convertIlsDateStringToPrimoDateString(i)),i&&(t.secondLineRight=t.secondLineRight+i+this.fines2Delimiter)}}t.secondLineLeft=t.secondLineLeft.substring(0,t.secondLineLeft.length-this.fines1Delimiter.length),t.secondLineRight=t.secondLineRight.substring(0,t.secondLineRight.length-this.fines2Delimiter.length);for(var r=0;r<this.finesExpandedConfig.length;r++){var o=this.finesExpandedConfig[r].source1,a=this.finesExpandedConfig[r].labelName;e[o]&&this.fines1Config.indexOf(o)===-1&&this.fines2Config.indexOf(o)===-1&&["description","type","finesum"].indexOf(o)===-1&&t.expandedDisplay.push({data:this.stringUtils.removeSpaceEncodingFromString(e[o]),label:a})}return t},e}();f=n([a.Injectable(),o(2,a.Inject("$filter")),o(5,a.Inject("$translate")),o(6,a.Inject("$interpolate")),i("design:paramtypes",[s.AccountService,c.MappingTablesCache,Object,l.DateUtils,d.StringUtils,Object,Object,u.JwtUtilService])],f),r.FinesService=f,r.default=[]},{"../../appConfig/appConfigForward":484,"../../mappingTablesCache/mappingTablesCache.service":592,"../../nddUtils/dateUtils.service":597,"../../nddUtils/stringUtils.service":608,"../../security/jwtUtil.service":842,"../account.service":434,"ng-metadata/core":362}],446:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("./linkedUserSelector.service"),s=e("../fines/fines.service"),c=e("../messagesAndBlocks/messagesAndBlocks.service"),l=e("../loans/loans.service"),u=e("../requests/requests.service"),d=e("../personalInfo/personalInfo.service"),p=e("../overview/accountOverview.service"),f=function(){function e(e,t,r,n,i,o,a){this.linkedUserSelectorService=e,this.finesService=t,this.messagesAndBlocksService=r,this.loansService=n,this.requestsService=i,this.personalInfoService=o,this.accountOverviewService=a}return e.prototype.onInstitutionChange=function(){},Object.defineProperty(e.prototype,"numOfInstitutions",{get:function(){return this.linkedUserSelectorService.institutionsList?this.linkedUserSelectorService.institutionsList.length:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"institutionsList",{get:function(){return this.linkedUserSelectorService.institutionsList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedInstitution",{get:function(){return this.linkedUserSelectorService.selectedInstitution},set:function(e){this.linkedUserSelectorService.selectedInstitution=e},enumerable:!0,configurable:!0}),e.prototype.updateData=function(){this.accountOverviewService.updateCounters(),this.finesService.updateFines(),this.messagesAndBlocksService.updateMessagesAndBlocks(),this.loansService.resetLoans(),this.requestsService.updateRequests(),this.personalInfoService.updatePersonalInfo()},e}();f=n([o.Component({selector:"prm-linked-user-selector",templateUrl:"components/account/linkedUserSelector/linked-user-selector.html"}),i("design:paramtypes",[a.LinkedUserSelectorService,s.FinesService,c.MessagesAndBlocksService,l.LoansService,u.RequestsService,d.PersonalInfoService,p.AccountOverviewService])],f),r.PrmLinkedUserSelector=f},{"../fines/fines.service":445,"../loans/loans.service":453,"../messagesAndBlocks/messagesAndBlocks.service":456,"../overview/accountOverview.service":459,"../personalInfo/personalInfo.service":473,"../requests/requests.service":477,"./linkedUserSelector.service":448,"ng-metadata/core":362}],447:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./linkedUserSelector.service"),a=e("angular-material"),s=function(){function e(){}return e}();s=n([i.NgModule({declarations:[],providers:[o.LinkedUserSelectorService],imports:[a]})],s),r.LinkedUserSelectorModule=s},{"./linkedUserSelector.service":448,"angular-material":17,"ng-metadata/core":362}],448:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("../../appConfig/appConfigForward"),s=e("lodash/orderBy"),c=function(){function e(){}return e.prototype.setInstitutionsList=function(e){if(!this._institutionsList){try{var t=e.data.accountslist.account;this._institutionsList=s(t.map(function(e){return{label:e.primoinstitution,value:{institutionCode:e.institutioncode,patronId:e.useridentifier}}}),function(e){return e.value.institutionCode},"asc")}catch(e){}this.setInitialInstitution()}},e.prototype.setInitialInstitution=function(){var e=a.getInstitutionCode();this._selectedInstitution=this._institutionsList.filter(function(t){return t.label===e})[0].value},Object.defineProperty(e.prototype,"institutionsList",{get:function(){return this._institutionsList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedInstitution",{get:function(){return this._selectedInstitution},set:function(e){this._selectedInstitution=e},enumerable:!0,configurable:!0}),e}();c=n([o.Injectable(),i("design:paramtypes",[])],c),r.LinkedUserSelectorService=c,r.default=[]},{"../../appConfig/appConfigForward":484,"lodash/orderBy":293,"ng-metadata/core":362}],449:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("../../nddUtils/stringUtils.service"),s=e("ng-metadata/core"),c=e("./loans.service"),l=function(){function e(e,t,r){this.loansService=e,this.stringUtil=t,this.accountIcons=r,this._renewInProgress=!1}return e.prototype.renewLoan=function(){var e=this;this.renewInProgress=!0;var t=this.item.loanid;this.loansService.renewLoan(t).then(function(){return e.renewInProgress=!1})},e.prototype.toggleDisplayMode=function(){this.isExpanded=!this.isExpanded},Object.defineProperty(e.prototype,"isRenewable",{get:function(){return this.item.isRenewable()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRenewed",{get:function(){return null!==this.loansService.getRenewResponse(this.item.loanid)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renewResponse",{get:function(){return this.loansService.getRenewResponse(this.item.loanid)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isExpanded",{get:function(){return this.item.isExpanded},set:function(e){this.item.isExpanded=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renewInProgress",{get:function(){return this._renewInProgress||this.loansService.renewAllInProgress},set:function(e){this._renewInProgress=e},enumerable:!0,configurable:!0}),e}();l=n([s.Component({selector:"prm-loan",templateUrl:"components/account/loans/loan.html",inputs:["item","index"]}),o(2,s.Inject("accountIcons")),i("design:paramtypes",[c.LoansService,a.StringUtils,Object])],l),r.PrmLoan=l},{"../../nddUtils/stringUtils.service":608,"./loans.service":453,"ng-metadata/core":362}],450:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var a=e("../../appConfig/appConfig.module"),s=e("ng-metadata/core"),c=e("../../mappingTablesCache/mappingTablesCache.service"),l=e("../../appConfig/appConfigForward"),u=e("../../nddUtils/dateUtils.service"),d=e("lodash/union"),p=e("lodash/difference"),f=function(){function e(e,t){this.builder=t,this.update(e)}return e.prototype.update=function(e){var t=this;Object.keys(e).forEach(function(r){(e[r]||""!==e[r])&&(t[r]=t.builder.parseValue(r,e[r]))}),this.type=e.returndate&&"00000000"!==e.returndate?g.History:g.Active},e.prototype.isActiveLoan=function(){return this.type===g.Active},e.prototype.isRenewable=function(){var e=this.renew;return e&&"Y"===e},e.prototype.isFine=function(){return this.fine},e.prototype.isDueAlert=function(){return this.alerts&&this.alerts.length>0},e}(),h=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.builder=r,n.isExpanded=!1,n}return n(t,e),t.prototype.update=function(t){var r=this;e.prototype.update.call(this,t),this.fullDisplayValues=this.builder.getFullDisplayFields(this.type).map(function(e){return new v(e,r[e.replace(/_/g,"")])}).filter(function(e){return e.value&&""!==e.value})},t.prototype.getBriefDisplayLine=function(e){var t=this,r=this.builder.getBriefDisplayFields(e);return r.fields.map(function(e){return t[e]}).join(r.delimiter)},Object.defineProperty(t.prototype,"fullDisplayValues",{get:function(){return this._fullDisplayValues},set:function(e){this._fullDisplayValues=e},enumerable:!0,configurable:!0}),t.prototype.getDateForBriefDisplay=function(){var e=this;return this.briefDisplayDateFields().map(function(t){return e[t]}).join(", ")},t.prototype.getCodeAlert=function(){return this.isDueAlert()?"nui.loan."+this.alerts[0]:"nui.loan.due"},t.prototype.briefDisplayDateFields=function(){return this.type===g.Active?["duedate","duehour"]:["returndate","returnhour"]},t}(f);r.LoanItemDisplay=h;var m=function(){function e(e,t){this.mtCache=e,this.dateUtil=t}return e.prototype.parseValue=function(e,t){switch(e){case"returndate":case"duedate":case"loandate":return this.dateUtil.convertIlsDateStringToPrimoDateString(t);case"maxrenewdate":return this.dateUtil.convertIlsDateStringToPrimoDateString(t);case"returnhour":case"duehour":return this.dateUtil.fromString(t,"HHmm","HH:mm");default:return t}},e.prototype.getBriefDisplayFields=function(e){var t={source1:l.getVid(),source2:"loans.brief."+e},r=this.mtCache.findByProperties(this.mtCache.tables.LOANS_BRIEF_DISPLAY,t)[0]||[];if(0===r.length&&(t={source1:"default",source2:"loans.brief."+e},r=this.mtCache.findByProperties(this.mtCache.tables.LOANS_BRIEF_DISPLAY,t)[0]||[]),0===r.length)return{fields:[],delimiter:""};var n=r.target;return"&nbsp"===n&&(n=" "),{fields:[r.source3,r.source4,r.source5].filter(function(e){return e}),delimiter:" "+n+" "}},e.prototype.getFullDisplayFields=function(e){var t=d(["title"],this.getBriefDisplayFields(1).fields,this.getBriefDisplayFields(2).fields,e===g.Active?["due_date","due_hour","return_date","return_hour"]:["return_date","return_hour"]),r=this.getDetailedDisplayFieldsConfiguration();return p(r,t)},e.prototype.getDetailedDisplayFieldsConfiguration=function(){return this.mtCache.getTable(this.mtCache.tables.LOANS_DETAILED_DISPLAY).sort(function(e,t){return parseInt(e.source2)-parseInt(t.source2)}).map(function(e){return e.target})},e}();m=i([s.Injectable(),o("design:paramtypes",[c.MappingTablesCache,u.DateUtils])],m),r.LoanBuilder=m;var g,v=function(){function e(e,t){this.key=e,this.value=t}return e}();!function(e){e[e.Active=0]="Active",e[e.History=1]="History"}(g||(g={})),r.default=[a.default.name]},{"../../appConfig/appConfig.module":482,"../../appConfig/appConfigForward":484,"../../mappingTablesCache/mappingTablesCache.service":592,"../../nddUtils/dateUtils.service":597,"lodash/difference":240,"lodash/union":319,"ng-metadata/core":362}],451:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./loans.service"),c=function(){function e(e,t){this.loansService=e,this.accountIcons=t,this.inProgress=!1,this.showRenewAllResponse=!1,this.isExpandAll=!1}return Object.defineProperty(e.prototype,"loanTypes",{get:function(){return this.loansService.loanTypes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortByOptions",{get:function(){return this.loansService.getSortByOptions(this.loanType)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loans",{get:function(){return this.loansService.loans},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loanType",{get:function(){return this.loansService.loansType||this.loansService.setLoansType(this.loansService.loanTypes[0]),this.loansService.loansType},set:function(e){this.loansService.setLoansType(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortInProgress",{get:function(){return this.loansService.sortInProgress},enumerable:!0,configurable:!0}),e.prototype.changeLoansType=function(){this.isExpandAll=!1,this.loansService.clearLoansList(),this.loansService.setLoansType(this.loanType),this.sortBy=this.sortByOptions[0],this.loadMoreLoans()},e.prototype.sortAllLoans=function(){this.isExpandAll=!1,this.loansService.sortAllLoans(this.sortBy)},e.prototype.getLoansBalancePlaceHolder=function(){var e="active"===this.loansService.loansType?this.loansCounter:this.loansService.loans.length;return{idx_0:e}},e.prototype.hasRenewableLoans=function(){return this.loansService.hasRenewableLoans()},e.prototype.renewAllLoans=function(){var e=this;return this.showRenewAllResponse=!1,this.loansService.renewAllLoans().then(function(t){e.renewStatus=t})},e.prototype.toggleExpandAll=function(){var e=this;this.isExpandAll=!this.isExpandAll,this.loans.forEach(function(t){t.isExpanded=e.isExpandAll})},e.prototype.loadMoreLoans=function(){var e=this;this.loansService.isMoreLoans&&(this.inProgress=!0,this.loansService.loadMoreLoans().finally(function(){return e.inProgress=!1}))},Object.defineProperty(e.prototype,"renewAllInProgress",{get:function(){return this.loansService.renewAllInProgress},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasHistoricLoans",{
get:function(){return this.loansService.hasHistoricLoans},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renewResponseAlert",{get:function(){return this.loansService.renewResponseAlert},enumerable:!0,configurable:!0}),e}();c=n([a.Component({selector:"prm-loans",templateUrl:"components/account/loans/loans-list.html",inputs:["loansCounter"]}),o(1,a.Inject("accountIcons")),i("design:paramtypes",[s.LoansService,Object])],c),r.PrmLoans=c},{"./loans.service":453,"ng-metadata/core":362}],452:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./loan.directive"),a=e("../accountLinks/accountLinks.directive"),s=e("../../infra/widgets/alerts/alertBar.directive"),c=e("./loans.service"),l=e("./loanModel.service"),u=e("angular-material"),d=function(){function e(){}return e}();d=n([i.NgModule({declarations:[o.PrmLoan,a.PrmAccountLinks,s.PrmAlertBar],providers:[c.LoansService,l.LoanBuilder],imports:[u]})],d),r.LoansModule=d},{"../../infra/widgets/alerts/alertBar.directive":572,"../accountLinks/accountLinks.directive":435,"./loan.directive":449,"./loanModel.service":450,"./loans.service":453,"angular-material":17,"ng-metadata/core":362}],453:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("../../appConfig/appConfigForward"),s=e("ng-metadata/core"),c=e("../account.service"),l=e("./loanModel.service"),u=e("../../nddUtils/dateUtils.service"),d=e("../../infra/widgets/alerts/alertFactory.service"),p=e("../../nddUtils/stringUtils.service"),f=e("lodash/find"),h=e("lodash/orderBy"),m=function(){function e(){}return e}();m=n([s.Injectable()],m),r.LoansRequestParams=m;var g=function(){function e(e,t,r,n,i,o,s,c){this.$filter=e,this.$translate=t,this.accountService=r,this.accountListBulkSize=n,this.loanBuilder=i,this.dateUtil=o,this.alertService=s,this.stringUtils=c,this._loansList={},this._loansOverviewDisplay=[],this.hasAlerts=!1,this._hasHistoricLoans=!1,this._sortInProgress=!1,this._renewAllInProgress=!1,this._renewResponseMap={},this.isMore=!1,this.requestParams={type:this.loanTypes[0],inst:a.getInstitutionCode(),lang:"eng",bulk:this.accountListBulkSize,offset:1},this._renewResponseAlert=s.create()}return Object.defineProperty(e.prototype,"isMoreLoans",{get:function(){return this.isMore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRequestInProgress",{get:function(){return this.accountService.requestInProgress.loans},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loanTypes",{get:function(){return["active","history"]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loans",{get:function(){return this.loansList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loansCounter",{get:function(){return this.accountService.count},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortInProgress",{get:function(){return this._sortInProgress},set:function(e){this._sortInProgress=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loansList",{get:function(){return angular.isDefined(this._loansList[this.loansType])||(this.loansList=[]),this._loansList[this.loansType]},set:function(e){this._loansList[this.loansType]=e},enumerable:!0,configurable:!0}),e.prototype.getLoansList=function(e){return this._loansList[e]},e.prototype.getSortByOptions=function(e){return"history"===e?["returndate_newest","returndate_oldest","title"]:["duedate_newest","duedate_oldest","title"]},e.prototype.sortList=function(e,t){var r,n,i=this,o=function(e){var t=i.dateUtil.convertPrimoDateStringToIlsDateString(e.duedate)+i.dateUtil.fromString(e.duehour,"HH:mm","HHmm");return t},a=function(e){var t=i.dateUtil.convertPrimoDateStringToIlsDateString(e.returndate)+i.dateUtil.fromString(e.returnhour,"HH:mm","HHmm");return t};switch(t){case"returndate_newest":r=a,n=!0;break;case"returndate_oldest":r=a,n=!1;break;case"duedate_newest":r=o,n=!0;break;case"duedate_oldest":r=o,n=!1;break;case"title":r="title",n=!1;break;default:r=null,n=!1}var s=n?"desc":"asc";return h(e,[r],s)},e.prototype.resetLoans=function(){this._renewResponseAlert.hide(),this.updateLoans()},e.prototype.updateLoans=function(){this.sortBy=null,this.hasAlerts=!1,this.clearLoansList(),this.loadMoreLoans()},e.prototype.clearLoansList=function(){this.loansList.length=0,this.isMore=!0,this.requestParams.offset=1},e.prototype.loadMoreLoans=function(){var e=this.calculateRequestParams(),t=this;return this.accountService.makeIlsRequest("loans",e).then(function(e){var r=[];try{var n=e.data.loans;t.isMore="Y"===n.showmore[0],t._hasHistoricLoans="N"!==n.historicloans,r=n.loan||[],t.appendLoans(r),n.hasAlerts&&(t.hasAlerts=!0)}catch(e){t.isMore=!1}return r},function(e){t.isMore=!1})},e.prototype.renewLoan=function(e){var t=this,r={id:e};return this.accountService.makeIlsRequest("renew_loan",r).then(function(e){return t.renewItemSuccess(e)},function(e){return t.renewFailed(e)})},e.prototype.renewAllLoans=function(){var e=this;return this.hasAlerts=!1,this.renewAllInProgress=!0,this._renewResponseMap={},this.accountService.makeIlsRequest("renew_all_loans",{}).then(function(t){return e.renewAllSuccess(t)},function(t){return e.renewFailed(t)}).then(function(){return e.renewAllInProgress=!1})},e.prototype.setLoansType=function(e){this.requestParams.type=e},Object.defineProperty(e.prototype,"loansType",{get:function(){return this.requestParams.type},enumerable:!0,configurable:!0}),e.prototype.sortAllLoans=function(e){var t=this;this.sortInProgress=!0;var r=function(){t.loansList=t.sortList(t.loansList,e),t.sortInProgress=!1};this.isMore?(this.requestParams.bulk="0",this.loadMoreLoans().then(function(e){r()}).finally(function(){return t.requestParams.bulk=t.accountListBulkSize})):r()},e.prototype.triggerLoanExpand=function(e){this._loanIdToExpand=e},Object.defineProperty(e.prototype,"loansOverviewDisplay",{get:function(){return this._loansOverviewDisplay=this.getLoansList("active").slice(0,3),this._loansOverviewDisplay},enumerable:!0,configurable:!0}),e.prototype.hasRenewableLoans=function(){for(var e=0;e<this.loansList.length;e++)if(this.loansList[e].isRenewable())return!0;return!1},Object.defineProperty(e.prototype,"renewAllInProgress",{get:function(){return this._renewAllInProgress},set:function(e){this._renewAllInProgress=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortBy",{get:function(){return this._sortBy},set:function(e){this._sortBy=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasHistoricLoans",{get:function(){return this._hasHistoricLoans},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renewResponseAlert",{get:function(){return this._renewResponseAlert},enumerable:!0,configurable:!0}),e.prototype.getRenewResponse=function(e){var t=this._renewResponseMap[e];return t||0!==e.indexOf("1@")||(t=this._renewResponseMap[e.slice(2)]),t||null},e.prototype.calculateRequestParams=function(){var e=new m;return e.offset=this.requestParams.offset,e.type=this.requestParams.type,e.bulk=this.requestParams.bulk,e.lang=this.requestParams.lang,this.requestParams.offset=parseInt(this.requestParams.offset)+parseInt(this.requestParams.bulk),e},e.prototype.renewItemSuccess=function(e){try{var t=e.data.loans.loan[0];this.updateRenewResponseMap(t.id,t);var r=this.getRenewResponse(t.id);"Y"===t.renewed&&(this._renewResponseAlert.show(this.composeRenewItemAlert(r)),this.updateLoans())}catch(e){console.error(e)}},e.prototype.renewFailed=function(e){var t='<span translate="loans.renew.failure"></span>';return this._renewResponseAlert.show(t),new c.StatusMsg((!1),"Renew request failed")},e.prototype.renewAllSuccess=function(e){var t=this;try{var r=e.data.loans.loan||[];return r.forEach(function(e){return t.updateRenewResponseMap(e.id,e)}),this._renewResponseAlert.show(this.composeRenewAllAlert(r)),this.updateLoans(),new c.StatusMsg((!0),e["reply-text"])}catch(e){return new c.StatusMsg((!1),"General error")}},e.prototype.composeRenewItemAlert=function(e){var t={idx_0:this.stringUtils.abbreviate(e.loan.title),idx_1:e.loan.duedate,idx_2:e.loan.duehour},r=this.$translate.instant("nui.librarycard.loans.renew.success",t);return r},e.prototype.composeRenewAllAlert=function(e){var t,r=e.length,n=e.filter(function(e){return"Y"===e.renewed}).length;switch(n){case 0:t="loans.renew.all_failure";break;case r:t="loans.renewall.success.fetchall";break;default:t="loans.renewall.partial.fetchall"}return'<span translate="'+t+'"</span>'},e.prototype.appendLoans=function(e){var t=this;e.forEach(function(e){var r;if(e.loanid&&(r=t.findLoan(e.loanid)||t.findLoan(e.loanid.replace("1@",""))),r?r.update(e):t.loansList.push(new l.LoanItemDisplay(e,t.loanBuilder)),t._loanIdToExpand&&e.loanid===t._loanIdToExpand){var n=t.findLoan(t._loanIdToExpand);n&&(n.isExpanded=!0,t._loanIdToExpand=null)}})},e.prototype.findLoan=function(e){return f(this.loansList,["loanid",e])},e.prototype.updateRenewResponseMap=function(e,t){var r=this.findLoan(e)||this.findLoan("1@"+e);r&&r.update({loanid:e,duedate:t.duedate,duehour:t.duehour});var n=new v(t.renewed,t.loanstatus,r);this._renewResponseMap[e]=n},e}();g=n([s.Injectable(),o(0,s.Inject("$filter")),o(1,s.Inject("$translate")),o(3,s.Inject("accountListBulkSize")),i("design:paramtypes",[Object,Object,c.AccountService,Object,l.LoanBuilder,u.DateUtils,d.AlertFactory,p.StringUtils])],g),r.LoansService=g;var v=function(){function e(e,t,r){void 0===r&&(r=null),this.renewed=e,this.response=t,this.loan=r}return e}();r.RenewResponse=v,r.default=[]},{"../../appConfig/appConfigForward":484,"../../infra/widgets/alerts/alertFactory.service":574,"../../nddUtils/dateUtils.service":597,"../../nddUtils/stringUtils.service":608,"../account.service":434,"./loanModel.service":450,"lodash/find":247,"lodash/orderBy":293,"ng-metadata/core":362}],454:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./messagesAndBlocks.service"),c=function(){function e(e,t){this.messagesAndBlocksService=e,this.accountIcons=t}return Object.defineProperty(e.prototype,"messagesDisplay",{get:function(){return this.messagesAndBlocksService.messagesDisplay},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfInstitutions",{get:function(){return Object.keys(this.messagesDisplay).length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"patronBlock",{get:function(){return this.messagesAndBlocksService.patronBlock},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"patronBlockText",{get:function(){var e=this.messagesAndBlocksService.patronBlock.text;return e instanceof Array||(e=[e]),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfInstitutionsPlusMainLocations",{get:function(){return this.messagesAndBlocksService.numOfInstitutionsPlusMainLocations},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfMessages",{get:function(){return this.messagesAndBlocksService.numOfMessages},enumerable:!0,configurable:!0}),e.prototype.accesibleClick=function(){return!1},e}();c=n([a.Component({selector:"prm-messages-and-blocks",templateUrl:"components/account/messagesAndBlocks/messages-and-blocks.html"}),o(1,a.Inject("accountIcons")),i("design:paramtypes",[s.MessagesAndBlocksService,Object])],c),r.PrmMessagesAndBlocks=c},{"./messagesAndBlocks.service":456,"ng-metadata/core":362}],455:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("../accountLinks/accountLinks.directive"),a=e("./messagesAndBlocks.service"),s=e("angular-material"),c=function(){function e(){}return e}();c=n([i.NgModule({declarations:[o.PrmAccountLinks],providers:[a.MessagesAndBlocksService],imports:[s]})],c),r.MessagesAndBlocksModule=c},{"../accountLinks/accountLinks.directive":435,"./messagesAndBlocks.service":456,"angular-material":17,"ng-metadata/core":362}],456:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("../account.service"),s=function(){function e(e){this.accountService=e,this._messagesDisplay={},this._messagesOverviewDisplay=[],this._numOfMessages=0,this._numOfInstitutionsPlusMainLocations=0}return e.prototype.updateMessagesAndBlocks=function(){var e=this;this.accountService.makeIlsRequest("blocks_messages",{}).then(function(t){return e.parseBlockMessagesFromResponse(t)})},e.prototype.parseBlockMessagesFromResponse=function(e){this._messagesDisplay={},this._messagesOverviewDisplay=[],this._numOfInstitutionsPlusMainLocations=0,this._numOfMessages=0,this.parsePatronBlockFromResponse(e),this.parseBlocksMessagesDisplay(e)},e.prototype.parseBlocksMessagesDisplay=function(e){try{for(var t=e.data.blocksmessages.blockmessage,r=0;r<t.length;r++){var n=t[r];n.ilsinstitutionname||(n.ilsinstitutionname=""),this._messagesDisplay[n.ilsinstitutionname]||(this._messagesDisplay[n.ilsinstitutionname]={}),n.mainlocationname||(n.mainlocationname=""),this._messagesDisplay[n.ilsinstitutionname][n.mainlocationname]||(this._messagesDisplay[n.ilsinstitutionname][n.mainlocationname]=[],this._numOfInstitutionsPlusMainLocations+=1),this._messagesDisplay[n.ilsinstitutionname][n.mainlocationname].push({text:n.text}),this._messagesOverviewDisplay.push({text:n.text}),this._numOfMessages+=1}this._messagesOverviewDisplay=this._messagesOverviewDisplay.slice(0,3)}catch(e){}},e.prototype.parsePatronBlockFromResponse=function(e){try{var t=e.data.blocksmessages.globalblocks;t&&(this._patronBlock={text:t},this._messagesOverviewDisplay.push(this._patronBlock),this._numOfMessages+=1)}catch(e){}},Object.defineProperty(e.prototype,"messagesDisplay",{get:function(){return this._messagesDisplay},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"patronBlock",{get:function(){return this._patronBlock},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"messagesOverviewDisplay",{get:function(){return this._messagesOverviewDisplay},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfMessages",{get:function(){return this._numOfMessages},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfInstitutionsPlusMainLocations",{get:function(){return this._numOfInstitutionsPlusMainLocations},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRequestInProgress",{get:function(){return this.accountService.requestInProgress.blocks_messages},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"generalAlert",{get:function(){return this.numOfMessages>0},enumerable:!0,configurable:!0}),e}();s=n([o.Injectable(),i("design:paramtypes",[a.AccountService])],s),r.MessagesAndBlocksService=s},{"../account.service":434,"ng-metadata/core":362}],457:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./accountOverview.service"),c=e("../fines/fines.service"),l=e("../messagesAndBlocks/messagesAndBlocks.service"),u=e("../loans/loans.service"),d=e("../requests/requests.service"),p=e("../deposits/deposits.service"),f=e("../../nddUtils/configurationUtil.service"),h=e("../../analytics/primolytics.service"),m=e("../../infra/mediaQueries.service"),g=e("../../infra/annotations"),v=(e("angular-material"),function(){function e(e,t,r,n,i,o,a,s,c,l,u,d,p){this.accountOverviewService=e,this.finesService=t,this.messagesAndBlocksService=r,this.loansService=n,this.requestsService=i,this.depositsService=o,this.accountIcons=a,this.$stateParams=s,this.$location=c,this.primolyticsService=l,this.mediaQueries=u,this.configurationUtil=d,this.$timeout=p,this.sectionNameToTabIndex={overview:0,loans:1,requests:2,fines:3,blocks_messages:4,personal_details:5,deposits:6},this.selectedTab="overview",this.libraryItems=[],this.selectedTabIndex=this.sectionNameToTabIndex[this.$stateParams.section]}return e.prototype.handleOpenTabEvent=function(e,t){this.selectedTabIndex=this.requiredTabsList.slice(0).reverse().indexOf(t)+1},e.prototype.updateCounters=function(){this.accountOverviewService.updateCounters()},Object.defineProperty(e.prototype,"finesCounters",{get:function(){return this.accountOverviewService.finesCounters},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"demeritsCounter",{get:function(){return this.accountOverviewService.demeritsCounter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loansCounters",{get:function(){return this.accountOverviewService.loansCounters},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"requestsCounter",{get:function(){return this.accountOverviewService.requestsCounter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depositsCounter",{get:function(){return this.accountOverviewService.depositsCounter},enumerable:!0,configurable:!0}),e.prototype.updateMessagesAndBlocks=function(){this.messagesAndBlocksService.updateMessagesAndBlocks()},Object.defineProperty(e.prototype,"messagesGeneralAlert",{get:function(){return this.messagesAndBlocksService.generalAlert},enumerable:!0,configurable:!0}),e.prototype.updateFines=function(){this.finesService.updateFines()},e.prototype.isLoansAlerts=function(){return this.loansService.hasAlerts},Object.defineProperty(e.prototype,"finesOverviewDisplay",{get:function(){return this.finesService.finesOverviewDisplay},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"finesGeneralAlert",{get:function(){return this.finesService.generalAlert},enumerable:!0,configurable:!0}),e.prototype.updateLoans=function(){this.loansService.updateLoans()},e.prototype.updateRequests=function(){this.requestsService.updateRequests()},e.prototype.updateDeposits=function(){"suprima"===this.configurationUtil.getBackendSystem()&&this.depositsService.updateDeposits()},Object.defineProperty(e.prototype,"requestsGeneralAlert",{get:function(){return this.requestsService.hasAlerts},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"requiredTabsList",{get:function(){return this.accountOverviewService.requiredTabsList},enumerable:!0,configurable:!0}),e.prototype.updateSelectedSection=function(e){var t=this,r={overview:function(){t.updateCounters(),t.updateFines(),t.updateMessagesAndBlocks(),t.updateLoans(),t.updateRequests(),t.updateDeposits(),t.updateCounters()},loans:function(){t.updateLoans(),t.updateCounters()},requests:function(){t.updateRequests(),t.updateCounters()},fines:function(){t.updateFines(),t.updateCounters()},blocks_messages:function(){t.updateMessagesAndBlocks(),t.updateCounters()},personal_details:function(){t.updateCounters()},deposits:function(){t.updateDeposits(),t.updateCounters()}};r[e]();var n=this.$location.search();n.section!==e&&this.updateUrl(e)},e.prototype.updateUrl=function(e){var t=this.$location.search();t.section=e,this.$location.search(t)},e}());n([g.preventStateReload,i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],v.prototype,"updateUrl",null),v=n([a.Component({selector:"prm-account-overview",templateUrl:"components/account/overview/account-overview.html"}),o(6,a.Inject("accountIcons")),o(7,a.Inject("$stateParams")),o(8,a.Inject("$location")),o(12,a.Inject("$timeout")),i("design:paramtypes",[s.AccountOverviewService,c.FinesService,l.MessagesAndBlocksService,u.LoansService,d.RequestsService,p.DepositsService,Object,Object,Object,h.PrimolyticsService,m.MediaQueries,f.ConfigurationUtil,Function])],v),r.PrmAccountOverview=v},{"../../analytics/primolytics.service":480,"../../infra/annotations":531,"../../infra/mediaQueries.service":562,"../../nddUtils/configurationUtil.service":596,"../deposits/deposits.service":440,"../fines/fines.service":445,"../loans/loans.service":453,"../messagesAndBlocks/messagesAndBlocks.service":456,"../requests/requests.service":477,"./accountOverview.service":459,"angular-material":17,"ng-metadata/core":362}],458:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("../personalInfo/personalInfo.directive"),a=e("../loans/loans.directive"),s=e("../messagesAndBlocks/messagesAndBlocks.directive"),c=e("../fines/fines.directive"),l=e("../requests/requests.directive"),u=e("../deposits/deposits.directive"),d=e("./finesOverview/finesOverview.directive"),p=e("./messagesAndBlocksOverview/messagesAndBlocksOverview.directive"),f=e("./requestsOverview/requestsOverview.directive"),h=e("./depositsOverview/depositsOverview.directive"),m=e("./loansOverview/loansOverview.directive"),g=e("./accountOverview.service"),v=e("./messagesAndBlocksOverview/messagesAndBlocksOverview.service"),y=e("./depositsOverview/depositsOverview.service"),b=e("./finesOverview/finesOverview.service"),S=e("./loansOverview/loansOverview.service"),_=e("./requestsOverview/requestsOverview.service"),w=e("../loans/loans.service"),E=e("../../infra/widgets/dialogs/dialog.service"),T=function(){function e(){}return e}();T=n([i.NgModule({declarations:[o.PrmPersonalInfo,s.PrmMessagesAndBlocks,a.PrmLoans,m.PrmLoansOverview,c.PrmFines,d.PrmFinesOverview,p.PrmMessagesAndBlocksOverview,l.PrmRequests,f.PrmRequestsOverview,u.PrmDeposits,h.PrmDepositsOverview],providers:[g.AccountOverviewService,v.MessagesAndBlocksOverviewService,y.DepositsOverviewService,b.FinesOverviewService,S.LoansOverviewService,_.RequestsOverviewService,w.LoansService,E.DialogService],imports:[]})],T),r.AccountOverviewModule=T},{"../../infra/widgets/dialogs/dialog.service":577,"../deposits/deposits.directive":438,"../fines/fines.directive":443,"../loans/loans.directive":451,"../loans/loans.service":453,"../messagesAndBlocks/messagesAndBlocks.directive":454,"../personalInfo/personalInfo.directive":470,"../requests/requests.directive":475,"./accountOverview.service":459,"./depositsOverview/depositsOverview.directive":460,"./depositsOverview/depositsOverview.service":461,"./finesOverview/finesOverview.directive":462,"./finesOverview/finesOverview.service":463,"./loansOverview/loansOverview.directive":464,"./loansOverview/loansOverview.service":465,"./messagesAndBlocksOverview/messagesAndBlocksOverview.directive":466,"./messagesAndBlocksOverview/messagesAndBlocksOverview.service":467,"./requestsOverview/requestsOverview.directive":468,"./requestsOverview/requestsOverview.service":469,"ng-metadata/core":362}],459:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("../account.service"),s=e("../../mappingTablesCache/mappingTablesCache.service"),c=e("../linkedUserSelector/linkedUserSelector.service"),l=e("lodash/orderBy"),u=e("lodash/intersection"),d=function(){function e(e,t,r){this.accountService=e,this.linkedUserSelectorService=t,this.mappingTablesCache=r,this.setRequiredTabsList()}return e.prototype.setRequiredTabsList=function(){var e=["deposits","personal_settings","blocks","fines","requests","loans"],t=this.mappingTablesCache.getTable("My Account Menu Configuration - OvP");t.forEach(function(e){e.source2=e.source2.replace("myaccount","")}),t=l(t,function(e){return parseInt(e.source2)},"desc"),t=t.filter(function(e){return"Yes"===e.target}),t=t.map(function(e){return e.source3}),this._requiredTabsList=u(e,t)},Object.defineProperty(e.prototype,"requiredTabsList",{get:function(){return this._requiredTabsList},enumerable:!0,configurable:!0}),e.prototype.updateCounters=function(){var e=this;this.accountService.makeIlsRequest("counters",null).then(function(t){return e.setCounters(t)})},e.prototype.setCounters=function(e){try{var t={},r=e.data.listofactions.action;r.forEach(function(e){t[e.type]=e.value}),this._finesCounter=t.Fines?parseFloat(t.Fines):0,this._loansCounter=t.Loans?parseFloat(t.Loans):0,this._requestsCounter=t.Requests?parseFloat(t.Requests):0,this._depositsCounter=t.Deposits?parseFloat(t.Deposits):0,this._demeritsCounter=t.Demerits?parseFloat(t.Demerits):0,this.linkedUserSelectorService.setInstitutionsList(e)}catch(e){}},Object.defineProperty(e.prototype,"finesCounters",{get:function(){return this._finesCounter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"demeritsCounter",{get:function(){return this._demeritsCounter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loansCounters",{get:function(){return parseInt(this._loansCounter)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"requestsCounter",{get:function(){return this._requestsCounter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depositsCounter",{get:function(){return this._depositsCounter},enumerable:!0,configurable:!0}),e}();d=n([o.Injectable(),i("design:paramtypes",[a.AccountService,c.LinkedUserSelectorService,s.MappingTablesCache])],d),r.AccountOverviewService=d,r.default=[]},{"../../mappingTablesCache/mappingTablesCache.service":592,"../account.service":434,"../linkedUserSelector/linkedUserSelector.service":448,"lodash/intersection":262,"lodash/orderBy":293,"ng-metadata/core":362}],460:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=(e("angular-material"),e("ng-metadata/core")),s=e("./depositsOverview.service"),c=e("../../deposits/deposits.service"),l=function(){function e(e,t,r){this.depositsOverviewService=e,this.depositsService=t,this.accountIcons=r,this.linkToDepositsEvent=new a.EventEmitter}return e.prototype.triggerLinkToDepositsSection=function(e){e&&this.depositsService.setDepositToPersistantFullDisplay(e),this.linkToDepositsEvent.emit(5)},Object.defineProperty(e.prototype,"depositsOverviewDisplay",{get:function(){return this.depositsService.depositsOverviewDispaly},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inProgress",{get:function(){return this.depositsService.isRequestInProgress},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDeposits",{get:function(){return this.depositsCounters},enumerable:!0,configurable:!0}),e.prototype.getViewAllPlaceHolder=function(){var e=[[{prefix:"",code:this.numOfDeposits||0,tag:{span:['class=""']}}]];return e},e}();n([a.Output(),i("design:type",Object)],l.prototype,"linkToDepositsEvent",void 0),l=n([a.Component({inputs:["depositsCounters"],selector:"prm-deposits-overview",templateUrl:"components/account/overview/depositsOverview/deposits-overview.html"}),o(2,a.Inject("accountIcons")),i("design:paramtypes",[s.DepositsOverviewService,c.DepositsService,Object])],l),r.PrmDepositsOverview=l},{"../../deposits/deposits.service":440,"./depositsOverview.service":461,"angular-material":17,"ng-metadata/core":362}],461:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=function(){function e(){}return e}();a=n([o.Injectable(),i("design:paramtypes",[])],a),r.DepositsOverviewService=a,r.default=[]},{"ng-metadata/core":362}],462:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t);
},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./finesOverview.service"),c=e("../../fines/fines.service"),l=(e("angular-material"),function(){function e(e,t,r,n){this.finesOverviewService=e,this.finesService=t,this.accountIcons=r,this.$filter=n,this.linkToFinesEvent=new a.EventEmitter}return e.prototype.triggerLinkToFinesSection=function(e){console.log(this.finesOverviewDisplay),e&&this.finesService.setFineToPersistantFullDisplay(e),this.linkToFinesEvent.emit(3)},Object.defineProperty(e.prototype,"finesOverviewDisplay",{get:function(){return this.finesService.finesOverviewDisplay},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"payFinesLink",{get:function(){return this.finesService.payFinesLink},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfFines",{get:function(){return this.finesService.numOfFines},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"finesBalance",{get:function(){if(this.finesCounters)return this.finesCounters},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"demeritsBalance",{get:function(){return this.demeritsCounter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inProgress",{get:function(){return this.finesService.isRequestInProgress},enumerable:!0,configurable:!0}),e.prototype.getFinesBalancePlaceHolder=function(){var e=this.$filter("currency")(this.finesBalance,"",2);return{idx_0:'<span class="bold-text">'+e+"</span>"}},e.prototype.getDemeritsBalancePlaceHolder=function(){var e=this.$filter("currency")(this.demeritsBalance,"",2);return{idx_0:'<span class="bold-text">'+e+"</span>"}},e.prototype.getViewAllPlaceHolder=function(){return{idx_0:this.numOfFines}},e}());n([a.Input(),i("design:type",String)],l.prototype,"finesCounters",void 0),n([a.Input(),i("design:type",String)],l.prototype,"demeritsCounter",void 0),n([a.Output(),i("design:type",Object)],l.prototype,"linkToFinesEvent",void 0),l=n([a.Component({selector:"prm-fines-overview",templateUrl:"components/account/overview/finesOverview/fines-overview.html"}),o(2,a.Inject("accountIcons")),o(3,a.Inject("$filter")),i("design:paramtypes",[s.FinesOverviewService,c.FinesService,Object,Function])],l),r.PrmFinesOverview=l},{"../../fines/fines.service":445,"./finesOverview.service":463,"angular-material":17,"ng-metadata/core":362}],463:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=function(){function e(){}return e}();a=n([o.Injectable(),i("design:paramtypes",[])],a),r.FinesOverviewService=a,r.default=[]},{"ng-metadata/core":362}],464:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./loansOverview.service"),c=e("../../loans/loans.service"),l=(e("angular-material"),function(){function e(e,t,r){this.loansOverviewService=e,this.loansService=t,this.accountIcons=r,this.linkToLoansEvent=new a.EventEmitter}return e.prototype.hasRenewableLoans=function(){return this.loansService.hasRenewableLoans()},e.prototype.renewAllLoans=function(){this.loansService.renewAllLoans()},e.prototype.triggerLinkToLoansSection=function(e){e&&this.loansService.triggerLoanExpand(e),this.loansService.setLoansType("active"),this.linkToLoansEvent.emit(1)},Object.defineProperty(e.prototype,"loansOverviewDisplay",{get:function(){return this.loansService.loansOverviewDisplay},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfLoans",{get:function(){return this.loansCounters},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inProgress",{get:function(){return this.loansService.isRequestInProgress},enumerable:!0,configurable:!0}),e.prototype.getViewAllPlaceHolder=function(){return{idx_0:this.numOfLoans}},e}());n([a.Input(),i("design:type",Object)],l.prototype,"loansCounters",void 0),n([a.Output(),i("design:type",Object)],l.prototype,"linkToLoansEvent",void 0),l=n([a.Component({inputs:["loansCounters"],selector:"prm-loans-overview",templateUrl:"components/account/overview/loansOverview/loans-overview.html"}),o(2,a.Inject("accountIcons")),i("design:paramtypes",[s.LoansOverviewService,c.LoansService,Object])],l),r.PrmLoansOverview=l},{"../../loans/loans.service":453,"./loansOverview.service":465,"angular-material":17,"ng-metadata/core":362}],465:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=function(){function e(){}return e}();a=n([o.Injectable(),i("design:paramtypes",[])],a),r.LoansOverviewService=a,r.default=[]},{"ng-metadata/core":362}],466:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=(e("angular-material"),e("ng-metadata/core")),s=e("./messagesAndBlocksOverview.service"),c=e("../../messagesAndBlocks/messagesAndBlocks.service"),l=function(){function e(e,t,r){this.messagesAndBlocksOverviewService=e,this.messagesAndBlocksService=t,this.accountIcons=r,this.linkToMessagesEvent=new a.EventEmitter}return Object.defineProperty(e.prototype,"messagesOverviewDisplay",{get:function(){return this.messagesAndBlocksService.messagesOverviewDisplay},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inProgress",{get:function(){return this.messagesAndBlocksService.isRequestInProgress},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfMessages",{get:function(){return this.messagesAndBlocksService.numOfMessages},enumerable:!0,configurable:!0}),e.prototype.triggerLinkToMessagesSection=function(){this.linkToMessagesEvent.emit(4)},e.prototype.getViewAllPlaceHolder=function(){return{idx_0:this.numOfMessages}},e}();n([a.Output(),i("design:type",Object)],l.prototype,"linkToMessagesEvent",void 0),l=n([a.Component({selector:"prm-messages-and-blocks-overview",templateUrl:"components/account/overview/messagesAndBlocksOverview/messages-and-blocks-overview.html"}),o(2,a.Inject("accountIcons")),i("design:paramtypes",[s.MessagesAndBlocksOverviewService,c.MessagesAndBlocksService,Object])],l),r.PrmMessagesAndBlocksOverview=l},{"../../messagesAndBlocks/messagesAndBlocks.service":456,"./messagesAndBlocksOverview.service":467,"angular-material":17,"ng-metadata/core":362}],467:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=function(){function e(){}return e}();a=n([o.Injectable(),i("design:paramtypes",[])],a),r.MessagesAndBlocksOverviewService=a,r.default=[]},{"ng-metadata/core":362}],468:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=(e("angular-material"),e("ng-metadata/core")),s=e("./requestsOverview.service"),c=e("../../requests/requests.service"),l=function(){function e(e,t,r){this.requestsOverviewService=e,this.requestsService=t,this.accountIcons=r,this.linkToRequestsEvent=new a.EventEmitter}return e.prototype.triggerLinkToRequestsSection=function(e){e&&this.requestsService.setRequestToPersistantFullDisplay(e),this.linkToRequestsEvent.emit(2)},Object.defineProperty(e.prototype,"requestsOverviewDisplay",{get:function(){return this.requestsService.requestsOverviewDispaly},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inProgress",{get:function(){return this.requestsService.isRequestInProgress},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfRequests",{get:function(){return this.requestsCounters},enumerable:!0,configurable:!0}),e.prototype.getViewAllPlaceHolder=function(){return{idx_0:this.numOfRequests||0}},e}();n([a.Output(),i("design:type",Object)],l.prototype,"linkToRequestsEvent",void 0),l=n([a.Component({directives:[],inputs:["requestsCounters"],selector:"prm-requests-overview",templateUrl:"components/account/overview/requestsOverview/requests-overview.html"}),o(2,a.Inject("accountIcons")),i("design:paramtypes",[s.RequestsOverviewService,c.RequestsService,Object])],l),r.PrmRequestsOverview=l},{"../../requests/requests.service":477,"./requestsOverview.service":469,"angular-material":17,"ng-metadata/core":362}],469:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=function(){function e(){}return e}();a=n([o.Injectable(),i("design:paramtypes",[])],a),r.RequestsOverviewService=a,r.default=[]},{"ng-metadata/core":362}],470:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./personalInfo.service"),c=e("../../nddUtils/dateUtils.service"),l=e("../../infra/formBuilder/formBuilder.service"),u=e("../../appConfig/appConfigForward"),d=e("../../infra/storageUtil.service"),p=e("../../nddUtils/configurationUtil.service"),f=e("lodash/forEach"),h=e("lodash/cloneDeep"),m=e("angular"),g=function(){function e(e,t,r,n,i,o,a){this.personalInfoService=e,this.dateUtils=t,this.formBuilderService=r,this.$mdDialog=n,this._accountIcons=i,this.storageUtil=o,this.configurationUtil=a,this._formMode="View",this.vid=u.getVid(),this.getPersonalInfo(!1),this.personalInfoService.resetMsgs()}return Object.defineProperty(e.prototype,"accountIcons",{get:function(){return this._accountIcons},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"personalInfo",{get:function(){return this.personalInfoService.personalInfoFormFields},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"generalSection",{get:function(){return this.personalInfoService.generalSection},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"addressSection",{get:function(){var e=this,t=this.personalInfoService.addressSection;return f(t,function(t){f(t,function(t){t.disabled="View"===e.formMode||"readonly"===t.uiType})}),this.personalInfoService.addressSection},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"phoneNumberSection",{get:function(){return this.personalInfoService.phoneNumberSection},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"passwordSection",{get:function(){return this.personalInfoService.passwordSection},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formMode",{get:function(){return this._formMode},set:function(e){this._formMode=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mailSelectedOption",{get:function(){return this.personalInfoService.mailSelectedOption},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actionSection",{get:function(){return this.personalInfoService.actionSection},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mailOptions",{get:function(){return this.personalInfoService.mailOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorMessages",{get:function(){return this.personalInfoService.errorMessages},set:function(e){this.personalInfoService.errorMessages=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"successMessages",{get:function(){return this.personalInfoService.successMessages},set:function(e){this.personalInfoService.successMessages=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"postData",{get:function(){var e=this,t=h(this.personalInfo);return f(t,function(r,n){var i=e.formBuilderService.getFieldByName(e.addressSection,n);if(i||(i=e.formBuilderService.getFieldByName(e.actionSection,n)),i){if(i.fieldType===l.FormBuilderEnums.FIELD_TYPE.INTERNAL)return void delete t[n];if(i.uiType===l.FormBuilderEnums.UI_TYPE.DATE&&t[n]){var o=e.dateUtils.convertPrimoDateStringToDateType(t[n]);t[n]=e.dateUtils.convertDateTypeToIlsDateString(o)}i.fieldType===l.FormBuilderEnums.FIELD_TYPE.BOOLEAN&&(t[n]=t[n]?"Y":"N")}}),t},enumerable:!0,configurable:!0}),e.prototype.editDetails=function(){this.refreshForm({allowEmpty:!0,updateValue:!1}),this.errorMessages=[],this.formMode="Edit"},e.prototype.discardChanges=function(){this.getPersonalInfo(!0),this.errorMessages=[],this.formMode="View"},e.prototype.isEditable=function(){return!!this.personalInfoService.personalInfo&&"Y"===this.personalInfoService.personalInfo.editable},e.prototype.save=function(){var e=this;if(this.validForm()){var t=this.postData,r={vid:this.vid,lang:"eng",data:t};this.personalInfoService.savePersonalInfo(r).then(function(t){e.storageUtil.$localForage.getItem("userDetails").then(function(t){m.isObject(t)||(t={}),t.email=r.data.email,t.smsnumber=r.data.sms_number,e.storageUtil.$localForage.setItem("userDetails",t)}),e.refreshForm({allowEmpty:!1,updateValue:!1}),e.formMode="View"},function(t){e.formMode="Error"})}},e.prototype.getPlaceHolders=function(e){return{idx_0:e.institution,idx_1:this.dateUtils.convertIlsDateStringToPrimoDateString(e.expiryDate),idx_2:e.patronGroup}},e.prototype.getInstitutions=function(){return Object.keys(this.generalSection)},e.prototype.showPasswordSection=function(){return this.personalInfoService.showPasswordSection},e.prototype.showLoginDialog=function(){if(this.errorMessages=[],this.successMessages=[],"View"!==this.formMode)return this.formMode="Error",void(this.errorMessages=["nui.details.edit.error"]);var e='<md-dialog aria-label="Change login credentials" md-component-id="fullView"><md-dialog-content><prm-change-password [display-fields]="ctrl.passwordSection" [form]="ctrl.formData" (on-cancel)="ctrl.onCancel()" (on-save)="ctrl.onSave($event)" </prm-change-password></md-dialog-content></md-dialog>',t=this;this.$mdDialog.show({template:e,bindToController:!0,controller:function(){this.passwordSection=t.passwordSection,this.formData=t.postData,this.onCancel=function(){t.$mdDialog.hide()},this.onSave=function(e){t.$mdDialog.hide(),t.refreshForm({allowEmpty:!1,updateValue:!0}),t.successMessages.push(e),t.formMode="View"}},controllerAs:"ctrl"})},e.prototype.showActionSection=function(){return!this.configurationUtil.isSuprima()&&(this.personalInfoService.personalInfo&&m.isDefined(this.personalInfoService.personalInfo.librarynotices))},e.prototype.refreshForm=function(e){this.personalInfoService.refreshData(e)},e.prototype.validForm=function(){return this.personalInfoService.validForm(this.passwordSection)},e.prototype.getPersonalInfo=function(e){var t=this;this.personalInfoService.getPersonalInfo().then(function(r){e&&t.refreshForm({allowEmpty:!1,updateValue:!0})})},e}();g=n([a.Component({selector:"prm-personal-info",templateUrl:"components/account/personalInfo/personal-info.html"}),o(3,a.Inject("$mdDialog")),o(4,a.Inject("accountIcons")),i("design:paramtypes",[s.PersonalInfoService,c.DateUtils,l.FormBuilderService,Object,Object,d.StorageUtil,p.ConfigurationUtil])],g),r.PrmPersonalInfo=g},{"../../appConfig/appConfigForward":484,"../../infra/formBuilder/formBuilder.service":553,"../../infra/storageUtil.service":571,"../../nddUtils/configurationUtil.service":596,"../../nddUtils/dateUtils.service":597,"./personalInfo.service":473,angular:"angular","lodash/cloneDeep":237,"lodash/forEach":253,"ng-metadata/core":362}],471:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=function(){function e(){}return e}();r.PersonalInfoModel=o;var a=function(){function e(){}return e.prototype.fromIlsResponse=function(e){var t=new o,r=e.data;return r&&(t.address1=r.address1,t.address2=r.address2,t.address3=r.address3,t.address4=r.address4,t.address5=r.address5,t.city=r.city,t.state=r.state,t.zip=r.zip,t.addressvalidfrom=r.addressvalidfrom,t.addressvalidto=r.addressvalidto,t.telephone1=r.telephone1,t.telephone2=r.telephone2,t.telephone3=r.telephone3,t.telephone4=r.telephone4,t.email=r.email,t.smsnumber=r.smsnumber,t.pincode=r.pincode,t.password=r.password,t.editable=r.editable,t.patronstatus=r.patronstatus,t.librarynotices=r.librarynotices),t},e.prototype.fromUserSettingsResponse=function(e){var t=new o,r=e.data;return r&&(t.email=r.email,t.smsnumber=r.smsnumber,t.editable="Y"),t},e}();a=n([i.Injectable()],a),r.PersonalInfoResponseMapper=a},{"ng-metadata/core":362}],472:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("../../infra/password/changePassword.directive"),a=e("../accountLinks/accountLinks.directive"),s=e("./personalInfo.service"),c=e("../../infra/formBuilder/formBuilder.service"),l=e("./personalInfo.model"),u=e("./personalInfoForm.service"),d=e("../../infra/formBuilder/formBuilder.module"),p=e("angular-material"),f=function(){function e(){}return e}();f=n([i.NgModule({declarations:[o.PrmChangePassword,a.PrmAccountLinks],providers:[s.PersonalInfoService,c.FormBuilderService,l.PersonalInfoResponseMapper,u.PersonalInfoFromService],imports:[d.FormBuilderModule,p]})],f),r.PersonalInfoModule=f},{"../../infra/formBuilder/formBuilder.module":552,"../../infra/formBuilder/formBuilder.service":553,"../../infra/password/changePassword.directive":563,"../accountLinks/accountLinks.directive":435,"./personalInfo.model":471,"./personalInfo.service":473,"./personalInfoForm.service":474,"angular-material":17,"ng-metadata/core":362}],473:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../mappingTablesCache/mappingTablesCache.service"),c=e("../../appConfig/appConfigForward"),l=e("./personalInfoForm.service"),u=e("../../infra/formBuilder/formBuilder.service"),d=e("../../security/jwtUtil.service"),p=e("../account.service"),f=e("../linkedUserSelector/linkedUserSelector.service"),h=e("./personalInfo.model"),m=e("../../nddUtils/configurationUtil.service"),g=e("../../infra/storageUtil.service"),v=e("lodash/filter"),y=e("lodash/forEach"),b=e("angular"),S=function(){function e(e,t,r,n,i,o,a,s,l,u,d,p,f){var h=this;this.mappingTablesCache=e,this.jwtUtilService=t,this.$http=r,this.personalInfoResponseMapper=n,this.personalInfoFromService=i,this.formBuilderService=o,this.accountService=a,this.restBaseURLs=s,this.$filter=l,this.linkedUserSelectorService=u,this.$q=d,this.configurationUtil=p,this.storageUtil=f,this._personalInfoFormFields={},this._addressSection=[],this._phoneNumberSection=[],this._mailOptionSection=[],this._actionSection=[],this._passwordSection=[],this.vid=c.getVid(),this._personalSettingMappingTable=[],this._errorMessages=[],this._successMessages=[],this.primoValueField={email:"primo",my_email:"primo",smsnumber:"primo"},this.handleValue={ils:function(e){var t=e.path;e.value=h.personalInfo[t]},primo:function(e){var t=e.path;e.value=h.personalInfo[t],h.storageUtil.$localForage.getItem("userDetails").then(function(r){if(h.personalInfoFormFields[e.name]=r[t],!r[t]){var n=h.userSettingUrl+"?vid="+h.vid;h.$http({method:"GET",url:n}).then(function(r){if(h.updateLocalForage(r.data),h.personalInfoFormFields[e.name]=r.data[t],!r.data[t]){var n={vid:h.vid};n[t]=h.personalInfo[t],h.personalInfoFormFields[e.name]=h.personalInfo[t],h.$http.post(h.userSettingUrl,n).then(function(e){return h.updateLocalForage(e.data)})}})}})}},this.userSettingUrl=s.userSettingsBaseURL,this.sectionMap={general:{patronexpirydate:""},address:this.personalInfoFromService.addressForm,phoneNumber:this.personalInfoFromService.phoneNumberForm,action:this.personalInfoFromService.actionForm,password:this.personalInfoFromService.passwordForm},"suprima"===this.configurationUtil.getBackendSystem()&&(this.primoValueField={})}return e.prototype.getPrimoUserSettings=function(){var e=this;return this.$http({method:"GET",url:this.userSettingUrl,params:{vid:c.getVid()}}).then(function(t){return e.personalInfoResponseMapper.fromUserSettingsResponse(t)})},e.prototype.getIlsPersonalDetails=function(){var e=this;return this.accountService.makeIlsRequest("personal_settings",{lang:"eng"}).then(function(t){return e.personalInfoResponseMapper.fromIlsResponse(t)})},e.prototype.getPersonalInfo=function(){var e=this,t=c.getApiBaseUrl()?this.getIlsPersonalDetails():this.getPrimoUserSettings();return t.then(function(t){return e.personalInfo=t,e.refreshData({allowEmpty:!1,updateValue:!0}),e.personalInfo})},Object.defineProperty(e.prototype,"errorMessages",{get:function(){return this._errorMessages},set:function(e){this._errorMessages=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"successMessages",{get:function(){return this._successMessages},set:function(e){this._successMessages=e},enumerable:!0,configurable:!0}),e.prototype.resetMsgs=function(){this.successMessages=[],this.errorMessages=[]},Object.defineProperty(e.prototype,"userSettingUrl",{get:function(){return this._userSettingUrl},set:function(e){this._userSettingUrl=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"personalInfo",{get:function(){return this._personalInfo},set:function(e){this._personalInfo=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"personalInfoFormFields",{get:function(){return this._personalInfoFormFields},set:function(e){this._personalInfoFormFields=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"generalSection",{get:function(){return this._generalSection},set:function(e){this._generalSection=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"addressSection",{get:function(){return this._addressSection},set:function(e){this._addressSection=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"phoneNumberSection",{get:function(){return this._phoneNumberSection},set:function(e){this._phoneNumberSection=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mailOptionSection",{get:function(){return this._mailOptionSection},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actionSection",{get:function(){return this._actionSection},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mailSelectedOption",{get:function(){return this._mailSelectedOption},set:function(e){this._mailSelectedOption=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mailOptions",{get:function(){return this._mailOptions},set:function(e){this._mailOptions=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"passwordSection",{get:function(){return this._passwordSection},set:function(e){this._passwordSection=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showPasswordSection",{get:function(){try{var e=this.mappingTablesCache.findByProperties("Alma Institution Codes",{target:c.getInstitutionCode()})[0].source1;if(e!==this.linkedUserSelectorService.selectedInstitution.institutionCode)return!1}catch(e){}var t=!1;return this.personalInfo&&(t=b.isDefined(this.personalInfo.pincode)&&this.personalSettingMappingTable.filter(function(e,t,r){return"pincode"===e.target}).length>0||b.isDefined(this.personalInfo.password)&&this.personalSettingMappingTable.filter(function(e,t,r){return"new_password"===e.target}).length>0),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"personalSettingMappingTable",{get:function(){if(!this._personalSettingMappingTable||0===this._personalSettingMappingTable.length){var e=this.mappingTablesCache.findByProperties(this.mappingTablesCache.tables.PERSONAL_SETTING_FIELDS,{source3:this.vid});this._personalSettingMappingTable&&0!==e.length||(e=this.mappingTablesCache.findByProperties(this.mappingTablesCache.tables.PERSONAL_SETTING_FIELDS,{source3:"default"})),this._personalSettingMappingTable=e}return this._personalSettingMappingTable},set:function(e){this._personalSettingMappingTable=e},enumerable:!0,configurable:!0}),e.prototype.refreshData=function(e){this.personalInfo&&(this.updateGeneralSection(),this.updateAddressSection(e),this.updatePhoneSection(e),this.updateMailOptionsSection(),this.updateActionSection(e),this.updatePasswordSection())},e.prototype.validForm=function(e){return this.formBuilderService.validate(this.personalInfoFormFields,this.sectionMap.password)},e.prototype.updateLocalForage=function(e){this.storageUtil.$localForage.setItem("userDetails",e)},e.prototype.updatePersonalInfo=function(){var e=this;this.resetMsgs(),this.accountService.makeIlsRequest("personal_settings",{lang:"eng"}).then(function(t){e.personalInfo=t.data,e.refreshData({allowEmpty:!1,updateValue:!0})})},e.prototype.savePersonalInfo=function(e){return c.getApiBaseUrl()?this.saveIlsSettings(e):this.savePrimoSettings(e)},e.prototype.saveIlsSettings=function(e){var t=this;this.resetMsgs();var r=this.$q.defer();return this.accountService.makeIlsRequest("update_personal_settings",e).then(function(e){"ok"===e.status||"0025"===e["reply-code"]?(t.successMessages.push("nui.details.edit.success"),r.resolve(e)):(t.errorMessages.push(e["reply-text"]),r.reject(e["reply-text"]))},function(e){t.errorMessages.push("nui.details.edit.failure"),r.reject(e)}),r.promise},e.prototype.savePrimoSettings=function(e){var t=this,r=this.$q.defer(),n=e.data;return n.vid=e.vid,n.smsnumber=n.sms_number,this.$http({method:"POST",url:this.userSettingUrl,data:n}).then(function(e){t.successMessages.push("contact.update.success.primo_only"),r.resolve(e)},function(e){t.errorMessages.push("nui.details.edit.failure"),r.reject(e)}),r.promise},e.prototype.updateGeneralSection=function(){this.parseGeneral()},e.prototype.parseGeneral=function(){var e=this;if(this.generalSection={},this.personalInfo.patronstatus&&this.personalInfo.patronstatus[0].registration[0]){var t=this.personalInfo.patronstatus[0].registration[0].institution.length;y(this.personalInfo.patronstatus[0].registration[0].institution,function(r){var n={};t>1&&(n.institution=r.ilsinstitutionname),n.expiryDate=r.patronexpirydate,n.patronGroup=r.patronstatusname,e.generalSection[r.ilsinstitutionname]||(e.generalSection[r.ilsinstitutionname]=[]),(n.expiryDate||n.patronGroup)&&e.generalSection[r.ilsinstitutionname].push(n)})}},e.prototype.updateAddressSection=function(e){var t=this.parsePersonalInfo("address",e);t.length>0&&(this.addressSection=this.formBuilderService.groupFields(t))},e.prototype.updatePhoneSection=function(e){var t=this.parsePersonalInfo("phoneNumber",e);t.length>0&&(this.phoneNumberSection=this.formBuilderService.groupFields(t))},e.prototype.updateMailOptionsSection=function(){this.mailSelectedOption="Attachment Only",this.mailOptions=[{value:"Email Body Only",text:"Email Body Only"},{value:"Attachment Only",text:"Attachment Only"},{value:"Attachment and Email Body",text:"Attachment and Email Body"}]},e.prototype.updateActionSection=function(e){this.parseActionList(e)},e.prototype.parseActionList=function(e){var t=this;if(e.updateValue){var r=this.sectionMap.action;y(r,function(e){if(t.personalInfo.librarynotices&&t.personalInfo.librarynotices.librarynotice){var n=v(t.personalInfo.librarynotices.librarynotice,function(t){
return t.code===e.name});n&&0!==n.length?t.personalInfoFormFields[e.name]="Y"===n[0].enabled:r.uiType=u.FormBuilderEnums.UI_TYPE.HIDDEN}}),this._actionSection=r}},e.prototype.updatePasswordSection=function(){this._passwordSection=this.parsePersonalInfo("password",{allowEmpty:!0,updateValue:!1})},e.prototype.parseItem=function(e,t,r){return t&&this.updateFieldWithMappingTable(t,this.personalInfo)?this.personalInfo&&!b.isDefined(this.personalInfo[t.path])?{}:(t.value=this.personalInfoFormFields[t.name],r.updateValue&&(this.populateValue(t),this.personalInfoFormFields[t.name]=t.value),r.allowEmpty||t.value?(this.isFieldReadOnly(t),t):{}):{}},e.prototype.populateValue=function(e){var t=this.primoValueField[e.key];t||(t="ils"),this.handleValue[t]&&this.handleValue[t](e),this.formBuilderService.handleValue(e)},e.prototype.parsePersonalInfo=function(e,t){var r=this,n=this.sectionMap[e].map(function(n,i,o){return r.parseItem(e,n,t)}).filter(this.filterEmpty);return n=this.orderFields(n)},e.prototype.updateFieldWithMappingTable=function(e,t){var r=v(this.personalSettingMappingTable,function(t){return t.target===e.key});return r&&0!==r.length?(e.order=r[0].source2,!0):(t&&!this.personalInfoFormFields[e.name]&&(this.personalInfoFormFields[e.name]=t[e.path]),!1)},e.prototype.orderFields=function(e){return e.sort(function(e,t){if(!e.order)return-1;if(!t.order)return 1;var r=parseInt(e.order,0),n=parseInt(t.order,0);return r>n?1:r<n?-1:0})},e.prototype.filterEmpty=function(e){return e.name},e.prototype.isFieldReadOnly=function(e){if("email"===e.key||"my_email"===e.key){var t=this.mappingTablesCache.findByProperties(this.mappingTablesCache.tables.AUTHENTICATION_SERVICE,{source2:this.jwtUtilService.getDecodedToken().authenticationProfile,source1:"EMAIL_OVERRIDE"});t[0]&&"true"===t[0].target&&(e.uiType=this.formBuilderService.uiType.READ_ONLY)}},e}();S=n([a.Injectable(),o(2,a.Inject("$http")),o(7,a.Inject("restBaseURLs")),o(8,a.Inject("$filter")),o(10,a.Inject("$q")),i("design:paramtypes",[s.MappingTablesCache,d.JwtUtilService,Object,h.PersonalInfoResponseMapper,l.PersonalInfoFromService,u.FormBuilderService,p.AccountService,Object,Object,f.LinkedUserSelectorService,Object,m.ConfigurationUtil,g.StorageUtil])],S),r.PersonalInfoService=S,r.default=[]},{"../../appConfig/appConfigForward":484,"../../infra/formBuilder/formBuilder.service":553,"../../infra/storageUtil.service":571,"../../mappingTablesCache/mappingTablesCache.service":592,"../../nddUtils/configurationUtil.service":596,"../../security/jwtUtil.service":842,"../account.service":434,"../linkedUserSelector/linkedUserSelector.service":448,"./personalInfo.model":471,"./personalInfoForm.service":474,angular:"angular","lodash/filter":246,"lodash/forEach":253,"ng-metadata/core":362}],474:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("../../infra/formBuilder/formBuilder.service"),s=e("lodash/cloneDeep"),c=function(){function e(e){this.formBuilderService=e,this.address=[{key:"address_1",name:"address_1",path:"address1",label:"contact.address_1",value:"",fieldType:a.FormBuilderEnums.FIELD_TYPE.STRING,uiType:a.FormBuilderEnums.UI_TYPE.TEXT,group:!0},{key:"address_2",name:"address_2",path:"address2",label:"contact.address_2",value:"",fieldType:a.FormBuilderEnums.FIELD_TYPE.STRING,uiType:a.FormBuilderEnums.UI_TYPE.TEXT,group:!0},{key:"address_3",name:"address_3",path:"address3",label:"contact.address_3",value:"",fieldType:a.FormBuilderEnums.FIELD_TYPE.STRING,uiType:a.FormBuilderEnums.UI_TYPE.TEXT,group:!0},{key:"address_4",name:"address_4",path:"address4",label:"contact.address_4",value:"",fieldType:a.FormBuilderEnums.FIELD_TYPE.STRING,uiType:a.FormBuilderEnums.UI_TYPE.TEXT,group:!0},{key:"address_5",name:"address_5",path:"address5",label:"contact.address_5",value:"",fieldType:a.FormBuilderEnums.FIELD_TYPE.STRING,uiType:a.FormBuilderEnums.UI_TYPE.TEXT,group:!0},{key:"city",name:"city",path:"city",label:"contact.city",value:"",fieldType:a.FormBuilderEnums.FIELD_TYPE.STRING,uiType:a.FormBuilderEnums.UI_TYPE.TEXT,group:!1},{key:"state",name:"state",path:"state",label:"contact.state",value:"",fieldType:a.FormBuilderEnums.FIELD_TYPE.STRING,uiType:a.FormBuilderEnums.UI_TYPE.TEXT,group:!1},{key:"zip",name:"zip",path:"zip",label:"contact.zip",value:"",fieldType:a.FormBuilderEnums.FIELD_TYPE.STRING,uiType:a.FormBuilderEnums.UI_TYPE.TEXT,group:!1},{key:"address_valid_from",name:"address_valid_from",path:"addressvalidfrom",label:"contact.address_valid_from",value:"",fieldType:this.formBuilderService.fieldType.DATE,uiType:this.formBuilderService.uiType.DATE,group:!1},{key:"address_valid_to",name:"address_valid_to",path:"addressvalidto",label:"contact.address_valid_to",value:"",fieldType:this.formBuilderService.fieldType.DATE,uiType:this.formBuilderService.uiType.DATE,group:!1}],this.phoneNumber=[{key:"telephone_1",name:"telephone_1",path:"telephone1",label:"contact.telephone_1",value:"",fieldType:a.FormBuilderEnums.FIELD_TYPE.STRING,uiType:a.FormBuilderEnums.UI_TYPE.TEXT,group:!1},{key:"telephone_2",name:"telephone_2",path:"telephone2",label:"contact.telephone_2",value:"",fieldType:a.FormBuilderEnums.FIELD_TYPE.STRING,uiType:a.FormBuilderEnums.UI_TYPE.TEXT,group:!1},{key:"telephone_3",name:"telephone_3",path:"telephone3",label:"contact.telephone_3",value:"",fieldType:a.FormBuilderEnums.FIELD_TYPE.STRING,uiType:a.FormBuilderEnums.UI_TYPE.TEXT,group:!1},{key:"telephone_4",name:"telephone_4",path:"telephone4",label:"contact.telephone_4",value:"",fieldType:a.FormBuilderEnums.FIELD_TYPE.STRING,uiType:a.FormBuilderEnums.UI_TYPE.TEXT,group:!1},{key:"sms_number",name:"sms_number",path:"smsnumber",label:"mypref.label.sms_number",value:"",fieldType:a.FormBuilderEnums.FIELD_TYPE.STRING,uiType:a.FormBuilderEnums.UI_TYPE.TEXT,group:!1},{key:"my_email",name:"email",path:"email",label:"mypref.label.my_email",value:"",fieldType:a.FormBuilderEnums.FIELD_TYPE.STRING,uiType:a.FormBuilderEnums.UI_TYPE.TEXT,group:!1},{key:"email",name:"email",path:"email",label:"mypref.label.my_email",value:"",fieldType:a.FormBuilderEnums.FIELD_TYPE.STRING,uiType:a.FormBuilderEnums.UI_TYPE.TEXT,group:!1}],this.password=[{key:"pincode",name:"pincode",path:"pincode",label:"contact.pincode",value:"",fieldType:a.FormBuilderEnums.FIELD_TYPE.STRING,uiType:a.FormBuilderEnums.UI_TYPE.TEXT,group:!1},{key:"old_password",name:"old_password",path:"password",label:"contact.oldPassword",value:"",fieldType:a.FormBuilderEnums.FIELD_TYPE.STRING,uiType:this.formBuilderService.uiType.PASSWORD,group:!1},{key:"new_password",name:"new_password",path:"password",label:"contact.newPassword",value:"",fieldType:a.FormBuilderEnums.FIELD_TYPE.STRING,uiType:this.formBuilderService.uiType.PASSWORD,group:!1},{key:"new_password",name:"repeat_password",path:"password",label:"nui.contact.confirm_Pasword",value:"",fieldType:a.FormBuilderEnums.FIELD_TYPE.STRING,uiType:this.formBuilderService.uiType.PASSWORD,group:!1,validator:{func:this.formBuilderService.compareFields,params:"new_password",message:"nui.details.password.error"}}],this.action=[{key:"NOT RELEVANT",name:"FulUserBorrowingActivityLetter",value:"",label:"Activity Report",fieldType:a.FormBuilderEnums.FIELD_TYPE.BOOLEAN,uiType:a.FormBuilderEnums.UI_TYPE.CHECK_BOX},{key:"NOT RELEVANT",name:"FulUserLoansCourtesyLetter",value:"",label:"Courtesy letter",fieldType:a.FormBuilderEnums.FIELD_TYPE.BOOLEAN,uiType:a.FormBuilderEnums.UI_TYPE.CHECK_BOX},{key:"NOT RELEVANT",name:"FulUserOverdueNoticeLetter",value:"",label:"Overdue Notice",fieldType:a.FormBuilderEnums.FIELD_TYPE.BOOLEAN,uiType:a.FormBuilderEnums.UI_TYPE.CHECK_BOX},{key:"NOT RELEVANT",name:"FulItemChangeDueDateLetter_STATUS",value:"",label:"Loan Status letter",fieldType:a.FormBuilderEnums.FIELD_TYPE.BOOLEAN,uiType:a.FormBuilderEnums.UI_TYPE.CHECK_BOX},{key:"NOT RELEVANT",name:"FulItemChangeDueDateLetter_RECALL",value:"",label:"Recall letter",fieldType:a.FormBuilderEnums.FIELD_TYPE.BOOLEAN,uiType:a.FormBuilderEnums.UI_TYPE.CHECK_BOX},{key:"NOT RELEVANT",name:"FulItemChangeDueDateLetter_RECALL_CANCEL",value:"",label:"Recall Cancellation letter",fieldType:a.FormBuilderEnums.FIELD_TYPE.BOOLEAN,uiType:a.FormBuilderEnums.UI_TYPE.CHECK_BOX}]}return Object.defineProperty(e.prototype,"addressForm",{get:function(){return s(this.address)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"phoneNumberForm",{get:function(){return s(this.phoneNumber)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actionForm",{get:function(){return s(this.action)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"passwordForm",{get:function(){return s(this.password)},enumerable:!0,configurable:!0}),e}();c=n([o.Injectable(),i("design:paramtypes",[a.FormBuilderService])],c),r.PersonalInfoFromService=c,r.default=[]},{"../../infra/formBuilder/formBuilder.service":553,"lodash/cloneDeep":237,"ng-metadata/core":362}],475:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./requests.service"),c=e("../overview/accountOverview.service"),l=e("../../infra/widgets/dialogs/dialog.service"),u=e("lodash/includes"),d=e("angular"),p=function(){function e(e,t,r,n,i,o){this.requestsService=e,this.accountOverviewService=t,this.dialogService=r,this.$translate=n,this.accountIcons=i,this.$mdDialog=o,this.dialogTimeout=2e3,this.isAllExpanded=!1,this.isInCancelAction=!1,this._sortOptions=[{optionName:"nui.request.sort.status",fieldName:"+status"},{optionName:"nui.request.sort.title",fieldName:"+title"}]}return Object.defineProperty(e.prototype,"sortOptions",{get:function(){return this._sortOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"requestsDisplay",{get:function(){return this.requestsService.requestsDisplay},enumerable:!0,configurable:!0}),e.prototype.sortRequestsDisplay=function(){this.requestsService.sortRequestsDisplay(this.sortBy)},e.prototype.toggleAllExpand=function(){this.isAllExpanded=!this.isAllExpanded;for(var e=0;e<this.requestsDisplay.length;e++)this.requestsDisplay[e].isExpanded=this.isAllExpanded},e.prototype.getRequestsCountPlaceHolder=function(){return{idx_0:this.requestsCounter||0}},e.prototype.showCancelPrompt=function(e,t,r){this.failedRequestId=null;var n=this;this.$mdDialog.show({templateUrl:"components/account/requests/request-confirm-dialog.html",parent:this.getCancelPromptParentElement(e),targetEvent:e,escapeToClose:!0,clickOutsideToClose:!1,hasBackdrop:!1,locals:{classThis:this},controller:function(){this.hide=n.$mdDialog.hide,this.cancelIt=function(){n.cancelRequest(t,r)}},controllerAs:"ctrl"})},e.prototype.undoCancel=function(){this.cancelPromptDisplayId=null},e.prototype.cancelRequest=function(e,t){var r=this;this.isInCancelAction=!0,this.cancelPromptDisplayId=null,this.cancelRequestId=e,this.requestsService.cancelRequest(e,t).then(function(e){return r.cancelCallback(e)})},e.prototype.getCancelPromptParentElement=function(e){for(var t=d.element(e.target).parent();!u(t[0].classList,"in-element-dialog-parent");)t=t.parent();return t[0]},e.prototype.cancelCallback=function(e){return"ok"===e.status?void this.cancelSuccessCallback():void this.cancelFailCallback(e)},e.prototype.cancelSuccessCallback=function(){this.isInCancelAction=!1,this.cancelRequestId=null,this.showCancelActionSuccessFeedBack(),this.requestsService.updateRequests(),this.accountOverviewService.updateCounters()},e.prototype.cancelFailCallback=function(e){this.isInCancelAction=!1,this.failedRequestId=this.cancelRequestId,this.cancelRequestId=null,this.failedRequestMessage=e.note||e["reply-text"]},e.prototype.showCancelActionSuccessFeedBack=function(){var e=this,t=this.dialogService;this.$translate("nui.request.cancel.success").then(function(r){return t.showConfirmDialogTimeout("",r,e.dialogTimeout)})},e}();p=n([a.Component({inputs:["requestsCounter"],selector:"prm-requests",templateUrl:"components/account/requests/requests.html"}),o(3,a.Inject("$translate")),o(4,a.Inject("accountIcons")),o(5,a.Inject("$mdDialog")),i("design:paramtypes",[s.RequestsService,c.AccountOverviewService,l.DialogService,Object,Object,Object])],p),r.PrmRequests=p},{"../../infra/widgets/dialogs/dialog.service":577,"../overview/accountOverview.service":459,"./requests.service":477,angular:"angular","lodash/includes":260,"ng-metadata/core":362}],476:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("../accountLinks/accountLinks.directive"),a=e("./requests.service"),s=e("angular-material"),c=function(){function e(){}return e}();c=n([i.NgModule({declarations:[o.PrmAccountLinks],providers:[a.RequestsService],imports:[s]})],c),r.RequestsModule=c},{"../accountLinks/accountLinks.directive":435,"./requests.service":477,"angular-material":17,"ng-metadata/core":362}],477:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../account.service"),c=e("../../mappingTablesCache/mappingTablesCache.service"),l=e("../../nddUtils/dateUtils.service"),u=e("../../nddUtils/stringUtils.service"),d=e("../../appConfig/appConfigForward"),p=function(){function e(e,t,r,n,i,o){this.accountService=e,this.mappingTablesCache=t,this.$filter=r,this.dateUtils=n,this.stringUtils=i,this.$translate=o,this.vid=d.getVid(),this._requestsDisplay=[],this._requestsOverviewDisplay=[],this._hasAlerts=!1,this.dateFields=["endrequestdate","lastinterestdate","requestcreationdate","requestdate","updatedate","laststatusdate","endcallslipdate","endholddate"],this.initConfigurations()}return e.prototype.initConfigurations=function(){this.requests1Config=this.getRequestsBriefConfig("requests.brief.1"),this.requests1Delimiter=this.requests1Config.target,this.requests1Config=[this.requests1Config.source3,this.requests1Config.source4,this.requests1Config.source5],this.requests2Config=this.getRequestsBriefConfig("requests.brief.2"),this.requests2Delimiter=this.requests2Config.target,this.requests2Config=[this.requests2Config.source3,this.requests2Config.source4,this.requests2Config.source5],this.expandedConfigurationsMap=this.getExpandedConfigurationMap()},e.prototype.getRequestsBriefConfig=function(e){var t=this.mappingTablesCache.findByProperties("Requests Brief Display",{source1:this.vid,source2:e});return t.length>0?t[0]:this.mappingTablesCache.findByProperties("Requests Brief Display",{source1:"default",source2:e})[0]},e.prototype.getExpandedConfigurationMap=function(){for(var e={},t=[f.HOLD,f.BOOKING,f.PHOTOCOPY,f.ILL,f.CALL_SLIP,f.SHORT_LOAN,f.ACQUISITION],r=0;r<t.length;r++)switch(t[r]){case f.HOLD:e[f.HOLD]=this.getExpandedConfig("Hold/Recall Request Detailed Display"),e[f.RECALL]=e[f.HOLD];break;case f.BOOKING:e[f.BOOKING]=this.getExpandedConfig("Short Loan and Booking Request Detailed Display"),e[f.SHORT_LOAN]=e[f.BOOKING];break;case f.PHOTOCOPY:e[f.PHOTOCOPY]=this.getExpandedConfig("Photocopy Request Detailed Display");break;case f.ILL:e[f.ILL]=this.getExpandedConfig("ILL Request Detailed Display");break;case f.CALL_SLIP:e[f.CALL_SLIP]=this.getExpandedConfig("Callslip Request Detailed Disply");break;case f.ACQUISITION:e[f.ACQUISITION]=this.getExpandedConfig("Acquistion Request Detailed Display")}return e},e.prototype.getExpandedConfig=function(e){var t=this.mappingTablesCache.getTable(e);t.map(function(e){return e.source2=parseInt(e.source2)}),t=this.$filter("orderBy")(t,"+source2");for(var r=0;r<t.length;r++)t[r].labelName="requests"+t[r].source1,t[r].source1=t[r].source1.replace(/_/g,"");return t},e.prototype.setRequestToPersistantFullDisplay=function(e){this.expandedRequestId=e},e.prototype.expandRequestToFullDisplay=function(e){for(var t=0;t<this._requestsDisplay.length;t++){var r=this._requestsDisplay[t];if(r.requestId===e){r.isExpanded=!0;break}}},e.prototype.updateRequests=function(){var e=this;this.accountService.makeIlsRequest("requests",{vid:this.vid}).then(function(t){return e.setRequestsDisplay(t)})},e.prototype.setRequestsDisplay=function(e){if(this._hasAlerts=!1,e.data){var t=e.data,r=this.$filter("orderBy")(this.parseRequestsDisplay(t),"-isAlert");this._requestsOverviewDisplay=r.slice(0,3),this._requestsDisplay=this._sortSelection?this.$filter("orderBy")(r,this._sortSelection):r,this.expandedRequestId&&(this.expandRequestToFullDisplay(this.expandedRequestId),this.expandedRequestId=null)}},e.prototype.parseRequestsDisplay=function(e){var t=this,r=this.parseRequestsArray(e);return r.map(function(e){return t.parseRequestDisplay(e)})},e.prototype.parseRequestsArray=function(e){var t=this,r=e.holds?e.holds.hold.filter(function(e){return e.requesttype===f.HOLD||!e.requesttype}).map(function(e){return t.addRequestTypeFieldToRequest(e,f.HOLD)}):[],n=e.holds?e.holds.hold.filter(function(e){return e.requesttype===f.RECALL}).map(function(e){return t.addRequestTypeFieldToRequest(e,f.RECALL)}):[],i=e.photocopies?e.photocopies.photocopy.map(function(e){return t.addRequestTypeFieldToRequest(e,f.PHOTOCOPY)}):[],o=e.bookings?e.bookings.booking.map(function(e){return t.addRequestTypeFieldToRequest(e,f.BOOKING)}):[],a=e.ills?e.ills.ill.map(function(e){return t.addRequestTypeFieldToRequest(e,f.ILL)}):[],s=e.callslips?e.callslips.callslip.map(function(e){return t.addRequestTypeFieldToRequest(e,f.CALL_SLIP)}):[],c=e.acqs?e.acqs.acq.map(function(e){return t.addRequestTypeFieldToRequest(e,f.ACQUISITION)}):[],l=e.shortloans?e.shortloans.shortloan.map(function(e){return t.addRequestTypeFieldToRequest(e,f.SHORT_LOAN)}):[],u=[];return u.concat(r,n,i,o,a,s,c,l)},e.prototype.addRequestTypeFieldToRequest=function(e,t){return e.type=t,e},e.prototype.parseRequestDisplay=function(e){var t={requestId:e.requestid,requestType:e.type,title:e.title,status:e.requeststatus||e.holdstatus,isCancelable:"Y"===e.cancel,firstLineLeft:e.title,firstLineRight:this.parseFirstLineRight(e),secondLineLeft:this.parseSecondLine(e,this.requests1Config,this.requests1Delimiter),secondLineRight:this.parseSecondLine(e,this.requests2Config,this.requests2Delimiter),isExpanded:!1,expandedDisplay:this.parseExpandedDisplay(e),isAlert:"Y"===e.available};return t.isAlert&&(this._hasAlerts=!0),t},e.prototype.parseFirstLineRight=function(e){var t="";return e.type===f.BOOKING&&e.bookingstartdate&&e.bookingenddate&&e.bookingstarthour&&e.bookingendhour?t+this.parseBookingRequestDateLine(e):e.type===f.HOLD||e.type===f.RECALL?t+" "+e.holdstatus:t+" "+e.requeststatus},e.prototype.parseBookingRequestDateLine=function(e){var t=this.dateUtils.convertIlsDateStringToPrimoDateString(e.bookingstartdate),r=this.dateUtils.convert24HourStringToDisplayString(e.bookingstarthour),n=this.dateUtils.convertIlsDateStringToPrimoDateString(e.bookingenddate),i=this.dateUtils.convert24HourStringToDisplayString(e.bookingendhour);return t="Invalid date"!==t?t:e.bookingstartdate,r="Invalid date"!==r?r:e.bookingstarthour,n="Invalid date"!==n?n:e.bookingenddate,i="Invalid date"!==i?i:e.bookingendhour," "+t+", "+r+" - "+n+", "+i},e.prototype.parseSecondLine=function(e,t,r){r="&nbsp"===r?" ":r;for(var n="",i=0;i<t.length;i++)if(t[i]){var o=e[t[i]];this.dateFields.indexOf(t[i])>-1&&(o=this.dateUtils.convertIlsDateStringToPrimoDateString(o)),o&&"Invalid date"!==o&&(n=n+o+r)}return n=n.substring(0,n.length-r.length)},e.prototype.parseExpandedDisplay=function(e){for(var t=[],r=this.expandedConfigurationsMap[e.type],n=0;n<r.length;n++){var i=r[n].source1,o=this.parseExpandedDisplayLabel(r[n].labelName,e),a=e[i];this.dateFields.indexOf(i)>-1&&(a=this.dateUtils.convertIlsDateStringToPrimoDateString(a)),a&&"Invalid date"!==a&&this.requests1Config.indexOf(i)===-1&&this.requests2Config.indexOf(i)===-1&&["title","holdstatus","requeststatus","bookingstartdate","bookingenddate","bookingstarthour","bookingendhour","requesttype"].indexOf(i)===-1&&t.push({data:this.stringUtils.removeSpaceEncodingFromString(a),label:o})}return t},e.prototype.parseExpandedDisplayLabel=function(e,t){if(e=e.replace(/requests/,""),"request_id"===e)return"request.bookings."+e;var r="recall"===t.type?f.HOLD:t.type;return"request."+r+"."+e},Object.defineProperty(e.prototype,"requestsDisplay",{get:function(){return this._requestsDisplay},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRequestInProgress",{get:function(){return this.accountService.requestInProgress.requests},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"requestsOverviewDispaly",{get:function(){return this._requestsOverviewDisplay},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"links",{get:function(){return this._links},enumerable:!0,configurable:!0}),e.prototype.sortRequestsDisplay=function(e){this._sortSelection=e,this._requestsDisplay=this.$filter("orderBy")(this._requestsDisplay,this._sortSelection)},e.prototype.cancelRequest=function(e,t){var r={request_id:e,request_type:t};return this.accountService.makeIlsRequest("cancel_requests",r)},Object.defineProperty(e.prototype,"hasAlerts",{get:function(){return this._hasAlerts},enumerable:!0,configurable:!0}),e}();p=n([a.Injectable(),o(2,a.Inject("$filter")),o(5,a.Inject("$translate")),i("design:paramtypes",[s.AccountService,c.MappingTablesCache,Object,l.DateUtils,u.StringUtils,Object])],p),r.RequestsService=p;var f;!function(e){e[e.HOLD="holds"]="HOLD",e[e.RECALL="recall"]="RECALL",e[e.BOOKING="bookings"]="BOOKING",e[e.PHOTOCOPY="photocopies"]="PHOTOCOPY",e[e.ILL="ill"]="ILL",e[e.CALL_SLIP="callslips"]="CALL_SLIP",e[e.SHORT_LOAN="shortloans"]="SHORT_LOAN",e[e.ACQUISITION="acq"]="ACQUISITION"}(f||(f={})),r.default=[]},{"../../appConfig/appConfigForward":484,"../../mappingTablesCache/mappingTablesCache.service":592,"../../nddUtils/dateUtils.service":597,"../../nddUtils/stringUtils.service":608,"../account.service":434,"ng-metadata/core":362}],478:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../search/search.service"),c=function(){function e(e,t,r){var n=this;this.searchService=e,this.$scope=t,this.$timeout=r,this.displayMonitor=!1,this.$scope.$watch(function(){return n.searchService.isSearchInProgress()},function(e){e?n.displayMonitor=!1:n.$timeout(function(){n.displayMonitor=!0},2e3)})}return e.prototype.ngOnInit=function(){},Object.defineProperty(e.prototype,"totalSearchTime",{get:function(){return window.appPerformance.timeStamps["search result displayed"]-window.appPerformance.timeStamps["search api send"]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchApiTime",{get:function(){return window.appPerformance.timeStamps["after search api"]-window.appPerformance.timeStamps["search api send"]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resultsRenderTime",{get:function(){return window.appPerformance.timeStamps["search result displayed"]-window.appPerformance.timeStamps["after search api"]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalSearchServerTime",{get:function(){return window.appPerformance.serverTimeLog.BriefSearchDeltaTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchServerTime",{get:function(){return window.appPerformance.serverTimeLog.DoSearchPrimoResultDeltaTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deliveryManagerServerTime",{get:function(){return window.appPerformance.serverTimeLog.FullEndDMDataDeltaTime},enumerable:!0,configurable:!0}),e}();c=n([a.Component({selector:"prm-performance-monitor",templateUrl:"components/analytics/performanceMonitor/performance-monitor.html"}),o(1,a.Inject("$scope")),o(2,a.Inject("$timeout")),i("design:paramtypes",[s.SearchService,Object,Function])],c),r.PrmPerformanceMonitor=c},{"../../search/search.service":792,"ng-metadata/core":362}],479:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./primolytics.service"),a=e("./performanceMonitor/performanceMonitor.directive"),s=function(){function e(){}return e}();s=n([i.NgModule({declarations:[a.PrmPerformanceMonitor],providers:[o.PrimolyticsService],imports:[]})],s),r.PrimolyticsModule=s},{"./performanceMonitor/performanceMonitor.directive":478,"./primolytics.service":480,"ng-metadata/core":362}],480:[function(e,t,r){"use strict";function n(e){return function(t,r,n){function i(){for(var t=this,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=(new Date).getTime();this.primolyticsService.originalMethodArgs=r;var a=o.apply(this,r);return this.primolyticsService.getScope().$evalAsync(function(){var n=t[e.item]||t.item||t.items||t.result||t.results||(P(r)?void 0:1===r.length?r[0]:r);t.primolyticsService.doBeaconReport(e,n,i)}),a}var o;return n.set?(o=n.set,n.set=i):(o=n.value,n.value=i),n}}function i(e){try{JSON.parse(e)}catch(e){return!1}return!0}function o(e){for(var t,r=Object.keys(e),n=r.length,i={};n--;)t=r[n],i[t.toUpperCase()]=e[t];return i}function a(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n in t)if(e.indexOf(t[n])===-1)return!1;return!0}var s=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var u=e("../appConfig/appConfigForward");window.appConfig=window.appConfig||{};var d=e("angular-ui-router"),p=e("md5"),f=e("ng-metadata/core"),h=e("../appConfig/appConfigForward"),m=e("../search/search.fields.service"),g=e("../security/userSessionManager.service"),v=e("../search/searchState.service"),y=e("../search/search.service"),b=e("../search/fullView/fullViewPage/fullViewPage.service"),S=e("../security/jwtUtil.service"),_=e("../nddUtils/configurationUtil.service"),w=e("../search/browse/browseResult/browseResult.service"),E=e("../search/browse/browseSearchBar/browseSearchBar.service"),T=e("../infra/storageUtil.service"),O=e("../primoExplore/primoExploreStates.module"),I=(e("he"),e("lodash/isEqual")),P=e("lodash/isEmpty"),R=e("lodash/indexOf"),C=e("lodash/flatten"),A=e("angular"),j=function(){function e(e,t,r,n,i,o,a,s,c,l,u,d,p,f,m){this.searchFieldsService=e,this.$translate=t,this.userSessionManagerService=r,this.searchStateService=n,this.searchService=i,this.$rootScope=o,this.$timeout=a,this.fullViewPageService=s,this.$state=c,this.jwtUtilService=l,this.$stateParams=u,this.configurationUtil=d,this.browseResultService=p,this.browseSearchBarService=f,this.storageUtil=m,this.beaconBaseUrl=h.getBeaconUrl()||"http://1234.exlibrisgroup.com"}return e.prototype.trackInitialPage=function(){var e=this;this.$rootScope.$evalAsync(function(){var t=e.$rootScope.$on("$viewContentLoaded",function(){return e.reportDeepLinks()});t()})},e.prototype.reportDeepLinks=function(e,t,r,n,i){var o=window.location.toString();if(o.indexOf("vid=")!==-1){var a=(new Date).getTime(),s=this.getMappingJson(),c=o.substring(o.lastIndexOf("/")+1,o.lastIndexOf("?")+1);s[c]&&s[c].apply(this,[o,a])}},e.prototype.getSearchService=function(){return this.searchService},e.prototype.getScope=function(){return this.$rootScope},e.prototype.getMappingJson=function(e){var t=this;return{recommender:{O5:function(e){return encodeURIComponent(e.link1)},O3:function(e){return e.sourceid},O2:function(e){return e.index.toString()}},"search?":function(e,r){if(a(e,"query=","search_scope="))if(a(e,"facet=")){var n=e.substr(e.indexOf("facet=")).split("facet="),i=t.searchService.getFacetsFromUrl(decodeURIComponent(n[n.length-1]),!1)[0];"frbrgroupid"===i.name?t.doBeaconReportWaitForFacetSearch({p:"refine",op:"frbr"},void 0,r):"include"===i.name?t.doBeaconReportWaitForFacetSearch({p:"refine",op:"facetInclude"},void 0,r):t.doBeaconReportWaitForFacetSearch({p:"refine",op:"facetExclude"},void 0,r)}else t.doBeaconReportWaitForSearch({p:"search",op:"do"},"",r)},"fulldisplay?":function(e,r){a(e,"docid=","context=","search_scope=")&&t.doBeaconReportWaitForFullView({p:"brief",op:"openfull"},"",r)},"account?":function(e,r){var n=/section=([^&]+)/.exec(window.location.toString())[1];P(n)?t.doBeaconReport({p:"general",op:"gotoMyAccount"},"",r):t.doBeaconReport({p:"general",op:"menu.myaccount."+n},"",r)},"collectionDiscovery?":function(e,r){a(e,"colayout=","inst=","collectionId=")&&t.doBeaconReport({p:"general",op:"???"})},"favorites?":function(e,r){a(e,"label=")&&t.doBeaconReport({p:"general",op:"gotoeShelf"},"",r)},TimesCited:{O1:function(){return t.getSourceOfTheRecord()},O2:function(){return t.getSearchScope()},O3:function(e){return t.getIdOfRecord(e)},O6:function(e){return t.getGIDOfRecord(e)},O13:function(e){return t.getRecordDataSource(e)},O14:function(e){return t.getJournalOfRecord(e)},O15:function(e){return t.getIssnOfRecord(e)},O16:function(e){return t.getEIssnOfRecord(e)}},rssSubscription:{O1:function(){return t.getSourceOfTheRecord()},O2:function(){
return t.getSearchScope()},O3:function(){return t.getNumberOfResults()},O4:function(){return t.getFieldSearchedFromUrl()},O8:function(){return t.getSearchTermsFromUrl()},O10:function(){return t.getResourceTypePreFilterFromUrl()},O11:function(){return t.getSearchTypeFromUrl()},O17:function(){return t.getSearchTab()},O19:function(){return t.getPercentOfContentBySource()},O22:function(){return t.getServerTime()},click:{O22:function(e){return t.getServerTime(e)}}},search:{O1:function(){return t.getSourceOfTheRecord()},O2:function(){return t.getSearchScope()},O3:function(){return t.getNumberOfResults()},O4:function(){return t.getFieldSearchedFromUrl()},O8:function(){return t.getSearchTermsFromUrl()},O10:function(){return t.getResourceTypePreFilterFromUrl()},O11:function(){return t.getSearchTypeFromUrl()},O17:function(){return t.getSearchTab()},O19:function(){return t.getPercentOfContentBySource()},O22:function(e){return t.getServerTime(e)},lateralLinking:{OP:"lateralLinking",O1:function(){return t.getSourceOfTheRecord()},O2:function(){return t.getSearchScope()},O3:function(){return t.getNumberOfResults()},O4:function(){return 1===t.originalMethodArgs.length?t.originalMethodArgs[0]:void 0},O8:function(){return t.getSearchTerm()},O10:function(){return t.getResourceTypePreFilter()},O11:function(){return t.getSearchType()},O13:function(e){return t.getRecordDataSource(e)},O14:function(e){return t.getJournalOfRecord(e)},O15:function(e){return t.getIssnOfRecord(e)},O16:function(e){return t.getEIssnOfRecord(e)},O22:function(){return t.getServerTime()}},browseRelated:{OP:"browseRelated",O:function(){return t.getInstNameForBeacon()},O8:function(){return t.getBrowseQuery()}},browse:{OP:function(){return"browse_"+t.browseSearchBarService.selectedScope.SourceCode1},O:function(){return t.getInstNameForBeacon()}},atoz:{OP:"atoz",O2:"primo_alma",O3:function(){return t.getNumberOfResults()},O8:function(){return t.getAtozSearchTerm()}},azdb:{OP:"azdb",O2:"primo_alma",O3:function(){return t.getNumberOfResults()},O8:function(){return t.getAtozSearchTerm()}},sessionQuery:{OP:"sessionQuery",O1:function(){return"deep_search"},O2:function(){return t.getSearchScope()},O3:function(){return t.getNumberOfResults()},O4:function(){return t.getFieldSearchedFromUrl()},O6:"",O8:function(){return t.getSearchTermsFromUrl()},O10:"",O11:"",O13:"",O14:"",O15:"",O16:"",O17:"",O18:"UI",O19:"",O20:"",O21:"NUI",O22:"",O23:""},savedQuery:{OP:"savedQuery",O1:function(){return"deep_search"},O2:function(){return t.getSearchScope()},O3:function(){return t.getNumberOfResults()},O4:function(){return t.getFieldSearchedFromUrl()},O6:"",O8:function(){return t.getSearchTermsFromUrl()},O10:"",O11:"",O13:"",O14:"",O15:"",O16:"",O17:"",O18:"UI",O19:"",O20:"",O21:"NUI",O22:"",O23:""}},brief:{O1:function(){return t.getSourceOfTheRecord()},O2:function(e){return t.getItemDataScope(e)},O3:function(e){return t.getIdOfRecord(e)},O4:function(e){return"favorites"===t.op?t.getFavoritesAction(e):void 0},O6:function(e){return t.getGIDOfRecord(e)},O10:function(e){return t.getOnlineOrPhysical(e)},O13:function(e){return t.getRecordDataSource(e)},O14:function(e){return t.getJournalOfRecord(e)},O15:function(e){return t.getIssnOfRecord(e)},O16:function(e){return t.getEIssnOfRecord(e)},O22:function(e){return t.getServerTime(e)},P:function(){return t.checkIfCitationTrail(t.op)},next:{OP:"next",O1:function(){return t.getSearchScopeType()},O2:function(){return t.getSearchScope()},O8:function(){return t.getSearchTerm()},O22:function(e){return t.getServerTime(e)}},resourceRecommender:{O14:function(e){return e.resourceType}}},sort:{OP:function(){return t.getSortType()},O1:function(){return t.getSourceOfTheRecord()},O2:function(){return t.getSearchScope()},O3:function(){return t.getNumberOfResults()},O4:function(){return t.getFieldSearched()},O8:function(){return t.getSearchTerm()},O10:function(){return t.getResourceTypePreFilter()},O11:function(){return t.getSearchType()},O19:function(){return t.getPercentOfContentBySource()},O22:function(){return t.getServerTime()}},general:{O:function(){return"signIn"===t.op||"gotoSearch"===t.op?t.getCurrentLocation():void 0},O1:function(){return"gotoSearchHistory"===t.op?"deep_search":void 0},O2:function(){return"gotoSearchHistory"===t.op?t.getSearchScope():void 0},O4:function(){return t.getCurrentLang()}},fullshortcuts:{OP:function(){return 1===t.originalMethodArgs.length?t.originalMethodArgs[0]:void 0},O1:function(){return t.getSourceOfTheRecord()},O2:function(e){return t.getItemDataScope(e)},O3:function(e){return t.getIdOfRecord(e)},O6:function(e){return t.getGIDOfRecord(e)},O13:function(e){return t.getRecordDataSource(e)},O14:function(e){return t.getJournalOfRecord(e)},O15:function(e){return t.getIssnOfRecord(e)},O16:function(e){return t.getEIssnOfRecord(e)},O22:function(e){return t.getServerTime(e)}},getIt1:{O1:function(){return t.getSourceOfTheRecord()},O2:function(e){return t.getItemDataScope(e)},O3:function(e){return t.getIdOfRecord(e)},O4:"???",O6:function(e){return t.getGIDOfRecord(e)},O13:function(e){return t.getRecordDataSource(e)},O14:function(e){return t.getJournalOfRecord(e)},O15:function(e){return t.getIssnOfRecord(e)},O16:function(e){return t.getEIssnOfRecord(e)},O22:function(e){return t.getServerTime(e)}},linksService:{O1:function(){return t.getSourceOfTheRecord()},O2:function(e){return t.getItemDataScope(e)},O3:function(e){return t.getIdOfRecord(e)},O4:"???",O6:function(e){return t.getGIDOfRecord(e)},O8:function(){return t.getSearchTerm()},O13:function(e){return t.getRecordDataSource(e)},O14:function(e){return t.getJournalOfRecord(e)},O15:function(e){return t.getIssnOfRecord(e)},O16:function(e){return t.getEIssnOfRecord(e)},O22:function(e){return t.getServerTime(e)}},myAccount:{},tags:{},refine:{OP:function(e){return t.getFacetAction(e)},O:function(e){return t.getFacetAddOrRemove(e)},O1:function(){return t.getSearchScopeType()},O2:function(){return t.getSearchScope()},O3:function(){return t.getNumberOfResults()},O4:function(){return t.getFieldSearched()},O8:function(){return t.getSearchTerm()},O10:function(){return t.getResourceTypePreFilter()},O11:function(){return t.getSearchType()},O13:function(e){return t.getFacetName(e)},O19:function(){return t.getPercentOfContentBySource()},O20:function(e){return t.getFacetValue(e)},O22:function(){return t.getServerTime()},O50:function(e){if(e.ignoreInActions)return"ignoreInActions"},frbr:{OP:"frbr",O:function(e){return t.getFacetAddOrRemove(e)},O1:function(){return t.getSourceOfTheRecord()},O2:function(e){return t.getSearchScope()},O3:function(e){return t.getIdOfRecord(e)},O13:function(e){return t.getRecordDataSource(e)},O14:function(e){return t.getJournalOfRecord(e)},O15:function(e){return t.getIssnOfRecord(e)},O16:function(e){return t.getEIssnOfRecord(e)},O22:function(){return t.getServerTime()}}},setPersistentFacet:{OP:function(){return t.getFacetAction(e)},O:function(){return t.getFacetAddOrRemove(e)},O1:function(){return t.getSearchScopeType()},O2:function(){return t.getSearchScope()},O3:function(){return t.getNumberOfResults()},O4:function(){return t.getFieldSearched()},O8:function(){return t.getSearchTerm()},O10:function(){return t.getResourceTypePreFilter()},O11:function(){return t.getSearchType()},O13:function(){return t.getFacetName(e)},O19:function(){return t.getPercentOfContentBySource()},O20:function(){return t.getFacetValue(e)},O22:function(){return t.getServerTime()}},persistent:{OP:function(){return t.getFacetAction(e)},O:function(){return t.getFacetAddOrRemove(e)},O1:function(){return t.getSearchScopeType()},O2:function(){return t.getSearchScope()},O3:function(){return t.getNumberOfResults()},O4:function(){return t.getFieldSearched()},O8:function(){return t.getSearchTerm()},O10:function(){return t.getResourceTypePreFilter()},O11:function(){return t.getSearchType()},O13:function(){return t.getFacetName(e)},O19:function(){return t.getPercentOfContentBySource()},O20:function(){return t.getFacetValue(e)},O22:function(){return t.getServerTime()},O50:"ignoreInActions"},sendTo:{O1:function(){return t.getSourceOfTheRecord()},O2:function(e){return t.getItemDataScope(e)},O3:function(e){return t.getIdOfRecord(e)},O6:function(e){return t.getGIDOfRecord(e)},O13:function(e){return t.getRecordDataSource(e)},O14:function(e){return t.getJournalOfRecord(e)},O15:function(e){return t.getIssnOfRecord(e)},O16:function(e){return t.getEIssnOfRecord(e)},O22:function(e){return t.getServerTime(e)}},click:{O:function(){return t.getInstNameForBeacon()}},"citation-linker":{},personalizedResults:{}}},e.prototype.getInstNameForBeacon=function(){var e=u.getInstitutionCode(),t=this.$translate.instant(e);return encodeURIComponent("&&&&"+e+"&"+t+"&&")},e.prototype.getParamsFromMapping=function(e,t){e.OP&&(this.op=e.OP);var r=e.P,n=e,i=this.getMappingJson(t);i[r][this.op]&&(i[r]=i[r][this.op]);for(var o in i[r])try{"function"==typeof i[r][o]?n[o]=i[r][o](t):n[o]=i[r][o]}catch(e){}return n},e.prototype.json2Urlparams=function(e){var t=this.genBeaconParamsArray(),r={};for(var n in t)""!==e[n]&&""===t[n]?r[n]=e[n]:""!==e[n]&&"undefined"!=typeof e[n]||""===t[n]?""!==e[n]&&""!==t[n]&&(r[n]=e[n]):r[n]=t[n];var i="";for(var o in r)r[o]&&(i=i+o+"="+encodeURI(r[o])+"&");return i.substring(0,i.length-1)},e.prototype.genBeaconParamsArray=function(){return{A:"Primo_Local",I:(this.configurationUtil.isSuprima()?h.getInstitutionId():h.getBeaconInstitutionCode())||"",IP:"",O:"",O1:"",O2:"",O3:"",O4:"",O5:h.getCurrentPCKey(),O6:"",O7:this.getUserLoginStatus(),O8:"",O9:h.getVid()||"",O10:"",O11:"",O12:this.getCampusStatus(),O13:"",O14:"",O15:"",O16:"",O17:"",O18:"UI",O19:"",O20:"",O21:this.configurationUtil.isSuprima()?"SUP":"NUI",O22:"",O50:"",OP:"",P:"",RS:this.getResolution(),S:this.getCurrentJWTDigest(),SRVR:h.getCurrentServer(),T:"",TYP:"Page_View_"+h.getCurrentVersionNumber(),ctx_enc:"",ctx_tim:"",rfr_id:"","rft.artnum":"","rft.atitle":"","rft.au":"","rft.aucorp":"","rft.auinit":"","rft.auinit1":"","rft.auinitm":"","rft.aulast":"","rft.ausuffix":"","rft.btitle":"","rft.coden":"","rft.eisbn":"","rft.eissn":"","rft.epage":"","rft.genre":"","rft.isbn":"","rft.issn":"","rft.issue":"","rft.jtitle":"","rft.object_id":"","rft.pages":"","rft.part":"","rft.quarter":"","rft.sici":"","rft.spage":"","rft.ssn":"","rft.volume":"",rft_dat:"",rft_id:"",rft_val_fmt:"",url_ctx_fmt:"",url_ver:""}},e.prototype.getOnlineOrPhysical=function(e){if(A.isDefined(e.beaconIsPhsical)){if(e.beaconIsPhsical)return"physical";if(!e.beaconIsPhsical)return"online"}},e.prototype.getSourceOfTheRecord=function(){var e=u.getTab(this.getSearchScope()).toUpperCase(),t=window.appConfig["primo-view"].scopes;for(var r in t){var n=t[r].tab.toUpperCase(),i=this.getSearchScope().toUpperCase(),o=t[r]["scope-id"].toUpperCase();if(n===e&&i===o){var a=t[r].types;return a.indexOf("local")>-1&&a.indexOf("adaptor")>-1?"blended":a.indexOf("local")===-1&&a.indexOf("adaptor")>-1?"deep_search":"local"}}},e.prototype.getServerTime=function(e){return e&&e.beaconO22?e.beaconO22:e?void 0:this.searchService.getResultObject().beaconO22},e.prototype.getSortType=function(){return this.searchFieldsService.sortby},e.prototype.getSearchScopeType=function(e){return this.getSourceOfTheRecord()},e.prototype.getRecordDataSource=function(e){return e.pnx.search.sourceid||""},Object.defineProperty(e.prototype,"browseRecordSource",{get:function(){return this.browseResultService.browseResult.pnx.search.sourceid||""},enumerable:!0,configurable:!0}),e.prototype.getSearchType=function(){if(this.searchStateService.getSearchObject().query)return this.searchStateService.getSearchObject().query.replace(/[a-z]+,/,"").replace(/,.*/,"")},e.prototype.getBrowseQuery=function(){return encodeURIComponent(this.browseResultService.query)},e.prototype.getGIDOfRecord=function(e){if("5"===e.pnx.facets.frbrtype[0])return e.pnx.facets.frbrgroupid},e.prototype.getItemDataScope=function(e){return"PC"===e.context?e.pnx.search.scope:e.pnx.control.sourceid},e.prototype.getIdOfRecord=function(e){return e.pnx.control.recordid},e.prototype.getIssnOfRecord=function(e){return this.arrayToStringWithToken(e.pnx.addata.issn,";")},e.prototype.getEIssnOfRecord=function(e){return this.arrayToStringWithToken(e.pnx.addata.eissn,";")},e.prototype.arrayToStringWithToken=function(e,t){var r="";if(e.length>0){var n=!0;for(var i in e)n?(r=e[i],n=!1):r+=t+e[i]}return r},e.prototype.getJournalOfRecord=function(e){var t="";return e.pnx.facets.jtitle.length>0&&(t=e.pnx.facets.jtitle[0]),t},e.prototype.getFacetAsObj=function(e){return{name:e[0],label:e[1],value:e[2],type:e[3],displayedType:e[4],operation:e.slice(-1)[0]}},e.prototype.getFacetAddOrRemove=function(e){if("expandResults"===this.op)return this.searchService.getSearchObject().pcAvailability?"Add":"Remove";var t=this.searchStateService.getSearchObject().facets;if("frbr"===this.op||"frbrgroupid"===e.name){for(var r in t)if("frbrgroupid"===t[r].name)return"Add";return"Remove"}if("add"==e.operation)return"Add";for(var r in t)if(e.name===t[r].name&&e.label===t[r].label&&e.value===t[r].value&&e.facetType===t[r].facetType&&e.displayedType===t[r].displayedType)return"Add";return"Remove"},e.prototype.getFacetAction=function(e){var t=this.getFacetType(e);return"facet"+t[0].toUpperCase()+t.slice(1)},e.prototype.getFacetValue=function(e){if(!e){var t=this.searchStateService.getSearchObject().facets;t.length>0&&(e=t[t.length-1])}return"tlevel"===e.name||"rtype"===e.name?e.value:void 0},e.prototype.getFacetType=function(e){if(!e){var t=this.searchStateService.getSearchObject().facets;return t[t.length-1].type}return"frbrgroupid"===e.name?"frbr":e.facetType?e.facetType:e.type},e.prototype.getFacetName=function(e){if(e)return e.name;var t=this.searchStateService.getSearchObject().facets;return t[t.length-1].name},e.prototype.getFavoritesAction=function(e){var t,r=this,n=this.userSessionManagerService.area;return t=n.map(function(e){return r.userSessionManagerService.isGuest()?e.pnx.control.recordid[0]:e}),R(t,e.pnx.control.recordid[0])!==-1?"remove":"add"},e.prototype.checkIfCitationTrail=function(e){return"CitedByLink"!=e&&"CitationsLink"!=e?"brief":this.$state.$current.name===O.STATE_NAMES.CITATION_TRAILS?"citationTrail":"brief"},e.prototype.getCurrentLocation=function(){var e=window.location.pathname;return e.substring(e.lastIndexOf("/")+1)},e.prototype.getResolution=function(){return"W"+window.screen.availWidth+"H"+window.screen.availHeight},e.prototype.getCampusStatus=function(){var e="0";return"true"==this.jwtUtilService.getDecodedToken().onCampus&&(e="1"),e},e.prototype.getPercentOfContentBySource=function(e){e||(e=this.searchService.getResultObject().data);var t={};for(var r in e){var n=e[r].context;t[n]||(t[n]=0),t[n]+=1}return"TOT:"+e.length+";PR:"+(t.L/e.length*100||0).toFixed(2)+";PC:"+(t.PC/e.length*100||0).toFixed(2)+";EB:"+(t.Ebsco/e.length*100||0).toFixed(2)+";WC:"+(t.WorldCat/e.length*100||0).toFixed(2)+";OT:"+(this.getOtherContentBySource(e)/e.length*100||0).toFixed(2)},e.prototype.getOtherContentBySource=function(e){var t=0;for(var r in e){var n=e[r].context;I(n,"L")||I(n,"PC")||I(n,"Ebsco")||I(n,"WorldCat")||(t+=1)}return t},e.prototype.getCurrentSearchTab=function(){return window.appConfig["view-translations"][this.$translate.use()]["scopes.option."+this.searchFieldsService.scope]||""},e.prototype.getNumberOfResults=function(){return this.searchService.getResultObject().info.total},e.prototype.getSearchTerm=function(){if(this.searchStateService.getSearchObject().query)return this.searchStateService.getSearchObject().query.replace(/[a-z]+,[a-z]+,/,"")},e.prototype.getAtozSearchTerm=function(){if(this.searchStateService.getSearchObject().journals||this.searchStateService.getSearchObject().databases){var e=this.searchStateService.getSearchObject().journals||this.searchStateService.getSearchObject().databases;return e.replace(/[a-z]+,/,"")}},e.prototype.getFieldSearched=function(){return this.searchStateService.getSearchObject().query.replace(/,.*/,"")},e.prototype.getFieldSearchedFromUrl=function(){return this.getParamFromQuery(0)},e.prototype.getSearchTermsFromUrl=function(){return this.getParamFromQuery(2)},e.prototype.getSearchTypeFromUrl=function(){return this.getParamFromQuery(1)},e.prototype.getParamFromQuery=function(e){var t=this.$stateParams.query;if(t){t=C([t]);var r=t.map(function(t){var r=t.split(",");return r[e]});return r}},e.prototype.getSearchTab=function(){return this.$stateParams.tab},e.prototype.getCurrentJWTDigest=function(){var e=this.storageUtil.sessionStorage.getItem("primoExploreJwt");return e?p(e):"NO_SESSION"},e.prototype.getUserLoginStatus=function(){return this.userSessionManagerService.isGuest()?"0":"1"},e.prototype.getCurrentLang=function(){return this.$translate.use()},e.prototype.getSearchScope=function(){var e=this.searchFieldsService.scope;if(!e){var t=this.$stateParams.search_scope;t&&(e=t)}return e},e.prototype.getResourceTypePreFilter=function(){return"All items"},e.prototype.getResourceTypePreFilterFromUrl=function(){var e="All items",t=this.$stateParams.pfilter;return t&&(t=C([t]),t.forEach(function(t,r,n){var i=t.split(",");"pfilter"===i[0]&&(e=i[2])})),e},e.prototype.getTimestamp=function(){return(new Date).getTime()},e.prototype.doBeaconReport=function(e,t,r){this.getSearchService().isSearchInProgress()?this.doBeaconReportWaitForSearch(e,t,r):this.fullViewPageService.isGetItemInProgress()?this.doBeaconReportWaitForFullView(e,t,r):"refine"===e.p?this.doBeaconReportWaitForFacetSearch(e,t=t instanceof Array?this.getFacetAsObj(t):t,r):"sort"===e.p?this.doBeaconReportWaitForSearch(e,t,r):this._doBeaconReport(e,t,r)},e.prototype.doBeaconReportWaitForFacetSearch=function(e,t,r){var n=this,i=this.getScope().$watch(function(){return n.searchService.isSearchInProgress()},function(o,a){if(o===!1&&a===!0){var s=n.searchStateService.getSearchObject().facets;n._doBeaconReport(e,t||s[s.length-1],r,!0),i()}})},e.prototype.doBeaconReportWaitForSearch=function(e,t,r){var n=this,i=this.getScope().$watch(function(){return n.searchService.isSearchInProgress()},function(o,a){o===!1&&a===!0&&(n._doBeaconReport(e,t||n.searchStateService.getResultObject(),r,!0),i())})},e.prototype.doBeaconReportWaitForFullView=function(e,t,r){var n=this,i=this.getScope().$watch(function(){return n.fullViewPageService.isGetItemInProgress()},function(o,a){o===!1&&a===!0&&(n._doBeaconReport(e,t||n.fullViewPageService.currentItem,r),i())})},e.prototype._doBeaconReport=function(e,t,r,n){var a=this;if("N"!==window.appConfig["system-configuration"].GATHER_PAGE_STAT&&this.beaconBaseUrl){i(e)&&(e=JSON.parse(e)),e=o(e);var s=this.getParamsFromMapping(e,t),c=this.json2Urlparams(s);this.$timeout(function(){var e=n?window.appPerformance.timeStamps["search result displayed"]-window.appPerformance.timeStamps["search api send"]:(new Date).getTime()-r,t=a.beaconBaseUrl+"?"+c+(r||n?"&T="+e:"")+"&ignore="+(new Date).getTime();a.placeImageOnPage(t)},n?2e3:0)}},e.prototype.placeImageOnPage=function(e){var t=document.createElement("img");t.src=e,t.style.display="none",document.getElementById("beaconPlaceHolder").appendChild(t)},e}();j=s([f.Injectable(),l(1,f.Inject("$translate")),l(5,f.Inject("$rootScope")),l(6,f.Inject("$timeout")),l(8,f.Inject("$state")),l(10,f.Inject("$stateParams")),c("design:paramtypes",[m.SearchFieldsService,Function,g.UserSessionManagerService,v.SearchStateService,y.SearchService,Object,Function,b.FullViewPageService,Object,S.JwtUtilService,Object,_.ConfigurationUtil,w.BrowseResultService,E.BrowseSearchBarService,T.StorageUtil])],j),r.PrimolyticsService=j,r.beacon=n,r.isJson=i,r.normalizeJson2UpperCase=o,r.urlContainsParams=a,r.default=[d]},{"../appConfig/appConfigForward":484,"../infra/storageUtil.service":571,"../nddUtils/configurationUtil.service":596,"../primoExplore/primoExploreStates.module":620,"../search/browse/browseResult/browseResult.service":655,"../search/browse/browseSearchBar/browseSearchBar.service":660,"../search/fullView/fullViewPage/fullViewPage.service":693,"../search/search.fields.service":790,"../search/search.service":792,"../search/searchState.service":814,"../security/jwtUtil.service":842,"../security/userSessionManager.service":853,angular:"angular","angular-ui-router":27,he:32,"lodash/flatten":251,"lodash/indexOf":261,"lodash/isEmpty":268,"lodash/isEqual":269,md5:325,"ng-metadata/core":362}],481:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),e("core-js/client/shim");var n=e("bootstrap-app");e("reflect-metadata"),e("angular"),e("angular-load");var i=e("ng-metadata/core"),o=e("./primoExplore/primoExploreModule"),a=e("angular");n.bootstrapConfiguration().then(function(e){if(window.location.search.indexOf("noCustomization=true")>-1)return a.bootstrap(document.querySelector("primo-explore"),[i.bundle(o.PrimoExploreModule).name]);var t,r,n=[];if(e[0])try{t=a.module("centralCustom")}catch(e){}if(t&&n.push("centralCustom"),e[1])try{r=a.module("viewCustom")}catch(e){}return r&&n.push("viewCustom"),a.bootstrap(document.querySelector("primo-explore"),[i.bundle(o.PrimoExploreModule,n).name])})},{"./primoExplore/primoExploreModule":619,angular:"angular","angular-load":14,"bootstrap-app":"bootstrap-app","core-js/client/shim":29,"ng-metadata/core":362,"reflect-metadata":413}],482:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("angular");r.default=n.module("appConfig",[]),e("./appConfig"),e("./iconConfig")},{"./appConfig":483,"./iconConfig":486,angular:"angular"}],483:[function(e,t,r){"use strict";function n(e,t){function r(e){var t=window.appConfig["scopes-context-map"],r=t?t[e]:"L";"B"===r&&(r="L OR C");var n={facet:"off",fq:"scope:("+a+")+AND+context:("+r+")",rows:"6",wt:"json"};return n}function n(){try{return t.findByProperties(t.tables.AUTO_COMPLETE_CONFIG,{target:o})[0].source1}catch(e){return""}}function i(e){return window.appConfig["primo-view"]["auto-complete-enabled-map"][e]||!1}var o=d.getInstitutionCode(),a=n(),s=d.getAutocompleteUrl();return{isEnabled:i,url:s,getDefaultParams:r}}function i(){var e={icon:"lib/material-design-icons/action/svg/production/ic_info_outline_24px.svg",label:"Details",tabContent:"details-pane"},t={icon:"lib/material-design-icons/action/svg/production/ic_explore_24px.svg",label:"Locations",tabContent:"locations-pane"},r=[e,t];return r}function o(){var e=[{link:"custom/img/HVD/harvard1.jpg",type:"default"},{link:"custom/img/HVD/harvard2.jpg",type:"default"},{link:"custom/img/HVD/harvard3.jpg",type:"default"},{link:"custom/img/HVD/harvard4.jpg",type:"default"},{link:"custom/img/HVD/harvard5.jpg",type:"default"},{link:"custom/img/HVD/harvard6.jpg",type:"default"},{link:"custom/img/HVD/harvard7.jpg",type:"default"},{link:"custom/img/HVD/harvard8.jpg",type:"default"},{link:"custom/img/HVD/harvard9.jpg",type:"default"}];return e}function a(){function e(e){var t="default_tab",r=window.appConfig["primo-view"].scopes.filter(function(t){return t["scope-id"]===e});return r&&r.length>0?r[0]["tab-id-for-scope-matching"]||t:t}return{getTab:e}}function s(){return"primo_library/libweb/primoExploreLogin"}Object.defineProperty(r,"__esModule",{value:!0}),window.appConfig=window.appConfig||{};var c=e("angular"),l=e("ng-metadata/core"),u=e("../mappingTablesCache/mappingTablesCache.service"),d=e("./appConfigForward"),t=c.module("appConfig");t.constant("limit","14").constant("loginEndpoint",s()).constant("imagesBarLimit","25").constant("itemTabs",i).constant("imagesBarFillers",o).constant("primoDateFormat","yyyy-MM-dd").constant("displayDateFormat","MM/dd/yyyy").constant("accountListBulkSize","10");var p="/primo_library/libweb/webservices/rest",f={resourceRecommenderUrl:p+"/v1/resourceRecommender",myAccountBaseURL:p+"/v1/myaccount",userSettingsBaseURL:p+"/v1/usersettings",favoritesBaseURL:p+"/v1/favorites",tagsBaseURL:p+"/v1/tags",tagsSearchBaseURL:p+"/v1/tags/searchTags?tagTerm=",pnxBaseURL:p+"/primo-explore/v1/pnxs",pushToBaseURL:p+"/v1/pushto",actionsBaseURL:p+"/v1/actions",opacBaseUrl:p+"/v1/ILSServices/services",openUrl:p+"/v1/openurl",ILSServicesBaseURL:p+"/v1/ILSServices",translationsUrl:p+"/v1/translations",bxUrl:p+"/v1/bx/recId",thumbUrl:p+"/v1/syndetics-thumb",browse:p+"/v1/browse",saveSearchURL:p+"/v1/savedSearches",snippetURL:p+"/v1/snippet",savedQueries:p+"/v1/savedSearches",citationTrails:p+"/v1/citation-trails",citationTrailsSeedsInfo:p+"/v1/citation-trails/seeds-info",timesCited:p+"/timesCited",sourceRecord:p+"/v1/sourceRecord",scopeListBaseURL:p+"/v1/configuration",journalsAutocomplete:p+"/pub/journals/autocomplete",loginJwtCache:p+"/v1/loginJwtCache",showPnxInXmlUrl:p+"/primo-explore/v1/pnxs/xml",rss:"/primo_library/libweb/action/../newRss"};t.constant("restBaseURLs",f),t.factory("autoCompleteConfig",n).factory("configurationService",a),n.$inject=["$stateParams",l.getInjectableName(u.MappingTablesCache)]},{"../mappingTablesCache/mappingTablesCache.service":592,"./appConfigForward":484,angular:"angular","ng-metadata/core":362}],484:[function(e,t,r){"use strict";function n(){var e=window.appConfig.authentication.map(function(e,t,r){return new ie(e["authentication-system"],e["profile-name"],t)});return e}function i(){return window.appConfig.tiles.ResultTileInterface}function o(){return window.appConfig.tiles.FacetTileInterface}function a(){return window.appConfig.tiles.LocationsTileInterface}function s(){return window.appConfig.tiles.MainMenuTileInterface}function c(){return window.appConfig.tiles.ResultFullTileInterface}function l(){return window.appConfig["bx-enable"]}function u(){return window.appConfig["syndeticunbound-enable"]}function d(){return window.appConfig["syndeticunbound-id"]}function p(){return window.appConfig["system-configuration"]}function f(){return window.appConfig["primo-view"].institution["institution-code"]}function h(){return window.appConfig["primo-view"].institution.id}function m(){return window.appConfig.beacon["alternative-institution-code"]}function g(){return window.appConfig["primo-view"].showFindInDbPerTabs}function v(){function e(e){return e["scope-id"]}var t=window.appConfig["primo-view"].scopes.map(e);return re(t)}function y(){return window.appConfig.tiles.SearchTileInterface}function b(){return window.appConfig.queryTerms}function S(e){return window.appConfig["tab-to-tiles"][e]}function _(){return window.appConfig.UIComponents}function w(){return window.appConfig["base-urls"]}function E(){return window.appConfig["primo-view"].scopes}function T(){return v().indexOf("default_scope")!==-1?"default_scope":v()[0]}function O(){return(window.location.href.includes("/jsearch")||window.location.href.includes("/dbsearch")||window.location.href.includes("/collectionDiscovery"))&&"suprima"!==N()?20:parseInt(window.appConfig["system-configuration"]["FE UI – Scrolling Threshold"]||"10")}function I(){return parseInt(window.appConfig["system-configuration"]["Show More (replaces scrolling) Threshold"]||"50")}function P(){return window.appConfig["primo-view"]["attributes-map"]}function R(e){var t=window.appConfig.authentication.filter(function(t){return t["profile-name"]&&e==t["profile-name"]});return t[0]&&t[0]["redirect-only"]?t[0]["redirect-only"]:"false"}function C(e){var t=window.appConfig.authentication.filter(function(t){return t["profile-name"]&&e==t["profile-name"]});return t[0]&&t[0]["authentication-system"]?"SAML"===t[0]["authentication-system"]:"false"}function A(){return{userSessionTimeout:parseInt(window.appConfig["system-configuration"]["Session Timeout"],10),guestSessionTimeout:parseInt(window.appConfig["primo-view"].timeout["guest-ui-timeout"],10),sessionTimeoutURL:P().sessionTimeoutURL,warningTime:120}}function j(){var e={isActiveCapcha:window.appConfig["system-configuration"]["Activate Captcha [Y/N]"],public_key:window.appConfig["system-configuration"]["Public Captcha Key"]};return e}function k(){return window.appConfig.vid}function D(){return window.appConfig["primo-view"]["available-tabs"]}function $(e){var t="default_tab",r=window.appConfig["primo-view"].scopes.filter(function(t){return t["scope-id"]===e});return r&&r.length>0?r[0]["tab-id-for-scope-matching"]||t:t}function M(){if(window.appConfig["mapping-tables"]&&window.appConfig["mapping-tables"].primo_central_institutions_unique_ids[0])return window.appConfig["mapping-tables"].primo_central_institutions_unique_ids[0].source1||""}function x(){return window.location.host.replace(/\:.*/,"")}function F(){return"suprima"===this.getBackendSystem()?window.appConfig["system-configuration"].Alma_Version:window.appConfig["system-configuration"].Primo_Version_Number&&window.appConfig["system-configuration"].Primo_HotFix_Number?window.appConfig["system-configuration"].Primo_Version_Number+"."+window.appConfig["system-configuration"].Primo_HotFix_Number:"4.0.0.0"}function L(){return window.appConfig["system-configuration"].RUM_URL}function U(){return window.appConfig.summon_over_alma}function B(){return window.appConfig.searchWithinJournalConfig}function N(){return window.appConfig.backend_system}function q(){var e=window.appConfig["mapping-tables"]["General Configuration"],t=e.filter(function(e){return"Short_Date_Format"===e.source1});return t[0].target}function H(){return"yyyyMMdd"}function V(){return"suprima"===this.getBackendSystem()?"discovery":"primo-explore"}function Y(){return window.appConfig.searchScopesMap||(window.appConfig.searchScopesMap=ne(E(),"tab")),window.appConfig.searchScopesMap}function z(e){window.appConfig["primo-view"].scopes=e,window.appConfig.searchScopesMap=ne(E(),"tab")}function G(){if("suprima"===this.getBackendSystem())return window.appConfig["system-configuration"].disable_cache}function W(){var e=f(),t=window.appConfig["mapping-tables"]["Institution Base URLs"],r=t.filter(function(t){return t.source1===e&&"api_base"===t.source2});return r.length>0?r[0].target:""}function Q(){return new Set(["iw","he","ar"])}function K(){return"infinite_scroll"}function X(){return Boolean(P().citationTrailsEnabled)}function J(){return window.appConfig["institution-base-url"]}function Z(){return window.appConfig["system-configuration"].Proxy_Server+"syndetics.com/index.php?client="}function ee(){return window.appConfig["system-configuration"].Proxy_Server+"books.google.com/books?bibkeys="}function te(){return window.appConfig["system-configuration"].Auto_Complete_Server_URL+"/solr/ac"}Object.defineProperty(r,"__esModule",{value:!0});var re=e("lodash/uniq"),ne=e("lodash/groupBy");r.DEFAULT_COLOR_CSS="lib/app-colors-b51b6d7583.css";var ie=function(){function e(e,t,r){this._authenticationSystem=e,this._profileName=t,this._index=r}return Object.defineProperty(e.prototype,"profileName",{get:function(){return this._profileName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"authenticationSystem",{get:function(){return this._authenticationSystem},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),e.prototype.isExternal=function(){return"SAML"===this._authenticationSystem||"PDS"===this._authenticationSystem||"CAS"===this._authenticationSystem||"SOCIAL_VIA_ALMA"===this._authenticationSystem?1:0},e.prototype.isSilentLoginSupported=function(){return"SAML"===this._authenticationSystem||"PDS"===this._authenticationSystem||"CAS"===this._authenticationSystem},e}();r.AuthenticationMethod=ie,r.getAuthenticationMethods=n,r.getBriefResultConfiguration=i,r.getFacetConfiguration=o,r.getLocationsConfiguration=a,r.getMainMenuConfiguration=s,r.getFullViewConfiguration=c,r.getBxEnable=l,r.getSyndeticUnboundEnable=u,r.getSyndeticUnboundId=d,r.getSystemConfiguration=p,r.getInstitutionCode=f,r.getInstitutionId=h,r.getBeaconInstitutionCode=m,r.getFindInDbPerTabs=g,r.getScopes=v,r.getSearchConfiguration=y,r.getQueryTerms=b,r.getTabToTiles=S,r.getUIComponents=_,r.getBaseUrls=w,r.getScopeList=E,r.getDefaultScope=T,r.getResultsBulkSize=O,r.getShowMoreThreshold=I,r.getAttributesMap=P,r.isRedirectOnlyForAuthName=R,r.isSaml=C,r.getSessionTimeoutParams=A,r.getCaptcha=j,r.getVid=k,r.getTabs=D,
r.getTab=$,r.getCurrentPCKey=M,r.getCurrentServer=x,r.getCurrentVersionNumber=F,r.getBeaconUrl=L,r.getSummonOverAlma=U,r.getSearchWithinJournalConfig=B,r.getBackendSystem=N,r.getPrimoShortDateFormat=q,r.getIlsDateFormat=H,r.getUrlContext=V,r.getSearchScopesMap=Y,r.updateSearchScopesMap=z,r.getDisableCacheParameters=G,r.getApiBaseUrl=W,r.getRtlLanguages=Q,r.getPagingType=K,r.isCitationTrailsEnabled=X,r.getCitationLinkerBaseURL=J,r.getSyndetixWithProxy=Z,r.getGoogWithProxy=ee,r.getAutocompleteUrl=te},{"lodash/groupBy":256,"lodash/uniq":321}],485:[function(e,t,r){"use strict";function n(){return h||(h=window.appConfig.customization||{}),h}function i(){return n().viewCss}function o(){return n().resourceIcons}function a(){return n().libraryLogo}function s(){return n().libraryLogoClickableURL}function c(){return n().centralCss}function l(){return n().centralJs}function u(){return n().colorCss}function d(){return n().favIcon}function p(){return n().viewJs}function f(){return n().staticHtml}Object.defineProperty(r,"__esModule",{value:!0});var h;r.getViewCss=i,r.getResouceTypeImages=o,r.getLibraryLogo=a,r.getLibraryLogoClickableURL=s,r.getCentralCss=c,r.getCentralJs=l,r.getColorCss=u,r.getFavIcon=d,r.getViewJs=p,r.getStaticHtml=f},{}],486:[function(e,t,r){"use strict";function n(){return i()[0]}function i(){return[{type:"svg",id:"mdIcons",displayName:"Material Icons (Default)",link:"https://www.google.com/design/icons/",sets:[{set:"alert",file:"img/svg/svg-sprite-alert.svg",size:48},{set:"image",file:"img/svg/svg-sprite-image.svg",size:48},{set:"action",file:"img/svg/svg-sprite-action.svg",size:48},{set:"content",file:"img/svg/svg-sprite-content.svg",size:48},{set:"communication",file:"img/svg/svg-sprite-communication.svg",size:48},{set:"editor",file:"img/svg/svg-sprite-editor.svg",size:48},{set:"navigation",file:"img/svg/svg-sprite-navigation.svg",size:48},{set:"content",file:"img/svg/svg-sprite-content.svg",size:48},{set:"av",file:"img/svg/svg-sprite-av.svg",size:48},{set:"file",file:"img/svg/svg-sprite-file.svg",size:48},{set:"hardware",file:"img/svg/svg-sprite-hardware.svg",size:48},{set:"maps",file:"img/svg/svg-sprite-maps.svg",size:48},{set:"notifications",file:"img/svg/svg-sprite-notification.svg",size:48},{set:"primo-ui",file:"img/svg/svg-primo-ui.svg",size:48},{set:"primo-actions",file:"img/svg/svg-primo-actions.svg",size:48},{set:"content",file:"img/svg/svg-sprite-content.svg",size:48},{set:"social",file:"img/svg/svg-sprite-social.svg",size:48}]},{type:"svg",id:"iconics",displayName:"Iconic Open",link:"https://useiconic.com/open",sets:[{set:"iconic",file:"path/to/iconic/svg.file",size:16}]},{type:"font",id:"fontawesome",displayName:"FontAwesome",link:"http://fortawesome.github.io/Font-Awesome/icons/",sets:[{set:"fa",file:"fontawesome",size:""}]}]}function o(){var e={mdIcons:{backToTop:{type:"svg",iconSet:"navigation",icon:"ic_arrow_upward_24px"}}};return e[n().id]}function a(){var e={mdIcons:{arrowRight:{type:"svg",iconSet:"primo-ui",icon:"chevron-right"},externalLink:{type:"svg",iconSet:"primo-ui",icon:"open-in-new"},onlineMaterial:{type:"svg",iconSet:"primo-ui",icon:"link"},physicalMaterial:{type:"svg",iconSet:"primo-ui",icon:"book-open"},helpCircle:{type:"svg",iconSet:"primo-ui",icon:"help-circle-outline"}},fontawesome:{},iconics:{}};return e[n().id]}function s(){var e={mdIcons:{frbrMultipleIcon:{type:"svg",iconSet:"primo-ui",icon:"multiple-items"},frbrMultipleLinkArrow:{type:"svg",iconSet:"primo-ui",icon:"chevron-right"},externaLinkIcon:{type:"svg",iconSet:"primo-ui",icon:"open-in-new"}},fontawesome:{frbrMultipleIcon:{type:"svg",iconSet:"content",icon:"ic_content_copy_24px"}},iconics:{frbrMultipleIcon:{type:"svg",iconSet:"content",icon:"ic_content_copy_24px"}}};return e[n().id]}function c(){var e={mdIcons:{peerreviewed:{type:"svg",iconSet:"primo-ui",icon:"peer-reviewed"},openaccess:{type:"svg",iconSet:"primo-ui",icon:"open-access"}},fontawesome:{frbrMultipleIcon:{type:"svg",iconSet:"content",icon:"ic_content_copy_24px"}},iconics:{frbrMultipleIcon:{type:"svg",iconSet:"content",icon:"ic_content_copy_24px"}}};return e[n().id]}function l(){var e={mdIcons:{expandIcon:{type:"svg",iconSet:"primo-ui",icon:"chevron-down"},goToStartIcon:{type:"svg",iconSet:"primo-ui",icon:"double-chevron-up"},expandAllIcon:{type:"svg",iconSet:"primo-ui",icon:"expand-list"},collapseAllIcon:{type:"svg",iconSet:"primo-ui",icon:"collapse-list"},externalLinkIcon:{type:"svg",iconSet:"primo-ui",icon:"open-in-new"},editIcon:{type:"svg",iconSet:"primo-ui",icon:"pencil"},discardChangesIcon:{type:"svg",iconSet:"primo-ui",icon:"trash"},saveChangesIcon:{type:"svg",iconSet:"primo-ui",icon:"save"},renewLoanIcon:{type:"svg",iconSet:"primo-ui",icon:"restore"},removeIcon:{type:"svg",iconSet:"primo-ui",icon:"close"},timerIcon:{type:"svg",iconSet:"primo-ui",icon:"timer"},fineAlertIcon:{type:"svg",iconSet:"primo-ui",icon:"error"},requestsAlertIcon:{type:"svg",iconSet:"primo-ui",icon:"bell"},messagesAlertIcon:{type:"svg",iconSet:"primo-ui",icon:"flag"},arrowRightIcon:{type:"svg",iconSet:"primo-ui",icon:"chevron-right"},backToSearch:{type:"svg",iconSet:"primo-ui",icon:"back-to-search"},emoticonCool:{type:"svg",iconSet:"primo-ui",icon:"emoticon-cool"},beach:{type:"svg",iconSet:"primo-ui",icon:"beach"},sun:{type:"svg",iconSet:"primo-ui",icon:"sun"},beer:{type:"svg",iconSet:"primo-ui",icon:"beer"}},fontawesome:{firstPromoted:{type:"fa",icon:"fa-quote-left"},secondPromoted:{type:"fa",icon:"fa-envelope-o"},thirdPromoted:{type:"fa",icon:"fa-star"},moreActions:{type:"fa",icon:"fa-ellipsis-h"}},iconics:{firstPromoted:{type:"svg",iconSet:"iconic",icon:"double-quote-sans-left"},secondPromoted:{type:"svg",iconSet:"iconic",icon:"envelope-open"},thirdPromoted:{type:"svg",iconSet:"iconic",icon:"bookmark"},moreActions:{type:"svg",iconSet:"iconic",icon:"ellipses"}}};return e[n().id]}function u(){var e={mdIcons:{firstPromoted:{type:"svg",iconSet:"primo-actions",icon:"citation"},secondPromoted:{type:"svg",iconSet:"primo-actions",icon:"email"},thirdPromoted:{type:"svg",iconSet:"action",icon:"ic_bookmark_outline_24px"},pin:{type:"svg",iconSet:"primo-ui",icon:"prm_pin"},unPin:{type:"svg",iconSet:"primo-ui",icon:"prm_unpin"},citationTrailsIn:{type:"svg",iconSet:"primo-ui",icon:"citedBy"},citationTrailsThis:{type:"svg",iconSet:"primo-ui",icon:"citing"},citationTrailsListLeftBtn:{type:"svg",iconSet:"primo-ui",icon:"LeftArrow"},citationTrailsListRightBtn:{type:"svg",iconSet:"primo-ui",icon:"RightArrow"},moreActions:{type:"svg",iconSet:"navigation",icon:"ic_more_horiz_24px"},closeActions:{type:"svg",iconSet:"primo-ui",icon:"close"},email:{type:"svg",iconSet:"primo-actions",icon:"email"},citations:{type:"svg",iconSet:"primo-actions",icon:"citation"},permalink:{type:"svg",iconSet:"primo-actions",icon:"permalink"},print:{type:"svg",iconSet:"primo-actions",icon:"print"},delicious:{type:"svg",iconSet:"primo-actions",icon:"delicious"},endnote:{type:"svg",iconSet:"primo-actions",icon:"endnote"},easybib:{type:"svg",iconSet:"primo-actions",icon:"easybib"},refworks:{type:"svg",iconSet:"primo-actions",icon:"refworks"},ris:{type:"svg",iconSet:"primo-actions",icon:"ris"},externalLinkIcon:{type:"svg",iconSet:"action",icon:"ic_open_in_new_24px"}},fontawesome:{firstPromoted:{type:"fa",icon:"fa-quote-left"},secondPromoted:{type:"fa",icon:"fa-envelope-o"},thirdPromoted:{type:"fa",icon:"fa-star"},moreActions:{type:"fa",icon:"fa-ellipsis-h"}},iconics:{firstPromoted:{type:"svg",iconSet:"iconic",icon:"double-quote-sans-left"},secondPromoted:{type:"svg",iconSet:"iconic",icon:"envelope-open"},thirdPromoted:{type:"svg",iconSet:"iconic",icon:"bookmark"},moreActions:{type:"svg",iconSet:"iconic",icon:"ellipses"}}};return e[n().id]}function d(){var e={mdIcons:["action:ic_accessibility_24px","action:ic_account_box_24px","action:ic_account_circle_24px","action:ic_account_child_24px","action:ic_alarm_add_24px","action:ic_alarm_on_24px","action:ic_book_24px","action:ic_dashboard_24px","action:ic_description_24px","action:ic_face_24px","action:ic_find_in_page_24px","action:ic_grade_24px","action:ic_https_24px","action:ic_history_24px","ic_input_24px","ic_label_outline_24px","ic_launch_24px","ic_lock_open_24px","ic_loyalty_24px"],fontawesome:["action:ic_accessibility_24px","action:ic_account_box_24px","action:ic_account_circle_24px","action:ic_account_child_24px","action:ic_alarm_add_24px","action:ic_alarm_on_24px","action:ic_book_24px","action:ic_dashboard_24px","action:ic_description_24px","action:ic_face_24px","action:ic_find_in_page_24px","action:ic_grade_24px","action:ic_https_24px","action:ic_history_24px","ic_input_24px","ic_label_outline_24px","ic_launch_24px","ic_lock_open_24px","ic_loyalty_24px"],iconics:["action:ic_accessibility_24px","action:ic_account_box_24px","action:ic_account_circle_24px","action:ic_account_child_24px","action:ic_alarm_add_24px","action:ic_alarm_on_24px","action:ic_book_24px","action:ic_dashboard_24px","action:ic_description_24px","action:ic_face_24px","action:ic_find_in_page_24px","action:ic_grade_24px","action:ic_https_24px","action:ic_history_24px","ic_input_24px","ic_label_outline_24px","ic_launch_24px","ic_lock_open_24px","ic_loyalty_24px"]};return e[n().id]}function p(){var e={mdIcons:{email:{type:"svg",iconSet:"primo-actions",icon:"email"},citations:{type:"svg",iconSet:"primo-actions",icon:"citation"},permalink:{type:"svg",iconSet:"primo-actions",icon:"permalink"},print:{type:"svg",iconSet:"primo-actions",icon:"print"},info:{type:"svg",iconSet:"primo-actions",icon:"info"},delicious:{type:"svg",iconSet:"primo-actions",icon:"delicious"},endnote:{type:"svg",iconSet:"primo-actions",icon:"endnote"},easybib:{type:"svg",iconSet:"primo-actions",icon:"easybib"},refworks:{type:"svg",iconSet:"primo-actions",icon:"refworks"},ris:{type:"svg",iconSet:"primo-actions",icon:"ris"},externalLinkIcon:{type:"svg",iconSet:"action",icon:"ic_open_in_new_24px"}},fontawesome:{email:{type:"fa",icon:"fa-envelope-o"},citations:{type:"fa",icon:"fa-quote-left"},permalink:{type:"fa",icon:"fa-link"},print:{type:"fa",icon:"fa-print"},delicious:{type:"fa",icon:"fa-delicious"},endnote:{type:"fa",icon:"fa-file-o"},easybib:{type:"fa",icon:"fa-book"},refworks:{type:"fa",icon:"fa-file-text-o"},ris:{type:"fa",icon:"fa-share-square-o"}},iconics:{email:{type:"svg",iconSet:"iconic",icon:"envelope-open"},citations:{type:"svg",iconSet:"iconic",icon:"double-quote-sans-left"},permalink:{type:"svg",iconSet:"iconic",icon:"link-intact"},print:{type:"svg",iconSet:"iconic",icon:"print"},delicious:{type:"svg",iconSet:"iconic",icon:"box"},endnote:{type:"svg",iconSet:"iconic",icon:"briefcase"},easybib:{type:"svg",iconSet:"iconic",icon:"book"},refworks:{type:"svg",iconSet:"iconic",icon:"comment-square"},ris:{type:"svg",iconSet:"iconic",icon:"external-link"}}};return e[n().id]}function f(){var e={mdIcons:{user:{type:"svg",iconSet:"action",icon:"ic_supervisor_account_24px"},avatar:{type:"svg",iconSet:"action",icon:"ic_face_24px"},language:{type:"svg",iconSet:"action",icon:"ic_language_24px"},settings:{type:"svg",iconSet:"maps",icon:"ic_local_library_24px"},signin:{type:"svg",iconSet:"primo-ui",icon:"sign-in"},signout:{type:"svg",iconSet:"primo-ui",icon:"sign-out"},searchMode:{type:"svg",iconSet:"primo-ui",icon:"magnifying-glass"},eshelfMode:{type:"svg",iconSet:"primo-ui",icon:"prm_pin"},library:{type:"svg",iconSet:"primo-ui",icon:"account-card-details"},hamburger:{type:"svg",iconSet:"primo-ui",icon:"hamburger"},more:{type:"svg",iconSet:"primo-ui",icon:"dots-horizontal"}},fontawesome:{user:{type:"svg",iconSet:"action",icon:"ic_supervisor_account_24px"},language:{type:"svg",iconSet:"action",icon:"ic_language_24px"},settings:{type:"svg",iconSet:"maps",icon:"ic_local_library_24px"},signout:{type:"svg",iconSet:"primo-ui",icon:"prm-power"},searchMode:{type:"svg",iconSet:"action",icon:"ic_search_24px"},eshelfMode:{type:"svg",iconSet:"primo-ui",icon:"prm_pin"}},iconics:{email:{type:"svg",iconSet:"iconic",icon:"envelope-open"},citations:{type:"svg",iconSet:"iconic",icon:"double-quote-sans-left"},permalink:{type:"svg",iconSet:"iconic",icon:"link-intact"},print:{type:"svg",iconSet:"iconic",icon:"print"}}};return e[n().id]}function h(){var e={mdIcons:{rightArrow:{type:"svg",iconSet:"hardware",icon:"ic_keyboard_arrow_right_24px"},leftArrow:{type:"svg",iconSet:"hardware",icon:"ic_keyboard_arrow_left_24px"},listView:{type:"svg",iconSet:"action",icon:"ic_view_list_24px"},gridView:{type:"svg",iconSet:"action",icon:"ic_view_quilt_24px"}},fontawesome:{email:{type:"fa",icon:"fa-envelope-o"},citations:{type:"fa",icon:"fa-quote-left"},permalink:{type:"fa",icon:"fa-link"},print:{type:"fa",icon:"fa-print"}},iconics:{email:{type:"svg",iconSet:"iconic",icon:"envelope-open"},citations:{type:"svg",iconSet:"iconic",icon:"double-quote-sans-left"},permalink:{type:"svg",iconSet:"iconic",icon:"link-intact"},print:{type:"svg",iconSet:"iconic",icon:"print"}}};return e[n().id]}function m(){var e={mdIcons:{alert:{type:"svg",iconSet:"primo-ui",icon:"bell-outline"},notAlert:{type:"svg",iconSet:"primo-ui",icon:"mdi-bell-off"},rss:{type:"svg",iconSet:"primo-ui",icon:"rss"},unpin:{type:"svg",iconSet:"primo-ui",icon:"pin-off"}}};return e[n().id]}function g(){var e={mdIcons:{gridViewIcon:{type:"svg",iconSet:"action",icon:"ic_view_module_24px"},GalleryViewIcon:{type:"svg",iconSet:"action",icon:"ic_dashboard_24px"},HeaderHomeIcon:{type:"svg",iconSet:"action",icon:"ic_home_24px"}}};return e[n().id]}function v(){var e={mdIcons:{remove:{type:"svg",iconSet:"action",icon:"ic_delete_24px"},alert:{type:"svg",iconSet:"primo-ui",icon:"bell-outline"},notAlert:{type:"svg",iconSet:"primo-ui",icon:"mdi-bell-off"},rss:{type:"svg",iconSet:"primo-ui",icon:"rss"},pin:{type:"svg",iconSet:"primo-ui",icon:"prm_pin"},unpin:{type:"svg",iconSet:"primo-ui",icon:"prm_unpin"},searchHistoryIcon:{type:"svg",iconSet:"primo-ui",icon:"restore"}}};return e[n().id]}function y(){var e={mdIcons:{searchTextBox:{type:"svg",iconSet:"primo-ui",icon:"magnifying-glass"},searchHistoryIcon:{type:"svg",iconSet:"primo-ui",icon:"tag-outline"},toggleListIcon:{type:"svg",iconSet:"primo-ui",icon:"toggle-list"},toggleItemsIcon:{type:"svg",iconSet:"primo-ui",icon:"toggle-items"},editIcon:{type:"svg",iconSet:"primo-ui",icon:"pencil"},remove:{type:"svg",iconSet:"primo-ui",icon:"remove"},persistent:{type:"svg",iconSet:"primo-ui",icon:"persistent"},removePersistent:{type:"svg",iconSet:"primo-ui",icon:"remove-persistent"}}};return e[n().id]}function b(){var e={mdIcons:{rightArrow:{type:"svg",iconSet:"hardware",icon:"ic_keyboard_arrow_right_24px"},leftArrow:{type:"svg",iconSet:"hardware",icon:"ic_keyboard_arrow_left_24px"},expandIcon:{type:"svg",iconSet:"hardware",icon:"ic_keyboard_arrow_down_24px"},expandAllIcon:{type:"svg",iconSet:"primo-ui",icon:"expand-list"},collapseAllIcon:{type:"svg",iconSet:"primo-ui",icon:"collapse-list"},filter:{type:"svg",iconSet:"primo-ui",icon:"filter"},filterOut:{type:"svg",iconSet:"primo-ui",icon:"filterOut"},close:{type:"svg",iconSet:"primo-ui",icon:"close"},externalLinkIcon:{type:"svg",iconSet:"action",icon:"ic_open_in_new_24px"},locate:{type:"svg",iconSet:"maps",icon:"ic_place_24px"},relatedArrow:{type:"svg",iconSet:"primo-ui",icon:"keyboard-return"}},fontawesome:{email:{type:"fa",icon:"fa-envelope-o"},citations:{type:"fa",icon:"fa-quote-left"},permalink:{type:"fa",icon:"fa-link"},print:{type:"fa",icon:"fa-print"}},iconics:{email:{type:"svg",iconSet:"iconic",icon:"envelope-open"},citations:{type:"svg",iconSet:"iconic",icon:"double-quote-sans-left"},permalink:{type:"svg",iconSet:"iconic",icon:"link-intact"},print:{type:"svg",iconSet:"iconic",icon:"print"}}};return e[n().id]}function S(){var e={mdIcons:{addLabelTop:{type:"svg",iconSet:"notifications",icon:"ic_more_24px"},addLabelRecord:{type:"svg",iconSet:"navigation",icon:"ic_more_horiz_24px"},removeLabel:{type:"svg",iconSet:"navigation",icon:"ic_close_24px"},addLabel:{type:"svg",iconSet:"content",icon:"ic_add_24px"},favoriteActionsList:{type:"svg",iconSet:"navigation",icon:"ic_more_horiz_24px"},unPin:{type:"svg",iconSet:"primo-ui",icon:"prm_unpin"},labelChecked:{type:"svg",iconSet:"navigation",icon:"ic_check_24px"}},fontawesome:{email:{type:"fa",icon:"fa-envelope-o"},citations:{type:"fa",icon:"fa-quote-left"},permalink:{type:"fa",icon:"fa-link"},print:{type:"fa",icon:"fa-print"}},iconics:{email:{type:"svg",iconSet:"iconic",icon:"envelope-open"},citations:{type:"svg",iconSet:"iconic",icon:"double-quote-sans-left"},permalink:{type:"svg",iconSet:"iconic",icon:"link-intact"},print:{type:"svg",iconSet:"iconic",icon:"print"}}};return e[n().id]}function _(){var e={mdIcons:{searchTextBox:{type:"svg",iconSet:"primo-ui",icon:"magnifying-glass"},filter:{type:"svg",iconSet:"primo-ui",icon:"filter"},filterClose:{type:"svg",iconSet:"primo-ui",icon:"filterOut"}},fontawesome:{searchTextBox:{type:"fa",icon:"fa-search"},filter:{type:"fa",icon:"fa-search"},filterClose:{type:"fa",icon:"fa-search"}},iconics:{searchTextBox:{type:"svg",iconSet:"iconic",icon:"magnifying-glass"},filter:{type:"svg",iconSet:"iconic",icon:"magnifying-glass"},filterClose:{type:"svg",iconSet:"iconic",icon:"magnifying-glass"}}};return e[n().id]}function w(){var e={mdIcons:{externalLinkIcon:{type:"svg",iconSet:"action",icon:"ic_open_in_new_24px"},backIcon:{type:"svg",iconSet:"navigation",icon:"ic_chevron_left_24px"},errorIcon:{type:"svg",iconSet:"alert",icon:"ic_error_24px"},gotoLinkIcon:{type:"svg",iconSet:"primo-ui",icon:"chevron-right"}}};return e[n().id]}function E(){var e={mdIcons:{authNote:{type:"svg",iconSet:"primo-ui",icon:"auth_note"},publicNote:{type:"svg",iconSet:"primo-ui",icon:"public_note"},lock:{type:"svg",iconSet:"primo-ui",icon:"lock_icon"}}};return e[n().id]}function T(){var e={mdIcons:{crossRef:{type:"svg",iconSet:"hardware",icon:"ic_keyboard_backspace_24px"}}};return e[n().id]}function O(){var e={mdIcons:{excludeFacet:{type:"svg",iconSet:"primo-ui",icon:"exclude-facet"},includeFacet:{type:"svg",iconSet:"primo-ui",icon:"include-facet"}}};return e[n().id]}function I(){var e={mdIcons:{signInToViewPermalimk:{type:"svg",iconSet:"primo-ui",icon:"sign-in-permalink"}}};return e[n().id]}var P=e("angular"),R=P.module("appConfig");R.constant("featuredActionsIcons",u()).constant("scopesIcons",d()).constant("actionIcons",p()).constant("searchBoxIcons",_()).constant("iconSets",i()).constant("selectedIconSet",n()).constant("topBarIcons",f()).constant("collectionIcons",h()).constant("opacLocations",b()).constant("favoritesIcons",S()).constant("accountIcons",l()).constant("searchResultsIcons",s()).constant("availabilityLineIcons",a()).constant("loginIcons",w()).constant("backToTopIcon",o()).constant("savedSearches",m()).constant("searchHistory",v()).constant("viewItIcons",E()).constant("tagsIcons",y()).constant("browseIcons",T()).constant("journalLineIcons",c()).constant("facetsIcons",O()).constant("signInIcon",I()).constant("collectionDiscoveryIcons",g())},{angular:"angular"}],487:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PRODUCTION_MODE=!0},{}],488:[function(e,t,r){"use strict";function n(){return i}Object.defineProperty(r,"__esModule",{value:!0});var i={help:{de_DE:"static/help/help_de_DE-57d0632a15.html",en_US:"static/help/help_en_US-6a26f54883.html",default:"static/help/help_en_US-6a26f54883.html"},homepage:{en_US:"static/homepage/homepage_en_US-c092f808ae.html",default:"static/homepage/homepage_en_US-c092f808ae.html"}};r.getStaticOtbHtml=n},{}],489:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("./blankIll.service"),s=e("../search/fullView/getit/opac/opac.directive"),c=e("../infra/dataStructures/collections/stack/limitedHistoryStack.structure"),l=e("../search/fullView/getit/opac/opac.service"),u=e("../search/fullView/getit/opac/request/request.service"),d=function(){function e(e,t,r){this.requestService=e,this.blankIllService=t,this.opacService=r,this.changeTabEvent=new o.EventEmitter,this.defaultTab=s.OPAC_TAB.REQUEST,this.BACK_HISTORY_SIZE=12,this.backToHistoryStack=new c.LimitedHistoryStack(this.BACK_HISTORY_SIZE),this._selectedTab=this.defaultTab}return e.prototype.getRequestIsLoading=function(){return this.requestService.requestIsLoading},e.prototype.onChangeTabEvent=function(e){var t=e;null===e?this.selectedTab=this.backToHistoryStack.pop()||this.defaultTab:(void 0!==t.referer&&this.backToHistoryStack.push(t.referer),t.service&&(this.service=t.service),this.selectedTab=t.dest)},Object.defineProperty(e.prototype,"selectedTab",{get:function(){return this._selectedTab},set:function(e){this._selectedTab=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"responseStatus",{get:function(){return this.opacService.responseStatus},enumerable:!0,configurable:!0}),e}();n([o.Output(),i("design:type",o.EventEmitter)],d.prototype,"changeTabEvent",void 0),d=n([o.Component({selector:"prm-blank-ill",templateUrl:"components/blankIll/blank-ill.html"}),i("design:paramtypes",[u.RequestService,a.BlankIllService,l.OpacService])],d),r.PrmBlankIll=d},{"../infra/dataStructures/collections/stack/limitedHistoryStack.structure":537,"../search/fullView/getit/opac/opac.directive":725,"../search/fullView/getit/opac/opac.service":727,"../search/fullView/getit/opac/request/request.service":730,"./blankIll.service":491,"ng-metadata/core":362}],490:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=(e("angular-material"),e("./blankIll.directive")),a=e("./blankIll.service"),s=e("../search/fullView/getit/opac/request/opacRequest.module"),c=function(){function e(){}return e}();c=n([i.NgModule({declarations:[o.PrmBlankIll],providers:[a.BlankIllService],imports:[s.OpacRequestModule]})],c),r.BlankIllModule=c},{"../search/fullView/getit/opac/request/opacRequest.module":728,"./blankIll.directive":489,"./blankIll.service":491,"angular-material":17,"ng-metadata/core":362}],491:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=function(){function e(){}return e}();o=n([i.Injectable()],o),r.BlankIllService=o},{"ng-metadata/core":362}],492:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./citationLinker.service"),c=e("../mappingTablesCache/mappingTablesCache.service"),l=e("../infra/formBuilder/formBuilder.service"),u=e("../appConfig/appConfigForward"),d=e("../appConfig/appConfigForward"),p=e("../analytics/primolytics.service"),f=e("ng-metadata/core"),h=e("../appConfig/appConfigForward"),m=e("../nddUtils/configurationUtil.service"),g=e("../infra/mediaQueries.service"),v=(e("lodash/sortBy"),e("lodash/has")),y=e("lodash/indexOf"),b=(e("lodash/includes"),e("lodash/intersection")),S=function(){function e(e,t,r,n,i,o){this.citationLinkerService=e,this.mappingTablesCache=t,this.primolyticsService=r,this.$sce=n,this.configurationUtil=i,this.mediaQueries=o,this.tabs=[_.ARTICLE,_.BOOK,_.JOURNAL],this.activeTab=_.ARTICLE,this.vid=u.getVid(),this.baseURL=d.getCitationLinkerBaseURL(),this.institution_code=h.getInstitutionCode(),this.journalTitleDropdown=["contains","exact","startswith"],this.openURLFields={},this.formData={},this.articleMappingFields=[["atitle","jtitle"],["date"],["volume","issue"],["spage","epage"],["issn","doi","pmid"],["aulast","aufirst","auinit"],["publisher","pubdate"]],this.bookMappingFields=[["btitle"],["date"],["volume","part"],["isbn"],["aulast","aufirst","auinit"],["publisher","pubdate"]],this.journalMappingFields=[["jtitle"],["date"],["volume","issue"],["issn","doi"]],this.sortedOpenURLFields=this.initOpenURLFields(_.ARTICLE,this.articleMappingFields),this.initTitleSearch(),this.callBeacon()}return e.prototype.detectMobile=function(){return!(!this.mediaQueries.xs&&!this.mediaQueries.sm)},e.prototype.callBeacon=function(){},e.prototype.initTitleSearch=function(){this.isSfx()?this.titleSearch="contains":this.titleSearch="exact"},e.prototype.initOpenURLFields=function(e,t){var r,n,i=this.mappingTablesCache.findByProperties("Citation Linker Definitions",{target:"Yes",source3:this.vid,source1:e});return 0===i.length&&(i=this.mappingTablesCache.findByProperties("Citation Linker Definitions",{target:"Yes",source3:"default",source1:e})),i.length>0&&(n=i.map(function(e){return e.source2}),r=t.map(function(e){return b(e,n)}),r=r.map(function(e){return e.map(function(e){return{name:"rft."+e,label:"date"===e?"nui.citationLinker."+e:"citationLinker."+e,uiType:"date"===e?l.FormBuilderEnums.UI_TYPE.DATE_DROPDOWN:l.FormBuilderEnums.UI_TYPE.TEXT}})}),this.isJtitle=this.isParamInDisplay(n,"jtitle"),this.isDoi=this.isParamInDisplay(n,"doi"),this.isPmid=this.isParamInDisplay(n,"pmid"),this.isDate=this.isParamInDisplay(n,"date")),r},e.prototype.isParamInDisplay=function(e,t){return y(e,t)!==-1},e.prototype.changeTab=function(){var e;this.activeTab===_.ARTICLE?e=this.articleMappingFields:this.activeTab===_.BOOK?e=this.bookMappingFields:this.activeTab===_.JOURNAL&&(e=this.journalMappingFields),this.sortedOpenURLFields=this.initOpenURLFields(this.activeTab,e),this.clearForm()},e.prototype.clearForm=function(){this.formData={},this.initTitleSearch()},e.prototype.isSfx=function(){return"ALMA_OPENURL"!==this.baseURL},e.prototype.getBaseURL=function(){return this.configurationUtil.isSuprima()?"/discovery/openurl":"ALMA_OPENURL"===this.baseURL?"/openurl/"+this.institution_code+"/"+this.vid:this.$sce.trustAsResourceUrl(this.baseURL)},e.prototype.getTitleSearch=function(){return"startswith"===this.titleSearch?"begins":this.titleSearch},e.prototype.isOpenURLFieldFilled=function(e){return!!(v(this.formData,e)&&this.formData[e].length>0)},e.prototype.calcDate=function(){var e="";return this.formData.hasOwnProperty("rft.date")&&this.formData["rft.date"].year&&(e=this.formData["rft.date"].year,this.formData["rft.date"].month&&(e=e+"-"+this.formData["rft.date"].month,this.formData["rft.date"].day&&(e=e+"-"+this.formData["rft.date"].day))),e},e.prototype.isSuprima=function(){return this.configurationUtil.isSuprima()},Object.defineProperty(e.prototype,"viewCode",{get:function(){return this.vid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"institutionCode",{get:function(){return this.institution_code},enumerable:!0,configurable:!0}),e}();n([p.beacon({p:"citation-linker",op:"citationLinkerClick"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],S.prototype,"callBeacon",null),S=n([a.Component({selector:"prm-citation-linker",templateUrl:"components/citationLinker/citation-linker.html"}),o(3,f.Inject("$sce")),i("design:paramtypes",[s.CitationLinkerService,c.MappingTablesCache,p.PrimolyticsService,Object,m.ConfigurationUtil,g.MediaQueries])],S),r.PrmCitationLinker=S;var _;!function(e){e[e.ARTICLE="article"]="ARTICLE",e[e.BOOK="book"]="BOOK",e[e.JOURNAL="journal"]="JOURNAL"}(_||(_={}))},{"../analytics/primolytics.service":480,"../appConfig/appConfigForward":484,"../infra/formBuilder/formBuilder.service":553,"../infra/mediaQueries.service":562,"../mappingTablesCache/mappingTablesCache.service":592,"../nddUtils/configurationUtil.service":596,"./citationLinker.service":494,"lodash/has":257,"lodash/includes":260,"lodash/indexOf":261,"lodash/intersection":262,"lodash/sortBy":304,"ng-metadata/core":362}],493:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./citationLinker.directive"),a=e("./citationLinker.service"),s=e("../infra/formBuilder/field/formField.directive"),c=function(){function e(){}return e}();c=n([i.NgModule({declarations:[o.PrmCitationLinker,s.PrmFormField],providers:[a.CitationLinkerService],imports:[]})],c),r.CitationLinkerModule=c},{"../infra/formBuilder/field/formField.directive":549,"./citationLinker.directive":492,"./citationLinker.service":494,"ng-metadata/core":362}],494:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=function(){function e(){}return e}();o=n([i.Injectable()],o),r.CitationLinkerService=o},{"ng-metadata/core":362}],495:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../nddUtils/endlessScollingUtil.service"),c=e("he"),l=function(){function e(e,t,r){this.$timeout=e,this.clipboard=t,this.endlessScrollingUtil=r,this.copySuccessful=!1,this.scrollContainer=this.getScrollContainer()}return e.prototype.ngOnInit=function(){this.DISPLAY_TEXT="nui."+this.action+".button",this.SAFARI_DISPLAY_TEXT=this.getSelectButtonText(),this.COPIED_TEXT="nui."+this.action+".message.success",this.SAFARI_COPIED_TEXT="nui."+this.action+".copy.message",this.FAILURE_TEXT="nui."+this.action+".message.failed",this.buttonText=this.isSupported?this.DISPLAY_TEXT:this.SAFARI_DISPLAY_TEXT},e.prototype.clipboardSuccess=function(){this.displayTemporaryText(this.isSupported?this.COPIED_TEXT:this.SAFARI_COPIED_TEXT),this.copySuccessful=!0,this.scrollContainer.scrollTop=this.offset,this.endlessScrollingUtil.enableSearchEndlessScrolling()},e.prototype.clipboardFailure=function(e){this.displayTemporaryText(this.FAILURE_TEXT),
console.error("Clipborad error!",e),this.scrollContainer.scrollTop=this.offset,this.endlessScrollingUtil.enableSearchEndlessScrolling()},e.prototype.displayTemporaryText=function(e){var t=this;this.buttonText=e,this.$timeout(function(){t.buttonText=t.isSupported?t.DISPLAY_TEXT:t.SAFARI_DISPLAY_TEXT,t.copySuccessful=!1},4e3)},e.prototype.getSelectButtonText=function(){return"permalink"==this.action?"nui.permalink.button.selecturl":"citation.labels.selecttext"},Object.defineProperty(e.prototype,"textToCopy",{get:function(){return c.decode(this.text||"")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSupported",{get:function(){var e=window;return!(Object.prototype.toString.call(e.HTMLElement).indexOf("Constructor")>0)},enumerable:!0,configurable:!0}),e.prototype.saveOffset=function(){this.endlessScrollingUtil.disableSearchEndlessScrolling(),this.offset=this.scrollContainer.scrollTop},e.prototype.getScrollContainer=function(){var e=document,t=!!e.documentMode,r=window;return r.chrome&&r.chrome.webstore||Object.prototype.toString.call(r.HTMLElement).indexOf("Constructor")>0||!t&&r.StyleMedia?document.body:document.body.parentNode},e}();n([a.Input(),i("design:type",String)],l.prototype,"text",void 0),n([a.Input(),i("design:type",String)],l.prototype,"action",void 0),l=n([a.Component({directives:[],selector:"prm-copy-clipboard-btn",templateUrl:"components/clipboard/copy-clipboard-btn.html"}),o(0,a.Inject("$timeout")),o(1,a.Inject("clipboard")),i("design:paramtypes",[Function,Object,s.EndlessScrollingUtil])],l),r.PrmCopyClipboardBtn=l},{"../nddUtils/endlessScollingUtil.service":598,he:32,"ng-metadata/core":362}],496:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./collectionDiscovery.service"),c=e("../appConfig/appConfigForward"),l=e("lodash/get"),u=function(){function e(e,t){var r=this;this.collectionDiscoveryService=e,this.$stateParams=t,this.collectionId=t.collectionId,this.institution=t.inst||c.getInstitutionCode(),this.currentCollection=t.currentCollection,this.currentCollectionItems=t.items,this.path=t.path,t.currentCollection=void 0,t.path=void 0,this.currentCollection||(this.collectionId?(this.isGalleryLobby=!1,this.collectionDiscoveryService.getSubColWithPath(this.collectionId,this.institution).then(function(e){r.currentCollection=e.value,r.path=e.path})):(this.isGalleryLobby=!0,this.collectionDiscoveryService.getCollection(this.institution).then(function(e){r.currentCollection={collections:{collection:e}},r.path=[]}))),this.collectionId&&this.collectionDiscoveryService.getCollectionRecordByCId(this.collectionId,this.institution).then(function(e){r.currentCollectionRecord=e})}return Object.defineProperty(e.prototype,"collections",{get:function(){return l(this.currentCollection,"collections.collection",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this.currentCollectionItems},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e}();u=n([a.Component({selector:"prm-collection-discovery",templateUrl:"components/collectionDiscovery/collection-discovery.html"}),o(1,a.Inject("$stateParams")),i("design:paramtypes",[s.CollectionDiscoveryService,Object])],u),r.PrmCollectionDiscovery=u},{"../appConfig/appConfigForward":484,"./collectionDiscovery.service":498,"lodash/get":255,"ng-metadata/core":362}],497:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./collectionDiscovery.directive"),a=e("./collectionGallery/collectionGallery.directive"),s=e("./collectionGalleryHeader/collectionGalleryHeader.directive"),c=e("./collectionGallery/galleryCollectionsList/galleryCollectionsList.directive"),l=e("./collectionGallery/galleryItemsList/galleryItemsList.directive"),u=e("./collectionGallery/galleryCollectionsList/galleryCollection/galleryCollection.directive"),d=e("./collectionGallery/galleryItemsList/galleryItem/galleryItem.directive"),p=e("./collectionDiscovery.service"),f=e("./collectionNavigationBreadcrumbs/collectionNavigationBreadcrumbs.directive"),h=e("./collectionNavigationBreadcrumbs/collectionNavigationBreadcrumbsItem/collectionNavigationBreadcrumbsItem.directive"),m=e("./collectionGallery/collectionDiscoveryViewSwitcher/collectionDiscoveryViewSwitcher.directive"),g=e("./recordCollectionPaths/recordCollectionPaths.directive"),v=(e("angular-deckgrid"),function(){function e(){}return e}());v=n([i.NgModule({declarations:[o.PrmCollectionDiscovery,a.PrmCollectionGallery,s.PrmCollectionGalleryHeader,c.PrmGalleryCollectionsList,l.PrmGalleryItemsList,u.PrmGalleryCollection,d.PrmGalleryItem,f.PrmCollectionNavigationBreadcrumbs,h.PrmCollectionNavigationBreadcrumbsItem,m.PrmCollectionDiscoveryViewSwitcher,g.PrmRecordCollectionPaths],providers:[p.CollectionDiscoveryService],imports:["akoenig.deckgrid"]})],v),r.CollectionDiscoveryModule=v},{"./collectionDiscovery.directive":496,"./collectionDiscovery.service":498,"./collectionGallery/collectionDiscoveryViewSwitcher/collectionDiscoveryViewSwitcher.directive":499,"./collectionGallery/collectionGallery.directive":500,"./collectionGallery/galleryCollectionsList/galleryCollection/galleryCollection.directive":501,"./collectionGallery/galleryCollectionsList/galleryCollectionsList.directive":502,"./collectionGallery/galleryItemsList/galleryItem/galleryItem.directive":503,"./collectionGallery/galleryItemsList/galleryItemsList.directive":504,"./collectionGalleryHeader/collectionGalleryHeader.directive":505,"./collectionNavigationBreadcrumbs/collectionNavigationBreadcrumbs.directive":506,"./collectionNavigationBreadcrumbs/collectionNavigationBreadcrumbsItem/collectionNavigationBreadcrumbsItem.directive":507,"./recordCollectionPaths/recordCollectionPaths.directive":508,"angular-deckgrid":8,"ng-metadata/core":362}],498:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../appConfig/appConfigForward"),c=e("../search/cheetah.service"),l=e("../mappingTablesCache/mappingTablesCache.service"),u=e("lodash/get"),d=e("lodash/find"),p=function(){function e(e,t,r,n,i,o){this.$http=e,this.$stateParams=r,this.$q=n,this.cheetah=i,this.mappingTablesCache=o,this.collectionTreePromiseMap={},this.sourceCodeIdPromiseMap={},this.$http=e,this.restIlsUrl=t.myAccountBaseURL+"/collection",this._itemsViewStyle="grid",this._isCollectionDiscoverySpecificDisplay=this.mappingTablesCache.findByProperties("Collection Discovery Configuration",{source1:"Use Collection-specific display",target:"Yes"}).length>0}return e.prototype.getCollectionTreePromise=function(e){var t=e||s.getInstitutionCode();return this.collectionTreePromiseMap[t]},e.prototype.getBreadcrumbs=function(){return this.breadcrumbs},e.prototype.getCollection=function(e){var t=e||s.getInstitutionCode();if(this.collectionTreePromiseMap[t])return this.collectionTreePromiseMap[t];var r={inst:t,name:"get_collections",lang:"eng",userInst:s.getInstitutionCode(),ilsgEntityParams:"primo_user_institution,"+s.getInstitutionCode()+";ils_user_institution,"+t,useCache:!0},n=this.$http.get(this.restIlsUrl,{params:r}).then(function(e){return u(e,"data.data.collection",void 0)});return this.collectionTreePromiseMap[t]=n,n},e.prototype.getSubColWithPath=function(e,t){var r=this;return this.$q(function(n,i){r.getCollection(t).then(function(t){e&&n(r.searchCollectionTree(t,e,{value:0,path:[],level:0},0))})})},e.prototype.getSubColThatHasItems=function(e){var t=this;return this.$q(function(r,n){t.getCollection(e).then(function(e){r(t.searchCollectionTree(e,void 0,{value:0,path:[],level:0},0,!0))})})},e.prototype.searchCollectionTree=function(e,t,r,n,i){if(void 0===e.length){if(i&&"Y"===e.items||!i&&e.pid.value===t)return r.value=e,r;r.path.push({name:e.name,pid:e.pid.value,level:n}),e=e.collections?e.collections.collection:e}if(void 0!==e.length)for(var o=++r.level,a=0;a<e.length;a++){var s=this.searchCollectionTree(e[a],t,r,o,i);if(void 0!==s&&void 0!==s.value||(r.path=r.path.filter(function(e){return e.level<r.level}),r.level=a+1===e.length?r.level-1:r.level),void 0!==s)return r.value=s.value,r}},e.prototype.getItemsForCollection=function(e,t,r,n){var i=t||s.getInstitutionCode(),o={query:"cdparentid,exact,"+e,scope:"browse_search",offset:0|r,bulkSize:n||s.getResultsBulkSize(),overrideViewInstitution:i};return this.cheetah.performSearch(o)},e.prototype.getDataFromCollectionRecord=function(e){var t=u(e,"pnx.control.colldiscovery");if(t)return t.map(function(e){var t;if(e){t={};for(var r=e.split("$$"),n=0,i=r;n<i.length;n++){var o=i[n],a=o.substring(1);switch(o.charAt(0)){case"T":t.type=a.toUpperCase();break;case"D":t.collectionId=a;break;case"I":t.institution=a}}}return t})},e.prototype.getSourceCodeIdByItems=function(e){var t=this,r=e||s.getInstitutionCode();if(this.sourceCodeIdPromiseMap[r])return this.sourceCodeIdPromiseMap[r];var n=this.$q(function(e,n){t.getSubColThatHasItems(r).then(function(n){t.getItemsForCollection(n.value.pid.value,r,0,1).then(function(t){var r=u(t,"data.docs"),n=u(r,"[0].pnx.control.sourceid[0]");e(n)})})});return this.sourceCodeIdPromiseMap[r]=n,n},e.prototype.getCollectionRecordByCId=function(e,t){var r=this,n=t||s.getInstitutionCode();return this.$q(function(t,i){r.getSourceCodeIdByItems(n).then(function(i){r.getRecordByDocId(i+e,n).then(function(e){t(e)})})})},e.prototype.getRecordByDocId=function(e,t){var r=t||s.getInstitutionCode(),n={query:"any,exact,"+e,scope:"browse_search",overrideViewInstitution:r};return this.cheetah.performSearch(n).then(function(e){return u(e,"data.docs[0]")})},e.prototype.getThumbnailFromItem=function(e){var t=u(e,"delivery.link",[]),r=d(t,function(e){return e.linkType.indexOf("thumbnail")>-1&&e.linkURL});return u(r,"linkURL")},Object.defineProperty(e.prototype,"itemsViewStyle",{get:function(){return this._itemsViewStyle},set:function(e){this._itemsViewStyle=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCollectionDiscoverySpecificDisplay",{get:function(){return this._isCollectionDiscoverySpecificDisplay},enumerable:!0,configurable:!0}),e}();p=n([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),o(2,a.Inject("$stateParams")),o(3,a.Inject("$q")),i("design:paramtypes",[Function,Object,Object,Function,c.Cheetah,l.MappingTablesCache])],p),r.CollectionDiscoveryService=p},{"../appConfig/appConfigForward":484,"../mappingTablesCache/mappingTablesCache.service":592,"../search/cheetah.service":661,"lodash/find":247,"lodash/get":255,"ng-metadata/core":362}],499:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../collectionDiscovery.service"),c=function(){function e(e,t){this.collectionDiscoveryService=e,this.collectionDiscoveryIcons=t}return e.prototype.ngOnInit=function(){},e.prototype.setResultsViewStyle=function(e){this.collectionDiscoveryService.itemsViewStyle=e},Object.defineProperty(e.prototype,"resultsViewStyle",{get:function(){return this.collectionDiscoveryService.itemsViewStyle},enumerable:!0,configurable:!0}),e}();c=n([a.Component({selector:"prm-collection-discovery-view-switcher",templateUrl:"components/collectionDiscovery/collectionGallery/collectionDiscoveryViewSwitcher/collection-discovery-view-switcher.html"}),o(1,a.Inject("collectionDiscoveryIcons")),i("design:paramtypes",[s.CollectionDiscoveryService,Object])],c),r.PrmCollectionDiscoveryViewSwitcher=c},{"../../collectionDiscovery.service":498,"ng-metadata/core":362}],500:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../infra/mediaQueries.service"),c=e("lodash/get"),l=function(){function e(e,t){this.mediaQueries=e,this.collectionDiscoveryIcons=t}return e.prototype.ngOnInit=function(){},Object.defineProperty(e.prototype,"collections",{get:function(){return c(this.currentCollection,"collections.collection",void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this.currentCollectionItems},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextPath",{get:function(){if(this.path&&!this._nextPath)if(this.currentCollection.pid){var e=this.path.length>0?this.path[this.path.length-1].level+1:1;this._nextPath=this.path.concat({level:e,name:this.currentCollection.name||this.currentCollection.title,pid:this.currentCollection.pid.value})}else this._nextPath=[];return this._nextPath},enumerable:!0,configurable:!0}),e}();n([a.Input(),i("design:type",Object)],l.prototype,"currentCollection",void 0),n([a.Input(),i("design:type",Array)],l.prototype,"path",void 0),n([a.Input(),i("design:type",Boolean)],l.prototype,"isGalleryLobby",void 0),l=n([a.Component({selector:"prm-collection-gallery",templateUrl:"components/collectionDiscovery/collectionGallery/collection-gallery.html"}),o(1,a.Inject("collectionDiscoveryIcons")),i("design:paramtypes",[s.MediaQueries,Object])],l),r.PrmCollectionGallery=l},{"../../infra/mediaQueries.service":562,"lodash/get":255,"ng-metadata/core":362}],501:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../collectionDiscovery.service"),c=e("../../../../primoExplore/primoExploreStates.module"),l=e("../../../../appConfig/appConfigForward"),u=e("lodash/get"),d=function(){function e(e,t,r,n){var i=this;this.collectionDiscoveryService=e,this.$stateParams=t,this.$element=r,this.$scope=n,this.COLLECTION_DISCOVERY_STATE=c.STATE_NAMES.COLLECTION_DISCOVERY,this.$element.on("focusin",function(e){i.$scope.$apply(function(){i.showFolderInfo=!0})}),this.$element.on("focusout",function(e){i.$scope.$apply(function(){i.showFolderInfo=!1})}),this.getRecordFunction=function(e){return i.collectionDiscoveryService.getRecordByDocId(e,i.institutionCode)}}return e.prototype.ngOnInit=function(){var e=this;this.institutionCode=this.$stateParams.inst||l.getInstitutionCode(),this.collectionDiscoveryService.getSourceCodeIdByItems(this.institutionCode).then(function(t){e.collectionRecordId=t+e.collection.pid.value}),this._thumbnails=[this.collection.thumbnail],this.setThumbnailsFromCollection(),"Y"===this.collection.items&&this.collectionDiscoveryService.getItemsForCollection(this.collection.pid.value,this.institutionCode).then(function(t){e.data=t,e.items=u(t,"data.docs");for(var r=0,n=e.items.slice(0,4-e._thumbnails.length);r<n.length;r++){var i=n[r];e._thumbnails.push(e.collectionDiscoveryService.getThumbnailFromItem(i))}})},e.prototype.setThumbnailsFromCollection=function(){this._thumbnails=[this.collection.thumbnail];for(var e=u(this.collection,"collections.collection",[]),t=0,r=e.slice(0,3);t<r.length;t++){var n=r[t];this._thumbnails.push(n.thumbnail)}},Object.defineProperty(e.prototype,"title",{get:function(){return this.collection.name||this.collection.title},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return this.collection.description},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return u(this.collection,"collections.collection.length",0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collectionStateParams",{get:function(){return{collectionId:this.collection.pid.value,currentCollection:this.collection,path:this.nextPath,items:this.data}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thumbnails",{get:function(){return this._thumbnails},enumerable:!0,configurable:!0}),e}();n([a.Input(),i("design:type",Object)],d.prototype,"collection",void 0),n([a.Input(),i("design:type",Array)],d.prototype,"nextPath",void 0),n([a.Input(),i("design:type",Number)],d.prototype,"index",void 0),n([a.Input(),i("design:type",Number)],d.prototype,"totalCollections",void 0),n([a.Input(),i("design:type",Boolean)],d.prototype,"isGalleryLobby",void 0),d=n([a.Component({selector:"prm-gallery-collection",templateUrl:"components/collectionDiscovery/collectionGallery/galleryCollectionsList/galleryCollection/gallery-collection.html"}),o(1,a.Inject("$stateParams")),o(2,a.Inject("$element")),o(3,a.Inject("$scope")),i("design:paramtypes",[s.CollectionDiscoveryService,Object,Object,Object])],d),r.PrmGalleryCollection=d},{"../../../../appConfig/appConfigForward":484,"../../../../primoExplore/primoExploreStates.module":620,"../../../collectionDiscovery.service":498,"lodash/get":255,"ng-metadata/core":362}],502:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("../../../infra/browserSniffer"),s=function(){function e(){this._isIE=a.isBrowserIE(),this.allCollections=[];var e={title:"collection1",description:"this is a line of the description",count:12},t={title:"collection2",description:"this is a line of the description",count:5};this.allCollections.push(e),this.allCollections.push(t)}return e.prototype.ngOnInit=function(){},Object.defineProperty(e.prototype,"isIE",{get:function(){return this._isIE},enumerable:!0,configurable:!0}),e}();n([o.Input(),i("design:type",Array)],s.prototype,"collections",void 0),n([o.Input(),i("design:type",Array)],s.prototype,"nextPath",void 0),n([o.Input(),i("design:type",Boolean)],s.prototype,"isGalleryLobby",void 0),s=n([o.Component({selector:"prm-gallery-collections-list",templateUrl:"components/collectionDiscovery/collectionGallery/galleryCollectionsList/gallery-collections-list.html"}),i("design:paramtypes",[])],s),r.PrmGalleryCollectionsList=s},{"../../../infra/browserSniffer":534,"ng-metadata/core":362}],503:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../../search/fullView/fullViewDialog.service"),c=e("../../../collectionDiscovery.service"),l=e("lodash/get"),u=function(){function e(e,t,r,n){var i=this;this.collectionDiscoveryService=e,this.fullViewDialogService=t,this.$element=r,this.$scope=n,this.$element.on("focusin",function(e){i.$scope.$apply(function(){i.itemInFocus=!0})}),this.$element.on("focusout",function(e){i.$scope.$apply(function(){i.itemInFocus=!1})})}return e.prototype.ngOnInit=function(){this._thumbnail=this.collectionDiscoveryService.getThumbnailFromItem(this.item)},e.prototype.openFullViewDialog=function(e){this.fullViewDialogService.openFullViewDialog(this.item,e,"collectionDiscovery")},Object.defineProperty(e.prototype,"title",{get:function(){return l(this.item,"pnx.display.title[0]")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return l(this.item,"pnx.display.type[0]")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemsViewStyle",{get:function(){return this.collectionDiscoveryService.itemsViewStyle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thumbnail",{get:function(){return this._thumbnail},enumerable:!0,configurable:!0}),e}();n([a.Input(),i("design:type",Object)],u.prototype,"item",void 0),n([a.Input(),i("design:type",Number)],u.prototype,"index",void 0),n([a.Input(),i("design:type",Number)],u.prototype,"totalItems",void 0),u=n([a.Component({selector:"prm-gallery-item",templateUrl:"components/collectionDiscovery/collectionGallery/galleryItemsList/galleryItem/gallery-item.html"}),o(2,a.Inject("$element")),o(3,a.Inject("$scope")),i("design:paramtypes",[c.CollectionDiscoveryService,s.FullViewDialogService,Object,Object])],u),r.PrmGalleryItem=u},{"../../../../search/fullView/fullViewDialog.service":690,"../../../collectionDiscovery.service":498,"lodash/get":255,"ng-metadata/core":362}],504:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../collectionDiscovery.service"),c=e("../../../appConfig/appConfigForward"),l=e("lodash/get"),u=function(){function e(e,t){var r=this;this.collectionDiscoveryService=e,this.$stateParams=t,this.collectionId=t.collectionId,this.institution=t.inst||c.getInstitutionCode();var n=t.items;t.items=void 0,!n&&this.collectionId?(this.collectionDiscoveryService.searchInProgress=!0,this.collectionDiscoveryService.getItemsForCollection(this.collectionId,this.institution).then(function(e){r.setResultFields(e),r.collectionDiscoveryService.searchInProgress=!1})):n&&this.setResultFields(n)}return e.prototype.setResultFields=function(e){this.items=l(e,"data.docs"),this.nextOffset=this.items.length,this.totalItems=l(e,"data.info.total")},e.prototype.ngOnInit=function(){},e.prototype.getMoreResults=function(){var e=this;this.collectionDiscoveryService.searchInProgress=!0,this.collectionDiscoveryService.getItemsForCollection(this.collectionId,this.institution,this.nextOffset).then(function(t){Array.prototype.push.apply(e.items,l(t,"data.docs")),e.nextOffset=e.items.length,e.totalItems=l(t,"data.info.total"),e.collectionDiscoveryService.searchInProgress=!1})},Object.defineProperty(e.prototype,"itemsList",{get:function(){return this.items},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemsViewStyle",{get:function(){return this.collectionDiscoveryService.itemsViewStyle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasNextResults",{get:function(){return this.totalItems>this.itemsList.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchInProgress",{get:function(){return this.collectionDiscoveryService.searchInProgress},enumerable:!0,configurable:!0}),e}();u=n([a.Component({selector:"prm-gallery-items-list",templateUrl:"components/collectionDiscovery/collectionGallery/galleryItemsList/gallery-items-list.html"}),o(1,a.Inject("$stateParams")),i("design:paramtypes",[s.CollectionDiscoveryService,Object])],u),r.PrmGalleryItemsList=u},{"../../../appConfig/appConfigForward":484,"../../collectionDiscovery.service":498,"lodash/get":255,"ng-metadata/core":362}],505:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("lodash/get"),c=function(){function e(e){var t=this;this.$translate=e,this.$translate("nui.colldiscovery.lobby.toptitle").then(function(e){t.galleryLobbyTitle=e}),this.$translate("nui.colldiscovery.lobby.description").then(function(e){t.galleryLobbyDescription=e})}return e.prototype.ngOnInit=function(){},Object.defineProperty(e.prototype,"title",{get:function(){return this.isGalleryLobby?this.galleryLobbyTitle:s(this.currentCollection,"title")||s(this.currentCollection,"name")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return this.isGalleryLobby?this.galleryLobbyDescription:s(this.currentCollection,"description")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thumbnailUrl",{get:function(){return s(this.currentCollection,"thumbnail")},enumerable:!0,configurable:!0}),e}();n([a.Input(),i("design:type",Object)],c.prototype,"currentCollection",void 0),n([a.Input(),i("design:type",Object)],c.prototype,"currentCollectionRecord",void 0),n([a.Input(),i("design:type",Array)],c.prototype,"path",void 0),n([a.Input(),i("design:type",Boolean)],c.prototype,"isGalleryLobby",void 0),c=n([a.Component({selector:"prm-collection-gallery-header",templateUrl:"components/collectionDiscovery/collectionGalleryHeader/collection-gallery-header.html"}),o(0,a.Inject("$translate")),i("design:paramtypes",[Object])],c),r.PrmCollectionGalleryHeader=c},{"lodash/get":255,"ng-metadata/core":362}],506:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=function(){function e(){}return e.prototype.ngOnInit=function(){},e}();n([o.Input(),i("design:type",Array)],a.prototype,"path",void 0),n([o.Input(),i("design:type",String)],a.prototype,"institution",void 0),a=n([o.Component({selector:"prm-collection-navigation-breadcrumbs",templateUrl:"components/collectionDiscovery/collectionNavigationBreadcrumbs/collection-navigation-breadcrumbs.html"}),i("design:paramtypes",[])],a),r.PrmCollectionNavigationBreadcrumbs=a},{"ng-metadata/core":362}],507:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../primoExplore/primoExploreStates.module"),c=function(){function e(e,t){this.collectionDiscoveryIcons=e,this.$stateParams=t,this.COLLECTION_DISCOVERY_STATE=s.STATE_NAMES.COLLECTION_DISCOVERY}return e.prototype.ngOnInit=function(){this._title=this.isRootObject?"COLLECTIONS":this.pathObject.name,this._breadcrumbStateParams=this.isRootObject?{collectionId:void 0}:{collectionId:this.pathObject.pid},this._breadcrumbStateParams.vid=this.$stateParams.vid,this.institution&&(this._breadcrumbStateParams.inst=this.institution)},Object.defineProperty(e.prototype,"title",{get:function(){return this._title},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"breadcrumbStateParams",{get:function(){return this._breadcrumbStateParams},enumerable:!0,configurable:!0}),e}();n([a.Input(),i("design:type",Object)],c.prototype,"pathObject",void 0),n([a.Input(),i("design:type",Boolean)],c.prototype,"isRootObject",void 0),n([a.Input(),i("design:type",String)],c.prototype,"institution",void 0),c=n([a.Component({selector:"prm-collection-navigation-breadcrumbs-item",templateUrl:"components/collectionDiscovery/collectionNavigationBreadcrumbs/collectionNavigationBreadcrumbsItem/collection-navigation-breadcrumbs-item.html"}),o(0,a.Inject("collectionDiscoveryIcons")),o(1,a.Inject("$stateParams")),i("design:paramtypes",[Object,Object])],c),r.PrmCollectionNavigationBreadcrumbsItem=c},{"../../../primoExplore/primoExploreStates.module":620,"ng-metadata/core":362}],508:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;
if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../collectionDiscovery.service"),c=(e("lodash/get"),function(){function e(e,t,r){this.collectionDiscoveryService=e,this.$q=t,this.$mdDialog=r}return e.prototype.ngOnInit=function(){var e=this,t=this.collectionDiscoveryService.getDataFromCollectionRecord(this.item);if(t){var r=t.map(function(t){return e.collectionDiscoveryService.getSubColWithPath(t.collectionId,t.institution)});this.$q.all(r).then(function(r){console.log(r),e.paths=r.map(function(e,r){return{institution:t[r].institution,path:e.path.concat({level:e.level,name:e.value.name||e.value.title,pid:e.value.pid.value})}})})}},e.prototype.closeDialog=function(){this.$mdDialog.hide()},e}());n([a.Input(),i("design:type",Object)],c.prototype,"item",void 0),c=n([a.Component({selector:"prm-record-collection-paths",templateUrl:"components/collectionDiscovery/recordCollectionPaths/record-collection-paths.html"}),o(1,a.Inject("$q")),o(2,a.Inject("$mdDialog")),i("design:paramtypes",[s.CollectionDiscoveryService,Function,Object])],c),r.PrmRecordCollectionPaths=c},{"../collectionDiscovery.service":498,"lodash/get":255,"ng-metadata/core":362}],509:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./favorites.service"),c=e("../appConfig/appConfigForward"),l=e("../search/topbar/skipTo/skipTo.service"),u=e("../security/jwtUtil.service"),d=e("../infra/mediaQueries.service"),p=e("../infra/annotations"),f=e("../infra/storageUtil.service"),h=function(){function e(e,t,r,n,i,o,a,s){switch(this.favoritesService=e,this.jwtUtilService=t,this.$state=r,this.skipToService=n,this.mediaQueries=i,this.$location=o,this.$stateParams=a,this.storageUtil=s,this.vid=c.getVid(),this.tabIndexesMap={},this.$location.search().section){case this.favoritesService.ITEMS__TAB_NAME:this.selectedTabIndex=0;break;case this.favoritesService.QUERIES_TAB_NAME:this.selectedTabIndex=1;break;case this.favoritesService.SEARCH_HISTORY_TAB_NAME:this.selectedTabIndex=2;break;default:this.selectedTabIndex=0}this.favoritesService.items=[];var l=a.sortBy||"date";"GUEST"!=this.jwtUtilService.getDecodedToken().userGroup?e.getItemsFromServer(l):e.getItemsFromLocalForage(this.jwtUtilService.getDecodedToken().user,l)}return e.prototype.getItems=function(){return this.favoritesService.getItems()},e.prototype.isSignedIn=function(){return"GUEST"!=this.jwtUtilService.getDecodedToken().userGroup},Object.defineProperty(e.prototype,"skipLinks",{get:function(){return this.skipToService.skipLinks.favorites},enumerable:!0,configurable:!0}),e.prototype.onSavedItemsSelect=function(){this.$location.search().section!==this.favoritesService.ITEMS__TAB_NAME&&this.addTabToUrl(this.favoritesService.ITEMS__TAB_NAME),this.favoritesService.getFavoritesTab()!==this.favoritesService.ITEMS__TAB_NAME&&this.favoritesService.setFavoritesTab(this.favoritesService.ITEMS__TAB_NAME)},e.prototype.onSavedQueriesSelect=function(){this.$location.search().section!==this.favoritesService.QUERIES_TAB_NAME&&this.addTabToUrl(this.favoritesService.QUERIES_TAB_NAME),this.favoritesService.getFavoritesTab()!==this.favoritesService.QUERIES_TAB_NAME&&this.favoritesService.setFavoritesTab(this.favoritesService.QUERIES_TAB_NAME)},e.prototype.onSearchHistorySelect=function(){this.$location.search().section!==this.favoritesService.SEARCH_HISTORY_TAB_NAME&&this.addTabToUrl(this.favoritesService.SEARCH_HISTORY_TAB_NAME),this.favoritesService.getFavoritesTab()!==this.favoritesService.SEARCH_HISTORY_TAB_NAME&&this.favoritesService.setFavoritesTab(this.favoritesService.SEARCH_HISTORY_TAB_NAME)},e.prototype.addTabToUrl=function(e){this.$location.search("section",e)},e.prototype.showSearchHistoryTab=function(){return this.storageUtil.isLocalStorageAvailable},e}();n([p.preventStateReload,i("design:type",Function),i("design:paramtypes",[String]),i("design:returntype",void 0)],h.prototype,"addTabToUrl",null),h=n([a.Component({selector:"prm-favorites",templateUrl:"components/favorites/favorites.html"}),o(2,a.Inject("$state")),o(5,a.Inject("$location")),o(6,a.Inject("$stateParams")),i("design:paramtypes",[s.FavoritesService,u.JwtUtilService,Object,l.SkipToService,d.MediaQueries,Object,Object,f.StorageUtil])],h),r.PrmFavorites=h},{"../appConfig/appConfigForward":484,"../infra/annotations":531,"../infra/mediaQueries.service":562,"../infra/storageUtil.service":571,"../search/topbar/skipTo/skipTo.service":824,"../security/jwtUtil.service":842,"./favorites.service":511,"ng-metadata/core":362}],510:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./favorites.service"),a=e("./savedQueries/savedQueries.module"),s=e("./favoritesEditLabelsMenu/favoritesEditLabelsMenu.service"),c=e("./favoritesEditLabelsMenu/favoritesEditLabelsMenu.directive"),l=e("./favoritesToolBar/favoritesToolbar.module"),u=e("./favoritesRecordLabels/favoritesRecordLabels.directive"),d=e("./favoritesLabels/favoritesLabels.directive"),p=e("./favorites.directive"),f=e("./searchHistory/searchHistory.module"),h=e("./saveToFavoritesButton/saveToFavoritesButton.directive"),m=function(){function e(){}return e}();m=n([i.NgModule({declarations:[p.PrmFavorites,c.PrmFavoritesEditLabelsMenu,d.PrmFavoritesLabels,u.PrmFavoritesRecordLabels,h.PrmSaveToFavoritesButton],providers:[s.FavoritesEditLabelsMenuService,o.FavoritesService],imports:[l.FavoritesToolbarModule,a.SavedQueriesModule,f.SearchHistoryModule]})],m),r.FavoritesModule=m},{"./favorites.directive":509,"./favorites.service":511,"./favoritesEditLabelsMenu/favoritesEditLabelsMenu.directive":512,"./favoritesEditLabelsMenu/favoritesEditLabelsMenu.service":513,"./favoritesLabels/favoritesLabels.directive":514,"./favoritesRecordLabels/favoritesRecordLabels.directive":515,"./favoritesToolBar/favoritesToolbar.module":517,"./saveToFavoritesButton/saveToFavoritesButton.directive":519,"./savedQueries/savedQueries.module":521,"./searchHistory/searchHistory.module":524,"ng-metadata/core":362}],511:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../security/userSessionManager.service"),c=e("../infra/annotations"),l=e("../security/jwtUtil.service"),u=e("../nddUtils/configurationUtil.service"),d=e("../search/search.service"),p=e("../appConfig/appConfigForward"),f=e("../search/rta.service"),h=e("../nddUtils/dateUtils.service"),m=e("../account/account.service"),g=e("lodash/orderBy"),v=e("lodash/get"),y=e("lodash/difference"),b=e("lodash/extend"),S=e("lodash/indexOf"),_=e("lodash/intersection"),w=e("lodash/keys"),E=e("lodash/isEmpty"),T=function(){function e(){}return e}();T=n([a.Injectable()],T),r.LoansRequestParams=T;var O=function(){function e(e,t,r,n,i,o,a,s,c,l,u,d){this.$http=e,this.userSessionManagerService=t,this.jwtUtilService=r,this.$location=n,this.$stateParams=i,this.restBaseURLs=o,this.configurationUtil=a,this.searchService=s,this.rtaService=c,this.accountListBulkSize=l,this.dateUtil=u,this.accountService=d,this.favoritesInProgress=!1,this.unlabeledRecords=!1,this.isFirstBulk=!1,this.needToChangeUrl=!1,this.allItems=!0,this._user=!1,this.firstBulk=0,this.countRecords=0,this.bulkSize=10,this.vid=p.getVid(),this._sortInProgress=!1,this.QUERIES_TAB_NAME="queries",this.SEARCH_HISTORY_TAB_NAME="search_history",this.ITEMS__TAB_NAME="items",this.favoritesTab=this.ITEMS__TAB_NAME,this.sortOptions=["date","title","author"],this.GET_LABELS_URL=o.favoritesBaseURL,this.isMore=!1}return e.prototype.getItemsFromServer=function(e){var t=this;this.isFirstBulk=!0,this.$http.get(this.GET_LABELS_URL).then(function(r){var n=r.data;t.records=n.records,t.unlabeled=n.unlabeledRecords,t.labels=n.labels,t.keysLabels=w(t.labels),t.sortedLabels=t.keysLabels.map(function(e){return[e,e.toLowerCase()]}).sort(function(e,t){return e[1].localeCompare(t[1])}).map(function(e){return[e[0],t.labels[e[0]]]}),t.unlabeled>0&&(t.labels=b({unlabled:t.unlabeled},t.labels),t.keysLabels=w(t.labels),t.sortedLabels.unshift(["unlabled",t.unlabeled])),t.totalItems=n.totalItems,t.recordsId=t.records.map(function(e){return e.recordId}),void 0==t.$stateParams.label?(t.selectedLabels=[],t.unlabeledRecords=!1):(t.selectedLabels=t.initSelectedLabels(t.$stateParams.label),t.IsUrlChangeNeeded(),t.unlabeledRecords=t.selectedLabels.indexOf("unlabled")!=-1),t.sortFavFromURL(e),t.returnAllOrFilter()})},e.prototype.IsUrlChangeNeeded=function(){var e=y(this.selectedLabels,this.keysLabels);e.length>0&&this.changeUrL(e)},e.prototype.changeUrL=function(e){for(var t,r,n=this.$location.url(),i=0;i<e.length;i++)t=S(this.selectedLabels,e[i]),this.selectedLabels.splice(t,1),r=encodeURIComponent(e[i]),n=n.replace("&label="+r,"");this.needToChangeUrl=!0,this.$location.url(n)},e.prototype.initSelectedLabels=function(e){return Array.isArray(e)?e:[e]},e.prototype.getFirstBulkOfAllItems=function(){this.fullList=this.recordsId,this.to=Math.min(this.bulkSize,this.recordsId.length),this.getPnxRecordFromRecordId(this.recordsId.slice(this.firstBulk,this.to),!0)},e.prototype.getLabels=function(){return this.labels},e.prototype.getSortedLabels=function(){return this.sortedLabels},e.prototype.getTotalItems=function(){return this.totalItems},e.prototype.getItems=function(){return this.items},e.prototype.getRecords=function(){return this.records},e.prototype.getLabelsOfRecord=function(e){for(var t=0;t<this.records.length;t++)if(this.records[t].recordId==e)return this.records[t].labels;return[]},e.prototype.getOtherLabels=function(e){for(var t=w(this.labels),r=[],n=this.getLabelsOfRecord(e),i=0;i<t.length;i++)n.indexOf(t[i])==-1&&"unlabled"!=t[i]&&r.push(t[i]);return r},e.prototype.getFavoritesInProgress=function(){return this.favoritesInProgress},e.prototype.setFavoritesInProgress=function(e){this.favoritesInProgress=e},e.prototype.filterObject=function(e){if(!E(e))return e},e.prototype.getPnxRecordFromRecordId=function(e,t){var r=this;if(e.length>0){var n=this.restBaseURLs.pnxBaseURL+"/U?recordIds="+e+"&vid="+this.vid;this.$http.get(n).then(function(e){var n=e.data;n=n.filter(r.filterObject),n.forEach(function(e,t,r){e.context="U",e.delivery&&(e.delivery.availability&&e.delivery.availability.length>1&&e.delivery.availability.reverse(),e.delivery.deliveryCategory&&e.delivery.deliveryCategory.length>1&&e.delivery.deliveryCategory.reverse(),e.delivery.availabilityLinks&&e.delivery.availabilityLinks.length>1&&e.delivery.availabilityLinks.reverse(),e.delivery.availabilityLinksUrl&&e.delivery.availabilityLinksUrl.length>1&&e.delivery.availabilityLinksUrl.reverse(),e.delivery.serviceMode&&e.delivery.serviceMode.length>1&&e.delivery.serviceMode.reverse())}),r.configurationUtil.getLocationsConfiguration()&&"none"!==r.configurationUtil.getLocationsConfiguration().rta&&r.rtaService.updateAvailability(n),t?r.items=n:r.items=r.items.concat(n),r.setFavoritesInProgress(!1),r.isFirstBulk=!1})}else this.items=[]},e.prototype.returnPnxForRecords=function(e){if(e.length>0){var t=this.restBaseURLs.pnxBaseURL+"/U?recordIds="+e+"&vid="+this.vid;return this.$http.get(t)}},e.prototype.getFullList=function(){return this.fullList},e.prototype.getItemsFromLocalForage=function(e,t){var r=this;this.isFirstBulk=!0,this.userSessionManagerService.createOrGetUserArea(e).then(function(e){r.configurationUtil.getLocationsConfiguration()&&"none"!==r.configurationUtil.getLocationsConfiguration().rta&&r.rtaService.updateAvailability(e),r.fullList=e,r.totalItems=e.length,r.to=Math.min(r.bulkSize,e.length),r.items=e.slice(r.firstBulk,r.to),r.isFirstBulk=!1,r.guestRecordsIdsOrder=r.fullList.map(function(e){return e.pnx.control.recordid}),r.sortFavFromURL(t)})},e.prototype.getFavoritesTab=function(){return this.favoritesTab},e.prototype.setFavoritesTab=function(e){this.favoritesTab=e},Object.defineProperty(e.prototype,"user",{get:function(){return"GUEST"!=this.jwtUtilService.getDecodedToken().userGroup},set:function(e){this._user=e},enumerable:!0,configurable:!0}),e.prototype.nextResults=function(){if(!this.isFirstBulk){var e=Math.min(this.bulkSize,this.fullList.length-this.to);e>0&&(this.from=this.to,this.to=this.to+e,this.user?this.getPnxRecordFromRecordId(this.fullList.slice(this.from,this.to),!1):this.items=this.fullList.slice(this.firstBulk,this.to))}},e.prototype.getSelectedLabels=function(){return this.selectedLabels},e.prototype.checkSelectedLabels=function(e){"unlabled"==e&&(this.unlabeledRecords=!this.unlabeledRecords);var t=S(this.selectedLabels,e);if(t!=-1){this.selectedLabels.splice(t,1);var r=encodeURIComponent(e),n=this.$location.url().replace("&label="+r,"");this.$location.url(n)}else this.selectedLabels.push(e),this.$location.url(this.$location.url()+"&label="+e);this.returnAllOrFilter()},e.prototype.returnAllOrFilter=function(){this.allItems=0==this.selectedLabels.length,this.allItems?this.getFirstBulkOfAllItems():this.parseResults()},e.prototype.iterateOverEachRecord=function(e){return _(e.labels,this.selectedLabels).length>0||0==e.labels.length&&this.unlabeledRecords?(this.countRecords+=1,e.recordId):""},e.prototype.filterEmpty=function(e){if(""!=e)return e},e.prototype.parseResults=function(){var e=this,t=[];this.countRecords=0;var r=this.getRecords();t=r.map(function(t){return e.iterateOverEachRecord(t)}).filter(this.filterEmpty),this.fullList=t,this.to=Math.min(this.bulkSize,t.length),this.getPnxRecordFromRecordId(t.slice(this.firstBulk,this.to),!0)},e.prototype.clearSelection=function(){this.selectedLabels=[],this.allItems=!0,this.unlabeledRecords=!1,this.getFirstBulkOfAllItems();var e=this.$location.search().vid;this.$location.url("/favorites?vid="+e)},e.prototype.getCountRecords=function(){return this.countRecords},e.prototype.getAllItems=function(){return this.allItems},e.prototype.getselectedLabels=function(){return this.selectedLabels},Object.defineProperty(e.prototype,"sortInProgress",{get:function(){return this._sortInProgress},set:function(e){this._sortInProgress=e},enumerable:!0,configurable:!0}),e.prototype.sortFavRecordsIds=function(e){e&&(this.sortBy=e);var t,r,n=function(e){return e.creationDate},i=function(e){var t=v(e,"title");return t&&(t=t.toLowerCase()),t},o=function(e){var t=v(e,"author");return t&&(t=t.toLowerCase()),t};switch(this.sortBy){case"date":r=n,t=!0;break;case"title":r=i,t=!1;break;case"author":r=o,t=!1;break;default:r=n,t=!1}var a=t?"desc":"asc";this.records=g(this.records,[r],a),this.recordsId=this.records.map(function(e){return e.recordId})},e.prototype.sortFavFullList=function(e){var t=this;e&&(this.sortBy=e);var r,n,i=function(e){return t.guestRecordsIdsOrder.indexOf(e.pnx.control.recordid)},o=function(e){var t="";return void 0!==e.pnx.display.title&&(t=v(e,"pnx.display.title[0]")),t&&(t=t.toLowerCase()),t},a=function(e){var t="";return void 0!==e.pnx.display.creator?t=v(e,"pnx.display.creator[0]"):void 0!==e.pnx.display.contributor&&(t=v(e,"pnx.display.contributor[0]")),t&&(t=t.toLowerCase()),t};switch(this.sortBy){case"date":n=i,r=!1;break;case"title":n=o,r=!1;break;case"author":n=a,r=!1;break;default:n=i,r=!1}var s=r?"desc":"asc";this.fullList=g(this.fullList,[n],s)},e.prototype.sortFavFromURL=function(e){this.sortInProgress=!0,this.isLoggedIn()?(this.sortFavRecordsIds(e),this.fullList=this.recordsId):(this.sortFavFullList(e),this.to=Math.min(this.bulkSize,this.fullList.length),this.items=this.fullList.slice(this.firstBulk,this.to),this.isFirstBulk=!1)},e.prototype.sortAllFavFromDropdown=function(e){e||this.$location.search("sortBy",this.sortBy),this.sortInProgress=!0,this.isLoggedIn()?(this.sortFavRecordsIds(e),this.fullList=this.recordsId):(this.sortFavFullList(e),this.to=Math.min(this.bulkSize,this.fullList.length),this.items=this.fullList.slice(this.firstBulk,this.to),this.isFirstBulk=!1)},Object.defineProperty(e.prototype,"sortBy",{get:function(){return this._sortBy},set:function(e){this._sortBy=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resultsExists",{get:function(){return!E(this.searchService.getResultObject().info)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalResults",{get:function(){return this.resultsExists?this.searchService.getResultObject().info.total:0},enumerable:!0,configurable:!0}),e.prototype.isLoggedIn=function(){return!!this.userSessionManagerService.getUserName()},e}();n([c.preventStateReload,i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],O.prototype,"changeUrL",null),n([c.preventStateReload,i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],O.prototype,"checkSelectedLabels",null),n([c.preventStateReload,i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],O.prototype,"clearSelection",null),O=n([a.Injectable(),o(0,a.Inject("$http")),o(3,a.Inject("$location")),o(4,a.Inject("$stateParams")),o(5,a.Inject("restBaseURLs")),o(9,a.Inject("accountListBulkSize")),i("design:paramtypes",[Function,s.UserSessionManagerService,l.JwtUtilService,Object,Object,Object,u.ConfigurationUtil,d.SearchService,f.RtaService,Object,h.DateUtils,m.AccountService])],O),r.FavoritesService=O},{"../account/account.service":434,"../appConfig/appConfigForward":484,"../infra/annotations":531,"../nddUtils/configurationUtil.service":596,"../nddUtils/dateUtils.service":597,"../search/rta.service":781,"../search/search.service":792,"../security/jwtUtil.service":842,"../security/userSessionManager.service":853,"lodash/difference":240,"lodash/extend":245,"lodash/get":255,"lodash/indexOf":261,"lodash/intersection":262,"lodash/isEmpty":268,"lodash/keys":281,"lodash/orderBy":293,"ng-metadata/core":362}],512:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./favoritesEditLabelsMenu.service"),c=e("../favorites.service"),l=e("../../search/briefResult/briefResult.service"),u=e("lodash/intersection"),d=function(){function e(e,t,r,n,i,o){this.favoritesEditLabelsMenuService=e,this.favoritesIcons=t,this.favoritesService=r,this.briefResultService=n,this.$mdMenu=i,this.$translate=o,this.favoritesIcons=t}return e.prototype.openMenu=function(e,t){this.disable||(this.originatorEv=t,e(t))},e.prototype.returnAssignedLabels=function(){if(this.isSection){for(var e=this.briefResultService.getChosenRecords(),t=new Set,r=0;r<e.length;r++)for(var n=this.favoritesService.getLabelsOfRecord(e[r]),i=0;i<n.length;i++)t.add(n[i]);return Array.from(t)}return this.favoritesService.getLabelsOfRecord(this.item.pnx.control.recordid[0])},e.prototype.returnOtherLabels=function(){if(this.isSection){var e=this.briefResultService.getChosenRecords(),t=[];this.favoritesService.getLabels()&&(t=Object.keys(this.favoritesService.getLabels()));for(var r=0;r<e.length;r++){var n=this.favoritesService.getOtherLabels(e[r]);t=u(t,n)}return t}return this.favoritesService.getOtherLabels(this.item.pnx.control.recordid[0])},e.prototype.removeLabelForOneRecord=function(e,t){var r=this.favoritesService.getLabelsOfRecord(e).slice(),n=r.indexOf(t);n!==-1&&(r.splice(n,1),this.favoritesEditLabelsMenuService.putLabel(e,r))},e.prototype.removeLabel=function(e){if(this.isSection){for(var t=[],r=this.briefResultService.getChosenRecords(),n={},i=0;i<r.length;i++){var o=this.favoritesService.getLabelsOfRecord(r[i]).slice(),a=o.indexOf(e);a!==-1&&(o.splice(a,1),n={recordId:r[i],labels:o},t.push(n))}var s={records:t};this.favoritesEditLabelsMenuService.putLabels(s)}else{var c=this.item.pnx.control.recordid[0];this.removeLabelForOneRecord(c,e)}},e.prototype.addLabelForOneRecord=function(e,t){var r=this.favoritesService.getLabelsOfRecord(e).slice();r.push(t),this.favoritesEditLabelsMenuService.putLabel(e,r)},e.prototype.addNewLabel=function(){this.addLabel(this.newLabel),this.newLabel="",this.$mdMenu.hide()},e.prototype.addLabel=function(e){if(this.isSection){for(var t=[],r=this.briefResultService.getChosenRecords(),n={},i=0;i<r.length;i++){var o=this.favoritesService.getLabelsOfRecord(r[i]).slice();o.push(e),n={recordId:r[i],labels:o},t.push(n)}var a={records:t};this.favoritesEditLabelsMenuService.putLabels(a)}else{var s=this.item.pnx.control.recordid[0];this.addLabelForOneRecord(s,e)}},e.prototype.isChosenLabels=function(){return this.disable?this.$translate.instant("nui.favorites.labelsDisable"):this.$translate.instant("nui.favorites.labels")},e}();n([a.Input(),i("design:type",Object)],d.prototype,"item",void 0),n([a.Input(),i("design:type",Boolean)],d.prototype,"isSection",void 0),n([a.Input(),i("design:type",Boolean)],d.prototype,"disable",void 0),d=n([a.Component({selector:"prm-favorites-edit-labels-menu",templateUrl:"components/favorites/favoritesEditLabelsMenu/favorites-edit-labels-menu.html"}),o(1,a.Inject("favoritesIcons")),o(4,a.Inject("$mdMenu")),o(5,a.Inject("$translate")),i("design:paramtypes",[s.FavoritesEditLabelsMenuService,Array,c.FavoritesService,l.BriefResultService,Object,Function])],d),r.PrmFavoritesEditLabelsMenu=d},{"../../search/briefResult/briefResult.service":651,"../favorites.service":511,"./favoritesEditLabelsMenu.service":513,"lodash/intersection":262,"ng-metadata/core":362}],513:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../favorites.service"),c=function(){function e(e,t,r){this.$http=e,this.favoritesService=t,this.restBaseURLs=r,this.PUT_LABELS_URL=r.favoritesBaseURL+"/",this.$http=e,this.favoritesService=t}return e.prototype.putLabel=function(e,t){var r=this,n={records:[{recordId:e,labels:t}]};this.$http.put(this.PUT_LABELS_URL,n).then(function(){r.favoritesService.getItemsFromServer()})},e.prototype.putLabels=function(e){var t=this;this.$http.put(this.PUT_LABELS_URL,e).then(function(){t.favoritesService.getItemsFromServer()})},e}();c=n([a.Injectable(),o(0,a.Inject("$http")),o(2,a.Inject("restBaseURLs")),i("design:paramtypes",[Function,s.FavoritesService,Object])],c),r.FavoritesEditLabelsMenuService=c},{"../favorites.service":511,"ng-metadata/core":362}],514:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../favorites.service"),c=e("../../infra/mediaQueries.service"),l=function(){function e(e,t,r){this.favoritesService=e,this.favoritesIcons=t,this.mediaQueries=r}return e.prototype.isSelectedLabel=function(e){return this.favoritesService.getselectedLabels().indexOf(e)>-1},Object.defineProperty(e.prototype,"selectedLabels",{get:function(){return this.favoritesService.getselectedLabels()},enumerable:!0,configurable:!0}),e.prototype.clearAll=function(){this.favoritesService.clearSelection()},e.prototype.checkSelectedLabels=function(e){this.favoritesService.checkSelectedLabels(e)},e.prototype.getUser=function(){return this.favoritesService.user},e}();l=n([a.Component({selector:"prm-favorites-labels",templateUrl:"components/favorites/favoritesLabels/favorites-labels.html"}),o(1,a.Inject("favoritesIcons")),i("design:paramtypes",[s.FavoritesService,Array,c.MediaQueries])],l),r.PrmFavoritesLabels=l},{"../../infra/mediaQueries.service":562,"../favorites.service":511,"ng-metadata/core":362}],515:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../favorites.service"),c=e("../../security/jwtUtil.service"),l=function(){function e(e,t,r){this.favoritesIcons=e,this.favoritesService=t,this.jwtUtilService=r}return e.prototype.returnLabelsOfItem=function(){if(this.getUser()){var e=this.item.pnx.control.recordid[0];return this.favoritesService.getLabelsOfRecord(e)}return[]},e.prototype.getUser=function(){return this.favoritesService.user},e}();n([a.Input(),i("design:type",Object)],l.prototype,"item",void 0),l=n([a.Component({selector:"prm-favorites-record-labels",templateUrl:"components/favorites/favoritesRecordLabels/favorites-record-labels.html"}),o(0,a.Inject("favoritesIcons")),i("design:paramtypes",[Array,s.FavoritesService,c.JwtUtilService])],l),r.PrmFavoritesRecordLabels=l},{"../../security/jwtUtil.service":842,"../favorites.service":511,"ng-metadata/core":362}],516:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("../savedQueries/savedQueries.service"),s=e("ng-metadata/core"),c=e("../favorites.service"),l=e("../../search/briefResult/briefResult.service"),u=e("../../infra/mediaQueries.service"),d=e("../../favorites/searchHistory/searchHistory.service"),p=(e("lodash/forEach"),function(){function e(e,t,r,n,i,o,a){this.favoritesService=e,this.searchHistoryService=r,this.briefResultService=n,this.mediaQueries=i,this.savedQueriesService=o,this.$translate=a,this.selectedAction="none",this.KEY_CODE={COMMA:188,SEMICOLON:186,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,TAB:9,BACKSPACE:8,DELETE:46},this.favoritesIcons=t,this._showPushtoActions=!1}return Object.defineProperty(e.prototype,"showPushtoActions",{get:function(){return this._showPushtoActions},set:function(e){this._showPushtoActions=e},enumerable:!0,configurable:!0}),e.prototype.selectedItems=function(){var e=this.briefResultService.getChosenItems();return e?e:[]},e.prototype.getUser=function(){return this.favoritesService.user},e.prototype.showButtons=function(){return this.briefResultService.getChosenRecords().length>0&&this.favoritesService.getFavoritesTab()===this.favoritesService.ITEMS__TAB_NAME?(this.disableEffect=angular.element(document.querySelector(".horizontal-content-scroller")),!0):(this._showPushtoActions=!1,!1)},e.prototype.isFavorites=function(){return this.favoritesService.getFavoritesTab()===this.favoritesService.ITEMS__TAB_NAME},e.prototype.showSavedSearchesActions=function(){return this.favoritesService.getFavoritesTab()===this.favoritesService.QUERIES_TAB_NAME},e.prototype.showSearchHistoryActions=function(){return this.favoritesService.getFavoritesTab()===this.favoritesService.SEARCH_HISTORY_TAB_NAME},e.prototype.unpinFromFavorites=function(){if(this.showButtons()){var e=this.briefResultService.getChosenRecords();this.briefResultService.unpinFavoritesFromToolBar(e)}},e.prototype.switchShowPushtoActions=function(){this.showButtons()&&(this.showPushtoActions=!this.showPushtoActions)},e.prototype.isChosenFav=function(){return this.showButtons()?this.$translate.instant("nui.favorites.unpin"):this.$translate.instant("nui.favorites.unpinDisable")},e.prototype.isChosenActions=function(){return this.showButtons()?this.$translate.instant("nui.favorites.pushto"):this.$translate.instant("nui.favorites.pushtoDisable")},e.prototype.closeOpenTabs=function(e){e.stopPropagation(),this.selectedAction="none"},e.prototype.keyDownSupport=function(e){this.KEY_CODE;27===e.keyCode&&this.switchShowPushtoActions(),40!==e.keyCode&&38!==e.keyCode||e.preventDefault()},e}());p=n([s.Component({selector:"prm-favorites-tool-bar",templateUrl:"components/favorites/favoritesToolBar/favorites-tool-bar.html"}),o(1,s.Inject("favoritesIcons")),o(6,s.Inject("$translate")),i("design:paramtypes",[c.FavoritesService,Object,d.SearchHistoryService,l.BriefResultService,u.MediaQueries,a.SavedQueriesService,Function])],p),r.PrmFavoritesToolBar=p},{"../../favorites/searchHistory/searchHistory.service":525,"../../infra/mediaQueries.service":562,"../../search/briefResult/briefResult.service":651,"../favorites.service":511,"../savedQueries/savedQueries.service":522,"lodash/forEach":253,"ng-metadata/core":362
}],517:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./saved-searches-group-actions/savedSearchesGroupActions.directive"),a=e("./favoritesToolBar.directive"),s=function(){function e(){}return e}();s=n([i.NgModule({declarations:[a.PrmFavoritesToolBar,o.PrmSavedSearchesGroupActions],providers:[],imports:[]})],s),r.FavoritesToolbarModule=s},{"./favoritesToolBar.directive":516,"./saved-searches-group-actions/savedSearchesGroupActions.directive":518,"ng-metadata/core":362}],518:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("../../savedQueries/savedQueries.service"),s=e("ng-metadata/core"),c=e("../../searchHistory/searchHistory.service"),l=e("../../favorites.service"),u=e("../../../security/userSessionManager.service"),d=e("../../../search/savedQueries/addQueryToSavedSearches/addQueryToSavedSearches.service"),p=(e("angular-material"),function(){function e(e,t,r,n,i,o){this.favoritesService=e,this.savedQueriesService=t,this.userSessionManagerService=r,this.searchHistoryService=n,this.$mdToast=i,this.addQueryToSavedSearchesService=o}return e.prototype.removeSelectedSearches=function(){var e=this;this.savedQueriesService.getCheckedItems().length>0&&this.savedQueriesService.removeSelectedSearches().then(function(t){console.log("entire res:"+JSON.stringify(t)),e.savedQueriesService.getItemsFromApi()},function(e){console.log("get searches failed: ",e)})},e.prototype.setAlertToSelectedSearches=function(){var e=this,t=this.savedQueriesService.getCheckedItems();this.savedQueriesService.setAlertToSelectedSearches("").then(function(r){console.log("entire res:"+JSON.stringify(r));for(var n=0,i=t;n<i.length;n++){var o=i[n];o.alert=!0,o.email=r}var a=t.map(function(e){return e.ID}),s='<prm-add-alert-toast [id]="ctrl.selectedIds" [add-mode]="false" [user-email]="ctrl.userEmail"></prm-add-alert-toast>';e.$mdToast.show({controllerAs:"ctrl",controller:function(){this.selectedIds=a,this.userEmail=r},hideDelay:8e3,position:"top right",template:s}).then(function(){e.addQueryToSavedSearchesService.onToastClose()})},function(e){console.log("get searches failed: ",e)})},e.prototype.removeSearchHistorySelectedItems=function(){var e=this;this.searchHistoryService.getCheckedItems().length>0&&this.searchHistoryService.removeSearchHistorySelectedItems().then(function(t){e.searchHistoryService.setTotalItems(t),e.searchHistoryService.refreshItems()})},e.prototype.removeSelectedSearchHistoryItemFromSavedSearches=function(){this.searchHistoryService.getCheckedItems().length>0&&this.searchHistoryService.removeSelectedSearchHistoryItemFromSavedSearches()},e.prototype.saveSelectedSearchHistoryItemsToSavedSearches=function(){this.searchHistoryService.getCheckedItems().length>0&&this.searchHistoryService.saveSelectedSearchHistoryItemsToSavedSearches()},e.prototype.showSearchHistoryActions=function(){return this.favoritesService.getFavoritesTab()===this.favoritesService.SEARCH_HISTORY_TAB_NAME},e.prototype.isLoggedIn=function(){return this.userSessionManagerService.getUserName().length>0},e.prototype.disable=function(){return this.favoritesService.getFavoritesTab()===this.favoritesService.SEARCH_HISTORY_TAB_NAME?0===this.searchHistoryService.getCheckedItems().length:0===this.savedQueriesService.getCheckedItems().length},e}());p=n([s.Component({selector:"prm-saved-searches-group-actions",templateUrl:"components/favorites/favoritesToolBar/saved-searches-group-actions/saved-searches-group-actions.html"}),o(4,s.Inject("$mdToast")),i("design:paramtypes",[l.FavoritesService,a.SavedQueriesService,u.UserSessionManagerService,c.SearchHistoryService,Object,d.AddQueryToSavedSearchesService])],p),r.PrmSavedSearchesGroupActions=p},{"../../../search/savedQueries/addQueryToSavedSearches/addQueryToSavedSearches.service":784,"../../../security/userSessionManager.service":853,"../../favorites.service":511,"../../savedQueries/savedQueries.service":522,"../../searchHistory/searchHistory.service":525,"angular-material":17,"ng-metadata/core":362}],519:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../search/briefResult/briefResult.service"),c=e("../../security/jwtUtil.service"),l=e("../../infra/storageUtil.service"),u=e("../../security/userSessionManager.service"),d=e("../favorites.service"),p=e("../../primoExplore/primoExploreStates.module"),f=e("../../analytics/primolytics.service"),h=e("lodash/indexOf"),m=function(){function e(e,t,r,n,i,o,a,s,c,l){this.favoritesService=e,this.briefResultService=t,this.jwtUtilService=r,this.storageUtil=n,this.userSessionManagerService=i,this.$state=o,this.$timeout=a,this.actionsIcons=s,this.$window=c,this.primolyticsService=l}return e.prototype.ngOnInit=function(){},Object.defineProperty(e.prototype,"recordId",{get:function(){return this.item?this.item.pnx.control.recordid[0]:this.recordid},enumerable:!0,configurable:!0}),e.prototype.showPin=function(){return this.briefResultService.getShowPinForRecordId(this.recordId)},e.prototype.showBookmark=function(){return this.briefResultService.getShowBookmark()},e.prototype.isFavoritesDisabled=function(){return!this.storageUtil.isLocalStorageAvailable&&"GUEST"===this.jwtUtilService.getDecodedToken().userGroup},e.prototype.updateFavorites=function(e){var t=this;this.item?this.performUpdate(e):(this.savingInProgress=!0,this.getRecordFunction(this.recordId).then(function(r){t.item=r,t.performUpdate(e),t.savingInProgress=!1},function(e){t.savingInProgress=!1}))},e.prototype.performUpdate=function(e){var t=this.jwtUtilService.getDecodedToken().user;this.userSessionManagerService.isGuest()?this.updateFavoritesForGuest(t,e):this.updateFavoritesForUser(t,e)},e.prototype.updateFavoritesForGuest=function(e,t){var r=this;this.userSessionManagerService.createOrGetUserArea(e).then(function(n){r.userSessionManagerService.area=n;var i=r.isRecordInArea();i==-1?r.userSessionManagerService.updateUserArea(r.item).then(function(){r.doPinItem(t),r.briefResultService.saveJsonOdIdsAndPins(r.recordId,!0),r.reloadListInFavoriteStateForGuest(e)}):r.userSessionManagerService.removeRecordFromFavorites(i).then(function(){r.briefResultService.saveJsonOdIdsAndPins(r.recordId,!1),r.reloadListInFavoriteStateForGuest(e)})})},e.prototype.updateFavoritesForUser=function(e,t){var r=this;this.userSessionManagerService.createOrGetUserArea(e).then(function(e){r.userSessionManagerService.area=e;var n=r.isRecordInArea();n==-1?r.briefResultService.addUserFavorite(r.item).then(function(){r.userSessionManagerService.updateUserArea(r.recordId).then(function(){r.doPinItem(t),r.briefResultService.saveJsonOdIdsAndPins(r.recordId,!0),r.reloadListInFavoriteStateForUser()})}):r.briefResultService.removeUserFavorite(r.recordId).then(function(){r.userSessionManagerService.removeRecordFromFavorites(n).then(function(){r.briefResultService.saveJsonOdIdsAndPins(r.recordId,!1),r.reloadListInFavoriteStateForUser()})})})},e.prototype.isRecordInArea=function(){var e=this,t=this.userSessionManagerService.area.map(function(t){return e.returnRecordIds(t)});return h(t,this.recordId)},e.prototype.returnRecordIds=function(e){return this.userSessionManagerService.isGuest()?e.pnx.control.recordid[0]:e},e.prototype.doPinItem=function(e){var t=angular.element(e.target),r=t.parent("md-button").parent();console.log(r);var n=angular.element(document.getElementById("fixed-buttons-holder")),i=angular.element(document.getElementById("favorites-button")),o=n.prop("offsetLeft")+this.$window.pageXOffset+8,a=n.prop("offsetTop")+this.$window.pageYOffset+-1;console.log("X: "+o+"Y: "+a);var s=r[0].getBoundingClientRect(),c=s.left-1,l=s.top+1+this.$window.pageYOffset,u=angular.element('<div class="pinDummy" style="top:'+l+"px; left:"+c+'px">              <prm-icon>                  <md-icon>                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="100%" height="100%" viewBox="0 0 24 24" fit="" preserveAspectRatio="xMidYMid meet" focusable="false"><path d="M16,12V4H17V2H7V4H8V12L6,14V16H11.2V22H12.8V16H18V14L16,12Z"></path></svg>                  </md-icon>              </prm-icon>          </div>');angular.element(document.body).append(u),this.$timeout(function(){u.addClass("animating")},0),this.$timeout(function(){u.css({top:a+"px",left:o+"px"})},100),this.$timeout(function(){i.addClass("animating")},600),this.$timeout(function(){u.remove()},2e3),this.$timeout(function(){i.removeClass("animating")},1800)},e.prototype.reloadListInFavoriteStateForGuest=function(e){this.isFavoriteState()&&this.favoritesService.getItemsFromLocalForage(e)},e.prototype.isFavoriteState=function(){return this.$state.current.name==p.STATE_NAMES.FAVORITES},e.prototype.reloadListInFavoriteStateForUser=function(){this.isFavoriteState()&&this.favoritesService.getItemsFromServer()},e.prototype.unpinFavorites=function(){var e=this.jwtUtilService.getDecodedToken().user;this.isGuest()?this.unpinFavoritesForGuest(e):this.unpinFavoritesForUser(e)},e.prototype.unpinFavoritesForGuest=function(e){var t=this;this.userSessionManagerService.createOrGetUserArea(e).then(function(r){t.userSessionManagerService.area=r;var n=t.isRecordInArea();n!=-1&&t.userSessionManagerService.removeRecordFromFavorites(n).then(function(){t.briefResultService.saveJsonOdIdsAndPins(t.recordId,!1),t.favoritesService.getItemsFromLocalForage(e)})})},e.prototype.unpinFavoritesForUser=function(e){var t=this;this.userSessionManagerService.createOrGetUserArea(e).then(function(e){t.userSessionManagerService.area=e;var r=t.isRecordInArea();t.briefResultService.removeUserFavorite(t.recordId).then(function(){t.userSessionManagerService.removeRecordFromFavorites(r).then(function(){t.briefResultService.saveJsonOdIdsAndPins(t.recordId,!1),t.favoritesService.getItemsFromServer()},function(){t.favoritesService.getItemsFromServer()})})})},e}();n([a.Input(),i("design:type",Object)],m.prototype,"item",void 0),n([a.Input(),i("design:type",Boolean)],m.prototype,"isFavorites",void 0),n([a.Input(),i("design:type",Number)],m.prototype,"index",void 0),n([a.Input(),i("design:type",String)],m.prototype,"recordid",void 0),n([a.Input(),i("design:type",Function)],m.prototype,"getRecordFunction",void 0),n([f.beacon({p:"brief",op:"favorites"}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],m.prototype,"updateFavorites",null),m=n([a.Component({selector:"prm-save-to-favorites-button",templateUrl:"components/favorites/saveToFavoritesButton/save-to-favorites-button.html"}),o(5,a.Inject("$state")),o(6,a.Inject("$timeout")),o(7,a.Inject("featuredActionsIcons")),o(8,a.Inject("$window")),i("design:paramtypes",[d.FavoritesService,s.BriefResultService,c.JwtUtilService,l.StorageUtil,u.UserSessionManagerService,Object,Function,Object,Object,f.PrimolyticsService])],m),r.PrmSaveToFavoritesButton=m},{"../../analytics/primolytics.service":480,"../../infra/storageUtil.service":571,"../../primoExplore/primoExploreStates.module":620,"../../search/briefResult/briefResult.service":651,"../../security/jwtUtil.service":842,"../../security/userSessionManager.service":853,"../favorites.service":511,"lodash/indexOf":261,"ng-metadata/core":362}],520:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("./savedQueries.service"),s=function(){function e(e){var t=this;this.savedQueriesService=e,this.savedQueriesService.getItemsFromApi().then(function(e){t.savedQueriesService.resetItems()})}return e.prototype.getItems=function(){return this.savedQueriesService.Items},e}();s=n([o.Component({selector:"prm-saved-queries",templateUrl:"components/favorites/savedQueries/savedQueries.html"}),i("design:paramtypes",[a.SavedQueriesService])],s),r.PrmSavedQueries=s},{"./savedQueries.service":522,"ng-metadata/core":362}],521:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./savedQueries.service"),a=e("./savedQueries.directive"),s=function(){function e(){}return e}();s=n([i.NgModule({declarations:[a.PrmSavedQueries],providers:[o.SavedQueriesService],imports:[]})],s),r.SavedQueriesModule=s},{"./savedQueries.directive":520,"./savedQueries.service":522,"ng-metadata/core":362}],522:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../appConfig/appConfigForward"),c=e("../../search/cheetah.service"),l=(e("lodash/intersection"),e("lodash/keys"),e("lodash/isEmpty"),function(){function e(e,t,r,n,i){this.cheetahService=e,this.$http=t,this.$location=r,this.$stateParams=n,this.restBaseURLs=i,this.totalItems=[],this.numberOfItemsToDisplay=10,this.favoritesInProgress=!1,this.unlabeledRecords=!1,this.isFirstBulk=!0,this.needToChangeUrl=!1,this.allItems=!1,this._user=!1,this.firstBulk=0,this.countRecords=0,this.bulkSize=10,this.vid=s.getVid(),this.GET_URL=i.saveSearchURL}return e.prototype.getItemsFromApi=function(){var e=this;return this.makeRequest("get",null,"GET","?vid="+s.getVid()).then(function(t){console.log("entire res:"+JSON.stringify(t)),e.totalItems=[],e.items=[];for(var r=0,n=t.searchesList;r<n.length;r++){var i=n[r];e.totalItems.push(new u(i))}e.isFirstBulk?(e.isFirstBulk=!1,e.resetItems()):e.refreshItems()},function(e){console.log("get searches failed: ",e)})},Object.defineProperty(e.prototype,"Items",{get:function(){return this.items},enumerable:!0,configurable:!0}),e.prototype.setItems=function(e){return this.items=e},e.prototype.nextResults=function(){var e=Math.min(this.bulkSize,this.totalItems.length-this.numberOfItemsToDisplay);e>0?(this.numberOfItemsToDisplay+=e,this.items=this.totalItems.slice(0,this.numberOfItemsToDisplay),e<this.bulkSize&&(this.allItems=!0)):this.allItems=!0},e.prototype.hasNextResults=function(){return!this.allItems&&this.totalItems.length>this.bulkSize},e.prototype.refreshItems=function(){this.items=this.totalItems.slice(0,this.numberOfItemsToDisplay)},e.prototype.resetItems=function(){this.allItems=!1,this.numberOfItemsToDisplay=this.bulkSize,this.items=this.totalItems.slice(0,this.numberOfItemsToDisplay)},e.prototype.calculatePayload=function(e,t){var r={add:[{searchData:this.cheetahService.searchData,queryUrl:e,email:t}]};return r},e.prototype.makeRequest=function(e,t,r,n){var i=this;void 0===t&&(t=null),void 0===r&&(r=null),void 0===n&&(n="");var o={method:r,url:this.GET_URL+n,params:"GET"===r?t:null,data:"POST"===r||"PUT"===r?t:null};return this.$http(o).then(function(e){return i.reqSuccess(e.data)},function(r){return i.reqFailure(r,e,t)})},e.prototype.removeSearch=function(e){var t={ids:[{id:e}]};return this.makeRequest("remove",t,"POST","/remove?vid="+s.getVid())},e.prototype.removeSelectedSearches=function(){for(var e=this.getCheckedItems(),t={ids:[]},r=0,n=e;r<n.length;r++){var i=n[r];t.ids.push({id:i.ID})}return this.makeRequest("remove",t,"POST","/remove?vid="+s.getVid())},e.prototype.updateAlerts=function(e,t){var r=e.ID,n=e.alert?0:1,i={ids:[{id:r}],isAlert:n,email:t};return this.makeRequest("update",i,"PUT","?vid="+s.getVid())},e.prototype.createRSS=function(e){var t=e.ID,r={ver:"2_1_4",gatherpagestat:"true",EXLTabBoomId:"xxxxx",boombaseurl:"https://beacon01.alma.exlibrisgroup.com/boom/apache_pb.gif",encCtxt:e.encCtxt,sr:e.sr},n="/primo_library/libweb/action/../newRss?rssId="+t+"&amp;ver=2_1_4",i={params:r};return this.$http.post(n,r,i)},e.prototype.setAlertToSelectedSearches=function(e,t){e=e?e:"",t=t?t:this.getCheckedItems().map(function(e){return e.ID});for(var r={ids:[],isAlert:1,email:e},n=0,i=t;n<i.length;n++){var o=i[n];r.ids.push({id:o})}return this.makeRequest("update",r,"PUT","?vid="+s.getVid())},e.prototype.reqSuccess=function(e){return e},e.prototype.reqFailure=function(e,t,r){throw e},e.prototype.getCheckedItems=function(){return this.items?this.items.filter(function(e){return e.checked}):[]},e}());l=n([a.Injectable(),o(1,a.Inject("$http")),o(2,a.Inject("$location")),o(3,a.Inject("$stateParams")),o(4,a.Inject("restBaseURLs")),i("design:paramtypes",[c.Cheetah,Function,Object,Object,Object])],l),r.SavedQueriesService=l;var u=function(){function e(e){this.ID=e.ID,this.alert=e.alert,this.creationDate=e.creationDate,this.deepLink=e.deepLink,this.email=e.email,this.mode=e.mode,this.query=e.query,this.scope=e.scope,this.tab=e.tab,this.checked=!1,this.pfilter=e.pfilter,this.facet=e.facet,this.cheetahSearchData=e.cheetahSearchData,this.sr=e.sr,this.encCtxt=e.encCtxt,this.rsscreated=e.rsscreated}return e}();r.SavedQueryItem=u},{"../../appConfig/appConfigForward":484,"../../search/cheetah.service":661,"lodash/intersection":262,"lodash/isEmpty":268,"lodash/keys":281,"ng-metadata/core":362}],523:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("./searchHistory.service"),s=function(){function e(e){this.searchHistoryService=e,this.searchHistoryService.getItemsFromLocalForage()}return e.prototype.getItems=function(){return this.searchHistoryService.getItems()},e}();s=n([o.Component({selector:"prm-search-history",templateUrl:"components/favorites/searchHistory/search-history.html"}),i("design:paramtypes",[a.SearchHistoryService])],s),r.PrmSearchHistory=s},{"./searchHistory.service":525,"ng-metadata/core":362}],524:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./searchHistory.service"),a=e("./searchHistory.directive"),s=function(){function e(){}return e}();s=n([i.NgModule({declarations:[a.PrmSearchHistory],providers:[o.SearchHistoryService],imports:[]})],s),r.SearchHistoryModule=s},{"./searchHistory.directive":523,"./searchHistory.service":525,"ng-metadata/core":362}],525:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../appConfig/appConfigForward"),c=e("../../search/searchState.service"),l=e("../../search/cheetah.service"),u=e("../../security/jwtUtil.service"),d=e("../savedQueries/savedQueries.service"),p=e("../../security/userSessionManager.service"),f=e("../../security/browserStorageManager.service"),h=e("../../search/search.fields.service"),m=e("../../search/savedQueries/addQueryToSavedSearches/addQueryToSavedSearches.service"),g=e("../savedQueries/savedQueries.service"),v=e("../../infra/storageUtil.service"),y=e("../../nddUtils/configurationUtil.service"),b=e("../../search/facet/facet.service"),S=e("../../nddUtils/filterInstitution.service"),_=(e("he"),e("lodash/includes")),w=(e("lodash/filter"),e("lodash/uniqBy")),E=(e("lodash/some"),e("lodash/flatten")),T=e("lodash/join"),O=(e("lodash/endsWith"),e("lodash/trimEnd"),e("angular")),I=function(){function e(e,t,r,n,i,o,a,c,l,u,d,p,f,h,m,g,v,y,b,S,_){this.cheetahService=e,this.$http=t,this.$location=r,this.$stateParams=n,this.restBaseURLs=i,this.$filter=o,this.$mdToast=a,this.$httpParamSerializer=c,this.$translate=l,this.$timeout=u,this.filterInstitution=d,this.addQueryToSavedSearchesService=p,this.searchFieldsService=f,this.facetService=h,this.browserStorageManagerService=m,this.savedQueriesService=g,this.searchStateService=v,this.userSessionManagerService=y,this.jwtUtilService=b,this.storageUtil=S,this.configurationUtil=_,this.totalItems=[],this.items=[],this.numberOfItemsToDisplay=10,this.bulkSize=10,this.allItems=!1,this.vid=s.getVid(),this.GET_URL=i.saveSearchURL,this.browserStorageManagerService.cleanOldItemsFromLocalForage()}return e.prototype.isLoggedIn=function(){return this.userSessionManagerService.getUserName().length>0},e.prototype.getItems=function(){return this.items},e.prototype.getItemsFromLocalForage=function(){var e=this,t=this.jwtUtilService.getDecodedToken().user,r=t+"_SearchHistoryQeuriesKey";this.storageUtil.$localForage.getItem(r).then(function(t){return null==t&&(t=[]),e.totalItems=t,e.items=[],e.resetItems(),t})},e.prototype.changeSearchHistorylocalForageKey=function(e){var t=this,r=this.jwtUtilService.getDecodedToken().user,n=e+"_SearchHistoryQeuriesKey",i=r+"_SearchHistoryQeuriesKey";this.storageUtil.$localForage.getItem(n).then(function(e){return null==e&&(e=[]),t.storageUtil.$localForage.setItem(i,e).then(function(e){t.getItemsFromLocalForage()})})},e.prototype.nextResults=function(){var e=Math.min(this.bulkSize,this.totalItems.length-this.numberOfItemsToDisplay);e>0?(this.numberOfItemsToDisplay+=e,this.items=this.totalItems.slice(0,this.numberOfItemsToDisplay),e<this.bulkSize&&(this.allItems=!0)):this.allItems=!0},e.prototype.hasNextResults=function(){return!this.allItems&&this.totalItems.length>this.bulkSize},e.prototype.removeSearchHistoryItem=function(e){var t=this,r=this.jwtUtilService.getDecodedToken().user,n=r+"_SearchHistoryQeuriesKey",i=this.storageUtil.$localForage.getItem(n).then(function(r){return null==r&&(r=[]),r=r.filter(function(t){return t.ID!==e}),t.storageUtil.$localForage.setItem(n,r)});return i},e.prototype.removeSearchHistorySelectedItems=function(){var e=this,t=this.jwtUtilService.getDecodedToken().user,r=t+"_SearchHistoryQeuriesKey",n=this.getCheckedItems(),i=n.map(function(e){return e.ID}),o=this.storageUtil.$localForage.getItem(r).then(function(t){return null==t&&(t=[]),t=t.filter(function(e){return!_(i,e.ID)}),e.storageUtil.$localForage.setItem(r,t)});return o},e.prototype.getCheckedItems=function(){return this.items?this.items.filter(function(e){return e.checked}):[]},e.prototype.setItems=function(e){return this.items=e},e.prototype.setTotalItems=function(e){return this.totalItems=e},e.prototype.refreshItems=function(){this.items=this.totalItems.slice(0,this.numberOfItemsToDisplay)},e.prototype.resetItems=function(){this.allItems=!1,this.numberOfItemsToDisplay=this.bulkSize,this.items=this.totalItems.slice(0,this.numberOfItemsToDisplay)},e.prototype.saveSearchHistoryItemToSavedSearches=function(e){var t=this,r=this.getSearchHistoryItemByItemID(e),n=this.calculatePayload([r]);return this.makeRequest("add",n,"POST","/add?vid="+s.getVid()).then(function(e){var r='<prm-add-alert-toast id="'+e.id+'" add-mode="'+!0+'" user-email="'+e.email+'"></prm-add-alert-toast>';t.$mdToast.show({hideDelay:8e3,position:"top right",template:r}).then(function(){t.addQueryToSavedSearchesService.onToastClose()})},function(e){console.log("add failed: ",e)}).then(function(e){t.savedQueriesService.getItemsFromApi()})},e.prototype.saveSelectedSearchHistoryItemsToSavedSearches=function(){var e=this,t=this.getCheckedItems(),r=this.calculatePayload(t);return this.makeRequest("add",r,"POST","/add?vid="+s.getVid()).then(function(t){e.savedQueriesService.getItemsFromApi()})},e.prototype.removeSearchHistoryItemFromSavedSearches=function(e){var t=this,r=this.getParallelSavedSearchesId(e),n=r.map(function(e){return{id:e.ID}}),i={ids:n};return this.makeRequest("remove",i,"POST","/remove?vid="+s.getVid()).then(function(e){t.savedQueriesService.getItemsFromApi()})},e.prototype.removeSelectedSearchHistoryItemFromSavedSearches=function(){for(var e=this,t=this.getCheckedItems(),r=[],n=0,i=t;n<i.length;n++){var o=i[n];if(this.isSearchHistoryItemInSavedSearches(o))for(var a=this.getParallelSavedSearchesId(o.ID),c=0,l=a;c<l.length;c++){var u=l[c];r.push({id:u.ID})}}var d={ids:w(r,"id")};return this.makeRequest("remove",d,"POST","/remove?vid="+s.getVid()).then(function(t){e.savedQueriesService.getItemsFromApi()})},e.prototype.getParallelSavedSearchesId=function(e){var t=this,r=this.getSearchHistoryItemByItemID(e),n=this.savedQueriesService.items,i=n.filter(function(e){return t.compareSearchHistoryAndSavedQueriesItems(r,e)});return i},e.prototype.getSearchHistoryItemByItemID=function(e){var t=this.items.filter(function(t){return t.ID===e})[0];return t},e.prototype.isSearchHistoryItemInSavedSearches=function(e){var t=this,r=this.savedQueriesService.items;if(r){var n=r.filter(function(r){return t.compareSearchHistoryAndSavedQueriesItems(e,r)});return n.length>0}return!1},e.prototype.compareSearchHistoryAndSavedQueriesItems=function(e,t){var r=decodeURI(e.facet)===decodeURI(t.facet)&&decodeURI(e.pfilter)===decodeURI(t.pfilter)&&decodeURI(e.scope)===decodeURI(t.scope)&&decodeURI(e.query)===decodeURI(t.query);return r},e.prototype.multiReplace=function(e,t,r){if(t===r)return e;do e=e.replace(t,r);while(e.indexOf(t)!==-1);return e},e.prototype.makeRequest=function(e,t,r,n){var i=this;void 0===t&&(t=null),void 0===r&&(r=null),void 0===n&&(n="");var o={method:r,url:this.GET_URL+n,params:"GET"===r?t:null,data:"POST"===r||"PUT"===r?t:null};return this.$http(o).then(function(e){return i.reqSuccess(e.data)},function(r){return i.reqFailure(r,e,t)})},e.prototype.reqSuccess=function(e){return e},e.prototype.reqFailure=function(e,t,r){throw e},e.prototype.onToastClose=function(){O.element(document.querySelector("primo-explore")).css("position","")},e.prototype.calculatePayload=function(e){for(var t=[],r=0,n=e;r<n.length;r++){var i=n[r],o="";o=i.deepLink,o=this.multiReplace(o,"+","%20");var a=i.cheetahSearchData;t.push({searchData:a,queryUrl:o})}var s={add:t};return s},e.prototype.updateSearchHistory=function(){var e=this;if(this.storageUtil.isLocalStorageAvailable){var t=this.jwtUtilService.getDecodedToken().user,r=t+"_SearchHistoryQeuriesKey",n=this.createSavedQueryItem();this.userSessionManagerService.createOrGetUserArea(t).then(function(t){e.browserStorageManagerService.area=t,e.browserStorageManagerService.addValueToKeyInLocalForage(r,n)})}},e.prototype.getFacetsList=function(){var e=void 0!=this.$stateParams.facet?this.$stateParams.facet:[],t=void 0!=this.$stateParams.mfacet?this.$stateParams.mfacet:[],r=void 0;return(e.length>0||t.length>0)&&(r=decodeURI(T(E([e,t]),";"))),r},e.prototype.createSavedQueryItem=function(){var e=(this.jwtUtilService.getDecodedToken().user,""),t="/primo-explore/";this.configurationUtil.isSuprima()&&(t="/discovery/"),e=this.$location.protocol()+"://"+location.host+t+"search?"+this.$httpParamSerializer(this.searchFieldsService.searchParams),e=this.multiReplace(e,"+","%20");var r=this.searchStateService.getSearchObject(),n={};n.alert=!1;var i=new Date;n.ID=parseInt(i.getHours().toString()+i.getMinutes().toString()+i.getSeconds().toString()+i.getMilliseconds().toString()),n.creationDate=i.getDate()+"/"+(i.getMonth()+1)+"/"+i.getFullYear()+" "+i.getHours()+":"+("00"+i.getMinutes()).slice(-2)+":"+("00"+i.getSeconds()).slice(-2),n.deepLink=e,n.email="",n.mode=r.mode,"advanced"!==n.mode&&(n.mode="simple"),n.query=decodeURI(T(E([this.$stateParams.query]),";")),""==n.query&&(n.query=void 0),n.scope=decodeURI(r.scope),n.tab=r.tab,n.checked=!1,n.pfilter=decodeURI(T(E([this.$stateParams.pfilter]),";")),""==n.pfilter&&(n.pfilter=void 0),n.facet=this.getFacetsList(),n.cheetahSearchData=this.cheetahService.searchData;var o=new d.SavedQueryItem(n);return o},e}();I=n([a.Injectable(),o(1,a.Inject("$http")),o(2,a.Inject("$location")),o(3,a.Inject("$stateParams")),o(4,a.Inject("restBaseURLs")),o(5,a.Inject("$filter")),o(6,a.Inject("$mdToast")),o(7,a.Inject("$httpParamSerializer")),o(8,a.Inject("$translate")),o(9,a.Inject("$timeout")),i("design:paramtypes",[l.Cheetah,Function,Object,Object,Object,Object,Object,Function,Function,Function,S.FilterInstitution,m.AddQueryToSavedSearchesService,h.SearchFieldsService,b.FacetService,f.BrowserStorageManagerService,g.SavedQueriesService,c.SearchStateService,p.UserSessionManagerService,u.JwtUtilService,v.StorageUtil,y.ConfigurationUtil])],I),r.SearchHistoryService=I},{"../../appConfig/appConfigForward":484,"../../infra/storageUtil.service":571,"../../nddUtils/configurationUtil.service":596,"../../nddUtils/filterInstitution.service":599,"../../search/cheetah.service":661,"../../search/facet/facet.service":679,"../../search/savedQueries/addQueryToSavedSearches/addQueryToSavedSearches.service":784,"../../search/search.fields.service":790,"../../search/searchState.service":814,
"../../security/browserStorageManager.service":841,"../../security/jwtUtil.service":842,"../../security/userSessionManager.service":853,"../savedQueries/savedQueries.service":522,angular:"angular",he:32,"lodash/endsWith":242,"lodash/filter":246,"lodash/flatten":251,"lodash/includes":260,"lodash/join":280,"lodash/some":303,"lodash/trimEnd":317,"lodash/uniqBy":322,"ng-metadata/core":362}],526:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){this.tmhDynamicLocale=e,this.$translate=t}return e.prototype.getLanguage=function(){return this.$translate.use()},e.prototype.setLanguage=function(e){this.$translate.preferredLanguage(e);var t=e.split("_");return t.length>1&&("iw"===t[0]&&(t[0]="he"),t[1]=t[1].toLowerCase()),this.tmhDynamicLocale.set(t.join("-")),this.$translate.use(e)},e}();r.I18n=n,n.$inject=["tmhDynamicLocale","$translate"]},{}],527:[function(e,t,r){"use strict";function n(e,t,r){var n=a.getAttributesMap();t.useUrlLoader(e.translationsUrl+"/"+p.getVid()),t.preferredLanguage(n.interfaceLanguage),t.useSanitizeValueStrategy("sanitizeParameters"),t.useMissingTranslationHandler("PrmMissingTranslationHandler"),r.localeLocationPattern("lib/i18n/angular-locale_{{locale}}.js")}function i(e,t,r,n){var i,o=r.getDecodedToken();i="GUEST"!==o.userGroup&&""!==o.language&&o.language!==t.use()?o.language:n.search().lang?n.search().lang:"",i&&e.setLanguage(i)}Object.defineProperty(r,"__esModule",{value:!0});var o=e("../translate/prmTranslate.module"),a=e("../appConfig/appConfigForward"),s=e("angular-translate");e("angular-translate-loader-url");var c=e("angular-dynamic-locale"),l=e("../security/jwtUtil.service"),u=e("ng-metadata/core"),d=e("./I18n.service"),p=e("../appConfig/appConfigForward"),f=e("../appConfig/appConfig.module"),h=e("angular");r.default=h.module("primo-explore.i18n",[f.default.name,s,c,o.default.name]).config(n).run(i).service("I18nService",d.I18n),n.$inject=["restBaseURLs","$translateProvider","tmhDynamicLocaleProvider"],i.$inject=["I18nService","$translate",u.getInjectableName(l.JwtUtilService),"$location"]},{"../appConfig/appConfig.module":482,"../appConfig/appConfigForward":484,"../security/jwtUtil.service":842,"../translate/prmTranslate.module":881,"./I18n.service":526,angular:"angular","angular-dynamic-locale":9,"angular-translate":26,"angular-translate-loader-url":25,"ng-metadata/core":362}],528:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=function(){function e(e){this.$element=e}return e.prototype.ngOnInit=function(){this.prmAriaLabel="undefined"==typeof this.prmAriaLabel&&"undefined"==typeof this.ariaLabel?"icon-"+this.iconDefinition:this.prmAriaLabel||this.ariaLabel},e}();n([a.Input(),i("design:type",String)],s.prototype,"class",void 0),n([a.Input(),i("design:type",String)],s.prototype,"iconType",void 0),n([a.Input(),i("design:type",String)],s.prototype,"iconDefinition",void 0),n([a.Input(),i("design:type",String)],s.prototype,"svgIconSet",void 0),n([a.Input(),i("design:type",String)],s.prototype,"prmAriaLabel",void 0),n([a.Input(),i("design:type",String)],s.prototype,"ariaLabel",void 0),s=n([a.Component({selector:"prm-icon",templateUrl:"components/icon/icon.html"}),o(0,a.Inject("$element")),i("design:paramtypes",[Object])],s),r.PrmIcon=s},{"ng-metadata/core":362}],529:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("angular-material"),a=e("./icon.directive"),s=function(){function e(){}return e}();s=n([i.NgModule({declarations:[a.PrmIcon],providers:[o]})],s),r.IconModule=s},{"./icon.directive":528,"angular-material":17,"ng-metadata/core":362}],530:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("../search/citationTrails/citationTrails.service"),s=e("../appConfig/appConfigForward"),c=e("lodash/has"),l=function(){function e(e){this.citationTrailsService=e}return e.prototype.getCitationTrails=function(e){return c(e,"extras.citationTrails")?e.extras.citationTrails:null},e.prototype.hasCitationTrails=function(e){var t=this.getCitationTrails(e);return t&&(t.citing&&t.citing.length>0||t.citedby&&t.citedby.length>0)},e.prototype.loadRecordsExtras=function(e){if(s.isCitationTrailsEnabled())return this.citationTrailsService.updateCitationsList(e.filter(function(e){return!c(e,"extras.citationTrails")}))},e}();l=n([o.Injectable(),i("design:paramtypes",[a.CitationTrailsService])],l),r.RecordUtil=l},{"../appConfig/appConfigForward":484,"../search/citationTrails/citationTrails.service":663,"lodash/has":257,"ng-metadata/core":362}],531:[function(e,t,r){"use strict";function n(e,t,r){var n=r.value;return r.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=i.element(document.getElementsByTagName("primo-explore")).injector().get("$state");r.current.reloadOnSearch=!1;var o=n.apply(this,e),a=i.element(document.getElementsByTagName("primo-explore")).injector().get("$rootScope").$on("$locationChangeSuccess",function(){r.current.reloadOnSearch=!0,a()});return o},r}Object.defineProperty(r,"__esModule",{value:!0});var i=e("angular");r.preventStateReload=n},{angular:"angular"}],532:[function(e,t,r){"use strict";function n(e,t,r,n,s,d,p,f,h,m){function g(){r.initOptionalProperties(e,h,{searchText:null,selectedItem:null}),s(t),S(),r.nextTick(function(){w(),y(),b(),t.on("focus",b)})}function v(){function n(){var e=0,r=t.find("md-input-container");if(r.length){var n=r.find("input");e=r.prop("offsetHeight"),e-=n.prop("offsetTop"),e-=n.prop("offsetHeight"),e+=r.prop("offsetTop")}return e}function i(){var e=he.scrollContainer.getBoundingClientRect(),t={};e.right>d.right-l&&(t.left=a.right-e.width+"px"),he.$.scrollContainer.css(t)}if(!he)return r.nextTick(v,!1,e);var o,a=he.wrap.getBoundingClientRect(),s=he.snap.getBoundingClientRect(),d=he.root.getBoundingClientRect(),p=s.bottom-d.top,f=d.bottom-s.top,m=a.left-d.left,g=a.width,y=n();h.mdFloatingLabel&&(m+=u,g-=2*u),o={left:m+"px",minWidth:g+"px",maxWidth:Math.max(a.right-d.left,d.right-a.left)-l+"px"},p>f&&d.height-a.bottom-l<c?(o.top="auto",o.bottom=f+"px",o.maxHeight=Math.min(c,a.top-d.top-l)+"px"):(o.top=p-y+"px",o.bottom="auto",o.maxHeight=Math.min(c,d.bottom+r.scrollTop()-a.bottom-l)+"px"),he.$.scrollContainer.css(o),r.nextTick(i,!1)}function y(){he.$.root.length&&(s(he.$.scrollContainer),he.$.scrollContainer.detach(),he.$.root.append(he.$.scrollContainer),p.pin&&p.pin(he.$.scrollContainer,f))}function b(){e.autofocus&&he.input.focus()}function S(){var t=parseInt(e.delay,10)||0;h.$observe("disabled",function(e){de.isDisabled=r.parseAttributeBoolean(e,!1)}),h.$observe("required",function(e){de.isRequired=r.parseAttributeBoolean(e,!1)}),h.$observe("readonly",function(e){de.isReadonly=r.parseAttributeBoolean(e,!1)}),e.$watch("searchText",t?r.debounce(x,t):x),e.$watch("selectedItem",A),a.element(d).on("resize",v),e.$on("$destroy",_)}function _(){r.enableScrolling();var e=document.getElementsByTagName("body")[0];if(e.setAttribute("style","overflow-x: initial"),a.element(d).off("resize",v),he){var t="ul scroller scrollContainer input".split(" ");a.forEach(t,function(e){he.$[e].remove()})}}function w(){he={main:t[0],scrollContainer:t[0].querySelector(".md-virtual-repeat-container"),scroller:t[0].querySelector(".md-virtual-repeat-scroller"),ul:t[0].querySelector("ul"),input:t[0].querySelector("input"),wrap:t[0].querySelector("md-autocomplete-wrap"),root:document.body},he.li=he.ul.getElementsByTagName("li"),he.snap=E(),he.$=T(he)}function E(){for(var e=t;e.length;e=e.parent())if(a.isDefined(e.attr("md-autocomplete-snap")))return e[0];return he.wrap}function T(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=a.element(e[r]));return t}function O(t,n){!t&&n?(v(),he&&r.nextTick(function(){var e=(r.disableScrollAround(he.ul),document.getElementsByClassName("md-scroll-mask")[0]);e.onclick=function(){},_e=I(a.element(he.wrap))},!1,e)):t&&!n&&r.nextTick(function(){r.enableScrolling();var e=document.getElementsByTagName("body")[0];e.setAttribute("style","overflow-x: initial"),_e&&(_e(),_e=null)},!1,e)}function I(e){function t(e){e.preventDefault()}return e.on("wheel",t),e.on("touchmove",t),function(){e.off("wheel",t),e.off("touchmove",t)}}function P(){ge=!0}function R(){ye||he.input.focus(),ge=!1,de.hidden=z()}function C(){he.input.focus()}function A(t,r){t&&q(t).then(function(n){e.searchText=n,D(t,r)}),t!==r&&j()}function j(){a.isFunction(e.itemChange)&&e.itemChange(H(e.selectedItem))}function k(){a.isFunction(e.textChange)&&e.textChange()}function D(e,t){ve.forEach(function(r){r(e,t)})}function $(e){ve.indexOf(e)==-1&&ve.push(e)}function M(e){var t=ve.indexOf(e);t!=-1&&ve.splice(t,1)}function x(t,r){de.index=V(),t!==r&&q(e.selectedItem).then(function(n){t!==n&&(e.selectedItem=null,t!==r&&k(),J()?le():(de.matches=[],Y(!1),ne()))})}function F(){ye=!1,ge||(de.hidden=z())}function L(e){e&&(ge=!1,ye=!1),he.input.blur()}function U(){ye=!0,a.isString(e.searchText)||(e.searchText=""),de.hidden=z(),de.hidden||le()}function B(t){switch(t.keyCode){case n.KEY_CODE.DOWN_ARROW:if(de.loading)return;t.stopPropagation(),t.preventDefault();var r=de.index[0],i=de.index[1]+1;r<0&&(r=0);var o=!1;i>=de.matches[r].length&&(i=0,r+=1,r===de.matches.length&&(o=!0,r=-1,i=-1)),de.index[0]=r,de.index[1]=i,oe(),ne();break;case n.KEY_CODE.UP_ARROW:if(de.loading)return;t.stopPropagation(),t.preventDefault();var a=de.index[0],s=de.index[1]-1;if(s<0){if(a-=1,a<0){var c=de.matches.length;a=(a%c+c)%c}s=de.matches[a].length-1}de.index[0]=a,de.index[1]=s,oe(),ne();break;case n.KEY_CODE.TAB:if(R(),de.hidden||de.loading||de.index[0]<0||de.matches.length<1)return;ee(de.index);break;case n.KEY_CODE.ENTER:if(de.hidden||de.loading||de.index[0]<0||de.matches.length<1)return;if(Q())return;t.stopPropagation(),t.preventDefault(),ee(de.index);break;case n.KEY_CODE.ESCAPE:t.stopPropagation(),t.preventDefault(),e.searchText&&te(),L(!0)}}function N(){return a.isNumber(e.minLength)?e.minLength:1}function q(t,r){function n(t,r){var n=r&&t.displayName?" "+t.displayName:"";return t&&e.itemText?e.itemText(H(t))+n:null}return m.when(n(t,r)||t)}function H(e){if(e){var t={};return de.itemName&&(t[de.itemName]=e),t}}function V(){return e.autoselect?[0,0]:[-1,-1]}function Y(e){de.loading!=e&&(de.loading=e),de.hidden=z()}function z(){return!(!de.loading||W())||(!!Q()||(!ye||!G()))}function G(){return J()&&W()||ce()}function W(){return!!de.matches.length}function Q(){return!!de.scope.selectedItem}function K(){return de.loading&&!Q()}function X(e){return de.index[0]===-1?q(null):q(de.matches[de.index[0]][de.index[1]],e)}function J(){return(e.searchText||"").length>=N()}function Z(e,t,r){Object.defineProperty(de,e,{get:function(){return r},set:function(e){var n=r;r=e,t(e,n)}})}function ee(t){r.nextTick(function(){q(de.matches[t[0]][t[1]]).then(function(e){var t=he.$.input.controller("ngModel");t.$setViewValue(e),t.$render()}).finally(function(){e.selectedItem=de.matches[t[0]][t[1]],Y(!1)})},!1)}function te(){Y(!0),de.index=[0,0],de.matches=[],e.searchText="";var t=document.createEvent("CustomEvent");t.initCustomEvent("input",!0,!0,{value:e.searchText}),he.input.dispatchEvent(t),he.input.focus()}function re(t){function n(t){t&&(t=m.when(t),Se++,Y(!0),r.nextTick(function(){t.then(i).finally(function(){0===--Se&&Y(!1)})},!0,e))}function i(r){me[s]=r,(t||"")===(e.searchText||"")&&(de.matches=r,de.hidden=z(),de.loading&&Y(!1),e.selectOnMatch&&ue(),ne(),v())}var o=e.$parent.$eval(fe),s=t.toLowerCase(),c=a.isArray(o),l=!!o.then;c?i(o):l&&n(o)}function ne(){X(!0).then(function(e){de.messages=[ie(),e]})}function ie(){if(be===de.matches.length)return"";switch(be=de.matches.length,de.matches.length){case 0:return"There are no matches available.";case 1:return"There is 1 match available.";default:return"There are "+de.matches.length+" matches available."}}function oe(){if(he.li[0]){var e=i(o(de.matches,de.index[0]),function(e){return e.length})+de.index[1],t=he.li[0].offsetHeight,r=t*e,n=r+t,a=he.scroller.clientHeight,s=he.scroller.scrollTop;r<s?se(r):n>s+a&&se(n-a)}}function ae(){return 0!==Se}function se(e){he.$.scrollContainer.controller("mdVirtualRepeatContainer").scrollTo(e)}function ce(){var e=(de.scope.searchText||"").length;return de.hasNotFound&&!W()&&(!de.loading||ae())&&e>=N()&&(ye||ge)&&!Q()}function le(){var t=e.searchText||"",r=t.toLowerCase();!e.noCache&&me[r]?(de.matches=me[r],ne()):re(t),de.hidden=z()}function ue(){var t=e.searchText,r=de.matches,n=r[0];1===r.length&&q(n).then(function(r){var n=t==r;e.matchInsensitive&&!n&&(n=t.toLowerCase()==r.toLowerCase()),n&&ee(0)})}var de=this,pe=e.itemsExpr.split(/ in /i),fe=pe[1],he=null,me={},ge=!1,ve=[],ye=!1,be=0,Se=0,_e=null;return Z("hidden",O,!0),de.scope=e,de.parent=e.$parent,de.itemName=pe[0],de.matches=[],de.loading=!1,de.hidden=!0,de.index=null,de.messages=[],de.id=r.nextUid(),de.isDisabled=null,de.isRequired=null,de.isReadonly=null,de.hasNotFound=!1,de.keydown=B,de.blur=F,de.focus=U,de.clear=te,de.select=ee,de.listEnter=P,de.listLeave=R,de.mouseUp=C,de.getCurrentDisplayValue=X,de.registerSelectedItemWatcher=$,de.unregisterSelectedItemWatcher=M,de.notFoundVisible=ce,de.loadingIsVisible=K,g()}var i=e("lodash/sumBy"),o=e("lodash/take"),a=e("angular");a.module("primo-explore.infra").controller("PrmAutocompleteCtrl",n);var s=41,c=5.5*s,l=8,u=2;n.$inject=["$scope","$element","$mdUtil","$mdConstant","$mdTheming","$window","$animate","$rootElement","$attrs","$q"]},{angular:"angular","lodash/sumBy":308,"lodash/take":310}],533:[function(e,t,r){function n(){return{controller:"PrmAutocompleteCtrl",controllerAs:"$mdAutocompleteCtrl",scope:{inputName:"@mdInputName",inputMinlength:"@mdInputMinlength",inputMaxlength:"@mdInputMaxlength",searchText:"=?mdSearchText",selectedItem:"=?mdSelectedItem",itemsExpr:"@mdItems",itemText:"&mdItemText",placeholder:"@placeholder",noCache:"=?mdNoCache",selectOnMatch:"=?mdSelectOnMatch",matchInsensitive:"=?mdMatchCaseInsensitive",itemChange:"&?mdSelectedItemChange",textChange:"&?mdSearchTextChange",minLength:"=?mdMinLength",delay:"=?mdDelay",autofocus:"=?mdAutofocus",floatingLabel:"@?mdFloatingLabel",autoselect:"=?mdAutoselect",menuClass:"@?mdMenuClass",inputId:"@?mdInputId"},link:function(e,t,r,n){n.hasNotFound=!!t.attr("md-has-not-found")},template:function(e,t){function r(){var t=e.find("md-item-template").detach(),r=t.length?t.html():e.html();return t.length||e.empty(),"<md-autocomplete-parent-scope md-autocomplete-replace>"+r+"</md-autocomplete-parent-scope>"}function n(){var t=e.find("md-not-found").detach(),r=t.length?t.html():"";return r?'<li ng-if="$mdAutocompleteCtrl.notFoundVisible()"                         md-autocomplete-parent-scope>'+r+"</li>":""}function i(){return t.mdFloatingLabel?'            <md-input-container flex ng-if="floatingLabel">              <label>{{floatingLabel}}</label>              <input type="search"                  '+(null!=c?'tabindex="'+c+'"':"")+'                  id="{{ inputId || \'fl-input-\' + $mdAutocompleteCtrl.id }}"                  name="{{inputName}}"                  autocomplete="off"                  ng-required="$mdAutocompleteCtrl.isRequired"                  ng-readonly="$mdAutocompleteCtrl.isReadonly"                  ng-minlength="inputMinlength"                  ng-maxlength="inputMaxlength"                  ng-disabled="$mdAutocompleteCtrl.isDisabled"                  ng-model="$mdAutocompleteCtrl.scope.searchText"                  ng-keydown="$mdAutocompleteCtrl.keydown($event)"                  ng-blur="$mdAutocompleteCtrl.blur()"                  '+(null!=t.mdNoAsterisk?'md-no-asterisk="'+t.mdNoAsterisk+'"':"")+'                  ng-focus="$mdAutocompleteCtrl.focus()"                  aria-owns="ul-{{$mdAutocompleteCtrl.id}}"                  '+(null!=t.mdSelectOnFocus?'md-select-on-focus=""':"")+'                  aria-label="{{floatingLabel}}"                  aria-autocomplete="list"                  role="combobox"                  aria-haspopup="true"                  aria-activedescendant=""                  aria-expanded="{{!$mdAutocompleteCtrl.hidden}}"/>              <div md-autocomplete-parent-scope md-autocomplete-replace>'+s+"</div>            </md-input-container>":'            <input flex type="search"                '+(null!=c?'tabindex="'+c+'"':"")+'                id="{{ inputId || \'input-\' + $mdAutocompleteCtrl.id }}"                name="{{inputName}}"                ng-if="!floatingLabel"                autocomplete="off"                ng-required="$mdAutocompleteCtrl.isRequired"                ng-disabled="$mdAutocompleteCtrl.isDisabled"                ng-readonly="$mdAutocompleteCtrl.isReadonly"                ng-model="$mdAutocompleteCtrl.scope.searchText"                ng-keydown="$mdAutocompleteCtrl.keydown($event)"                ng-blur="$mdAutocompleteCtrl.blur()"                ng-focus="$mdAutocompleteCtrl.focus()"                placeholder="{{placeholder}}"                aria-owns="ul-{{$mdAutocompleteCtrl.id}}"                '+(null!=t.mdSelectOnFocus?'md-select-on-focus=""':"")+'                aria-label="{{placeholder}}"                aria-autocomplete="list"                role="combobox"                aria-haspopup="true"                aria-activedescendant=""                aria-expanded="{{!$mdAutocompleteCtrl.hidden}}"/>            <button                type="button"                tabindex="-1"                ng-if="$mdAutocompleteCtrl.scope.searchText && !$mdAutocompleteCtrl.isDisabled"                ng-click="$mdAutocompleteCtrl.clear()"                class="animate-opacity-and-scale">              <prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="close"></prm-icon>              <span class="_md-visually-hidden">Clear</span>            </button>                '}var o=n(),a=r(),s=e.html(),c=t.tabindex;return o&&e.attr("md-has-not-found",!0),e.attr("tabindex","-1"),"        <md-autocomplete-wrap            layout=\"row\"            ng-class=\"{ 'md-whiteframe-z1': !floatingLabel, 'md-menu-showing': !$mdAutocompleteCtrl.hidden }\">          "+i()+'          <md-progress-linear              class="'+(t.mdFloatingLabel?"md-inline":"")+'"              ng-if="$mdAutocompleteCtrl.loadingIsVisible()"              md-mode="indeterminate"></md-progress-linear>          <md-virtual-repeat-container              id="prm-simple-search"              md-auto-shrink              md-auto-shrink-min="1"              ng-mouseenter="$mdAutocompleteCtrl.listEnter()"              ng-mouseleave="$mdAutocompleteCtrl.listLeave()"              ng-mouseup="$mdAutocompleteCtrl.mouseUp()"              ng-hide="$mdAutocompleteCtrl.hidden"              class="md-autocomplete-suggestions-container md-whiteframe-z1"              ng-class="{ \'md-not-found\': $mdAutocompleteCtrl.notFoundVisible() }"              role="presentation">           <ul class="md-autocomplete-suggestions"      ng-class="::menuClass"      id="ul-{{$mdAutocompleteCtrl.id}}">          <div ng-repeat="group in $mdAutocompleteCtrl.matches" ng-init="outerIndex = $index">          <li ng-repeat="item in group"      ng-class="{ selected: ((outerIndex === $mdAutocompleteCtrl.index[0]) && ($index === $mdAutocompleteCtrl.index[1])) }"      ng-click="$mdAutocompleteCtrl.select([outerIndex,$index])"      md-extra-name="$mdAutocompleteCtrl.itemName">'+a+'</li><md-divider ng-if="!$last"></md-divider></div>'+o+'          </ul>          </md-virtual-repeat-container>        </md-autocomplete-wrap>        <aria-status            class="_md-visually-hidden"            role="status"            aria-live="assertive">          <p ng-repeat="message in $mdAutocompleteCtrl.messages track by $index" ng-if="message">{{message}}</p>        </aria-status>'}}}var i=e("angular");i.module("primo-explore.infra").directive("prmAutocomplete",n)},{angular:"angular"}],534:[function(e,t,r){"use strict";function n(){var e=window.document;return e.documentMode}function i(){var e=navigator.userAgent;return e.indexOf("Chrome")!=-1}function o(){return Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||function(e){return"[object SafariRemoteNotification]"===e.toString()}(!window.safari||safari.pushNotification)}function a(){return!n()&&!!window.StyleMedia}function s(){return!n()&&!!window.StyleMedia}function c(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}Object.defineProperty(r,"__esModule",{value:!0}),r.isBrowserIE=n,r.isBrowserChrome=i,r.isBrowserSafari=o,r.isBrowserEdge=a,r.isBrowserFirefox=s,r.isIosDevice=c},{}],535:[function(e,t,r){"use strict";function n(){return{restrict:"A",require:"ngModel",link:function(e,t,r,n){function i(){n.$setViewValue(t.html())}n.$render=function(){t.html(n.$viewValue||"")},t.bind("blur keyup change",function(){e.$apply(i)})}}}var i=e("angular");i.module("primo-explore.infra").directive("contenteditable",n)},{angular:"angular"}],536:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e){void 0===e&&(e=[]);var t=this;this._crumbs=[],this._activeLevel=-1,e.forEach(function(e){return t.push(e)})}return e.prototype.push=function(e){this._activeLevel++,this._crumbs=this._crumbs.slice(0,this._activeLevel),this._crumbs.push(e)},e.prototype.setActiveLevel=function(e){return e<this._crumbs.length&&(this._activeLevel=e,!0)},e.prototype.getActiveLevel=function(){return this._activeLevel},e.prototype.getActiveElm=function(){return this._crumbs[this.getActiveLevel()]},e.prototype.asList=function(){return this._crumbs.slice()},e.prototype.size=function(){return this._crumbs.length},e.prototype.isEmpty=function(){return 0===this._crumbs.length},e}();r.Breadcrumbs=n},{}],537:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});var i=e("./stack.structure"),o=function(e){function t(t){return void 0===t&&(t=2048),e.call(this,t)||this}return n(t,e),t.prototype.push=function(e){return this.size===this._maxSize&&this._elements.shift(),this._elements.push(e),!0},t}(i.Stack);r.LimitedHistoryStack=o},{"./stack.structure":538}],538:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e){void 0===e&&(e=16384),this._maxSize=e,this._elements=[]}return e.prototype.push=function(e){return this.size!==this._maxSize&&(this._elements.push(e),!0)},e.prototype.clear=function(){return this._elements=[],!0},e.prototype.pop=function(){return this.isEmpty()?null:this._elements.pop()},e.prototype.peek=function(){return this.isEmpty()?null:this._elements[this.size-1]},e.prototype.isEmpty=function(){return 0===this.size},Object.defineProperty(e.prototype,"size",{get:function(){return this._elements.length},enumerable:!0,configurable:!0}),e}();r.Stack=n},{}],539:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("angular"),s=e("ng-metadata/core"),c=e("./model.service"),l=e("json-beautify"),u=(e("angular-material"),function(){function e(e,t){this.modelService=e,this.$stateParams=t,this.entry="",this.bulk="",this.entry2="",this.index="",t.active&&(this.modelService.active=t.active),t.entry&&(this.entry=t.entry),t.bulk&&(this.bulk=t.bulk),t.entry2&&(this.entry2=t.entry2),t.index&&(this.index=t.index),console.log(t.entry)}return e.prototype.splitToArray=function(e){return e.split(",")},e.prototype.isJsonArray=function(e){return a.isArray(e)},e.prototype.beautifyJson=function(e){return a.isObject(e)?l(e,null,2,100):a.isArray(e)?e.map(function(e){return l(e,null,2,100)}):void 0},Object.defineProperty(e.prototype,"active",{get:function(){return this.modelService.checkActive(),this.modelService.active},set:function(e){this.modelService.active=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){if(this.index){var e={};return e[this.entry]=this.modelService.modelInstance[this.entry][this.bulk][this.entry2][this.index],e}if(this.bulk){var e={};return e[this.entry]=this.modelService.modelInstance[this.entry][this.bulk],e}if(this.entry){var e={};return e[this.entry]=this.modelService.modelInstance[this.entry],e}return this.modelService.modelInstance},enumerable:!0,configurable:!0}),e}());u=n([s.Component({selector:"prm-model",templateUrl:"components/infra/dataStructures/model/model.html"}),o(1,s.Inject("$stateParams")),i("design:paramtypes",[c.ModelService,Object])],u),r.PrmModel=u},{"./model.service":541,angular:"angular","angular-material":17,"json-beautify":38,"ng-metadata/core":362}],540:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("angular-localforage"),a=e("./model.service"),s=e("./model.directive"),c=function(){function e(){}return e}();c=n([i.NgModule({declarations:[s.PrmModel],providers:[a.ModelService],imports:[o]})],c),r.ModelModule=c},{"./model.directive":539,"./model.service":541,"angular-localforage":15,"ng-metadata/core":362}],541:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("../../storageUtil.service"),s=function(){function e(e){this.storageUtil=e,this.aggregatedEntries=["pnxs"],this.activeStatus=!1,this.model={}}return e.prototype.getKey=function(e){var t=0;e.lastIndexOf("/rest/v1/")!==-1?t=e.lastIndexOf("/rest/v1/")+"/rest/v1/".length:e.lastIndexOf("/rest/primo-explore/v1/")!==-1&&(t=e.lastIndexOf("/rest/primo-explore/v1/")+"/rest/primo-explore/v1/".length);var r=e.indexOf("?")!==-1?e.indexOf("?"):e.length,n=e.substring(t,r);return n},e.prototype.addToModel=function(e,t){var r=this;this.storageUtil.$localForage.getItem("debugModel").then(function(n){n||(n={}),n[e]||(r.aggregatedEntries.indexOf(e)!==-1?n[e]=[]:n[e]={}),r.aggregatedEntries.indexOf(e)!==-1?(0===t.config.params.offset&&(n[e]=[]),n[e].push(t.data)):n[e]=t.data,r.storageUtil.$localForage.setItem("debugModel",n),r.model=n})},Object.defineProperty(e.prototype,"modelInstance",{get:function(){return this.getDatModel(),this.model},set:function(e){this.model=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){return this.checkActive(),this.activeStatus},set:function(e){var t=this;e&&this.storageUtil.$localForage.getItem("debugModelActive").then(function(r){t.activeStatus=r||e,t.storageUtil.$localForage.setItem("debugModelActive",t.activeStatus)})},enumerable:!0,configurable:!0}),e.prototype.getDatModel=function(){var e=this;this.storageUtil.$localForage.getItem("debugModel").then(function(t){e.model=t||{}})},e.prototype.checkActive=function(){var e=this;this.storageUtil.$localForage.getItem("debugModelActive").then(function(t){e.activeStatus=t||!1})},e}();s=n([o.Injectable(),i("design:paramtypes",[a.StorageUtil])],s),r.ModelService=s,r.default=[]},{"../../storageUtil.service":571,"ng-metadata/core":362}],542:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("./depositForm.service"),s=function(){function e(e){this.depositFormService=e,this.form={},this.onCancel=new o.EventEmitter,this.onSave=new o.EventEmitter,this._errorMessages=[],this._displayTOU=!1,this._displayNotes=!1,this._IAgree=!1}return Object.defineProperty(e.prototype,"errorMessages",{get:function(){return this._errorMessages},set:function(e){this._errorMessages=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayTOU",{get:function(){return this._displayTOU},set:function(e){this._displayTOU=e},enumerable:!0,configurable:!0}),e.prototype.showTOU=function(e){this._displayTOU=e},Object.defineProperty(e.prototype,"displayNotes",{get:function(){return this._displayNotes},set:function(e){this._displayNotes=e},enumerable:!0,configurable:!0}),e.prototype.showNotes=function(e){this._displayNotes=e},Object.defineProperty(e.prototype,"IAgree",{get:function(){return this._IAgree},set:function(e){this._IAgree=e},enumerable:!0,configurable:!0}),e.prototype.close=function(){this.onCancel.emit(null)},e.prototype.hideInstruction=function(){return!this.depositInfo.depositProfileInfo.depositProfileInstruction},e.prototype.hideTOU=function(){return!!this.depositInfo.editMode},e.prototype.updateLabelAction=function(e){""===this.depositInfo.depositFiles[e].action&&(this.depositInfo.depositFiles[e].action="UPDATE_LABEL")},e.prototype.deleteFile=function(e){"ADD"!=this.depositInfo.depositFiles[e].action&&this.depositInfo.deleteFiles.push(this.depositInfo.depositFiles[e].fileId),
this.depositFormService.deleteFile(this.depositInfo.depositFiles,e)},e.prototype.commit=function(){this._errorMessages=[];var e=this.depositFormService.validateForm(this.depositInfo);return e.isOk?void this.onSave.emit("nui.details.edit.success"):void(this.errorMessages=e.errorMessages)},e}();n([o.Input(),i("design:type",Object)],s.prototype,"displayFields",void 0),n([o.Input(),i("design:type",Object)],s.prototype,"depositInfo",void 0),n([o.Output(),i("design:type",Object)],s.prototype,"onCancel",void 0),n([o.Output(),i("design:type",Object)],s.prototype,"onSave",void 0),s=n([o.Component({selector:"prm-deposit-details",templateUrl:"components/infra/deposit/deposit-form.html"}),i("design:paramtypes",[a.DepositFormService])],s),r.PrmDepositForm=s},{"./depositForm.service":544,"ng-metadata/core":362}],543:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./uploadFile/uploadFile.directive"),a=e("./depositForm.service"),s=e("./uploadFile/uploadFile.module"),c=e("angular-material"),l=function(){function e(){}return e}();l=n([i.NgModule({declarations:[o.PrmUploadFile],providers:[a.DepositFormService],imports:[c,s.UploadFileModule]})],l),r.DepositFormModule=l},{"./depositForm.service":544,"./uploadFile/uploadFile.directive":545,"./uploadFile/uploadFile.module":546,"angular-material":17,"ng-metadata/core":362}],544:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../account/account.service"),c=e("../formBuilder/formBuilder.service"),l=function(){function e(e,t,r){this.accountService=e,this.formBuilderService=t,this.$translate=r}return e.prototype.deleteFile=function(e,t){e.splice(t,1)},e.prototype.commit=function(e){return this.accountService.makeIlsRequest("submit_deposit",e)},e.prototype.validateForm=function(e){var t=[],r=!0;return e.title&&""!=e.title||(r=!1),e.saveAsDraft||e.depositFiles&&e.depositFiles.length||(r=!1,t.push("nui.deposit.validation.mandatoryFiles")),{isOk:r,errorMessages:t}},e}();l=n([a.Injectable(),o(2,a.Inject("$translate")),i("design:paramtypes",[s.AccountService,c.FormBuilderService,Object])],l),r.DepositFormService=l,r.default=[]},{"../../account/account.service":434,"../formBuilder/formBuilder.service":553,"ng-metadata/core":362}],545:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./uploadFile.service"),c=function(){function e(e,t,r){this.accountIcons=e,this.Upload=t,this.uploadFileService=r,this.depositfiles=[],this._mode="normal",this._filesFormat="*",this.allowSelect="hover"}return Object.defineProperty(e.prototype,"mode",{get:function(){return this._mode},set:function(e){this._mode=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filesFormat",{get:function(){return this._filesFormat},set:function(e){this._filesFormat=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"files",{get:function(){return this.uploadFileService.files},set:function(e){this.uploadFileService.files=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filename",{get:function(){return this._filename},set:function(e){this._filename=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fileFailed",{get:function(){return this.uploadFileService.fileFailed},enumerable:!0,configurable:!0}),e.prototype.upload=function(){this.uploadFileService.amazonInfo=this.amazoninfo,this.uploadFileService.uploadFiles(this.depositfiles)},e}();n([a.Input(),i("design:type",Object)],c.prototype,"amazoninfo",void 0),n([a.Input(),i("design:type",Array)],c.prototype,"depositfiles",void 0),c=n([a.Component({selector:"prm-upload-file",templateUrl:"components/infra/deposit/uploadFile/upload-file.html"}),o(0,a.Inject("accountIcons")),o(1,a.Inject("Upload")),i("design:paramtypes",[Object,Object,s.UploadFileService])],c),r.PrmUploadFile=c},{"./uploadFile.service":547,"ng-metadata/core":362}],546:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./uploadFile.service"),a=e("ng-file-upload"),s=e("angular-material"),c=function(){function e(){}return e}();c=n([i.NgModule({declarations:[],providers:[o.UploadFileService],imports:[a,s]})],c),r.UploadFileModule=c},{"./uploadFile.service":547,"angular-material":17,"ng-file-upload":328,"ng-metadata/core":362}],547:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=(e("ng-file-upload"),e("ng-metadata/core")),s=function(){function e(e,t){this.Upload=e,this.$q=t}return Object.defineProperty(e.prototype,"amazonInfo",{get:function(){return this._amazonInfo},set:function(e){this._amazonInfo=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fileFailed",{get:function(){return this._fileFailed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"files",{get:function(){return this._files},set:function(e){this._files=e},enumerable:!0,configurable:!0}),e.prototype.uploadFiles=function(e){var t=this._files;if(t&&t.length)for(var r=0;r<t.length;r++)this.uploadS3(t[r],e).then(function(e){},function(e){console.log("Failed to upload to Amazon: ",e)})},e.prototype.uploadS3=function(e,t){this._fileFailed=!1;var r=(e.size/1024/1024,e.name),n=this._amazonInfo.uploadpath+r;e.upload=this.Upload.upload({url:"https://"+this._amazonInfo.endpoint+"/"+this._amazonInfo.bucketname+"/",method:"POST",fields:{key:n,policy:this._amazonInfo.policy64,"X-Amz-Algorithm":"AWS4-HMAC-SHA256","X-Amz-Credential":this._amazonInfo.xamzcredentail,"X-Amz-Date":this._amazonInfo.xamzdate,"X-Amz-Signature":this._amazonInfo.xamzsignature,acl:"public-read",success_action_status:"201","Content-Type":null===e.type||""===e.type?"application/octet-stream":e.type},file:e});var i=this.$q.defer(),o={file:e,fileKey:n,fileName:r,label:this.getLabel(r),isUploaded:!1,action:"ADD",fileId:""};return t.push(o),e.upload.then(function(e){var n=t.filter(function(e){return e.fileName===r});n[0].isUploaded=!0,i.resolve(e)},function(e){e.status>0&&i.reject(e)}),e.upload.progress(function(t){e.progress=Math.min(100,parseInt(100*t.loaded/t.total))}),i.promise},e.prototype.getLabel=function(e){var t=e,r=e.lastIndexOf(".");return r!=-1&&(t=e.slice(0,r)),t},e.prototype.generateThumb=function(e){null!=e&&$scope.fileReaderSupported&&e.type.indexOf("image")>-1&&$timeout(function(){var t=new FileReader;t.readAsDataURL(e),t.onload=function(t){$timeout(function(){e.dataUrl=t.target.result})}})},e}();s=n([a.Injectable(),o(0,a.Inject("Upload")),o(1,a.Inject("$q")),i("design:paramtypes",[Object,Object])],s),r.UploadFileService=s,r.default=[]},{"ng-file-upload":328,"ng-metadata/core":362}],548:[function(e,t,r){"use strict";function n(e){return{restrict:"A",replace:!0,link:function(t,r,n){t.$watch(n.dynamicHtml,function(n){r.html(n),e(r.contents())(t)})}}}var i=e("angular");i.module("primo-explore.infra").directive("dynamicHtml",n),n.$inject=["$compile"]},{angular:"angular"}],549:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./formField.service"),c=e("../formBuilder.service"),l=e("angular"),u=e("lodash/forEach"),d=(e("lodash/uniqBy"),e("lodash/uniq")),p=e("dateformat"),f=function(){function e(e,t,r){var n=this;this.formFieldService=e,this.actionIcons=t,this.$timeout=r,this.filterDates=l.bind(this,this.filterDatesUnbound),this.days=["01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"],this.months=["01","02","03","04","05","06","07","08","09","10","11","12"],this.yearRegex="\\d+",this.delayForLabels=!1,this.fieldUiTypeHtml={text:"components/infra/formBuilder/field/form-field-text.html",checkbox:"components/infra/formBuilder/field/form-field-checkbox.html",readonly:"components/infra/formBuilder/field/form-field.html",password:"components/infra/formBuilder/field/form-field.html",dropdown:"components/infra/formBuilder/field/form-field-dropdown.html",radio:"components/infra/formBuilder/field/form-field-radio.html",date:"components/infra/formBuilder/field/form-field-date.html",label:"components/infra/formBuilder/field/form-field-label.html",multiLabel:"components/infra/formBuilder/field/form-field-multi-label.html",hidden:"components/infra/formBuilder/field/form-field-hidden.html",link:"components/infra/formBuilder/field/form-field-link.html",datetime:"components/infra/formBuilder/field/form-field-datetime.html",dateDropdown:"components/infra/formBuilder/field/form-field-date-dropdown.html"},this.$timeout(function(){n.delayForLabels=!0},400)}return Object.defineProperty(e.prototype,"formData",{get:function(){return this.data},set:function(e){this.data=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorMsgPlaceholders",{get:function(){return{idx_0:'<span class="lowercase">{{::"'+this.field.label+'" |translate}}</span>'}},enumerable:!0,configurable:!0}),e.prototype.getFormFieldHtml=function(){return this.field&&this.fieldUiTypeHtml[this.field.uiType]||(this.field.uiType="text"),this.fieldUiTypeHtml[this.field.uiType]},e.prototype.getCatagories=function(){var e=this;if(!this.field.options)return[];var t=this.field.options.map(function(t,r,n){return e.parseCatagories(t)}).filter(this.filterEmpty);return d(t)},e.prototype.getCurrentDate=function(){var e=new Date;return p(e,"yyyy-mm-dd'T'HH:MM:ss")},e.prototype.parseCatagories=function(e){return e.category},e.prototype.filterEmpty=function(e){return e},e.prototype.filterDatesUnbound=function(e){if(!this.field)return!0;if(this.field.populator&&this.field.populator.params&&this.field.populator.params.allow)return this.field.populator.params.allow===c.FormBuilderEnums.FUTURE_DATES&&e>=(new Date).setHours(0,0,0,0);if(!this.field.options||this.field.options.length<=0)return!0;if(this.field.populator&&this.field.populator.params&&this.field.populator.params.allow)return this.field.populator.params.allow===c.FormBuilderEnums.FUTURE_DATES&&e>=(new Date).setHours(0,0,0,0);if(!this.field.options||this.field.options.length<=0)return!0;var t=!1;return u(this.field.options,function(r){t||(t=e.getDate()===r.day&&e.getMonth()+1===r.month&&e.getFullYear()===r.year)}),t},e}();n([a.Input(),i("design:type",Object)],f.prototype,"field",void 0),n([a.Input(),i("design:type",Object)],f.prototype,"data",void 0),n([a.Input(),i("design:type",Object)],f.prototype,"form",void 0),f=n([a.Component({selector:"prm-form-field",templateUrl:"components/infra/formBuilder/field/form-field.html"}),o(1,a.Inject("actionIcons")),o(2,a.Inject("$timeout")),i("design:paramtypes",[s.FormFieldService,Object,Object])],f),r.PrmFormField=f},{"../formBuilder.service":553,"./formField.service":551,angular:"angular",dateformat:31,"lodash/forEach":253,"lodash/uniq":321,"lodash/uniqBy":322,"ng-metadata/core":362}],550:[function(e,t,r){"use strict";function n(){return[{label:"Yes",value:"Y"},{label:"No",value:"N"}]}Object.defineProperty(r,"__esModule",{value:!0}),r.YesOrNo=n},{}],551:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=function(){function e(){}return Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!0,configurable:!0}),e}();a=n([o.Injectable(),i("design:paramtypes",[])],a),r.FormFieldService=a,r.default=[]},{"ng-metadata/core":362}],552:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./formBuilder.service"),a=e("./field/formField.directive"),s=e("./field/formField.service"),c=function(){function e(){}return e}();c=n([i.NgModule({declarations:[a.PrmFormField],providers:[o.FormBuilderService,s.FormFieldService],imports:[]})],c),r.FormBuilderModule=c},{"./field/formField.directive":549,"./field/formField.service":551,"./formBuilder.service":553,"ng-metadata/core":362}],553:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("../../nddUtils/dateUtils.service"),s=e("lodash/filter"),c=e("lodash/flatten"),l=function(){function e(e){this.dateUtils=e}return Object.defineProperty(e.prototype,"formMode",{get:function(){return u.FORM_MODE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fieldType",{get:function(){return u.FIELD_TYPE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uiType",{get:function(){return u.UI_TYPE},enumerable:!0,configurable:!0}),e.prototype.groupFields=function(e){for(var t=[],r=[e[0]],n=1;n<e.length;n++){var i=e[n];i.group||(t.push(r),r=[]),r.push(i)}return t.push(r),t},e.prototype.handleValue=function(e){if(e){var t=e.value;t&&e.fieldType===this.fieldType.DATE&&(e.value=this.dateUtils.convertIlsDateStringToPrimoDateString(t))}},e.prototype.validate=function(e,t){var r=[];for(var n in t)if(t[n].validator){var i=t[n].validator.func,o=t[n].validator.params;i(e,t[n].name,o)||r.push(t[n].validator.message)}return{isOk:0===r.length,errorMessages:r}},e.prototype.compareFields=function(e,t,r){return e[t]===e[r]},e.prototype.getFieldByName=function(e,t){var r=s(c(e),function(e){return e.name===t});if(r)return r[0]},e}();l=n([o.Injectable(),i("design:paramtypes",[a.DateUtils])],l),r.FormBuilderService=l;var u=function(){function e(){}return Object.defineProperty(e,"FORM_MODE",{get:function(){return this._formMode},enumerable:!0,configurable:!0}),Object.defineProperty(e,"FIELD_TYPE",{get:function(){return this._fieldType},enumerable:!0,configurable:!0}),Object.defineProperty(e,"UI_TYPE",{get:function(){return this._uiType},enumerable:!0,configurable:!0}),Object.defineProperty(e,"BEHAVIOR",{get:function(){return this._behavior},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ROOT",{get:function(){return"$root$"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"FIRST",{get:function(){return"$first$"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"FIELD",{get:function(){return"$field$"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TODAY",{get:function(){return"$today$"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"FUTURE_DATES",{get:function(){return"$future$"},enumerable:!0,configurable:!0}),e}();u._formMode={NEW:"New",EDIT:"Edit",VIEW:"View",ERROR:"Error"},u._fieldType={STRING:"string",DATE:"date",BOOLEAN:"boolean",INTERNAL:"internal"},u._uiType={TEXT:"text",CHECK_BOX:"checkbox",READ_ONLY:"readonly",PASSWORD:"password",DROP_DOWN:"dropdown",TEXT_AREA:"textarea",RADIO_BUTTON:"radio",DATE:"date",LABEL:"label",MULTI_LABEL:"multiLabel",HIDDEN:"hidden",LINK:"link",DATE_TIME:"datetime",DATE_DROPDOWN:"dateDropdown"},u._behavior={DISABLED:"disabled",HIDDEN:"hidden"},r.FormBuilderEnums=u,r.default=[]},{"../../nddUtils/dateUtils.service":597,"lodash/filter":246,"lodash/flatten":251,"ng-metadata/core":362}],554:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){this.$scope=e,this.highlightService=t}return e.prototype.$onInit=function(){this.highlightRegexp=this.highlightService.getTermRegexp(this.terms),this.highlightedText=this.highlightService.getHighlightedText(this.text,this.highlightRegexp)},e.prototype.$onChanges=function(e){"terms"in e?(this.highlightRegexp=this.highlightService.getTermRegexp(this.terms),this.highlightedText=this.highlightService.getHighlightedText(this.text,this.highlightRegexp)):"text"in e&&(this.highlightedText=this.highlightService.getHighlightedText(this.text,this.highlightRegexp))},e.prototype.combineStringLastChar=function(e){return this.highlightService.combineStringLastChar(e)},e}();n.$inject=["$scope","HighlightService"],r.default={name:"prmHighlight",config:{bindings:{terms:"<",text:"<"},controller:n,templateUrl:"components/infra/highlight.html"}}},{}],555:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("./lang/changeLang.service"),a=e("lodash/sortBy"),s=e("lodash/map"),c=e("lodash/escapeRegExp"),l=e("lodash/partition"),u=e("lodash/memoize"),d=50,p=e("./browserSniffer"),f=e("ng-metadata/core"),h=function(){function e(e){var t=this;this.changeLangService=e,this.memoizedFun=u(function(e){return t._getTermRegexp(e)},function(e){return e?e.join("##$&"):""}),this.memoizedFunCache=this.memoizedFun.cache,this.combiningHalfMarksRegexp=new RegExp("(.[︠-︯].[︠-︯])","gi"),this.combiningMDiacriticalarksRegexp=new RegExp("(.[͡].)","gi")}return e.prototype.getTermRegexp=function(e){return this.memoizedFunCache.size>d&&this.memoizedFunCache.clear(),this.memoizedFun(e)},e.prototype._getTermRegexp=function(e){var t=this,r=[];if(e){var n="(?:^|$|[ \\n\\r\\t.,`@)(%~><}{\\[\\]\\\\\\/:;_&^#$%'\\\"\\+!?*=#|-])",i="(?=^|$|[ \\n\\r\\t.,`@)(%~><}{\\[\\]\\\\\\/:;_&^#$%'\\\"\\+!?*=#|-])",o=a(e,function(e){return-e.length}),u=s(o,c),d=l(u,function(e){return t.isCJK(e)});if(d[0].length&&r.push("("+d[0].join("|")+")"),d[1].length){var p=s(d[1],function(e){return e.trim().split(" ").join("\\W*?")}).join("|"),f="(?:"+n+"("+p+")"+i+")";r.push(f)}var h=r.join("|");return new RegExp(h,"gi")}},e.prototype.checkWithBoundories=function(e,t,r){var n=/[ \n\r\t.,`@)(%~><}{\[\]\\\/:;_&^#$%'\"\+!?*=#|-]/,i=t||r;return e.charAt(0).match(n)?e[0]+("<mark>"+i+"</mark>"):"<mark>"+e+"</mark>"},e.prototype.getHighlightedText=function(e,t){var r="";return e?(r=t?this.isCJK(e)?e.replace(t,function(e){return"<mark>"+e+"</mark>"}).replace(/<\/mark> <mark>/g," "):e.replace(t,this.checkWithBoundories).replace(/<\/mark> <mark>/g," "):e,p.isBrowserChrome()||this.isCombiningHalfMarks(r)&&(r=this.replaceCombiningHalfMarks(r)),this.isCombiningDiacriticalMark(r)&&(r=this.replaceCombiningDiacriticalMark(r)),r):""},e.prototype.replaceCombiningHalfMarks=function(e){return e=e.replace(this.combiningHalfMarksRegexp,function(e){return'<span class="combined-half-mark">'+e+"</span>"})},e.prototype.replaceCombiningDiacriticalMark=function(e){return e=e.replace(this.combiningMDiacriticalarksRegexp,function(e){return'<span class="combined-half-mark">'+e+"</span>"})},e.prototype.isCombiningHalfMarks=function(e){var t=/[\uFE20-\uFE2F]/;return t.test(e)},e.prototype.isCombiningDiacriticalMark=function(e){var t=/[\u0361]/;return t.test(e)},e.prototype.isCJK=function(e){var t=/[\u4E00-\u9FCC\u3400-\u4DB5\uFA0E\uFA0F\uFA11\uFA13\uFA14\uFA1F\uFA21\uFA23\uFA24\uFA27-\uFA29]|[\ud840-\ud868][\udc00-\udfff]|\ud869[\udc00-\uded6\udf00-\udfff]|[\ud86a-\ud86c][\udc00-\udfff]|\ud86d[\udc00-\udf34\udf40-\udfff]|\ud86e[\udc00-\udc1d]/,r=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/,n=/[\uAC00-\uD7A3\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]/,i=/[\u02C6-\u0323]/;return t.test(e)||r.test(e)||n.test(e)||i.test(e)},e.prototype.combineStringLastChar=function(e){e=e||"";var t=/[ \t.,`@)(%~><}{\[\]\\\/:;_&^#$%'\"\+!?*=#|-]/g,r=/[\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC]/,n=e.slice(-1);return t.test(n)&&"rtl"===this.changeLangService.direction&&r.test(e)?"&#8207":""},e}();h=n([f.Injectable(),i("design:paramtypes",[o.ChangeLangService])],h),r.HighlightService=h},{"./browserSniffer":534,"./lang/changeLang.service":561,"lodash/escapeRegExp":244,"lodash/map":284,"lodash/memoize":286,"lodash/partition":294,"lodash/sortBy":304,"ng-metadata/core":362}],556:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("lodash/forEach"),c=e("angular"),l=c.injector(["ng"]);this.$timeout=l.get("$timeout");var u=function(){function e(e){this.$http=e}return e.prototype.call=function(e,t,r){var n={method:e,url:t,params:"GET"===e?r:null,data:"POST"===e?r:null};return new d(n,this.$http)},e.prototype.callPostAndParams=function(e,t,r){return this.call("POST",e+"?"+this.parseObjectToUrlParams(t),r)},e.prototype.parseObjectToUrlParams=function(e){var t=[];return s(Object.keys(e),function(r){t.push(r+"="+e[r])}),t.join("&")},e}();u=n([a.Injectable(),o(0,a.Inject("$http")),i("design:paramtypes",[Function])],u),r.HttpService=u;var d=function(){function e(e,t){return this.httpConfig=e,this.$http=t,this.maxAttempts=1,this.attemptsCounter=0,this.call(e)}return e.prototype.call=function(e){var t=this;return this.$http(e).then(function(e){return t.onSuccess(e.data)},function(r){return t.onFailure(r,e)})},e.prototype.onSuccess=function(e){return this.attemptsCounter=0,e},e.prototype.onFailure=function(e,t){var r=this;if(this.attemptsCounter++,this.attemptsCounter<this.maxAttempts)return this.$timeout(function(){return r.call(t)},2e3);throw e},e}()},{angular:"angular","lodash/forEach":253,"ng-metadata/core":362}],557:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./selectTextUtil"),a=e("../mappingTablesCache/mappingTablesCache.service"),s=e("./primoText.directive"),c=e("./RecordUtil.service"),l=e("./restUtils.service"),u=e("./widgets/widgets.module"),d=e("./httpRequest/http.service"),p=e("./mediaQueries.service"),f=e("./lang/changeLang.module"),h=e("./formBuilder/formBuilder.module"),m=e("./storageUtil.service"),g=e("./sharedSessionStorage.service"),v=e("./highlight.service"),y=function(){function e(){}return e}();y=n([i.NgModule({declarations:[s.PrmText],providers:[d.HttpService,a.MappingTablesCache,p.MediaQueries,c.RecordUtil,l.RestUtils,o.SelectTextUtil,m.StorageUtil,g.SharedSessionStorage,v.HighlightService],imports:[f.ChangeLangModule,h.FormBuilderModule,u.WidgetsModule]})],y),r.InfraMetadata=y},{"../mappingTablesCache/mappingTablesCache.service":592,"./RecordUtil.service":530,"./formBuilder/formBuilder.module":552,"./highlight.service":555,"./httpRequest/http.service":556,"./lang/changeLang.module":560,"./mediaQueries.service":562,"./primoText.directive":566,"./restUtils.service":567,"./selectTextUtil":568,"./sharedSessionStorage.service":569,"./storageUtil.service":571,"./widgets/widgets.module":578,"ng-metadata/core":362}],558:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../nddUtils/nddUtils.module"),i=e("angular-material"),o=e("angular");r.default=o.module("primo-explore.infra",[n.default.name,i]),e("./dynamicHtml.directive"),e("./autocomplete/autocomplete.controller"),e("./autocomplete/autocomplete.directive"),e("./contenteditable.directive")},{"../nddUtils/nddUtils.module":603,"./autocomplete/autocomplete.controller":532,"./autocomplete/autocomplete.directive":533,"./contenteditable.directive":535,"./dynamicHtml.directive":548,angular:"angular","angular-material":17}],559:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./changeLang.service"),c=e("../../appConfig/appConfigForward"),l=e("../../analytics/primolytics.service"),u=e("../../security/jwtUtil.service"),d=e("../../security/userSessionManager.service"),p=function(){function e(e,t,r,n,i,o,s){this.changeLangService=e,this.i18nService=t,this.jwtUtilService=r,this.userSessionManagerService=n,this.$state=i,this.topBarIcons=o,this.primolyticsService=s,this.changeLangEvent=new a.EventEmitter,this.attributesMap=c.getAttributesMap(),this.vid=c.getVid(),this.rtlLanguages=c.getRtlLanguages(),this.selectedLanguage=t.getLanguage(),this.languages=this.attributesMap.interfaceLanguageOptions.split(","),this.changeLangService.addLangParamToUrl(this.selectedLanguage),this.setPageLanguage(this.selectedLanguage)}return e.prototype.setPageLanguage=function(e){var t=document.getElementById("primoExploreRoot"),r={iw:"he",ji:"yi",in:"id"};if(t&&e&&e.length>=2){var n=e.substring(0,2);r[n]&&(n=r[n]),t.setAttribute("lang",n);var i=void 0;i=this.rtlLanguages.has(n)?"rtl":"ltr",this.changeLangService.direction=i,t.setAttribute("dir",i)}},Object.defineProperty(e.prototype,"selectedLanguage",{get:function(){return this._selectedLanguage},set:function(e){this._selectedLanguage=e},enumerable:!0,configurable:!0}),e.prototype.getLabelType=function(){return this.labelType},e.prototype.changeLanguage=function(){var e=this;if(this.changeLangService.addLangParamToUrl(this.selectedLanguage),"GUEST"!==this.jwtUtilService.getDecodedToken().userGroup){var t=this.changeLangService.updateUserLanguage(this.vid,this.selectedLanguage);t.then(function(t){return e.successAction(t)})}return this.i18nService.setLanguage(this.selectedLanguage).then(function(){return e.changeLangEvent.emit({lang:e.selectedLanguage}),e.$state.go(e.$state.current,{lang:e.selectedLanguage},{reload:!0})})},e.prototype.successAction=function(e){this.userSessionManagerService.syncJwtWithTabs(e.data),this.jwtUtilService.storeJwt(e.data)},e}();n([a.Input(),i("design:type",String)],p.prototype,"labelType",void 0),n([a.Output(),i("design:type",a.EventEmitter)],p.prototype,"changeLangEvent",void 0),n([l.beacon({p:"general",op:"changeLanguage"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],p.prototype,"changeLanguage",null),p=n([a.Component({selector:"prm-change-lang",templateUrl:"components/infra/lang/change-lang.html"}),o(1,a.Inject("I18nService")),o(4,a.Inject("$state")),o(5,a.Inject("topBarIcons")),i("design:paramtypes",[s.ChangeLangService,Object,u.JwtUtilService,d.UserSessionManagerService,Object,Object,l.PrimolyticsService])],p),r.PrmChangeLang=p},{"../../analytics/primolytics.service":480,"../../appConfig/appConfigForward":484,"../../security/jwtUtil.service":842,"../../security/userSessionManager.service":853,"./changeLang.service":561,"ng-metadata/core":362}],560:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);
return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./changeLang.service"),a=e("./changeLang.directive"),s=function(){function e(){}return e}();s=n([i.NgModule({declarations:[a.PrmChangeLang],providers:[o.ChangeLangService],imports:[]})],s),r.ChangeLangModule=s},{"./changeLang.directive":559,"./changeLang.service":561,"ng-metadata/core":362}],561:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../infra/annotations"),c=function(){function e(e,t,r){this.$http=e,this.restBaseURLs=t,this.$location=r,this._direction="ltr",this.UPDATE_DB_URL=t.userSettingsBaseURL}return e.prototype.updateUserLanguage=function(e,t){var r=this.buildPaylod(e,t);return this.$http.post(this.UPDATE_DB_URL,r)},e.prototype.buildPaylod=function(e,t){var r={vid:e,"interface-language":t};return r},e.prototype.addLangParamToUrl=function(e){var t=this.$location.search();t.lang!==e&&this.changeUrl(e)},e.prototype.changeUrl=function(e){var t=this.$location.search();t.lang=e,this.$location.search(t).replace()},Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},set:function(e){this._direction=e},enumerable:!0,configurable:!0}),e}();n([s.preventStateReload,i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],c.prototype,"changeUrl",null),c=n([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),o(2,a.Inject("$location")),i("design:paramtypes",[Function,Object,Object])],c),r.ChangeLangService=c,r.default=[]},{"../../infra/annotations":531,"ng-metadata/core":362}],562:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=function(){function e(e){this.$mdMedia=e}return Object.defineProperty(e.prototype,"xs",{get:function(){return this.$mdMedia("xs")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gtxs",{get:function(){return this.$mdMedia("gt-xs")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sm",{get:function(){return this.$mdMedia("sm")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gtsm",{get:function(){return this.$mdMedia("gt-sm")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"md",{get:function(){return console.log(this.$mdMedia("md")),this.$mdMedia("md")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gtmd",{get:function(){return this.$mdMedia("gt-md")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lg",{get:function(){return this.$mdMedia("lg")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lgPlus",{get:function(){return this.$mdMedia("(min-width: 1600px) and (max-width: 1919px)")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gtlg",{get:function(){return this.$mdMedia("gt-lg")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xl",{get:function(){return this.$mdMedia("xl")},enumerable:!0,configurable:!0}),e.prototype.createDynamicClass=function(){var e="__",t="__gt-";return this.xs?e+"xs":this.sm?e+"sm "+t+"xs":this.md?e+"md "+t+"xs "+t+"sm":this.lgPlus?e+"lgPlus "+t+"xs "+t+"sm "+t+"md":this.lg?e+"lg "+t+"xs "+t+"sm "+t+"md":this.xl?e+"xl "+t+"xs "+t+"sm "+t+"md "+t+"lg":""},e}();s=n([a.Injectable(),o(0,a.Inject("$mdMedia")),i("design:paramtypes",[Function])],s),r.MediaQueries=s},{"ng-metadata/core":362}],563:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("./changePassword.service"),s=e("../../appConfig/appConfigForward"),c=(e("angular-material"),function(){function e(e){this.changePasswordService=e,this.form={},this.onCancel=new o.EventEmitter,this.onSave=new o.EventEmitter,this._errorMessages=[]}return Object.defineProperty(e.prototype,"errorMessages",{get:function(){return this._errorMessages},set:function(e){this._errorMessages=e},enumerable:!0,configurable:!0}),e.prototype.close=function(){this.onCancel.emit(null)},e.prototype.commit=function(){var e=this;this._errorMessages=[];var t=this.changePasswordService.validateForm(this.form,this.displayFields);if(!t.isOk)return void(this.errorMessages=t.errorMessages);var r={lang:"eng",vid:s.getVid(),data:this.form};return this.changePasswordService.commit(r).then(function(t){e.errorMessages=[],e.clearFields(),"ok"===t.status?e.onSave.emit("nui.details.edit.success"):e.errorMessages.push(t["reply-text"])},function(t){e._errorMessages.push("default.error.general")})},e.prototype.clearFields=function(){delete this.form.old_password,delete this.form.new_password,delete this.form.repeat_password},e}());n([o.Input(),i("design:type",Object)],c.prototype,"displayFields",void 0),n([o.Input(),i("design:type",Object)],c.prototype,"form",void 0),n([o.Output(),i("design:type",Object)],c.prototype,"onCancel",void 0),n([o.Output(),i("design:type",Object)],c.prototype,"onSave",void 0),c=n([o.Component({selector:"prm-change-password",templateUrl:"components/infra/password/change-password.html"}),i("design:paramtypes",[a.ChangePasswordService])],c),r.PrmChangePassword=c},{"../../appConfig/appConfigForward":484,"./changePassword.service":565,"angular-material":17,"ng-metadata/core":362}],564:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./changePassword.service"),a=function(){function e(){}return e}();a=n([i.NgModule({declarations:[],providers:[o.ChangePasswordService],imports:[]})],a),r.ChangePasswordModule=a},{"./changePassword.service":565,"ng-metadata/core":362}],565:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("../../account/account.service"),s=e("../formBuilder/formBuilder.service"),c=function(){function e(e,t){this.accountService=e,this.formBuilderService=t}return e.prototype.commit=function(e){return this.accountService.makeIlsRequest("update_personal_settings",e)},e.prototype.validateForm=function(e,t){return this.formBuilderService.validate(e,t)},e}();c=n([o.Injectable(),i("design:paramtypes",[a.AccountService,s.FormBuilderService])],c),r.ChangePasswordService=c,r.default=[]},{"../../account/account.service":434,"../formBuilder/formBuilder.service":553,"ng-metadata/core":362}],566:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=function(){function e(e){this.$element=e,e.attr("dir","auto")}return e}();s=n([a.Directive({selector:"[prm-text]"}),o(0,a.Inject("$element")),i("design:paramtypes",[Object])],s),r.PrmText=s},{"ng-metadata/core":362}],567:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=function(){function e(e){this.$http=e}return e.prototype.postToServlet=function(e,t){var r={headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},transformRequest:function(e){var t=Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])});return t.join("&")}};return this.$http.post(e,t,r)},e}();s=n([a.Injectable(),o(0,a.Inject("$http")),i("design:paramtypes",[Function])],s),r.RestUtils=s},{"ng-metadata/core":362}],568:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=function(){function e(){}return e.prototype.selectText=function(e){var t=document,r=t.getElementById(e),n=t.body;if(n.createTextRange){var i=n.createTextRange();i.moveToElementText(r),i.select()}else if(window.getSelection){var o=window.getSelection(),i=t.createRange();i.selectNodeContents(r),o.removeAllRanges(),o.addRange(i)}},e}();o=n([i.Injectable()],o),r.SelectTextUtil=o},{"ng-metadata/core":362}],569:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("./storageUtil.service"),s=e("../nddUtils/UUIDGenerator.service"),c="sharedSessionStorageManifest",l="sendSharedSessionStorageData",u="removeSharedSessionStorageData",d="getAllSharedSessionStorageDataRequest",p=function(){function e(e,t){var r=this;this.storageUtil=e,this.createNewSharedSessionStorageManifest(),this.uuid=t.generateUUID(),window.addEventListener?window.addEventListener("storage",function(e){r.onStorageEvent(e)},!1):window.attachEvent("onstorage",function(e){r.onStorageEvent(e)});var n={uuid:this.uuid},i=JSON.stringify(n);this.storageUtil.localStorage.setItem(d,i)}return e.prototype.createNewSharedSessionStorageManifest=function(){if(!this.storageUtil.sessionStorage.getItem(c)){var e=[];this.storageUtil.sessionStorage.setItem(c,JSON.stringify(e))}},e.prototype.onStorageEvent=function(e){if(e||(e=window.event),e.newValue)switch(e.key){case l:this.receiveDataEvent(e);break;case u:this.removeDataEvent(e);break;case d:this.sendAllSharedSessionStorageData(e);default:return}},e.prototype.getManifest=function(){var e=this.storageUtil.sessionStorage.getItem(c);return JSON.parse(e)},e.prototype.addKeyToManifest=function(e){var t=this.getManifest();t.indexOf(e)===-1&&(t.push(e),this.storageUtil.sessionStorage.setItem(c,JSON.stringify(t)))},e.prototype.removeKeyFromManifest=function(e){var t=this.getManifest(),r=t.indexOf(e);r>-1&&(t.splice(r,1),this.storageUtil.sessionStorage.setItem(c,JSON.stringify(t)))},e.prototype.sendAllSharedSessionStorageData=function(e){var t=JSON.parse(e.newValue);if(t.uuid!==this.uuid)for(var r=this.getManifest(),n=0,i=r;n<i.length;n++){var o=i[n];this.setItem(o,this.getItem(o))}},e.prototype.receiveDataEvent=function(e){var t=JSON.parse(e.newValue);t.uuid!==this.uuid&&(this.addKeyToManifest(t.key),this.storageUtil.sessionStorage.setItem(t.key,t.data))},e.prototype.removeDataEvent=function(e){var t=JSON.parse(e.newValue);t.uuid!==this.uuid&&(this.storageUtil.sessionStorage.removeItem(t.key),this.removeKeyFromManifest(t.key))},e.prototype.setItem=function(e,t){var r={key:e,uuid:this.uuid,data:t},n=JSON.stringify(r);this.storageUtil.localStorage.setItem(l,n),this.storageUtil.localStorage.removeItem(l),this.storageUtil.sessionStorage.setItem(e,t),this.addKeyToManifest(e)},e.prototype.getItem=function(e){return this.storageUtil.sessionStorage.getItem(e)},e.prototype.removeItem=function(e){var t={key:e,uuid:this.uuid},r=JSON.stringify(t);this.storageUtil.localStorage.setItem(u,r),this.storageUtil.sessionStorage.removeItem(e),this.storageUtil.localStorage.removeItem(u),this.removeKeyFromManifest(t.key)},e}();p=n([o.Injectable(),i("design:paramtypes",[a.StorageUtil,s.UUIDGenerator])],p),r.SharedSessionStorage=p},{"../nddUtils/UUIDGenerator.service":594,"./storageUtil.service":571,"ng-metadata/core":362}],570:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash/throttle"),i=e("./browserSniffer"),o=e("angular"),t=o.module("sticky",[]);r.default=t,t.directive("sticky",["$window","$timeout",function(e,t){return{restrict:"A",scope:{disabled:"=disabledSticky"},link:function(r,a,s){function c(){O=r.calculateStickyContentInitialDimensions(),N&&(a[0].getBoundingClientRect().height||(T=r.$watch(function(){return a.height()},function(e,t){e>0&&(O=r.calculateStickyContentInitialDimensions(),q||T())})))}function l(t){var r=u(P,t);return 1===r.length?r[0]:e}function u(e,t){var r,n=[],i=t.parent();do{var o=i[0];if(1!==o.nodeType)break;if(o.tagName.toUpperCase()===e.toUpperCase())return i;r=i.parent(),i=r}while(0!==r.length);return n}function d(t){return"true"===t&&e.innerHeight-(a[0].offsetHeight+parseInt(V))<0}function p(e,t,r){var n="top",i=Math.abs(e-t),o=Math.abs(e-r);return i>o&&(n="bottom"),n}function f(e){a.attr("style",Y),C=!1,F.removeClass(k),a.removeClass(A),a.addClass(j),"top"===e?(a.removeClass(D),a.css("z-index",10).css("width",a[0].offsetWidth).css("top",O.top).css("position",O.position).css("left",O.cssLeft).css("margin-top",O.marginTop).css("height",O.height)):"bottom"===e&&B===!0&&(a.addClass(D),m(),a.css("z-index",10).css("width",a[0].offsetWidth).css("top","").css("bottom",0).css("position","absolute").css("left",O.cssLeft).css("margin-top",O.marginTop).css("margin-bottom",O.marginBottom).css("height",O.height)),w&&e===U&&w.remove()}function h(e){C=!0,t(function(){O.offsetWidth=a[0].offsetWidth},0),F.addClass(k),a.removeClass(j),a.removeClass(D),a.addClass(A),m(),a.css("z-index","10").css("width",a[0].offsetWidth+"px").css("position","fixed").css("left",a.css("left").replace("px","")+"px").css(U,V+v($)+"px").css("margin-top",0),"bottom"===U&&a.css("margin-bottom",0)}function m(){L&&(w&&w.remove(),w=o.element("<div>"),w.css("height",a[0].offsetHeight+"px"),a.after(w))}function g(){return!!(B&&y()>R)}function v(e){var t=0;return e.getBoundingClientRect&&(t=e.getBoundingClientRect().top),t}function y(){var e;return e="undefined"!=typeof $.scrollTop?$.scrollTop:"undefined"!=typeof $.pageYOffset?$.pageYOffset:document.documentElement.scrollTop}function b(){var t;return t=x[0]instanceof HTMLElement?e.getComputedStyle(x[0],null).getPropertyValue("height").replace(/px;?/,""):e.innerHeight,parseInt(t)||0}function S(){var t=s.mediaQuery||!1,r=e.matchMedia;return t&&!(r("("+t+")").matches||r(t).matches)}if(!i.isBrowserIE()){var _,w,E,T,O,I,P="sticky-scroll",R=0,C=!1,A=s.stickyClass||"",j=s.unstickyClass||"",k=s.bodyClass||"",D=s.bottomClass||"",$=l(a),M=o.element(e),x=o.element($),F=o.element(document.body),L="false"!==s.usePlaceholder,U="bottom"===s.anchor?"bottom":"top",B="true"===s.confine,N=void 0!==s.isStickyLayoutDeferred&&"true"===s.isStickyLayoutDeferred,q=void 0===s.isStickyLayoutWatched||"true"===s.isStickyLayoutWatched,H=a.css("position"),V=s.offset?parseInt(s.offset.replace(/px;?/,"")):0,Y=a.attr("style")||"",z=function(){x.on("scroll",W),c(),r.$watch(X,J),r.$on("$destroy",Q)},G=function(){if(r.disabled===!0||S())return C&&f(),!1;var e,t=y();e="top"===U?B===!0?t>_&&t<=R:t>_:t<=_;var n=p(t,_,R);!e||d(s.stickLimit)||C?!e&&C?f(n,t):B&&!e&&(E=v(a[0]),f(n,t)):h(n)},W=n(G,100),Q=function(){x.off("scroll",W),M.off("resize",K),F.removeClass(k),w&&w.remove()},K=function(){f(U),W()},X=function(){return r.disabled===!0?f():"top"===U?(E||v(a[0]))-v($)+y():v(a[0])-b()+a[0].offsetHeight+y()},J=function(e,t){if((e!==t||"undefined"==typeof _)&&!C&&!g()&&e>0){_=e-V,B&&a.parent().css({position:"relative"});var r=a.parent()[0],n=parseInt(r.offsetHeight)-(L?0:a[0].offsetHeight),i=parseInt(a.css("margin-bottom").replace(/px;?/,""))||0,o=v(a[0]),s=v(r),c=v($),l=o-c,u=s+n-o;R=l+u-a[0].offsetHeight-i-V+ +y(),W()}};r.getElement=function(){return a},r.getScrollbar=function(){return $},r.getInitialCSS=function(){return O},r.getAnchor=function(){return U},r.isSticking=function(){return C},r.getOriginalInitialCSS=function(){return I},r.processUnStickElement=function(e){f(e)},r.processCheckIfShouldStick=function(){W()},r.calculateStickyContentInitialDimensions=function(){return{zIndex:a.css("z-index"),top:a.css("top"),position:H,marginTop:a.css("margin-top"),marginBottom:a.css("margin-bottom"),cssLeft:a.css("left"),height:a.css("height")}},r.updateStickyContentUpdateDimensions=function(e,t){e&&t&&(O.width=e+"px",O.height=t+"px")},t(function(){I=r.calculateStickyContentInitialDimensions(),z()},0)}},controller:["$scope","$window",function(e,t){this.resetLayout=function(r,n){function i(){"top"===s&&(o===t?t.scrollTo(0,0):o.scrollTop>0&&(o.scrollTop=0))}var o=e.getScrollbar(),a=e.getInitialCSS(),s=e.getAnchor();if(e.isSticking()&&(e.processUnStickElement(s),e.processCheckIfShouldStick()),e.getElement().css({width:"",height:"",position:"",top:"",zIndex:""}),a.position=e.getOriginalInitialCSS().position,delete a.offsetWidth,void 0===r&&void 0===n){var c=e.getElement()[0].getBoundingClientRect();r=c.width,n=c.height}e.updateStickyContentUpdateDimensions(r,n),i()},this.getScrollbar=function(){return e.getScrollbar()}}]}}]),window.matchMedia=window.matchMedia||function(){var e="angular-sticky: This browser does not support matchMedia, therefore the minWidth option will not work on this browser. Polyfill matchMedia to fix this issue.";return window.console&&console.warn&&console.warn(e),function(){return{matches:!0}}}()},{"./browserSniffer":534,angular:"angular","lodash/throttle":311}],571:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("lodash/uniq"),c="LOCALSTORAGE",l="SESSIONSTORAGE",u="Bulk",d="@",p=function(){function e(e,t,r){this.$cookies=e,this.$q=t,this._isLocalStorageAvailable=!0,this._isSessionStorageAvailable=!0;try{localStorage.setItem("storageTest",""),localStorage.removeItem("storageTest")}catch(e){this._isLocalStorageAvailable=!1}try{sessionStorage.setItem("storageTest",""),sessionStorage.removeItem("storageTest")}catch(e){this._isSessionStorageAvailable=!1}this._isLocalStorageAvailable?(this.localStorage=localStorage,this.$localForage=r):(this.localStorage=new h(c,this.$cookies),this.$localForage=new m(c,this.$cookies,this.$q)),this._isSessionStorageAvailable?this.sessionStorage=sessionStorage:this.sessionStorage=new h(l,this.$cookies)}return Object.defineProperty(e.prototype,"isLocalStorageAvailable",{get:function(){return this._isLocalStorageAvailable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSessionStorageAvailable",{get:function(){return this._isSessionStorageAvailable},enumerable:!0,configurable:!0}),e}();p=n([a.Injectable(),o(0,a.Inject("$cookies")),o(1,a.Inject("$q")),o(2,a.Inject("$localForage")),i("design:paramtypes",[Object,Function,Object])],p),r.StorageUtil=p;var f=function(){function e(e,t){this.prefix=e,this.$cookies=t,this.MAX_COOKIE_SIZE=2e3}return e.prototype.splitToBulksAndSet=function(e,t){this.removeBulkedItem(e);for(var r=JSON.stringify(t),n=this.MAX_COOKIE_SIZE/2,i=[],o=0;o<r.length;o+=n)i[i.length]=r.slice(o,o+n);for(var a=0;a<i.length;a++){var s=this.prefix+u+a+d+e;this.$cookies.put(s,i[a])}},e.prototype.getBulkedItem=function(e){for(var t=0,r="",n=this.$cookies.get(this.prefix+u+t+d+e);void 0!=n;)r+=n,t++,n=this.$cookies.get(this.prefix+u+t+d+e);if(0!==t)return JSON.parse(r)},e.prototype.removeBulkedItem=function(e){for(var t=0,r=this.$cookies.get(this.prefix+u+t+d+e);void 0!=r;)this.$cookies.remove(this.prefix+u+t+d+e),t++,r=this.$cookies.get(this.prefix+u+t+d+e)},e}(),h=function(){function e(e,t){this.prefix=e,this.$cookies=t,this.cookieBulkHandler=new f(e,t)}return e.prototype.setItem=function(e,t){this.cookieBulkHandler.splitToBulksAndSet(e,t)},e.prototype.removeItem=function(e){this.cookieBulkHandler.removeBulkedItem(e)},e.prototype.getItem=function(e){return this.cookieBulkHandler.getBulkedItem(e)},e}(),m=function(){function e(e,t,r){this.prefix=e,this.$cookies=t,this.$q=r,this.cookieBulkHandler=new f(e,t)}return e.prototype.setItem=function(e,t){var r,n=!1;try{this.cookieBulkHandler.splitToBulksAndSet(e,t)}catch(e){n=!0,r=e}return this.$q(function(e,i){n?i(r):e(t)})},e.prototype.removeItem=function(e){var t,r=!1;try{this.cookieBulkHandler.removeBulkedItem(e)}catch(e){r=!0,t=e}return this.$q(function(e,n){r?n(t):e()})},e.prototype.getItem=function(e){var t,r,n=!1;try{r=this.cookieBulkHandler.getBulkedItem(e)}catch(e){n=!0,t=e}return this.$q(function(e,i){n?i(t):e(r)})},e.prototype.clear=function(){var e,t=!1;try{var r=this.$cookies.getAll();for(var n in r)0===n.indexOf(this.prefix)&&this.$cookies.remove(n)}catch(r){t=!0,e=r}return this.$q(function(r,n){t?n(e):r()})},e.prototype.keys=function(){var e,t,r=this,n=!1;try{var i=this.$cookies.getAll();t=Object.keys(i),t=t.filter(function(e){return 0===e.indexOf(r.prefix)}),t=t.map(function(e){return e.replace(new RegExp("^"+r.prefix),"")}),t=t.map(function(e){return e.replace(new RegExp("^"+u+"\\d+"+d),"")}),t=s(t)}catch(t){n=!0,e=t}return this.$q(function(r,i){n?i(e):r(t)})},e}();(function(){function e(e,t){this.prefix=e,this.$cookies=t}return e.prototype.setItem=function(e,t){var r=this.prefix+e;this.$cookies.put(r,t)},e.prototype.removeItem=function(e){var t=this.prefix+e;this.$cookies.remove(t)},e.prototype.getItem=function(e){var t=this.prefix+e;return this.$cookies.get(t)},e})(),function(){function e(e,t,r){this.prefix=e,this.$cookies=t,this.$q=r}return e.prototype.setItem=function(e,t){var r,n=!1,i=this.prefix+e;try{this.$cookies.putObject(i,t)}catch(e){n=!0,r=e}return this.$q(function(e,i){n?i(r):e(t)})},e.prototype.removeItem=function(e){var t,r=!1,n=this.prefix+e;try{this.$cookies.remove(n)}catch(e){r=!0,t=e}return this.$q(function(e,n){r?n(t):e()})},e.prototype.getItem=function(e){var t,r,n=!1,i=this.prefix+e;try{r=this.$cookies.getObject(i)}catch(e){n=!0,t=e}return this.$q(function(e,i){n?i(t):e(r)})},e.prototype.clear=function(){var e,t=!1;try{var r=this.$cookies.getAll();for(var n in r)0===n.indexOf(this.prefix)&&this.$cookies.remove(n)}catch(r){t=!0,e=r}return this.$q(function(r,n){t?n(e):r()})},e.prototype.keys=function(){var e,t,r=this,n=!1;try{var i=this.$cookies.getAll();t=Object.keys(i),t=t.filter(function(e){return 0===e.indexOf(r.prefix)}),t=t.map(function(e){return e.replace(new RegExp("^"+r.prefix),"")})}catch(t){n=!0,e=t}return this.$q(function(r,i){n?i(e):r(t)})},e}()},{"lodash/uniq":321,"ng-metadata/core":362}],572:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./alertBar.service"),c=e("../../../security/jwtUtil.service"),l=e("../../../nddUtils/configurationUtil.service"),u=e("./alertFactory.service"),d=e("../../mediaQueries.service"),p=function(){function e(e,t,r,n,i,o,a){this.$sce=e,this.$compile=t,this.favoritesIcons=r,this.alertBarService=n,this.jwtUtilService=i,this.configurationUtil=o,this.mediaQueries=a}return Object.defineProperty(e.prototype,"templateSrc",{get:function(){switch(this.alertObject.getType()){case u.ALERT_MSG_TYPE.SIGNIN:return"components/infra/widgets/alerts/alertTemplates/signIn.html";case u.ALERT_MSG_TYPE.REQUEST:return"components/infra/widgets/alerts/alertTemplates/requestAlert.html";case u.ALERT_MSG_TYPE.SIMPLE:return"components/infra/widgets/alerts/alertTemplates/simple.html";case u.ALERT_MSG_TYPE.SIMPLE_WITHOUT_DISMISS:return"components/infra/widgets/alerts/alertTemplates/simpleWithoutDismiss.html";default:return"components/infra/widgets/alerts/alertTemplates/general.html"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"htmlMsg",{get:function(){return this.alertObject?this.alertObject.getMsgHtml():null},enumerable:!0,configurable:!0}),e.prototype.clearMessageSessionEnabled=function(){switch(this.alertObject.getType()){case u.ALERT_MSG_TYPE.SIGNIN:return!0;default:return!1}},e.prototype.onClose=function(){if(this.clearMessageSessionEnabled()){var e=this.alertObject.getType()+"_clearClicked";this.alertBarService.messageShouldDisplay(e,!0)}this.alertObject.hide()},e.prototype.showMessage=function(){if(this.clearMessageSessionEnabled()){var e=this.alertObject.getType()+"_clearClicked";return this.alertBarService.messageShouldDisplay(e,null)}},e.prototype.isGuestOrOffcampusForSignIn=function(){if(this.alertObject&&this.alertObject.getAlwaysOn())return!0;var e="GUEST"===this.jwtUtilService.getDecodedToken().userGroup,t="true"!==this.jwtUtilService.getDecodedToken().onCampus,r=this.configurationUtil.getBriefResultConfiguration().groupmessage,n=this.configurationUtil.getBriefResultConfiguration().displaysigninmsg;return!!n&&(0===r&&e||1===r&&t)},e}();n([a.Input(),i("design:type",Object)],p.prototype,"alertObject",void 0),n([a.Input(),i("design:type",Boolean)],p.prototype,"idpLogout",void 0),p=n([a.Component({selector:"prm-alert-bar",templateUrl:"components/infra/widgets/alerts/alert-bar.html"}),o(0,a.Inject("$sce")),o(1,a.Inject("$compile")),o(2,a.Inject("favoritesIcons")),i("design:paramtypes",[Object,Object,Object,s.AlertBarService,c.JwtUtilService,l.ConfigurationUtil,d.MediaQueries])],p),r.PrmAlertBar=p},{"../../../nddUtils/configurationUtil.service":596,"../../../security/jwtUtil.service":842,"../../mediaQueries.service":562,"./alertBar.service":573,"./alertFactory.service":574,"ng-metadata/core":362}],573:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=function(){function e(){this.messagesDismissed={}}return e.prototype.messageShouldDisplay=function(e,t){return this.messagesDismissed[e]||(this.messagesDismissed[e]=!1),t&&(this.messagesDismissed[e]=t),!this.messagesDismissed[e]},e}();a=n([o.Injectable(),i("design:paramtypes",[])],a),r.AlertBarService=a,r.default=[]},{"ng-metadata/core":362}],574:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./generalAlertMsg"),a=function(){function e(){}return e.prototype.create=function(e){return void 0===e&&(e=s.GENERAL),new o.GeneralAlertMsg(e)},e}();a=n([i.Injectable()],a),r.AlertFactory=a;var s;!function(e){e[e.GENERAL=0]="GENERAL",e[e.SIGNIN=1]="SIGNIN",e[e.REQUEST=2]="REQUEST",e[e.SIMPLE=3]="SIMPLE",e[e.SIMPLE_WITHOUT_DISMISS=4]="SIMPLE_WITHOUT_DISMISS"}(s=r.ALERT_MSG_TYPE||(r.ALERT_MSG_TYPE={})),r.default=[]},{"./generalAlertMsg":576,"ng-metadata/core":362}],575:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./alertFactory.service"),a=e("./alertBar.service"),s=e("angular-material"),c=function(){function e(){}return e}();c=n([i.NgModule({declarations:[],providers:[o.AlertFactory,a.AlertBarService],
imports:[s]})],c),r.AlertsModule=c},{"./alertBar.service":573,"./alertFactory.service":574,"angular-material":17,"ng-metadata/core":362}],576:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){this.type=e,this.dismissed=t,this._htmlMsg=null,this._alwaysOn=!1}return e.prototype.show=function(e,t){void 0===t&&(t=!1),this._htmlMsg=e,this._alwaysOn=t},e.prototype.hide=function(){this._htmlMsg=null},e.prototype.getMsgHtml=function(){return this._htmlMsg},e.prototype.getType=function(){return this.type},e.prototype.isDissmissed=function(){return this.dismissed[this.type]},e.prototype.getAlwaysOn=function(){return this._alwaysOn},e}();r.GeneralAlertMsg=n},{}],577:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("angular-material"),c=function(){function e(e,t,r){this.$mdDialog=e,this.$timeout=t,this.$translate=r}return e.prototype.showConfirmDialog=function(e,t){var r=this.$translate.instant("nui.message.dismiss"),n=this.$mdDialog.alert().title(e).textContent(t).ok(r);return this.$mdDialog.show(n).finally(function(){n=void 0}),n},e.prototype.showConfirmDialogTimeout=function(e,t,r){var n=this;void 0===r&&(r=6e3);var i=this.showConfirmDialog(e,t);this.$timeout(function(){n.$mdDialog.hide(i)},r)},e}();c=n([a.Injectable(),o(0,a.Inject("$mdDialog")),o(1,a.Inject("$timeout")),o(2,a.Inject("$translate")),i("design:paramtypes",[Object,Object,Object])],c),r.DialogService=c,r.default=[s]},{"angular-material":17,"ng-metadata/core":362}],578:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./alerts/alerts.module"),a=function(){function e(){}return e}();a=n([i.NgModule({declarations:[],providers:[],imports:[o.AlertsModule]})],a),r.WidgetsModule=a},{"./alerts/alerts.module":575,"ng-metadata/core":362}],579:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./alphabetToolbar.service"),c=e("../journals.service"),l=e("../databases.service"),u=function(){function e(e,t,r,n){this.alphabetToolbarService=e,this.journalsService=t,this.databasesService=r,this.$translate=n,this.selectedLetter=new a.EventEmitter,this._AtoZ=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],this._AtoZList=this._AtoZ.map(function(e){return{letter:e,type:"alphabet"}}),this._AtoZList.splice(0,0,{letter:"0-9",type:"numerals"}),this._AtoZList.push({letter:"Others",type:"others"}),this.tooltipText=this.setTooltipText()}return e.prototype.ngOnInit=function(){},e.prototype.sendSelected=function(e){this.select(e),this.selectedLetter.emit(e)},e.prototype.select=function(e){this.activeLetter=e},e.prototype.getAraiaLabelForLetter=function(e){return this.activeLetter!=e?this.journalsService.isJournalSearch()?this.$translate.instant("nui.journalsearch.searchbox.helpabc",{idx_0:this.getTranslatedLetter(e)}):this.databasesService.isDBSearch()?this.$translate.instant("nui.databasesearch.searchbox.helpabc",{idx_0:this.getTranslatedLetter(e)}):"":this.journalsService.isJournalSearch()?this.$translate.instant("nui.journalsearch.searchbox.helpabcChecked",{idx_0:this.getTranslatedLetter(e)}):this.databasesService.isDBSearch()?this.$translate.instant("nui.databasesearch.searchbox.helpabcChecked",{idx_0:this.getTranslatedLetter(e)}):void 0},e.prototype.setTooltipText=function(){return this.journalsService.isJournalSearch()?"nui.journalsearch.searchbox.helpabc":this.databasesService.isDBSearch()?"nui.databasesearch.searchbox.helpabc":""},e.prototype.getTranslatedLetter=function(e){return this.$translate.instant("AZ."+e)},Object.defineProperty(e.prototype,"aToZList",{get:function(){return this._AtoZList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeLetter",{get:function(){return this.curActiveLetter},set:function(e){this.curActiveLetter=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipText",{get:function(){return this._tooltipText},set:function(e){this._tooltipText=e},enumerable:!0,configurable:!0}),e}();n([a.Output(),i("design:type",a.EventEmitter)],u.prototype,"selectedLetter",void 0),n([a.Input(),i("design:type",String)],u.prototype,"curActiveLetter",void 0),u=n([a.Component({selector:"prm-alphabet-toolbar",templateUrl:"components/journals/alphabetToolbar/alphabet-toolbar.html"}),o(3,a.Inject("$translate")),i("design:paramtypes",[s.AlphabetToolbarService,c.JournalsService,l.DatabasesService,Function])],u),r.AlphabetToolbar=u},{"../databases.service":584,"../journals.service":588,"./alphabetToolbar.service":580,"ng-metadata/core":362}],580:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=function(){function e(){}return e}();o=n([i.Injectable()],o),r.AlphabetToolbarService=o},{"ng-metadata/core":362}],581:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./journalsFullView.directive"),a=e("./journals.directive"),s=e("./atozSearchBar.directive"),c=e("./searchWithinJournal.directive"),l=e("./journals.service"),u=e("./journalsSearchBar.service"),d=e("./alphabetToolbar/alphabetToolbar.directive"),p=e("./alphabetToolbar/alphabetToolbar.service"),f=e("./databasesFullView.directive"),h=e("./databases.service"),m=e("./databasesFullView.service"),g=e("./databases.directive"),v=function(){function e(){}return e}();v=n([i.NgModule({declarations:[o.PrmJournalsFullView,a.PrmJournals,g.PrmDatabases,s.PrmAtozSearchBar,c.PrmSearchWithinJournal,d.AlphabetToolbar,f.PrmDatabasesFullView],providers:[l.JournalsService,u.JournalsSearchBarService,p.AlphabetToolbarService,h.DatabasesService,m.DatabasesFullViewService],imports:[]})],v),r.AtozModule=v},{"./alphabetToolbar/alphabetToolbar.directive":579,"./alphabetToolbar/alphabetToolbar.service":580,"./atozSearchBar.directive":582,"./databases.directive":583,"./databases.service":584,"./databasesFullView.directive":585,"./databasesFullView.service":586,"./journals.directive":587,"./journals.service":588,"./journalsFullView.directive":589,"./journalsSearchBar.service":590,"./searchWithinJournal.directive":591,"ng-metadata/core":362}],582:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../search/search.fields.service"),c=e("./journalsSearchBar.service"),l=e("../infra/widgets/alerts/alertFactory.service"),u=e("../journals/journals.service"),d=e("../appConfig/appConfigForward"),p=e("../analytics/primolytics.service"),f=e("./databases.service"),h=e("angular"),m=function(){function e(e,t,r,n,i,o,s,c,u){var d=this;this.$translate=e,this.searchBoxIcons=t,this.$stateParams=r,this.searchFieldsService=n,this.journalsSearchBarService=i,this.primolyticsService=o,this.alertService=s,this.databasesService=c,this.journalsService=u,this.searchEvent=new a.EventEmitter;var p=this.getPlaceHolder();this.title=this.setTitle(),e(p).then(function(e){d._placeHolderText=e}),this.searchFieldsService.tab=this.journalsService.JOURNAL_SEARCH_TAB,this._signInAlert=this.alertService.create(l.ALERT_MSG_TYPE.SIGNIN),this._signInAlert.show("nui.search.tnsearch.error.authorization",!0)}return e.prototype.ngOnInit=function(){var e=this.$stateParams.journals||this.$stateParams.databases;if(e){var t=e.split(",")[0],r=e.substr(e.indexOf(",")+1);"letter"==t?this.selectedLetter=r:this.mainSearchField=r}},Object.defineProperty(e.prototype,"signInAlert",{get:function(){return this._signInAlert},enumerable:!0,configurable:!0}),e.prototype.onSubmit=function(e){if(this.mainSearchField||e){e?this.mainSearchField="":"",this.searchFieldsService.tab=this.journalsService.JOURNAL_SEARCH_TAB,this.selectedLetter=e;var t={mainSearchField:"any,contains,"+this.mainSearchField,tab:this.journalsService.JOURNAL_SEARCH_TAB,mode:null,journals:this.getJournalsParam(e),databases:this.getDataBasesParam(e),facet:[],mfacet:[],pfilter:[]};this.searchEvent.emit(t)}var r=h.element(document.getElementById("autoComplete")),n=r.controller("mdAutocomplete");n.hidden=!0},e.prototype.getJournalsParam=function(e){return this.journalsService.isJournalSearch()?e?"letter,"+e:"any,"+this.mainSearchField:""},e.prototype.getDataBasesParam=function(e){return this.databasesService.isDBSearch()?e?"letter,"+e:"any,"+this.mainSearchField:""},e.prototype.getAutoCompleteItems=function(){return!this.mainSearchField||this.mainSearchField.length<3||!this.enableAutoComplete()?[]:this.journalsSearchBarService.getAutocompleteItems(this.mainSearchField).then(function(e){return e.data.suggestions.map(function(e){return{value:e,display:e}})})},e.prototype.enableAutoComplete=function(){return this.isSuprima()},e.prototype.enableAtoZView=function(){return!this.isSuprima()},e.prototype.isSuprima=function(){return"suprima"===d.getBackendSystem()},Object.defineProperty(e.prototype,"mainSearchField",{get:function(){return this.searchFieldsService.mainSearch},set:function(e){this.searchFieldsService.mainSearch=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showSignIn",{get:function(){return this.journalsSearchBarService.showSignIn},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"placeHolderText",{get:function(){return this._placeHolderText},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedTab",{get:function(){return this.journalsService.JOURNAL_SEARCH_TAB},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this._title},set:function(e){this._title=e},enumerable:!0,configurable:!0}),e.prototype.getPlaceHolder=function(){return this.journalsService.isJournalSearch()?"nui.journalsearch.searchbox.help":this.databasesService.isDBSearch()?"nui.databasesearch.searchbox.help":""},e.prototype.setTitle=function(){return this.journalsService.isJournalSearch()?"nui.journalsearch.title":this.databasesService.isDBSearch()?"nui.databasesearch.title":""},e}();n([a.Output(),i("design:type",Object)],m.prototype,"searchEvent",void 0),m=n([a.Component({selector:"prm-atoz-search-bar",templateUrl:"components/journals/atoz-search-bar.html"}),o(0,a.Inject("$translate")),o(1,a.Inject("searchBoxIcons")),o(2,a.Inject("$stateParams")),i("design:paramtypes",[Object,Array,Object,s.SearchFieldsService,c.JournalsSearchBarService,p.PrimolyticsService,l.AlertFactory,f.DatabasesService,u.JournalsService])],m),r.PrmAtozSearchBar=m},{"../analytics/primolytics.service":480,"../appConfig/appConfigForward":484,"../infra/widgets/alerts/alertFactory.service":574,"../journals/journals.service":588,"../search/search.fields.service":790,"./databases.service":584,"./journalsSearchBar.service":590,angular:"angular","ng-metadata/core":362}],583:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0}),e("angular-material");var o=e("ng-metadata/core"),a=function(){function e(){}return e}();a=n([o.Component({selector:"prm-databases",templateUrl:"components/journals/databases.html"}),i("design:paramtypes",[])],a),r.PrmDatabases=a},{"angular-material":17,"ng-metadata/core":362}],584:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../primoExplore/primoExploreStates.module"),c=function(){function e(e){this.$state=e}return e.prototype.isDBSearch=function(){return this.$state.current.name===s.STATE_NAMES.DB_SEARCH||this.$state.current.name===s.STATE_NAMES.DB_FULL_DISPLAY},e}();c=n([a.Injectable(),o(0,a.Inject("$state")),i("design:paramtypes",[Object])],c),r.DatabasesService=c},{"../primoExplore/primoExploreStates.module":620,"ng-metadata/core":362}],585:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("./databasesFullView.service"),s=function(){function e(e){this.databasesFullDisplayService=e}return e.prototype.ngOnInit=function(){},e}();s=n([o.Component({selector:"prm-databases-full-view",templateUrl:"components/journals/databases-full-view.html"}),i("design:paramtypes",[a.DatabasesFullViewService])],s),r.PrmDatabasesFullView=s},{"./databasesFullView.service":586,"ng-metadata/core":362}],586:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=function(){function e(){}return e}();o=n([i.Injectable()],o),r.DatabasesFullViewService=o},{"ng-metadata/core":362}],587:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0}),e("angular-material");var o=e("ng-metadata/core"),a=function(){function e(){}return e}();a=n([o.Component({selector:"prm-journals",templateUrl:"components/journals/journals-search.html"}),i("design:paramtypes",[])],a),r.PrmJournals=a},{"angular-material":17,"ng-metadata/core":362}],588:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("../primoExplore/primoExploreStates.module"),s=e("ng-metadata/core"),c=e("../search/search.fields.service"),l=e("../appConfig/appConfigForward"),u=function(){function e(e,t){this.$state=e,this.searchFieldsService=t}return e.prototype.isJournalSearch=function(){return this.$state.current.name===a.STATE_NAMES.JOURNAL_SEARCH||this.$state.current.name===a.STATE_NAMES.JOURNAL_FULL_DISPLAY},e.prototype.returnToJournalsSearch=function(){return this.searchFieldsService.tab===this.JOURNAL_SEARCH_TAB&&"suprima"===l.getBackendSystem()},Object.defineProperty(e.prototype,"JOURNAL_SEARCH_TAB",{get:function(){return window.appConfig.journal_tab||"jsearch_slot"},enumerable:!0,configurable:!0}),e}();u=n([s.Injectable(),o(0,s.Inject("$state")),i("design:paramtypes",[Object,c.SearchFieldsService])],u),r.JournalsService=u},{"../appConfig/appConfigForward":484,"../primoExplore/primoExploreStates.module":620,"../search/search.fields.service":790,"ng-metadata/core":362}],589:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0}),e("angular-material");var o=e("ng-metadata/core"),a=function(){function e(){}return e}();a=n([o.Component({selector:"prm-journals-full-view",templateUrl:"components/journals/journals-full-view.html"}),i("design:paramtypes",[])],a),r.PrmJournalsFullView=a},{"angular-material":17,"ng-metadata/core":362}],590:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../appConfig/appConfigForward"),c=function(){function e(e,t){this.$http=e,this.restBaseURLs=t,this._showSignIn=!1}return Object.defineProperty(e.prototype,"showSignIn",{get:function(){return this._showSignIn},enumerable:!0,configurable:!0}),e.prototype.setShowSignIn=function(e){this._showSignIn=e},e.prototype.getAutocompleteItems=function(e){var t=this.restBaseURLs.journalsAutocomplete,r={vid:s.getVid(),query:e};return this.$http({method:"GET",url:t,params:r})},e}();c=n([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),i("design:paramtypes",[Function,Object])],c),r.JournalsSearchBarService=c},{"../appConfig/appConfigForward":484,"ng-metadata/core":362}],591:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0}),e("angular-material");var a=e("ng-metadata/core"),s=e("../nddUtils/configurationUtil.service"),c=e("../appConfig/appConfigForward"),l=e("lodash/get"),u=e("lodash/uniq"),d=function(){function e(e,t){this.searchBoxIcons=e,this.configurationUtil=t}return e.prototype.onSubmit=function(){if(this._searchInput){var e=l(this.item,"pnx.addata.issn",[]),t=l(this.item,"pnx.addata.eissn",[]);e=e.concat(t).map(function(e,t,r){return e.replace("-","")}),e=u(e);var r,n=encodeURI(e.join(" OR "));r=this.configurationUtil.getSummonOverAlma()?this.createSummonOverAlmaLink(n):this.createAdvanceSearchLink(n),window.open(r,"_blank")}},e.prototype.createSummonOverAlmaLink=function(e){var t="search?q=ISSN:({issns}){query}",r=this.configurationUtil.getSearchWithinJournalConfig(),n=encodeURI(this._searchInput);return t=t.replace("{issns}",e).replace("{query}",n),r.summonUrl+t},e.prototype.createAdvanceSearchLink=function(e){var t="/discovery/search?query=any,contains,{query},AND&query=issn,contains,({issns}),AND&tab={tab}&search_scope={scope}&sortby=rank&vid={vid}&mode=advanced&offset=0",r=this.configurationUtil.getSearchWithinJournalConfig(),n=encodeURI(this._searchInput),i=c.getVid(),o=r.tab,a=r.scope;return t=t.replace("{query}",n).replace("{issns}",e).replace("{tab}",o).replace("{scope}",a).replace("{vid}",i)},Object.defineProperty(e.prototype,"searchInput",{get:function(){return this._searchInput},set:function(e){this._searchInput=e},enumerable:!0,configurable:!0}),e}();n([a.Input(),i("design:type",Object)],d.prototype,"item",void 0),d=n([a.Component({selector:"prm-search-within-journal",templateUrl:"components/journals/search-within-journal.html"}),o(0,a.Inject("searchBoxIcons")),i("design:paramtypes",[Array,s.ConfigurationUtil])],d),r.PrmSearchWithinJournal=d},{"../appConfig/appConfigForward":484,"../nddUtils/configurationUtil.service":596,"angular-material":17,"lodash/get":255,"lodash/uniq":321,"ng-metadata/core":362}],592:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("lodash/isMatch"),s=function(){function e(){this.cachedTableNames={AUTO_COMPLETE_CONFIG:"Auto Complete Configuration",HOLDINGS_RECORD_CONFIG:"Holdings Record Configuration",BROWSE_LISTS:"Browse Lists",SORT_FIELDS_CONFIG:"sort_fields_config",CITATION_STYLES:"Citation styles",PERSONAL_SETTING_FIELDS:"Personal Setting Fields",LOANS_BRIEF_DISPLAY:"Loans Brief Display",REQUESTS_BRIEF_DISPLAY:"Requests Brief Display",FINES_BRIEF_DISPLAY:"Fines Brief Display",AUTHENTICATION_SERVICE:"Authentication Service",LOANS_DETAILED_DISPLAY:"Loans Detailed Display",LOCATION_ITEM_CONTENT:"Location Item content",ITEMS_BRIEF_DISPLAY:"Items Brief Display",GENERAL_CONF:"General Configuration",HOLD_OPTIONAL_REQUEST_PARAMETERS:"Hold Optional Request Parameters",PHOTOCOPY_OPTIONAL_REQUEST_PARAMETERS:"Photocopy Optional Request Parameters",CALL_SLIP_OPTIONAL_REQUEST_PARAMETERS:"CallSlip Optional Request Parameters",UBREQUEST_OPTIONAL_REQUEST_PARAMETERS:"UBRequest Optional Request Parameters",RECALL_OPTIONAL_REQUEST_PARAMETERS:"Recall Optional Request Parameters",ILL_OPTIONAL_REQUEST_PARAMETERS:"ILL Optional Request Parameters",UB_OPTIONAL_REQUEST_PARAMETERS:"UBRequest Optional Request Parameters",DIGITIZATION_OPTIONAL_REQUEST_PARAMETERS:"Digitization Optional Request Parameters",RESOURCE_SHARING_REQUEST_PARAMETERS:"Resource Sharing Request Parameters",HOLD_BOOKING_OPTIONAL_REQUEST_PARAMETERS:"Request (Hold and Booking) Optional Parameters",PURCHASE_REQUEST_OPTIONAL_PARAMETERS:"Purchase Request Optional Parameters",EXPORT_RIS_ENCODINGS:"Export RIS encodings",BULK_DEFINITION:"Bulk Definition",INSTITUTIONS_BASE_URLS:"Institution Base URLs",CITATION_LINKER_DEFINITIONS:"Citation Linker Definitions",HYPERTEXT_LINKING_DEFINITIONS:"Hypertext Linking Definitions",PERSONALIZE_YOUR_RESULTS_DISCIPLINES_FIELDS:"Personalize Your Results Disciplines Fields",ALMA_VIEWIT_CONFIG:"Alma ViewIt Config"},this.MAPPING_TABLES_CACHE=this.getMappingTablesCache()}return e.prototype.getTable=function(e){var t=this.MAPPING_TABLES_CACHE[e];return t||[]},e.prototype.getTargetValue=function(e,t,r){void 0===r&&(r="");var n=this.findByProperties(e,t);if(n&&n.length>0){var i=n[0]||{target:r};return i.target}return r},e.prototype.findByProperties=function(e,t){var r=this.getTable(e)||[];return r.filter(this.filterByProperties(t))},Object.defineProperty(e.prototype,"tables",{get:function(){return this.cachedTableNames},enumerable:!0,configurable:!0}),e.prototype.getMappingTablesCache=function(){return window.appConfig["mapping-tables"]},e.prototype.filterByProperties=function(e){return function(t){return a(t,e)}},e}();s=n([o.Injectable(),i("design:paramtypes",[])],s),r.MappingTablesCache=s},{"lodash/isMatch":272,"ng-metadata/core":362}],593:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../appConfig/appConfigForward"),c=e("lodash/replace"),l=function(){function e(e,t,r){this.$location=e,this.$translate=t,this.$q=r,this.vid=s.getVid()}return e.prototype.getImageLink=function(e){var t=this;return this.$q(function(r,n){if(e&&e.linkURL){var i=e.linkURL,o=new Image;o.onload=function(){o.width>1?r(e):n("")},o.onerror=function(){n("")},o.src=t.handleLink(i)}else n("")})},e.prototype.handleLink=function(e){var t=e,r="https";try{var n=this.$location;r=n.$$protocol}catch(e){r="https"}return"https"===r&&(t=c(e,"http://","https://")),t},e}();l=n([a.Injectable(),o(0,a.Inject("$location")),o(1,a.Inject("$translate")),o(2,a.Inject("$q")),i("design:paramtypes",[Object,Function,Function])],l),r.ImagesUtil=l},{"../appConfig/appConfigForward":484,"lodash/replace":300,"ng-metadata/core":362}],594:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=function(){function e(){}return e.prototype.generateUUID=function(){var e=(new Date).getTime();window.performance&&"function"==typeof window.performance.now&&(e+=performance.now());var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?r:3&r|8).toString(16)});return t},e}();o=n([i.Injectable()],o),r.UUIDGenerator=o},{"ng-metadata/core":362}],595:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("lodash/flattenDeep"),s=function(){function e(){}return e.prototype.range=function(e){return Array.apply(null,new Array(e)).map(function(e,t){return t})},e.prototype.chunk=function(e,t){return this.range(Math.ceil(e.length/t)).map(function(r,n){return e.slice(n*t,n*t+t)}.bind(this))},e.prototype.flattenDeep=function(e){return a(e)},e}();s=n([o.Injectable(),i("design:paramtypes",[])],s),r.ArrayUtils=s},{"lodash/flattenDeep":252,"ng-metadata/core":362}],596:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("../appConfig/appConfigForward"),a=e("ng-metadata/core"),s=e("../journals/journals.service"),c=e("../search/searchState.service"),l=e("../search/search.fields.service"),u=e("../appConfig/appConfigForward"),d=e("../appConfig/appConfigForward"),p=e("lodash/get"),f=function(){function e(e,t,r){this.searchStateService=e,this.searchFieldsService=t,this.journalsService=r,this.vid=u.getVid(),
this.briefResultConfiguration=u.getBriefResultConfiguration(),this.locationsTileConfiguration=u.getLocationsConfiguration(),this.systemConfiguration=u.getSystemConfiguration(),this.facetConfiguration=u.getFacetConfiguration(),this.fullViewConfiguration=u.getFullViewConfiguration(),this.mainMenuConfiguration=u.getMainMenuConfiguration(),this.summonOverAlma=u.getSummonOverAlma(),this.backendSystem=u.getBackendSystem(),this.searchWithinJournalConfig=u.getSearchWithinJournalConfig(),this.scopes=d.getScopes(),this.configuration={facet:{mainConfig:this.facetConfiguration,tileInterface:"FacetTileInterface",enrich:this.enrichFacetConfiguration},brief:{mainConfig:this.briefResultConfiguration,tileInterface:"ResultTileInterface"},briefFrbrGeneric:{mainConfig:this.briefResultConfiguration,tileInterface:"ResultTileInterfaceFrbrGeneric",enrich:this.enrichBriefResultsConfiguration},locations:{mainConfig:this.locationsTileConfiguration,tileInterface:"LocationsTileInterface"},full:{mainConfig:this.fullViewConfiguration,tileInterface:"ResultFullTileInterface"},mainMenu:{mainConfig:this.mainMenuConfiguration,tileInterface:"MainMenuTileInterface"}}}return e.prototype.getMainMenuConfiguration=function(){return this.mainMenuConfiguration[this.vid+"."+this.configuration.mainMenu.tileInterface]},e.prototype.getFacetConfiguration=function(e){return this.getConfiguration(this.configuration.facet,e)},e.prototype.getBriefResultConfiguration=function(e){return this.getConfiguration(this.configuration.brief,e)},e.prototype.getBriefResultFrbrGenericConfiguration=function(e){return this.getConfiguration(this.configuration.briefFrbrGeneric,e)},e.prototype.getLocationsConfiguration=function(e){return this.getConfiguration(this.configuration.locations,e)},e.prototype.getFullViewConfiguration=function(e){return this.getConfiguration(this.configuration.full,e)},e.prototype.getSystemConfiguration=function(e){return this.systemConfiguration[e]},e.prototype.getViewInstitutionLibraries=function(){return p(window,"appConfig.institution-libraries")},e.prototype.getTile=function(e,t){var r=this,n=t.map(function(t){if(t.startsWith(r.vid+"."+e+"."))return t}).filter(this.filterEmpty);return n.length>0?n[0]:""},e.prototype.filterEmpty=function(e){if(""!==e)return e},e.prototype.getConfiguration=function(e,t){t=this.getScope(t);var r;r=this.journalsService.isJournalSearch()?this.searchFieldsService.tab||this.journalsService.JOURNAL_SEARCH_TAB:this.searchFieldsService.tab||o.getTab(t);var n,i=u.getTabToTiles(r);i&&(n=this.getTile(e.tileInterface,i)),n||(n=this.vid+"."+e.tileInterface+"."+r);var a=e.mainConfig[n];return a||(n=this.vid+"."+e.tileInterface+"."+o.getTab(t),a=e.mainConfig[n]),e.enrich&&e.enrich(a),a},e.prototype.getScope=function(e){return e||(e=this.searchStateService.getSearchObject().scope||this.scopes[0]),"browse_search"===e&&this.isSuprima()?"MyInstitution":e},e.prototype.enrichBriefResultsConfiguration=function(e){e&&!e.enriched&&(e.enriched=!0)},e.prototype.enrichFacetConfiguration=function(e){e&&!e.enriched&&(e.toplevelsidefacet&&e.facetview.splice(0,0,{count:5,display:!0,viewinstsort:!1,id:"facet_tlevel",sort:{_string:"none",_int:5},instsort:!1,valid:!0}),e.enriched=!0)},e.prototype.getSummonOverAlma=function(){return this.summonOverAlma},e.prototype.getBackendSystem=function(){return this.backendSystem},e.prototype.isSuprima=function(){return"suprima"===this.backendSystem},e.prototype.getSearchWithinJournalConfig=function(){return this.searchWithinJournalConfig},e.prototype.getScopesObj=function(e){return window.appConfig["primo-view"].scopes.filter(function(t){return t["scope-id"]===e})},e.prototype.getProxyServerPath=function(){return this.systemConfiguration.Proxy_Server},e}();f=n([a.Injectable(),i("design:paramtypes",[c.SearchStateService,l.SearchFieldsService,s.JournalsService])],f),r.ConfigurationUtil=f},{"../appConfig/appConfigForward":484,"../journals/journals.service":588,"../search/search.fields.service":790,"../search/searchState.service":814,"lodash/get":255,"ng-metadata/core":362}],597:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("../appConfig/appConfigForward"),s=e("moment"),c=function(){function e(){this._ilsDateFormat=a.getIlsDateFormat(),this._primoShortDateFormat=a.getPrimoShortDateFormat()}return Object.defineProperty(e.prototype,"primoShortDateFormat",{get:function(){return this._primoShortDateFormat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ilsDateFormat",{get:function(){return this._ilsDateFormat},enumerable:!0,configurable:!0}),e.prototype.convertDateStringToDateType=function(e,t){if(e&&t){for(var r=0,n=0,i=0,o=0,a=0,s=0,c=0;c<e.length;c++){var l=e[c];switch(t[c]){case"y":r=10*r+parseInt(l);break;case"M":n=10*n+parseInt(l);break;case"d":i=10*i+parseInt(l);break;case"h":o=10*o+parseInt(l);break;case"m":a=10*a+parseInt(l);break;case"s":s=10*s+parseInt(l)}}return new Date(r,n-1,i,o,a,s,0)}},e.prototype.fromString=function(e,t,r){return s(e,t).format(r)},e.prototype.convertIlsDateStringToPrimoDateString=function(e){return this.fromString(e,this._ilsDateFormat.toUpperCase(),this._primoShortDateFormat.toUpperCase())},e.prototype.convertPrimoDateStringToIlsDateString=function(e){return this.fromString(e,this._primoShortDateFormat.toUpperCase(),this._ilsDateFormat.toUpperCase())},e.prototype.convertDateTypeToIlsDateString=function(e){if(e)return s(e).format(this._ilsDateFormat.toUpperCase())},e.prototype.convertDateTypeToFormatString=function(e,t){return e?s(e).format(t.toUpperCase()):""},e.prototype.convertDateTypeToPrimoDateString=function(e){if(e)return s(e).format(this._primoShortDateFormat.toUpperCase())},e.prototype.convertIlsDateStringToDateType=function(e){return this.convertDateStringToDateType(e,this._ilsDateFormat)},e.prototype.convertPrimoDateStringToDateType=function(e){return this.convertDateStringToDateType(e,this._primoShortDateFormat)},e.prototype.convert24HourStringToDisplayString=function(e,t){return void 0===t&&(t=":"),this.fromString(e,"HHmm","HH"+t+"mm")},e.prototype.convertDateStringToDate=function(e,t){var r=s(e,t.toUpperCase(),!0);return r.isValid()?r.toDate():new Date(NaN)},e}();c=n([o.Injectable(),i("design:paramtypes",[])],c),r.DateUtils=c},{"../appConfig/appConfigForward":484,moment:326,"ng-metadata/core":362}],598:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=function(){function e(){this.isSearchEnabled=!0}return e.prototype.disableSearchEndlessScrolling=function(){this.isSearchEnabled=!1},e.prototype.enableSearchEndlessScrolling=function(){this.isSearchEnabled=!0},Object.defineProperty(e.prototype,"isSearchEndlessScrollingEnabled",{get:function(){return this.isSearchEnabled},enumerable:!0,configurable:!0}),e}();a=n([o.Injectable(),i("design:paramtypes",[])],a),r.EndlessScrollingUtil=a},{"ng-metadata/core":362}],599:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("../appConfig/appConfigForward"),a=e("lodash/filter"),s=e("lodash/endsWith"),c=e("lodash/replace"),l=e("lodash/map"),u=function(){function e(){}return e.prototype.filterAndNormalizeData=function(e,t){function r(e){return e.replace(/\$\$I.*?(?=\$\$|$)/g,"")}var n=o.getInstitutionCode(),i=a(t,function(e){return!e||(e.includes("$$I"+n)||!e.includes("$$I"))});return i=l(i,r)},e.prototype.filterAndNormalizeDataFacets=function(e){function t(e){return e.displayValue=c(e.value,"$$I"+r,""),e.label&&(e.displayValue=e.label),e}var r=o.getInstitutionCode(),n=a(e,function(e){return s(e.value,"$$I"+r)||!e.value.includes("$$I")});return n=l(n,t)},e}();u=n([i.Injectable()],u),r.FilterInstitution=u},{"../appConfig/appConfigForward":484,"lodash/endsWith":242,"lodash/filter":246,"lodash/map":284,"lodash/replace":300,"ng-metadata/core":362}],600:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("../search/search.service"),s=e("../search/fullView/fullView.service"),c=e("angular"),l=function(){function e(e,t){this.searchService=e,this.fullViewService=t}return e.prototype.fillterPnx=function(e){return e.display.title=this.filterField(e.display.title),e.display.subject=this.filterField(e.display.subject),e.display.description=this.filterField(e.display.description),e.display.format=this.filterField(e.display.format),e.display.creator=this.filterField(e.display.creator),e.display.contributor=this.filterField(e.display.contributor),e},e.prototype.filterField=function(e){var t=this;if(c.isDefined(e))return"string"==typeof e?this.checkLang(e)?"":this.removeNotRelevantChars(e):(e=e.filter(function(e){return t.checkLang(e)}),e=e.map(function(e){return t.removeNotRelevantChars(e)}))},e.prototype.checkLang=function(e){var t=this.searchService.getResultObject().lang3||this.fullViewService.lang3;return!c.isDefined(e)||(e.indexOf("$$8")==-1||e.slice(-3)==t)},e.prototype.removeNotRelevantChars=function(e){var t=/\$\$8(.){3}/g;return e.replace(t,"")},e}();l=n([o.Injectable(),i("design:paramtypes",[a.SearchService,s.FullViewService])],l),r.FilterLanguage=l},{"../search/fullView/fullView.service":688,"../search/search.service":792,angular:"angular","ng-metadata/core":362}],601:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("lodash/isArray"),s=function(){function e(){this.arrayCache={}}return e.prototype.toArray=function(e,t){return a(e)?e:null===e||void 0===e?[]:(this.arrayCache[e]||(e&&t?this.arrayCache[e]=e.split(";"):this.arrayCache[e]=[e]),this.arrayCache[e])},e.prototype.convertObjectToArray=function(e){return e instanceof Array||(e=e?[e]:[]),e},e}();s=n([o.Injectable(),i("design:paramtypes",[])],s),r.JsonUtils=s},{"lodash/isArray":264,"ng-metadata/core":362}],602:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./pnxUtil.service"),a=e("./endlessScollingUtil.service"),s=e("./smoothScrollUtil.service"),c=e("./configurationUtil.service"),l=e("./templateUtil.service"),u=e("./jsonUtils.service"),d=e("./UUIDGenerator.service"),p=e("./searchUtil.service"),f=e("./resultUtil.service"),h=e("./dateUtils.service"),m=e("./stringUtils.service"),g=e("./arrayUtils.service"),v=e("./filterInstitution.service"),y=e("./filterLanguage.service"),b=function(){function e(){}return e}();b=n([i.NgModule({declarations:[],providers:[g.ArrayUtils,c.ConfigurationUtil,h.DateUtils,a.EndlessScrollingUtil,u.JsonUtils,o.PnxUtil,f.ResultUtil,p.SearchUtil,s.SmoothScrollUtil,m.StringUtils,l.TemplateUtil,d.UUIDGenerator,v.FilterInstitution,y.FilterLanguage],imports:[]})],b),r.NddModule=b},{"./UUIDGenerator.service":594,"./arrayUtils.service":595,"./configurationUtil.service":596,"./dateUtils.service":597,"./endlessScollingUtil.service":598,"./filterInstitution.service":599,"./filterLanguage.service":600,"./jsonUtils.service":601,"./pnxUtil.service":604,"./resultUtil.service":605,"./searchUtil.service":606,"./smoothScrollUtil.service":607,"./stringUtils.service":608,"./templateUtil.service":609,"ng-metadata/core":362}],603:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../appConfig/appConfig.module"),i=e("angular");r.default=i.module("nddUtils",[n.default.name]),e("./configurationUtil.service"),e("./jsonUtils.service"),e("./pnxUtil.service"),e("./templateUtil.service"),e("./dateUtils.service")},{"../appConfig/appConfig.module":482,"./configurationUtil.service":596,"./dateUtils.service":597,"./jsonUtils.service":601,"./pnxUtil.service":604,"./templateUtil.service":609,angular:"angular"}],604:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=function(){function e(){}return e.prototype.getValue=function(e,t,r,n){return void 0===n&&(n=""),this.getArrayValue(e,t,r,null)[0]||n},e.prototype.getArrayValue=function(e,t,r,n){return void 0===n&&(n=[]),e.pnx&&e.pnx[t]?e.pnx[t][r]||n:n},e}();o=n([i.Injectable()],o),r.PnxUtil=o},{"ng-metadata/core":362}],605:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=function(){function e(){}return e.prototype.isFrbr=function(e){if(void 0!==e.pnx.facets){if(!e||!e.pnx.facets.frbrtype)return!1;var t="7"===e.pnx.facets.frbrtype[0]||"5"===e.pnx.facets.frbrtype[0];return t}return!1},e.prototype.isMultipleVersions=function(e){if(!e||!e.pnx.display.version)return!1;var t=e.pnx.display.version[0],r=this.isFrbr(e),n=!t||t>1;return r&&n},e.prototype.displayMultipleVersions=function(e,t){if(t.facets){var r=t.facets.map(function(e,t,r){return e.name});return this.isMultipleVersions(e)&&r.indexOf("frbrgroupid")===-1}return this.isMultipleVersions(e)},e}();a=n([o.Injectable(),i("design:paramtypes",[])],a),r.ResultUtil=a},{"ng-metadata/core":362}],606:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../infra/annotations"),c=e("../journals/journals.service"),l=e("../appConfig/appConfigForward"),u=(e("lodash/flatten"),e("lodash/remove"),e("lodash/find")),d=function(){function e(e,t,r){var n=this;this.$stateParams=e,this.$location=t,this.journalsService=r,this.deepLinksField={query:function(e){return n.getSearchValue(e)},scope:function(e){return e},sortby:function(e){return e}},this.parameterName={query:"query",scope:"search_scope",sortby:"sortby"}}return e.prototype.getValidScope=function(e){return u(l.getScopeList(),function(t){return t["scope-id"]===e})?e:void this.$location.search("search_scope",[])},e.prototype.getSearchValue=function(e){if(!e)return"";if(Array.isArray(e))return e;for(var t=e.split(","),r=0;r<2;r++)t.shift();return t.join(",")},Object.defineProperty(e.prototype,"urlParamScope",{get:function(){var e=this.getValidScope(this.$stateParams.search_scope);return e?e:this.$stateParams.tab&&l.getSearchScopesMap()[this.$stateParams.tab]?l.getSearchScopesMap()[this.$stateParams.tab][0]["scope-id"]:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"urlParamTab",{get:function(){return this.$stateParams.tab},enumerable:!0,configurable:!0}),e.prototype.removeAllFacetsFromURL=function(){this.$location.search("facet",[]),this.$location.search("pfilter",[]),this.$location.search("mode",[])},e.prototype.filterEmpty=function(e){return e},e.prototype.updateLocationBar=function(e){var t=this;if(e.mode&&"advanced"===e.mode&&e.query)this.parseArgs(e);else{var r=Object.keys(this.deepLinksField);r.forEach(function(r){r in e&&t.deepLinksField[r](e[r])&&t.$location.search(t.parameterName[r],e[r])})}},e.prototype.parseArgs=function(e){var t=e.query,r=t.split(";"),n=r.map(function(e){if(!e.match("(facet_|dr_s|dr_e).*,exact,.*,AND"))return e}).filter(this.filterEmpty),i=r.map(function(e){if(e.match("(facet_|dr_s|dr_e).*,exact,.*,AND"))return e.replace("facet_","")}).filter(this.filterEmpty);this.updateUrlForAdvanced(e,n,i)},e.prototype.updateUrlForAdvanced=function(e,t,r){this.$location.search("mode","advanced"),this.$location.search("query",t),this.$location.search("pfilter",r),e.scope&&this.$location.search("search_scope",e.scope),e.sortby&&this.$location.search("sortby",e.sortby),e.tab&&this.$location.search("tab",e.tab),e.facet&&this.$location.search("facet",e.facet)},e}();n([s.preventStateReload,i("design:type",Function),i("design:paramtypes",[Object,Object,Object]),i("design:returntype",void 0)],d.prototype,"updateUrlForAdvanced",null),d=n([a.Injectable(),o(0,a.Inject("$stateParams")),o(1,a.Inject("$location")),i("design:paramtypes",[Object,Object,c.JournalsService])],d),r.SearchUtil=d},{"../appConfig/appConfigForward":484,"../infra/annotations":531,"../journals/journals.service":588,"lodash/find":247,"lodash/flatten":251,"lodash/remove":299,"ng-metadata/core":362}],607:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("../infra/browserSniffer"),s=function(){function e(){}return e.prototype.focusOn=function(e){return this.elementFocus(e),e},e.prototype.elementFocus=function(e){if(e){if("string"==typeof e&&(e=document.getElementById(e)),!e)return;var t="0"===e.getAttribute("tabindex");e.setAttribute("tabindex","-1"),e.focus(),t&&e.setAttribute("tabindex","0")}},e.prototype.scrollTo=function(e,t,r,n){void 0===n&&(n=30),this.window=this.getScrollContainer(t,r);var i,o=document.getElementById(e),a=this.currentYPosition();o&&(i=this.elmYPosition(o)-this.elmYPosition(this.window)-n),i=i<0?0:i;var s=i>a?i-a:a-i;if(this.focusOn(o),s<100)return void(this.window.scrollTop=i);var c=Math.round(s/100)+10;c>=100&&(c=100);var l=Math.round(s/25),u=i>a?a+l:a-l,d=0;if(i>a)for(var p=a;p<i;p+=l)this.scrollStep(u,d*c),u+=l,u>i&&(u=i),d++;else for(var p=a;p>i;p-=l)this.scrollStep(u,d*c),u-=l,u<i&&(u=i),d++},e.prototype.currentYPosition=function(){return this.window.scrollTop},e.prototype.elmYPosition=function(e){for(var t=e.offsetTop,r=e;r.offsetParent&&r.offsetParent!=document.body;)r=r.offsetParent,t+=r.offsetTop;return t},e.prototype.scrollStep=function(e,t){var r=e,n=this;setTimeout(function(){return requestAnimationFrame(function(){n.window.scrollTop=r})},t)},e.prototype.getScrollContainer=function(e,t){if(e)return document.getElementById(e);if(t)return document.querySelector(t);var r=!!document.documentMode,n=window;return a.isBrowserSafari()||n.chrome&&n.chrome.webstore||Object.prototype.toString.call(n.HTMLElement).indexOf("Constructor")>0||!r&&n.StyleMedia?document.body:document.body.parentNode},e}();s=n([o.Injectable(),i("design:paramtypes",[])],s),r.SmoothScrollUtil=s},{"../infra/browserSniffer":534,"ng-metadata/core":362}],608:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("lodash/replace"),a=e("lodash/truncate"),s=function(){function e(){}return e.prototype.isEmpty=function(e){return!e||0===e.length},e.prototype.removeSpaceEncodingFromString=function(e){return o(e,new RegExp("%20","g"),"")},e.prototype.abbreviate=function(e,t){void 0===t&&(t=26);var r={length:t,separator:/\s/};return a(e,r)},e}();s=n([i.Injectable()],s),r.StringUtils=s},{"lodash/replace":300,"lodash/truncate":318,"ng-metadata/core":362}],609:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../search/searchState.service"),c=e("../search/search.fields.service"),l=e("../appConfig/appConfigForward"),u=e("../appConfig/appConfigForward"),d=e("../search/actions/permalinkAction/permalink.service"),p=e("../journals/journals.service"),f=e("../primoExplore/primoExploreStates.module"),h=e("../journals/databases.service"),m=e("lodash/flatten"),g=function(){function e(e,t,r,n,i,o,a,s){this.$location=e,this.searchStateService=t,this.$translate=r,this.searchFieldsService=n,this.$stateParams=i,this.permalinkService=o,this.databasesService=a,this.journalsService=s,this.vid=l.getVid(),this.urlContext=u.getUrlContext(),this.$location=e}return e.prototype.getBaseUrl=function(){return this.$location.absUrl().substring(0,this.$location.absUrl().indexOf(this.urlContext)-1)},e.prototype.parseParametersFromItemIdField=function(e){var t={context:e.context,id:e.pnx.control.recordid[0]};return t},e.prototype.getDeepLinkPath=function(e,t,r){var n=this.getBaseDeepLinkPath(e,t,r);return n+=this.searchFieldsService.tab?"&tab="+this.searchFieldsService.tab:"",n+=this.getQueryDeepLink(),n+=this.$stateParams.sortby?"&sortby="+this.$stateParams.sortby:"",n+=this.getFacetsDeepLink(),n+=this.$stateParams.mode?"&mode="+this.$stateParams.mode:"",n+=this.getPfiltersDeepLink(),n+=this.$stateParams.offset?"&offset="+this.$stateParams.offset:"",n+=this.$stateParams.journals?"&journals="+this.$stateParams.journals:"",n+=this.$stateParams.databases?"&databases="+this.$stateParams.databases:"",n+=this.$stateParams.pcAvailability?"&pcAvailability="+this.$stateParams.pcAvailability:""},e.prototype.getBaseDeepLinkPath=function(e,t,r){t=t?t:this.searchStateService.getSearchObject().scope;var n="fulldisplay";this.journalsService.isJournalSearch()&&(n=f.STATE_NAMES.JOURNAL_FULL_DISPLAY),this.databasesService.isDBSearch()&&(n=f.STATE_NAMES.DB_FULL_DISPLAY);var i="/"+n+"?docid="+this.permalinkService.getRecordId(e.pnx.control)+"&context="+e.context+"&vid="+this.vid+"&lang="+this.$translate.use();return t&&(i+="&search_scope="+t),(r||e.adaptor)&&(i=i+"&adaptor="+(r?r:e.adaptor)),"L"===e.context&&this.isFrbr(e)&&t&&(i+="&isFrbr=true"),i},e.prototype.getFacetsDeepLink=function(){var e=this.$stateParams.facet?[this.$stateParams.facet]:[];e=m(e);for(var t="",r=0;r<e.length;r++)t+="&facet="+e[r];return t},e.prototype.getPfiltersDeepLink=function(){var e=this.$stateParams.pfilter?[this.$stateParams.pfilter]:[];e=m(e);for(var t="",r=0;r<e.length;r++)t+="&pfilter="+e[r];return t},e.prototype.getQueryDeepLink=function(){var e=this.$stateParams.query?[this.$stateParams.query]:[];e=m(e);for(var t="",r=0;r<e.length;r++)t+="&query="+e[r];return t},e.prototype.getDeepLinkAbsPath=function(e,t,r){return this.getBaseUrl()+"/"+this.urlContext+this.getBaseDeepLinkPath(e,t,r)},e.prototype.getFullDeepLinkAbsPath=function(e){return this.getBaseUrl()+"/"+this.urlContext+this.getDeepLinkPath(e)},e.prototype.isFrbr=function(e){if(void 0!=e.pnx.facets){if(!e||!e.pnx.facets.frbrtype)return!1;var t="7"===e.pnx.facets.frbrtype[0]||"5"===e.pnx.facets.frbrtype[0];return t}return!1},e}();g=n([a.Injectable(),o(0,a.Inject("$location")),o(2,a.Inject("$translate")),o(4,a.Inject("$stateParams")),i("design:paramtypes",[Object,s.SearchStateService,Function,c.SearchFieldsService,Object,d.PermalinkService,h.DatabasesService,p.JournalsService])],g),r.TemplateUtil=g},{"../appConfig/appConfigForward":484,"../journals/databases.service":584,"../journals/journals.service":588,"../primoExplore/primoExploreStates.module":620,"../search/actions/permalinkAction/permalink.service":640,"../search/search.fields.service":790,"../search/searchState.service":814,"lodash/flatten":251,"ng-metadata/core":362}],610:[function(e,t,r){"use strict";function n(){setTimeout(function(){var e=document.createEvent("HTMLEvents");e.initEvent("ZoteroItemUpdated",!0,!0),document.dispatchEvent(e)},2e3)}function i(e){var t=o(e);return t=c(t,function(e){return""===e}),!t["rft.aufirst"]&&t["rft.aulast"]&&(t["rft.aufirst"]=t["rft.aulast"]),t=s(t,function(e){return encodeURIComponent(e)}),a(t)}function o(e){var t,r,n={},i=(e||"").split("?"),o=0;if(i.length<=1)return n;t=i[1].split("&");for(o in t)r=t[o].split("="),n[decodeURIComponent(r[0])]=decodeURIComponent(r[1]||"");return n}function a(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r+"="+e[r]);return t.join("&")}Object.defineProperty(r,"__esModule",{value:!0});var s=e("lodash/mapValues"),c=e("lodash/omitBy");r.updateZoteroPlugin=n,r.encodeZoteroValue=i},{"lodash/mapValues":285,"lodash/omitBy":292}],611:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("../security/login/login.service"),s=e("../infra/storageUtil.service"),c=e("./loginIframe.service"),l=function(){function e(e,t,r){this.loginService=e,this.storageUtil=t,this.loginIframeService=r,this.tryAgain=this.loginIframeService.getTryAgain()||this.loginIframeService.trySilentLogin()}return e.prototype.getUrl=function(){return this.url=this.loginIframeService.getUrl(),this.url},e.prototype.getLoginUrls=function(){return this.loginIframeService.getLoginUrls()},e.prototype.isSilentIframeEnabled=function(){return console.log("try silent login: "+this.tryAgain),this.tryAgain},e}();l=n([o.Component({selector:"prm-login-iframe",templateUrl:"components/primoExplore/login-iframe.html"}),i("design:paramtypes",[a.LoginService,s.StorageUtil,c.LoginIframeService])],l),r.LoginIframe=l},{"../infra/storageUtil.service":571,"../security/login/login.service":845,"./loginIframe.service":612,"ng-metadata/core":362}],612:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=(e("angular"),e("ng-metadata/core")),s=e("../appConfig/appConfigForward"),c=e("../security/login/login.service"),l=e("../security/jwtUtil.service"),u=e("../infra/sharedSessionStorage.service"),d=function(){function e(e,t,r,n){this.$window=e,this.loginService=t,this.sharedSessionStorage=r,this.jwtUtilService=n,this.tryAgain=!1,this.urls=this.getLoginUrls(),this.url=this.urls.pop(),this._iframeSilentLoginEnabled=!1;for(var i=0;i<window.appConfig.authentication.length;i++)if("true"===window.appConfig.authentication[i]["silent-login-enabled"]){this._iframeSilentLoginEnabled=!0;break}}return e.prototype.setTryAgain=function(e){this.tryAgain=e},e.prototype.getTryAgain=function(){return this.tryAgain},e.prototype.getUrl=function(){return this.url},e.prototype.advanceToNextUrl=function(){return this.urls.length?(this.url=this.urls.pop(),this.sharedSessionStorage.setItem("trySilentLogin","true"),this.tryAgain=!0,!0):(this.url=void 0,this.tryAgain=!1,!1)},e.prototype.getLoginUrls=function(){for(var e=s.getAuthenticationMethods(),t=[],r=0;r<e.length;r++)e[r].isSilentLoginSupported()&&"true"===window.appConfig.authentication[r]["silent-login-enabled"]&&t.push(this.loginService.loginUrl(e[r].profileName,e[r].authenticationSystem,"",!0));return t},e.prototype.trySilentLogin=function(){this._iframeSilentLoginEnabled=!1;var e=this.$window.location.search.indexOf("noSilentLogin=true")>-1;if(e)return!1;var t=this.jwtUtilService.getDecodedToken().user;return t&&"GUEST"!=this.jwtUtilService.getDecodedToken().userGroup?(this.sharedSessionStorage.setItem("trySilentLogin","false"),
!1):window.location.search.includes("performLogout=true")?(this.sharedSessionStorage.setItem("trySilentLogin","false"),!1):"false"!==this.sharedSessionStorage.getItem("trySilentLogin")&&(this.sharedSessionStorage.setItem("trySilentLogin","false"),this._iframeSilentLoginEnabled=!0,!0)},Object.defineProperty(e.prototype,"iframeSilentLoginEnabled",{get:function(){return this._iframeSilentLoginEnabled},enumerable:!0,configurable:!0}),e}();d=n([a.Injectable(),o(0,a.Inject("$window")),i("design:paramtypes",[Object,c.LoginService,u.SharedSessionStorage,l.JwtUtilService])],d),r.LoginIframeService=d},{"../appConfig/appConfigForward":484,"../infra/sharedSessionStorage.service":569,"../security/jwtUtil.service":842,"../security/login/login.service":845,angular:"angular","ng-metadata/core":362}],613:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-forward"),a=function(){function e(){}return e}();a=n([o.Component({selector:"ng-forward-hack",templateUrl:"components/primoExplore/ng-forward-hack.html"}),i("design:paramtypes",[])],a),r.NgForwardHack=a},{"ng-forward":358}],614:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("../infra/storageUtil.service"),s=e("angular"),c=e("ng-metadata/core"),l=e("../security/userSessionManager.service"),u=e("../infra/mediaQueries.service"),d=e("../appConfig/appConfigForward"),p=e("./primoExplore.service"),f=e("../security/jwtUtil.service"),h=function(){function e(e,t,r,n,i,o,a,c,l,u,p,f){var h=this;this.primoExploreService=e,this.Idle=t,this.userSessionManagerService=r,this.$element=n,this.$mdDialog=i,this.$scope=o,this.$timeout=a,this.$translate=c,this.$window=l,this.jwtUtilService=u,this.mediaQueries=p,this.storageutil=f,this.graceTime=1e3*d.getSessionTimeoutParams().warningTime,o.$on("IdleWarn",function(){return h.handleWarning()}),this.warningShowed=!1,this.userSessionManagerService=r,this.$mdDialog=i,this.$window=l,this.updateResponsiveClass(),s.element(l).bind("resize",function(){return h.$timeout(function(){return h.updateResponsiveClass()},0,!1)}),c(["nui.session.timeout.button","nui.session.timeout.alert","nui.session.timeout.attention"]).then(function(e){h.alertObject=i.alert({textContent:e["nui.session.timeout.alert"],ok:e["nui.session.timeout.button"],title:e["nui.session.timeout.attention"]})})}return e.prototype.updateResponsiveClass=function(){var e=this.mediaQueries.createDynamicClass();e!==this.responsiveClass&&(this.responsiveClass&&this.$element.removeClass(this.responsiveClass),this.responsiveClass=e,this.$element.addClass(this.responsiveClass))},e.prototype.handleWarning=function(){this.userSessionManagerService.logout(!0)},e}();h=n([c.Component({selector:"primo-explore",template:"<div ui-view></div><prm-silent-login></prm-silent-login><prm-login-iframe></prm-login-iframe>"}),o(1,c.Inject("Idle")),o(3,c.Inject("$element")),o(4,c.Inject("$mdDialog")),o(5,c.Inject("$scope")),o(6,c.Inject("$timeout")),o(7,c.Inject("$translate")),o(8,c.Inject("$window")),i("design:paramtypes",[p.PrimoExploreService,Object,l.UserSessionManagerService,Object,Object,Object,Function,Function,Object,f.JwtUtilService,u.MediaQueries,a.StorageUtil])],h),r.PrimoExplore=h},{"../appConfig/appConfigForward":484,"../infra/mediaQueries.service":562,"../infra/storageUtil.service":571,"../security/jwtUtil.service":842,"../security/userSessionManager.service":853,"./primoExplore.service":615,angular:"angular","ng-metadata/core":362}],615:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("angular"),a=function(){function e(){this._classes=new Set}return e.prototype.getPrimoExploreElement=function(){if(this.primoExploreElement)return this.primoExploreElement;var e=document.querySelector("primo-explore");if(e)return this.primoExploreElement=e,this.primoExploreElement},e.prototype.dimScreen=function(e){o.isDefined(e)&&(e?this.addCSSClass("background-dark"):this.removeCSSClass("background-dark"))},e.prototype.addCSSClass=function(e){var t=this.getPrimoExploreElement();t&&t.classList.add(e)},e.prototype.removeCSSClass=function(e){var t=this.getPrimoExploreElement();t&&t.classList.remove(e)},e}();a=n([i.Injectable()],a),r.PrimoExploreService=a,r.default=[]},{angular:"angular","ng-metadata/core":362}],616:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("angular"),i=e("../infra/highlight.directive"),o=e("../infra/highlight.service");r.default=n.module("primo-explore.components",[]).component(i.default.name,i.default.config).service("HighlightService",o.HighlightService)},{"../infra/highlight.directive":554,"../infra/highlight.service":555,angular:"angular"}],617:[function(e,t,r){"use strict";function n(e,t,r,n,i,o,a,s,c,l){l.resourceUrlWhitelist(["self",b.getAutocompleteUrl()+"**",b.getGoogWithProxy()+"**"]),t.useApplyAsync(!0),e.debugInfoEnabled(!f.PRODUCTION_MODE),e.preAssignBindingsEnabled(!0),n.skipClickHijack(),C&&i.disableInkRipple(),r.html5Mode({enabled:!0,requireBase:!1});var u=o.extendPalette("indigo",{500:"#53738C"}),d=o.extendPalette("indigo",{A100:"#72B4BA",A200:"#72B4BA",A400:"#72B4BA",A700:"#72B4BA"});o.definePalette("primoExplore",u),o.definePalette("primoExploreAccent",d),o.theme("primoExplore").primaryPalette("primoExplore").accentPalette("primoExploreAccent"),o.setDefaultTheme("primoExplore"),s.map(function(e){e.sets.map(function(e){a.iconSet(e.set,e.file,e.size)})})}function i(e,t,r,n,i,a,s,c,l,u,d,p,f,h,m,g){g.startSession(i.isGuest()),window.onpageshow=function(e){e.persisted&&window.location.reload()},d.formatDate=function(e){return p.convertDateTypeToFormatString(e,p.primoShortDateFormat)},d.parseDate=function(e){return p.convertDateStringToDate(e,p.primoShortDateFormat)},e.$on("$stateChangeStart",function(e,o,s,c,l){var u=i.getUserName();if("login"===o.name){if(u){var d=n.search().targetURL;if(d)t.location.assign(d);else{console.log("Error: no targetURL, redirect to home page"),e.preventDefault();var p=s.vid;p?r.go(E.STATE_NAMES.SEARCH,{vid:p}):console.log("Error: no vid, cannot redirect to home page")}}}else if("account"===o.name||o.name===E.STATE_NAMES.FAVORITES&&n.url().includes("section=queries")||"blankIll"===o.name)if(u)n.search().fromLogin&&n.search("fromLogin",null);else if(e.preventDefault(),n.search().fromLogin){var f={vid:n.search().vid};n.search().authenticationError&&(f.authenticationError="1"),r.go(E.STATE_NAMES.SEARCH,f,{reload:!0})}else a.toState=o,a.toParams=s,i.prevTabDeeplink=n.absUrl(),c.name?a.callHandleLoginClickWithBeacon():r.go("login",s);else if("deposit"===o.name)if(u)n.search().fromLogin&&n.search("fromLogin",null);else if(e.preventDefault(),n.search().fromLogin)r.go(E.STATE_NAMES.SEARCH,{vid:n.search().vid},{reload:!0});else if(a.toState=o,a.toParams=s,i.prevTabDeeplink=n.absUrl(),c.name)a.callHandleLoginClickWithBeacon();else{var h=n.search().auth,m=(n.absUrl(),b.getInstitutionCode()),g="/deposit/login?institute="+m;void 0!==h&&(g+="&auth="+encodeURIComponent(h)),t.location.assign(g)}});var v=n.search().primoExploreJwt,y=n.search().loginId,S=!1;if(y){n.search("loginId",null);var _=new XMLHttpRequest;_.open("GET",f.loginJwtCache+"/"+y+"?vid="+n.search().vid,!1),_.send(null),200===_.status?(v=_.responseText,v&&(S=!0)):v=null}v?o(v,c,l,n,s,i,u,h,S):i.getGuestJwt().then(function(e){o(e,c,l,n,s,i,u,h,S)}),!v&&n.search().authenticationError&&n.search().authenticationProfile&&!m.getItem("loggedInIDP")&&(m.setItem("loggedInIDP","true"),m.setItem("authenticationProfile",n.search().authenticationProfile))}function o(e,t,r,n,i,o,a,s,c){e&&!o.isGuest(e)&&c&&(t.$localForage.keys().then(function(e){var t=e.indexOf("userDetails");if(t>-1&&e.splice(t,1),0===e.length)r.getFavoritesFromServer();else if(1===e.length)r.copyFavoritesRecordsThatWereSavedForGuest(e[0]),r.changeSearchHistorylocalForageKey(e[0]);else{var n=e.filter(function(e){if(e.indexOf("anonymous-")!=-1)return e}),i=n.map(function(e){return e.replace("anonymous-","").replace("_","")}),o=i.sort(function(e,t){return t-e}),a="anonymous-"+o[0].substring(0,4)+"_"+o[0].substring(4,10);r.copyFavoritesRecordsThatWereSavedForGuest(a),r.changeSearchHistorylocalForageKey(a)}}),o.login(e),n.search("primoExploreJwt",null),n.search("authenticationProfile",null),n.search("from-new-ui",null),s.promise=s.updatePersonalization(b.getVid())),o.isJWTValidForApp(i.getJwtFromLocalStorage())||o.logout(!0),a.trackInitialPage()}Object.defineProperty(r,"__esModule",{value:!0});var a=e("angular"),s=e("angular-material"),c=e("angular-ui-router"),l=e("../appConfig/appConfig.module"),u=e("../infra/infra.module"),d=e("../security/userSessionManager.service"),p=e("../security/usernamePasswordLogin.service"),f=e("../appConfig/productionMode"),h=e("../analytics/primolytics.service"),m=e("ng-metadata/core"),g=e("../security/jwtUtil.service"),v=e("../security/login/login.service"),y=e("../security/security.module"),b=e("../appConfig/appConfigForward"),S=e("../i18n/i18n.module"),_=e("../nddUtils/dateUtils.service"),w=e("./primoExploreStates.module"),E=e("../primoExplore/primoExploreStates.module"),T=e("../infra/browserSniffer"),O=e("./primoExploreComponents.modules"),I=e("../infra/storageUtil.service"),P=e("../search/personalization/personalizationButton/personalizeResultsButton.service"),R=e("../infra/sharedSessionStorage.service"),C=T.isBrowserIE(),A=[s,c,O.default.name],j=[w.default.name,S.default.name,l.default.name,u.default.name,y.default.name],k=A.concat(j),D=a.module("primo-explore.config",k);r.default=D,D.constant("$MD_THEME_CSS",""),D.config(n).run(i),n.$inject=["$compileProvider","$httpProvider","$locationProvider","$mdGestureProvider","$mdInkRippleProvider","$mdThemingProvider","$mdIconProvider","iconSets","$ariaProvider","$sceDelegateProvider"],i.$inject=["$rootScope","$window","$state","$location",m.getInjectableName(d.UserSessionManagerService),m.getInjectableName(v.LoginService),m.getInjectableName(g.JwtUtilService),m.getInjectableName(I.StorageUtil),m.getInjectableName(p.UsernamePasswordLoginService),m.getInjectableName(h.PrimolyticsService),"$mdDateLocale",m.getInjectableName(_.DateUtils),"restBaseURLs",m.getInjectableName(P.PersonalizeResultsButtonService),m.getInjectableName(R.SharedSessionStorage),"SessionTimeoutService"]},{"../analytics/primolytics.service":480,"../appConfig/appConfig.module":482,"../appConfig/appConfigForward":484,"../appConfig/productionMode":487,"../i18n/i18n.module":527,"../infra/browserSniffer":534,"../infra/infra.module":558,"../infra/sharedSessionStorage.service":569,"../infra/storageUtil.service":571,"../nddUtils/dateUtils.service":597,"../primoExplore/primoExploreStates.module":620,"../search/personalization/personalizationButton/personalizeResultsButton.service":772,"../security/jwtUtil.service":842,"../security/login/login.service":845,"../security/security.module":851,"../security/userSessionManager.service":853,"../security/usernamePasswordLogin.service":855,"./primoExploreComponents.modules":616,"./primoExploreStates.module":620,angular:"angular","angular-material":17,"angular-ui-router":27,"ng-metadata/core":362}],618:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../appConfig/appConfigForward"),c=e("../search/search.fields.service"),l=e("../primoExplore/primoExploreStates.module"),u=e("../journals/journals.service"),d=e("../search/topbar/skipTo/skipTo.service"),p=e("../search/search.service"),f=e("../nddUtils/configurationUtil.service"),h=e("../journals/databases.service"),m=e("../infra/widgets/alerts/alertFactory.service"),g=e("../collectionDiscovery/collectionDiscovery.service"),v=function(){function e(e,t,r,n,i,o,a,c,l,u,d){this.$state=e,this.searchFieldsService=t,this.skipToService=r,this.searchService=n,this.journalsService=i,this.databasesService=o,this.configurationUtil=a,this.$stateParams=c,this.alertService=l,this.$location=u,this.collectionDiscoveryService=d,this.vid=s.getVid(),this.borInfoAlert=l.create(m.ALERT_MSG_TYPE.SIGNIN),this.borInfoAlert.show("nui.bor_info_failed")}return e.prototype.onSearchBarSearchEvent=function(e){var t={query:e.mainSearchField,search_scope:e.scopeField,vid:this.vid,tab:e.tab,mode:e.mode,facet:e.facet,mfacet:e.mfacet,pfilter:e.pfilter,journals:e.journals,databases:e.databases,sortby:e.sortby,offset:0,conVoc:void 0};this.searchFieldsService.searchParams=t;var r=l.STATE_NAMES.SEARCH;return(this.journalsService.isJournalSearch()||this.journalsService.returnToJournalsSearch())&&(r=l.STATE_NAMES.JOURNAL_SEARCH),this.databasesService.isDBSearch()&&(r=l.STATE_NAMES.DB_SEARCH),this.$state.go(r,t,{reload:r})},e.prototype.hasSearchResults=function(){var e=this.searchService.getResultObject().data;return Array.isArray(e)&&e.length>0},Object.defineProperty(e.prototype,"searchInProgress",{get:function(){return this.$state.is(l.STATE_NAMES.COLLECTION_DISCOVERY)?this.collectionDiscoveryService.searchInProgress:this.searchService.isSearchInProgress()},enumerable:!0,configurable:!0}),e.prototype.showSearchBar=function(){return this.$state.current.name!==l.STATE_NAMES.CITATION_TRAILS&&this.$state.current.name!==l.STATE_NAMES.CITATION_LINKER&&this.$state.current.name!==l.STATE_NAMES.COLLECTION_DISCOVERY},e.prototype.allowSearch=function(){return!this.configurationUtil.isSuprima()||this.$state.current.name!==l.STATE_NAMES.SEARCH||this.configurationUtil.getSummonOverAlma()!==!0||"undefined"!==this.$state.params.browseScope},e.prototype.showStatName=function(){return this.$state.current.name===l.STATE_NAMES.SEARCH?"nui.aria.page.search":this.$state.current.name===l.STATE_NAMES.FULL_DISPLAY?"nui.aria.page.fulldisplay":this.$state.current.name===l.STATE_NAMES.FAVORITES?"nui.aria.page.favorites":this.$state.current.name===l.STATE_NAMES.CITATION_TRAILS?"nui.aria.page.citation":void 0},Object.defineProperty(e.prototype,"isJournalsSearch",{get:function(){return this.journalsService.isJournalSearch()||this.$state.current.name===l.STATE_NAMES.FAVORITES&&this.journalsService.returnToJournalsSearch()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDBSearch",{get:function(){return this.databasesService.isDBSearch()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAtozSearch",{get:function(){return this.isJournalsSearch||this.isDBSearch},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBrowseMode",{get:function(){return"browse"===this.$stateParams.mode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showBroseSearchBar",{get:function(){return!(!this.isBrowseMode&&"exploreMain.browseSearch"!=this.$state.current.name)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showPerformanceMonitor",{get:function(){return"true"===this.$stateParams.show_performance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCollectionDiscoveryFocused",{get:function(){return this.$state.current.name===l.STATE_NAMES.COLLECTION_DISCOVERY&&this.$stateParams.collectionId},enumerable:!0,configurable:!0}),e.prototype.displayBorInfoAlert=function(){return!(!this.$location.search().authenticationError||"1"!==this.$location.search().authenticationError)},e}();v=n([a.Component({selector:"prm-explore-main",templateUrl:"components/primoExplore/primo-explore-main.html"}),o(0,a.Inject("$state")),o(7,a.Inject("$stateParams")),o(9,a.Inject("$location")),i("design:paramtypes",[Object,c.SearchFieldsService,d.SkipToService,p.SearchService,u.JournalsService,h.DatabasesService,f.ConfigurationUtil,Object,m.AlertFactory,Object,g.CollectionDiscoveryService])],v),r.PrimoExploreMain=v},{"../appConfig/appConfigForward":484,"../collectionDiscovery/collectionDiscovery.service":498,"../infra/widgets/alerts/alertFactory.service":574,"../journals/databases.service":584,"../journals/journals.service":588,"../nddUtils/configurationUtil.service":596,"../primoExplore/primoExploreStates.module":620,"../search/search.fields.service":790,"../search/search.service":792,"../search/topbar/skipTo/skipTo.service":824,"ng-metadata/core":362}],619:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./primoExplore.service"),a=e("angular-ui-router"),s=e("./primoExploreMain.directive"),c=e("./loginIframe.directive"),l=e("./silentLogin/silentLogin.directive"),u=e("./silentLogin/silentLogin.service"),d=e("../favorites/favorites.module"),p=e("../tags/tags.module"),f=e("../analytics/primolytics.module"),h=e("../icon/icon.module"),m=e("../search/search.module"),g=e("../nddUtils/ndd.module"),v=e("../infra/infra-metadata.module"),y=e("../security/security-metadata.module"),b=e("../infra/dataStructures/model/model.module"),S=e("../journals/atoz.module"),_=e("angular-material"),w=e("angular-messages"),E=e("angular-sanitize"),T=e("angular-cookies"),O=e("angular-recaptcha"),I=e("angular-perfect-scrollbar-2"),P=e("./primoExploreConfig.module"),R=e("../security/security.module"),C=e("../account/account.module"),A=e("../servicesPage/servicePages.module"),j=e("./primoExplore.directive"),k=e("../spinner/spinner.module"),D=e("../sourceRecord/sourceRecord.module"),$=e("../blankIll/blankIll.module"),M=e("../citationLinker/citationLinker.module"),x=e("../infra/deposit/depositForm.module"),F=e("../account/depositsLink/depositsLink.module"),L=e("../search/personalization/personalizeResultsButton.module"),U=e("./ngForwardHack.directive"),B=e("ng-forward"),N=e("../search/browse/browseSearch.module"),q=e("./loginIframe.service"),H=e("../collectionDiscovery/collectionDiscovery.module"),V=function(){function e(){}return e}();V=n([i.NgModule({declarations:[j.PrimoExplore,s.PrimoExploreMain,c.LoginIframe,l.PrmSilentLogin],providers:[o.PrimoExploreService,q.LoginIframeService,u.SilentLoginService],imports:[N.BrowseSearchModule,H.CollectionDiscoveryModule,C.AccountModule,d.FavoritesModule,h.IconModule,v.InfraMetadata,b.ModelModule,g.NddModule,f.PrimolyticsModule,m.SearchModule,y.SecurityModule,A.ServicePagesModule,_,w,E,T,O,a,P.default.name,R.default.name,I,k.SpinnerModule,D.SourceRecordModule,S.AtozModule,$.BlankIllModule,B.bundle("primo-explore.ngForwardHack",U.NgForwardHack).name,M.CitationLinkerModule,p.TagsModule,x.DepositFormModule,F.DepositsLinkModule,L.PersonalizeResultsButtonModule]})],V),r.PrimoExploreModule=V},{"../account/account.module":433,"../account/depositsLink/depositsLink.module":442,"../analytics/primolytics.module":479,"../blankIll/blankIll.module":490,"../citationLinker/citationLinker.module":493,"../collectionDiscovery/collectionDiscovery.module":497,"../favorites/favorites.module":510,"../icon/icon.module":529,"../infra/dataStructures/model/model.module":540,"../infra/deposit/depositForm.module":543,"../infra/infra-metadata.module":557,"../journals/atoz.module":581,"../nddUtils/ndd.module":602,"../search/browse/browseSearch.module":657,"../search/personalization/personalizeResultsButton.module":775,"../search/search.module":791,"../security/security-metadata.module":850,"../security/security.module":851,"../servicesPage/servicePages.module":856,"../sourceRecord/sourceRecord.module":860,"../spinner/spinner.module":863,"../tags/tags.module":869,"./loginIframe.directive":611,"./loginIframe.service":612,"./ngForwardHack.directive":613,"./primoExplore.directive":614,"./primoExplore.service":615,"./primoExploreConfig.module":617,"./primoExploreMain.directive":618,"./silentLogin/silentLogin.directive":621,"./silentLogin/silentLogin.service":622,"angular-cookies":7,"angular-material":17,"angular-messages":19,"angular-perfect-scrollbar-2":20,"angular-recaptcha":21,"angular-sanitize":24,"angular-ui-router":27,"ng-forward":358,"ng-metadata/core":362}],620:[function(e,t,r){"use strict";function n(e){return e.promise}function i(e,t){e.state("exploreMain",{abstract:!0,template:"<prm-explore-main></prm-explore-main>",reloadOnSearch:!0}),e.state(r.STATE_NAMES.SEARCH,{url:"/search?query&pfilter&tab&search_scope&sortby&vid&facet&mfacet&lang&mode&offset&pcAvailability?browseQuery&browseFirstTerm&browseScope&innerPnxIndex&numOfUsedTerms&fn&came_from?docCount&show_performance&conVoc&browseParams&authenticationError",template:"<prm-search></prm-search>",reloadOnSearch:!0,resolve:{personalizationConfiguration:n}}),e.state(r.STATE_NAMES.JOURNAL_SEARCH,{url:"/jsearch?query&pfilter&tab&search_scope&sortby&vid&facet&mfacet&lang&mode&offset&journals",template:"<prm-journals></prm-journals>",reloadOnSearch:!0}),e.state("jfulldisplay",{url:"/jfulldisplay?vid&search_scope&tab&docid&lang&context&adaptor&isFrbr&showPnx&query&pfilter&sortby&mode&facet&mfacet&journals",template:"<prm-journals-full-view></prm-journals-full-view>",reloadOnSearch:!0}),e.state(r.STATE_NAMES.DB_SEARCH,{url:"/dbsearch?query&pfilter&tab&search_scope&sortby&vid&facet&mfacet&lang&mode&offset&databases&showPnx",template:"<prm-databases></prm-databases>",reloadOnSearch:!0}),e.state(r.STATE_NAMES.DB_FULL_DISPLAY,{url:"/dbfulldisplay?query&pfilter&tab&docid&context&adaptor&search_scope&isFrbr&sortby&vid&facet&mfacet&lang&mode&offset&databases&showPnx",template:"<prm-databases-full-view></prm-databases-full-view>",reloadOnSearch:!0}),e.state(r.STATE_NAMES.COLLECTION_DISCOVERY,{url:"/collectionDiscovery?vid&colayout&inst&collectionId&lang",params:{currentCollection:void 0,items:void 0,path:void 0},template:"<prm-collection-discovery></prm-collection-discovery>",reloadOnSearch:!0}),e.state("servicesPage",{url:"/openurl?institution&vid&lang&ctx_ver&ctx_enc&ctx_tim&url_ver&url_ctx_fmt&{rfr_id:any}&rft_val_fmt&rft.genre&rft.atitle&atitle&rft.jtitle&jtitle&rft.btitle&btitle&rft.aulast&aulast&rft.auinit&auinit&rft.auinit1&auinit1&rft.auinitm&auinitm&rft.ausuffix&ausuffix&rft.au&au&rft.aucorp&aucorp&rft.volume&volume&rft.issue&issue&rft.part&part&rft.quarter&quarter&rft.ssn&ssn&rft.spage&spage&rft.epage&epage&rft.pages&pages&rft.artnum&artnum&rft.issn&issn&rft.eissn&eissn&rft.isbn&isbn&rft.sici&sici&rft.coden&coden&rft_id&rft.object_id&object_id&rft_dat&rft.eisbn&eisbn&req.language&rft.title&title&dscnt&rft.mms_id&dstmp&debug&svc_dat&response_type&req_id&output&fromLogin&u.ignore_date_coverage&url_ctx_val&isSerivcesPage&Force_direct",template:"<prm-services-page></prm-services-page>",reloadOnSearch:!1}),e.state("fulldisplay",{url:"/fulldisplay?vid&search_scope&tab&docid&lang&context&adaptor&isFrbr&showPnx&query&pfilter&sortby&mode&facet&mfacet&offset?&browseQuery&browseFirstTerm&browseScope&innerPnxIndex&numOfUsedTerms&fn&pcAvailability&fromFeaturedResult&originScope&originTab",template:"<prm-full-view-page></prm-full-view-page>",reloadOnSearch:!0}),e.state(r.STATE_NAMES.FAVORITES,{url:"/favorites?vid&label&lang&section&sortBy",template:"<prm-favorites></prm-favorites>",reloadOnSearch:!0,params:{section:"items"}}),e.state(r.STATE_NAMES.TAGS,{url:"/tags?vid&label&lang&section",template:"<prm-tags></prm-tags>",reloadOnSearch:!0}),e.state("account",{url:"/account?vid&section&lang",template:"<prm-account></prm-account>",reloadOnSearch:!0}),e.state("blankIll",{url:"/blankIll?vid",template:"<prm-blank_ill></prm-blank_ill>",reloadOnSearch:!0}),e.state("deposit",{url:"/deposit?vid&lang&auth",template:"<prm-deposits-link></prm-deposits-link>",reloadOnSearch:!0}),e.state("static",{url:"/static-file/:section?vid&lang",template:"<prm-static-page></prm-static-page>",reloadOnSearch:!0}),e.state("login",{url:"/login?vid&lang",template:"<prm-stand-alone-login></prm-stand-alone-login>",reloadOnSearch:!0}),e.state(r.STATE_NAMES.CITATION_TRAILS,{url:"/citationTrails?query&search_scope&tab&vid&facet&mfacet&lang&adaptor&active&seed_id",params:{seedInfo:null},template:"<prm-citation-trails-breadcrumbs></prm-citation-trails-breadcrumbs>",reloadOnSearch:!0}),e.state(r.STATE_NAMES.SOURCE_RECORD,{url:"/sourceRecord?vid&docId",template:"<prm-source-record></prm-source-record>",reloadOnSearch:!0}),e.state(r.STATE_NAMES.CITATION_LINKER,{url:"/citationlinker?vid&lang",template:"<prm-citation-linker></prm-citation-linker>",reloadOnSearch:!0}),e.state("model",{url:"/model?vid",template:"<prm-model></prm-model>",reloadOnSearch:!1}).state("model.active",{url:"/:active",template:"<prm-model></prm-model>",reloadOnSearch:!1}).state("model.entry",{url:"/:active/:entry",template:"<prm-model></prm-model>",reloadOnSearch:!1}).state("model.bulk",{url:"/:active/:entry/:bulk",template:"<prm-model></prm-model>",reloadOnSearch:!1}).state("model.entry2",{url:"/:active/:entry/:bulk/:entry2",template:"<prm-model></prm-model>",reloadOnSearch:!1}).state("model.detail",{url:"/:active/:entry/:bulk/:entry2/:index",template:"<prm-model></prm-model>",reloadOnSearch:!1}),e.state(r.STATE_NAMES.BROWSE_SEARCH,{url:"/browse?vid&browseQuery&browseScope&browseFirstTerm&innerPnxIndex&numOfUsedTerms&fn",template:"<prm-browse-search></prm-browse-search>",reloadOnSearch:!0}),e.state(r.STATE_NAMES.BROWSE_HEADER_RESULTS,{url:"/browse/results?vid&query&browseQuery&browseFirstTerm",template:"<prm-browse-header-results></prm-browse-header-results>",reloadOnSearch:!0}),t.otherwise(function(e,t){var n=e.get("$state"),i=r.STATE_NAMES.SEARCH,o=t.path();o.indexOf(".do")>-1?o.indexOf("login.do")===-1&&o.indexOf("loginpage.do")===-1&&(window.location=t.absUrl()):n.go(i,t.search())})}Object.defineProperty(r,"__esModule",{value:!0});var o=e("../search/personalization/personalizationButton/personalizeResultsButton.service"),a=e("ng-metadata/core"),s=e("angular-ui-router"),c=e("angular"),l=c.module("primo-explore.states",[s]);r.default=l,r.STATE_NAMES={FAVORITES:"exploreMain.favorites",SEARCH:"exploreMain.search",TAGS:"tags",CITATION_TRAILS:"exploreMain.citationTrails",CITATION_LINKER:"exploreMain.citationlinker",FULL_DISPLAY:"fulldisplay",SOURCE_RECORD:"sourceRecord",JOURNAL_SEARCH:"exploreMain.jsearch",JOURNAL_FULL_DISPLAY:"jfulldisplay",DB_SEARCH:"exploreMain.dbsearch",DB_FULL_DISPLAY:"dbfulldisplay",BLANK_ILL:"blankIll",BROWSE_SEARCH:"exploreMain.browseSearch",BROWSE_HEADER_RESULTS:"exploreMain.browseSearchResults",COLLECTION_DISCOVERY:"exploreMain.collectionDiscovery"},l.config(i),n.$inject=[a.getInjectableName(o.PersonalizeResultsButtonService)],i.$inject=["$stateProvider","$urlRouterProvider"]},{"../search/personalization/personalizationButton/personalizeResultsButton.service":772,angular:"angular","angular-ui-router":27,"ng-metadata/core":362}],621:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../loginIframe.service"),c=e("../../security/jwtUtil.service"),l=e("../../security/userSessionManager.service"),u=e("../../search/personalization/personalizationButton/personalizeResultsButton.service"),d=function(){function e(e,t,r,n,i,o){this.$rootScope=e,this.loginIframeService=t,this.jwtUtilService=r,this.userSessionManagerService=n,this.personalizeResultsButtonService=i,this.sessionTimeoutService=o,this.addEventListenerForJwt()}return e.prototype.ngOnInit=function(){},e.prototype.addEventListenerForJwt=function(){var e=this;window.addEventListener("message",function(t){e.receiveJwtFromIframe(t)},!1)},e.prototype.receiveJwtFromIframe=function(e){if("jwt_in_iframe"!==e.data.event_id)return void console.log("got the wrong message,  event.data.event_id= "+e.data.event_id);e.data.jwt&&this.userSessionManagerService.login(e.data.jwt);var t=this.jwtUtilService.getDecodedToken().userGroup;if(t&&"GUEST"!==t)this.jwtUtilService.backFromLoginIframe=!0,this.postLoginAction();else{var r=this.loginIframeService.advanceToNextUrl();this.jwtUtilService.backFromLoginIframe=!r}this.$rootScope.$apply()},e.prototype.postLoginAction=function(){this.sessionTimeoutService.startSession(!1),this.$rootScope.$emit("silentLogin"),this.personalizeResultsButtonService.updatePersonalization(this.jwtUtilService.getDecodedToken().viewId)},e}();d=n([a.Component({selector:"prm-silent-login",templateUrl:"components/primoExplore/silentLogin/silent-login.html"}),o(0,a.Inject("$rootScope")),o(5,a.Inject("SessionTimeoutService")),i("design:paramtypes",[Object,s.LoginIframeService,c.JwtUtilService,l.UserSessionManagerService,u.PersonalizeResultsButtonService,Object])],d),r.PrmSilentLogin=d},{"../../search/personalization/personalizationButton/personalizeResultsButton.service":772,"../../security/jwtUtil.service":842,"../../security/userSessionManager.service":853,"../loginIframe.service":612,"ng-metadata/core":362}],622:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=function(){function e(){}return e.prototype.ngOnInit=function(){},e}();a=n([o.Injectable(),i("design:paramtypes",[])],a),r.SilentLoginService=a},{"ng-metadata/core":362}],623:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;
if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=function(){function e(){this.closeTabsEvent=new o.EventEmitter}return e.prototype.ngOnInit=function(){console.log(this)},e.prototype.throwCloseTabsEvent=function(){this.closeTabsEvent.emit(null)},e}();n([o.Input(),i("design:type",Object)],a.prototype,"item",void 0),n([o.Input(),i("design:type",String)],a.prototype,"actionName",void 0),n([o.Input(),i("design:type",Object)],a.prototype,"onToggle",void 0),n([o.Output(),i("design:type",Object)],a.prototype,"closeTabsEvent",void 0),a=n([o.Component({selector:"prm-action-container",templateUrl:"components/search/actions/actionContainer/action-container.html"}),i("design:paramtypes",[])],a),r.PrmActionContainer=a},{"ng-metadata/core":362}],624:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./actionList.service"),c=e("../../analytics/primolytics.service"),l=e("../../infra/mediaQueries.service"),u=e("../../nddUtils/configurationUtil.service"),d=e("../scroller/scroll.service"),p=e("../../infra/browserSniffer"),f=e("./legantoAction/leganto.service"),h=function(){function e(e,t,r,n,i,o,s,c,l,u,d,p,f){var h=this;this.actionListService=e,this.actionIcons=t,this.$scope=r,this.primolyticsService=n,this.$state=i,this.$timeout=o,this.mediaQueries=s,this.$element=c,this.$translate=l,this.actionsIcons=u,this.configurationUtil=d,this.scrollService=p,this.legantoService=f,this.closeModal=new a.EventEmitter,this.tabPressed=new a.EventEmitter,this.actionIconNamesMap={"E-mail":"email",Citation:"citations",Permalink:"permalink",Print:"print",EndNote:"endnote",EasyBib:"easybib",RefWorks:"refworks",RISPushTo:"ris",BibTeXPushTo:"ris",Leganto:"ris"},this.getTabItemSize="never",this.showAction={Permalink:function(){return"MetaLib"!==h.item.context}},this.ACTION_ITEM_ID_PREFIX="actionListItem",this.KEY_CODE={COMMA:188,SEMICOLON:186,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,TAB:9,BACKSPACE:8,DELETE:46}}return e.prototype.getActionTranslate=function(e){var t="fulldisplay.command."+this.actionLabelNamesMap[e];return this.$translate.instant(t)},e.prototype.ngOnInit=function(){this.actionLabelNamesMap={"E-mail":"email",Citation:"citation",Permalink:this.isServicesPage()?"link":"permalink",Print:"print",EndNote:"pushto.option.EndNote",EasyBib:"pushto.option.EasyBib",RefWorks:"pushto.option.RefWorks",RISPushTo:"pushto.option.RISPushTo",BibTeXPushTo:"pushto.option.BibTexPushTo",Leganto:"pushto.option.Leganto"},this.activeAction=this.selectedAction&&"none"!==this.selectedAction?this.selectedAction:this.actionListService.requiredActionsList[0],this.promiseActionNames={},this.actionInnerServices={Leganto:this.legantoService}},e.prototype.ngAfterViewInit=function(){var e=this;this.isFullView||this.$timeout(function(){e.$timeout(function(){e.firstItem[0].querySelector("ul").focus()})},0,!1)},e.prototype.performAction=function(e){this.actionInnerServices[e]&&(this.actionInnerService=this.actionInnerServices[e]),this.primolyticsService.doBeaconReport({p:"sendTo",op:e},this.item,this.primolyticsService.getTimestamp()),this.promiseActionNames[e]&&this.actionListService.onToggle[e]?this.performPromiseAction(e):(this.actionListService.onToggle[e]&&this.actionListService.onToggle[e](this.item),document.querySelector("#"+e).querySelector("button").focus(),this.selectedAction=e)},e.prototype.performPromiseAction=function(e){var t=this;if(this.promiseActionNames[e].isAllowedUser()){var r=this.actionListService.onToggle[e](this.item);r.then(function(r){t.promiseActionNames[e].successfullFetchLists(r),document.querySelector("#"+e).querySelector("button").focus(),r.setSelectedAction!==!1&&(t.selectedAction=e)},function(r){return t.promiseActionNames[e].failedFetchLists(r)})}},Object.defineProperty(e.prototype,"isLeftScrollDisabled",{get:function(){return this.scrollService.isShowLeftArrow(document.querySelector("#scrollActionList"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRightScrollDisabled",{get:function(){return this.scrollService.isShowRightArrow(document.querySelector("#scrollActionList"))},enumerable:!0,configurable:!0}),e.prototype.scrollLeftMouseDown=function(){this.scrollService.onLeftArrowClick(document.querySelector("#scrollActionList"))},e.prototype.scrollRightMouseDown=function(){this.scrollService.onRightArrowClick(document.querySelector("#scrollActionList"))},e.prototype.lastActionItemKeyPressHandler=function(e){if(e.preventDefault(),e.keyCode===this.KEY_CODE.TAB||e.keyCode===this.KEY_CODE.RIGHT_ARROW){var t=document.querySelector("#briefResultMoreOptionsButton");t.focus()}},e.prototype.isServicesPage=function(){return"servicesPage"===this.$state.current.name},e.prototype.doAlert=function(e,t){alert("TO DO: export to "+e),t.stopPropagation()},e.prototype.closeAllTabs=function(){this.selectedAction=""},Object.defineProperty(e.prototype,"requiredActionsList",{get:function(){var e=this.actionListService.requiredActionsList;return this.displayAll?this.shouldDisplayAll(this.item)||(e=e.filter(function(e){return!("Permalink"===e)})):e=e.filter(function(e){return!("Permalink"===e||"Citation"===e)}),e},enumerable:!0,configurable:!0}),e.prototype.showMe=function(e){return!this.showAction[e]||this.showAction[e]()},e.prototype.shouldDisplayAll=function(e){return!!Array.isArray(e)||(!!this.configurationUtil.isSuprima()||(!e||!("Ebsco"===e.context||e.pnx&&e.pnx.control.sourcesystem&&"ebsco"===e.pnx.control.sourcesystem[0])))},e.prototype.closeModalActions=function(e){this.closeModal.emit(e)},e.prototype.keydownSupport=function(e){9===e.keyCode&&(e.preventDefault(),this.firstItem[0].querySelector("ul").focus())},e.prototype.getRecordTitle=function(){return Array.isArray(this.item)&&this.item.length>1?this.$translate.instant("nui.aria.selectedItems"):Array.isArray(this.item)&&1===this.item.length?this.item[0].pnx.display.title[0]:this.item.pnx.display.title[0]},e.prototype.isSafariBrowse=function(){return p.isBrowserSafari()},e}();n([a.Input(),i("design:type",Object)],h.prototype,"item",void 0),n([a.Input(),i("design:type",Object)],h.prototype,"displaymode",void 0),n([a.Input(),i("design:type",String)],h.prototype,"selectedAction",void 0),n([a.Input(),i("design:type",Boolean)],h.prototype,"displayAll",void 0),n([a.Input(),i("design:type",Boolean)],h.prototype,"isFullView",void 0),n([a.Input(),i("design:type",Object)],h.prototype,"displayCloseIcon",void 0),n([a.ViewChild("md-nav-bar"),i("design:type",Object)],h.prototype,"firstItem",void 0),n([a.Output(),i("design:type",Object)],h.prototype,"closeModal",void 0),n([a.Output(),i("design:type",Object)],h.prototype,"tabPressed",void 0),h=n([a.Component({selector:"prm-action-list",templateUrl:"components/search/actions/action-list.html"}),o(1,a.Inject("actionIcons")),o(2,a.Inject("$scope")),o(4,a.Inject("$state")),o(5,a.Inject("$timeout")),o(7,a.Inject("$element")),o(8,a.Inject("$translate")),o(9,a.Inject("featuredActionsIcons")),i("design:paramtypes",[s.ActionListService,Object,Object,c.PrimolyticsService,Object,Function,l.MediaQueries,Object,Function,Object,u.ConfigurationUtil,d.ScrollService,f.LegantoService])],h),r.PrmActionList=h},{"../../analytics/primolytics.service":480,"../../infra/browserSniffer":534,"../../infra/mediaQueries.service":562,"../../nddUtils/configurationUtil.service":596,"../scroller/scroll.service":788,"./actionList.service":625,"./legantoAction/leganto.service":636,"ng-metadata/core":362}],625:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("../../mappingTablesCache/mappingTablesCache.service"),s=e("../../appConfig/appConfigForward"),c=e("./endNoteAction/endNote.service"),l=e("./printAction/printItem.service"),u=e("./easyBibAction/easyBib.service"),d=e("./refworksAction/refworks.service"),p=e("./mendeleyAction/mendeley.service"),f=e("./legantoAction/leganto.service"),h=e("lodash/orderBy"),m=function(){function e(e,t,r,n,i,o,a){var s=this;this.mappingTablesCache=e,this.endNoteService=t,this.printItemService=r,this.easyBibService=n,this.refWorksService=i,this.mendeleyService=o,this.legantoService=a,this.actionsToDisplay=["E-mail","Print","Permalink","Citation","EasyBib","EndNote","RefWorks","RISPushTo","BibTeXPushTo","Leganto"],this._requiredActionsList=[],this._actionsToIndex={none:0},this.onToggle={Print:function(e){s.printItemService.printItemAction(e)},RefWorks:function(e){s.refWorksService.refworksAction(e)},EasyBib:function(e){s.easyBibService.easyBibAction(e)},EndNote:function(e){s.endNoteService.endNoteAction(e)},Mendeley:function(e){s.mendeleyService.mendeleyAction(e)},Leganto:function(e){return s.legantoService.legantoAction(e)}},this.setRequiredActionsList()}return e.prototype.setRequiredActionsList=function(){var e=this,t=h(this.mappingTablesCache.getTable("Actions List"),function(e){return parseInt(e.source2)},"desc"),r=t.filter(function(e){return e.target===s.getVid()});t=r.length?r:t.filter(function(e){return"default"===e.target}),t=t.map(function(e){return e.source1}),this._requiredActionsList=t.filter(function(t){return e.actionsToDisplay.indexOf(t)!==-1});for(var n=0;n<this._requiredActionsList.length;n++)this._actionsToIndex[this._requiredActionsList[n]]=n+1},Object.defineProperty(e.prototype,"requiredActionsList",{get:function(){return this._requiredActionsList},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actionsToIndex",{get:function(){return this._actionsToIndex},enumerable:!0,configurable:!0}),e}();m=n([o.Injectable(),i("design:paramtypes",[a.MappingTablesCache,c.EndNoteService,l.PrintItemService,u.EasyBibService,d.RefWorksService,p.MendeleyService,f.LegantoService])],m),r.ActionListService=m},{"../../appConfig/appConfigForward":484,"../../mappingTablesCache/mappingTablesCache.service":592,"./easyBibAction/easyBib.service":629,"./endNoteAction/endNote.service":631,"./legantoAction/leganto.service":636,"./mendeleyAction/mendeley.service":638,"./printAction/printItem.service":642,"./refworksAction/refworks.service":645,"lodash/orderBy":293,"ng-metadata/core":362}],626:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("angular-material"),a=e("./actionList.service"),s=e("./permalinkAction/permalink.service"),c=e("./actionList.directive"),l=e("../../appConfig/appConfig.module"),u=e("./actionContainer/actionContainer.directive"),d=e("./printAction/printItem.directive"),p=e("./printAction/printItem.service"),f=e("angular-ui-router"),h=e("angular-clipboard"),m=e("./permalinkAction/permalink.directive"),g=e("./../../clipboard/copyClipboardBtn.directive"),v=e("./citation/citation.directive"),y=e("./sendEmailAction/sendEmail.directive"),b=e("./pushto.service"),S=e("./easyBibAction/easybib.directive"),_=e("./endNoteAction/endnote.directive"),w=e("./refworksAction/refworks.directive"),E=e("./exportRISAction/exportRis.directive"),T=e("./exportBibTexAction/exportBibtex.directive"),O=e("./mendeleyAction/mendeley.directive"),I=e("./legantoAction/leganto.directive"),P=e("./endNoteAction/endNote.service"),R=e("./easyBibAction/easyBib.service"),C=e("./refworksAction/refworks.service"),A=e("./legantoAction/leganto.service"),j=e("./mendeleyAction/mendeley.service"),k=function(){function e(){}return e}();k=n([i.NgModule({declarations:[u.PrmActionContainer,c.PrmActionList,v.PrmCitation,g.PrmCopyClipboardBtn,S.PrmEasybib,_.PrmEndnote,E.PrmExportRis,T.PrmExportBibtex,I.PrmLeganto,O.PrmMendeley,m.PrmPermalink,d.PrmPrintItem,w.PrmRefworks,y.PrmSendEmail,b.PushtoService],providers:[a.ActionListService,s.PermalinkService,p.PrintItemService,P.EndNoteService,R.EasyBibService,C.RefWorksService,A.LegantoService,j.MendeleyService],imports:[h.name,l.default.name,o,f]})],k),r.ActionsModule=k},{"../../appConfig/appConfig.module":482,"./../../clipboard/copyClipboardBtn.directive":495,"./actionContainer/actionContainer.directive":623,"./actionList.directive":624,"./actionList.service":625,"./citation/citation.directive":627,"./easyBibAction/easyBib.service":629,"./easyBibAction/easybib.directive":630,"./endNoteAction/endNote.service":631,"./endNoteAction/endnote.directive":632,"./exportBibTexAction/exportBibtex.directive":633,"./exportRISAction/exportRis.directive":634,"./legantoAction/leganto.directive":635,"./legantoAction/leganto.service":636,"./mendeleyAction/mendeley.directive":637,"./mendeleyAction/mendeley.service":638,"./permalinkAction/permalink.directive":639,"./permalinkAction/permalink.service":640,"./printAction/printItem.directive":641,"./printAction/printItem.service":642,"./pushto.service":643,"./refworksAction/refworks.directive":644,"./refworksAction/refworks.service":645,"./sendEmailAction/sendEmail.directive":646,"angular-clipboard":5,"angular-material":17,"angular-ui-router":27,"ng-metadata/core":362}],627:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./citation.service"),c=e("../../../infra/selectTextUtil"),l=e("../../../nddUtils/pnxUtil.service"),u=e("../../../nddUtils/smoothScrollUtil.service"),d=e("../../../infra/storageUtil.service"),p=e("../../../infra/mediaQueries.service"),f=e("../../../infra/browserSniffer"),h=function(){function e(e,t,r,n,i,o,a){this.citationService=e,this.collectionIcons=t,this.selectTextUtil=r,this.pnxUtil=n,this.mediaQueries=i,this.smoothScrollUtil=o,this.storageUtil=a,this.isError=!1,this.inProgress=!1,this.lastCitation=""}return e.prototype.ngOnInit=function(){this.selectedStyle=this.lastStyle||this.getStyles()[0],this.getCitation(this.selectedStyle)},Object.defineProperty(e.prototype,"lastStyle",{get:function(){return this.storageUtil.localStorage.getItem("last_citation_style")},set:function(e){this.storageUtil.localStorage.setItem("last_citation_style",e)},enumerable:!0,configurable:!0}),e.prototype.getStyles=function(){return this.citationService.getAvailableStyles()},e.prototype.setHoveredStyle=function(e){this.hoveredStyle=e},e.prototype.getHoveredClass=function(e){return this.hoveredStyle===e?"show":"hide"},Object.defineProperty(e.prototype,"layoutPos",{get:function(){return this.detectMobile()?"column":"row"},enumerable:!0,configurable:!0}),e.prototype.detectMobile=function(){return!(!this.mediaQueries.xs&&!this.mediaQueries.sm)},e.prototype.getInitialTab=function(){var e=this.getStyles().indexOf(this.selectedStyle),t=1;return t=e<0?1:e+1,this.smoothScrollUtil.focusOn("citationsTab"+t),t},e.prototype.getCitation=function(e){var t=this;this.inProgress=!0,this.citationService.getCitation(e,this.item.pnx,this.item.delivery).then(function(e){return t.onSuccess(e)},function(e){return t.onError(e)}),this.selectedStyle=e,this.lastStyle=e},e.prototype.lastCitationDecoded=function(){return this.citationService.decodeHtmlEntities(this.lastCitation)},e.prototype.getCitationId=function(){return"citation"+this.getRecordId()},e.prototype.selectText=function(){this.selectTextUtil.selectText(this.getCitationId())},e.prototype.getRecordId=function(){return this.pnxUtil.getValue(this.item,"control","recordid")},e.prototype.onSuccess=function(e){this.inProgress=!1,e.data.status&&"ok"===e.data.status?(this.isError=!1,this.lastCitation=this.citationService.decodeCitationText(e.data.data)):(console.error("Citation failure!",e.data.msg),this.onError(e))},e.prototype.onError=function(e){this.inProgress=!1,this.isError=!0},e.prototype.displayCopyButton=function(){return!f.isIosDevice()},e}();n([a.Input(),i("design:type",Object)],h.prototype,"item",void 0),h=n([a.Component({providers:[s.CitationService],selector:"prm-citation",templateUrl:"components/search/actions/citation/citation.html"}),o(1,a.Inject("collectionIcons")),i("design:paramtypes",[s.CitationService,Object,c.SelectTextUtil,l.PnxUtil,p.MediaQueries,u.SmoothScrollUtil,d.StorageUtil])],h),r.PrmCitation=h},{"../../../infra/browserSniffer":534,"../../../infra/mediaQueries.service":562,"../../../infra/selectTextUtil":568,"../../../infra/storageUtil.service":571,"../../../nddUtils/pnxUtil.service":604,"../../../nddUtils/smoothScrollUtil.service":607,"./citation.service":628,"ng-metadata/core":362}],628:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../mappingTablesCache/mappingTablesCache.service"),c=e("../../../appConfig/appConfigForward"),l=e("he"),u=function(){function e(e,t,r){this.$http=e,this.mtCacheService=t,this.vid=c.getVid(),this.CITATION_API_URL=r.pushToBaseURL+"/citation"+("suprima"===c.getBackendSystem()?"/"+c.getVid():"")}return e.prototype.getCitation=function(e,t,r){var n={style:e,pnx:t,delivery:r,vid:this.vid};return this.$http.post(this.CITATION_API_URL,n)},e.prototype.getAvailableStyles=function(){return this.mtCacheService.getTable(this.mtCacheService.tables.CITATION_STYLES).map(function(e){return e.target}).sort()},e.prototype.decodeHtmlEntities=function(e){return e=e||"",e=l.decode(e),e.replace(/&quot;/g,"").replace(/<(\/)?i>/g,"")},e.prototype.decodeCitationText=function(e){return l.decode(e)},e}();u=n([a.Injectable(),o(0,a.Inject("$http")),o(2,a.Inject("restBaseURLs")),i("design:paramtypes",[Function,s.MappingTablesCache,Object])],u),r.CitationService=u},{"../../../appConfig/appConfigForward":484,"../../../mappingTablesCache/mappingTablesCache.service":592,he:32,"ng-metadata/core":362}],629:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("../pushto.service"),s=function(){function e(e){this.pushtoService=e}return e.prototype.easyBibAction=function(e){this.popupWin=window.open("","_blank");var t=angular.bind(this,this.failedPushtoAction),r=angular.bind(this,this.successfullPushtoAction),n=this.pushtoService.getServiceUrl([e],"easybib");n.then(function(e){return r(e)},function(e){return t(e)})},e.prototype.successfullPushtoAction=function(e){var t=e.data.serviceUrl,r=e.data.data;this.popupWin.document.open(),this.popupWin.document.write('<html><head><link rel="stylesheet" type="text/css" href="style.css" /></head><body onload="document.getElementById(\'exportForm\').submit();"><FORM name="ExportForm" id="exportForm" method="POST" target="_parent"  style="display:none" action="'+t+'">'+r+"</body></html>"),this.popupWin.document.close(),console.log("Easybib successfully sent")},e.prototype.failedPushtoAction=function(e,t){console.log("Easybib call failed")},e}();s=n([o.Injectable(),i("design:paramtypes",[a.PushtoService])],s),r.EasyBibService=s},{"../pushto.service":643,"ng-metadata/core":362}],630:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=(e("angular"),function(){function e(){this.closeTabsEvent=new o.EventEmitter}return e.prototype.ngOnInit=function(){this.closeTabsEvent.emit(null)},e}());n([o.Output(),i("design:type",Object)],a.prototype,"closeTabsEvent",void 0),a=n([o.Component({selector:"prm-easybib",templateUrl:"components/search/actions/easyBibAction/easybib.html"}),i("design:paramtypes",[])],a),r.PrmEasybib=a},{angular:"angular","ng-metadata/core":362}],631:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("../pushto.service"),s=function(){function e(e){this.pushtoService=e}return e.prototype.endNoteAction=function(e){this.popupWin=window.open("","_blank");var t=angular.bind(this,this.failedPushtoAction),r=angular.bind(this,this.successfullPushtoAction),n=this.pushtoService.getServiceUrl([e],"endnote");n.then(function(e){return r(e)},function(e){return t(e)})},e.prototype.successfullPushtoAction=function(e){var t=e.data.serviceUrl;this.popupWin.document.open(),this.popupWin.document.write('<html>\n                                            <head>\n                                                <link rel="stylesheet" type="text/css" href="style.css" />\n                                                <meta http-equiv="refresh" content="1; url='+t+'" />\n                                                </head>\n                                                <body></body></html>'),this.popupWin.document.close(),console.log("Endnote successfully sent")},e.prototype.failedPushtoAction=function(e){console.log("Endnote call failed")},e}();s=n([o.Injectable(),i("design:paramtypes",[a.PushtoService])],s),r.EndNoteService=s},{"../pushto.service":643,"ng-metadata/core":362}],632:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=(e("angular-material"),e("angular"),function(){function e(){this.closeTabsEvent=new o.EventEmitter}return e.prototype.ngOnInit=function(){this.closeTabsEvent.emit(null)},e}());n([o.Output(),i("design:type",Object)],a.prototype,"closeTabsEvent",void 0),a=n([o.Component({selector:"prm-endnote",templateUrl:"components/search/actions/endNoteAction/endnote.html"}),i("design:paramtypes",[])],a),r.PrmEndnote=a},{angular:"angular","angular-material":17,"ng-metadata/core":362}],633:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../pushto.service"),c=e("../../../mappingTablesCache/mappingTablesCache.service"),l=e("../../../infra/browserSniffer"),u=e("../../../infra/mediaQueries.service"),d=function(){function e(e,t,r,n,i){this.pushtoService=e,this.mtCache=t,this.mediaQueries=r,this.$timeout=n,this.$document=i,this.setEncodingValues()}return Object.defineProperty(e.prototype,"encoding",{get:function(){return this.encodingList},enumerable:!0,configurable:!0}),e.prototype.detectMobile=function(){return!(!this.mediaQueries.xs&&!this.mediaQueries.sm)},e.prototype.getFile=function(){var e=angular.bind(this,this.failedPushtoAction),t=angular.bind(this,this.successfullPushtoAction),r=this.encodingVal||"UTF-8";(l.isBrowserSafari()||this.detectMobile())&&(this.popupWin=window.open("","ris"));var n=this.pushtoService.getServiceUrl([this.item],"exportbibtex",{encoding:r});n.then(function(e){return t(e)},function(t){return e(t)})},e.prototype.successfullPushtoAction=function(e){var t=this.encodingVal||"UTF-8",r=new Blob([e.data.data],{endings:"native",type:"text/plain;charset="+t}),n="Primo_BibTeX_Export.bib";if(this.isBrowserMS())window.navigator.msSaveBlob(r,n);else{var i=document.createElement("a");this.$document[0].body.appendChild(i);var o=window.URL.createObjectURL(r);i.href=o,i.target="_blank";try{i.setAttribute("style","display: none"),i.setAttribute("download",n)}catch(e){console.log(e)}try{(l.isBrowserSafari()||this.detectMobile())&&this.popupWin?this.popupWin=window.open(o,"ris"):i.click()}catch(e){}this.$timeout(function(){window.URL.revokeObjectURL(o)},600)}},e.prototype.isBrowserMS=function(){return navigator.appVersion.toString().indexOf(".NET")>0||window.navigator.userAgent.indexOf("Edge")>-1},e.prototype.failedPushtoAction=function(e){},e.prototype.setEncodingValues=function(){var e=this.mtCache.getTable(this.mtCache.tables.EXPORT_RIS_ENCODINGS);e.length>0&&(this.encodingList=e.map(function(e){return e.source1}))},e.prototype.ngOnInit=function(){},e}();n([a.Input(),i("design:type",Object)],d.prototype,"item",void 0),d=n([a.Component({selector:"prm-export-bibtex",templateUrl:"components/search/actions/exportBibTexAction/export-bibtex.html"}),o(3,a.Inject("$timeout")),o(4,a.Inject("$document")),i("design:paramtypes",[s.PushtoService,c.MappingTablesCache,u.MediaQueries,Function,Object])],d),r.PrmExportBibtex=d},{"../../../infra/browserSniffer":534,"../../../infra/mediaQueries.service":562,"../../../mappingTablesCache/mappingTablesCache.service":592,"../pushto.service":643,"ng-metadata/core":362}],634:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../pushto.service"),c=e("../../../mappingTablesCache/mappingTablesCache.service"),l=e("../../../infra/browserSniffer"),u=function(){function e(e,t,r,n){this.pushtoService=e,this.mtCache=t,this.$timeout=r,this.$document=n,this.setEncodingValues()}return e.prototype.getFile=function(){var e=angular.bind(this,this.failedPushtoAction),t=angular.bind(this,this.successfullPushtoAction),r=this.encodingVal||"UTF-8";l.isBrowserSafari()&&(this.popupWin=window.open("","ris"));var n=this.pushtoService.getServiceUrl([this.item],"exportris",{encoding:r});n.then(function(e){return t(e)},function(t){return e(t)})},Object.defineProperty(e.prototype,"encoding",{get:function(){return this.encodingList},enumerable:!0,configurable:!0}),e.prototype.setEncodingValues=function(){var e=this.mtCache.getTable(this.mtCache.tables.EXPORT_RIS_ENCODINGS);e.length>0&&(this.encodingList=e.map(function(e){return e.source1}))},e.prototype.successfullPushtoAction=function(e){var t=this.encodingVal||"UTF-8",r=new Blob([e.data.data],{endings:"native",type:"text/plain;charset="+t}),n="Primo_RIS_Export.ris";if(navigator.appVersion.toString().indexOf(".NET")>0)window.navigator.msSaveBlob(r,n);else{var i=document.createElement("a");this.$document[0].body.appendChild(i);var o=window.URL.createObjectURL(r);i.href=o,i.target="_blank";try{i.setAttribute("style","display: none"),i.setAttribute("download",n)}catch(e){console.log(e)}try{l.isBrowserSafari()&&this.popupWin?this.popupWin=window.open(o,"ris"):i.click()}catch(e){}this.$timeout(function(){window.URL.revokeObjectURL(o)},600)}},e.prototype.failedPushtoAction=function(e){},e}();n([a.Input(),i("design:type",Object)],u.prototype,"item",void 0),u=n([a.Component({selector:"prm-export-ris",templateUrl:"components/search/actions/exportRISAction/export-ris.html"}),o(2,a.Inject("$timeout")),o(3,a.Inject("$document")),i("design:paramtypes",[s.PushtoService,c.MappingTablesCache,Function,Object])],u),r.PrmExportRis=u},{"../../../infra/browserSniffer":534,"../../../mappingTablesCache/mappingTablesCache.service":592,"../pushto.service":643,"ng-metadata/core":362}],635:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);
return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../pushto.service"),c=e("../../../mappingTablesCache/mappingTablesCache.service"),l=e("../../../infra/mediaQueries.service"),u=e("./leganto.service"),d=function(){function e(e,t,r,n,i){this.pushtoService=e,this.mtCache=t,this.mediaQueries=r,this.$document=n,this.legantoService=i,this.finishedLegantoEvent=new a.EventEmitter,this.showLists="show",this.responseLists=[],this.showPushToForm="",this.showSignIn="",this.setPushOptions(),this.selectedPushToOption=this.list,this.getListFromLeganto(),this.legantoService.showTemplateType=""}return e.prototype.getListFromLeganto=function(){var e=this;if(this.legantoService.isGuest())this.legantoService.showTemplateType="signIn";else{var t=this.legantoService.getListFromLeganto();t.then(function(t){return e.setUserLists()})}},e.prototype.setUserLists=function(){this.userLists=this.legantoService.getResponseLists(),this.userLists.length>0?this.legantoService.showTemplateType="userSelection":this.selectedPushToOption=this.collection},e.prototype.pushRecord=function(e){var t=this;if(this.selectedPushToOption===this.collection)this.selectedUserList="",this.selectedUserSection="";else if(this.selectedPushToOption===this.list&&(""===this.selectedUserList||"undefined"==typeof this.selectedUserList||""===this.selectedUserSection||"undefined"==typeof this.selectedUserSection))return;var r=this.legantoService.pushRecord(this.selectedUserList,this.selectedUserSection);r.then(function(e){return t.finishedLegantoEvent.emit(null)}),this.noSectionsError=""},e.prototype.changedPushToOption=function(){this.showLists=this.selectedPushToOption===this.list?"show":"",this.showSections=this.selectedPushToOption===this.list&&"undefined"!=typeof this.selectedUserList&&""!==this.selectedUserList?"show":"",this.legantoService.statusMessage="",this.setDisplayNoSectionsError(),this.showSections="undefined"!=typeof this.userSections&&this.userSections.length>0&&this.selectedPushToOption===this.list?"show":"",this.setPushAllowed()},e.prototype.changedUserList=function(){this.selectedUserSection="";var e=this;angular.forEach(e.legantoService.getResponseLists(),function(t){t.id===e.selectedUserList&&(e.userSections=t.sections)}),this.setDisplayNoSectionsError(),this.showSections=this.userSections.length>0?"show":"",this.legantoService.statusMessage="",this.setPushAllowed()},e.prototype.changedUserSection=function(){this.legantoService.statusMessage="",this.setPushAllowed()},e.prototype.setPushOptions=function(){this.list=this.legantoService.translations["fulldisplay.command.pushto.option.LegantoPushTo.list"],this.collection=this.legantoService.translations["fulldisplay.command.pushto.option.LegantoPushTo.collection"],this.pushToOptions=[this.collection,this.list]},e.prototype.setDisplayNoSectionsError=function(){this.noSectionsError="undefined"!=typeof this.userSections&&0==this.userSections.length&&"undefined"!=typeof this.selectedPushToOption&&this.selectedPushToOption===this.list&&"undefined"!=typeof this.selectedUserList&&""!==this.selectedUserList?"show":""},e.prototype.setPushAllowed=function(){"undefined"!=typeof this.selectedPushToOption&&this.selectedPushToOption===this.list&&"undefined"!=typeof this.selectedUserSection&&""!==this.selectedUserSection&&"undefined"!=typeof this.selectedUserList&&""!==this.selectedUserList||"undefined"!=typeof this.selectedPushToOption&&this.selectedPushToOption===this.collection?this.legantoService.pushAllowed=!0:this.legantoService.pushAllowed=!1},e.prototype.ngOnInit=function(){this.legantoService.isGuest()&&(this.legantoService.showTemplateType="signIn",this.pushAllowed=!1)},e}();n([a.Input(),i("design:type",Object)],d.prototype,"item",void 0),n([a.Output(),i("design:type",Object)],d.prototype,"finishedLegantoEvent",void 0),d=n([a.Component({selector:"prm-leganto",templateUrl:"components/search/actions/legantoAction/leganto.html"}),o(3,a.Inject("$document")),i("design:paramtypes",[s.PushtoService,c.MappingTablesCache,l.MediaQueries,Object,u.LegantoService])],d),r.PrmLeganto=d},{"../../../infra/mediaQueries.service":562,"../../../mappingTablesCache/mappingTablesCache.service":592,"../pushto.service":643,"./leganto.service":636,"ng-metadata/core":362}],636:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../pushto.service"),c=e("../../../security/jwtUtil.service"),l=e("../../../security/login/login.service"),u=function(){function e(e,t,r,n,i){var o=this;this.pushtoService=e,this.jwtUtilService=t,this.loginService=r,this.$mdDialog=n,this.$translate=i,this.responseLists=[],this.noListsMessage="",this.$mdDialog=n,this.$translate=i,this.$translate(["fulldisplay.command.pushto.option.LegantoPushTo.alert.okButton","fulldisplay.command.pushto.option.LegantoPushTo.list","fulldisplay.command.pushto.option.LegantoPushTo.collection","fulldisplay.command.pushto.option.LegantoPushTo.citationAdded.list","fulldisplay.command.pushto.option.LegantoPushTo.citationAdded.collection","fulldisplay.command.pushto.option.LegantoPushTo.citationAdded.error","fulldisplay.command.pushto.option.LegantoPushTo.getLists.error","fulldisplay.command.pushto.option.LegantoPushTo.noLists","fulldisplay.command.pushto.option.LegantoPushTo.add"]).then(function(e){o.translations=e})}return e.prototype.legantoAction=function(e){return this.isGuest()?void(this.showTemplateType="signIn"):(this.statusMessage="",this.item=e,this.getListFromLeganto())},e.prototype.getListFromLeganto=function(){var e=this;this.showSpinner="show";var t=this.pushtoService.getServiceUrl([this.item],"leganto",{action:"get_lists"});return t.then(function(t){return e.successfullFetchLists(t)},function(t){return e.failedFetchLists(t)}),t},e.prototype.pushRecord=function(e,t){var r=angular.bind(this,this.failedPushtoAction),n=angular.bind(this,this.successfullPushtoAction),i=null,o=""!==e&&""!==t?"list":"collection";return this.showSpinner="show",i="list"===o?this.pushtoService.getServiceUrl([this.item],"leganto",{action:"list",listId:e,sectionId:t}):this.pushtoService.getServiceUrl([this.item],"leganto",{action:"collection"}),i.then(function(e){return n(e,o)},function(e){return r(e)}),i},e.prototype.successfullFetchLists=function(e){this.showSpinner="",e.data.error?this.failedFetchLists(e):(this.responseLists=e.data.lists,console.log("Leganto successfully fetched"),e.data.lists.length<=0?(this.showTemplateType="noListsExist",this.noListsMessage=this.translations["fulldisplay.command.pushto.option.LegantoPushTo.noLists"],this.pushAllowed=!0):this.showTemplateType="userSelection")},e.prototype.failedFetchLists=function(e){this.showSpinner="",console.log("Leganto call failed"),(!e.data||e.data&&e.data.error)&&(console.log(e.data.error),this.showMessage("fulldisplay.command.pushto.option.LegantoPushTo.getLists.error","error")),e.setSelectedAction=!1},e.prototype.successfullPushtoAction=function(e,t){this.showSpinner="",e.data.error?this.showMessage("fulldisplay.command.pushto.option.LegantoPushTo.citationAdded.error","error"):this.showMessage("fulldisplay.command.pushto.option.LegantoPushTo.citationAdded."+t)},e.prototype.failedPushtoAction=function(e){this.showSpinner="",this.showMessage("fulldisplay.command.pushto.option.LegantoPushTo.citationAdded.error","error")},e.prototype.getResponseLists=function(){return this.responseLists},e.prototype.showMessage=function(e,t){this.statusMessage=this.translations[e],t&&(this.showTemplateType="error")},e.prototype.isGuest=function(){return"GUEST"===this.jwtUtilService.getDecodedToken().userGroup},e}();u=n([a.Injectable(),o(3,a.Inject("$mdDialog")),o(4,a.Inject("$translate")),i("design:paramtypes",[s.PushtoService,c.JwtUtilService,l.LoginService,Object,Function])],u),r.LegantoService=u},{"../../../security/jwtUtil.service":842,"../../../security/login/login.service":845,"../pushto.service":643,"ng-metadata/core":362}],637:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=function(){function e(){this.closeTabsEvent=new o.EventEmitter}return e.prototype.ngOnInit=function(){this.closeTabsEvent.emit(null)},e}();n([o.Output(),i("design:type",Object)],a.prototype,"closeTabsEvent",void 0),a=n([o.Component({selector:"prm-mendeley",templateUrl:"components/search/actions/mendeleyAction/mendeley.html"}),i("design:paramtypes",[])],a),r.PrmMendeley=a},{"ng-metadata/core":362}],638:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("../pushto.service"),s=function(){function e(e){this.pushtoService=e}return e.prototype.mendeleyAction=function(e){this.popupWin=window.open("","_blank");var t=angular.bind(this,this.failedPushtoAction),r=angular.bind(this,this.successfullPushtoAction),n=this.pushtoService.getServiceUrl([e],"mendeley");n.then(function(e){return r(e)},function(e){return t(e)})},e.prototype.successfullPushtoAction=function(e){var t=e.data.serviceUrl;this.popupWin.document.open(),this.popupWin.document.write('<html>\n                                            <head>\n                                                <link rel="stylesheet" type="text/css" href="style.css" />\n                                                <meta http-equiv="refresh" content="1; url='+t+'" />\n                                                </head>\n                                                <body></body></html>'),this.popupWin.document.close(),console.log("Endnote successfully sent")},e.prototype.failedPushtoAction=function(e){console.log("Endnote call failed")},e}();s=n([o.Injectable(),i("design:paramtypes",[a.PushtoService])],s),r.MendeleyService=s},{"../pushto.service":643,"ng-metadata/core":362}],639:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./permalink.service"),c=e("../../../infra/selectTextUtil"),l=e("../../../nddUtils/pnxUtil.service"),u=e("../../search.fields.service"),d=e("../../../infra/browserSniffer"),p=function(){function e(e,t,r,n,i,o){this.permalinkService=e,this.selectTextUtil=t,this.pnxUtil=r,this.$state=n,this.$translate=i,this.searchFieldsService=o}return e.prototype.ngOnInit=function(){var e=this;"servicesPage"===this.$state.current.name?this.permalink=window.location.href:this.permalinkService.getPermalink(this.item).then(function(t){return e.successAction(t)})},e.prototype.successAction=function(e){this.permalink=e.data.permalink+"&lang="+this.$translate.use()},e.prototype.selectText=function(){this.selectTextUtil.selectText("permalink"+this.getRecordId())},e.prototype.getRecordId=function(){return this.pnxUtil.getValue(this.item,"control","recordid")},e.prototype.displayCopyButton=function(){return!d.isIosDevice()},e}();n([a.Input(),i("design:type",Object)],p.prototype,"item",void 0),p=n([a.Component({selector:"prm-permalink",templateUrl:"components/search/actions/permalinkAction/permalink.html"}),o(3,a.Inject("$state")),o(4,a.Inject("$translate")),i("design:paramtypes",[s.PermalinkService,c.SelectTextUtil,l.PnxUtil,Object,Function,u.SearchFieldsService])],p),r.PrmPermalink=p},{"../../../infra/browserSniffer":534,"../../../infra/selectTextUtil":568,"../../../nddUtils/pnxUtil.service":604,"../../search.fields.service":790,"./permalink.service":640,"ng-metadata/core":362}],640:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../searchState.service"),c=e("../../search.fields.service"),l=e("../../../appConfig/appConfigForward"),u=e("../../../primoExplore/primoExploreStates.module"),d=e("../../../journals/journals.service"),p=e("../../../journals/databases.service"),f=function(){function e(e,t,r,n,i,o,a,s){this.searchStateService=e,this.searchFieldsService=t,this.$http=r,this.$translate=n,this.$state=o,this.journalsService=a,this.databasesService=s,this.vid=l.getVid(),this.PERMALINK_API_URL=i.actionsBaseURL+"/permalink"}return e.prototype.buildPayload=function(e){var t={docid:this.getRecordId(e.pnx.control),context:e.context,vid:this.vid,pnx:e.pnx};if(t=this.addEntryIfDefined(t,"adaptor",e.adaptor),this.$state.current.name!==u.STATE_NAMES.SEARCH&&this.$state.current.name!==u.STATE_NAMES.JOURNAL_SEARCH||"WorldCat"===e.context)"fulldisplay"!==this.$state.current.name&&this.$state.current.name!==u.STATE_NAMES.JOURNAL_FULL_DISPLAY||"WorldCat"===e.context||(this.$state.params.search_scope&&(t.search_scope=this.$state.params.search_scope),t=this.addEntryIfDefined(t,"tab",this.searchFieldsService.tab),this.$state.params.adaptor&&(t.adaptor=this.$state.params.adaptor));else{var r=this.searchStateService.getSearchObject().scope;t.search_scope=r,t=this.addEntryIfDefined(t,"tab",this.searchFieldsService.tab)}return(this.journalsService.isJournalSearch()||this.databasesService.isDBSearch())&&(t=this.addEntryIfDefined(t,"state",this.$state.current.name)),t},e.prototype.getRecordId=function(e){var t=e.recordid[0];if(t.startsWith("dedupmrg")){var r=e.sourcerecordid[0],n=r.indexOf("$$O");return n!==-1&&(r=r.substring(n+3)),r}return t},e.prototype.addEntryIfDefined=function(e,t,r){return"undefined"!=typeof r&&(e[t]=r),e},e.prototype.getPermalink=function(e){var t=this.buildPayload(e);return this.$http.post(this.PERMALINK_API_URL,t)},e}();f=n([a.Injectable(),o(2,a.Inject("$http")),o(3,a.Inject("$translate")),o(4,a.Inject("restBaseURLs")),o(5,a.Inject("$state")),i("design:paramtypes",[s.SearchStateService,c.SearchFieldsService,Function,Function,Object,Object,d.JournalsService,p.DatabasesService])],f),r.PermalinkService=f,r.default=["nddUtils"]},{"../../../appConfig/appConfigForward":484,"../../../journals/databases.service":584,"../../../journals/journals.service":588,"../../../primoExplore/primoExploreStates.module":620,"../../search.fields.service":790,"../../searchState.service":814,"ng-metadata/core":362}],641:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=function(){function e(){this.closeTabsEvent=new o.EventEmitter}return e.prototype.ngOnInit=function(){this.closeTabsEvent.emit(null)},e}();n([o.Output(),i("design:type",Object)],a.prototype,"closeTabsEvent",void 0),a=n([o.Component({selector:"prm-print-item",templateUrl:"components/search/actions/printAction/print-item.html"}),i("design:paramtypes",[])],a),r.PrmPrintItem=a},{"ng-metadata/core":362}],642:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../nddUtils/templateUtil.service"),c=e("../../../appConfig/appConfigForward"),l=e("lodash/flatten"),u=e("../../../infra/browserSniffer"),d=function(){function e(e,t,r,n){this.templateUtil=e,this.$http=t,this.restBaseURLs=r,this.$translate=n,this.vid=c.getVid(),this.PRINT_API_URL=r.actionsBaseURL+"/print"}return e.prototype.printItemAction=function(e){var t=window.open("","_blank");this.getPrintHtml([e]).then(function(e){var r=e.data.html;t.document.open(),u.isBrowserSafari()?t.document.write('<html><head><link rel="stylesheet" type="text/css" href="style.css" /></head><body onload="window.print();">'+r+"</body></html>"):t.document.write('<html><head><link rel="stylesheet" type="text/css" href="style.css" /></head><body onload="window.print();window.close();">'+r+"</body></html>"),t.document.close()})},e.prototype.getPrintHtml=function(e){var t=this.buildPayload(l(e));return this.$http.post(this.PRINT_API_URL,t)},e.prototype.itemToRecord=function(e){var t={pnx:e.pnx,context:this.getContext(e),holdings:e.delivery.holding,deeplink:this.templateUtil.getDeepLinkAbsPath(e),link2online:[]};return t},e.prototype.buildPayload=function(e){var t=this;return{records:e.map(function(e){return t.itemToRecord(e)}),vid:this.vid,language:this.$translate.use()}},e.prototype.getContext=function(e){var t=e.pnx.control.recordid[0],r=e.context;return void 0===r&&(r=t.startsWith("TN_")?"PC":"L"),r},e}();d=n([a.Injectable(),o(1,a.Inject("$http")),o(2,a.Inject("restBaseURLs")),o(3,a.Inject("$translate")),i("design:paramtypes",[s.TemplateUtil,Function,Object,Function])],d),r.PrintItemService=d,r.default=["nddUtils"]},{"../../../appConfig/appConfigForward":484,"../../../infra/browserSniffer":534,"../../../nddUtils/templateUtil.service":609,"lodash/flatten":251,"ng-metadata/core":362}],643:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../nddUtils/templateUtil.service"),c=e("../../appConfig/appConfigForward"),l=e("lodash/flatten"),u=function(){function e(e,t,r){this.templateUtil=e,this.$http=t,this.restBaseURLs=r,this.vid=c.getVid(),this.PUSHTO_API_URL=r.actionsBaseURL+"/pushto/"}return e.prototype.buildPayload=function(e,t){var r={records:e};for(var n in t)r[n]=t[n];return r},e.prototype.getServiceUrl=function(e,t,r){var n=this.buildPayload(l(e),r);return console.log("payload push to"),console.log(n),this.$http.post(this.PUSHTO_API_URL+t+"?vid="+this.vid,n)},e}();u=n([a.Injectable(),o(1,a.Inject("$http")),o(2,a.Inject("restBaseURLs")),i("design:paramtypes",[s.TemplateUtil,Function,Object])],u),r.PushtoService=u},{"../../appConfig/appConfigForward":484,"../../nddUtils/templateUtil.service":609,"lodash/flatten":251,"ng-metadata/core":362}],644:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=(e("angular"),function(){function e(){this.closeTabsEvent=new o.EventEmitter}return e.prototype.ngOnInit=function(){this.closeTabsEvent.emit(null)},e}());n([o.Output(),i("design:type",Object)],a.prototype,"closeTabsEvent",void 0),a=n([o.Component({selector:"prm-refworks",templateUrl:"components/search/actions/refworksAction/refworks.html"}),i("design:paramtypes",[])],a),r.PrmRefworks=a},{angular:"angular","ng-metadata/core":362}],645:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("../pushto.service"),s=function(){function e(e){this.pushtoService=e}return e.prototype.refworksAction=function(e){this.popupWin=window.open("","_blank");var t=angular.bind(this,this.failedPushtoAction),r=angular.bind(this,this.successfullPushtoAction),n=this.pushtoService.getServiceUrl([e],"refworks");n.then(function(e){return r(e)},function(e){return t(e)})},e.prototype.successfullPushtoAction=function(e){var t=e.data.serviceUrl,r=e.data.data;this.popupWin.document.open(),this.popupWin.document.write('<html><head><link rel="stylesheet" type="text/css" href="style.css" /></head><body onload="document.getElementById(\'exportForm\').submit();"><FORM name="ExportForm" id="exportForm" method="POST" target="_parent"  style="display:none" action="'+t+'">'+r+"</body></html>"),this.popupWin.document.close(),console.log("Refworks successfully sent")},e.prototype.failedPushtoAction=function(e,t){console.log("Refworks call failed")},e}();s=n([o.Injectable(),i("design:paramtypes",[a.PushtoService])],s),r.RefWorksService=s},{"../pushto.service":643,"ng-metadata/core":362}],646:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./sendEmail.service"),c=e("../../../security/jwtUtil.service"),l=e("../../../infra/storageUtil.service"),u=e("../../../appConfig/appConfigForward"),d=e("angular"),p=function(){function e(e,t,r,n){var i=this;this.sendEmailService=e,this.jwtUtilService=t,this.storageUtil=r,this.$translate=n,this.submitClicked=!1,this.finishedEmailEvent=new a.EventEmitter,this.emailRegExAll=/^(([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5}){1,25})+([;]\s*(([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5}){1,25})+)*$/,this.urlPattern=/((http|https|ftp|smtp|rtsp):\/\/|www\.)/i,this.htmlPattern=/([<>]|script)/i,this.addresses="",this.isUser()&&this.storageUtil.$localForage.getItem("userDetails").then(function(e){i.addresses=null!==e?e.email:""}),this.$translate("email.itemsfound").then(function(e){i.subject=e}),this.note="",this._sendMailInProgress=!1}return Object.defineProperty(e.prototype,"emailRegEx",{get:function(){return this.emailRegExAll},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"capchaPublicKey",{get:function(){return u.getCaptcha().public_key},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCaptcha",{get:function(){return"Y"==u.getCaptcha().isActiveCapcha},enumerable:!0,configurable:!0}),e.prototype.disableHtml=function(e){this.note=this.note.replace(this.htmlPattern,""),this.note=this.note.replace(this.urlPattern,"")},e.prototype.successfullSendAction=function(e,t){console.log("email successfully sent"),this._sendMailInProgress=!1,this.finishedEmailEvent.emit(null)},e.prototype.failedSendAction=function(e,t){console.log("email failed to send"),this._sendMailInProgress=!1,this.finishedEmailEvent.emit(null)},e.prototype.isUser=function(){var e=this.jwtUtilService.getDecodedToken().userGroup;return"GUEST"!==e},e.prototype.isGuest=function(){return!this.isUser()},e.prototype.sendEmail=function(e){if(this.submitClicked=!0,this.isFormValid(e)){var t=d.bind(this,this.failedSendAction,e),r=d.bind(this,this.successfullSendAction,e);this._sendMailInProgress=!0;var n=this.sendEmailService.sendEmail(this.addresses.split(";"),this.subject,this.note,[this.item],this.gCaptchaResponse);n.then(function(e){return r(e)},function(e){return t(e)})}},e.prototype.isFormValid=function(e){return this.emailRegEx.test(this.addresses)&&this.subject&&this.isRecipientNumberValid()&&this.isNoteSecured()&&this.isCaptchaSet(e)},e.prototype.isNoteSecured=function(){return!this.urlPattern.test(this.note)&&!this.htmlPattern.test(this.note)},e.prototype.isRecipientNumberValid=function(){var e=this.addresses.split(";");return this.isUser()?e.length<=10:e.length<=1},e.prototype.setWidgetId=function(e){},e.prototype.isCaptchaSet=function(e){return!this.isCaptcha||!!this.gCaptchaResponse},e.prototype.setResponse=function(e){this.gCaptchaResponse=e},e.prototype.changeAddress=function(e){this.isRecipientNumberValid()?e.addresses.$error.validationError=!1:e.addresses.$error.validationError=!0},e.prototype.changeNote=function(e){this.urlPattern.test(this.note)||this.htmlPattern.test(this.note)?e.note.$error.validationError=!0:e.note.$error.validationError=!1},Object.defineProperty(e.prototype,"sendMailInProgress",{get:function(){return this._sendMailInProgress},enumerable:!0,configurable:!0}),e}();n([a.Input(),i("design:type",Object)],p.prototype,"item",void 0),n([a.Output(),i("design:type",Object)],p.prototype,"finishedEmailEvent",void 0),p=n([a.Component({providers:[s.SendEmailService],selector:"prm-send-email",templateUrl:"components/search/actions/sendEmailAction/send-email.html"}),o(3,a.Inject("$translate")),i("design:paramtypes",[s.SendEmailService,c.JwtUtilService,l.StorageUtil,Function])],p),r.PrmSendEmail=p},{"../../../appConfig/appConfigForward":484,"../../../infra/storageUtil.service":571,"../../../security/jwtUtil.service":842,"./sendEmail.service":647,angular:"angular","ng-metadata/core":362}],647:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../nddUtils/configurationUtil.service"),c=e("../../../nddUtils/templateUtil.service"),l=e("../../../appConfig/appConfigForward"),u=e("lodash/flatten"),d=function(){function e(e,t,r,n,i,o){this.$http=e,this.configurationUtil=t,this.templateUtil=r,this.$translate=n,this.restBaseURLs=i,this.$state=o,this.vid=l.getVid(),this.EMAIL_API_URL=i.actionsBaseURL+"/email"}return e.prototype.getLinkToOnline=function(e){var t=[],r=e.delivery.availabilityLinks?e.delivery.availabilityLinks:[],n=e.delivery.availabilityLinksUrl?e.delivery.availabilityLinksUrl:[];if(r.length>0&&n.length>0)for(var i=0;i<r.length;i++)if("directlink"===r[i]&&n[i].length>0){var o={linkLabel:this.isPhysical(e.delivery.deliveryCategory[i]),linkURL:n[i]};t.push(o)}return t},e.prototype.isPhysical=function(e){var t="";return t="Physical Item"===e||"Microform"===e||"Alma-P"===e?"physicalCopy":"onlineAccess"},e.prototype.itemToRecord=function(e){var t={pnx:e.pnx,context:this.getContext(e),holdings:e.delivery.holding,deeplink:this.getLinkByPageType(e),link2online:this.getLinkToOnline(e)};return t},e.prototype.getLinkByPageType=function(e){return"servicesPage"===this.$state.current.name?window.location.href:"fulldisplay"===this.$state.current.name?this.templateUtil.getDeepLinkAbsPath(e,this.$state.params.search_scope,this.$state.params.adaptor):this.templateUtil.getDeepLinkAbsPath(e)},e.prototype.buildPaylod=function(e,t,r,n,i){var o=this,a=n.map(function(e){return o.itemToRecord(e)}),s={addresses:e,subject:t,notes:r,language:this.$translate.use(),vid:this.vid,template:"default",records:a,captchaResponse:i};return s},e.prototype.sendEmail=function(e,t,r,n,i){var o=this.buildPaylod(e,t,r,u(n),i);return this.$http.post(this.EMAIL_API_URL,o)},e.prototype.getContext=function(e){var t=e.pnx.control.recordid[0],r=e.context;return void 0===r&&(r=t.startsWith("TN_")?"PC":"L"),r},e}();d=n([a.Injectable(),o(0,a.Inject("$http")),o(3,a.Inject("$translate")),o(4,a.Inject("restBaseURLs")),o(5,a.Inject("$state")),i("design:paramtypes",[Function,s.ConfigurationUtil,c.TemplateUtil,Function,Object,Object])],d),r.SendEmailService=d},{"../../../appConfig/appConfigForward":484,"../../../nddUtils/configurationUtil.service":596,"../../../nddUtils/templateUtil.service":609,"lodash/flatten":251,"ng-metadata/core":362}],648:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){
var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("angular"),s=e("ng-metadata/core"),c=e("../appConfig/appConfig.module"),l=function(){function e(e,t){this.autoCompleteConfig=e,this.$http=t}return e.prototype.isAutocompleteEnabledFor=function(e){return this.autoCompleteConfig.isEnabled(e)},e.prototype.search=function(e,t){var r={q:e},n=a.extend({},this.autoCompleteConfig.getDefaultParams(t),r);return this.$http.jsonp(this.autoCompleteConfig.url,{jsonpCallbackParam:"json.wrf",params:n}).then(function(e){return e.data.response.docs.map(function(e){return e.text})})},e}();l=n([s.Injectable(),o(0,s.Inject("autoCompleteConfig")),o(1,s.Inject("$http")),i("design:paramtypes",[Object,Function])],l),r.AutoComplete=l,r.default=[c.default.name]},{"../appConfig/appConfig.module":482,angular:"angular","ng-metadata/core":362}],649:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../search.service"),c=e("../facet/facet.service"),l=e("../searchState.service"),u=e("../../analytics/primolytics.service"),d=e("../../nddUtils/configurationUtil.service"),p=function(){function e(e,t,r,n,i,o){this.$mdSidenav=e,this.searchService=t,this.facetService=r,this.searchStateService=n,this.primolyticsService=i,this.configurationUtil=o,this.selFacets=[]}return e.prototype.ngOnInit=function(){},e.prototype.removeFacet=function(e){e.persistent&&this.removeStickyFacet(e);var t=e.name+","+e.type+","+e.value;this.facetService.facetSearch({facet:t,remove:!0})},e.prototype.clearAllFacets=function(){this.facetService.facetSearch({removeAll:!0})},e.prototype.toggleFacets=function(){this.$mdSidenav("right").toggle()},e.prototype.facetLabel=function(e){return this.facetService.facetLabel(e)},Object.defineProperty(e.prototype,"facets",{get:function(){return this.facetService.getResults()},set:function(e){},enumerable:!0,configurable:!0}),e.prototype.addStickyFacet=function(e){return this.addStickyFacetBeacon(e),this.facetService.addStickyFacet(e)},e.prototype.addStickyFacetBeacon=function(e){},e.prototype.removeStickyFacet=function(e){return this.facetService.removeStickyFacet(e)},Object.defineProperty(e.prototype,"selectedFacets",{get:function(){var e=this.searchStateService.getSearchObject();return e.facets},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchInfo",{get:function(){return this.searchService.getResultObject().info},enumerable:!0,configurable:!0}),e.prototype.getFacetDefaultValue=function(e){return this.facetService.getFacetDefaultValue(e)},e}();n([u.beacon({p:"refine"}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],p.prototype,"removeFacet",null),n([u.beacon({p:"setPersistentFacet"}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],p.prototype,"addStickyFacetBeacon",null),p=n([a.Component({selector:"prm-breadcrumbs",templateUrl:"components/search/breadcrumbs/breadcrumbs.html"}),o(0,a.Inject("$mdSidenav")),i("design:paramtypes",[Function,s.SearchService,c.FacetService,l.SearchStateService,u.PrimolyticsService,d.ConfigurationUtil])],p),r.PrmBreadcrumbs=p},{"../../analytics/primolytics.service":480,"../../nddUtils/configurationUtil.service":596,"../facet/facet.service":679,"../search.service":792,"../searchState.service":814,"ng-metadata/core":362}],650:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("../../nddUtils/filterLanguage.service"),s=e("angular-material"),c=e("ng-metadata/core"),l=e("./briefResult.service"),u=e("../search.service"),d=e("../../nddUtils/zoteroUtil"),p=e("../../nddUtils/configurationUtil.service"),f=e("../../nddUtils/filterInstitution.service"),h=e("../../infra/lang/changeLang.service"),m=e("lodash/findIndex"),g=e("lodash/get"),v=function(){function e(e,t,r,n,i,o,a){this.briefResultService=e,this.searchService=t,this.configurationUtil=r,this.filterInstitution=n,this.filterLanguage=i,this.$state=o,this.changeLangService=a,this.showItemType=!this.isServicesPageState(),this.combiningHalfMarksRegexp=new RegExp("(.[︠-︯].[︠-︯])","gi")}return e.prototype.ngOnInit=function(){this.lastId=-1,this.item.pnx=this.filterLanguage.fillterPnx(this.item.pnx);var e=this.getDisplayLines();this.firstLine=e.shift(),this.otherLines=e},e.prototype.getDisplayLines=function(){if(!this.item)return[];var e=this.item.pnx.display.source;return this.lines&&this.lastId===e||(this.lastId=e,this.lines=this.briefResultService.parseDisplayLines(this.item,this.isCollectionDiscoveryCollection)),this.lines},e.prototype.isServicesPageState=function(){return this.briefResultService.isServicePageState()},e.prototype.calcZoteroParams=function(){if(g(this.item,"delivery.link")){var e=m(this.item.delivery.link,function(e){return e.linkType.indexOf("openurl")>-1});if(e>-1){var t=this.item.delivery.link[e].linkURL;return d.encodeZoteroValue(t)}}},Object.defineProperty(e.prototype,"zoteroParamsString",{get:function(){return this.calcZoteroParams()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"highlights",{get:function(){return this.searchService.highlightsService.highlights},enumerable:!0,configurable:!0}),e.prototype.getDisplayValFromVal=function(e,t){var r="";return e.includes("$$")?(e.includes(";")?e.split(";").forEach(function(e){r+=e.split("$$")[0]+";"}):r=e.split("$$")[0],r.endsWith(";")?r.substr(0,r.length-1):r):t&&e.endsWith(t.trim())&&0!=t.trim().length?e.substr(0,e.length-1):e},e.prototype.filterAndNormalize=function(e){return this.filterInstitution.filterAndNormalizeData(e,e)},Object.defineProperty(e.prototype,"displayTitleAsLink",{get:function(){return!(this.configurationUtil.isSuprima()&&("EbscoLocal"===this.item.adaptor||"WorldCatLocal"===this.item.adaptor))},enumerable:!0,configurable:!0}),e.prototype.getClassForIdentifier=function(){return this.configurationUtil.isSuprima()?this.$state.params.rft_dat&&this.$state.params.rft_dat.toLowerCase().indexOf("ie=")>-1?"identifier-in-brief-local":"identifier-in-brief-classic":""},Object.defineProperty(e.prototype,"logTimeStamp",{get:function(){return window.appPerformance.timeStamps["search result displayed"]=Date.now(),""},enumerable:!0,configurable:!0}),e.prototype.getResourceTypeForDisplay=function(){return 1===this.searchService.getFrbrDisplay()?"mediatype.multiplever":"mediatype."+this.item.pnx.display.type[0]},e.prototype.changeStringDirectionToRtl=function(e){return this.briefResultService.changeStringDirectionToRtl(e)},Object.defineProperty(e.prototype,"isFullViewOverlayOpen",{get:function(){return this.briefResultService.isFullViewOverlayOpen},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ShowPnxInXmlUrl",{get:function(){return this.briefResultService.ShowPnxInXmlUrl(this.item)},enumerable:!0,configurable:!0}),e}();n([c.Input(),i("design:type",Object)],v.prototype,"item",void 0),n([c.Input(),i("design:type",Boolean)],v.prototype,"rtaInProgress",void 0),n([c.Input(),i("design:type",String)],v.prototype,"resourceTypeForDisplay",void 0),n([c.Input(),i("design:type",String)],v.prototype,"deepLink",void 0),n([c.Input(),i("design:type",Boolean)],v.prototype,"isFullView",void 0),n([c.Input(),i("design:type",Boolean)],v.prototype,"isCollectionDiscoveryCollection",void 0),v=n([c.Component({providers:[s],selector:"prm-brief-result",templateUrl:"components/search/briefResult/briefResult.html"}),o(5,c.Inject("$state")),i("design:paramtypes",[l.BriefResultService,u.SearchService,p.ConfigurationUtil,f.FilterInstitution,a.FilterLanguage,Object,h.ChangeLangService])],v),r.PrmBriefResult=v},{"../../infra/lang/changeLang.service":561,"../../nddUtils/configurationUtil.service":596,"../../nddUtils/filterInstitution.service":599,"../../nddUtils/filterLanguage.service":600,"../../nddUtils/zoteroUtil":610,"../search.service":792,"./briefResult.service":651,"angular-material":17,"lodash/findIndex":248,"lodash/get":255,"ng-metadata/core":362}],651:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../search.service"),c=e("../../nddUtils/configurationUtil.service"),l=e("../../nddUtils/resultUtil.service"),u=e("../../security/userSessionManager.service"),d=e("../../favorites/favorites.service"),p=e("../../security/jwtUtil.service"),f=e("../../primoExplore/primoExploreStates.module"),h=e("lodash/difference"),m=e("lodash/indexOf"),g=e("lodash/uniqBy"),v=e("lodash/filter"),y=e("lodash/map"),b=e("../../infra/lang/changeLang.service"),S=e("../../nddUtils/filterInstitution.service"),_=e("../../appConfig/appConfigForward"),w=e("../../nddUtils/searchUtil.service"),E=e("angular"),T=function(){function e(e,t,r,n,i,o,a,s,c,l,u,d,p,f){this.configurationUtil=e,this.searchService=t,this.resultUtil=r,this.$http=n,this.$location=i,this.userSessionManagerService=o,this.jwtUtilService=a,this.$translate=s,this.searchUtil=c,this.favoritesService=l,this.restBaseURLs=u,this.$state=d,this.changeLangService=p,this.filterInstitution=f,this.isChosen=[],this.chosen=[],this.items=[],this.chosenItems=[],this._selectAll=!1,this.allOoRegexp=new RegExp("\\$\\$O(.*),?","g"),this.showPins={},this._isFullViewOverlayOpen=!1,this.UPDATE_FAVORITES_URL=u.favoritesBaseURL+"/",this.SHOW_PNX_IN_XML_URL=u.showPnxInXmlUrl+"/",this.buildJsonOdIdsAndPins()}return e.prototype.parseDisplayLines=function(e,t){var r,n=E.bind(this,this.parseLineUnbound,e),i=this.resultUtil.isFrbr(e)&&1===this.searchService.getFrbrDisplay()&&"PC"!==e.context&&this.isGenericRecord(e)&&!this.isFavoriteState()&&this.resultUtil.isMultipleVersions(e);if("servicesPage"===this.$state.current.name){if(this.configurationUtil.isSuprima())var o=[{delimiter:",",items:"title"},{delimiter:"; ",items:"creator,contributor"},{delimiter:",",items:"creationdate"},{delimiter:",",items:"identifier"},{delimiter:",",items:"ispartof"}];else var o=[{delimiter:",",items:"title"},{delimiter:",",items:"creator,creationdate"},{delimiter:",",items:"identifier"},{delimiter:",",items:"ispartof"}];r=y(o,n)}else if(t){var a=[{delimiter:" ",items:"title"},{delimiter:" ",items:"description"}];r=y(a,n)}else r=i?y(this.configurationUtil.getBriefResultFrbrGenericConfiguration().resultview,n):y(this.configurationUtil.getBriefResultConfiguration().resultview,n);return v(r,function(e){return e.values.length>0})},e.prototype.isGenericRecord=function(e){if(this.getSearchObject().facets){var t=this.getSearchObject().facets.map(function(e,t,r){return e.name});return t.indexOf("frbrgroupid")===-1}return!0},e.prototype.getSearchObject=function(){return this.searchService.getSearchObject()},e.prototype.getValueObjectUnbound=function(e,t,r){var n=this,i=e.pnx.display[r]||e.pnx.display[r.toLowerCase()];if(!i)return{codes:[""],values:i,text:i,key:r,clazz:"media-"+r};i=i.map(function(e){return n.remove$$OValues(e)}),i=this.filterInstitution.filterAndNormalizeData(e,i);var o=i;if(i="suprima"===this.configurationUtil.getBackendSystem()?E.isArray(i)?i.join(t):i:E.isArray(i)?i.join():i,"source"===r)i=this.parseSourceCodes(o);else{if(("isPartOf"===r||"ispartof"===r)&&i&&e.pnx.display.lds50&&"peer_reviewed"===e.pnx.display.lds50[0]){var a={codes:["fulldisplay.constants.peer_reviewed"],values:[i],text:[],valueFirst:!0,key:r,clazz:"media-"+r};return this.$translate("fulldisplay.constants.peer_reviewed").then(function(e){a.text.push(i+e)}),a}if(!(["identifier","description","relation"].indexOf(r)>-1))return{codes:[""],values:[i],text:[i],key:r,clazz:"media-"+r};i=this.parseCodes(i)}var s=[];return i.codes.forEach(function(e,t){var o="";if(e){var a="";"source"===r&&(a=e.replace("fulldisplay.datasource."," ")),n.$translate(e,[],"",a).then(function(e){"source"===r?n.$translate(e,[],"",e).then(function(e){i.codes[t]=e,o=n.calculateTextPerCodeAndValue(e,i,t),s.push(o)}):("identifier"===r&&(e+=" "),i.codes[t]=e,o=n.calculateTextPerCodeAndValue(e,i,t),s.push(o))})}else o=i.values[t],s.push(o)}),{codes:i.codes,values:i.values,text:s,key:r,clazz:"media-"+r}},e.prototype.calculateTextPerCodeAndValue=function(e,t,r){var n=e;return t.values[r]&&(n+=t.values[r]),n},e.prototype.parseLineUnbound=function(e,t){var r=t.delimiter,n=E.bind(this,this.getValueObjectUnbound,e,r),i=t.items.split(",");return{values:i.map(n,e).filter(function(e,t,r){return e.values}),delimiter:r}},e.prototype.buildPaylodOfAdd=function(e){var t=e.context,r=e.pnx.control.recordid[0];void 0===t&&(t=r.startsWith("TN_")?"PC":"L");var n={add:{records:[{recordId:r,context:t,pnx:e.pnx}]}};return n},e.prototype.buildPaylodOfRemove=function(e){var t={delete:{records:[{recordId:e}]}};return t},e.prototype.removeUserFavoritesFewRecords=function(e){var t=this.buildPaylodOfRemoveFewRecords(e);return this.$http.post(this.UPDATE_FAVORITES_URL,t)},e.prototype.buildPaylodOfRemoveFewRecords=function(e){for(var t,r=[],n=0;n<e.length;n++)t={recordId:e[n]},r.push(t);var i={delete:{records:r}};return i},e.prototype.addUserFavorite=function(e){var t=this.buildPaylodOfAdd(e);return this.$http.post(this.UPDATE_FAVORITES_URL,t)},e.prototype.removeUserFavorite=function(e){var t=this.buildPaylodOfRemove(e);return this.$http.post(this.UPDATE_FAVORITES_URL,t)},e.prototype.saveJsonOdIdsAndPins=function(e,t){this.showPins[e]=t},e.prototype.saveJsonsOdIdsAndPins=function(e,t){var r=this;e.map(function(e){return r.saveJsonOdIdsAndPins(e,t)})},e.prototype.getShowPinForRecordId=function(e){return this.showPins[e]},Object.defineProperty(e.prototype,"selectAll",{get:function(){return this.checkIfAllSelected()?this._selectAll=!0:this._selectAll=!1,this._selectAll},set:function(e){this._selectAll=e},enumerable:!0,configurable:!0}),e.prototype.saveJsonOdIdsAndIfChosen=function(e,t){this.isChosen[e]=t},e.prototype.saveJsonOdIdsAndItems=function(e,t){t?this.chosenItems.push(e):this.removeElementFromItemsList(e)},e.prototype.removeElementFromItemsList=function(e){for(var t=0;t<this.chosenItems.length;t++)this.chosenItems[t].pnx.control.recordid[0]===e.pnx.control.recordid[0]&&(this.chosenItems.splice(t,1),t=this.chosenItems.length)},e.prototype.getIfChosenForRecordId=function(e){return void 0!==this.isChosen[e]&&this.isChosen[e]},e.prototype.getChosenRecords=function(){this.chosen.length=0;var e=this.favoritesService.getFullList();if(void 0!==e)for(var t=this.returnArrayOfRecordIds(e),r=0;r<t.length;r++)this.isChosen[t[r]]&&this.chosen.push(t[r]);return this.chosen},e.prototype.checkIfAllSelected=function(){var e=this.favoritesService.getFullList();if(void 0!==e&&0!==e.length){var t=this.returnArrayOfRecordIds(e);if(0===h(t,this.getChosenRecords()).length)return!0}return!1},e.prototype.returnArrayOfRecordIds=function(e){var t=this;return e.map(function(e){return t.returnRecordIds(e)})},e.prototype.chooseAll=function(){var e=this,t=E.copy(this.favoritesService.getFullList());t.map(function(t){return e.saveJsonOdIdsAndIfChosen(e.returnRecordIds(t),e._selectAll)}),this._selectAll?this.isGuest()?this.chosenItems=t:this.favoritesService.returnPnxForRecords(t).then(function(t){var r=t.data;r=r.filter(e.favoritesService.filterObject),r.forEach(function(e,t,r){return e.context="U"}),e.chosenItems=e.chosenItems.concat(r)}):this.chosenItems=[]},e.prototype.getChosenItems=function(){var e=this,t=this.chosenItems.filter(function(t){return m(e.chosen,t.pnx.control.recordid[0])>-1});t=g(t,"pnx.control.recordid[0]"),this.items.length=0;for(var r=0;r<t.length;r++)this.items.push(t[r]);return this.items},e.prototype.returnRecordIds=function(e){return this.isGuest()&&void 0!==e.pnx?e.pnx.control.recordid[0]:e},e.prototype.getIsChosen=function(){return this.isChosen},e.prototype.isGuest=function(){var e=this.jwtUtilService.getDecodedToken().userGroup;return"GUEST"===e},e.prototype.buildJsonOdIdsAndPins=function(){var e=this;this.showPins={};var t=this.jwtUtilService.getDecodedToken().user;t&&this.userSessionManagerService.createOrGetUserArea(t).then(function(t){e.userSessionManagerService.area=t;for(var r=0;r<e.userSessionManagerService.area.length;r++){var n=e.userSessionManagerService.area[r];e.isGuest()?e.showPins[n.pnx.control.recordid[0]]=!0:e.showPins[n]=!0}})},e.prototype.resetShowPin=function(){this.showPins={}},e.prototype.remove$$OValues=function(e){var t=e.match(this.allOoRegexp);if(t){for(var r=0;r<t.length;r++)e=e.replace(t[r],"");e=e.replace(/\$\$O(.*)/,"")}return e},e.prototype.parseSourceCodes=function(e){var t={codes:[],values:[]};return e.forEach(function(e,r){e=e.replace("$$V",""),e="fulldisplay.datasource."+e,t.codes.push(e),t.values.push("")}),t},e.prototype.parseCodes=function(e){if(e.indexOf("$$C")===-1)return{codes:[""],values:[e.replace(/\$\$./g," ")]};for(var t={codes:[],values:[]},r=e.split("$$C"),n=1;n<r.length;n++){e=r[n].split("$$V"),t.codes.push("fulldisplay.constants."+e[0].trim());for(var i="",o=1;o<e.length;o++)i+=e[o];t.values.push(i)}return t},e.prototype.unpinFavoritesFromToolBar=function(e){var t=this.jwtUtilService.getDecodedToken().user;this.isGuest()?this.unpinFavoritesForGuest(t,e):this.unpinFavoritesForUser(t,e)},e.prototype.unpinFavoritesForGuest=function(e,t){var r=this;this.userSessionManagerService.createOrGetUserArea(e).then(function(n){r.userSessionManagerService.area=n,r.userSessionManagerService.removeArrayOfRecords(t).then(function(){r.saveJsonsOdIdsAndPins(t,!1),r.favoritesService.getItemsFromLocalForage(e)})})},e.prototype.unpinFavoritesForUser=function(e,t){var r=this;this.userSessionManagerService.createOrGetUserArea(e).then(function(e){r.userSessionManagerService.area=e,r.removeUserFavoritesFewRecords(t).then(function(){r.userSessionManagerService.removeArrayOfRecords(t).then(function(){r.saveJsonsOdIdsAndPins(t,!1),r.favoritesService.getItemsFromServer()})})})},e.prototype.resetIsChosen=function(){this.isChosen=[],this.chosenItems=[]},Object.defineProperty(e.prototype,"isInGetFrbrEvent",{get:function(){return this._isInGetFrbrEvent},set:function(e){this._isInGetFrbrEvent=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentFullViewIndex",{get:function(){return this._currentFullViewIndex},set:function(e){this._currentFullViewIndex=e},enumerable:!0,configurable:!0}),e.prototype.isServicePageState=function(){return"servicesPage"===this.$state.current.name},e.prototype.isFavoriteState=function(){return this.$state.current.name==f.STATE_NAMES.FAVORITES},e.prototype.getShowBookmark=function(){return"suprima"!==this.configurationUtil.getBackendSystem()||this.configurationUtil.getSummonOverAlma()!==!0},e.prototype.isSuprima=function(){return this.configurationUtil.isSuprima()},e.prototype.changeStringDirectionToRtl=function(e){if("ltr"==this.changeLangService.direction)return!1;if(0===e.length)return!1;var t=!1,r=!1,n=/[ \t.,`@)(%~><}{\[\]\\\/:;_&^#$%'\"\+!?*=#|-]/g,i=/[a-z]/i;return e.forEach(function(e){return e.text&&e.text.length&&e.text.forEach(function(e){t=t||n.test(e),r=r||i.test(e)})}),t&&r},e.prototype.dontChangeStringDirectionToRtl=function(e){if("ltr"==this.changeLangService.direction)return!1;if(0===e.length)return!1;var t=!1,r=/[ \t.,`@)(%~><}{\[\]\\\/:;_&^#$%'\"\+!?*=#|-]/g,n=/[a-z]/i;return t=r.test(e)||n.test(e)},Object.defineProperty(e.prototype,"isFullViewOverlayOpen",{get:function(){return this._isFullViewOverlayOpen},set:function(e){this._isFullViewOverlayOpen=e},enumerable:!0,configurable:!0}),e.prototype.ShowPnxInXmlUrl=function(e){var t=this.$location.absUrl().substring(0,this.$location.absUrl().indexOf("primo-explore/")-1),r="";if(e){var n=e.context,i=e.pnx&&e.pnx.control?e.pnx.control.recordid[0]:"",o=_.getInstitutionCode(),a=this.$state.params.search_scope;a=this.searchUtil.getValidScope(a);var s=_.getVid();void 0===n&&(n=i.startsWith("TN_")?"PC":"L"),r=t+this.SHOW_PNX_IN_XML_URL+n+"/"+i+"?showPnx=true&vid="+s+"&inst="+o+"&search_scope="+a}return r},e}();T=n([a.Injectable(),o(3,a.Inject("$http")),o(4,a.Inject("$location")),o(7,a.Inject("$translate")),o(10,a.Inject("restBaseURLs")),o(11,a.Inject("$state")),i("design:paramtypes",[c.ConfigurationUtil,s.SearchService,l.ResultUtil,Object,Object,u.UserSessionManagerService,p.JwtUtilService,Object,w.SearchUtil,d.FavoritesService,Object,Object,b.ChangeLangService,S.FilterInstitution])],T),r.BriefResultService=T},{"../../appConfig/appConfigForward":484,"../../favorites/favorites.service":511,"../../infra/lang/changeLang.service":561,"../../nddUtils/configurationUtil.service":596,"../../nddUtils/filterInstitution.service":599,"../../nddUtils/resultUtil.service":605,"../../nddUtils/searchUtil.service":606,"../../primoExplore/primoExploreStates.module":620,"../../security/jwtUtil.service":842,"../../security/userSessionManager.service":853,"../search.service":792,angular:"angular","lodash/difference":240,"lodash/filter":246,"lodash/indexOf":261,"lodash/map":284,"lodash/uniqBy":322,"ng-metadata/core":362}],652:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=(e("lodash/indexOf"),e("angular-material"),e("lodash/get")),s=e("angular"),c=e("ng-metadata/core"),l=e("./briefResult.service"),u=e("./upFrontActions.service"),d=e("../search.service"),p=e("../searchState.service"),f=e("../../nddUtils/resultUtil.service"),h=e("../../security/userSessionManager.service"),m=e("../facet/facet.service"),g=e("../../nddUtils/templateUtil.service"),v=e("../../favorites/favorites.service"),y=e("../../analytics/primolytics.service"),b=e("../../security/jwtUtil.service"),S=e("../../nddUtils/pnxUtil.service"),_=e("../../infra/mediaQueries.service"),w=e("../../primoExplore/primoExploreStates.module"),E=e("../../infra/browserSniffer"),T=e("../savedQueries/addQueryToSavedSearches/addQueryToSavedSearches.service"),O=e("../actions/actionList.service"),I=e("../../nddUtils/configurationUtil.service"),P=e("../../infra/storageUtil.service"),R=e("../../infra/annotations"),C=e("../../collectionDiscovery/collectionDiscovery.service"),A=e("../../appConfig/appConfigForward"),j=function(){function e(e,t,r,n,i,o,a,s,l,u,d,p,f,h,m,g,v,y,b,S,_,w,E,T,O,I,P,R,C){var j=this;this.briefResultService=e,this.upFrontActionsService=t,this.$mdDialog=r,this.resultUtil=n,this.actionsIcons=i,this.searchService=o,this.searchStateService=a,this.userSessionManagerService=s,this.$location=l,this.$scope=u,this.templateUtil=d,this.jwtUtilService=p,this.facetService=f,this.$state=h,this.$timeout=m,this.favoritesService=g,this.pnxUtil=v,this.primolyticsService=y,this.mediaQueries=b,this.$window=S,this.addQueryToSavedSearchesService=_,this.$mdToast=w,this.$element=E,this.$translate=T,this.actionListService=O,this.configurationUtil=I,this.storageUtil=P,this.collectionDiscoveryService=R,this.restBaseURLs=C,this.expandItemEvent=new c.EventEmitter,this.selectedAction="none",this.isExpanded2=!1,this.isExpanded3=!1,this.KEY_CODE={COMMA:188,SEMICOLON:186,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,TAB:9,BACKSPACE:8,DELETE:46},this.vid=A.getVid(),this.institutionCode=A.getInstitutionCode(),this.showTimer=!1,this.onToggle={Print:function(e){j.printItemService.printItemAction(e)},RefWorks:function(e){j.refWorksService.refworksAction(e)},EasyBib:function(e){j.easyBibService.easyBibAction(e)},EndNote:function(e){j.endNoteService.endNoteAction(e)}},this.$timeout(function(){j.showTimer=!0},2e3),this.$mdDialog=r,this.jwtUtilService=p,this.briefResultService.isInGetFrbrEvent=!1,this.showItemType=!this.isServicesPageState(),u.$watch(function(){return j.isExpanded},function(e){j.isExpanded2!==e&&(j.$timeout(function(){return j.isExpanded2=e},10),j.$timeout(function(){return j.isExpanded3=e},20))})}return e.prototype.ngOnInit=function(){this.isExpanded&&this.expandItemEvent.emit(!1),this._isGenericRecord=this.isGenericRecord(),this.actionLabelNamesMap={"E-mail":"email",Citation:"citation",Permalink:this.isServicesPage()?"link":"permalink",Print:"print",EndNote:"pushto.option.EndNote",EasyBib:"pushto.option.EasyBib",RefWorks:"pushto.option.RefWorks",RISPushTo:"pushto.option.RISPushTo"},this.index=this.index?this.index:this.briefResultService.currentFullViewIndex,this.collectionDiscoveryService.isCollectionDiscoverySpecificDisplay&&(this.collectionDiscoveryData=a(this.collectionDiscoveryService.getDataFromCollectionRecord(this.item),"[0]"),this.isCollectionDiscoveryCollection=this.collectionDiscoveryData&&("COLLECTION"===this.collectionDiscoveryData.type||"TOPCOLLECTION"===this.collectionDiscoveryData.type))},e.prototype.getText=function(){return this.item.display.source.title},e.prototype.isFrbr=function(){return this.resultUtil.isFrbr(this.item)},e.prototype.newMetalibItem=function(){var e=a(this.item,"context",!1),t=e&&"MetaLib"===e,r=a(this.item,"pnx.ranking.booster2[0]",!1),n=a(this.item,"pnx.control.recordid[0]",""),i=a(this.getSearchObject(),"metalibMoreStatus["+n+"]",0)>1;return t&&r&&"1"===r&&!i},e.prototype.getSearchObject=function(){return this.searchStateService.getSearchObject()},e.prototype.isMultipleVersions=function(){return this.resultUtil.displayMultipleVersions(this.item,this.briefResultService.getSearchObject())},e.prototype.getResourceTypeForDisplay=function(){return!this.isMultipleVersions()||this.isFavoriteState()||this.isPc()||1!==this.searchService.getFrbrDisplay()?"mediatype."+this.item.pnx.display.type[0]:"mediatype.multiplever"},e.prototype.isPc=function(){return"PC"===this.item.context},e.prototype.isFrbrGeneric=function(){return this.resultUtil.isFrbr(this.item)&&1===this.searchService.getFrbrDisplay()},e.prototype.closeOpenTabs=function(e){e.stopPropagation(),this.selectedAction="none"},e.prototype.openTab=function(e,t){this.primolyticsService.doBeaconReport({p:"sendTo",op:t},this.item,this.primolyticsService.getTimestamp()),this.actionListService.onToggle[t]&&this.actionListService.onToggle[t](this.item),e.stopPropagation(),this.openItemMenu(e),this.selectedAction=t},e.prototype.openItemMenu=function(e){this.changeItemMenuVisibility(e,!1)},e.prototype.toggleItemMenu=function(e){e.stopPropagation(),console.log(e),this.changeItemMenuVisibility(e,!0)},e.prototype.changeItemMenuVisibility=function(e,t){this.isExpanded?t&&this.expandItemEvent.emit({expand:!1,target:this.$element[0]}):(this.closeOpenTabs(e),this.expandItemEvent.emit({expand:!0,target:this.$element[0]}))},e.prototype.isGenericRecord=function(e){if(this.isFavoriteState())return!1;if(!e&&void 0!==this._isGenericRecord)return this._isGenericRecord;var t=e?e:this.item,r=!1;if(this.briefResultService.getSearchObject().facets){var n=this.briefResultService.getSearchObject().facets.map(function(e,t,r){return e.name});r=this.resultUtil.isMultipleVersions(t)&&n.indexOf("frbrgroupid")===-1&&1===this.searchService.getFrbrDisplay()}return r},e.prototype.handleDetails=function(e,t,r){if(this.isCollectionDiscoveryCollection)return void this.$state.go(w.STATE_NAMES.COLLECTION_DISCOVERY,{collectionId:this.collectionDiscoveryData.collectionId,inst:this.collectionDiscoveryData.institution,vid:A.getVid()});var n=getSelection().toString();n||this.isFullView||(r?this.handleDetailsOpenfullWithBeacon(e):this.handleDetailsOpenfull(e,t))},e.prototype.handleDetailsOpenfullWithBeacon=function(e){this.handleDetailsOpenfull(e)},e.prototype.handleDetailsOpenfull=function(e,t){var r,n,i=this;if(t){if(n=t.target,n&&n.hasAttribute("prm-brief-internal-button-marker")||n.classList.contains("prm-brief-internal-button-marker"))return!1;r=t.detail?t.detail.index:t.index}var o=this.isGenericRecord(e);if(o&&!this.isPc()){var a="frbrgroupid,include,"+this.pnxUtil.getValue(e,"facets","frbrgroupid");return void this.facetService.frbrSearch({facet:a},this.index)}var c=this.$location.url();this.$location.url(this.templateUtil.getDeepLinkPath(e)),this.favoritesService.needToChangeUrl=!1;var l=this.$mdDialog;this.$mdToast.hide();var u={val:!E.isBrowserIE()},d={val:!1};l.show({onComplete:function(){i.briefResultService.isFullViewOverlayOpen=!0,u.val?d.val=!0:(i.$timeout(function(){return d.val=!0},0),i.$timeout(function(){return u.val=!0},1e3)),i.briefResultService.currentFullViewIndex=i.index?i.index:0,document.querySelector(".md-dialog-container")&&s.element(document.querySelector(".md-dialog-container")).addClass("fixed-container")},onRemoving:function(){i.handleDialogHide(c,n)},templateUrl:"components/search/fullView/full-view-dialog-template.html",locals:{focusId:r,item:e,$location:this.$location,perviousUrl:c,$state:this.$state,favoritesService:this.favoritesService,jwtUtilService:this.jwtUtilService,mediaQueries:this.mediaQueries,isfavorites:this.isfavorites,loadFullViewAdditionalServices:u,dialogOpened:d},bindToController:!0,clickOutsideToClose:!0,fullscreen:!0,escapeToClose:!0,focusOnOpen:!1,controller:function(){function e(){l.hide()}var t=this;t.handleHideDetails=e},controllerAs:"$ctrl"});var p,f;p=this.$scope.$on("$stateChangeStart",function(e,t,r,n,o){e.preventDefault(),p(),p=i.$scope.$on("$locationChangeStart",function(e){e.preventDefault(),p()}),f=i.$scope.$watch(function(){return i.$location.path()},function(e,t){"/fulldisplay"===t&&"/search"===e&&(i.$mdDialog.cancel(),f())}),window.onpopstate=function(){window.onpopstate=void 0,i.$mdDialog.cancel()}})},e.prototype.handleDialogHide=function(e,t){this.briefResultService.isFullViewOverlayOpen=!1,window.onpopstate=void 0,this.briefResultService.isInGetFrbrEvent||(this.restorePreviousUrl(e),this.$state.current.name==w.STATE_NAMES.FAVORITES&&"GUEST"!=this.jwtUtilService.getDecodedToken().userGroup&&this.favoritesService.needToChangeUrl&&(this.favoritesService.needToChangeUrl=!1,
this.favoritesService.getItemsFromServer()),t&&(t.setAttribute("tabindex","-1"),t.focus(),t.setAttribute("tabindex","0")))},e.prototype.restorePreviousUrl=function(e){this.$location.url(e)},e.prototype.isFavoriteState=function(){return this.$state.current.name==w.STATE_NAMES.FAVORITES},e.prototype.isServicesPageState=function(){return this.briefResultService.isServicePageState()},Object.defineProperty(e.prototype,"isChosen",{get:function(){return this.briefResultService.getIfChosenForRecordId(this.recordId)},set:function(e){this.briefResultService.saveJsonOdIdsAndIfChosen(this.recordId,e),this.briefResultService.saveJsonOdIdsAndItems(this.item,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"upFrontActions",{get:function(){var e=this;if(this.configurationUtil.isSuprima())return this.upFrontActionsService.requiredUpFrontActionsList;var t=this.upFrontActionsService.requiredUpFrontActionsList.filter(function(t){return!("Ebsco"===e.item.context&&"Permalink"===t)});return t},enumerable:!0,configurable:!0}),e.prototype.getActionIconName=function(e){return this.upFrontActionsService.getActionIconName(e)},e.prototype.getActionLabel=function(e){return this.upFrontActionsService.getActionLabel(e)},Object.defineProperty(e.prototype,"delivery",{get:function(){return a(this.item,"delivery")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recordId",{get:function(){return this.item.pnx.control.recordid[0]},enumerable:!0,configurable:!0}),e.prototype.getDeepLinkPath=function(){return this.isCollectionDiscoveryCollection?this.$state.href(w.STATE_NAMES.COLLECTION_DISCOVERY,{collectionId:this.collectionDiscoveryData.collectionId,inst:this.collectionDiscoveryData.institution,vid:A.getVid()}):this.templateUtil.getFullDeepLinkAbsPath(this.item)},e.prototype.isShowCitationTrails=function(){var e=this.$state.current.name;return e===w.STATE_NAMES.CITATION_TRAILS},e.prototype.keyDownSupport=function(e){this.KEY_CODE;27===e.keyCode&&(this.closeOpenTabs(e),this.toggleItemMenu(e)),40!==e.keyCode&&38!==e.keyCode||e.preventDefault()},e.prototype.focusOnXButton=function(){var e=this.$element[0].querySelector("#briefResultMoreOptionsButton");e.focus()},e.prototype.getActionTranslate=function(e){var t="fulldisplay.command."+this.actionLabelNamesMap[e];return this.$translate.instant(t)},e.prototype.getRecordTitle=function(){return this.item.pnx.display.title[0]},e.prototype.isServicesPage=function(){return"servicesPage"===this.$state.current.name},e.prototype.getNameTitleParams=function(e,t){var r={};return r[e[0]]=this.getActionTranslate(t),r[e[1]]=this.getRecordTitle(),r},e.prototype.ctoUrl=function(){var e;if("servicesPage"===this.$state.current.name){var t=this.$window.location.toString(),r=t.indexOf("?");e=t.substring(r+1,t.length)+"&isServicesPage=true"}else e="vid="+this.vid;return this.restBaseURLs.openUrl+"/"+this.institutionCode+"/dbg?"+e},e.prototype.displayCTOButton=function(){return this.configurationUtil.isSuprima()&&"true"==this.$location.search().displayCTO},e.prototype.getItme=function(){return JSON.stringify(this.item)},e}();n([c.Input(),i("design:type",Object)],j.prototype,"index",void 0),n([c.Input(),i("design:type",Object)],j.prototype,"item",void 0),n([c.Input(),i("design:type",Object)],j.prototype,"isExpanded",void 0),n([c.Input(),i("design:type",Object)],j.prototype,"isfavorites",void 0),n([c.Input(),i("design:type",Object)],j.prototype,"isFavoriteForDisplayFrbr",void 0),n([c.Input(),i("design:type",Object)],j.prototype,"itemHeight",void 0),n([c.Input(),i("design:type",Object)],j.prototype,"links",void 0),n([c.Input(),i("design:type",Boolean)],j.prototype,"isOverlayFullView",void 0),n([c.Input(),i("design:type",Boolean)],j.prototype,"isFullView",void 0),n([c.Output(),i("design:type",Object)],j.prototype,"expandItemEvent",void 0),n([y.beacon({p:"brief",op:"openfull"}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],j.prototype,"handleDetailsOpenfullWithBeacon",null),n([R.preventStateReload,i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],j.prototype,"restorePreviousUrl",null),j=n([c.Component({selector:"prm-brief-result-container",templateUrl:"components/search/briefResult/briefResultContainer.html"}),o(2,c.Inject("$mdDialog")),o(4,c.Inject("featuredActionsIcons")),o(8,c.Inject("$location")),o(9,c.Inject("$scope")),o(13,c.Inject("$state")),o(14,c.Inject("$timeout")),o(19,c.Inject("$window")),o(21,c.Inject("$mdToast")),o(22,c.Inject("$element")),o(23,c.Inject("$translate")),o(28,c.Inject("restBaseURLs")),i("design:paramtypes",[l.BriefResultService,u.UpFrontActionsService,Object,f.ResultUtil,Object,d.SearchService,p.SearchStateService,h.UserSessionManagerService,Object,Object,g.TemplateUtil,b.JwtUtilService,m.FacetService,Object,Function,v.FavoritesService,S.PnxUtil,y.PrimolyticsService,_.MediaQueries,Object,T.AddQueryToSavedSearchesService,Object,Object,Function,O.ActionListService,I.ConfigurationUtil,P.StorageUtil,C.CollectionDiscoveryService,Object])],j),r.PrmBriefResultContainer=j},{"../../analytics/primolytics.service":480,"../../appConfig/appConfigForward":484,"../../collectionDiscovery/collectionDiscovery.service":498,"../../favorites/favorites.service":511,"../../infra/annotations":531,"../../infra/browserSniffer":534,"../../infra/mediaQueries.service":562,"../../infra/storageUtil.service":571,"../../nddUtils/configurationUtil.service":596,"../../nddUtils/pnxUtil.service":604,"../../nddUtils/resultUtil.service":605,"../../nddUtils/templateUtil.service":609,"../../primoExplore/primoExploreStates.module":620,"../../security/jwtUtil.service":842,"../../security/userSessionManager.service":853,"../actions/actionList.service":625,"../facet/facet.service":679,"../savedQueries/addQueryToSavedSearches/addQueryToSavedSearches.service":784,"../search.service":792,"../searchState.service":814,"./briefResult.service":651,"./upFrontActions.service":653,angular:"angular","angular-material":17,"lodash/get":255,"lodash/indexOf":261,"ng-metadata/core":362}],653:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../mappingTablesCache/mappingTablesCache.service"),c=e("../../appConfig/appConfigForward"),l=e("lodash/orderBy"),u=function(){function e(e,t){this.mappingTablesCache=e,this.$translate=t,this._requiredUpFrontActionsList=[],this.setRequiredUpFrontActionsList(),this.actionIconNamesMap={"E-mail":"email",Citation:"citations",Permalink:"permalink",Print:"print",EndNote:"endnote",EasyBib:"easybib",RefWorks:"refworks",RISPushTo:"ris"},this.actionLabelNamesMap={"E-mail":"email",Citation:"citation",Permalink:"permalink",Print:"print",EndNote:"pushto.option.EndNote",EasyBib:"pushto.option.EasyBib",RefWorks:"pushto.option.RefWorks",RISPushTo:"pushto.option.RISPushTo"}}return e.prototype.setRequiredUpFrontActionsList=function(){var e=l(this.mappingTablesCache.getTable("Actions List"),function(e){return parseInt(e.source3)},"desc");e=e.filter(function(e){return e.source3});var t=e.filter(function(e){return e.target===c.getVid()});e=t.length?t:e.filter(function(e){return"default"===e.target}),e=e.map(function(e){return e.source1}),this._requiredUpFrontActionsList=e.filter(function(e){return!("e-shelf"===e)})},Object.defineProperty(e.prototype,"requiredUpFrontActionsList",{get:function(){return this._requiredUpFrontActionsList},enumerable:!0,configurable:!0}),e.prototype.getActionIconName=function(e){return this.actionIconNamesMap[e]},e.prototype.getActionLabel=function(e){return this.$translate.instant("fulldisplay.command."+this.actionLabelNamesMap[e])},e}();u=n([a.Injectable(),o(1,a.Inject("$translate")),i("design:paramtypes",[s.MappingTablesCache,Function])],u),r.UpFrontActionsService=u},{"../../appConfig/appConfigForward":484,"../../mappingTablesCache/mappingTablesCache.service":592,"lodash/orderBy":293,"ng-metadata/core":362}],654:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../primoExplore/primoExploreStates.module"),c=e("../browseSearchBar/browseSearchBar.service"),l=e("./browseResult.service"),u=e("../browseSearch.service"),d=e("../../../appConfig/appConfigForward"),p=e("../../../analytics/primolytics.service"),f=e("../../../nddUtils/configurationUtil.service"),h=e("../../../infra/lang/changeLang.service"),m=function(){function e(e,t,r,n,i,o,a,s,c){this.browseResultService=e,this.browseSearchBarService=t,this.browseSearchService=r,this.primolyticsService=n,this.$state=i,this.browseIcons=o,this.$element=a,this.configurationUtil=s,this.changeLangService=c}return e.prototype.ngOnInit=function(){if(this.browseResultService.browseResult=this.browseResult,!this.haveLink){var e=this.$element[0].querySelector("a");e.style.cursor="default"}},Object.defineProperty(e.prototype,"recString",{get:function(){var e="";for(var t in this.browseResult.displayValue)e+=t;return e+="      number of records = "+this.browseResult.docIds.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"prefTitle",{get:function(){var e=[];for(var t in this.browseResult.displayValue)e.push(t);return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberOfCrossRef",{get:function(){return console.log(this.browseResult.displayValue.length),Object.keys(this.browseResult.displayValue).length>1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){var e="";for(var t in this.browseResult.displayValue)e+=t;return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberOfDocs",{get:function(){return this.configurationUtil.isSuprima()?parseInt(this.browseResult.numberOfResults):this.browseResult.docIds.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"callNumberDoc",{get:function(){return this.browseResult.displayValue.length>1&&console.log("bllue"),this.browseResult.displayValue[this.title]},enumerable:!0,configurable:!0}),e.prototype.getHeaderResultsStateParams=function(){var e;return e=this.configurationUtil.isSuprima()?"Browse: "+this.browseResult.displayValue[this.title]:this.havePref?this.callNumberDoc:this.browseResult.indexTextValue,this.headerQuryResultParam(e)},e.prototype.headerQuryResultParam=function(e){var t,r=this.numberOfDocs;return this.configurationUtil.isSuprima()?(t=JSON.stringify(this.browseResult.searchParams),this.browseResultService.query=e):this.browseResultService.query="browse_"+this.browseSearchBarService.selectedScope.SourceCode1+",exact,"+e,{vid:d.getVid(),query:this.browseResultService.query,sortby:this.browseSearchBarService.selectedScope.SourceCode2,browseQuery:this.browseSearchBarService.searchBarInput,browseScope:this.browseSearchService.searchedScope,browseFirstTerm:this.$state.params.browseFirstTerm,mode:"browse",browseParams:t,innerPnxIndex:this.$state.params.innerPnxIndex,numOfUsedTerms:this.browseSearchService.numOfUsedTerm,fn:this.$state.params.fn,docCount:r}},Object.defineProperty(e.prototype,"havePref",{get:function(){return void 0!=this.browseResult.nonPreferred},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"preferred",{get:function(){return this.browseResult.nonPreferred},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"haveType",{get:function(){return void 0!=this.browseResult.type&&0==!this.browseResult.type.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.browseResult.type},enumerable:!0,configurable:!0}),e.prototype.getFullDisplayStateParams=function(){return{vid:d.getVid(),docid:this.callNumberDoc,browseQuery:this.browseSearchBarService.searchBarInput,browseScope:this.browseSearchService.searchedScope,browseFirstTerm:this.$state.params.browseFirstTerm,mode:"browse",innerPnxIndex:this.$state.params.innerPnxIndex,numOfUsedTerms:this.$state.params.numOfUsedTerms,fn:this.$state.params.fn}},e.prototype.reportUse=function(){},e.prototype.resultLinkPref=function(e){var t=this.browseResult.displayValue[e];return this.$state.href(s.STATE_NAMES.SEARCH,this.headerQuryResultParam(t))},Object.defineProperty(e.prototype,"haveLink",{get:function(){return!this.havePref},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resultLink",{get:function(){if(!this.havePref)return this.isCallNumber()?this.$state.href(s.STATE_NAMES.FULL_DISPLAY,this.getFullDisplayStateParams(),{lossy:!1}):this.$state.href(s.STATE_NAMES.SEARCH,this.getHeaderResultsStateParams())},enumerable:!0,configurable:!0}),e.prototype.isCallNumber=function(){return!!this.browseSearchService.searchedScope.startsWith("call")},e.prototype.isSubjectOrAuthor=function(){return!(!this.browseSearchService.searchedScope.startsWith("subject")&&!this.browseSearchService.searchedScope.startsWith("author"))},Object.defineProperty(e.prototype,"author",{get:function(){return this.browseResult.author},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"date",{get:function(){return this.browseResult.date},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"callNumber",{get:function(){return this.browseResult.callNumber},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exactNumber",{get:function(){return this.configurationUtil.isSuprima()&&this.browseResult.numberOfResults&&this.browseResult.numberOfResults.indexOf("+")!==-1?"+":""},enumerable:!0,configurable:!0}),e.prototype.switchToLtrString=function(){return"rtl"==this.changeLangService.direction},e}();n([a.Input(),i("design:type",Object)],m.prototype,"browseResult",void 0),m=n([a.Component({selector:"prm-browse-result",templateUrl:"components/search/browse/browseResult/browse-result.html"}),o(4,a.Inject("$state")),o(5,a.Inject("browseIcons")),o(6,a.Inject("$element")),i("design:paramtypes",[l.BrowseResultService,c.BrowseSearchBarService,u.BrowseSearchService,p.PrimolyticsService,Object,Array,Object,f.ConfigurationUtil,h.ChangeLangService])],m),r.PrmBrowseResult=m},{"../../../analytics/primolytics.service":480,"../../../appConfig/appConfigForward":484,"../../../infra/lang/changeLang.service":561,"../../../nddUtils/configurationUtil.service":596,"../../../primoExplore/primoExploreStates.module":620,"../browseSearch.service":658,"../browseSearchBar/browseSearchBar.service":660,"./browseResult.service":655,"ng-metadata/core":362}],655:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=function(){function e(){}return Object.defineProperty(e.prototype,"browseResult",{get:function(){return this._browseResult},set:function(e){this._browseResult=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"query",{get:function(){return this._query},set:function(e){this._query=e},enumerable:!0,configurable:!0}),e}();o=n([i.Injectable()],o),r.BrowseResultService=o},{"ng-metadata/core":362}],656:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./browseSearch.service"),c=e("../search.service"),l=e("./browseSearchBar/browseSearchBar.service"),u=e("../../primoExplore/primoExploreStates.module"),d=e("../../appConfig/appConfigForward"),p=(e("lodash/get"),e("lodash/orderBy")),f=function(){function e(e,t,r,n){var i=this;this.browseSearchService=e,this.searchService=t,this.browseSearchBarService=r,this.$state=n,this.pagingConfiguration={firstPage:!1,paging:!1},this.browseSearchService.resetParams(),this._showPrevButtonPredicate=function(){return void 0!=i.browseSearchService.backTerm},this._showNextButtonPredicate=function(){return void 0!=i.browseSearchService.nextTerm}}return e.prototype.ngOnInit=function(){this.browseSearchBarService.searchBarInput=this.$state.params.browseQuery,this.getData()},Object.defineProperty(e.prototype,"selectedScope",{get:function(){return this.browseSearchBarService.selectedScope},set:function(e){this.browseSearchBarService.selectedScope=e},enumerable:!0,configurable:!0}),e.prototype.getData=function(){var e=this;if(void 0!=this.browseSearchBarService.scopes)this.selectedScope=this.browseSearchBarService.scopes[0],this.deepLinkPref();else{this.browseSearchBarService.scopesProgress=!0;var t=this.browseSearchBarService.getLinkScopes();t.then(function(t){e.browseSearchBarService.scopesProgress=!1,e.browseSearchBarService.scopes=p(t.data,"SourceCode5"),e.selectedScope=e.browseSearchBarService.scopes[0],e.browseSearchBarService.setSlectedScope(),e.deepLinkPref()})}},e.prototype.deepLinkPref=function(){var e=this.$state.params.browseScope,t=this.$state.params.browseFirstTerm||this.$state.params.browseQuery,r=this.$state.params.innerPnxIndex,n=this.$state.params.numOfUsedTerms,i=this.$state.params.fn;null!=e&&this.doQuery(i,t,e,r,n)},e.prototype.doQuery=function(e,t,r,n,i){if(void 0==this.$state.params.query){this.browseSearchService.getSearchJson(e,t,r,-1,n,i);for(var o=0,a=this.browseSearchBarService.scopes;o<a.length;o++){var s=a[o];if(s.SourceCode1===r){this.browseSearchBarService.selectedScope=s;break}}}},Object.defineProperty(e.prototype,"inProgress",{get:function(){return this.browseSearchService.inProgress},enumerable:!0,configurable:!0}),e.prototype.showList=function(){return!this.browseSearchService.inProgress&&this.browseResult.length>0},Object.defineProperty(e.prototype,"browseResult",{get:function(){return this.browseSearchService.browseResult},enumerable:!0,configurable:!0}),e.prototype.doNext=function(){var e=this.nextParam;this.$state.go(u.STATE_NAMES.BROWSE_SEARCH,e,{reload:!1})},Object.defineProperty(e.prototype,"nextParam",{get:function(){var e=this.browseSearchService.searchedScope,t=this.$state.params.browseQuery,r=this.browseSearchService.nextTerm,n=this.browseSearchService.lastPnxIndex,i=this.browseSearchService.numOfUsedTerm,o="BrowseNext",a={vid:d.getVid(),browseScope:e,browseQuery:t,browseFirstTerm:r,numOfUsedTerms:i,innerPnxIndex:n,fn:o};return a},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"prevParam",{get:function(){var e=this.browseSearchService.searchedScope,t=this.$state.params.browseQuery,r=this.browseSearchService.backTerm,n=(this.$state.params.innerPnxIndex,this.browseSearchService.numOfUsedTerm),i="BrowseBack",o={vid:d.getVid(),browseScope:e,browseQuery:t,browseFirstTerm:r,fn:i,numOfUsedTerms:n};return o},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchState",{get:function(){return u.STATE_NAMES.BROWSE_SEARCH},enumerable:!0,configurable:!0}),e.prototype.doPrev=function(){var e=this.prevParam;this.$state.go(u.STATE_NAMES.BROWSE_SEARCH,e,{reload:!1})},Object.defineProperty(e.prototype,"showNextButtonPredicate",{get:function(){return this._showNextButtonPredicate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showPrevButtonPredicate",{get:function(){return this._showPrevButtonPredicate},enumerable:!0,configurable:!0}),e}();f=n([a.Component({selector:"prm-browse-search",templateUrl:"components/search/browse/browse-search.html"}),o(3,a.Inject("$state")),i("design:paramtypes",[s.BrowseSearchService,c.SearchService,l.BrowseSearchBarService,Object])],f),r.PrmBrowseSearch=f},{"../../appConfig/appConfigForward":484,"../../primoExplore/primoExploreStates.module":620,"../search.service":792,"./browseSearch.service":658,"./browseSearchBar/browseSearchBar.service":660,"lodash/get":255,"lodash/orderBy":293,"ng-metadata/core":362}],657:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0}),e("ng-infinite-scroll"),e("angular-inview");var i=e("ng-metadata/core"),o=e("./browseSearch.directive"),a=e("./browseSearch.service"),s=e("./browseSearchBar/browseSearchBar.directive"),c=e("./browseSearchBar/browseSearchBar.service"),l=e("./browseResult/browseResult.directive"),u=e("./browseResult/browseResult.service"),d=e("../scroller/scroll.service"),p=e("../scroller/scroll.directive"),f=e("angular-material"),h=function(){function e(){}return e}();h=n([i.NgModule({declarations:[o.PrmBrowseSearch,s.PrmBrowseSearchBar,l.PrmBrowseResult,p.PrmScroll],providers:[a.BrowseSearchService,c.BrowseSearchBarService,u.BrowseResultService,d.ScrollService],imports:[f]})],h),r.BrowseSearchModule=h},{"../scroller/scroll.directive":787,"../scroller/scroll.service":788,"./browseResult/browseResult.directive":654,"./browseResult/browseResult.service":655,"./browseSearch.directive":656,"./browseSearch.service":658,"./browseSearchBar/browseSearchBar.directive":659,"./browseSearchBar/browseSearchBar.service":660,"angular-inview":11,"angular-material":17,"ng-infinite-scroll":361,"ng-metadata/core":362}],658:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../appConfig/appConfigForward"),c=e("../../security/jwtUtil.service"),l=e("../../analytics/primolytics.service"),u=function(){function e(e,t,r,n){this.$http=e,this.jwtUtilService=t,this.primolyticsService=r,this.restBaseURLs=n,this._browseResult=[],this._searchParams=[],this._inProgress=!1}return e.prototype.resetParams=function(){this._backTerm=void 0,this._nextTerm=void 0,this._lastPnxIndex=void 0,this._numOfUsedTerm=void 0,this._browseResult=[],this._searchParams=[]},e.prototype.onCampus=function(){return"true"==this.jwtUtilService.getDecodedToken().onCampus?"true":"false"},e.prototype.isSignedIn=function(){var e=this.jwtUtilService.getDecodedToken().userGroup;return"GUEST"===e?"false":"true"},e.prototype.getSearchJson=function(e,t,r,n,i,o,a){var c=this;void 0===e&&(e="BrowseSearch"),void 0===t&&(t=""),void 0===n&&(n=-1),void 0===i&&(i=-1),void 0===o&&(o=-1),void 0===a&&(a=!1);var l=s.getVid(),u=this.onCampus(),d=this.isSignedIn(),p=s.getInstitutionCode(),f=this.jwtUtilService.getDecodedToken().userGroup;""!=t||r.startsWith("callnumber")||(t="!");var h={params:{vid:l,onCamp:u,loggedIn:d,instCode:p,group:f,callnumberBack:n,innerPnxIndex:i,numOfUsedTerms:o,isBack:a,fn:e,searchWord:t,browseField:r}};this._inProgress=!0;var m=this.$http.get(this.restBaseURLs.browse+"/browseSearch",h);return this._searchedScope=r,m.then(function(e){c._browseResult=e.data.nexdPresentedValues,c.updateFields(e.data),c._inProgress=!1}),!0},Object.defineProperty(e.prototype,"inProgress",{get:function(){return this._inProgress},enumerable:!0,configurable:!0}),e.prototype.updateFields=function(e){this._backTerm=e.backTerm,this._nextTerm=e.nextTerm,this._lastPnxIndex=e.lastPnxIndex,this._numOfUsedTerm=e.numOfUsedTerm},Object.defineProperty(e.prototype,"lastPnxIndex",{get:function(){return this._lastPnxIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfUsedTerm",{get:function(){return this._numOfUsedTerm},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextTerm",{get:function(){return this._nextTerm},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backTerm",{get:function(){return this._backTerm},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"browseResult",{get:function(){return this._browseResult},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchedScope",{get:function(){return this._searchedScope},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"browseSearchParams",{get:function(){return this._searchParams},enumerable:!0,configurable:!0}),e}();n([l.beacon({p:"search",op:"browse"}),i("design:type",Function),i("design:paramtypes",[String,String,String,Number,Number,Number,Boolean]),i("design:returntype",void 0)],u.prototype,"getSearchJson",null),u=n([a.Injectable(),o(0,a.Inject("$http")),o(3,a.Inject("restBaseURLs")),i("design:paramtypes",[Function,c.JwtUtilService,l.PrimolyticsService,Object])],u),r.BrowseSearchService=u},{"../../analytics/primolytics.service":480,"../../appConfig/appConfigForward":484,"../../security/jwtUtil.service":842,"ng-metadata/core":362}],659:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./browseSearchBar.service"),c=e("../browseSearch.service"),l=e("../../../primoExplore/primoExploreStates.module"),u=e("../../../appConfig/appConfigForward"),d=e("../../../analytics/primolytics.service"),p=e("../../../infra/lang/changeLang.service"),f=e("lodash/orderBy"),h=function(){function e(e,t,r,n,i,o){this.browseSearchBarService=e,this.browseSearchService=t,this.primolyticsService=r,this.$state=n,this.searchBoxIcons=i,this.changeLangService=o,this.searchState=l.STATE_NAMES.BROWSE_SEARCH}return e.prototype.ngOnInit=function(){var e=this;if(null!=this.$state.params.docCount){this.browseSearchBarService.scopesProgress=!0;var t=this.browseSearchBarService.getLinkScopes();t.then(function(t){e.browseSearchBarService.scopesProgress=!1,e.browseSearchBarService.scopes=f(t.data,"SourceCode5"),e.browseSearchBarService.setSlectedScope()})}},Object.defineProperty(e.prototype,"scopes",{get:function(){return this.browseSearchBarService.scopes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedScope",{get:function(){return this.browseSearchBarService.selectedScope},set:function(e){this.browseSearchBarService.selectedScope=e},enumerable:!0,configurable:!0}),e.prototype.performSearch=function(){this.$state.go(this.searchState,{vid:u.getVid(),browseQuery:this.searchBarInput,browseScope:this.selectedScope.SourceCode1,browseFirstTerm:null,innerPnxIndex:-1,numOfUsedTerms:-1,fn:"BrowseSearch"},{reload:!1})},Object.defineProperty(e.prototype,"searchBarInput",{get:function(){return this.browseSearchBarService.searchBarInput},set:function(e){this.browseSearchBarService.searchBarInput=e},enumerable:!0,configurable:!0}),e.prototype.switchToLtrString=function(){return"rtl"==this.changeLangService.direction},e}();h=n([a.Component({selector:"prm-browse-search-bar",templateUrl:"components/search/browse/browseSearchBar/browse-search-bar.html"}),o(3,a.Inject("$state")),o(4,a.Inject("searchBoxIcons")),i("design:paramtypes",[s.BrowseSearchBarService,c.BrowseSearchService,d.PrimolyticsService,Object,Array,p.ChangeLangService])],h),r.PrmBrowseSearchBar=h},{"../../../analytics/primolytics.service":480,"../../../appConfig/appConfigForward":484,"../../../infra/lang/changeLang.service":561,"../../../primoExplore/primoExploreStates.module":620,"../browseSearch.service":658,"./browseSearchBar.service":660,"lodash/orderBy":293,"ng-metadata/core":362}],660:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../appConfig/appConfigForward"),c=function(){function e(e,t,r){this.$http=e,this.$state=t,this.restBaseURLs=r,this._scopesProgress=!1}return e.prototype.getLinkScopes=function(){var e=s.getVid(),t={params:{vid:e}},r=this.$http.get(this.restBaseURLs.browse+"/browseList",t);return r},Object.defineProperty(e.prototype,"scopesProgress",{get:function(){return this._scopesProgress},set:function(e){this._scopesProgress=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchBarInput",{get:function(){return this._searchBarInput},set:function(e){this._searchBarInput=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedScope",{get:function(){return this._selectedScope},set:function(e){this._selectedScope=e},enumerable:!0,configurable:!0}),e.prototype.setSlectedScope=function(){if(null!=this.$state.params.browseScope)for(var e=void 0,t=0,r=this.scopes;t<r.length;t++)if(e=r[t],e.SourceCode1==this.$state.params.browseScope){this.selectedScope=e;break}},Object.defineProperty(e.prototype,"scopes",{get:function(){return this._scopes},set:function(e){this._scopes=e},enumerable:!0,configurable:!0}),e}();c=n([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("$state")),o(2,a.Inject("restBaseURLs")),i("design:paramtypes",[Function,Object,Object])],c),r.BrowseSearchBarService=c},{"../../../appConfig/appConfigForward":484,"ng-metadata/core":362}],661:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;
if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("../nddUtils/configurationUtil.service"),s=e("../appConfig/appConfigForward"),c=e("ng-metadata/core"),l=e("../infra/sharedSessionStorage.service"),u=e("./personalization/personalizationButton/personalizeResultsButton.service"),d=e("lodash/forEach"),p=function(){function e(e,t,r,n,i,o,a,c){this.$http=e,this.restBaseURLs=t,this.configurationUtil=r,this.$translate=n,this.sharedSessionStorage=i,this.personalizeResultsButtonService=o,this.$state=a,this.$location=c,this.inst=s.getInstitutionCode(),this.vid=s.getVid(),this.disableCache=s.getDisableCacheParameters(),this.restUrl=t.pnxBaseURL,this.PAGE_SIZE=s.getResultsBulkSize()}return Object.defineProperty(e.prototype,"searchData",{get:function(){return this.dataToBeSent},enumerable:!0,configurable:!0}),e.prototype.performSearch=function(e,t){var r=this;e.mode&&"advanced"===e.mode||(e.query=e.query.split(";").join(" "));var n=this.sharedSessionStorage.getItem("personalization"),i="";this.personalizeResultsButtonService.enable&&null!==n&&n.length>0&&(i=n.split(",").join(";"));var o=e.facets||[],a={addfields:this.getAddFields(),offset:0,inst:e.overrideViewInstitution||this.inst,limit:e.bulkSize,vid:this.vid,scope:"browse"===this.$state.params.mode?"browse_search":e.scope,tab:e.tab||"default_tab",q:e.query,journals:e.journals,databases:e.databases,qInclude:o.filter(function(e){return("include"===e.type||"exact"===e.type)&&e.isMultiFacet!==!0}).map(this.facetToString).join("|,|"),qExclude:o.filter(function(e){return"exclude"===e.type&&e.isMultiFacet!==!0}).map(this.facetToString).join("|,|"),lang:this.$translate.use(),sort:e.sortby,pcAvailability:e.pcAvailability,rtaLinks:!0,disableCache:this.disableCache,getMore:e.getMore?e.getMore:0,browseParams:e.browseParams,came_from:this.$state.params.came_from,skipDelivery:e.skipDelivery||"N",mode:this.$state.params.mode},s=[],c=[];if(d(o,function(e){e.isMultiFacet===!0&&s.indexOf(e.multiFacetGroupId)==-1&&s.push(e.multiFacetGroupId)}),s.length&&(d(s,function(e){var t=[];t=o.filter(function(t){return t.isMultiFacet===!0&&t.multiFacetGroupId===e}).map(r.facetToString).join("|,|"),t.length&&c.push(t),t=[]}),c.length&&(a.multiFacets=c)),this.dataToBeSent=a,e.offset&&(a.offset=e.offset-e.offset%this.PAGE_SIZE),i){var l=this.sharedSessionStorage.getItem("recentness")?1:0;a.personalization="1,"+l+","+i}var u=this.restUrl+"?addfields="+a.addfields+"&offset="+a.offset+"&inst="+a.inst+"&limit="+a.limit+"&vid="+a.vid+"&scope="+a.scope+"&tab="+a.tab+"&q="+a.q+"&qInclude="+a.qInclude+"&qExclude="+a.qExclude+"&lang="+a.lang+"&sort="+a.sort+"&pcAvailability="+a.pcAvailability+"&rtaLinks="+a.rtaLinks+"&disableCache="+a.disableCache;return e.noConVoc&&(u+="&conVoc=false",a.conVoc="false"),this.sharedSessionStorage.setItem("suprimaSearchApiurl",u),console.log("Search for query: "+a.q+" scope: "+a.scope+" facets: "+a.qInclude+" sorted by:"+a.sort),window.appPerformance.timeStamps["search api send"]=Date.now(),this.$http.get(this.restUrl,{params:a})},e.prototype.facetToString=function(e){var t=e.isMultiFacet&&e.type?e.type:"exact",r={range:function(e){return"facet_"+e.name+","+t+",["+e.value.replace("|,|"," TO ")+"]"},exact:function(e){return"facet_"+e.name+","+t+","+e.value},default:function(e){return"facet_"+e.name+","+t+","+e.value}},n=e.displayedType;return e.displayedType&&r[e.displayedType]||(e.displayedType="default"),r[n](e)},e.prototype.getAddFields=function(){if(this.configurationUtil.getFullViewConfiguration().resultitemview)return this.configurationUtil.getFullViewConfiguration().resultitemview.map(this.parseAddFields).join(",")},e.prototype.parseAddFields=function(e){return e.items},e}();p=n([c.Injectable(),o(0,c.Inject("$http")),o(1,c.Inject("restBaseURLs")),o(3,c.Inject("$translate")),o(6,c.Inject("$state")),o(7,c.Inject("$location")),i("design:paramtypes",[Function,Object,a.ConfigurationUtil,Function,l.SharedSessionStorage,u.PersonalizeResultsButtonService,Object,Object])],p),r.Cheetah=p},{"../appConfig/appConfigForward":484,"../infra/sharedSessionStorage.service":569,"../nddUtils/configurationUtil.service":596,"./personalization/personalizationButton/personalizeResultsButton.service":772,"lodash/forEach":253,"ng-metadata/core":362}],662:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./citationTrailsIndication.directive"),a=e("./citationTrailsBreadcrumbs.service"),s=e("./citationTrailsItem.directive"),c=e("../fullView/fullViewPage/fullViewPage.service"),l=e("../fullView/fullViewDialog.service"),u=e("./citationTrailsIndicationContainer.directive"),d=e("./citationTrailsFullviewLink.service");e("angular-inview");var p=e("./citationTrailsBreadcrumbs.directive"),f=e("./citationTrailsFullviewLink.directive"),h=function(){function e(){}return e}();h=n([i.NgModule({declarations:[p.PrmCitationTrailsBreadcrumbs,f.PrmCitationTrailsFullviewLink,o.PrmCitationTrailsIndication,u.PrmCitationTrailsIndicationContainer,s.PrmCitationTrailsItem],providers:[a.CitationTrailsBreadcrumbsService,d.CitationTrailsFullviewLinkService,c.FullViewPageService,l.FullViewDialogService],imports:["angular-inview"]})],h),r.CitationTrailsModule=h},{"../fullView/fullViewDialog.service":690,"../fullView/fullViewPage/fullViewPage.service":693,"./citationTrailsBreadcrumbs.directive":664,"./citationTrailsBreadcrumbs.service":665,"./citationTrailsFullviewLink.directive":666,"./citationTrailsFullviewLink.service":667,"./citationTrailsIndication.directive":668,"./citationTrailsIndicationContainer.directive":669,"./citationTrailsItem.directive":670,"angular-inview":11,"ng-metadata/core":362}],663:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("lodash/set"),c=e("lodash/find"),l=e("../../appConfig/appConfigForward"),u=function(){function e(e,t){this.$http=e,this.restBaseURLs=t}return e.prototype.updateCitationsList=function(e){var t=this,r=e.filter(this.filterNonPcReocrd).map(this.fetchFrbrGroupId);if(r.length>0){var n={frbrgroupids:r,vid:l.getVid()};return this.$http.post(this.restBaseURLs.citationTrails,n).then(function(r){return t.onSuccess(r,e)},this.onError)}},e.prototype.fetchFrbrGroupId=function(e){return e.pnx.facets.frbrgroupid&&0!==e.pnx.facets.frbrgroupid.length?e.pnx.facets.frbrgroupid[0]:null},e.prototype.onSuccess=function(e,t){var r=this;if(e.error)return void this.onError(e.error);var n=e.data.data;return t.forEach(function(e){return r.updateDoc(e,n)}),t},e.prototype.onError=function(e){console.error(e)},e.prototype.updateDoc=function(e,t){var r=this.fetchFrbrGroupId(e),n=c(t,{frbrgroupid:r});if(r&&n){var i={citing:n.citing,citedby:n.citedby};s(e,"extras.citationTrails",i)}else s(e,"extras.citationTrails",{})},e.prototype.filterNonPcReocrd=function(e){return"PC"===e.context&&e.pnx.facets.frbrgroupid&&e.pnx.facets.frbrgroupid.length>0},e}();u=n([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),i("design:paramtypes",[Function,Object])],u),r.CitationTrailsService=u,r.default=[]},{"../../appConfig/appConfigForward":484,"lodash/find":247,"lodash/set":301,"ng-metadata/core":362}],664:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./citationTrailsBreadcrumbs.service"),c=e("../../infra/dataStructures/collections/breadcrumbs/breadcrumbs.structure"),l=e("../../infra/httpRequest/http.service"),u=e("../search.fields.service"),d=e("../../appConfig/appConfigForward"),p=e("../../primoExplore/primoExploreStates.module"),f=e("../../infra/mediaQueries.service"),h=e("../../infra/lang/changeLang.service"),m=e("../../infra/widgets/alerts/alertFactory.service"),g=e("angular-material"),v=e("lodash/flatten"),y=e("lodash/clone"),b=function(){function e(e,t,r,n,i,o,a,s,c,l,u,d,f){var h=this;this.ctBreadcrumbsService=e,this.$state=t,this.httpService=r,this.searchFieldsService=n,this.$translate=i,this.mediaQueries=o,this.restBaseURLs=a,this.$timeout=s,this.$interval=c,this.$scope=l,this.$location=u,this.changeLangService=d,this.alertService=f,this.SEARCH_STATE=p.STATE_NAMES.SEARCH,this.hideArrows=!1,this._citingAlert=f.create(m.ALERT_MSG_TYPE.GENERAL),this._citingAlert.show('<span translate="citation_trail.title.citation.info"></span>'),this._citedByAlert=f.create(m.ALERT_MSG_TYPE.GENERAL),this._citedByAlert.show('<span translate="citation_trail.title.cited_by.info"></span>'),this.$timeout(function(){h.fristPageLoadCitationTrails()},0),this.showLeftArrow=!0,this.showRightArrow=!0,this.offseterElem=angular.element(document.querySelector(".horizontal-content-scroller"))[0],this.containerElem=angular.element(document.querySelector(".horizontal-content-scroller"))[0],n.searchParams.query?this.savedSearchParams=y(n.searchParams):this.savedSearchParams={vid:this.$state.params.vid,query:this.$state.params.query,search_scope:this.$state.params.search_scope,tab:this.$state.params.tab},this.$scope.$on("addCitationEvent",function(e,t){h.onAddCitationEvent(e,t)})}return Object.defineProperty(e.prototype,"citedByAlert",{get:function(){return this._citedByAlert},set:function(e){this._citedByAlert=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"citingAlert",{get:function(){return this._citingAlert},set:function(e){this._citingAlert=e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.updateCtSession(),this.setActiveLevel(this.$state.params.active),this.refreshSeedsInfo(this.$state.params)},e.prototype.onAddCitationEvent=function(e,t){var r=this;this.hideArrows=!0,this.$timeout(function(){r.hideArrows=!1},200);var n=t.params;this.refreshSeedsInfo(n),this.ctBreadcrumbsService.performCitationTrailsSearch(n).then(function(){r.fristPageLoadCitationTrails()}),this.ctBreadcrumbsService.updateURLSearchParams(n)},Object.defineProperty(e.prototype,"seedList",{get:function(){return this.ctBreadcrumbsService.seeds.asList()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"citationTraisLength",{get:function(){return this.seedList.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeSeedTypeCiting",{get:function(){return"citing"===this.seedList[this.getActiveLevel()].citeType},enumerable:!0,configurable:!0}),e.prototype.getMdListClass=function(e){return{"md-list-item-custom":e!==this.getActiveLevel(),"md-list-custom":0===e}},e.prototype.onChangeActiveSeedEvent=function(e,t){var r=this;if(this.ctBreadcrumbsService.seeds.getActiveLevel()!==t){this.setActiveLevel(t);var n=this.$location.search();n.active=t;var i=e.citeType,o=e.frbrGroupId;n.facet=i+",exact,"+o,this.ctBreadcrumbsService.updateURLSearchParams(n),n.seedInfo=null,this.refreshSeedsInfo(n),this.ctBreadcrumbsService.performCitationTrailsSearch(n).then(function(){r.fristPageLoadCitationTrails()})}},e.prototype.fristPageLoadCitationTrails=function(){this.$timeout(function(){var e=document.querySelector("#citationTrail");e&&(e.setAttribute("tabindex","-1"),e.focus(),e.setAttribute("tabindex","0"))},0)},e.prototype.getActiveLevel=function(){return this.ctBreadcrumbsService.seeds.getActiveLevel()},e.prototype.updateCtSession=function(){var e=v([this.$state.params.seed_id]);1===e.length&&(this.ctBreadcrumbsService.seeds=new c.Breadcrumbs)},e.prototype.refreshSeedsInfo=function(e){var t=this,r=e.seedInfo;if(r)this.ctBreadcrumbsService.seeds.push(r);else if(this.ctBreadcrumbsService.seeds.isEmpty()){var n={seeds:Array.isArray(e.seed_id)?[e.seed_id][0].join("|,|"):e.seed_id,inst:d.getInstitutionCode(),lang:e.lang,adaptor:e.adaptor};"suprima"===d.getBackendSystem()&&(n={seeds:Array.isArray(e.seed_id)?[e.seed_id][0].join("|,|"):e.seed_id,inst:d.getInstitutionCode(),lang:e.lang,adaptor:e.adaptor,vid:d.getVid(),search_scope:this.$state.params.search_scope}),this.httpService.call("GET",this.restBaseURLs.citationTrailsSeedsInfo,n).then(function(e){t.onSeedsInfoSuccess(e)})}},e.prototype.setActiveLevel=function(e){void 0!==e&&this.ctBreadcrumbsService.seeds.setActiveLevel(e)},e.prototype.onSeedsInfoSuccess=function(e){var t=e.seedsInfo;if(t){var r=t.map(function(e){return new S(e.citationType,e.title,e.creator.join("; "),e.frbrGroupId,e.pnxId)});this.ctBreadcrumbsService.seeds=new c.Breadcrumbs(r)}this.$state.params.active&&this.setActiveLevel(this.$state.params.active)},e.prototype.onLeftArrowClick=function(){this.smoothScrollClick("left",this.offseterElem)},e.prototype.onRightArrowClick=function(){this.smoothScrollClick("right",this.offseterElem)},e.prototype.isShowLeftArrow=function(){return"rtl"===this.changeLangService.direction?this.offseterElem.scrollLeft>50:this.offseterElem.scrollLeft>0},e.prototype.isShowRightArrow=function(){return this.getScrollRight()>0},e.prototype.getScrollRight=function(){var e=this.offseterElem.scrollWidth-this.offseterElem.scrollLeft-this.containerElem.offsetWidth;return e<15?0:e},e.prototype.easeInOutQuart=function(e,t,r,n){return e/=n/2,e<1?r/2*e*e*e*e+t:(e-=2,-r/2*(e*e*e*e-2)+t)},e.prototype.smoothScrollClick=function(e,t){var r=this,n=120;"left"===e&&(n=-n);var i=0,o=60,a=t.scrollLeft,s=this.$interval(function(){var e=r.easeInOutQuart(i,a,n,o);i++,t.scrollLeft=e,i===o&&r.$interval.cancel(s)},2)},e.prototype.isActive=function(e){return e==this.ctBreadcrumbsService.seeds.getActiveLevel()?"nui.aria.active_seed":" "},e}();b=n([a.Component({providers:[g].concat(s.default),selector:"prm-citation-trails-breadcrumbs",templateUrl:"components/search/citationTrails/citation-trails-breadcrumbs.html"}),o(1,a.Inject("$state")),o(4,a.Inject("$translate")),o(6,a.Inject("restBaseURLs")),o(7,a.Inject("$timeout")),o(8,a.Inject("$interval")),o(9,a.Inject("$scope")),o(10,a.Inject("$location")),i("design:paramtypes",[s.CitationTrailsBreadcrumbsService,Object,l.HttpService,u.SearchFieldsService,Function,f.MediaQueries,Object,Function,Function,Object,Object,h.ChangeLangService,m.AlertFactory])],b),r.PrmCitationTrailsBreadcrumbs=b;var S=function(){function e(e,t,r,n,i,o){this.citeType=e,this.title=decodeURIComponent(t),this.creator=decodeURIComponent(r),this.frbrGroupId=n,this.recordId=i,this.record=o}return e}();r.SeedData=S},{"../../appConfig/appConfigForward":484,"../../infra/dataStructures/collections/breadcrumbs/breadcrumbs.structure":536,"../../infra/httpRequest/http.service":556,"../../infra/lang/changeLang.service":561,"../../infra/mediaQueries.service":562,"../../infra/widgets/alerts/alertFactory.service":574,"../../primoExplore/primoExploreStates.module":620,"../search.fields.service":790,"./citationTrailsBreadcrumbs.service":665,"angular-material":17,"lodash/clone":236,"lodash/flatten":251,"ng-metadata/core":362}],665:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../infra/dataStructures/collections/breadcrumbs/breadcrumbs.structure"),c=e("../../primoExplore/primoExploreStates.module"),l=e("../search.service"),u=e("../../infra/annotations"),d=e("lodash/clone"),p=function(){function e(e,t,r){this.$state=e,this.$location=t,this.searchService=r,this.CITATION_TRAILS_STATE=c.STATE_NAMES.CITATION_TRAILS,this._seeds=new s.Breadcrumbs}return Object.defineProperty(e.prototype,"seeds",{get:function(){return this._seeds},set:function(e){this._seeds=e},enumerable:!0,configurable:!0}),e.prototype.performCitationTrailsSearch=function(e){return this.searchService.performCitationTrailsSearch(e.facet)},e.prototype.updateURLSearchParams=function(e){var t=d(e);t.seedInfo=null,this.$location.search(t)},e}();n([u.preventStateReload,i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],p.prototype,"updateURLSearchParams",null),p=n([a.Injectable(),o(0,a.Inject("$state")),o(1,a.Inject("$location")),i("design:paramtypes",[Object,Object,l.SearchService])],p),r.CitationTrailsBreadcrumbsService=p,r.default=[]},{"../../infra/annotations":531,"../../infra/dataStructures/collections/breadcrumbs/breadcrumbs.structure":536,"../../primoExplore/primoExploreStates.module":620,"../search.service":792,"lodash/clone":236,"ng-metadata/core":362}],666:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("./citationTrailsFullviewLink.service"),s=e("../timesCited/timesCited.service"),c=e("../../nddUtils/configurationUtil.service"),l=function(){function e(e,t,r){this.citationTrailsFullviewLinkService=e,this.timesCitedService=t,this.configurationUtil=r}return e.prototype.hasCitedby=function(){return this.citationTrailsFullviewLinkService.hasCitedby(this.record)},e.prototype.hasCiting=function(){return this.citationTrailsFullviewLinkService.hasCiting(this.record)},e.prototype.getLabel=function(){return"citing"===this.type?"nui.citation_trail.link.citing":"nui.citation_trail.link.citedin"},Object.defineProperty(e.prototype,"shouldDisplayTimesCited",{get:function(){return this.citationTrailsFullviewLinkService.shouldDisplayTimesCited()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shouldDisplayCitationTrial",{get:function(){return this.citationTrailsFullviewLinkService.shouldDisplayCitationTrial()},enumerable:!0,configurable:!0}),e}();n([o.Input(),i("design:type",String)],l.prototype,"type",void 0),n([o.Input(),i("design:type",Object)],l.prototype,"record",void 0),l=n([o.Component({selector:"prm-citation-trails-fullview-link",templateUrl:"components/search/citationTrails/citation-trails-fullview-link.html"}),i("design:paramtypes",[a.CitationTrailsFullviewLinkService,s.TimesCitedService,c.ConfigurationUtil])],l),r.PrmCitationTrailsFullviewLink=l},{"../../nddUtils/configurationUtil.service":596,"../timesCited/timesCited.service":818,"./citationTrailsFullviewLink.service":667,"ng-metadata/core":362}],667:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("../timesCited/timesCited.service"),s=e("../../nddUtils/configurationUtil.service"),c=function(){function e(e,t){this.timesCitedService=e,this.configurationUtil=t}return e.prototype.hasCitedby=function(e){return e&&e.extras&&e.extras.citationTrails&&e.extras.citationTrails.citedby&&e.extras.citationTrails.citedby.length>0},e.prototype.hasCiting=function(e){return e&&e.extras&&e.extras.citationTrails&&e.extras.citationTrails.citing&&e.extras.citationTrails.citing.length>0},e.prototype.isShowCitationTrialForSuprima=function(){return this.showCitationTrialForSuprima},e.prototype.setShowCitationTrialForSuprima=function(e){this.showCitationTrialForSuprima=e},e.prototype.shouldDisplayTimesCited=function(){return this.configurationUtil.isSuprima()?this.timesCitedService.shouldDisplayTimesCited&&this.timesCitedService.isShowTimesCitedForSuprima():this.timesCitedService.shouldDisplayTimesCited},e.prototype.shouldDisplayCitationTrial=function(){return!this.configurationUtil.isSuprima()||this.isShowCitationTrialForSuprima()},e}();c=n([o.Injectable(),i("design:paramtypes",[a.TimesCitedService,s.ConfigurationUtil])],c),r.CitationTrailsFullviewLinkService=c,r.default=[]},{"../../nddUtils/configurationUtil.service":596,"../timesCited/timesCited.service":818,"ng-metadata/core":362}],668:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./citationTrails.service"),c=e("./citationTrailsBreadcrumbs.service"),l=e("../../primoExplore/primoExploreStates.module"),u=e("../../analytics/primolytics.service"),d=e("./citationTrailsBreadcrumbs.directive"),p=e("lodash/flatten"),f=(e("angular-material"),function(){function e(e,t,r,n,i,o,a){this.citationTrailsService=e,this.$mdDialog=t,this.$stateParams=r,this.ctBreadcrumbsService=n,this.primolyticsService=i,this.$state=o,this.$rootScope=a,this.CITATION_TRAILS_STATE=l.STATE_NAMES.CITATION_TRAILS}return e.prototype.onClick=function(e,t){if("citing"===this.type?this.sendCitingBeacon():this.sendCitedbyBeacon(),e.stopPropagation(),this.$mdDialog.hide(),this.$state.current.name===this.CITATION_TRAILS_STATE){e.preventDefault();var r=this.citationsStateParams;this.$rootScope.$broadcast("addCitationEvent",{params:r})}},e.prototype.sendCitingBeacon=function(){},e.prototype.sendCitedbyBeacon=function(){},e.prototype.getLabel=function(){return"citing"===this.type?"nui.citation_trail.link.citing":"nui.citation_trail.link.citedin"},e.prototype.isCitationStatTooltip=function(){if(this.$state.current.name===this.CITATION_TRAILS_STATE)return"citing"===this.type?"nui.citation_trail.link.citing.tooltip":"nui.citation_trail.link.citedin.tooltip"},e.prototype.getIconName=function(){return"citing"===this.type?"citing":"citedBy"},Object.defineProperty(e.prototype,"citationsStateParams",{get:function(){var e="citing"===this.type?"citing":"citedby",t=this.citationTrailsService.fetchFrbrGroupId(this.record),r=this.record.pnx.control.recordid+","+e+","+t,n=this.$stateParams.seed_id?[this.$stateParams.seed_id]:[];n=p(n),n=n.slice(0,this.ctBreadcrumbsService.seeds.getActiveLevel()+1),n.push(r);var i={query:this.$stateParams.query||"any,contains,"+this.record.pnx.control.recordid[0],tab:this.$stateParams.tab,search_scope:this.$stateParams.search_scope,lang:this.$stateParams.lang,adaptor:this.$stateParams.adaptor,vid:this.$stateParams.vid,facet:e+",exact,"+t,ctType:this.type,docid:this.$stateParams.docid,seed_id:n,seedInfo:new d.SeedData(e,this.getDocTitle(),this.getDocCreator(),t,this.record.pnx.control.recordid[0],this.record)};return i},enumerable:!0,configurable:!0}),e.prototype.getDocTitle=function(){var e=this.record.pnx.display.title||this.record.pnx.display.atitle||this.record.pnx.display.btitle;return encodeURIComponent(e)},e.prototype.getDocCreator=function(){return encodeURIComponent(this.record.pnx.display.creator)},e.prototype.isfullView=function(){return this.$state.current.name===l.STATE_NAMES.FULL_DISPLAY},e.prototype.isCitationTrails=function(){return this.$state.current.name===l.STATE_NAMES.CITATION_TRAILS},e}());n([a.Input(),i("design:type",Object)],f.prototype,"record",void 0),n([a.Input(),i("design:type",String)],f.prototype,"type",void 0),n([a.Input(),i("design:type",Boolean)],f.prototype,"isFullView",void 0),n([a.Input(),i("design:type",Boolean)],f.prototype,"isOverlayFullView",void 0),n([u.beacon({p:"brief",op:"CitationsLink"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],f.prototype,"sendCitingBeacon",null),n([u.beacon({p:"brief",op:"CitedByLink"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],f.prototype,"sendCitedbyBeacon",null),f=n([a.Component({selector:"prm-citation-trails-indication",templateUrl:"components/search/citationTrails/citation-trails-indication.html"}),o(1,a.Inject("$mdDialog")),o(2,a.Inject("$stateParams")),o(5,a.Inject("$state")),o(6,a.Inject("$rootScope")),i("design:paramtypes",[s.CitationTrailsService,Object,Object,c.CitationTrailsBreadcrumbsService,u.PrimolyticsService,Object,Object])],f),r.PrmCitationTrailsIndication=f},{"../../analytics/primolytics.service":480,"../../primoExplore/primoExploreStates.module":620,"./citationTrails.service":663,"./citationTrailsBreadcrumbs.directive":664,"./citationTrailsBreadcrumbs.service":665,"angular-material":17,"lodash/flatten":251,"ng-metadata/core":362}],669:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=function(){function e(e){this.actionsIcons=e}return Object.defineProperty(e.prototype,"citedby",{get:function(){return this.record.extras.citationTrails.citedby},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"citing",{get:function(){return this.record.extras.citationTrails.citing},enumerable:!0,configurable:!0}),e}();n([a.Input(),i("design:type",Object)],s.prototype,"record",void 0),s=n([a.Component({selector:"prm-citation-trails-indication-container",templateUrl:"components/search/citationTrails/citation-trails-indication-container.html"}),o(0,a.Inject("featuredActionsIcons")),i("design:paramtypes",[Object])],s),r.PrmCitationTrailsIndicationContainer=s},{"ng-metadata/core":362}],670:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./citationTrailsBreadcrumbs.directive"),c=e("../../primoExplore/primoExploreStates.module"),l=e("./citationTrailsBreadcrumbs.service"),u=e("../fullView/fullViewDialog.service"),d=e("../fullView/fullViewPage/fullViewPage.service"),p=e("../../nddUtils/templateUtil.service"),f=e("../../infra/lang/changeLang.service"),h=function(){function e(e,t,r,n,i,o,s,l){this.$state=e,this.$stateParams=t,this.ctBreadcrumbsService=r,this.fullViewDialogService=n,this.fullViewPageService=i,this.templateUtil=o,this.changeLangService=s,this.$translate=l,this.changeActiveSeedEvent=new a.EventEmitter,this.CITATION_TRAILS_STATE=c.STATE_NAMES.CITATION_TRAILS}return e.prototype.ngOnInit=function(){var e=this;this.seed.record||(this.getItemPromise=this.fullViewPageService.getItemById(this.seed.recordId,"PC",this.$stateParams.search_scope,"primo_central_multiple_fe",!1,!1).then(function(t){e.seed.record=t.data}))},e.prototype.ngAfterViewInit=function(){"rtl"===this.changeLangService.direction?document.querySelector(".horizontal-content-scroller").scrollLeft=0:document.querySelector(".horizontal-content-scroller").scrollLeft=1e5},Object.defineProperty(e.prototype,"deepLinkPath",{get:function(){if(this.seed.record)return this.templateUtil.getFullDeepLinkAbsPath(this.seed.record)},enumerable:!0,configurable:!0}),e.prototype.openFullView=function(e){var t=this;this.seed.record?this.fullViewDialogService.openFullViewDialog(this.seed.record,e,"citationTrailsItem"):this.getItemPromise.then(function(){t.fullViewDialogService.openFullViewDialog(t.seed.record,e,"citationTrailsItem")})},e.prototype.onItemClick=function(e,t,r){return r.preventDefault(),this.isActive()?void this.openFullView(r):void this.changeActiveSeedEvent.emit({index:e})},Object.defineProperty(e.prototype,"citationType",{get:function(){return this.seed.citeType},enumerable:!0,configurable:!0}),e.prototype.isActive=function(){return this.index==this.ctBreadcrumbsService.seeds.getActiveLevel()},Object.defineProperty(e.prototype,"activeLevel",{get:function(){return this.ctBreadcrumbsService.seeds.getActiveLevel()},enumerable:!0,configurable:!0}),e.prototype.isActiveSeed=function(){return this.index==this.ctBreadcrumbsService.seeds.getActiveLevel()?"nui.citation_trail.link.active_Seed":""},e.prototype.activeCitationType=function(){return"citing"===this.citationType?this.$translate.instant("nui.citation_trail.link.citing.activeSeed"):"citedby"===this.citationType?this.$translate.instant("nui.citation_trail.link.citedin.activeSeed"):void 0},e}();n([a.Input(),i("design:type",s.SeedData)],h.prototype,"seed",void 0),n([a.Input(),i("design:type",Number)],h.prototype,"index",void 0),n([a.Input(),i("design:type",String)],h.prototype,"zOrder",void 0),n([a.Output(),i("design:type",a.EventEmitter)],h.prototype,"changeActiveSeedEvent",void 0),h=n([a.Component({
directives:[],selector:"prm-citation-trails-item",templateUrl:"components/search/citationTrails/citation-trails-item.html"}),o(0,a.Inject("$state")),o(1,a.Inject("$stateParams")),o(7,a.Inject("$translate")),i("design:paramtypes",[Object,Object,l.CitationTrailsBreadcrumbsService,u.FullViewDialogService,d.FullViewPageService,p.TemplateUtil,f.ChangeLangService,Function])],h),r.PrmCitationTrailsItem=h},{"../../infra/lang/changeLang.service":561,"../../nddUtils/templateUtil.service":609,"../../primoExplore/primoExploreStates.module":620,"../fullView/fullViewDialog.service":690,"../fullView/fullViewPage/fullViewPage.service":693,"./citationTrailsBreadcrumbs.directive":664,"./citationTrailsBreadcrumbs.service":665,"ng-metadata/core":362}],671:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./controlledVocabulary.service"),c=e("../../nddUtils/configurationUtil.service"),l=e("../../primoExplore/primoExploreStates.module"),u=function(){function e(e,t,r){this.controlledVocabularyService=e,this.$state=t,this.configurationUtil=r}return Object.defineProperty(e.prototype,"stateParams",{get:function(){return this.controlledVocabularyService.getStateParams()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"STATE",{get:function(){return this.configurationUtil.isSuprima()&&this.$state.current.name===l.STATE_NAMES.JOURNAL_SEARCH?l.STATE_NAMES.JOURNAL_SEARCH:l.STATE_NAMES.SEARCH},enumerable:!0,configurable:!0}),e.prototype.getEquivalentTerm=function(){return{equivalentTerm:'"<span class="bold-text text-italic">'+this.equivalentTerm+'</span>"'}},e.prototype.getOriginalQuery=function(){var e=this.query.split(",AND")[0];return{query:'<span class="bold-text text-italic">'+e+"</span>"}},e}();n([a.Input(),i("design:type",String)],u.prototype,"equivalentTerm",void 0),n([a.Input(),i("design:type",String)],u.prototype,"query",void 0),u=n([a.Component({providers:[],selector:"prm-controlled-vocabulary",templateUrl:"components/search/controlledVocabulary/controlled-vocabulary.html"}),o(1,a.Inject("$state")),i("design:paramtypes",[s.ControlledVocabularyService,Object,c.ConfigurationUtil])],u),r.ControlledVocabulary=u},{"../../nddUtils/configurationUtil.service":596,"../../primoExplore/primoExploreStates.module":620,"./controlledVocabulary.service":673,"ng-metadata/core":362}],672:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./controlledVocabulary.directive"),a=e("./controlledVocabulary.service"),s=function(){function e(){}return e}();s=n([i.NgModule({declarations:[o.ControlledVocabulary],providers:[a.ControlledVocabularyService],imports:[]})],s),r.ControlledVocabularyModule=s},{"./controlledVocabulary.directive":671,"./controlledVocabulary.service":673,"ng-metadata/core":362}],673:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("lodash/clone"),c=function(){function e(e){this.$location=e}return e.prototype.getStateParams=function(){var e=s(this.$location.search());return e.facet=null,e.conVoc="false",e},e}();c=n([a.Injectable(),o(0,a.Inject("$location")),i("design:paramtypes",[Object])],c),r.ControlledVocabularyService=c},{"lodash/clone":236,"ng-metadata/core":362}],674:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=(e("angular-material"),e("ng-metadata/core")),s=e("./didUMean.service"),c=e("../../primoExplore/primoExploreStates.module"),l=e("../../nddUtils/configurationUtil.service"),u=function(){function e(e,t,r,n){var i=this;this.didUmeanService=e,this.$translate=t,this.$state=r,this.configurationUtil=n,t("results.didumean").then(function(e){i.message=e})}return Object.defineProperty(e.prototype,"stateParams",{get:function(){return this.didUmeanService.getStateParams(this.didUMean)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"STATE",{get:function(){return this.configurationUtil.isSuprima()&&this.$state.current.name===c.STATE_NAMES.JOURNAL_SEARCH?c.STATE_NAMES.JOURNAL_SEARCH:c.STATE_NAMES.SEARCH},enumerable:!0,configurable:!0}),e}();n([a.Input(),i("design:type",String)],u.prototype,"didUMean",void 0),u=n([a.Component({providers:[s.DidUMeanService],selector:"prm-did-u-mean",templateUrl:"components/search/didUMean/did-u-mean.html"}),o(1,a.Inject("$translate")),o(2,a.Inject("$state")),i("design:paramtypes",[s.DidUMeanService,Function,Object,l.ConfigurationUtil])],u),r.PrmDidUMean=u},{"../../nddUtils/configurationUtil.service":596,"../../primoExplore/primoExploreStates.module":620,"./didUMean.service":676,"angular-material":17,"ng-metadata/core":362}],675:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./didUMean.directive"),a=function(){function e(){}return e}();a=n([i.NgModule({declarations:[o.PrmDidUMean],providers:[],imports:[]})],a),r.DidUMeanModule=a},{"./didUMean.directive":674,"ng-metadata/core":362}],676:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("lodash/clone"),c=function(){function e(e){this.$location=e,this.y="david"}return e.prototype.getStateParams=function(e){var t=s(this.$location.search());return t.facet=null,t.mode=null,t.query="any,contains,"+e,t},e}();c=n([a.Injectable(),o(0,a.Inject("$location")),i("design:paramtypes",[Object])],c),r.DidUMeanService=c},{"lodash/clone":236,"ng-metadata/core":362}],677:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("lodash/isEmpty"),s=e("ng-metadata/core"),c=e("../../primoExplore/primoExploreStates.module"),l=e("./facet.service"),u=e("../search.service"),d=e("../../analytics/primolytics.service"),p=e("../../infra/mediaQueries.service"),f=e("../personalization/personalizationButton/personalizeResultsButton.service"),h=e("../../infra/sharedSessionStorage.service"),m=e("../../journals/journals.service"),g=e("../../security/jwtUtil.service"),v=e("../../journals/databases.service"),y=e("lodash/forEach"),b=function(){function e(e,t,r,n,i,o,a,c,l,u,d,p,f,h,m){var g=this;this.$mdSidenav=e,this.searchService=t,this.facetService=r,this.$timeout=n,this.primolyticsService=i,this.mediaQueries=o,this.$state=a,this.$stateParams=c,this.$location=l,this.personalizeResultsButtonService=u,this.sharedSessionStorage=d,this.jwtUtilService=p,this.journalsService=f,this.databasesService=h,this.$scope=m,this._showUIBlocker=!1,this.closeMobileFacetEvent=new s.EventEmitter,this.facetInclude={},this.facetExclude={},this.facetService.multiResults=[],this.facetService.activeMultipleFacets=!1,this.facetService.activeRangeMultiFacet=!1,this.setShowPcAvailability(),this.pcAvailability="true"===c.pcAvailability||!1,this.$scope.$watch(function(){return g.searchInProgress},function(e){e?g._showUIBlocker=!0:g.$timeout(function(){g._showUIBlocker=!1},0)})}return Object.defineProperty(e.prototype,"searchInProgress",{get:function(){return this.searchService.isSearchInProgress()},enumerable:!0,configurable:!0}),e.prototype.notLocal=function(){return!this.searchService.IsScopeLocal()},Object.defineProperty(e.prototype,"facets",{get:function(){return this.facetService.getResults()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resultsExists",{get:function(){return!a(this.searchService.getResultObject().info)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalResults",{get:function(){return this.resultsExists?this.searchService.getResultObject().info.total:0},enumerable:!0,configurable:!0}),e.prototype.isFiltered=function(){var e=this.searchService.getSearchObject();return!!e.facets&&e.facets.length>0},Object.defineProperty(e.prototype,"sortby",{get:function(){return this.searchService.getSearchObject().sortby},set:function(e){this.searchService.getSearchObject().sortby=e},enumerable:!0,configurable:!0}),e.prototype.toggleAllFacets=function(){this.$mdSidenav("facets-sidenav-right").toggle()},e.prototype.changePcAvailability=function(){var e=this.pcAvailability?"true":"false";this.$location.search("pcAvailability",e)},e.prototype.setShowPcAvailability=function(){var e=this.$stateParams.search_scope;this.showPcAvailability=this.facetService.showPcAvailabilityForScope(e)},Object.defineProperty(e.prototype,"showPcAvailability",{get:function(){return this._showPcAvailability},set:function(e){this._showPcAvailability=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pcAvailability",{get:function(){return this.facetService.pcAvailability},set:function(e){this.facetService.pcAvailability=e},enumerable:!0,configurable:!0}),e.prototype.showFacetSection=function(){if(this.$stateParams.journals||this.$stateParams.databases){var e=this.$stateParams.journals||this.$stateParams.databases;return"letter"!=e.split(",")[0]}return!0},e.prototype.isShowFetchMoreResultButton=function(){var e=this.searchService.getResultObject().info;return this.resultsExists&&e.total<e.maxTotal},e.prototype.fetchMoreResults=function(){var e=this.searchService.getSearchObject();e.getMore=1,e.offset=0,this.searchService.search(e,!0)},Object.defineProperty(e.prototype,"isBrowseMode",{get:function(){return"browse"===this.$stateParams.mode},enumerable:!0,configurable:!0}),e.prototype.personalizationToggled=function(){return this.personalizeResultsButtonService.personalizationToggled()},e.prototype.getPersonalization=function(){return this.sharedSessionStorage.getItem("personalization").split(";")},e.prototype.removeDiscipline=function(e){var t=this.sharedSessionStorage.getItem("personalization").split(";"),r=t.indexOf(e);r>-1&&(t.splice(r,1),t.length>0?this.sharedSessionStorage.setItem("personalization",t.join(";")):(this.sharedSessionStorage.removeItem("personalization"),this.sharedSessionStorage.removeItem("recentness"),this.sharedSessionStorage.removeItem("enable_personalization"),this.personalizeResultsButtonService.enable=!1,this.personalizeResultsButtonService.recentness=!1),this.personalizeResultsButtonService.addCameFromPersonalizationParam(),this.$state.go(c.STATE_NAMES.SEARCH,this.personalizeResultsButtonService.searchParams,{reload:!0}),this.isSignedIn()&&this.personalizeResultsButtonService.setUserPersonalizationPreferencesToDB(this.$stateParams.vid))},Object.defineProperty(e.prototype,"recentness",{get:function(){return this.personalizeResultsButtonService.recentness},set:function(e){this.sharedSessionStorage.setItem("recentness",e),this.personalizeResultsButtonService.recentness=e,this.isSignedIn()&&this.personalizeResultsButtonService.setUserPersonalizationPreferencesToDB(this.$stateParams.vid),this.personalizeResultsButtonService.addCameFromPersonalizationParam(),this.$state.go(c.STATE_NAMES.SEARCH,this.personalizeResultsButtonService.searchParams,{reload:!0})},enumerable:!0,configurable:!0}),e.prototype.isSignedIn=function(){return"GUEST"!=this.jwtUtilService.getDecodedToken().userGroup},e.prototype.edit=function(){this.personalizeResultsButtonService.editPressed=!0,this.personalizeResultsButtonService.cancelPressed=!1,this.closeMobileFacetEvent.emit()},e.prototype.showPersonalizationSection=function(){return!this.journalsService.isJournalSearch()&&!this.databasesService.isDBSearch()&&this.$state.current.name!==c.STATE_NAMES.CITATION_TRAILS&&"browse"!==this.$stateParams.mode},Object.defineProperty(e.prototype,"activeMultipleFacets",{get:function(){return this.detectMobile()?1:this.facetService.totalMultipleResults()},enumerable:!0,configurable:!0}),e.prototype.clearMultiFacets=function(){this.facetService.clearMultiFacets()},e.prototype.applyMultiFacets=function(){var e=this;this.facetService.applyMultiFacets();var t=1;y(this.facetService.multiResults,function(r){r.operation="add",t||(r.ignoreInActions=1),e.beaconForMultiFacets(r),t=0})},e.prototype.beaconForMultiFacets=function(e){},e.prototype.detectMobile=function(){return!(!this.mediaQueries.xs&&!this.mediaQueries.sm)},Object.defineProperty(e.prototype,"showUIBlocker",{get:function(){return this._showUIBlocker},enumerable:!0,configurable:!0}),e}();n([s.Output(),i("design:type",Object)],b.prototype,"closeMobileFacetEvent",void 0),n([d.beacon({p:"refine",op:"expandResults"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],b.prototype,"changePcAvailability",null),n([d.beacon({p:"personalizedResults",op:"updated"}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],b.prototype,"removeDiscipline",null),n([d.beacon({p:"personalizedResults",op:"updated"}),i("design:type",Object),i("design:paramtypes",[Object])],b.prototype,"recentness",null),n([d.beacon({p:"refine"}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],b.prototype,"beaconForMultiFacets",null),b=n([s.Component({selector:"prm-facet",templateUrl:"components/search/facet/facet.html"}),o(0,s.Inject("$mdSidenav")),o(3,s.Inject("$timeout")),o(6,s.Inject("$state")),o(7,s.Inject("$stateParams")),o(8,s.Inject("$location")),o(14,s.Inject("$scope")),i("design:paramtypes",[Function,u.SearchService,l.FacetService,Function,d.PrimolyticsService,p.MediaQueries,Object,Object,Object,f.PersonalizeResultsButtonService,h.SharedSessionStorage,g.JwtUtilService,m.JournalsService,v.DatabasesService,Object])],b),r.PrmFacet=b},{"../../analytics/primolytics.service":480,"../../infra/mediaQueries.service":562,"../../infra/sharedSessionStorage.service":569,"../../journals/databases.service":584,"../../journals/journals.service":588,"../../primoExplore/primoExploreStates.module":620,"../../security/jwtUtil.service":842,"../personalization/personalizationButton/personalizeResultsButton.service":772,"../search.service":792,"./facet.service":679,"lodash/forEach":253,"lodash/isEmpty":268,"ng-metadata/core":362}],678:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./facet.service"),a=e("./facetExact/facetExact.directive"),s=e("./facetRange/facetRange.directive"),c=e("./facetGroup.directive"),l=e("./facet.directive"),u=e("../breadcrumbs/breadcrumbs.directive"),d=function(){function e(){}return e}();d=n([i.NgModule({declarations:[u.PrmBreadcrumbs,l.PrmFacet,a.PrmFacetExact,c.PrmFacetGroup,s.PrmFacetRange],providers:[o.FacetService],imports:[]})],d),r.FacetModule=d},{"../breadcrumbs/breadcrumbs.directive":649,"./facet.directive":677,"./facet.service":679,"./facetExact/facetExact.directive":680,"./facetGroup.directive":681,"./facetRange/facetRange.directive":682,"ng-metadata/core":362}],679:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../nddUtils/configurationUtil.service"),c=e("../searchState.service"),l=e("../search.fields.service"),u=e("../../primoExplore/primoExploreStates.module"),d=e("../../infra/sharedSessionStorage.service"),p=e("../../security/userSessionManager.service"),f=e("angular"),h=e("lodash/flatten"),m=e("lodash/remove"),g=(e("he"),e("lodash/memoize")),v=e("lodash/some"),y=e("lodash/forEach"),b=e("lodash/findIndex"),S=e("lodash/sortBy"),_=(e("lodash/pullAllWith"),e("lodash/isEqual"),e("lodash/isEmpty")),w=e("lodash/cloneDeep"),E=e("lodash/get"),T=function(){function e(e,t,r,n,i,o,a,s,c,l){var u=this;this.configurationUtil=e,this.searchStateService=t,this.searchFieldsService=r,this.$location=n,this.$translate=i,this.$state=o,this.$stateParams=a,this.$q=s,this.sharedSessionStorageService=c,this.userSessionManager=l,this.activeMultipleFacets=!1,this.activeRangeMultiFacet=!1,this._pcAvailability=!1,this.stickyFacetsStorageKey="stickyFacets",this.origLimits=[-1500,-1e3,-500,1,500,1e3,1500,1600,1700,1800,1900,1910,1920,1930,1940,1950],this.bundlePrefix={lang:"lang.",rtype:"facets.facet.facet_rtype.",frbrgroupid:"facets.facet.facet_frbrgroupid",tlevel:"facets.facet.tlevel.",newrecords:"facets.facet.facet_newrecords.",domain:"",library:"",other_libraries:""},this.showPcAvailabilityForScope=g(function(e){var t=window.appConfig["primo-view"]["pc-availability-tab-scopes-map"];return v(Object.keys(t),function(r){return"AVAILABLE_ONLY"===t[r][e]})}),this.results=[],this._displayedTypeFacet={creationdate:"range",searchcreationdate:"range"},this.sortBy={alpha_numeric:function(e){var t=e.value.indexOf(".")>-1?e.value:i.instant(u.facetLabel(e));return t.toLowerCase()},by_size:function(e){return-1*parseInt(e.count)},by_number:function(e){return parseInt(e.value,0)}};var d=this;this.additionalData={range:function(e,t,r){return e=S(e,d.sortBy.by_number),t=t?parseInt(t):parseInt(u.normalizeMinYear(e[0].value),0),r=r?parseInt(r):parseInt(e[e.length-1].value,0),{min:t,max:r,selectedMin:t,selectedMax:r,step:1}}},"suprima"===this.configurationUtil.getBackendSystem()&&(this.bundlePrefix.library="facets.facet.facet_library.",this.bundlePrefix.location_code="facets.facet.facet_location_code.",this.bundlePrefix.other_libraries=this.bundlePrefix.library),this._facetLabelsMap={},this.facetViews=this.configurationUtil.getFacetConfiguration().facetview,this.addFacetViewForInstitutionLibraries(),this.viewInstitutionLibraries=Object.keys(this.configurationUtil.getViewInstitutionLibraries())}return e.prototype.addFacetViewForInstitutionLibraries=function(){var e=b(this.facetViews,function(e){return"facet_library"===e.id&&e.instsort});if(e>-1){var t=w(this.facetViews[e]);t.instsort=!1,t.otherInstitutions=!0,this.facetViews.splice(e+1,0,t)}},e.prototype.facetSearch=function(e){var t=this.$stateParams;t.facet||(t.facet=[]),t.facet=h([t.facet]),t.mfacet||(t.mfacet=[]),t.mfacet=h([t.mfacet]);var r=t.mfacet;e.sortby&&(t.sortby=e.sortby),e.removeAll&&(b(t.facet,function(e){return e.indexOf("frbrgroupid")!==-1})!==-1?t=this.restorePrevSearchParams(t):(t.facet=[],t.mfacet=[],t.offset=0)),e.facet&&e.remove&&(e.facet.indexOf("frbrgroupid")!==-1?t=this.restorePrevSearchParams(t):(t.facet=m(t.facet,function(t){return t!==e.facet}),t.mfacet=m(r,function(t){return t.slice(0,-2)!==e.facet}),t.offset=0));var n=!1;return e.facet&&!e.remove&&(t.offset=0,e.facet.indexOf("frbrgroupid")!==-1?(t.facet=[e.facet],t.mfacet=[],n=!0):t.facet.push(e.facet)),!n&&e.mfacets&&y(e.mfacets,function(e){t.mfacet.push(e)}),!t.query&&t.docid&&(t.query="any,contains,"+t.docid),e.came_from&&(t.came_from=e.came_from),this.$state.go(this.facetSearchState(),t,{reload:this.facetSearchState()})},e.prototype.frbrSearch=function(e,t){this.backupPreFrbrSearchParams(t),e.sortby=this.configurationUtil.getBriefResultConfiguration().frbrsortby,this.facetSearch(e)},e.prototype.backupPreFrbrSearchParams=function(e){this.searchFieldsService.prevSortBy=this.searchFieldsService.sortby,this.searchFieldsService.prevOffset=e?e-1:0,this.searchFieldsService.prevFacets=this.$stateParams.facet?this.$stateParams.facet:[],this.searchFieldsService.prevMFacets=this.$stateParams.mfacet?this.$stateParams.mfacet:[]},e.prototype.restorePrevSearchParams=function(e){return e.sortby=this.searchFieldsService.prevSortBy?this.searchFieldsService.prevSortBy:"rank",e.offset=this.searchFieldsService.prevOffset?this.searchFieldsService.prevOffset:0,e.facet=this.searchFieldsService.prevFacets?this.searchFieldsService.prevFacets:[],e.mfacet=this.searchFieldsService.prevMFacets?this.searchFieldsService.prevMFacets:[],e},e.prototype.getResults=function(){return this.results},e.prototype.setResult=function(e){var t=this;this._facetLabelsMap={},this.userSessionManager.userDetailsDeferred.promise.then(function(r){var n=Object.keys(E(r,"data.userInstitutionLibraries",{}));t.results=t.parseResults(e,n)})},e.prototype.toggleMultiFacet=function(e){var t=this.multiResults.indexOf(e);t>-1?(this.multiResults.splice(t,1),e.checked=!1):(e.facetType=e.facetType?e.facetType:"include",this.multiResults.push(e),e.checked=!0),this.totalMultipleResults?this.activeMultipleFacets=!0:this.activeMultipleFacets=!1},e.prototype.toggleMultiRangeFacet=function(e){var t=!this.activeRangeMultiFacet;if(this.activeRangeMultiFacet=t,t){var r={name:"searchcreationdate",facetType:"include",value:e,checked:!0};this.multiResults.push(r)}else for(var n=0;n<this.multiResults.length;n++)if("searchcreationdate"===this.multiResults[n].name){this.multiResults.splice(n,1);break}this.totalMultipleResults?this.activeMultipleFacets=!0:this.activeMultipleFacets=!1},e.prototype.replaceMultiRangeFacet=function(e){for(var t=0;t<this.multiResults.length;t++)if("searchcreationdate"===this.multiResults[t].name){this.multiResults[t].value=e;break}},e.prototype.totalMultipleResults=function(){return this.multiResults.length},e.prototype.toggleIncludeExclude=function(e){if(this.excludeIncludeUtil(e),this.activeMultipleFacets)e.checked||this.toggleMultiFacet(e);else{var t=e.facetType?e.facetType:"include",r=e.name+","+t+","+e.value;this.facetSearch({facet:r})}},e.prototype.excludeIncludeUtil=function(e){e.facetType&&"exclude"===e.facetType?e.facetType="include":e.facetType="exclude"},e.prototype.clearMultiFacets=function(){y(this.multiResults,function(e){e.checked&&(e.checked=!1,e.facetType="include")}),this.multiResults=[],this.activeMultipleFacets=!1,this.activeRangeMultiFacet=!1},e.prototype.applyMultiFacets=function(){if(this.totalMultipleResults()){var e=this.$stateParams,t=e.mfacet;t&&(t=h([t]));var r=[];y(t,function(e){var t=e.split(",");if(t.length>=4){var n=parseInt(t[t.length-1],10);n&&n.toString().length<=2&&r.indexOf(n)===-1&&r.push(n)}});var n=1,i=!1;if(r.length)for(;n<100&&!i;)r.indexOf(n)===-1?i=!0:n++;var o=[];y(this.multiResults,function(e){var t=e.name+","+e.facetType+","+e.value+","+n;o.push(t)}),this.facetSearch({mfacets:o})}},e.prototype.filterEmpty=function(e){return e.name},e.prototype.parseItem=function(e,t,r,n,i){var o=e.filter(function(e){return e.name===t.id.replace("facet_","")});if(0===o.length)return{};var a=o[0],s=a.values,c=a.name;"library"===a.name&&(s=this.filterLibraryValuesByInstitution(s,t.instsort,t.otherInstitutions,t.viewinstsort,i),t.instsort&&(c="library_myinstitution"),t.otherInstitutions&&(c="library_otherinstitution"));var l=f.bind(this,this.convertFacet,a.name);s=s.map(l);var u=f.isObject(t.sort)?t.sort._string:t.sort;this.sortBy[u]&&(s=S(s,this.sortBy[u]));var d={name:c,limitCount:t.count,values:s,additionalData:this.additionalData[this._displayedTypeFacet[a.name]]?this.additionalData[this._displayedTypeFacet[a.name]](s,r,n):{},displayedType:this._displayedTypeFacet[a.name]?this._displayedTypeFacet[a.name]:"exact",displayedCount:t.count>0?t.count:s.length,facetGroupCollapsed:0===t.count};return t.instsort&&(d.labelParam=this.$translate.instant(this.userSessionManager.getUserInstitutionCode())),d},e.prototype.filterLibraryValuesByInstitution=function(e,t,r,n,i){var o=this;return e.filter(function(e){return t?i.indexOf(e.value)>-1:r?i.indexOf(e.value)===-1:!n||o.viewInstitutionLibraries.indexOf(e.value)>-1})},e.prototype.parseResults=function(e,t){var r=this,n=this.searchStateService.getSearchObject().facets,i=void 0,o=void 0;return y(n,function(e){if("searchcreationdate"===e.name&&e.value){var t=e.value.split("|,|"),r=e.minValue,n=e.maxValue;t&&2===t.length&&(r=t[0],n=t[1]),(!i||i<r)&&(i=r),(!o||o>n)&&(o=n)}}),this.facetViews.map(function(n,a,s){return r.parseItem(e,n,i,o,t)}).filter(this.filterEmpty)},e.prototype.convertFacet=function(e,t){var r={name:e,value:t.value,count:t.count,maxCount:t.maxCount,label:t.label};if(t.label){var n=this._facetLabelsMap[e];n||(n={},this._facetLabelsMap[e]=n),n[t.value]=t.label}return r},e.prototype.isFacetExists=function(e,t){return e.filter(function(e){return t.value===e.value}).length>0},Object.defineProperty(e.prototype,"displayedTypeFacet",{get:function(){return this._displayedTypeFacet},enumerable:!0,configurable:!0}),e.prototype.getRangeFacetValue=function(e,t){return e+"|,|"+t},e.prototype.getFacetLabel=function(e,t,r){return"frbrgroupid"===e?e:"range"===t?this.getRangeFacetLabelFromValue(r):r},e.prototype.getRangeFacetLabelFromValue=function(e){var t=e.split("|,|");return"Years: "+t[0]+"-"+t[1]},e.prototype.normalizeMinYear=function(e){var t=this.getIndex(parseInt(e,10));return t>0?this.origLimits[t-1]:e},e.prototype.getIndex=function(e){for(var t=0;t<this.origLimits.length;t++)if(e<=this.origLimits[t])return t;return-1},Object.defineProperty(e.prototype,"pcAvailability",{get:function(){return this._pcAvailability},set:function(e){this._pcAvailability=e},enumerable:!0,configurable:!0}),e.prototype.facetSearchState=function(){return this.$state.current.name===u.STATE_NAMES.FULL_DISPLAY||this.$state.current.name===u.STATE_NAMES.CITATION_TRAILS?u.STATE_NAMES.SEARCH:this.$state.current.name},e.prototype.facetLabel=function(e){var t=this.getFacetLabelValue(e.name,e.value);if(t)return t;var r=this.bundlePrefix[e.name];f.isDefined(r)||(r="facets.facet.facet_"+e.name+".");var n="tlevel"!==e.name?e.displayValue||e.value:e.value;return n.endsWith(".")&&(n=n.slice(0,-1)),"frbrgroupid"!==e.name?r+n:r},e.prototype.getFacetDefaultValue=function(e){return"range"===this.displayedTypeFacet[e.name]?this.getRangeFacetLabelFromValue(e.displayValue):e.displayValue||e.value},e.prototype.addStickyFacet=function(e){e.persistent=!0,e.operation="add";var t=this.getStickyFacets();t.unshift(e),this.sharedSessionStorageService.setItem(this.stickyFacetsStorageKey,JSON.stringify(t))},e.prototype.removeStickyFacet=function(e){e.persistent=!1;var t=this.getStickyFacets(),r=this;m(t,function(t){return r.isFacetEqual(t,e)}),this.sharedSessionStorageService.setItem(this.stickyFacetsStorageKey,JSON.stringify(t))},e.prototype.getStickyFacets=function(){if(this.isFrbrSearch())return[];var e,t=this.sharedSessionStorageService.getItem(this.stickyFacetsStorageKey);return e=_(t)?[]:JSON.parse(t)},e.prototype.isFrbrSearch=function(){var e=this.$stateParams.facet;if(void 0!==e&&e&&(e=h([e]),!e.includes(void 0)))for(var t=0;t<e.length;t++)if(e[t].indexOf("frbrgroupid")!==-1)return!0;return!1},e.prototype.isFacetEqual=function(e,t){return!_(e)&&!_(t)&&(e.type==t.type&&e.name==t.name&&e.value==t.value)},Object.defineProperty(e.prototype,"facetLabelsMap",{get:function(){return this._facetLabelsMap},enumerable:!0,configurable:!0}),e.prototype.getFacetLabelValue=function(e,t){if(this._facetLabelsMap[e])return this._facetLabelsMap[e][t]},e}();T=n([a.Injectable(),o(3,a.Inject("$location")),o(4,a.Inject("$translate")),o(5,a.Inject("$state")),o(6,a.Inject("$stateParams")),o(7,a.Inject("$q")),i("design:paramtypes",[s.ConfigurationUtil,c.SearchStateService,l.SearchFieldsService,Object,Function,Object,Object,Function,d.SharedSessionStorage,p.UserSessionManagerService])],T),r.FacetService=T},{"../../infra/sharedSessionStorage.service":569,"../../nddUtils/configurationUtil.service":596,"../../primoExplore/primoExploreStates.module":620,"../../security/userSessionManager.service":853,"../search.fields.service":790,"../searchState.service":814,angular:"angular",he:32,"lodash/cloneDeep":237,"lodash/findIndex":248,"lodash/flatten":251,"lodash/forEach":253,"lodash/get":255,"lodash/isEmpty":268,"lodash/isEqual":269,"lodash/memoize":286,"lodash/pullAllWith":297,"lodash/remove":299,"lodash/some":303,"lodash/sortBy":304,"ng-metadata/core":362}],680:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){
return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../analytics/primolytics.service"),c=e("../facet.service"),l=e("../../../nddUtils/configurationUtil.service"),u=e("../../../nddUtils/smoothScrollUtil.service"),d=e("../../../nddUtils/filterInstitution.service"),p=e("../../search.service"),f=e("../../../nddUtils/filterLanguage.service"),h=(e("lodash/map"),e("lodash/replace"),e("angular"),function(){function e(e,t,r,n,i,o,a,s,c,l,u){var d=this;this.configurationUtil=e,this.facetService=t,this.primolyticsService=r,this.$filter=n,this.$timeout=i,this.$translate=o,this.facetsIcons=a,this.filterInstitution=s,this.smoothScrollUtil=c,this.searchService=l,this.filterLanguage=u,this.$translate("facets.facet.facet_"+this.facetGroup.name).then(function(e){e?d._facetGroupHeader=e:d._facetGroupHeader=d.facetGroup.name})}return Object.defineProperty(e.prototype,"isCollapsed",{get:function(){return this.facetGroup.facetGroupCollapsed},set:function(e){this.facetGroup.facetGroupCollapsed=e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.addFacet=function(e,t,r,n,i,o,a,s){var c=e+","+n+","+r;this.facetService.facetSearch({facet:c})},e.prototype.isShowMore=function(e){return!!e&&(e.limitCount>0&&e.displayedCount<e.values.length)},e.prototype.toggleFacet=function(){this.isCollapsed=!this.isCollapsed},e.prototype.facetStatus=function(){var e=this.facetGroup.facetGroupCollapsed?"nui.facets.collapse":"nui.aria.facets.expand";return this.$translate.instant(e)},e.prototype.toggleMoreFacets=function(e,t){if(void 0===t&&(t=0),e.displayedCount=e.displayedCount===e.limitCount?e.values.length:e.limitCount,t){var r=function(){var t=document.getElementsByClassName("facet-element-marker-"+e.name);if(t.length>e.limitCount){var r=t[e.limitCount];this.smoothScrollUtil.elementFocus(r),this.smoothScrollUtil.elementFocus(r)}};this.$timeout(r.bind(this),300)}},e.prototype.getFacetGroupValues=function(){return this.filterInstitution.filterAndNormalizeDataFacets(this.facetGroup.values)},e.prototype.facetLabel=function(e){return this.facetService.facetLabel(e)},e.prototype.getCountsummary=function(e){if(!e.maxCount)return this.$filter("number")(e.count);var t={idx_0:this.$filter("number")(e.count),idx_1:this.$filter("number")(e.maxCount)},r=this.$translate.instant("nui.facets.remote.collection",t);return r},e.prototype.isShowCount=function(e){return"suprima"!==this.configurationUtil.getBackendSystem()||"tlevel"!==e.name},Object.defineProperty(e.prototype,"facetGroupHeader",{get:function(){return this._facetGroupHeader},enumerable:!0,configurable:!0}),e.prototype.toggleMultiFacet=function(e){this.facetService.toggleMultiFacet(e)},e.prototype.toggleIncludeExclude=function(e){this.facetService.toggleIncludeExclude(e)},e.prototype.containLegalFacetByLang=function(e){return!!this.checkLang(e.displayValue||e.value)&&!!this.checkLang(this.facetLabel(e))},e.prototype.checkLang=function(e){return this.filterLanguage.checkLang(e)},e.prototype.removeNotRelevantChars=function(e){return this.filterLanguage.removeNotRelevantChars(e)},e.prototype.ariaLabelForFacet=function(e){return"exclude"===e?this.$translate.instant("nui.facets.exclude.tooltip"):this.$translate.instant("nui.facets.include.tooltip")},e}());n([a.Input(),i("design:type",Object)],h.prototype,"facetGroup",void 0),n([s.beacon({p:"refine"}),i("design:type",Function),i("design:paramtypes",[Object,Object,Object,Object,Object,Object,Object,Object]),i("design:returntype",void 0)],h.prototype,"addFacet",null),h=n([a.Component({selector:"prm-facet-exact",templateUrl:"components/search/facet/facetExact/facet-exact.html"}),o(3,a.Inject("$filter")),o(4,a.Inject("$timeout")),o(5,a.Inject("$translate")),o(6,a.Inject("facetsIcons")),i("design:paramtypes",[l.ConfigurationUtil,c.FacetService,s.PrimolyticsService,Function,Function,Function,Object,d.FilterInstitution,u.SmoothScrollUtil,p.SearchService,f.FilterLanguage])],h),r.PrmFacetExact=h},{"../../../analytics/primolytics.service":480,"../../../nddUtils/configurationUtil.service":596,"../../../nddUtils/filterInstitution.service":599,"../../../nddUtils/filterLanguage.service":600,"../../../nddUtils/smoothScrollUtil.service":607,"../../search.service":792,"../facet.service":679,angular:"angular","lodash/map":284,"lodash/replace":300,"ng-metadata/core":362}],681:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=function(){function e(e){this.$translate=e}return e.prototype.ngOnInit=function(){var e=this;this.$translate("facets.facet.facet_"+this.facetGroup.name).then(function(t){e._facetGroupHeader=t},function(){e._facetGroupHeader=e.facetGroup.name})},Object.defineProperty(e.prototype,"facetGroupHeader",{get:function(){return this._facetGroupHeader},enumerable:!0,configurable:!0}),e}();n([a.Input(),i("design:type",Object)],s.prototype,"displayedType",void 0),n([a.Input(),i("design:type",Object)],s.prototype,"facetGroup",void 0),n([a.Input(),i("design:type",String)],s.prototype,"facetType",void 0),s=n([a.Component({selector:"prm-facet-group",templateUrl:"components/search/facet/facet-group.html"}),o(0,a.Inject("$translate")),i("design:paramtypes",[Function])],s),r.PrmFacetGroup=s},{"ng-metadata/core":362}],682:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("../../../analytics/primolytics.service"),s=e("../facet.service"),c=function(){function e(e,t){this.facetService=e,this.primolyticsService=t}return e.prototype.addFacet=function(e,t,r,n,i,o,a,s){var c=e+","+n+","+r;this.facetService.facetSearch({facet:c})},Object.defineProperty(e.prototype,"rangeFacetValue",{get:function(){return this.facetService.getRangeFacetValue(this.rangeFacetMinValue,this.rangeFacetMaxValue)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rangeFacetMinValue",{get:function(){return this.facetGroup.additionalData.selectedMin},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rangeFacetMaxValue",{get:function(){return void 0==this.facetGroup.additionalData.selectedMax?this.facetGroup.additionalData.max:this.facetGroup.additionalData.selectedMax},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rangeFacetLabel",{get:function(){return this.facetService.getRangeFacetLabelFromValue(this.rangeFacetValue)},enumerable:!0,configurable:!0}),e.prototype.toggleMultiRangeFacet=function(e){this.facetService.toggleMultiRangeFacet(e)},e.prototype.changeMultiFacetVal=function(e){this.facetService.activeRangeMultiFacet&&this.facetService.replaceMultiRangeFacet(e)},e}();n([o.Input(),i("design:type",Object)],c.prototype,"facetGroup",void 0),n([a.beacon({p:"refine"}),i("design:type",Function),i("design:paramtypes",[Object,Object,Object,Object,Object,Object,Object,Object]),i("design:returntype",void 0)],c.prototype,"addFacet",null),c=n([o.Component({selector:"prm-facet-range",templateUrl:"components/search/facet/facetRange/facet-range.html"}),i("design:paramtypes",[s.FacetService,a.PrimolyticsService])],c),r.PrmFacetRange=c},{"../../../analytics/primolytics.service":480,"../facet.service":679,"ng-metadata/core":362}],683:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../primoExplore/primoExploreStates.module"),c=e("../../../journals/journals.service"),l=e("../../../appConfig/appConfigForward"),u=e("../../../journals/databases.service"),d=function(){function e(e,t,r,n,i){this.$stateParams=e,this.$state=t,this.journalsService=r,this.databasesService=n,this.$translate=i,"browse"===this.$stateParams.mode&&this.initBackToBrowseLabel()}return e.prototype.navigateBackToSearchResults=function(){var e={vid:this.$stateParams.vid,query:this.$stateParams.query,search_scope:this.$stateParams.search_scope,tab:this.$stateParams.tab,sortby:this.$stateParams.sortby,facet:this.$stateParams.facet,mode:this.$stateParams.mode,pfilter:this.$stateParams.pfilter,offset:this.$stateParams.offset,journals:this.$stateParams.journals,databases:this.$stateParams.databases,pcAvailability:this.$stateParams.pcAvailability},t=s.STATE_NAMES.SEARCH;this.$stateParams.fromFeaturedResult&&(e.tab=this.$stateParams.originTab,e.search_scope=this.$stateParams.originScope,this.$stateParams.originTab=void 0,this.$stateParams.originTab=void 0,this.$stateParams.fromFeaturedResult=void 0),this.journalsService.isJournalSearch()&&(t=s.STATE_NAMES.JOURNAL_SEARCH),this.databasesService.isDBSearch()&&(t=s.STATE_NAMES.DB_SEARCH),this.$state.go(t,e,{reload:!1})},e.prototype.isBackToSearchRequired=function(){return!(!this.$stateParams.query&&"browse"!==this.$stateParams.mode)},e.prototype.initBackToBrowseLabel=function(){var e=this,t={subject:"subjects",author:"authors",title:"titles"};this.$stateParams.browseScope.includes("callnumber")?this.$translate("browse.back.to.callnumbers").then(function(t){e.backToBrowseLabel=t}):this.$stateParams.browseScope.includes("subject")?this.$translate("browse.back.to.subjects").then(function(t){e.backToBrowseLabel=t}):this.$translate("browse.back.to."+t[this.$stateParams.browseScope]).then(function(t){e.backToBrowseLabel=t})},Object.defineProperty(e.prototype,"isBrowseMode",{get:function(){return"browse"===this.$stateParams.mode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"browseScope",{get:function(){return this.$stateParams.browseScope},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"browseState",{get:function(){return s.STATE_NAMES.BROWSE_SEARCH},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backToBrowseParams",{get:function(){return{vid:l.getVid(),browseQuery:this.$stateParams.browseQuery,browseScope:this.$stateParams.browseScope,browseFirstTerm:this.$stateParams.browseFirstTerm,innerPnxIndex:this.$stateParams.innerPnxIndex,numOfUsedTerms:this.$stateParams.numOfUsedTerms,fn:this.$stateParams.fn}},enumerable:!0,configurable:!0}),e}();d=n([a.Component({selector:"prm-back-to-search-results-button",templateUrl:"components/search/fullView/backToSearchResultsButton/back-to-search-results-button.html"}),o(0,a.Inject("$stateParams")),o(1,a.Inject("$state")),o(4,a.Inject("$translate")),i("design:paramtypes",[Object,Object,c.JournalsService,u.DatabasesService,Function])],d),r.PrmBackToSearchResultsButton=d},{"../../../appConfig/appConfigForward":484,"../../../journals/databases.service":584,"../../../journals/journals.service":588,"../../../primoExplore/primoExploreStates.module":620,"ng-metadata/core":362}],684:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../search.service"),c=e("./serviceDetails.service"),l=e("../../search.fields.service"),u=e("../../../infra/mediaQueries.service"),d=e("../../../appConfig/appConfigForward"),p=e("../../../nddUtils/configurationUtil.service"),f=e("../../../nddUtils/filterInstitution.service"),h=e("../../../nddUtils/filterLanguage.service"),m=e("../../briefResult/briefResult.service"),g=(e("lodash/filter"),e("lodash/endsWith"),e("lodash/replace"),e("lodash/map"),function(){function e(e,t,r,n,i,o,a,s,c,l,u,d){this.serviceDetailsService=e,this.searchService=t,this.$stateParams=r,this.$mdDialog=n,this.searchFieldsService=i,this.filterInstitution=o,this.filterLanguage=a,this.mediaQueries=s,this.configurationUtil=c,this.$location=l,this.$translate=u,this.briefResultService=d,this.queryOptions={},this.vid=r.vid,this.scope=r.search_scope,this.tab=r.tab}return e.prototype.ngOnInit=function(){this.activate()},Object.defineProperty(e.prototype,"details",{get:function(){var e=this,t=this.serviceDetailsService.getDetails();return t.filter(function(t){for(var r=0;r<t.values.length;r++){var n=t.values[r];return n=e.getValuesOfValueItems(n),n.length>0}})},enumerable:!0,configurable:!0}),e.prototype.activate=function(){this.serviceDetailsService.setDetails(this.item);var e=this.searchService.getSearchObject();this.queryOptions={query:e.query,vid:this.vid,scope:this.scope,tab:this.tab}},e.prototype.getValuesOfValueItems=function(e){var t=this.filterInstitution.filterAndNormalizeData(e,e.values);return t=this.filterLanguage.filterField(t)},e.prototype.search=function(e,t){this.$mdDialog.hide();var r=this.searchService.getSearchObject();r.query=e+",exact,"+t,this.searchFieldsService.mainSearch=t,this.searchService.search(r,!0)},e.prototype.getSubfieldFromVal=function(e,t){if(this.isSubfieldExist(e,t)){var r=e.split(t)[1];return r.indexOf("$$")!==-1&&(r=r.substring(0,r.indexOf("$$"))),r}return e},e.prototype.getDLToMmsId=function(e){var t=this.$location.$$protocol+"://"+this.$location.$$host+":"+this.$location.$$port+"/discovery/fulldisplay?docid=alma"+this.getSubfieldFromVal(e,"$$Z")+"&context=L&vid="+d.getVid()+"&lang="+this.$translate.use();return t},e.prototype.isSubfieldExist=function(e,t){return e.includes(t)},e.prototype.isSuprima=function(){return this.configurationUtil.isSuprima()},e.prototype.getTextFromVal=function(e){if(e.includes("$$Q")){var t=e.split("$$Q")[0];return t.includes("$$C")&&(t=this.getSubfieldFromVal(t,"$$V")),t}if(e.includes("$$Z")){var t=e.split("$$Z")[0];return t.includes("$$C")&&(t=this.getSubfieldFromVal(t,"$$V")),t}return e.includes("$$V")?this.getSubfieldFromVal(e,"$$V"):e},e.prototype.getQueryFromVal=function(e){return!e.includes("$$Q")&&e.includes("$$V")?this.getSubfieldFromVal(e,"$$V"):this.getSubfieldFromVal(e,"$$Q")},e.prototype.getPrefix=function(e){var t=this.getSubfieldFromVal(e,"$$C");return t=t.replace(/:\s*$/g,":"),t.endsWith(":")?t+" ":t+": "},e.prototype.setCameFromIndicationLateral=function(e){var t="title"===e.key&&e.keyt?e.keyt:e.key;this.$mdDialog.hide(),this.searchService.cameFromState="lateralLinking:"+t},Object.defineProperty(e.prototype,"highlights",{get:function(){return this.searchService.highlightsService.highlights},enumerable:!0,configurable:!0}),e.prototype.hl=function(e){if(this.searchService.highlightsService.highlights){var t=this.searchService.highlightsService.highlights[e];return t?t:this.searchService.highlightsService.highlights.termsUnion}return""},e.prototype.dontChangeStringDirectionToRtl=function(e){return this.briefResultService.dontChangeStringDirectionToRtl(e)},e}());n([a.Input(),i("design:type",Object)],g.prototype,"item",void 0),g=n([a.Component({selector:"prm-service-details",templateUrl:"components/search/fullView/details/service-details.html"}),o(2,a.Inject("$stateParams")),o(3,a.Inject("$mdDialog")),o(9,a.Inject("$location")),o(10,a.Inject("$translate")),i("design:paramtypes",[c.ServiceDetailsService,s.SearchService,Object,Object,l.SearchFieldsService,f.FilterInstitution,h.FilterLanguage,u.MediaQueries,p.ConfigurationUtil,Object,Function,m.BriefResultService])],g),r.PrmServiceDetails=g},{"../../../appConfig/appConfigForward":484,"../../../infra/mediaQueries.service":562,"../../../nddUtils/configurationUtil.service":596,"../../../nddUtils/filterInstitution.service":599,"../../../nddUtils/filterLanguage.service":600,"../../briefResult/briefResult.service":651,"../../search.fields.service":790,"../../search.service":792,"./serviceDetails.service":685,"lodash/endsWith":242,"lodash/filter":246,"lodash/map":284,"lodash/replace":300,"ng-metadata/core":362}],685:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../nddUtils/configurationUtil.service"),c=e("../../../nddUtils/arrayUtils.service"),l=e("../../../journals/journals.service"),u=e("../../briefResult/briefResult.service"),d=e("../../../mappingTablesCache/mappingTablesCache.service"),p=e("lodash/isArray"),f=(e("lodash/isMatch"),e("lodash/forEach"),function(){function e(e,t,r,n,i,o,a){this.configurationUtil=e,this.arrayUtils=t,this.$translate=r,this.journalsService=n,this.briefResultService=i,this.mtCache=o,this.$q=a,this.configurationUtil=e,this.arrayUtils=t,this.results=[];this.configurationUtil.isSuprima();this.hlTable=this.mtCache.getTable(this.mtCache.tables.HYPERTEXT_LINKING_DEFINITIONS);var s=["vertitle","creator","contributor","subject","lds","identifier","relation","source"];this.fieldsDetails={vertitle:{noLabel:!0},creator:{isLinkable:!0,getKey:function(e){return e},splitValue:";"},contributor:{isLinkable:!0,getKey:function(){return"creator"},splitValue:";"},subject:{isLinkable:!0,getKey:function(e){return"sub"},splitValue:";"},lds:{isLinkable:"Y"===e.getSystemConfiguration("Use local fields 30-39 as lateral links"),getKey:function(e){return e.replace("lds","lsr")}},identifier:{complexType:"id",splitValue:";"},relation:{complexType:"relatedTitle"},source:{isCollapsible:function(e){var t=!1;return e.forEach(function(e){if(e.match(/ProQuest LLC All rights reserved/i))return void(t=!0)}),t}}},this.fieldsDetails=this.getFieldDetails(this.fieldsDetails,s)}return e.prototype.getFieldDetails=function(e,t){var r={};return this.hlTable.forEach(function(e,t){var n=e.target,i={};i={isLinkable:!0,context:e.source3,getKey:function(t){return e.source1},splitValue:";",operator:e.source2};var o="";"identifier"===n&&(o="id"),"relation"===n&&(o="relatedTitle"),""!==o&&(i={isLinkable:!0,context:e.source3,getKey:function(t){return e.source1},operator:e.source2,complexType:o}),r[n]=i}),t.forEach(function(t){r[t]||(r[t]=e[t])}),r},e.prototype.filterEmpty=function(e){return e.label},e.prototype.parseItem=function(e,t){var r=this,n=this.configurationUtil.getFullViewConfiguration().delimiter+" ",i=t.items.split(","),o=[],a=i[0],s=!1;return i.forEach(function(t){var i={delimiter:"",key:null,keyt:t,isLinkable:!1,values:[],operator:""},c=e.pnx.display[t];if(c){"source"===t?(c=c.filter(function(e){return e.length>0}),c=c.map(function(e){return r.briefResultService.remove$$OValues(e)}),c=c.map(function(e){return r.parseSourceCodes(e)}),c.forEach(function(e,t){var n="";n=e.replace("fulldisplay.datasource.",""),r.$translate(e,[],"",n).then(function(e){r.$translate(e,[],"",e).then(function(e){c[t]=e})})})):"language"===t&&(c=c.slice(),c[0].split(";").map(function(e,t){r.$translate("lang."+e.trim()).then(function(e){c[t]=e})}));var l=r.getFieldConfig(t);if(l){l.getKey&&(i.key=l.getKey(t)),i.operator=l.operator?l.operator:"exact";var u="ANY"===l.context||e.context===l.context;i.isLinkable=l.isLinkable&&u,(r.configurationUtil.getSummonOverAlma()||r.journalsService.isJournalSearch())&&(i.isLinkable=!1),r.getFieldConfig(a)&&r.getFieldConfig(a).noLabel&&(a="")}p(c)?i.values=c:i.values=[c],l&&(r.configurationUtil.isSuprima()&&"L"===e.context||!l.splitValue||(i.values=r.arrayUtils.flattenDeep(i.values.map(function(e,t,r){return e.split(l.splitValue)}))),l.complexType&&(i.values=i.values.map(function(e,t,n){var o=e[l.complexType];return o?o:void r.parseValue(e).then(function(e){i.values[t]=e})})),l.isCollapsible&&(s=l.isCollapsible(i.values))),i.values.forEach(function(e,t,n){r.parseValue(e).then(function(r){r!=e&&(i.values[t]=r)})}),i.delimiter=n,o.push(i)}},this),0===o.length?{label:null,values:null,isCollapsible:null,showMore:null}:{label:a,values:o,isCollapsible:s,showMore:!0}},e.prototype.parseValue=function(e){var t=this;return this.$q(function(r,n){if(!e)return void n();var i=e.split("$$");if(i.length>1){var o=i.shift(),a=i.filter(function(e){return"C"===e.charAt(0)}).map(function(e){return"fulldisplay.constants."+e.slice(1).trim()});t.$translate(a).then(function(e){i=i.map(function(t){switch(t.charAt(0)){case"C":return"$$C"+e["fulldisplay.constants."+t.slice(1).trim()];case"V":return"$$V"+t.slice(1);default:return"$$"+t}}),i.unshift(o),r(i.join(" "))})}else r(i.join(" "))})},e.prototype.parseSourceCodes=function(e){return e=e.replace("$$V",""),e="fulldisplay.datasource."+e},e.prototype.getDetails=function(){return this.results},e.prototype.setDetails=function(e){this.results=this.parseDetails(e)},e.prototype.parseDetails=function(e){var t=this;return this.configurationUtil.getFullViewConfiguration().resultitemview.map(function(r){return t.parseItem(e,r)}).filter(this.filterEmpty)},e.prototype.parseValueFromComplexType=function(e,t){return t[e]},e.prototype.getFieldConfig=function(e){var t=this.fieldsDetails[e],r=e.indexOf("lds"),n=e.substring(r+3);return!t&&0===r&&n>29&&n<40&&(t=this.fieldsDetails.lds),t},e}());f=n([a.Injectable(),o(2,a.Inject("$translate")),o(6,a.Inject("$q")),i("design:paramtypes",[s.ConfigurationUtil,c.ArrayUtils,Object,l.JournalsService,u.BriefResultService,d.MappingTablesCache,Function])],f),r.ServiceDetailsService=f},{"../../../journals/journals.service":588,"../../../mappingTablesCache/mappingTablesCache.service":592,"../../../nddUtils/arrayUtils.service":595,"../../../nddUtils/configurationUtil.service":596,"../../briefResult/briefResult.service":651,"lodash/forEach":253,"lodash/isArray":264,"lodash/isMatch":272,"ng-metadata/core":362}],686:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("../../infra/RecordUtil.service"),s=e("ng-metadata/core"),c=e("./fullView.service"),l=e("../../nddUtils/smoothScrollUtil.service"),u=e("./fullViewServiceContainer/loginAlmaMashup.service"),d=e("../../analytics/primolytics.service"),p=e("../../appConfig/appConfigForward"),f=e("../../appConfig/appConfigForward"),h=e("../../infra/mediaQueries.service"),m=e("../../search/search.service"),g=e("../timesCited/timesCited.service"),v=e("../citationTrails/citationTrailsFullviewLink.service"),y=e("../../nddUtils/configurationUtil.service"),b=e("../../security/userSessionManager.service"),S=e("../../nddUtils/zoteroUtil"),_=function(){function e(e,t,r,n,i,o,a,s,c,l,u,d,h,m,g,v,y){this.fullViewService=e,this.smoothScrollUtil=t,this.$document=r,this.$mdSticky=n,this.$scope=i,this.$timeout=o,this.$location=a,this.loginAlmaMashupService=s,this.primolyticsService=c,this.$mdDialog=l,this.mediaQueries=u,this.searchService=d,this.recordUtil=h,this.timesCitedService=m,this.citationTrailsFullviewLinkService=g,this.configurationUtil=v,this.userSessionManagerService=y,this.indexAlmaLogin=-1,this.bxenable=p.getBxEnable(),this.suenable=f.getSyndeticUnboundEnable(),this.bxdisplay=!0,this.physicalItemOnly=!1,this.fullViewService=e,this.loginAlmaMashupService.resetIndex(),this.fullViewService.servicesArray=void 0,S.updateZoteroPlugin()}return e.prototype.ngOnInit=function(){var e=this;if(this.$scope.$watch(function(){return e.item.delivery},function(t,r){t&&(e._servicesArray=e.fullViewService.getServices(e.item,e.originator))}),this.configurationUtil.isSuprima()&&("EbscoLocal"===this.item.adaptor||"WorldCatLocal"===this.item.adaptor))try{sessionStorage.current_pnx=JSON.stringify(this.item)}catch(e){}this.configurationUtil.isSuprima()&&this.item.delivery&&this.item.delivery.deliveryCategory&&this.item.delivery.deliveryCategory.indexOf("Alma-E")===-1&&(this.physicalItemOnly=!0),this.fullViewService.suprimaEnrichers(this.item),this.fullViewService.updateAvailability(this.item),this.fullViewService.setSearchWithinJournalService(this.item),this.bxdisplay=this.bxenable;var t=this.item.pnx.display.type[0];"article"!==t&&(this.bxdisplay=!1);var r=this.recordUtil.loadRecordsExtras([this.item]);r&&r.then(function(t){e.fullViewService.updateServices(t[0],null)}),this.updatePageTitle();var n=this.$location.url();n.includes("tags=scholar")&&this.fullViewService.googleScholarEnrich(this.item.pnx),this.timesCitedService.updateCitedTimesAvailability(this.item)},e.prototype.ngAfterViewInit=function(){var e=this;this.focusId?this.$timeout(function(){e.scrollToElementId(e.focusId)},100):this.$timeout(function(){e.smoothScrollUtil.scrollTo("fullView","","")},100)},Object.defineProperty(e.prototype,"services",{get:function(){return this._servicesArray},enumerable:!0,configurable:!0}),e.prototype.scrollToElementIdWithBeacon=function(e){this.scrollToElementId(e)},e.prototype.showConditionalService=function(e){return!e.conditional||e.conditional(this.item)},e.prototype.scrollToElementId=function(e){var t=document.getElementById(e);t.classList.add("section-focused"),this.$timeout(function(){t.classList.remove("section-focused")},500),this.isOverlayFullView?this.smoothScrollUtil.scrollTo(e,"","sticky-scroll"):this.smoothScrollUtil.scrollTo(e,"","")},e.prototype.closeDialog=function(){this.$mdDialog.hide()},e.prototype.enableSU=function(){return this.suenable},e.prototype.updatePageTitle=function(){this.searchService.updatePageTitle()},e.prototype.shouldAddSearchWithinClass=function(e){return!(!this.physicalItemOnly||"searchWithinJournal"!==e.serviceName)},e.prototype.isRestrictedRecord=function(){var e=null==this.item.pnx;return e&&!this.isOverlayFullView},e.prototype.userName=function(){return this.userSessionManagerService.getUserName()},e.prototype.isLoggedIn=function(){return this.userName().length>0},e}();n([s.Input(),i("design:type",Object)],_.prototype,"item",void 0),n([s.Input(),i("design:type",Boolean)],_.prototype,"isOverlayFullView",void 0),n([s.Input(),i("design:type",String)],_.prototype,"focusId",void 0),n([s.Input(),i("design:type",Boolean)],_.prototype,"isfavorites",void 0),n([s.Input(),i("design:type",Boolean)],_.prototype,"loadFullViewAdditionalServices",void 0),n([s.Input(),i("design:type",String)],_.prototype,"originator",void 0),n([d.beacon({p:"fullshortcuts"}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],_.prototype,"scrollToElementIdWithBeacon",null),_=n([s.Component({selector:"prm-full-view",templateUrl:"components/search/fullView/full-view.html"}),o(2,s.Inject("$document")),o(3,s.Inject("$mdSticky")),o(4,s.Inject("$scope")),o(5,s.Inject("$timeout")),o(6,s.Inject("$location")),o(9,s.Inject("$mdDialog")),i("design:paramtypes",[c.FullViewService,l.SmoothScrollUtil,Object,Object,Object,Function,Object,u.LoginAlmaMashupService,d.PrimolyticsService,Object,h.MediaQueries,m.SearchService,a.RecordUtil,g.TimesCitedService,v.CitationTrailsFullviewLinkService,y.ConfigurationUtil,b.UserSessionManagerService])],_),r.PrmFullView=_},{"../../analytics/primolytics.service":480,"../../appConfig/appConfigForward":484,"../../infra/RecordUtil.service":530,"../../infra/mediaQueries.service":562,"../../nddUtils/configurationUtil.service":596,"../../nddUtils/smoothScrollUtil.service":607,"../../nddUtils/zoteroUtil":610,"../../search/search.service":792,"../../security/userSessionManager.service":853,"../citationTrails/citationTrailsFullviewLink.service":667,"../timesCited/timesCited.service":818,"./fullView.service":688,"./fullViewServiceContainer/loginAlmaMashup.service":697,"ng-metadata/core":362}],687:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./getit/getit.module"),a=e("./links/serviceLinks.service"),s=e("./fullView.service"),c=e("./fullViewPage/fullViewPage.module"),l=e("./fullViewDialog.service"),u=e("./serviceHeader/serviceHeader.directive"),d=e("./details/serviceDetails.service"),p=e("./details/serviceDetails.directive"),f=e("./fullViewServiceContainer/fullViewServiceContainer.module"),h=e("./links/serviceLinks.directive"),m=e("./recomendation/recommendation.module"),g=e("./syndeticUnbound/syndeticUnbound.module"),v=e("../../infra/sticky"),y=e("./fullView.directive"),b=e("./backToSearchResultsButton/backToSearchResultsButton.directive"),S=e("./fullViewContainer.directive"),_=e("../../tags/tagsList/tagsList.service"),w=e("../../tags/tagsList/tagsList.directive"),E=e("../../tags/tagsList/tagsList.module"),T=e("../fullView/signInToView.directive"),O=function(){function e(){}return e}();O=n([i.NgModule({declarations:[b.PrmBackToSearchResultsButton,y.PrmFullView,S.PrmFullViewCont,p.PrmServiceDetails,u.PrmServiceHeader,h.PrmServiceLinks,w.PrmTagsList,T.PrmSignInToView],providers:[l.FullViewDialogService,a.FullViewLinksService,s.FullViewService,d.ServiceDetailsService,_.TagsListService],imports:["primo-explore.infra",v.default.name,f.FullViewContainerServiceModule,c.FullViewPageModule,o.GetitModule,m.RecommendationModule,g.SyndeticUnboundModule,E.TagsListModule]})],O),r.FullViewModule=O},{"../../infra/sticky":570,"../../tags/tagsList/tagsList.directive":871,"../../tags/tagsList/tagsList.module":872,"../../tags/tagsList/tagsList.service":873,"../fullView/signInToView.directive":766,"./backToSearchResultsButton/backToSearchResultsButton.directive":683,"./details/serviceDetails.directive":684,"./details/serviceDetails.service":685,"./fullView.directive":686,"./fullView.service":688,"./fullViewContainer.directive":689,
"./fullViewDialog.service":690,"./fullViewPage/fullViewPage.module":692,"./fullViewServiceContainer/fullViewServiceContainer.module":695,"./getit/getit.module":704,"./links/serviceLinks.directive":758,"./links/serviceLinks.service":759,"./recomendation/recommendation.module":764,"./serviceHeader/serviceHeader.directive":765,"./syndeticUnbound/syndeticUnbound.module":768,"ng-metadata/core":362}],688:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../nddUtils/configurationUtil.service"),c=e("../../mappingTablesCache/mappingTablesCache.service"),l=e("../../appConfig/appConfigForward"),u=e("./links/serviceLinks.service"),d=e("../rta.service"),p=e("./getit/opac/locations/location/location.service"),f=e("../../infra/RecordUtil.service"),h=e("../citationTrails/citationTrailsFullviewLink.service"),m=e("../timesCited/timesCited.service"),g=e("angular"),v=e("lodash/findIndex"),y=e("lodash/indexOf"),b=e("lodash/get"),S=e("lodash/unionBy"),_=e("lodash/find"),w=function(){function e(e,t,r,n,i,o,a,s,c,u,d,p){var f=this;if(this.$http=e,this.restBaseURLs=t,this.configurationUtil=r,this.$state=n,this.$location=i,this.mappingTablesCache=o,this.linksService=a,this.rtaService=s,this.locationService=c,this.recordUtil=u,this.citationTrailsFullviewLinkService=d,this.timesCitedService=p,this.vid=l.getVid(),this.calculateSvcIdDone=!1,this.calculatePcDeliveryDone=!1,this._calculatePrimaViewItDeliveryDone=!1,this.servicesToFilter=["details","reviewsandtags","onlinereviews","browseshelf"],this.configurationUtil=r,this.servicesDirectives={brief:{scrollId:"brief",serviceName:"brief",title:"nui.brief.results.tabs.brief"},citations:{scrollId:"citationTrails",serviceName:"citationTrails",title:"citation_trail.link.citations",conditional:function(e){return f.recordUtil.hasCitationTrails(e)&&f.citationTrailsFullviewLinkService.shouldDisplayCitationTrial()||f.citationTrailsFullviewLinkService.shouldDisplayTimesCited()}},action_list:{scrollId:"action_list",serviceName:"action_list",title:"nui.brief.results.tabs.send_to"},getit_link2:{serviceName:"getit_link2",title:"Get it 2"},getit_link1:{scrollId:"getit_link1",serviceName:"getit_link1",title:"brief.results.tabs.locations"},tags:{scrollId:"tags",serviceName:"tags",title:"brief.results.tabs.tags"},details:{scrollId:"details",serviceName:"details",title:"brief.results.tabs.details"},links:{scrollId:"links",serviceName:"links",title:"nui.brief.results.tabs.links"},browseshelf:{scrollId:"virtualBrowse",serviceName:"virtualBrowse",title:"brief.results.tabs.browseshelf"},searchWithinJournal:{scrollId:"searchWithinJournal",serviceName:"searchWithinJournal",title:"brief.results.tabs.searchWithinJournal"},timesCited:{scrollId:"citationTrails",serviceName:"timesCited",title:"citation_trail.link.citations",conditional:function(e){return f.timesCitedService.shouldDisplayTimesCited}}},this.services=[],"suprima"===this.configurationUtil.getBackendSystem()){var h=this.servicesToFilter.indexOf("details");h>-1&&this.servicesToFilter.splice(h,1)}this.calculateSvcIdDone=!1,this.calculatePcDeliveryDone=!1}return e.prototype.getServices=function(e,t){return this.servicesArray||this.updateServices(e,t),this.servicesArray},Object.defineProperty(e.prototype,"lang3",{get:function(){return this._lang3},set:function(e){this._lang3=e},enumerable:!0,configurable:!0}),e.prototype.updateServices=function(e,t){var r=this;this.lang3=e.lang3;var n=this.configurationUtil.getBriefResultConfiguration().tabsorder.items.split(",").filter(function(e,t,n){return r.servicesDirectives[e]}).map(function(e,t,n){return r.servicesDirectives[e]});"suprima"===this.configurationUtil.getBackendSystem()&&(n=this.handleCitationTrialsAndTimesCitedVisibilityForSuprima(n,this.citationTrailsFullviewLinkService,this.timesCitedService));var i=this.parseServicesWithConfiguration(e,"getit_link1"),o=this.parseServicesWithConfiguration(e,"getit_link2"),a=[this.parseServicesWithConfiguration(e,"brief")].concat([this.parseServicesWithConfiguration(e,"action_list")]).concat(n);if(this.configurationUtil.isSuprima()){var s=this.configurationUtil.getMainMenuConfiguration(),c=_(s.mainview,function(e){return"tags"===e.label});if(!c||this.configurationUtil.getSummonOverAlma()){var l=v(a,function(e){return"tags"===e.serviceName});a.splice(l,1)}}else a=a.concat([this.parseServicesWithConfiguration(e,"tags")]);if(e.enrichment&&e.enrichment.virtualBrowseObject&&e.enrichment.virtualBrowseObject.isVirtualBrowseEnabled||(a=a.filter(function(e){return"virtualBrowse"!==e.serviceName})),"suprima"!==this.configurationUtil.getBackendSystem()){if(this.linksService.hasLinks(e)){var u=v(a,function(e){return"details"===e.serviceName});a.splice(u+1,0,this.parseServicesWithConfiguration(e,"links"))}}else if(!this.linksService.hasLinks(e)){var d=v(a,function(e){return"links"===e.serviceName});a.splice(d,1)}var p=v(a,function(e){return"getit_link1"===e.serviceName});if(a=a.filter(function(e,t,r){return"getit_link1"!==e.serviceName}),a=a.slice(0,p).concat(i).concat(a.slice(p)),g.isDefined(o)){for(var f=!1,h=0;h<a.length;h++)if("getit_link2"==a[h].serviceName){a[h]=o[0],f=!0;break}f||(a=a.concat(o))}else a=a.filter(function(e){return"getit_link2"!=e.serviceName});if("servicesPage"===this.$state.current.name&&(a=a.filter(function(e){return v(r.servicesToFilter,function(t){return t===e.serviceName})<0}),"suprima"===this.configurationUtil.getBackendSystem()&&!this.isLocalRecord(e))){var u=v(a,function(e){return"details"===e.serviceName});a.splice(u,1)}this.displaySearchWithinJournal||(a=a.filter(function(e,t,r){return"searchWithinJournal"!==e.serviceName})),this.servicesArray=a},e.prototype.isLocalRecord=function(e){var t=b(e,"pnx.control.sourceid");return g.isArray(t)&&(t=t[0]),"alma"===t},e.prototype.setSearchWithinJournalService=function(e){if(this.displaySearchWithinJournal=!1,"suprima"===this.configurationUtil.getBackendSystem()){var t=b(e,"pnx.addata.issn[0]",void 0),r=b(e,"pnx.addata.eissn[0]",void 0);if(t||r){var n=b(e,"pnx.display.type[0]",void 0);if(n&&("journal"===n.toLowerCase()||"journals"===n.toLowerCase())){var i=this.configurationUtil.getSearchWithinJournalConfig();if(this.configurationUtil.getSummonOverAlma()){if(!i.summonUrl)return}else if(!i.tab||!i.scope)return;this.displaySearchWithinJournal=!0}}}},e.prototype.isCalculatePcDeliveryDone=function(){return"suprima"!==this.configurationUtil.getBackendSystem()||this.calculatePcDeliveryDone},e.prototype.isCalculateSvcIdDone=function(){return"suprima"!==this.configurationUtil.getBackendSystem()||this.calculateSvcIdDone},e.prototype.suprimaEnrichers=function(e){this.calculatePhysicalServiceId(e),this.enrichDeliveryWithERTA(e),this.calculatePcDelivery(e),this.updateGoogleScholarUrls(e)},e.prototype.googleScholarEnrich=function(e){if(void 0!==e.display.creator)for(var t=0,r=e.display.creator;t<r.length;t++){var n=r[t];this.addMeta("citation_author",n)}this.addMeta("citation_language",b(e,"display.language[0]",void 0)),this.addMeta("citation_title",b(e,"display.title[0]",void 0)),this.addMeta("citation_publisher",b(e,"display.publisher[0]",void 0)),this.addMeta("citation_publication_date",b(e,"addata.date[0]",void 0))},e.prototype.calculatePhysicalServiceId=function(e){var t=e.delivery;if("suprima"!==this.configurationUtil.getBackendSystem()||"Local Search Engine"!==e.adaptor||t.physicalServiceId||!this.hasHolding(t))return void(this.calculateSvcIdDone=!0);this.calculateSvcIdDone=!1;var r=this.getIlsRecordId(e),n={method:"GET",url:this.restBaseURLs.calculatePhysicalServiceId+"/"+r+"?vid="+this.vid,params:null,data:null},i=this;this.$http(n).then(function(t){i.updatePhysicalServiceIdAndLinks(e,t.data),i.updateServices(e),i.calculateSvcIdDone=!0}).finally(function(){i.calculateSvcIdDone=!0})},e.prototype.getIlsRecordId=function(e){var t=e.delivery;return t&&t.holding?t.holding[0].ilsApiId:e.pnx.control.sourcerecordid[0]},e.prototype.hasHolding=function(e){return!!(e&&e.holding&&e.holding.length>=1)||!(!e||!this.hasPCategory(e.deliveryCategory))},e.prototype.calculatePcDelivery=function(e){this.calculatePcDeliveryDone=!1;e.delivery;if("suprima"!==this.configurationUtil.getBackendSystem()||"Primo Central"!==e.adaptor&&"EbscoLocal"!==e.adaptor&&"WorldCatLocal"!==e.adaptor)return void(this.calculatePcDeliveryDone=!0);var t={doc:e},r=e.pnx.control.recordid[0],n={method:"POST",url:this.restBaseURLs.calculatePcDelivery+"/"+r+"?vid="+this.vid,params:null,data:t},i=this;this.$http(n).then(function(t){if("WorldCatLocal"===e.adaptor){var r=b(t,"data.delivery.availability[0]");"no_inventory"===r&&(t.data.delivery.availability=e.delivery.availability)}e.delivery=t.data.delivery,i.updateServices(e),i.calculatePcDeliveryDone=!0}).finally(function(){i.calculatePcDeliveryDone=!0})},e.prototype.enrichDeliveryWithERTA=function(e){var t=this;this.calculatePrimaViewItDeliveryDone=!1;var r=e.delivery;if(this.skipElectronicEnrich(e))return void(this.calculatePrimaViewItDeliveryDone=!0);var n=this.$location.url(),i=e.pnx.control.recordid[0],o=b(e,"delivery.recordInstitutionCode"),a=this.vid;o&&(a=o+":SD");var s={method:"GET",url:this.restBaseURLs.prepareElectorincRTA+"/"+i+"?vid="+a,params:{googleScholar:n.includes("tags=scholar")},data:null};this.$http(s).then(function(n){t.mergeDeliveryWithEDelivery(e,n.data,null!==r.electronicServices),t.calculatePrimaViewItDeliveryDone=!0,t.updateServices(e),t.updateGoogleScholarUrls(e)}).finally(function(){t.calculatePrimaViewItDeliveryDone=!0})},e.prototype.updateAvailability=function(e){(this.configurationUtil.getLocationsConfiguration()&&"none"!==this.configurationUtil.getLocationsConfiguration().rta||e.delivery&&e.delivery.almaInstitutionsList)&&this.rtaService.updateAvailability([e],{rtaOnAllInstitutions:"true"})},e.prototype.skipElectronicEnrich=function(e){var t=e.delivery;return"suprima"!==this.configurationUtil.getBackendSystem()||"SP"===e.context||"Primo Central"===e.adaptor||"EbscoLocal"===e.adaptor||"WorldCatLocal"===e.adaptor||!this.hasEOrDCategory(t.deliveryCategory)},e.prototype.buildGetitServicesArray=function(e,t){var r=this;if(!e)return null;var n=this.getLinkByAction(e,t),i=[];if(this.configurationUtil.isSuprima()){var o=e.delivery?e.delivery.deliveryCategory:[];o.indexOf("Alma-E")==-1&&o.indexOf("Alma-D")==-1||0==n.filter(function(e){return"Alma-E"===e.category||"Alma-D"===e.category}).length&&i.push({scrollId:"getit_link1_0",serviceName:"Viewit",title:"nui.getit.service_viewit"})}if(n.forEach(function(t,n,o){var a=t.category,s=e.delivery?e.delivery.deliveryCategory:[],c=y(s,a);!r.configurationUtil.isSuprima()||c!==-1||"Alma-D"!==a&&"Alma-E"!==a||(a="Alma-E"===a?"Alma-D":"Alma-E",c=y(s,a));var l="";if(c!==-1&&e.delivery.serviceMode&&(l=e.delivery.serviceMode[c]),t.links&&t.links[0]){var u=i.length;"display"===l&&(r.viewOnlineScrollId="getit_link1_"+u),i.push({scrollId:"getit_link1_"+u,serviceName:l,title:"nui.getit."+t.links[0].getItTabText,linkElement:t})}}),!this.configurationUtil.isSuprima()){var a=i.map(function(e){return e.serviceName});if(y(a,"ovp")===-1&&y(a,"ovl")===-1&&y(a,"activate")===-1){var s=b(e,"delivery.holding",[]);s&&s.length>0&&i.push({scrollId:"getit_link1_0",serviceName:this.locationService.isOvpLocation(s[0])?"ovp":"ovl",title:"nui.getit.tab1_check",linkElement:null})}}return i},e.prototype.buildGetit2ServicesArray=function(e,t){if(!e)return null;if(e.delivery&&e.delivery.GetIt2){var r=[],n=e.delivery.GetIt2;return n.hyperlinkText=n.getItTabText?n.getItTabText:"",r.push({scrollId:"getit_link2",serviceName:n.serviceModeGetit2,title:"getit."+n.getItTabText,linkElement:{links:[n]}}),r}},e.prototype.hasEOrDCategory=function(e){if(null===e)return!1;for(var t=0;t<e.length;t++)if("Alma-E"===e[t]||"Alma-D"===e[t])return!0;return!1},e.prototype.hasPCategory=function(e){if(null===e)return!1;for(var t=0;t<e.length;t++)if("Alma-P"===e[t])return!0;return!1},e.prototype.mergeDeliveryWithEDelivery=function(e,t,r){var n=e.delivery;if(null===t||!t.electronicServices){var i=v(n.deliveryCategory,function(e){return"Alma-E"===e});n.deliveryCategory.splice(i,1);var o=v(n.availability,function(e){return"not_restricted"===e});return void n.availability.splice(o,1)}return r?void(e.delivery.electronicServices=t.electronicServices):(this.updateLinks(e,t),null===n.GetIt1?(e.delivery.electronicServices=t.electronicServices,e.delivery.GetIt1=t.GetIt1,e.delivery.serviceMode=t.serviceMode,void(e.delivery.availabilityLinks=t.availabilityLinks)):(n.electronicServices=t.electronicServices,n.serviceMode.unshift(t.serviceMode[0]),n.availabilityLinks.unshift(t.availabilityLinks[0]),n.displayedAvailability=t.displayedAvailability,void n.GetIt1.unshift(t.GetIt1[0])))},e.prototype.updateGoogleScholarUrls=function(e){var t=this.$location.url();if(t.includes("tags=scholar"))for(var r in e.delivery.electronicServices)if(e.delivery.electronicServices[r].pdfFilesUrl)for(var n=0,i=e.delivery.electronicServices[r].pdfFilesUrl;n<i.length;n++){var o=i[n];this.addMeta("citation_pdf_url",o)}},e.prototype.addMeta=function(e,t){if(void 0!==t){var r=document.createElement("META");r.setAttribute("name",e),r.setAttribute("content",t),document.head.appendChild(r)}},e.prototype.updatePhysicalServiceIdAndLinks=function(e,t){var r=e.delivery;null!=t&&(r.physicalServiceId=t.physicalServiceId,this.updateLinks(e,t))},e.prototype.updateLinks=function(e,t){var r=this,n=e.delivery;if((void 0===n.link||null===n.link)&&t.link)return void(e.delivery=t.link);if(t.link){var i=n.link.length;t.link=t.link.map(function(e,t,n){return r.updateIndex(e,t,i)}),e.delivery.link=S(n.link,t.link,"displayLabel")}},e.prototype.updateIndex=function(e,t,r){return e["@id"]="_:"+(t+r),e},e.prototype.getLinkByAction=function(e,t){var r=this.getGetItObject(e,t);return r&&r.length>0?r:[]},e.prototype.getGetItObject=function(e,t){var r=[];switch(t){case"getit_link1":if(!e.delivery||!e.delivery.GetIt1)return null;r=e.delivery.GetIt1.links||e.delivery.GetIt1;break;case"getit_link2":r=e.delivery.GetIt2;break;default:return null}return r},e.prototype.parseServicesWithConfiguration=function(e,t){return"getit_link1"===t?this.buildGetitServicesArray(e,t):"getit_link2"===t?this.buildGetit2ServicesArray(e,t):this.servicesDirectives[t]},e.prototype.handleCitationTrialsAndTimesCitedVisibilityForSuprima=function(e,t,r){var n=!0;return e.filter(function(e){return"citationTrails"==e.serviceName}).length>0?t.setShowCitationTrialForSuprima(!0):(t.setShowCitationTrialForSuprima(!1),n=!1),e.filter(function(e){return"timesCited"==e.serviceName}).length>0?r.setShowTimesCitedForSuprima(!0):(r.setShowTimesCitedForSuprima(!1),n=!1),n&&(e=e.filter(function(e){return"timesCited"!=e.serviceName})),e},e.prototype.getServicesDirectives=function(){return this.servicesDirectives},e.prototype.setServiceTitle=function(e,t){this.servicesDirectives[e].title=t},e.prototype.addServiceDirective=function(e,t){this.servicesDirectives[e]=t},e.prototype.disableService=function(e){this.servicesDirectives[e].isDisabled=!0},e.prototype.calculatePrimaViewItDone=function(){return this._calculatePrimaViewItDeliveryDone&&this.isCalculatePcDeliveryDone()},Object.defineProperty(e.prototype,"calculatePrimaViewItDeliveryDone",{set:function(e){this._calculatePrimaViewItDeliveryDone=e},enumerable:!0,configurable:!0}),e}();w=n([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),o(3,a.Inject("$state")),o(4,a.Inject("$location")),i("design:paramtypes",[Function,Object,s.ConfigurationUtil,Object,Object,c.MappingTablesCache,u.FullViewLinksService,d.RtaService,p.LocationService,f.RecordUtil,h.CitationTrailsFullviewLinkService,m.TimesCitedService])],w),r.FullViewService=w},{"../../appConfig/appConfigForward":484,"../../infra/RecordUtil.service":530,"../../mappingTablesCache/mappingTablesCache.service":592,"../../nddUtils/configurationUtil.service":596,"../citationTrails/citationTrailsFullviewLink.service":667,"../rta.service":781,"../timesCited/timesCited.service":818,"./getit/opac/locations/location/location.service":714,"./links/serviceLinks.service":759,angular:"angular","lodash/find":247,"lodash/findIndex":248,"lodash/get":255,"lodash/indexOf":261,"lodash/unionBy":320,"ng-metadata/core":362}],689:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../appConfig/appConfigForward"),c=e("../../infra/mediaQueries.service"),l=e("../../infra/widgets/alerts/alertFactory.service"),u=e("../../primoExplore/primoExploreStates.module"),d=e("../../journals/journals.service"),p=e("../../journals/databases.service"),f=function(){function e(e,t,r,n,i,o){this.$state=e,this.mediaQueries=t,this.alertService=r,this.$location=n,this.journalsService=i,this.databasesService=o,this.vid=s.getVid(),"servicesPage"===e.current.name?this.showSearch=!1:this.showSearch=!0,this.borInfoAlert=r.create(l.ALERT_MSG_TYPE.SIGNIN),this.borInfoAlert.show("nui.bor_info_failed")}return Object.defineProperty(e.prototype,"isJournalsSearch",{get:function(){return this.journalsService.isJournalSearch()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDBSearch",{get:function(){return this.databasesService.isDBSearch()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAtozSearch",{get:function(){return this.journalsService.isJournalSearch()||this.databasesService.isDBSearch()},enumerable:!0,configurable:!0}),e.prototype.displayBorInfoAlert=function(){return!(!this.$location.search().authenticationError||"1"!==this.$location.search().authenticationError)},e.prototype.onSearchBarSearchEvent=function(e){var t=u.STATE_NAMES.SEARCH;this.isJournalsSearch&&(t=u.STATE_NAMES.JOURNAL_SEARCH),this.isDBSearch&&(t=u.STATE_NAMES.DB_SEARCH),this.$state.go(t,{query:e.mainSearchField,search_scope:e.scopeField,tab:e.tab,journals:e.journals,databases:e.databases,sortby:e.sortby,vid:this.vid},{reload:!1})},Object.defineProperty(e.prototype,"isBrowseMode",{get:function(){return"browse"===this.$state.params.mode},enumerable:!0,configurable:!0}),e.prototype.isRestrictedRecord=function(){var e=!this.item||null==this.item.pnx;return e&&!this.isOverlayFullView},e}();n([a.Input(),i("design:type",Object)],f.prototype,"item",void 0),n([a.Input(),i("design:type",Boolean)],f.prototype,"isOverlayFullView",void 0),f=n([a.Component({selector:"prm-full-view-cont",templateUrl:"components/search/fullView/full-view-container.html"}),o(0,a.Inject("$state")),o(3,a.Inject("$location")),i("design:paramtypes",[Object,c.MediaQueries,l.AlertFactory,Object,d.JournalsService,p.DatabasesService])],f),r.PrmFullViewCont=f},{"../../appConfig/appConfigForward":484,"../../infra/mediaQueries.service":562,"../../infra/widgets/alerts/alertFactory.service":574,"../../journals/databases.service":584,"../../journals/journals.service":588,"../../primoExplore/primoExploreStates.module":620,"ng-metadata/core":362}],690:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../primoExplore/primoExploreStates.module"),c=e("../briefResult/briefResult.service"),l=e("../../nddUtils/templateUtil.service"),u=e("../../security/jwtUtil.service"),d=e("../../favorites/favorites.service"),p=e("../../infra/mediaQueries.service"),f=e("../../infra/browserSniffer"),h=function(){function e(e,t,r,n,i,o,a,s,c,l,u){this.$mdDialog=e,this.$rootScope=t,this.$location=r,this.$state=n,this.$timeout=i,this.$mdToast=o,this.briefResultService=a,this.templateUtil=s,this.jwtUtilService=c,this.favoritesService=l,this.mediaQueries=u}return e.prototype.openFullViewDialog=function(e,t,r){var n,i,o=this;if(t){if(i=t.target,i&&i.hasAttribute("prm-brief-internal-button-marker")||i.classList.contains("prm-brief-internal-button-marker"))return!1;n=t.detail?t.detail.index:t.index}var a=this.$location.url();this.$location.url(this.templateUtil.getDeepLinkPath(e)),this.favoritesService.needToChangeUrl=!1;var s=this.$mdDialog;this.$mdToast.hide();var c={val:!f.isBrowserIE()},l={val:!1};s.show({onComplete:function(){c.val?l.val=!0:(o.$timeout(function(){return l.val=!0},0),o.$timeout(function(){return c.val=!0},1e3))},onRemoving:function(){o.handleDialogHide(a,i)},templateUrl:"components/search/fullView/full-view-dialog-template.html",locals:{focusId:n,item:e,$location:this.$location,perviousUrl:a,$state:this.$state,favoritesService:this.favoritesService,jwtUtilService:this.jwtUtilService,mediaQueries:this.mediaQueries,isfavorites:this.isfavorites,loadFullViewAdditionalServices:c,dialogOpened:l,originator:r},bindToController:!0,clickOutsideToClose:!0,fullscreen:!0,escapeToClose:!0,focusOnOpen:!1,controller:function(){function e(){s.hide()}var t=this;t.handleHideDetails=e},controllerAs:"$ctrl"});var u,d;return u=this.$rootScope.$on("$stateChangeStart",function(e,t,r,n,i){e.preventDefault(),u(),u=o.$rootScope.$on("$locationChangeStart",function(e){e.preventDefault(),u()}),d=o.$rootScope.$watch(function(){return o.$location.path()},function(e,t){"/fulldisplay"===t&&"/fulldisplay"!=e&&(o.$mdDialog.cancel(),d())})}),!0},e.prototype.handleDialogHide=function(e,t){this.briefResultService.isInGetFrbrEvent||(this.$location.url(e),this.$state.current.name==s.STATE_NAMES.FAVORITES&&"GUEST"!=this.jwtUtilService.getDecodedToken().userGroup&&this.favoritesService.needToChangeUrl&&(this.favoritesService.needToChangeUrl=!1,this.favoritesService.getItemsFromServer()),t&&(t.setAttribute("tabindex","-1"),t.focus(),t.setAttribute("tabindex","0")))},e}();h=n([a.Injectable(),o(0,a.Inject("$mdDialog")),o(1,a.Inject("$rootScope")),o(2,a.Inject("$location")),o(3,a.Inject("$state")),o(4,a.Inject("$timeout")),o(5,a.Inject("$mdToast")),i("design:paramtypes",[Object,Object,Object,Object,Function,Object,c.BriefResultService,l.TemplateUtil,u.JwtUtilService,d.FavoritesService,p.MediaQueries])],h),r.FullViewDialogService=h,r.default=[]},{"../../favorites/favorites.service":511,"../../infra/browserSniffer":534,"../../infra/mediaQueries.service":562,"../../nddUtils/templateUtil.service":609,"../../primoExplore/primoExploreStates.module":620,"../../security/jwtUtil.service":842,"../briefResult/briefResult.service":651,"ng-metadata/core":362}],691:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=(e("angular-material"),e("ng-metadata/core")),s=e("./fullViewPage.service"),c=e("../../../analytics/primolytics.service"),l=function(){function e(e,t,r){var n=this;this.fullViewPageService=e,this.primolyticsService=t,this.$stateParams=r;var i=this.fullViewPageService.getItemById(r.docid,r.context,r.search_scope,r.adaptor,r.isFrbr,r.showPnx);i.then(function(e){n.callBeacon(e.data)})}return Object.defineProperty(e.prototype,"currentItem",{get:function(){return this.fullViewPageService.currentItem},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showPnx",{get:function(){return this.$stateParams.showPnx&&"true"===this.$stateParams.showPnx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pnxLength",{get:function(){if(this.fullViewPageService.currentItem)return 1.2*this.fullViewPageService.currentItem.pnx.split("\n").length},enumerable:!0,configurable:!0}),e.prototype.callBeacon=function(e){},e}();n([c.beacon({p:"brief",op:"openfull"}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],l.prototype,"callBeacon",null),l=n([a.Component({selector:"prm-full-view-page",templateUrl:"components/search/fullView/fullViewPage/full-view-page.html"}),o(2,a.Inject("$stateParams")),i("design:paramtypes",[s.FullViewPageService,c.PrimolyticsService,Object])],l),r.PrmFullViewPage=l},{"../../../analytics/primolytics.service":480,"./fullViewPage.service":693,"angular-material":17,"ng-metadata/core":362}],692:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./fullViewPage.service"),a=e("./fullViewPage.directive"),s=function(){function e(){}return e}();s=n([i.NgModule({declarations:[a.PrmFullViewPage],providers:[o.FullViewPageService],imports:[]})],s),r.FullViewPageModule=s},{"./fullViewPage.directive":691,"./fullViewPage.service":693,"ng-metadata/core":362}],693:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../nddUtils/configurationUtil.service"),c=e("../../../search/rta.service"),l=e("../fullView.service"),u=e("../../../appConfig/appConfigForward"),d=e("../../../nddUtils/zoteroUtil"),p=function(){function e(e,t,r,n,i,o,a){this.$http=e,this.restBaseURLs=t,this.configurationUtil=r,this.$translate=n,this.fullViewService=i,this.rtaService=o,this.$q=a,this.vid=u.getVid(),this.GET_ITEM_API_URL=t.pnxBaseURL}return e.prototype.getItemById=function(e,t,r,n,i,o){var a=this;this._currentItem=void 0,"WorldCat"===t&&(t="U");var s=this.GET_ITEM_API_URL+"/"+t+"/"+e+"?vid="+this.vid+"&lang="+this.$translate.use();r&&(s=s+"&search_scope="+r),n&&(s=s+"&adaptor="+n),i&&r&&(s+="&isFrbr=true"),o&&(s+="&showPnx=true");var c;if(this.configurationUtil.isSuprima()&&("EbscoLocal"===n||"WorldCatLocal"===n)){var l=sessionStorage.current_pnx;if(l){var u=JSON.parse(l),p=this.$q.defer();p.resolve({data:u}),c=p.promise}}return c||(c=this.$http.get(s)),c.then(function(e){d.updateZoteroPlugin();var t=e.data;return t.delivery&&(t.delivery.availability.length>1&&t.delivery.availability.reverse(),t.delivery.deliveryCategory.length>1&&t.delivery.deliveryCategory.reverse(),t.delivery.availabilityLinks&&t.delivery.availabilityLinks.length>1&&t.delivery.availabilityLinks.reverse(),t.delivery.availabilityLinksUrl&&t.delivery.availabilityLinksUrl.length>1&&t.delivery.availabilityLinksUrl.reverse(),t.delivery.serviceMode&&t.delivery.serviceMode.length>1&&t.delivery.serviceMode.reverse(),a.fullViewService.updateServices(t)),a._currentItem=t,t}),c},Object.defineProperty(e.prototype,"currentItem",{get:function(){return this._currentItem},enumerable:!0,configurable:!0}),e.prototype.setGetItemInProgress=function(e){this.getItemInProgress=e},e.prototype.isGetItemInProgress=function(){return this.getItemInProgress},e}();p=n([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),o(3,a.Inject("$translate")),o(6,a.Inject("$q")),i("design:paramtypes",[Function,Object,s.ConfigurationUtil,Function,l.FullViewService,c.RtaService,Object])],p),r.FullViewPageService=p,r.default=[]},{"../../../appConfig/appConfigForward":484,"../../../nddUtils/configurationUtil.service":596,"../../../nddUtils/zoteroUtil":610,"../../../search/rta.service":781,"../fullView.service":688,"ng-metadata/core":362}],694:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../tags/tags.service"),c=e("../../../nddUtils/configurationUtil.service"),l=function(){function e(e,t,r){var n=this;this.$rootScope=e,this.tagsService=t,this.configurationUtil=r,this.KEY_CODE={LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40},this.getRecordTagsFromApi(),e.$on("silentLogin",function(){return n.getRecordTagsFromApi()})}return e.prototype.getRecordTagsFromApi=function(){this.tagsService.getRecordTagsFromApi(this.item.pnx.control.recordid)},e.prototype.isMashupLink=function(){return""!==this.service.linkElement.links[0].link},e.prototype.isAlmaGetit=function(){return this.service.linkElement.links.filter(function(e){return"Almagetit"===e.displayText}).length>0},e.prototype.isMoreAlmaInst=function(){return this.item.delivery.almaInstitutionsList&&this.item.delivery.almaInstitutionsList.length>0},Object.defineProperty(e.prototype,"recordNonUserTags",{get:function(){return this.tagsService.recordNonUserTags},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recordUserTags",{get:function(){return this.tagsService.recordUserTags},enumerable:!0,configurable:!0}),e.prototype.keyDownSupport=function(e){this.KEY_CODE;40!==e.keyCode&&38!==e.keyCode||e.preventDefault()},e}();n([a.Input(),i("design:type",Object)],l.prototype,"item",void 0),n([a.Input(),i("design:type",Object)],l.prototype,"service",void 0),n([a.Input(),i("design:type",Boolean)],l.prototype,"isfavorites",void 0),n([a.Input(),i("design:type",Number)],l.prototype,"index",void 0),n([a.Input(),i("design:type",Boolean)],l.prototype,"isOverlayFullView",void 0),n([a.Input(),i("design:type",Boolean)],l.prototype,"loadAdditionalServices",void 0),l=n([a.Component({selector:"prm-full-view-service-container",
templateUrl:"components/search/fullView/fullViewServiceContainer/full-view-service-container.html"}),o(0,a.Inject("$rootScope")),i("design:paramtypes",[Object,s.TagsService,c.ConfigurationUtil])],l),r.PrmFullViewServiceContainer=l},{"../../../nddUtils/configurationUtil.service":596,"../../../tags/tags.service":870,"ng-metadata/core":362}],695:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./loginAlmaMashup.service"),a=e("./loginAlmaMashup.directive"),s=e("./fullViewServiceContainer.directive"),c=function(){function e(){}return e}();c=n([i.NgModule({declarations:[a.PrmLoginAlmaMashup,s.PrmFullViewServiceContainer],providers:[o.LoginAlmaMashupService],imports:[]})],c),r.FullViewContainerServiceModule=c},{"./fullViewServiceContainer.directive":694,"./loginAlmaMashup.directive":696,"./loginAlmaMashup.service":697,"ng-metadata/core":362}],696:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("../../../security/userSessionManager.service"),s=e("./loginAlmaMashup.service"),c=function(){function e(e,t){this.userSessionManagerService=e,this.loginAlmaMashupService=t,this.indexAlma=-1}return e.prototype.ngOnInit=function(){this.loginAlmaMashupService.setIndex(this.index)},e.prototype.isLoggedIn=function(){return!this.userSessionManagerService.isGuest()},e.prototype.isLoggedInIDP=function(){return this.userSessionManagerService.isLoggedInIDP()},e.prototype.getIndexFullView=function(){return this.loginAlmaMashupService.getIndex()},e}();n([o.Input(),i("design:type",Number)],c.prototype,"index",void 0),c=n([o.Component({selector:"prm-login-alma-mashup",templateUrl:"components/search/fullView/fullViewServiceContainer/login-alma-mashup.html"}),i("design:paramtypes",[a.UserSessionManagerService,s.LoginAlmaMashupService])],c),r.PrmLoginAlmaMashup=c},{"../../../security/userSessionManager.service":853,"./loginAlmaMashup.service":697,"ng-metadata/core":362}],697:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=function(){function e(){this.indexAlma=-1}return e.prototype.setIndex=function(e){this.indexAlma===-1&&(this.indexAlma=e)},e.prototype.getIndex=function(){return this.indexAlma},e.prototype.resetIndex=function(){this.indexAlma=-1},e}();a=n([o.Injectable(),i("design:paramtypes",[])],a),r.LoginAlmaMashupService=a,r.default=[]},{"ng-metadata/core":362}],698:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../fullView.service"),c=e("iframe-resizer"),l=function(){function e(e,t){this.$sce=e,this.fullViewService=t,this.serviceText=null}return e.prototype.ngOnInit=function(){this.isLinkAvailable()||this.fullViewService.disableService("getit_link1")},e.prototype.iframeResize=function(){c.iframeResizer({log:!1,checkOrigin:!1},".mashup-iframe")},e.prototype.getLink=function(){var e=decodeURI(this.linksArray[0].link);return e=e.replace("%3A%2F%2F","://"),this.$sce.trustAsResourceUrl(encodeURI(e)+"&is_new_ui=true&Force_direct=false")},e.prototype.getLabel=function(){return"getit."+this.linksArray[0].getItTabText},e.prototype.isLinkAvailable=function(){return null!==this.linksArray[0].link&&"null"!==this.linksArray[0].link.toString()},e}();n([a.Input(),i("design:type",Array)],l.prototype,"linksArray",void 0),l=n([a.Component({selector:"prm-alma-mashup",templateUrl:"components/search/fullView/getit/almaMashup/almaMashup.html"}),o(0,a.Inject("$sce")),i("design:paramtypes",[Object,s.FullViewService])],l),r.PrmAlmaMashup=l},{"../../fullView.service":688,"iframe-resizer":33,"ng-metadata/core":362}],699:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=function(){function e(e){this.opacLocations=e,this.TABS={INST_LIST:0,MASHUP:1},this._selectedTab=this.TABS.INST_LIST,this._selectedLinks=[]}return e.prototype.getInstitutions=function(){return this.item.delivery.almaInstitutionsList||[]},Object.defineProperty(e.prototype,"selectedTab",{get:function(){return this._selectedTab},set:function(e){this._selectedTab=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"links",{get:function(){return this._selectedLinks||[]},enumerable:!0,configurable:!0}),e.prototype.loadMashup=function(e){this._selectedLinks=e.getitLink},e.prototype.unloadMashup=function(){this._selectedLinks=[]},e}();n([a.Input(),i("design:type",Object)],s.prototype,"item",void 0),s=n([a.Component({selector:"prm-alma-more-inst",templateUrl:"components/search/fullView/getit/almaMoreInst/alma-more-inst.html"}),o(0,a.Inject("opacLocations")),i("design:paramtypes",[Object])],s),r.PrmAlmaMoreInst=s},{"ng-metadata/core":362}],700:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./almaViewit.service"),c=e("../../fullView.service"),l=e("../../../../security/jwtUtil.service"),u=function(){function e(e,t,r,n){this.viewItService=e,this.$scope=t,this.fullViewService=r,this.jwtUtilService=n,this.servicesMap={}}return e.prototype.ngOnInit=function(){var e=this;this.$scope.$watch(function(){return e.item.delivery?e.item.delivery.electronicServices:void 0},function(){e.servicesMap={}})},e.prototype.getServices=function(e){var t=this;if(this.servicesMap[e])return this.servicesMap[e];if(this.item&&this.item.delivery&&this.item.delivery.electronicServices){var r=this.item.delivery.electronicServices.filter(function(t){return e===t.serviceType}).map(function(e,r,n){return e.publicNote=t.viewItService.stripHtml(e.publicNote),e.authNote=t.viewItService.stripHtml(e.authNote),e.parsedAvailiability=t.viewItService.splitHtml(e.availiability),e});return this.servicesMap[e]=r,r}},Object.defineProperty(e.prototype,"isCalculateSvcDone",{get:function(){return this.fullViewService.calculatePrimaViewItDone()},enumerable:!0,configurable:!0}),e.prototype.showSignInLink=function(){if(this.isSignedIn()||!this.fullViewService.calculatePrimaViewItDone())return!1;var e=this.getServices("DIGITAL");return!!(this.item.delivery.hasD||e&&e.length>0)},e.prototype.isSignedIn=function(){var e=this.jwtUtilService.getDecodedToken().userGroup;return"GUEST"!==e},Object.defineProperty(e.prototype,"signInLink",{get:function(){return this.viewItService.signInLink},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"servicesList",{get:function(){return this.viewItService.getServicesList()},enumerable:!0,configurable:!0}),e}();n([a.Input(),i("design:type",Object)],u.prototype,"item",void 0),u=n([a.Component({selector:"prm-alma-viewit",templateUrl:"components/search/fullView/getit/almaViewit/almaViewit.html"}),o(1,a.Inject("$scope")),i("design:paramtypes",[s.ViewItService,Object,c.FullViewService,l.JwtUtilService])],u),r.PrmAlmaViewit=u},{"../../../../security/jwtUtil.service":842,"../../fullView.service":688,"./almaViewit.service":702,"ng-metadata/core":362}],701:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./almaViewit.service"),a=e("./almaViewit.directive"),s=e("./almaViewitItems.directive"),c=function(){function e(){}return e}();c=n([i.NgModule({declarations:[a.PrmAlmaViewit,s.PrmAlmaViewitItems],providers:[o.ViewItService],imports:[]})],c),r.AlmaViewitModule=c},{"./almaViewit.directive":700,"./almaViewit.service":702,"./almaViewitItems.directive":703,"ng-metadata/core":362}],702:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../../infra/widgets/alerts/alertFactory.service"),c=e("../../../../mappingTablesCache/mappingTablesCache.service"),l=function(){function e(e,t,r){this.$http=e,this.alertFactory=t,this.mappingTablesCache=r,this.htmlRegex=/(<([^>]+)>)/gi,this.htmlSpaceRegex=/&nbsp;/gi,this.servicesList=[{name:"ELECTRONIC",header:"viewit.fulltext"},{name:"ELECTRONIC_RELATED",header:"c.uresolverServicesForRelatedTitles"},{name:"DIGITAL",header:"ui.viewit.digital_version"}],this.initSignInLink(),this.setServicesListOrder()}return e.prototype.initSignInLink=function(){this._signInLink=this.alertFactory.create(s.ALERT_MSG_TYPE.REQUEST);var e='<span class="bar-text margin-right-small" translate="nui.viewit.signin"></span><prm-authentication [is-logged-in]="ctrl.userName().length > 0" flex="none"></prm-authentication>';this._signInLink.show(e)},e.prototype.setServicesListOrder=function(){var e=!0,t=this.mappingTablesCache.findByProperties(this.mappingTablesCache.tables.ALMA_VIEWIT_CONFIG,{target:"electronic_services_before_digital"});if(t&&t.length>0&&"true"!==t[0].source1&&(e=!1),!e){var r=[this.servicesList[2]];r=r.concat(this.servicesList.slice(0,2)),this.servicesList=r}},e.prototype.getLicense=function(e){var t=this;if(!e.licence){if(!e.licenceUrl)return"";var r={method:"GET",url:e.licenceUrl,params:null,data:null};this.$http(r).then(function(r){r&&r.data&&r.data.displayValue&&(e.licence=t.splitHtml(r.data.displayValue))})}},e.prototype.splitHtml=function(e){if(e){var t=e.replace(this.htmlRegex,";;").replace(this.htmlSpaceRegex,"").split(";;");return t&&(t=t.filter(function(e){return e&&0!==e.length})),t}},e.prototype.stripHtml=function(e){if(e)return e.replace(this.htmlRegex,"").replace(this.htmlSpaceRegex,"")},Object.defineProperty(e.prototype,"signInLink",{get:function(){return this._signInLink},set:function(e){this._signInLink=e},enumerable:!0,configurable:!0}),e.prototype.getServicesList=function(){return this.servicesList},e}();l=n([a.Injectable(),o(0,a.Inject("$http")),i("design:paramtypes",[Function,s.AlertFactory,c.MappingTablesCache])],l),r.ViewItService=l},{"../../../../infra/widgets/alerts/alertFactory.service":574,"../../../../mappingTablesCache/mappingTablesCache.service":592,"ng-metadata/core":362}],703:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./almaViewit.service"),c=function(){function e(e,t,r,n){this.availabilityLineIcons=e,this.viewItIcons=t,this.viewItService=r,this.$window=n}return e.prototype.getLicense=function(e,t){this.viewItService.getLicense(e),t.stopPropagation(),e.toggleLicense=!e.toggleLicense},e.prototype.onClick=function(e){getSelection().toString()||("DIGITAL"!==e.serviceType||e.hasAccess)&&this.$window.open(e.serviceUrl,"_blank")},e.prototype.isLinkable=function(e){return!("DIGITAL"===e.serviceType&&!e.hasAccess)},e.prototype.disableClick=function(e){e.stopPropagation()},e}();n([a.Input(),i("design:type",Object)],c.prototype,"services",void 0),n([a.Input(),i("design:type",Object)],c.prototype,"header",void 0),c=n([a.Component({selector:"prm-alma-viewit-items",templateUrl:"components/search/fullView/getit/almaViewit/almaViewitItems.html"}),o(0,a.Inject("availabilityLineIcons")),o(1,a.Inject("viewItIcons")),o(3,a.Inject("$window")),i("design:paramtypes",[Object,Object,s.ViewItService,Object])],c),r.PrmAlmaViewitItems=c},{"./almaViewit.service":702,"ng-metadata/core":362}],704:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./opac/opac.module"),a=e("./almaMashup/almaMashup.directive"),s=e("./almaMoreInst/almaMoreInst.directive"),c=e("./viewOnline/viewOnline.directive"),l=e("./almaViewit/almaViewit.module"),u=e("./howToGetit/howToGetit.module"),d=function(){function e(){}return e}();d=n([i.NgModule({declarations:[a.PrmAlmaMashup,s.PrmAlmaMoreInst,c.PrmViewOnline],providers:[],imports:[l.AlmaViewitModule,u.HowToGetitModule,o.OpacModule]})],d),r.GetitModule=d},{"./almaMashup/almaMashup.directive":698,"./almaMoreInst/almaMoreInst.directive":699,"./almaViewit/almaViewit.module":701,"./howToGetit/howToGetit.module":705,"./opac/opac.module":726,"./viewOnline/viewOnline.directive":757,"ng-metadata/core":362}],705:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./htgiService.service"),a=e("./howovp.directive"),s=e("./htgiBackButton.directive"),c=e("./htgiService.directive"),l=e("./htgiTabs.directive"),u=function(){function e(){}return e}();u=n([i.NgModule({declarations:[l.AlmaHowovpTabs,c.AlmaHowToGetit,s.AlmaHtgiBackButton,a.PrmAlmaHowovp],providers:[o.AlmaHowToGetitService],imports:[]})],u),r.HowToGetitModule=u},{"./howovp.directive":706,"./htgiBackButton.directive":707,"./htgiService.directive":708,"./htgiService.service":709,"./htgiTabs.directive":710,"ng-metadata/core":362}],706:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../fullView.service"),c=e("../../../../security/userSessionManager.service"),l=e("./htgiService.service"),u=e("../../../../appConfig/appConfigForward"),d=e("../opac/request/request.service"),p=e("../opac/serviceButton.service"),f=e("../opac/opac.directive"),h=e("../opac/opac.service"),m=function(){function e(e,t,r,n,i,o,s,c){this.opacService=e,this.fullViewService=t,this.userSessionManagerService=r,this.almaHowToGetitService=n,this.requestService=i,this.serviceButtonService=o,this.$window=s,this.opacLocations=c,this.institutionCode=u.getInstitutionCode(),this.parentTab=f.OPAC_TAB.LOCATIONS,this.changeTabEvent=new a.EventEmitter}return Object.defineProperty(e.prototype,"servicesListIsLoading",{get:function(){return this._servicesListIsLoading},set:function(e){this._servicesListIsLoading=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"services",{get:function(){return this.almaHowToGetitService.services},enumerable:!0,configurable:!0}),e.prototype.isLoggedIn=function(){return this.userSessionManagerService.getUserName()&&this.userSessionManagerService.getUserName().length>0},e.prototype.ngOnInit=function(){this.getHowToGetitServicesFromIls(),this._servicesAdditionalParams=this.requestService.getServicesAdditionalParams(this.item)},e.prototype.getServiceAdditionalParams=function(e){return this._servicesAdditionalParams[e.type]},e.prototype.getHowToGetitServicesFromIls=function(){var e=this;if(this.almaHowToGetitService.services={},this.servicesListIsLoading=!1,this.almaHowToGetitService.setMessages(this.almaHowToGetitService.getHtml(this.isLoggedIn(),void 0)),this.servicesListIsLoading=!0,this.item.delivery.serviceMode[0]&&"howovp"===this.item.delivery.serviceMode[0]){var t=this.institutionCode,r=void 0;this.item.delivery&&(r=this.item.delivery.physicalServiceId),this.opacService.getIlsServicesList(-1,t,r).then(function(t){e.almaHowToGetitService.services=t.data;var r=t["reply-text"],n=!t.data.serviceinfo||0===t.data.serviceinfo.length||"N"===t.data.serviceinfo[0].allowed;e.isLoggedIn()&&r&&"0000"!==t["reply-code"]&&n?e.almaHowToGetitService.setMessages(e.almaHowToGetitService.getHtml(!0,r)):!e.isLoggedIn()&&n?e.almaHowToGetitService.setMessages(e.almaHowToGetitService.getHtml(!1,"nui.request.signin")):e.isLoggedIn()||n||e.almaHowToGetitService.setMessages(e.almaHowToGetitService.getHtml(!1,"nui.request.signin_additional")),e.servicesListIsLoading=!1},function(t){e.servicesListIsLoading=!1})}else this.servicesListIsLoading=!1},e.prototype.onClick=function(e){var t=this;if("OvL"===e["service-type"]){var r=e["link-to-service"];void 0!==r&&window.open(r,"_blank")}else this.serviceButtonService.makeIlsRequest(e,this.getServiceAdditionalParams(e)).then(function(e){var r={referer:t.parentTab,dest:f.OPAC_TAB.REQUEST};t.changeTabEvent.emit(r)})},e.prototype.isOvp=function(e){return"OvP"===e["service-type"]},e}();n([a.Input(),i("design:type",Object)],m.prototype,"item",void 0),n([a.Input(),i("design:type",String)],m.prototype,"serviceMode",void 0),n([a.Output(),i("design:type",a.EventEmitter)],m.prototype,"changeTabEvent",void 0),m=n([a.Component({selector:"alma-howovp",templateUrl:"components/search/fullView/getit/howToGetit/howovp.html"}),o(6,a.Inject("$window")),o(7,a.Inject("opacLocations")),i("design:paramtypes",[h.OpacService,s.FullViewService,c.UserSessionManagerService,l.AlmaHowToGetitService,d.RequestService,p.ServiceButtonService,Object,Object])],m),r.PrmAlmaHowovp=m},{"../../../../appConfig/appConfigForward":484,"../../../../security/userSessionManager.service":853,"../../fullView.service":688,"../opac/opac.directive":725,"../opac/opac.service":727,"../opac/request/request.service":730,"../opac/serviceButton.service":756,"./htgiService.service":709,"ng-metadata/core":362}],707:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../../infra/dataStructures/collections/stack/limitedHistoryStack.structure"),c=e("../opac/opac.directive"),l=function(){function e(e){this.opacLocations=e,this.changeTabEvent=new a.EventEmitter}return Object.defineProperty(e.prototype,"label",{get:function(){var e=this.historyStack.peek();switch(e){case c.OPAC_TAB.LOCATIONS:return"htgi.back_to_htgi_requests";default:return"eshelf.back"}},enumerable:!0,configurable:!0}),e.prototype.goBack=function(){var e=this.historyStack.pop();this.changeTabEvent.emit({dest:e})},e}();n([a.Input(),i("design:type",s.LimitedHistoryStack)],l.prototype,"historyStack",void 0),n([a.Output(),i("design:type",a.EventEmitter)],l.prototype,"changeTabEvent",void 0),l=n([a.Component({selector:"alma-htgi-back-button",templateUrl:"components/search/fullView/getit/howToGetit/htgi-back-button.html"}),o(0,a.Inject("opacLocations")),i("design:paramtypes",[Object])],l),r.AlmaHtgiBackButton=l},{"../../../../infra/dataStructures/collections/stack/limitedHistoryStack.structure":537,"../opac/opac.directive":725,"ng-metadata/core":362}],708:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("../../fullView.service"),s=function(){function e(e){this.fullViewService=e}return Object.defineProperty(e.prototype,"isCalculateSvcIdDone",{get:function(){return this.fullViewService.isCalculateSvcIdDone()},enumerable:!0,configurable:!0}),e}();n([o.Input(),i("design:type",Object)],s.prototype,"item",void 0),n([o.Input(),i("design:type",String)],s.prototype,"serviceMode",void 0),s=n([o.Component({selector:"alma-htgi-svc",templateUrl:"components/search/fullView/getit/howToGetit/htgi-service.html"}),i("design:paramtypes",[a.FullViewService])],s),r.AlmaHowToGetit=s},{"../../fullView.service":688,"ng-metadata/core":362}],709:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../../infra/widgets/alerts/alertFactory.service"),c=e("../../../../appConfig/appConfig.module"),l=function(){function e(e,t,r){this.restBaseURLs=e,this.$http=t,this.alertService=r,this._reqAlert=this.alertService.create(s.ALERT_MSG_TYPE.REQUEST)}return Object.defineProperty(e.prototype,"services",{get:function(){return this._services},set:function(e){this._services=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reqAlert",{get:function(){return this._reqAlert},enumerable:!0,configurable:!0}),e.prototype.setMessages=function(e){this._reqAlert.show(e)},e.prototype.getHtml=function(e,t){var r="";return!e&&t?r='<span class="bar-text margin-right-small" translate="'+t+'"></span><prm-authentication [is-logged-in]="ctrl.userName().length > 0" flex="none"></prm-authentication>':t&&(r='<span class="bar-text margin-right-small" translate="'+t+'"></span>'),r},e}();l=n([a.Injectable(),o(0,a.Inject("restBaseURLs")),o(1,a.Inject("$http")),i("design:paramtypes",[Object,Function,s.AlertFactory])],l),r.AlmaHowToGetitService=l,r.default=[c.default.name]},{"../../../../appConfig/appConfig.module":482,"../../../../infra/widgets/alerts/alertFactory.service":574,"ng-metadata/core":362}],710:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=(e("angular-material"),e("ng-metadata/core")),a=e("../../fullView.service"),s=e("../../../../security/userSessionManager.service"),c=e("./htgiService.service"),l=e("../opac/opac.directive"),u=e("../../../../infra/dataStructures/collections/stack/limitedHistoryStack.structure"),d=e("../opac/opac.service"),p=function(){function e(e,t,r,n){this.userSessionManagerService=e,this.almaHowToGetitService=t,this.fullViewService=r,this.opacService=n,this.changeTabEvent=new o.EventEmitter,this.defaultTab=l.OPAC_TAB.LOCATIONS,this.BACK_HISTORY_SIZE=12,this.backToHistoryStack=new u.LimitedHistoryStack(this.BACK_HISTORY_SIZE),this._selectedTab=this.defaultTab}return e.prototype.onChangeTabEvent=function(e){var t=e;null===e?this.selectedTab=this.backToHistoryStack.pop()||this.defaultTab:(void 0!==t.referer&&this.backToHistoryStack.push(t.referer),t.service&&(this.service=t.service),this.selectedTab=t.dest)},e.prototype.isLoggedIn=function(){return this.userSessionManagerService.getUserName()&&this.userSessionManagerService.getUserName().length>0},Object.defineProperty(e.prototype,"selectedTab",{get:function(){return this._selectedTab},set:function(e){this._selectedTab=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reqAlert",{get:function(){return this.isLoggedIn()&&this.almaHowToGetitService.reqAlert&&this.almaHowToGetitService.reqAlert.getMsgHtml()===this.almaHowToGetitService.getHtml(!1,void 0)&&this.almaHowToGetitService.setMessages(this.almaHowToGetitService.getHtml(this.isLoggedIn(),void 0)),this.almaHowToGetitService.reqAlert},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCalculateSvcIdDone",{get:function(){return this.fullViewService.isCalculateSvcIdDone()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"responseStatus",{get:function(){return this.opacService.responseStatus},enumerable:!0,configurable:!0}),e}();n([o.Input(),i("design:type",Object)],p.prototype,"item",void 0),n([o.Output(),i("design:type",o.EventEmitter)],p.prototype,"changeTabEvent",void 0),p=n([o.Component({selector:"alma-htgi-tabs",templateUrl:"components/search/fullView/getit/howToGetit/htgi-tabs.html"}),i("design:paramtypes",[s.UserSessionManagerService,c.AlmaHowToGetitService,a.FullViewService,d.OpacService])],p),r.AlmaHowovpTabs=p},{"../../../../infra/dataStructures/collections/stack/limitedHistoryStack.structure":537,"../../../../security/userSessionManager.service":853,"../../fullView.service":688,"../opac/opac.directive":725,"../opac/opac.service":727,"./htgiService.service":709,"angular-material":17,"ng-metadata/core":362}],711:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../../infra/dataStructures/collections/stack/limitedHistoryStack.structure"),c=e("./opac.directive"),l=function(){function e(e){this.opacLocations=e,this.changeTabEvent=new a.EventEmitter}return Object.defineProperty(e.prototype,"label",{get:function(){var e=this.historyStack.peek();switch(e){case c.OPAC_TAB.LOCATIONS:return"nui.locations.back";case c.OPAC_TAB.ITEMS:return"nui.items.back";default:return"eshelf.back"}},enumerable:!0,configurable:!0}),e.prototype.goBack=function(){var e=this.historyStack.pop();this.requestStatus?(e=this.historyStack.pop(),this.changeTabEvent.emit({dest:e,referer:this.historyStack.peek(),clearStack:!0})):this.changeTabEvent.emit({dest:e})},e}();n([a.Input(),i("design:type",s.LimitedHistoryStack)],l.prototype,"historyStack",void 0),n([a.Input(),i("design:type",Boolean)],l.prototype,"requestStatus",void 0),n([a.Output(),i("design:type",a.EventEmitter)],l.prototype,"changeTabEvent",void 0),l=n([a.Component({selector:"prm-opac-back-button",templateUrl:"components/search/fullView/getit/opac/back-button.html"}),o(0,a.Inject("opacLocations")),i("design:paramtypes",[Object])],l),r.PrmOpacBackButton=l},{"../../../../infra/dataStructures/collections/stack/limitedHistoryStack.structure":537,"./opac.directive":725,"ng-metadata/core":362
}],712:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("../opac.service"),s=e("../request/request.service"),c=e("../opac.directive"),l=e("../../../../../nddUtils/dateUtils.service"),u=e("../../../../../infra/formBuilder/formBuilder.service"),d=e("../../../../../nddUtils/configurationUtil.service"),p=e("lodash/filter"),f=e("lodash/forEach"),h=e("lodash/cloneDeep"),m=function(){function e(e,t,r){this.opacService=e,this.requestService=t,this.configurationUtil=r,this.changeTabEvent=new o.EventEmitter,this.disable=!1}return Object.defineProperty(e.prototype,"formData",{get:function(){return this.requestService.formData},set:function(e){this.requestService.formData=e},enumerable:!0,configurable:!0}),e.prototype.isDisabled=function(){return this.disable},e.prototype.getSubmitMessage=function(){return this.disable?"Request in process":"I agree with the terms"},e.prototype.cancel=function(){this.changeTabEvent.emit(null)},e.prototype.commit=function(){var e=this;this.disable=!0;var t=this.requestService.service,r=h(this.formData);r.group_id||(r.group_id=this.requestService.ilsApiId),r.item_id&&(t["link-to-service"]=t["link-to-service"]+"/item/"+r.item_id),this.manipulatePostData(r),this.opacService.makeIlsCall(t,r,"POST").then(function(t){e.disable=!1,e.opacService.responseStatus=new a.StatusMsg("ok"===t.status,t["reply-text"]);var r={dest:c.OPAC_TAB.RESPONSE};e.changeTabEvent.emit(r)})},e.prototype.manipulatePostData=function(e){var t=this;f(e,function(r,n){var i=t.getFieldByName(t.requestService.form,n);if(i){if(i.fieldType===u.FormBuilderEnums.FIELD_TYPE.INTERNAL)return void delete e[n];if(i.uiType===u.FormBuilderEnums.UI_TYPE.DATE){var o=new l.DateUtils;e[n]=o.convertDateTypeToIlsDateString(e[n])}}})},e.prototype.getFieldByName=function(e,t){var r=p(e,function(e){return e.name===t});return r[0]},e.prototype.getServiceType=function(){var e=this.requestService.service;if(e)return e.type},e.prototype.getTitleLabel=function(){if("suprima"===this.configurationUtil.getBackendSystem()){var e=this.getServiceType();return"AlmaResourceSharing"===e?"almaResourceSharing.copyright.title":"almaDigitization.copyright.title"}return"illrequest.copyright.title"},e.prototype.getMessageLabel=function(){if("suprima"===this.configurationUtil.getBackendSystem()){var e=this.getServiceType();return"AlmaResourceSharing"===e?"almaResourceSharing.copyright.message":"almaDigitization.copyright.message"}return"illrequest.copyright.message"},e.prototype.getSubTitleLabel=function(){if("suprima"===this.configurationUtil.getBackendSystem()){var e=this.getServiceType();return"AlmaResourceSharing"===e?"almaResourceSharing.copyright.sub_title":"almaDigitization.copyright.sub_title"}return"illrequest.copyright.sub_title"},e.prototype.isSuprima=function(){return this.configurationUtil.isSuprima()},e}();n([o.Output(),i("design:type",o.EventEmitter)],m.prototype,"changeTabEvent",void 0),m=n([o.Component({selector:"prm-copyright",templateUrl:"components/search/fullView/getit/opac/copyright/copyright.html"}),i("design:paramtypes",[a.OpacService,s.RequestService,d.ConfigurationUtil])],m),r.PrmCopyright=m},{"../../../../../infra/formBuilder/formBuilder.service":553,"../../../../../nddUtils/configurationUtil.service":596,"../../../../../nddUtils/dateUtils.service":597,"../opac.directive":725,"../opac.service":727,"../request/request.service":730,"lodash/cloneDeep":237,"lodash/filter":246,"lodash/forEach":253,"ng-metadata/core":362}],713:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=(e("angular-material"),e("ng-metadata/core")),s=e("../../../../../../nddUtils/configurationUtil.service"),c=e("./location.service"),l=function(){function e(e,t,r,n){this.locationService=e,this.opacLocations=t,this.$window=r,this.configurationUtil=n,this.clickEvent=new a.EventEmitter}return e.prototype.onClick=function(){this.isOvp()?this.clickEvent.emit(null):this.$window.open(this.location.holdingURL,"_blank")},e.prototype.isOvp=function(){return this.locationService.isOvpLocation(this.location)},e.prototype.getButtonActionLabel=function(){return this.isOvp()?"nui.aria.locations.expand":"nui.aria.account.links.open"},e.prototype.isSuprima=function(){return"suprima"===this.configurationUtil.getBackendSystem()},e}();n([a.Input(),i("design:type",Object)],l.prototype,"location",void 0),n([a.Output(),i("design:type",Object)],l.prototype,"clickEvent",void 0),l=n([a.Component({selector:"prm-location",templateUrl:"components/search/fullView/getit/opac/locations/location/location.html"}),o(1,a.Inject("opacLocations")),o(2,a.Inject("$window")),i("design:paramtypes",[c.LocationService,Object,Object,s.ConfigurationUtil])],l),r.PrmLocation=l},{"../../../../../../nddUtils/configurationUtil.service":596,"./location.service":714,"angular-material":17,"ng-metadata/core":362}],714:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=function(){function e(){}return e.prototype.isOvpLocation=function(e){var t=e.holdingURL;return e.holdingURL||e.location&&(t=e.location.holdingURL),!t||"OVP"===t.toUpperCase()},e}();a=n([o.Injectable(),i("design:paramtypes",[])],a),r.LocationService=a,r.default=[]},{"ng-metadata/core":362}],715:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../../../mappingTablesCache/mappingTablesCache.service"),c=e("../../../../../appConfig/appConfig.module"),l=function(){function e(e,t,r){this.builder=t,this.update(e,r)}return e.prototype.update=function(e,t){var r=this;Object.keys(e).forEach(function(t){r[t]=e[t]})},e}(),u=function(e){function t(t,r,n){var i=e.call(this,t,r,n)||this;return i.isExpanded=!1,i}return n(t,e),t.prototype.update=function(t,r){var n=this;e.prototype.update.call(this,t,r),this.fullDisplayValues=this.builder.getFullDisplayFields(r).map(function(e){return new p(e[1],n[e[1].replace(/_/g,"")])}).filter(function(e){return null!=e.value})},Object.defineProperty(t.prototype,"fullDisplayValues",{get:function(){return this._fullDisplayValues},set:function(e){this._fullDisplayValues=e},enumerable:!0,configurable:!0}),t}(l);r.LocationItemDisplay=u;var d=function(){function e(e){this.mtCache=e,this.fullDisplayFields=[],this.fullPropertiesType="item.global.dataitem",this.noOfItemsType="number_of_items",this.itemsListConf=[],this.summaryHoldingsFields=[],this.noOfItems=""}return e.prototype.getBriefDisplayFields=function(e){this.itemsListConf=[];for(var t=1;t<=4;t++)this.itemsConfig=this.getLocationsConfig(this.mtCache.tables.ITEMS_BRIEF_DISPLAY,"item.brief."+t,e),this.itemsConfig[0]&&this.itemsListConf.push([this.itemsConfig[0].source3,this.itemsConfig[0].source4,this.itemsConfig[0].source5,this.itemsConfig[0].target]);return this.itemsListConf},e.prototype.getLocationsConfig=function(e,t,r){var n=this.mtCache.findByProperties(e,{source1:r,source2:t});return n.length>0?n:this.mtCache.findByProperties(e,{source1:"default",source2:t})},e.prototype.getFullDisplayFields=function(e){if(0===this.fullDisplayFields.length){var t=this.getDetailedDisplayFieldsConfiguration(e),r=[];this.getBriefDisplayFields(e).map(function(e){e.map(function(e){r.push(e?e.replace(/_/g,""):"")})}),t=t.filter(function(e){var t=e[1].replace(/_/g,"");return r.indexOf(t)===-1}),this.fullDisplayFields=t}return this.fullDisplayFields},e.prototype.getDetailedDisplayFieldsConfiguration=function(e){var t=this,r=this.mtCache.findByProperties(this.mtCache.tables.LOCATION_ITEM_CONTENT,{source1:e}),n=this.mtCache.findByProperties(this.mtCache.tables.LOCATION_ITEM_CONTENT,{source1:"default"}),i=r.filter(function(e){if(e.source2.includes(t.noOfItemsType))return e});0===i.length&&(i=n.filter(function(e){if(e.source2.includes(t.noOfItemsType))return e})),this.noOfItems=i[0]?i[0].target:"0";var o=r.length>0?r:n;return o.filter(function(e){if(e.source2.includes(t.fullPropertiesType))return e}).sort(function(e,t){var r=e.source2.substr(e.source2.lastIndexOf(".")+1,e.source2.length-1),n=t.source2.substr(t.source2.lastIndexOf(".")+1,t.source2.length-1);return parseInt(r)-parseInt(n)}).map(function(e){var t=e.target.replace(/_/g,""),r=[e.source2,t];return r})},e.prototype.getOrderedSummaryHoldingsInfoConfiguration=function(e,t){var r=this.mtCache.findByProperties(this.mtCache.tables.HOLDINGS_RECORD_CONFIG,{source1:e,source3:t});return 0===r.length&&(r=this.mtCache.findByProperties(this.mtCache.tables.HOLDINGS_RECORD_CONFIG,{source1:"default",source3:t})),0===r.length&&(r=this.mtCache.findByProperties(this.mtCache.tables.HOLDINGS_RECORD_CONFIG,{source1:e,source3:"Default"})),0===r.length&&(r=this.mtCache.findByProperties(this.mtCache.tables.HOLDINGS_RECORD_CONFIG,{source1:"default",source3:"Default"})),this.summaryHoldingsFields=r.sort(function(e,t){return parseInt(e.source4)-parseInt(t.source4)}).map(function(e){return e.source2}),this.summaryHoldingsFields},e.prototype.getShowMoreBulkSize=function(){var e=this.mtCache.findByProperties(this.mtCache.tables.BULK_DEFINITION,{source1:"OvP - Items Paging"});return e.length>0?Number(e[0].target):0},e}();d=i([a.Injectable(),o("design:paramtypes",[s.MappingTablesCache])],d),r.LocationBuilder=d;var p=function(){function e(e,t){this.key=e,this.value=t}return e}();r.default=[c.default.name]},{"../../../../../appConfig/appConfig.module":482,"../../../../../mappingTablesCache/mappingTablesCache.service":592,"ng-metadata/core":362}],716:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("../opac.directive"),s=e("angular"),c=e("ng-metadata/core"),l=e("./locations.service"),u=e("../../../../../security/userSessionManager.service"),d=e("../locationsFilter/locationsFilter.service"),p=e("../request/request.service"),f=e("../../../../../nddUtils/configurationUtil.service"),h=e("../../../../../infra/highlight.service"),m=e("../../../../../infra/lang/changeLang.service"),g=e("lodash/forEach"),v=(e("lodash/assign"),function(){function e(e,t,r,n,i,o,a,s){this.locationsService=e,this.opacLocations=t,this.userSessionManagerService=r,this.locationsFilterService=n,this.requestService=i,this.configurationUtil=o,this.highlightService=a,this.changeLangService=s,this.changeTabEvent=new c.EventEmitter,this.configurationUtil=o,this.isExpandAll=!1}return e.prototype.isMoreThanOneLoc=function(e){return e.delivery.holding.length>1},e.prototype.isSuprima=function(){return"suprima"===this.configurationUtil.getBackendSystem()},e.prototype.isItemsFilterDisable=function(){return"suprima"!==this.configurationUtil.getBackendSystem()&&item.delivery.holding.length>1},e.prototype.ngOnInit=function(){this._servicesAdditionalParams=this.requestService.getServicesAdditionalParams(this.item)},Object.defineProperty(e.prototype,"servicesAdditionalParams",{get:function(){return this._servicesAdditionalParams},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFilter",{get:function(){var e=(this.locationsService.isSingleLocation()||"suprima"===this.configurationUtil.getBackendSystem())&&(this.locationsFilterService.dropDownOptions.years.length>1||this.locationsFilterService.dropDownOptions.volumes.length>1||this.locationsFilterService.dropDownOptions.descriptions.length>1);return this.locationsService.isfilter&&e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filtered",{get:function(){return this.locationsService.isFiltered},enumerable:!0,configurable:!0}),e.prototype.getServiceAdditionalParams=function(e,t){var r=this.servicesAdditionalParams[t.type];return!r||s.equals({},r)?e.additionalData:(g(e.additionalData,function(e,t){r[t]=e}),r)},e.prototype.allowService=function(){return this.loc&&this.loc.location&&(!s.isDefined(this.loc.location.isValidUser)||this.loc.location.isValidUser)},e.prototype.goToLocTabAfterClearFilter=function(e){var t={referer:a.OPAC_TAB.ITEMS,dest:a.OPAC_TAB.LOCATIONS,clearStack:e};this.changeTabEvent.emit(t)},e.prototype.filterClick=function(){this.locationsService.isFiltered=!1,this.locationsFilterVisible=!this.locationsFilterVisible,this.locationsFilterVisible||this.clearFilters()},e.prototype.getlocationsItems=function(e,t){return this.isSuprima()&&this.locationsFilterService.isFilterClicked?this.locationsService.getLocationsItems([[e]],t,!1,this.locationsFilterService.volumeFilter,this.locationsFilterService.yearFilter,this.locationsFilterService.descriptionFilter):this.locationsService.getLocationsItems([[e]],t,!1)},e.prototype.toggleExpandAll=function(e){e.isExpandAll=!e.isExpandAll,this.locationsService.currentLoc.items.forEach(function(t){t.isExpanded=e.isExpandAll})},Object.defineProperty(e.prototype,"currLoc",{get:function(){return this.locationsService.currentLoc&&void 0===this.locationsService.currentLoc.locationNoItems&&(this.locationsService.currentLoc.locationNoItems=!0),this.locationsService.currentLoc},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inProgress",{get:function(){return this.locationsService.isItemsResquestInProgress},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabId",{get:function(){return a.OPAC_TAB.ITEMS},enumerable:!0,configurable:!0}),e.prototype.isLoggedIn=function(){return this.userSessionManagerService.getUserName()&&this.userSessionManagerService.getUserName().length>0},Object.defineProperty(e.prototype,"locationsFilterVisible",{get:function(){return this.locationsFilterService.locationsFilterVisible},set:function(e){this.locationsFilterService.locationsFilterVisible=e},enumerable:!0,configurable:!0}),e.prototype.handleFilterEvent=function(e){var t=this,r=this.locationsService.performFilter(e);r&&r.then(function(r){var n=t.locationsService.results[0][0]?t.locationsService.results[0][0]:t.locationsService.results[1][0];t.locationsService.getItems(n,!1,!0,e.volume,e.year,e.description)})},e.prototype.clearFilters=function(){this.locationsService.isFiltered=!1,this.locationsService.clearFilters(this.item,!0),this.isMoreThanOneLoc(this.item)?this.goToLocTabAfterClearFilter(!0):"suprima"===this.configurationUtil.getBackendSystem()&&this.locationsService.getItems(this.loc,!1,!1)},e.prototype.onChangeTabEvent=function(e){this.changeTabEvent.emit(e)},e.prototype.combineStringLastChar=function(e){return this.highlightService.combineStringLastChar(e)},e}());n([c.Input(),i("design:type",Object)],v.prototype,"loc",void 0),n([c.Input(),i("design:type",Object)],v.prototype,"item",void 0),n([c.Output(),i("design:type",c.EventEmitter)],v.prototype,"changeTabEvent",void 0),v=n([c.Component({selector:"prm-location-items",templateUrl:"components/search/fullView/getit/opac/locations/location-items.html"}),o(1,c.Inject("opacLocations")),i("design:paramtypes",[l.LocationsService,Object,u.UserSessionManagerService,d.LocationsFilterService,p.RequestService,f.ConfigurationUtil,h.HighlightService,m.ChangeLangService])],v),r.PrmLocationItems=v},{"../../../../../infra/highlight.service":555,"../../../../../infra/lang/changeLang.service":561,"../../../../../nddUtils/configurationUtil.service":596,"../../../../../security/userSessionManager.service":853,"../locationsFilter/locationsFilter.service":724,"../opac.directive":725,"../request/request.service":730,"./locations.service":718,angular:"angular","lodash/assign":234,"lodash/forEach":253,"ng-metadata/core":362}],717:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./locations.service"),c=e("../opac.service"),l=e("../opac.directive"),u=e("../locationsFilter/locationsFilter.service"),d=e("./location/location.service"),p=function(){function e(e,t,r,n,i){this.locationsService=e,this.opacService=t,this.opacLocations=r,this.locationsFilterService=n,this.locationService=i,this.changeTabEvent=new a.EventEmitter,this.locationsService=e,this.opacLocations=r,Object.defineProperty(this,"locations",{get:function(){return this.locationsService.getLocations()},set:function(){}})}return e.prototype.activate=function(){this.locationsService.setLocations(this.item);this.locationsService.results[1];this.checkAndSwitchToItemsTabAutomatically(0)},e.prototype.checkAndSwitchToItemsTabAutomatically=function(e){var t=this;e>10||(0!==e||this.locationsService.isSingleOvpLocation())&&(this.item.rtaInProgress?(e++,setTimeout(function(){t.checkAndSwitchToItemsTabAutomatically(e)},100)):this.switchToItemsTab(!1))},e.prototype.switchToItemsTab=function(e,t,r,n){var i,o=this.locationsService.results[0].length>0||this.locationsService.results[1].length>0;o&&(i=this.locationsService.results[0][0]?this.locationsService.results[0][0]:this.locationsService.results[1][0]),this.gotoLocationItemsTab(i,!1,e,t,r,n)},e.prototype.ngOnInit=function(){this.locationsFilterService.deleteFilterOptions(),this.activate()},e.prototype.gotoLocationItemsTab=function(e,t,r,n,i,o){r||(this.locationsService.isFiltered=!1),this.locationsService.getItems(e,t,r,n,i,o);var a={referer:l.OPAC_TAB.LOCATIONS,dest:l.OPAC_TAB.ITEMS,loc:e};this.changeTabEvent.emit(a)},e.prototype.getLocations=function(){return this.locations[0].filter(function(e){return!e.location.relatedTitle||null==e.location.relatedTitle||""===e.location.relatedTitle})},e.prototype.getRelatedLocations=function(){return this.locations[0].filter(function(e){return null!=e.location.relatedTitle&&""!==e.location.relatedTitle})},Object.defineProperty(e.prototype,"hasRelatedLocations",{get:function(){var e=!1,t=this.locations.reduce(function(e,t){return e.concat(t)});return t.forEach(function(t,r){null!=t.location.relatedTitle&&""!==t.location.relatedTitle&&(e=!0)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasRelatedTitle",{get:function(e){return null!=e.relatedTitle&&""!==e.relatedTitle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFilter",{get:function(){return this.locationsService.isfilter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locationsFilterVisible",{get:function(){return this.locationsFilterService.locationsFilterVisible},set:function(e){this.locationsFilterService.locationsFilterVisible=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filtered",{get:function(){return this.locationsService.isFiltered},enumerable:!0,configurable:!0}),e.prototype.filterClick=function(){this.locationsService.isFiltered=!1,this.locationsFilterVisible=!this.locationsFilterVisible,this.locationsFilterVisible||this.clearFilters()},e.prototype.clearFilters=function(){this.locationsService.clearFilters(this.item,!1)},e.prototype.handleFilterEvent=function(e){var t=this,r=this.locationsService.performFilter(e);if(r)r.then(function(r){var n=t.locationsService.results[1];t.locationsService.results[0].length+(void 0!=n?n.length:0)===1&&t.switchToItemsTab(!0,e.volume,e.year,e.description)});else{var n=this.locationsService.results[1];this.locationsService.results[0].length+(void 0!=n?n.length:0)===1&&this.switchToItemsTab(!0,e.volume,e.year,e.description)}},e}();n([a.Input(),i("design:type",Object)],p.prototype,"item",void 0),n([a.Output(),i("design:type",a.EventEmitter)],p.prototype,"changeTabEvent",void 0),p=n([a.Component({selector:"prm-locations",templateUrl:"components/search/fullView/getit/opac/locations/locations.html"}),o(2,a.Inject("opacLocations")),i("design:paramtypes",[s.LocationsService,c.OpacService,Object,u.LocationsFilterService,d.LocationService])],p),r.PrmLocations=p},{"../locationsFilter/locationsFilter.service":724,"../opac.directive":725,"../opac.service":727,"./location/location.service":714,"./locations.service":718,"ng-metadata/core":362}],718:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("../../../../../appConfig/appConfigForward"),s=e("ng-metadata/core"),c=e("../../../../../nddUtils/configurationUtil.service"),l=e("../opac.service"),u=e("./locationItemModel.service"),d=e("../locationsFilter/locationsFilter.service"),p=e("../../../../../mappingTablesCache/mappingTablesCache.service"),f=e("../../../../../security/jwtUtil.service"),h=e("../request/requestsService.service"),m=e("./location/location.service"),g=e("lodash/filter"),v=e("lodash/cloneDeep"),y=e("lodash/forEach"),b=function(){function e(e){this.items=[],this.isHoldingExpandedData=!1,this.locationNoItems=!1,this.isExpandAll=!1,this.location=e,this.isExpandAll=!1}return e}();b=n([s.Injectable(),i("design:paramtypes",[Object])],b),r.Location=b;var S=function(){function e(e,t,r,n,i,o,a){this._additionalData=a,this.itemFields=[],this.fullItemFields=[],this.fullItemValues=[],this.isExpanded=!1,this.listOfServices=[],this.item=e,this.itemFields=t,this.fullItemValues=n,this.isExpanded=i,this.listOfServices=o}return Object.defineProperty(e.prototype,"additionalData",{get:function(){return this._additionalData},enumerable:!0,configurable:!0}),e}();S=n([s.Injectable(),i("design:paramtypes",[Object,Object,Object,Object,Object,Object,Object])],S),r.FieldsPerItem=S;var _=function(){function e(e,t){this.allLines=[],this.baseSummaryShort=e,this.allLines=t}return e}();_=n([s.Injectable(),i("design:paramtypes",[Object,Object])],_),r.SummaryShort=_;var w=function(){function e(e,t){this.key=e,this.value=t}return e}();w=n([s.Injectable(),i("design:paramtypes",[Object,Object])],w);var E=function(){function e(e,t,r,n,i,o,s,c,l){this.configurationUtil=e,this.opacService=t,this.mappingTablesCache=r,this.locationBuilder=n,this.$translate=i,this.locationsFilterService=o,this.jwtUtilService=s,this.requestServicesService=c,this.locationService=l,this.itemsForDisplay=[],this.unfilteredResults=[],this.results=[],this.vid=a.getVid(),this.line="",this.lineData="",this.bulkSize=0,this.isFilter=!1,this.isAfterFiltering=!1,this.filtersMode=!1,this.configurationUtil=e,this.opacService=t,this.jwtUtilService=s,this.confInit(),this.requestServicesService=c}return Object.defineProperty(e.prototype,"isfilter",{get:function(){return this.isFilter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unfilteredRes",{get:function(){return this.unfilteredResults},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFiltered",{get:function(){return this.isAfterFiltering},set:function(e){this.isAfterFiltering=e},enumerable:!0,configurable:!0}),e.prototype.clearItemsForDisplay=function(){this.itemsForDisplay=[]},e.prototype.setLocations=function(e){this.clearItemsForDisplay();var t=this.configurationUtil.getLocationsConfiguration().instsort,r=this.configurationUtil.getLocationsConfiguration().viewinstsort,n=e.delivery.holding;n=n.filter(function(e){return!r||e.organization===a.getInstitutionCode()}),this.svcId=e.delivery.physicalServiceId;var i=this.jwtUtilService.getDecodedToken().institution,o=[];if(t){var s=[],c=[];n.forEach(function(e){e.organization===i?s.push(new b(e)):c.push(new b(e))}),o.push(s),o.push(c)}else{var l=n.map(function(e){return new b(e)});o.push(l)}this.unfilteredResults=v(o),this.results=o;var u=this.configurationUtil.getLocationsConfiguration().displayholdingsfilters;this.locationsFilterService.setFilterDropDownOptions(e),this.isFilter=u},e.prototype.getLocations=function(){return this.results},e.prototype.isSingleOvpLocation=function(){var e=this.results.reduce(function(e,t){return e.concat(t)});return 1==e.length&&this.locationService.isOvpLocation(e[0])},e.prototype.isSingleLocation=function(){var e=this.results.reduce(function(e,t){return e.concat(t)});return 1==e.length},e.prototype.getIndexFieldExists=function(e,t){var r=-1;return e.forEach(function(e,n){t===e.key&&(r=n)}),r},e.prototype.getOrUpdateCurrentHolding=function(e,t,r,n){var i,o=this.getIndexFieldExists(e,t);return o!==-1?(n.isHoldingExpandedData=!0,e[o].value=e[o].value.concat(r[t])):i=new w(t,r[t]),i},e.prototype.getLocationSummaryHoldings=function(e,t,r){var n=[],i=[],o=0;e.map(function(e){var t=e["location-fields"],i=e["location-fields-list"],o=[];o=i.map(function(e){if(t[e]&&0===n.length)return r.isHoldingExpandedData=t[e].length>1,new w(e,t[e])}).filter(function(e){if(void 0!==e)return e}),n=n.concat(o)}),n.map(function(e,t){if(o<3&&void 0!==e&&void 0!==e.value){var n=e.value.length>1?"...":"";r.isHoldingExpandedData=r.isHoldingExpandedData?r.isHoldingExpandedData:e.value.length>1,o++,i.push(new w(e.key,e.value[0]+n))}else r.isHoldingExpandedData=!0}),r.summaryHoldings=new _(i,n)},e.prototype.getItemsList=function(e){var t=this,r=[];return e.forEach(function(e){r.push(new u.LocationItemDisplay(e,t.locationBuilder,t.vid))}),r},e.prototype.calculateRequestParams=function(e,t,r,n,i,o){var a=[],s=[],c="",l="",u="",d="",p="",f="",h="";e.map(function(e){e.map(function(e){a.some(function(t){return t.recordId===e.location.ilsApiId&&t.institution===e.location.organization})||a.push({institution:e.location.organization,recordId:e.location.ilsApiId}),s.push(e.location),c=e.location.mainLocation,l=e.location.subLocationCode,h=e.location.callNumber,f="",e.location.matchForHoldings&&e.location.matchForHoldings.length>0&&(f=e.location.matchForHoldings[0].matchOn+(e.location.matchForHoldings[1]?","+e.location.matchForHoldings[1].matchOn:"")),u=e.location.holdId,d=e.location.holKey,p=p+e.location.mainLocation+","}),p=e.length>0?p.substring(0,p.length-1):p}),this.bulkSize=0===this.bulkSize?this.locationBuilder.getShowMoreBulkSize():this.bulkSize,this.noItems=1!==t?this.bulkSize:this.locationBuilder.getLocationsConfig("Location Item content","item.brief.number_of_items",this.vid)[0].target,this.noItems=Number(this.noItems)+(1===t?Number(1):Number(0)),this.noItems=r||n||i?this.bulkSize:this.noItems;var m={filters:{startPos:t,noItem:this.noItems,sublibrary:p.includes(",")?"":c,collection:p.includes(",")||"MainLocation,SecondaryLocation"!==f?"":l,callnumber:p.includes(",")||"MainLocation,CallNumber"!==f?"":h,holid:p.includes(",")?"":u,sublibs:p,ilsRecordList:a,vid:this.vid,volume:"All"!==r?r:"",year:"All"!==n?n:""},locations:s};return"suprima"===this.configurationUtil.getBackendSystem()&&(e.length>1&&(m.filters.holKey=d),m.filters.description="All"!==i?i:"",m.filters.filterCall=o),m},e.prototype.getItems=function(e,t,r,n,i,o){e=e||{},this.currentLoc=e,e.nextStartPos=void 0===e.nextStartPos?1:e.nextStartPos,this.itemsForDisplay=[],e.isMore=void 0!==e.isMore&&e.isMore;var a=[[e]];if("suprima"===this.configurationUtil.getBackendSystem()){this.locationsFilterService.locationFilter=e.location.libraryCode,this.locationsFilterService.isFilterClicked&&(r=!0,n=this.locationsFilterService.volumeFilter,i=this.locationsFilterService.yearFilter,o=this.locationsFilterService.descriptionFilter);var s=this.configurationUtil.getLocationsConfiguration().displayholdingsfilters;this.isFilter=s}return this.getLocationsItems(a,t,r,n,i,o),this.itemsForDisplay},e.prototype.getLocationsItems=function(e,t,r,n,i,o){var a=this;if(e&&e[0]&&e[0][0]&&e[0][0].items&&(e[0][0].nextStartPos===-1&&(e[0][0].isMore=!1),e[0][0].nextStartPos!==-1||r)){var s=r?1:e[0][0].nextStartPos;if(r||(t||0===e[0][0].items.length)&&!e[0][0].locationNoItems){var c=this.calculateRequestParams(e,s,n,i,o,r);this.isItemsResquestInProgress=!0;var l="";return"suprima"===this.configurationUtil.getBackendSystem()&&(this.svcId&&(l="/"+this.svcId),e[0][0].location&&e[0][0].location.organization&&(l+="?record-institution="+e[0][0].location.organization)),this.opacService.makeIlsRequest("locations",c,"POST",l).then(function(t){"suprima"===a.configurationUtil.getBackendSystem()?(a.processSuprimaLocationsResponse(e,t,s,r),a.requestServicesService.putLocationServices(t.data.itemInfo.locations[0].holKey,t.data),a.requestServicesService.restoreServices(),a.requestServicesService.useLocationServices(t.data.itemInfo.locations[0].holKey),a.locationsFilterService.updateFilterDropDownOptions(t.data.possibleFilters,t.data.itemInfo.locations),a.updateServicesList()):a.processResponse(e,t,s,r)},function(e){console.log("Load locations failed: ",e),a.isItemsResquestInProgress=!1})}}},e.prototype.processSuprimaLocationsResponse=function(e,t,r,n){var i;if(t.data&&t.data.itemInfo){if(i=t.data.itemInfo,n&&i.locations.length>1)return this.updateLocationsAfterFilter(i.locations),
void(this.isItemsResquestInProgress=!1)}else i=t;this.processResponse(e,i,r,n)},e.prototype.updateLocationsAfterFilter=function(e){var t=this,r=(this.configurationUtil.getLocationsConfiguration().instsort,this.configurationUtil.getLocationsConfiguration().viewinstsort,this.unfilteredResults[0],[]);e.forEach(function(e){t.unfilteredResults[0].forEach(function(t){t.location.holKey===e.holKey&&r.push(t)})}),this.results[0]=r;var n=this.configurationUtil.getLocationsConfiguration().displayholdingsfilters;this.isFilter=n},e.prototype.processResponse=function(e,t,r,n){var i,o,a,s=this;try{t.locations.map(function(t){var c,l,u=e.map(function(e){return l=e.filter(function(e){return e.location.ilsApiId===(t["ils-api-id"]?t["ils-api-id"]:"")&&e.location.libraryCode===(t["library-code"]?t["library-code"]:"")&&e.location.mainLocation===(t["main-location"]?t["main-location"]:"")&&e.location.subLocationCode===(t["sub-location-code"]?t["sub-location-code"]:"")&&e.location.organization===(t.organization?t.organization:"")&&e.location.holdId===(t["hold-id"]?t["hold-id"]:"")&&e.location.callNumber===(t["call-number"]?t["call-number"]:"")}),"suprima"===s.configurationUtil.getBackendSystem()&&(l[0].location.availabilityStatement=t.availabilityStatement),l});if(c=u[0][0]?u[0][0]:u[1][0],i=t.items,i&&0!==i.length){var d=t.partial;c.nextStartPos=d?t["current-start-pos"]:-1,console.log("nextStartPos="+c.nextStartPos),c.isMore=t.items.length===s.noItems}else c.items=[],c.locationNoItems=1===r||c.locationNoItems;o=t.adaptorid,a=t.holdings,s.itemsForDisplay=s.processHoldings(i,a,o,c,n),s.itemsForDisplay.length>0&&(c.items=n?s.itemsForDisplay:c.items.concat(s.itemsForDisplay),n||s.results.map(function(e){e.map(function(e){c.location.ilsApiId===e.location.ilsApiId&&c.location.libraryCode===e.location.libraryCode&&c.location.mainLocation===e.location.mainLocation&&c.location.subLocationCode===e.location.subLocationCode&&c.location.organization===e.location.organization&&c.location.callNumber===e.location.callNumber&&c.location.holdId===e.location.holdId&&(e.items=0===e.items.length?c.items:e.items)})}))}),n||this.filtersMode?(e=e.map(function(e){return e.filter(function(e){return e.items.length>0})}),this.results=e,1===e.length&&this.setLocItems(!1)):this.unfilteredResults=v(this.results),this.isItemsResquestInProgress=!1}catch(e){return this.isItemsResquestInProgress=!1,console.log(e),null}},e.prototype.processHoldings=function(e,t,r,n,i){var o=this.getItemsList(e),a=e.length>0?this.processItems(o,i):[];return t&&t.length>0&&this.getLocationSummaryHoldings(t,r,n),a},e.prototype.processItems=function(e,t){var r=this.locationBuilder.getFullDisplayFields(),n=this.getItemsForDisplay(e,r,t);return n},e.prototype.getItemsForDisplay=function(e,t,r){var n=this,i=this.locationBuilder.itemsListConf;return e.map(function(e){return n.parseItemsDisplay(e,i,t,r)})},e.prototype.confInit=function(){this.locationBuilder.getBriefDisplayFields(this.vid)},e.prototype.parseItemsDisplay=function(e,t,r,n){var i=this,o="",a=[];t.map(function(t,r){var n="";t.map(function(r){if(r){var i=r.split(" ");i.map(function(r){if(r){var i=e[r.replace(/_/g,"")];o="&nbsp"===t[3]||"&nbsp;"===t[3]?" ":t[3],i&&""!==i&&(n+=i+o)}})}}),a[r]=n.substr(0,n.lastIndexOf(o))});var s=this.getAllowedServices(e.listofservices.service);o=" ";var c=[],l=[];r.map(function(t){if(t[1]){var r=t[1].split(" ");return i.$translate(t[0]).then(function(t){i.line="",i.lineData="";for(var a=t?t+": ":"",s=0;s<r.length;s++)if(r[s]){var c=r[s].replace(/_/g,""),l=e[c];i.line+=l&&""!==l?a+l+o:"",i.lineData+=l&&""!==l?l+o:"",""!==i.line&&(a="")}i.line=i.line.substr(0,i.line.lastIndexOf(o)),i.lineData=i.lineData.substr(0,i.lineData.lastIndexOf(o)),""!==i.line&&(i.results.map(function(t){t.map(function(t){t.items.map(function(t){e.itemid!==t.item||t.fullItemFields.some(function(e){return e===i.line})||(t.fullItemFields.push(i.line),t.fullItemValues.push(i.lineData))})})}),n||i.filtersMode||(i.unfilteredResults=v(i.results)))})}});var u=this.createItemAdditionalFields(e);return new S(e.itemid,a,c,l,e.isExpanded,s,u)},e.prototype.createItemAdditionalFields=function(e){var t=["itemid","itemdescription","mainlocationname","secondarylocationname","callnumber","itemcategoryname","itemstatusname"],r={};return y(t,function(t){r[t]=e[t]}),r},e.prototype.getAllowedServices=function(e){return e.filter(function(e){if("Y"===e.allowed)return e})},e.prototype.updateServicesList=function(){var e=this;y(this.requestServicesService.services.serviceinfo,function(t,r){var n={path:t["link-to-service"],method:"GET",serviceType:t["service-type"]};e.opacService.updateService(t.type,n)})},e.prototype.setLocItems=function(e){var t=this;if(this.currentLoc&&this.currentLoc.location){var r=this.results.map(function(e){return e.filter(function(e){return e.location.ilsApiId===t.currentLoc.location.ilsApiId&&e.location.libraryCode===t.currentLoc.location.libraryCode&&e.location.mainLocation===t.currentLoc.location.mainLocation&&e.location.subLocationCode===t.currentLoc.location.subLocationCode&&e.location.organization===t.currentLoc.location.organization&&e.location.callNumber===t.currentLoc.location.callNumber&&e.location.holdId===t.currentLoc.location.holdId})})[0][0];this.currentLoc=r?r:this.currentLoc,this.currentLoc.locationNoItems=e?this.currentLoc.locationNoItems:0===this.currentLoc.items.length}},e.prototype.clearFilters=function(e,t){this.filtersMode=!1,this.isAfterFiltering=!1,this.results=v(this.unfilteredResults),"suprima"===this.configurationUtil.getBackendSystem()&&(this.locationsFilterService.locationFilter=void 0,this.locationsFilterService.volumeFilter=void 0,this.locationsFilterService.yearFilter=void 0,this.locationsFilterService.descriptionFilter=void 0),t?(this.setLocItems(!0),this.locationsFilterService.setFilterDropDownOptions(e)):this.setLocations(e)},e.prototype.performFilter=function(e){this.filtersMode=!0;var t,r=v(this.unfilteredResults);return e||(e={volume:this.locationsFilterService.volumeFilter,year:this.locationsFilterService.yearFilter,description:this.locationsFilterService.descriptionFilter}),"suprima"===this.configurationUtil.getBackendSystem()&&this.locationsFilterService.locationsFilter&&(e.location=this.locationsFilterService.locationFilter),e.location&&(r=this.filterLocation(e.location,r),"suprima"===this.configurationUtil.getBackendSystem()&&(t=this.filterYearAndVolume(e.volume,e.year,e.description,r))),(e.volume||e.year||e.description)&&(t=this.filterYearAndVolume(e.volume,e.year,e.description,r)),this.results=r,this.isAfterFiltering=!0,e.volume||e.year||e.description?t:""},e.prototype.filterLocation=function(e,t){return"All"===e?t:(t[0]=g(t[0],function(t){return t.location.libraryCode===e}),t[1]&&(t[1]=g(t[1],function(t){return t.location.libraryCode===e})),t)},e.prototype.filterYearAndVolume=function(e,t,r,n){return this.getLocationsItems(n,!1,!0,e,t,r)},e}();E=n([s.Injectable(),o(4,s.Inject("$translate")),i("design:paramtypes",[c.ConfigurationUtil,l.OpacService,p.MappingTablesCache,u.LocationBuilder,Function,d.LocationsFilterService,f.JwtUtilService,h.RequestServicesService,m.LocationService])],E),r.LocationsService=E,r.default=[]},{"../../../../../appConfig/appConfigForward":484,"../../../../../mappingTablesCache/mappingTablesCache.service":592,"../../../../../nddUtils/configurationUtil.service":596,"../../../../../security/jwtUtil.service":842,"../locationsFilter/locationsFilter.service":724,"../opac.service":727,"../request/requestsService.service":753,"./location/location.service":714,"./locationItemModel.service":715,"lodash/cloneDeep":237,"lodash/filter":246,"lodash/forEach":253,"ng-metadata/core":362}],719:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./locationItemModel.service"),a=e("./location/location.service"),s=e("./locations.service"),c=e("./location/location.directive"),l=e("./locations.directive"),u=e("./locationItems.directive"),d=e("./stackMap/stackMap.directive"),p=e("./stackMap/stackMap.service"),f=function(){function e(){}return e}();f=n([i.NgModule({declarations:[c.PrmLocation,u.PrmLocationItems,l.PrmLocations,d.PrmStackMap],providers:[o.LocationBuilder,a.LocationService,s.LocationsService,p.StackMapService],imports:[]})],f),r.LocationsOpacModule=f},{"./location/location.directive":713,"./location/location.service":714,"./locationItemModel.service":715,"./locationItems.directive":716,"./locations.directive":717,"./locations.service":718,"./stackMap/stackMap.directive":720,"./stackMap/stackMap.service":721,"ng-metadata/core":362}],720:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./stackMap.service"),c=e("ng-metadata/core"),l=function(){function e(e,t){this.stackMapService=e,this.opacLocations=t}return e.prototype.ngOnInit=function(){},e}();n([c.Input(),i("design:type",Object)],l.prototype,"mapUrl",void 0),l=n([a.Component({selector:"prm-stack-map",templateUrl:"components/search/fullView/getit/opac/locations/stackMap/stack-map.html"}),o(1,c.Inject("opacLocations")),i("design:paramtypes",[s.StackMapService,Object])],l),r.PrmStackMap=l},{"./stackMap.service":721,"ng-metadata/core":362}],721:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=function(){function e(){}return e}();o=n([i.Injectable()],o),r.StackMapService=o},{"ng-metadata/core":362}],722:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./locationsFilter.service"),a=e("./locationsFilter.directive"),s=function(){function e(){}return e}();s=n([i.NgModule({declarations:[a.PrmLocationsFilter],providers:[o.LocationsFilterService],imports:[]})],s),r.LocationsFilterModule=s},{"./locationsFilter.directive":723,"./locationsFilter.service":724,"ng-metadata/core":362}],723:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=(e("angular-material"),e("ng-metadata/core")),s=e("./locationsFilter.service"),c=e("../../../../../nddUtils/stringUtils.service"),l=e("../../../../../nddUtils/configurationUtil.service"),u=function(){function e(e,t,r,n,i){this.locationsFilterService=e,this.opacLocations=t,this.$translate=r,this.stringUtils=n,this.configurationUtil=i,this.filterEvent=new a.EventEmitter,this.clearFiltersEvent=new a.EventEmitter,this.dropdownsChanged=!1}return Object.defineProperty(e.prototype,"changed",{get:function(){return"suprima"===this.configurationUtil.getBackendSystem()?this.locationsFilterService.isFilterClicked:this.dropdownsChanged},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){"suprima"===this.configurationUtil.getBackendSystem()?this.templateUrl="components/search/fullView/getit/opac/locationsFilter/alma-locations-filter.html":this.templateUrl="components/search/fullView/getit/opac/locationsFilter/locations-filter.html",this.dropdownsChanged=!1,this.locationsFilterService.locationsFilterVisible=!0;var e=this.locationsFilterService.dropDownOptions&&(this.locationsFilterService.dropDownOptions.locations.length>0||this.locationsFilterService.dropDownOptions.years.length>0||this.locationsFilterService.dropDownOptions.volumes.length>0||this.locationsFilterService.dropDownOptions.descriptions.length>0);"suprima"!==this.configurationUtil.getBackendSystem()||e||this.locationsFilterService.setFilterDropDownOptions(this.item)},e.prototype.ngOnDestroy=function(){this.locationsFilterService.locationsFilterVisible=!1,this.dropdownsChanged=!1},e.prototype.onChanged=function(){this.dropdownsChanged=!0},Object.defineProperty(e.prototype,"locationsDropDownOptions",{get:function(){return this.locationsFilterService.dropDownOptions.locations},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yearDropDownOptions",{get:function(){return this.locationsFilterService.dropDownOptions.years},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volumeDropDownOptions",{get:function(){return this.locationsFilterService.dropDownOptions.volumes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptionDropDownOptions",{get:function(){return this.locationsFilterService.dropDownOptions.descriptions},enumerable:!0,configurable:!0}),e.prototype.throwFilterEvent=function(){"suprima"===this.configurationUtil.getBackendSystem()&&(this.locationsFilterService.isFilterClicked?this.dropdownsChanged=!0:this.dropdownsChanged=!1),this.filterEvent.emit({location:this.locationFilter,volume:this.volumeFilter,year:this.yearFilter,description:this.descriptionFilter})},Object.defineProperty(e.prototype,"filtersMsg",{get:function(){var e=(this.locationFilter?1:0)+(this.yearFilter?1:0)+(this.volumeFilter?1:0),t=this.$translate.instant("nui.locations.filter.message.and"),r={year:"",volume:"",location:""};this.yearFilter&&(r.year=this.$translate.instant("fulldisplay.locations.yearFilter")+" "+this.yearFilter+(3==e?",":2==e?t:"")),this.volumeFilter&&(r.volume=this.$translate.instant("fulldisplay.locations.volumeFilter")+" "+this.volumeFilter+(this.locationFilter?t:"")),this.locationFilter&&(r.location=this.$translate.instant("fulldisplay.locations.locationFilter")+" "+this.$translate.instant(this.locationFilter));var n=this.$translate.instant("nui.locations.filter.message",r);return n},enumerable:!0,configurable:!0}),e.prototype.clearFilters=function(){"suprima"===this.configurationUtil.getBackendSystem()&&(this.dropdownsChanged=!1),(this.locationFilter||this.volumeFilter||this.yearFilter||this.descriptionFilter)&&(this.locationFilter=void 0,this.volumeFilter=void 0,this.yearFilter=void 0,this.descriptionFilter=void 0,this.clearFiltersEvent.emit(null))},Object.defineProperty(e.prototype,"locationFilter",{get:function(){return this.locationsFilterService.locationFilter},set:function(e){this.locationsFilterService.locationFilter=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volumeFilter",{get:function(){return this.locationsFilterService.volumeFilter},set:function(e){this.locationsFilterService.volumeFilter=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yearFilter",{get:function(){return this.locationsFilterService.yearFilter},set:function(e){this.locationsFilterService.yearFilter=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptionFilter",{get:function(){return this.locationsFilterService.descriptionFilter},set:function(e){this.locationsFilterService.descriptionFilter=e},enumerable:!0,configurable:!0}),e}();n([a.Input(),i("design:type",Object)],u.prototype,"item",void 0),n([a.Input(),i("design:type",Boolean)],u.prototype,"isDisabled",void 0),n([a.Input(),i("design:type",Boolean)],u.prototype,"isAfterFiltering",void 0),n([a.Output(),i("design:type",Object)],u.prototype,"filterEvent",void 0),n([a.Output(),i("design:type",Object)],u.prototype,"clearFiltersEvent",void 0),u=n([a.Component({selector:"prm-locations-filter",template:'<div ng-include="$ctrl.templateUrl"></div>'}),o(1,a.Inject("opacLocations")),o(2,a.Inject("$translate")),i("design:paramtypes",[s.LocationsFilterService,Object,Function,c.StringUtils,l.ConfigurationUtil])],u),r.PrmLocationsFilter=u},{"../../../../../nddUtils/configurationUtil.service":596,"../../../../../nddUtils/stringUtils.service":608,"./locationsFilter.service":724,"angular-material":17,"ng-metadata/core":362}],724:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../../../appConfig/appConfigForward"),c=e("../../../../../nddUtils/configurationUtil.service"),l=e("lodash/uniqBy"),u=e("lodash/uniq"),d=e("lodash/get"),p=function(){function e(e,t,r){this.$http=e,this.restBaseURLs=t,this.configurationUtil=r,this.vid=s.getVid(),this.filterConfig=this.getFilterConfig()}return e.prototype.getFilterConfig=function(){if(this.configurationUtil.getLocationsConfiguration())return this.configurationUtil.getLocationsConfiguration().filtersop},e.prototype.setFilterDropDownOptions=function(e){return this._dropDownOptions={locations:[],years:[],volumes:[],descriptions:[]},"all_filters"===this.filterConfig&&this.getYearAndVolumeDropDownOptions(e),this._dropDownOptions.locations=this.getLocationDropDownOptions(e),this._dropDownOptions.locations.length>1||this._dropDownOptions.years.length>1||this._dropDownOptions.volumes.length>1},e.prototype.getLocationDropDownOptions=function(e){var t=e.delivery.holding,r=this.configurationUtil.getLocationsConfiguration().viewinstsort;r&&(t=e.delivery.holding.filter(function(e){return!r||e.organization===s.getInstitutionCode()}));var n=t.map(function(e){return e.libraryCode});return u(n)},e.prototype.getYearAndVolumeDropDownOptions=function(e){var t=this,r=e.delivery.holding.map(function(e){return{ilsApiId:e.ilsApiId,institution:e.organization}});r=l(r,function(e){return e.ilsApiId}),r=r.reduce(function(e,t){return e["ils-record-id"]+=t.ilsApiId+",",e["record-institution"]+=t.institution+",",e},{"ils-record-id":"","record-institution":""}),r["ils-record-id"]=r["ils-record-id"].slice(0,-1),r["record-institution"]=r["record-institution"].slice(0,-1),this.$http.get(this.restBaseURLs.ILSServicesBaseURL+"/filters",{params:r}).then(function(e){t.parseFiltersApiResponse(e)})},e.prototype.parseFiltersApiResponse=function(e){var t=this;console.log(e);var r=e.data.data;r=r.map(function(e){return t.parseLocationFilters(e)}),r=r.reduce(function(e,t){return{years:e.years.concat(t.years),volumes:e.volumes.concat(t.volumes),descriptions:e.descriptions.concat(t.descriptions)}},{years:[],volumes:[],descriptions:[]}),this._dropDownOptions.years=u(r.years),this._dropDownOptions.volumes=u(r.volumes),this._dropDownOptions.descriptions=u(r.descriptions)},e.prototype.parseLocationFilters=function(e){return e?{years:d(e,"filters.years.year"),volumes:d(e,"filters.volumes.volume"),descriptions:d(e,"filters.descriptions.description")}:{years:[],volumes:[],descriptions:[]}},Object.defineProperty(e.prototype,"dropDownOptions",{get:function(){return this._dropDownOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locationsFilterVisible",{get:function(){return this._locationsFilterVisible},set:function(e){this._locationsFilterVisible=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locationFilter",{get:function(){return this._locationFilter},set:function(e){this._locationFilter=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volumeFilter",{get:function(){return this._volumeFilter},set:function(e){this._volumeFilter=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yearFilter",{get:function(){return this._yearFilter},set:function(e){this._yearFilter=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptionFilter",{get:function(){return this._descriptionFilter},set:function(e){this._descriptionFilter=e},enumerable:!0,configurable:!0}),e.prototype.deleteFilterOptions=function(){this._dropDownOptions=void 0,this.locationFilter=void 0,this.yearFilter=void 0,this.volumeFilter=void 0,this.descriptionFilter=void 0},e.prototype.updateFilterDropDownOptions=function(e,t){this._dropDownOptions.years=u(e.years),this._dropDownOptions.volumes=u(e.volumes),this._dropDownOptions.descriptions=u(e.descriptions);var r=t.map(function(e){return e["library-code"]});this._dropDownOptions.locations=u(r)},Object.defineProperty(e.prototype,"isFilterClicked",{get:function(){return!!(this.locationFilter&&"All"!==this.locationFilter||this.volumeFilter&&"All"!==this.volumeFilter||this.yearFilter&&"All"!==this.yearFilter||this.descriptionFilter&&"All"!==this.descriptionFilter)},enumerable:!0,configurable:!0}),e}();p=n([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),i("design:paramtypes",[Function,Object,c.ConfigurationUtil])],p),r.LocationsFilterService=p,r.default=[]},{"../../../../../appConfig/appConfigForward":484,"../../../../../nddUtils/configurationUtil.service":596,"lodash/get":255,"lodash/uniq":321,"lodash/uniqBy":322,"ng-metadata/core":362}],725:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./opac.service"),c=e("../../../../infra/dataStructures/collections/stack/limitedHistoryStack.structure"),l=e("../../fullView.service"),u=e("./request/requestsService.service"),d=e("./locations/locations.service"),p=e("../../../../appConfig/appConfigForward"),f=e("../../../../nddUtils/configurationUtil.service"),h=e("lodash/get"),m=function(){function e(e,t,r,n,i,o){this.opacService=e,this.configurationUtil=t,this.fullViewService=r,this.requestServicesService=n,this.$timeout=i,this.locationsService=o,this.defaultTab=g.LOCATIONS,this.BACK_HISTORY_SIZE=12,this.backToHistoryStack=new c.LimitedHistoryStack(this.BACK_HISTORY_SIZE),this._selectedTab=this.defaultTab}return Object.defineProperty(e.prototype,"isCalculateSvcIdDone",{get:function(){return this.fullViewService.isCalculateSvcIdDone()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedTab",{get:function(){return this._selectedTab},set:function(e){this._selectedTab=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"responseStatus",{get:function(){return this.opacService.responseStatus},enumerable:!0,configurable:!0}),e.prototype.onChangeTabEvent=function(e){var t=e;null===e?this.selectedTab=this.backToHistoryStack.pop()||this.defaultTab:(void 0!==t.referer&&this.backToHistoryStack.push(t.referer),void 0!==t.loc?(this.loc=t.loc,"suprima"===this.configurationUtil.getBackendSystem()&&this.requestServicesService.useLocationServices(this.loc.location.holKey)):"suprima"===this.configurationUtil.getBackendSystem()&&t.dest===g.LOCATIONS&&(this.requestServicesService.restoreServices(),this.locationsService.performFilter()),t.service&&(this.service=t.service),t.clearStack&&this.backToHistoryStack.clear(),this.selectedTab=t.dest,this.$timeout(function(){var e=document.querySelector("prm-opac-back-button > button");e&&e.focus()},100))},e.prototype.hasGetit1=function(){var e=h(this.item,"delivery.GetIt1.links",h(this.item,"delivery.GetIt1",[]));return e.length>0},e.prototype.goBack=function(){var e=this.backToHistoryStack.pop();this.selectedTab=e},e.prototype.availTabs=function(){return g},e.prototype.hasLocations=function(){return!!(this.item&&this.item.delivery.holding.length>0)},e.prototype.isSingleLoc=function(e){var t=this.configurationUtil.getLocationsConfiguration().viewinstsort,r=e.delivery.holding;return r=r.filter(function(e){return!t||e.organization===p.getInstitutionCode()}),r.length<2},e.prototype.focusOnLocations=function(){var e=document.querySelector("prm-location > button");this.$timeout(function(){e&&e.focus()},100)},e}();n([a.Input(),i("design:type",Object)],m.prototype,"item",void 0),n([a.Input(),i("design:type",String)],m.prototype,"serviceMode",void 0),m=n([a.Component({selector:"prm-opac",templateUrl:"components/search/fullView/getit/opac/opac.html"}),o(4,a.Inject("$timeout")),i("design:paramtypes",[s.OpacService,f.ConfigurationUtil,l.FullViewService,u.RequestServicesService,Function,d.LocationsService])],m),r.PrmOpac=m;var g;!function(e){e[e.LOCATIONS=0]="LOCATIONS",e[e.ITEMS=1]="ITEMS",e[e.REQUEST=2]="REQUEST",e[e.COPYRIGHTS=3]="COPYRIGHTS",e[e.RESPONSE=4]="RESPONSE"}(g=r.OPAC_TAB||(r.OPAC_TAB={}))},{"../../../../appConfig/appConfigForward":484,"../../../../infra/dataStructures/collections/stack/limitedHistoryStack.structure":537,"../../../../nddUtils/configurationUtil.service":596,"../../fullView.service":688,"./locations/locations.service":718,"./opac.service":727,"./request/requestsService.service":753,"lodash/get":255,"ng-metadata/core":362}],726:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./opac.service"),a=e("./locations/opacLocations.module"),s=e("./locationsFilter/locationFilter.module"),c=e("./request/opacRequest.module"),l=e("./serviceButton.directive"),u=e("./serviceButton.service"),d=e("./copyright/copyright.directive"),p=e("./backButton.directive"),f=e("./opac.directive"),h=function(){function e(){}return e}();h=n([i.NgModule({declarations:[d.PrmCopyright,f.PrmOpac,p.PrmOpacBackButton,l.PrmServiceButton],providers:[o.OpacService,u.ServiceButtonService],imports:[s.LocationsFilterModule,a.LocationsOpacModule,c.OpacRequestModule]})],h),r.OpacModule=h},{"./backButton.directive":711,"./copyright/copyright.directive":712,"./locations/opacLocations.module":719,"./locationsFilter/locationFilter.module":722,"./opac.directive":725,"./opac.service":727,"./request/opacRequest.module":728,"./serviceButton.directive":755,"./serviceButton.service":756,"ng-metadata/core":362}],727:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../../infra/httpRequest/http.service"),c=e("../../../../appConfig/appConfig.module"),l=function(){function e(e,t,r,n){this.restBaseURLs=e,this.$http=t,this.$timeout=r,this.httpService=n,this.requestsErrorCounter=0,this.opacBaseUrl=e.opacBaseUrl,this.ilsServices={services:{path:this.opacBaseUrl,method:"GET"},locations:{path:this.restBaseURLs.ILSServicesBaseURL+"/holdings",method:"POST"},requests:{path:"",method:"GET"}}}return Object.defineProperty(e.prototype,"responseStatus",{get:function(){return this._responseStatus},set:function(e){this._responseStatus=e},enumerable:!0,configurable:!0}),e.prototype.getServices=function(){return this.ilsServices},e.prototype.updateService=function(e,t){this.ilsServices[e]=t},e.prototype.makeIlsRequest=function(e,t,r,n){var i=this;void 0===t&&(t=null),void 0===r&&(r=null),void 0===n&&(n="");var o=this.ilsServices[e],a={method:r||o.method,url:o.path+n,params:"GET"===o.method?t:null,data:"POST"===o.method?t:null};return this.$http(a).then(function(e){return i.ilsRequestSuccess(e.data)},function(r){return i.ilsRequestFailure(r,e,t)})},e.prototype.makeIlsCall=function(e,t,r){return void 0===t&&(t=null),void 0===r&&(r="GET"),this.httpService.call(r,e["link-to-service"],t)},e.prototype.getIlsServicesList=function(e,t,r){var n=this.ilsServices.services;n.path=this.opacBaseUrl+"/"+e,r&&(n.path=n.path+"/svcId/"+r),this.updateService("services",n);var i;return t&&(i={"record-institution":t}),this.makeIlsRequest("services",i,"")},e.prototype.ilsRequestSuccess=function(e){return this.requestsErrorCounter=0,e},e.prototype.ilsRequestFailure=function(e,t,r){var n=this;if(this.requestsErrorCounter++,this.requestsErrorCounter<3)return this.$timeout(function(){return n.makeIlsRequest(t,r,"")},2e3);throw e},e}();l=n([a.Injectable(),o(0,a.Inject("restBaseURLs")),o(1,a.Inject("$http")),o(2,a.Inject("$timeout")),i("design:paramtypes",[Object,Function,Function,s.HttpService])],l),r.OpacService=l;var u=function(){function e(e,t){this.isSuccess=e,this.msg=t}return e}();r.StatusMsg=u,r.default=[c.default.name]},{"../../../../appConfig/appConfig.module":482,"../../../../infra/httpRequest/http.service":556,"ng-metadata/core":362}],728:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./requestsService.service"),a=e("./requestServices.directive"),s=e("./requestTypes/requestTypes.module"),c=e("./requestForms.service"),l=e("./request.service"),u=e("./request.directive"),d=e("./requestsServicesOvl.directive"),p=function(){function e(){}return e}();p=n([i.NgModule({declarations:[a.PrmRequestServices,d.PrmRequestsServicesOvl,u.PrmRequest],
providers:[o.RequestServicesService,c.RequestFromService,l.RequestService],imports:[s.RequestTypesModule]})],p),r.OpacRequestModule=p},{"./request.directive":729,"./request.service":730,"./requestForms.service":731,"./requestServices.directive":732,"./requestTypes/requestTypes.module":750,"./requestsService.service":753,"./requestsServicesOvl.directive":754,"ng-metadata/core":362}],729:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("ng-metadata/core"),c=e("./request.service"),l=e("../locations/locations.service"),u=e("../opac.service"),d=e("../../../../../infra/formBuilder/formBuilder.service"),p=e("../../../../../infra/formBuilder/formBuilder.service"),f=e("../../../../../nddUtils/dateUtils.service"),h=e("../opac.directive"),m=e("../serviceButton.service"),g=e("../../../../..//appConfig/appConfigForward"),v=e("../../../../..//nddUtils/configurationUtil.service"),y=e("lodash/indexOf"),b=e("lodash/filter"),S=e("lodash/forEach"),_=e("lodash/cloneDeep"),w=function(){function e(e,t,r,n,i,o,a,c){this.requestService=e,this.opacService=t,this.formBuilderService=r,this.dateUtils=n,this.serviceButtonService=i,this.locationsService=o,this.restBaseURLs=a,this.configurationUtil=c,this.changeTabEvent=new s.EventEmitter,this.vid=g.getVid(),this.blankRequests={AlmaResourceSharing:{allowed:"Y","link-to-service":"/primaws/rest/priv/ILSServices/titleServices/-1/-1/AlmaResourceSharing?institution=TRAINING_1_INST","service-type":"OvP",type:"AlmaResourceSharing"}}}return e.prototype.ngOnInit=function(){if(this.requestService.requestIsLoading=!1,"AlmaResourceSharing"===this.blankService){this.requestService.requestIsLoading=!0,console.log("blankService - AlmaResourceSharing"),this.requestService.service=this.blankRequests.AlmaResourceSharing;var e={vid:this.vid};this.serviceButtonService.makeIlsRequest(this.requestService.service,e)}},Object.defineProperty(e.prototype,"serviceType",{get:function(){var e=this.requestService.service;return void 0===e?"":e.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"form",{get:function(){return this.getFilteredForm([p.FormBuilderEnums.UI_TYPE.LABEL,p.FormBuilderEnums.UI_TYPE.MULTI_LABEL],!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formReadonly",{get:function(){return this.getFilteredForm([p.FormBuilderEnums.UI_TYPE.LABEL,p.FormBuilderEnums.UI_TYPE.MULTI_LABEL],!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"requestHeader",{get:function(){switch(this.serviceType){case"ILL":return"nui.ill.header";case"PhotocopyRequest":return"nui.PhotocopyRequest.header";case"HoldRequest":return"nui.HoldRequest.header";case"CallSlip":return"nui.CallSlip.header";case"ShortLoan":return"nui.shortloan.header";case"UBRequest":return"nui.ubrequest.header";case"Recall":return"nui.Recall.header";case"AlmaDigitization":return"almaDigitization.header";case"AlmaPurchaseRequest":return"almaPurchaseRequest.header";case"AlmaRequest":return"almaRequest.header";case"AlmaRequestAnyItem":return"almaRequestAnyItem.header";case"AlmaRequestOther":return"almaRequestOther.header";case"AlmaDigitizationOther":return"almaDigitizationOther.header";case"AlmaItemDigitization":return"almaItemDigitization.header";case"AlmaItemRequest":return"almaItemRequest.header";case"AlmaResourceSharing":return"almaResourceSharing.header";default:return""}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"submitLabel",{get:function(){switch(this.serviceType){case"PhotocopyRequest":return"nui.PhotocopyRequest.send";case"AlmaDigitization":return"almaDigitization.send";case"AlmaDigitizationOther":return"almaDigitization.send";case"AlmaItemDigitization":return"almaDigitization.send";default:return"nui.request.send"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formData",{get:function(){return this.requestService.formData},set:function(e){this.requestService.formData=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayForm",{get:function(){return this.getFilteredForm([p.FormBuilderEnums.UI_TYPE.LABEL,p.FormBuilderEnums.UI_TYPE.MULTI_LABEL,p.FormBuilderEnums.UI_TYPE.HIDDEN],!1).length>0},enumerable:!0,configurable:!0}),e.prototype.submit=function(e){var t=this,r=this.requestService.service,n=_(this.formData);if(this.isCopyRight(r)&&this.isCopyRight(r)instanceof Array&&this.isCopyRight(r).length>0){var i={referer:h.OPAC_TAB.REQUEST,dest:h.OPAC_TAB.COPYRIGHTS};return void this.changeTabEvent.emit(i)}n.group_id||(n.group_id=this.requestService.ilsApiId);var o=void 0;(n.itemId||n.item_id)&&(n.itemId?(r["link-to-service"]=r["link-to-service"]+"/item/"+n.itemId,o=n.itemId):(r["link-to-service"]=r["link-to-service"]+"/item/"+n.item_id,o=n.item_id)),this.manipulatePostData(n),this.opacService.makeIlsCall(r,n,"POST").then(function(e){t.opacService.responseStatus=new u.StatusMsg("ok"===e.status,e["reply-text"]);var r={referer:h.OPAC_TAB.REQUEST,dest:h.OPAC_TAB.RESPONSE};t.changeTabEvent.emit(r),t.configurationUtil.isSuprima()&&o&&t.getItemQueueData(o)})},e.prototype.resetForm=function(){this.requestService.setupNewForm(this.requestService.service,this.requestService.ilsData)},e.prototype.isCopyRight=function(e){return this.requestService.isCopyRight(e)},e.prototype.getFilteredForm=function(e,t){return this.requestService.form?this.requestService.form.filter(function(r){return t?y(e,r.uiType)>-1:y(e,r.uiType)<0}):[]},e.prototype.manipulatePostData=function(e){var t=this;S(e,function(r,n){var i=t.getFieldByName(t.requestService.form,n);if(i){if(i.fieldType===p.FormBuilderEnums.FIELD_TYPE.INTERNAL)return void delete e[n];i.uiType===p.FormBuilderEnums.UI_TYPE.DATE&&(e[n]=t.dateUtils.convertDateTypeToIlsDateString(e[n]))}})},e.prototype.getFieldByName=function(e,t){var r=b(e,function(e){return e.name===t});return r[0]},e.prototype.getItemQueueData=function(e){var t=this,r={};r["link-to-service"]=this.restBaseURLs.ILSServicesBaseURL+"/itemQueue/"+e,this.opacService.makeIlsCall(r,"","GET").then(function(r){for(var n=r.itemQueueString,i=(r.itemId,t.locationsService.itemsForDisplay),o=i.length,a=-1,s=0;s<o;s++)i[s].item===e&&(a=s);if(a>-1){var c=t.locationsService.itemsForDisplay[a].itemFields[0];c=c.substr(0,c.lastIndexOf("(")),c+=n,t.locationsService.itemsForDisplay[a].itemFields[0]=c}})},e}();n([s.Input(),i("design:type",String)],w.prototype,"blankService",void 0),n([s.Input(),i("design:type",Object)],w.prototype,"service",void 0),n([s.Output(),i("design:type",s.EventEmitter)],w.prototype,"changeTabEvent",void 0),w=n([s.Component({selector:"prm-request",templateUrl:"components/search/fullView/getit/opac/request/request.html"}),o(6,a.Inject("restBaseURLs")),i("design:paramtypes",[c.RequestService,u.OpacService,d.FormBuilderService,f.DateUtils,m.ServiceButtonService,l.LocationsService,Object,v.ConfigurationUtil])],w),r.PrmRequest=w},{"../../../../..//appConfig/appConfigForward":484,"../../../../..//nddUtils/configurationUtil.service":596,"../../../../../infra/formBuilder/formBuilder.service":553,"../../../../../nddUtils/dateUtils.service":597,"../locations/locations.service":718,"../opac.directive":725,"../opac.service":727,"../serviceButton.service":756,"./request.service":730,"lodash/cloneDeep":237,"lodash/filter":246,"lodash/forEach":253,"lodash/indexOf":261,"ng-metadata/core":362}],730:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./requestForms.service"),c=e("../../../../../mappingTablesCache/mappingTablesCache.service"),l=e("../../../../../infra/formBuilder/formBuilder.service"),u=e("../../../../../infra/widgets/alerts/alertFactory.service"),d=e("angular"),p=e("lodash/filter"),f=e("lodash/split"),h=e("lodash/forEach"),m=e("lodash/get"),g=function(){function e(e,t,r,n,i){var o=this;this.$translate=e,this.requestFromService=t,this.mappingTablesCache=r,this.formBuilderService=n,this.alertService=i,this.updateForm=d.bind(this,this.updateFormUnbound),this._formFields=[],this._form=[],this._formData={},this.ilsDataPerService={HoldRequest:function(e){return o.getDataByService("HoldRequest",e)},ILL:function(e){return o.getDataByService("ILL",e)},Recall:function(e){return o.getDataByService("Recall",e)},PhotocopyRequest:function(e){return e["services-arr"].services},CallSlip:function(e){return o.getDataByService("CallSlip",e)},UBRequest:function(e){return o.getDataByService("ubrequest",e)},ShortLoan:function(e){return o.getDataByService("ShortLoan",e)},AlmaRequest:function(e){return o.getDataByService("AlmaRequest",e)},AlmaDigitization:function(e){return o.getDataByService("AlmaDigitization",e)},AlmaPurchaseRequest:function(e){return o.getDataByService("AlmaPurchaseRequest",e)},AlmaResourceSharing:function(e){return o.getDataByService("AlmaResourceSharing",e)},AlmaRequestAnyItem:function(e){return o.getDataByService("AlmaRequestAnyItem",e)},AlmaRequestOther:function(e){return o.getDataByService("AlmaRequestOther",e)},AlmaDigitizationOther:function(e){return o.getDataByService("AlmaDigitizationOther",e)},AlmaItemRequest:function(e){return o.getDataByService("AlmaRequest",e)},AlmaItemDigitization:function(e){return o.getDataByService("AlmaDigitization",e)}},this.mappingTablePerService={HoldRequest:this.mappingTablesCache.tables.HOLD_OPTIONAL_REQUEST_PARAMETERS,ILL:this.mappingTablesCache.tables.ILL_OPTIONAL_REQUEST_PARAMETERS,Recall:this.mappingTablesCache.tables.RECALL_OPTIONAL_REQUEST_PARAMETERS,PhotocopyRequest:this.mappingTablesCache.tables.PHOTOCOPY_OPTIONAL_REQUEST_PARAMETERS,CallSlip:this.mappingTablesCache.tables.CALL_SLIP_OPTIONAL_REQUEST_PARAMETERS,UBRequest:this.mappingTablesCache.tables.UB_OPTIONAL_REQUEST_PARAMETERS,AlmaRequest:this.mappingTablesCache.tables.HOLD_BOOKING_OPTIONAL_REQUEST_PARAMETERS,AlmaDigitization:this.mappingTablesCache.tables.DIGITIZATION_OPTIONAL_REQUEST_PARAMETERS,AlmaPurchaseRequest:this.mappingTablesCache.tables.PURCHASE_REQUEST_OPTIONAL_PARAMETERS,AlmaResourceSharing:this.mappingTablesCache.tables.RESOURCE_SHARING_REQUEST_PARAMETERS,AlmaRequestAnyItem:this.mappingTablesCache.tables.HOLD_BOOKING_OPTIONAL_REQUEST_PARAMETERS,AlmaRequestOther:this.mappingTablesCache.tables.HOLD_BOOKING_OPTIONAL_REQUEST_PARAMETERS,AlmaDigitizationOther:this.mappingTablesCache.tables.DIGITIZATION_OPTIONAL_REQUEST_PARAMETERS,AlmaItemRequest:this.mappingTablesCache.tables.HOLD_BOOKING_OPTIONAL_REQUEST_PARAMETERS,AlmaItemDigitization:this.mappingTablesCache.tables.DIGITIZATION_OPTIONAL_REQUEST_PARAMETERS},this.copyRight={ILL:function(){return o.mappingTablesCache.findByProperties(o.mappingTablePerService.ILL,{source2:"copyright",target:"YES"})},AlmaDigitization:function(){var e=o.mappingTablesCache.findByProperties(o.mappingTablePerService.AlmaDigitization,{source2:"copyrightDeclaration",target:"Yes"});return o._digitizationCopyright?e:void 0},AlmaDigitizationOther:function(){var e=o.mappingTablesCache.findByProperties(o.mappingTablePerService.AlmaDigitization,{source2:"copyrightDeclaration",target:"Yes"});return o._digitizationCopyright?e:void 0},AlmaItemDigitization:function(){var e=o.mappingTablesCache.findByProperties(o.mappingTablePerService.AlmaDigitization,{source2:"copyrightDeclaration",target:"Yes"});return o._digitizationCopyright?e:void 0},AlmaResourceSharing:function(){var e=o.mappingTablesCache.findByProperties(o.mappingTablePerService.AlmaResourceSharing,{source2:"copyrights",target:"Yes"});return o._resourceSharingCopyright?e:void 0}},this.filterMappingTableRowsByCitationType=function(e){return function(t){return!!t.source3&&("book"===t.source3&&"BK"===e.citationType||"article"===t.source3&&"CR"===e.citationType)}},this._reqAlert=this.alertService.create(u.ALERT_MSG_TYPE.REQUEST),this.$translate("almaDigitization.copyright.message").then(function(e){e&&e.length>0?o._digitizationCopyright=!0:o._digitizationCopyright=!1}),this.$translate("almaResourceSharing.copyright.message").then(function(e){e&&e.length>0?o._resourceSharingCopyright=!0:o._resourceSharingCopyright=!1})}return Object.defineProperty(e.prototype,"requestIsLoading",{get:function(){return this._requestIsLoading},set:function(e){return this._requestIsLoading=e},enumerable:!0,configurable:!0}),e.prototype.getHoldAdditionalParams=function(e){return{}},e.prototype.getILLAdditionalParams=function(e){return{}},e.prototype.getRecallAdditionalParams=function(e){return{}},e.prototype.getPhotocopyAdditionalParams=function(e){return{}},e.prototype.getCallSlipAdditionalParams=function(e){return{}},e.prototype.getUBAdditionalParams=function(e){var t,r=this;return t=d.isArray(e.pnx.control.sourcedbandrecordid)?e.pnx.control.sourcedbandrecordid.map(function(e,t,n){return r.handleDedup(e)}):this.handleDedup(e.pnx.control.sourcedbandrecordid),{ils_db_id_record_id:t}},e.prototype.getShortLoanAdditionalParams=function(e){return{}},e.prototype.getAlmaDigitizationAdditionalParams=function(e){return{}},e.prototype.getAlmaRequestAdditionalParams=function(e){return{}},e.prototype.getAlmaPurchaseRequestAdditionalParams=function(e){return{}},e.prototype.getAlmaResourceSharingAdditionalParams=function(e){return{}},e.prototype.getAlmaRequestAnyItemAdditionalParams=function(e){return{}},e.prototype.handleDedup=function(e){var t=f(e,"$$V");return t.length>1&&(e=t[1]),t=f(e,"$$"),t.length>1&&(e=t[0]),e},e.prototype.setMessages=function(e){this._reqAlert.show(e)},e.prototype.getHtml=function(e,t){var r="";return e?t&&(r='<span class="bar-text margin-right-small" translate="'+t+'"></span>'):r='<span class="bar-text margin-right-small" translate="nui.request.signin"></span><prm-authentication [is-logged-in]="ctrl.userName().length > 0" flex="none"></prm-authentication>',r},Object.defineProperty(e.prototype,"formFields",{get:function(){return this._formFields},set:function(e){this._formFields=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"form",{get:function(){return this._form},set:function(e){this._form=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formData",{get:function(){return this._formData},set:function(e){this._formData=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ilsData",{get:function(){return this._ilsData},set:function(e){this._ilsData=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formchanged",{get:function(){return this._formchanged},set:function(e){this._formchanged=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"service",{get:function(){return this._service},set:function(e){this._service=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ilsApiId",{get:function(){return this._ilsApiId},set:function(e){this._ilsApiId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reqAlert",{get:function(){return this._reqAlert},enumerable:!0,configurable:!0}),e.prototype.setupNewForm=function(e,t){this.form=[],this.formData={},this.ilsData=t,this.service=e,this.formFields=this.requestFromService.getFormFields(this.service),this.updateForm({service:e})},e.prototype.updateFormUnbound=function(e){e||(e={}),e.service&&(this.service=e.service),this.form=this.parseFields(this.service,e)},e.prototype.isCopyRight=function(e){return!!this.copyRight[e.type]&&this.copyRight[e.type]()},e.prototype.parseFields=function(e,t){var r=this;if(!this.formFields)return[];t.trigger&&h(this.formFields,function(e){e.disabled&&(r.formData[e.name]=void 0,e.disabled=!1)});var n=this.formFields.map(function(n,i,o){return r.parseItem(e,n,t)}).filter(this.filterEmpty);return n&&n.length>0&&n[0].order?n.sort(function(e,t){return e.order&&t.order?parseFloat(e.order)-parseFloat(t.order):e.order&&!t.order?-1:!e.order&&t.order?1:0}):n},e.prototype.parseItem=function(e,t,r){var n=this;if(!t)return{};this.updateFieldFromMappingTable(e,t);var i=this.getIlsDataForField(e,t);return(t.name!==r.trigger||t.duplicateOf===r.trigger)&&t.populator&&t.populator.func&&i&&(t.populator.func(t,this.formFields,this.formData,i),!t.options||0===t.options.length)?{}:(this.requestFromService.getForm(e).handleField(t,this.formFields,this.formData,this.ilsDataPerService[e.type](this.ilsData),r),t.events&&(t.events.onChange=this.updateForm,t.events.onClick=this.updateForm,t.events.params={service:e,trigger:t.name},"requestType"===t.name&&(t.events.onClick=function(e){h(e.formFields,function(t){"requestType"!==t.name&&(e.formData[t.name]=void 0,t.disabled=!1)}),n.updateForm()},t.events.params={formData:this.formData,formFields:this.formFields})),t)},e.prototype.getIlsDataForField=function(e,t){return t.path===l.FormBuilderEnums.ROOT?this.ilsData:this.ilsDataPerService[e.type]?this.ilsDataPerService[e.type](this.ilsData):void 0},e.prototype.filterEmpty=function(e){return e.name},e.prototype.updateFieldFromMappingTable=function(e,t){if(this.mappingTablePerService[e.type]){var r=this.mappingTablesCache.findByProperties(this.mappingTablePerService[e.type],{source2:t.key});if(r&&0!==r.length){var n;"AlmaResourceSharing"===e.type&&r.length>1&&(r=r.filter(this.filterMappingTableRowsByCitationType(this._formData))),n=r[0],"No"===n.target?(t.saveFormField||(t.saveFormField={}),t.saveFormField.uiType=t.uiType,t.uiType=l.FormBuilderEnums.UI_TYPE.HIDDEN):t.saveFormField&&t.uiType===l.FormBuilderEnums.UI_TYPE.HIDDEN&&t.saveFormField.uiType&&m(t,"populator.params.singleValueBehaviour")!==l.FormBuilderEnums.UI_TYPE.HIDDEN&&(t.uiType=t.saveFormField.uiType),n.source5&&(t.mandatory="Yes"===n.source5);var i=this.requestFromService.getSectionsMap(this.service);i&&(t.order=100*i[n.source3]+parseInt(n.source4,10))}}},e.prototype.getDataByService=function(e,t){var r=p(t["services-arr"].services,function(t){return t["type-name"]===e||t["service-name"]===e});return r?r:[]},e.prototype.getServicesAdditionalParams=function(e){return{HoldRequest:this.getHoldAdditionalParams(e),ILL:this.getILLAdditionalParams(e),Recall:this.getRecallAdditionalParams(e),PhotocopyRequest:this.getPhotocopyAdditionalParams(e),CallSlip:this.getCallSlipAdditionalParams(e),UBRequest:this.getUBAdditionalParams(e),ShortLoan:this.getShortLoanAdditionalParams(e),AlmaDigitization:this.getAlmaDigitizationAdditionalParams(e),AlmaPurchaseRequest:this.getAlmaPurchaseRequestAdditionalParams(e),AlmaRequest:this.getAlmaRequestAdditionalParams(e),AlmaResourceSharing:this.getAlmaResourceSharingAdditionalParams(e),AlmaRequestAnyItem:this.getAlmaRequestAnyItemAdditionalParams(e),AlmaDigitizationOther:this.getAlmaDigitizationAdditionalParams(e),AlmaRequestOther:this.getAlmaRequestAdditionalParams(e),AlmaItemDigitization:this.getAlmaDigitizationAdditionalParams(e),AlmaItemRequest:this.getAlmaRequestAdditionalParams(e)}},e}();g=n([a.Injectable(),o(0,a.Inject("$translate")),i("design:paramtypes",[Function,s.RequestFromService,c.MappingTablesCache,l.FormBuilderService,u.AlertFactory])],g),r.RequestService=g,r.default=[]},{"../../../../../infra/formBuilder/formBuilder.service":553,"../../../../../infra/widgets/alerts/alertFactory.service":574,"../../../../../mappingTablesCache/mappingTablesCache.service":592,"./requestForms.service":731,angular:"angular","lodash/filter":246,"lodash/forEach":253,"lodash/get":255,"lodash/split":305,"ng-metadata/core":362}],731:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("../../../../../infra/formBuilder/formBuilder.service"),s=e("./requestTypes/callslipRequest"),c=e("./requestTypes/holdRequest"),l=e("./requestTypes/illRequest"),u=e("./requestTypes/acquisitionRequest"),d=e("./requestTypes/recallRequest"),p=e("./requestTypes/photocopyRequest"),f=e("./requestTypes/shortLoanRequest"),h=e("./requestTypes/ubRequest"),m=e("./requestTypes/alma/AlmaRequest"),g=e("./requestTypes/alma/almaDigitization"),v=e("./requestTypes/alma/almaPurchaseRequest"),y=e("./requestTypes/alma/almaResourceSharing"),b=e("./requestTypes/alma/AlmaRequestAnyItem"),S=e("./requestTypes/alma/AlmaRequestOther"),_=e("./requestTypes/alma/almaDigitizationOther"),w=e("./requestTypes/alma/almaItemRequest"),E=e("./requestTypes/alma/almaItemDigitization"),T=e("lodash/cloneDeep"),O=function(){function e(e,t,r,n,i,o,a,s,c,l,u,d,p,f,h,m,g,v){this.formBuilderService=e,this.forms={HoldRequest:r,CallSlip:t,AcquisitionRequest:i,ILL:n,Recall:o,PhotocopyRequest:a,UBRequest:s,ShortLoan:c,AlmaRequest:l,AlmaDigitization:u,AlmaPurchaseRequest:d,AlmaResourceSharing:p,AlmaRequestAnyItem:f,AlmaRequestOther:h,AlmaDigitizationOther:m,AlmaItemRequest:g,AlmaItemDigitization:v}}return e.prototype.getFormFields=function(e){return T(this.forms[e.type].getFields())},e.prototype.getSectionsMap=function(e){return T(this.forms[e.type].getSectionsMap())},e.prototype.getForm=function(e){return this.forms[e.type]},e}();O=n([o.Injectable(),i("design:paramtypes",[a.FormBuilderService,s.CallslipRequest,c.HoldRequest,l.IllRequest,u.AcquisitionRequest,d.RecallRequest,p.PhotocopyRequest,h.UBRequest,f.ShortLoanRequest,m.AlmaRequest,g.AlmaDigitization,v.AlmaPurchaseRequest,y.AlmaResourceSharing,b.AlmaRequestAnyItem,S.AlmaRequestOther,_.AlmaDigitizationOther,w.AlmaItemRequest,E.AlmaItemDigitization])],O),r.RequestFromService=O},{"../../../../../infra/formBuilder/formBuilder.service":553,"./requestTypes/acquisitionRequest":734,"./requestTypes/alma/AlmaRequest":735,"./requestTypes/alma/AlmaRequestAnyItem":736,"./requestTypes/alma/AlmaRequestOther":737,"./requestTypes/alma/almaDigitization":738,"./requestTypes/alma/almaDigitizationOther":739,"./requestTypes/alma/almaItemDigitization":740,"./requestTypes/alma/almaItemRequest":741,"./requestTypes/alma/almaPurchaseRequest":742,"./requestTypes/alma/almaResourceSharing":744,"./requestTypes/callslipRequest":745,"./requestTypes/holdRequest":746,"./requestTypes/illRequest":747,"./requestTypes/photocopyRequest":748,"./requestTypes/recallRequest":749,"./requestTypes/shortLoanRequest":751,"./requestTypes/ubRequest":752,"lodash/cloneDeep":237,"ng-metadata/core":362}],732:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("../opac.directive"),s=e("angular"),c=e("ng-metadata/core"),l=e("./requestsService.service"),u=e("./request.service"),d=e("../opac.service"),p=e("../../../../../nddUtils/pnxUtil.service"),f=e("../../../../../security/userSessionManager.service"),h=e("lodash/filter"),m=function(){function e(e,t,r,n,i,o,a){this.requestServicesService=e,this.opacService=t,this.requestService=r,this.pnxUtil=n,this.userSessionManagerService=i,this.$scope=o,this.$rootScope=a,this.changeTabEvent=new c.EventEmitter}return Object.defineProperty(e.prototype,"services",{get:function(){return this.requestServicesService.services},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recordId",{get:function(){return this._recordId},set:function(e){this._recordId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"form",{get:function(){return this.requestService.form},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabId",{get:function(){return a.OPAC_TAB.LOCATIONS},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"servicesListIsLoading",{get:function(){return this._servicesListIsLoading},set:function(e){this._servicesListIsLoading=e},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.activate(),this._servicesAdditionalParams=this.requestService.getServicesAdditionalParams(this.item),this.$rootScope.$on("silentLogin",function(){return e.reloadServices()})},e.prototype.getServiceAdditionalParams=function(e){return this._servicesAdditionalParams[e.type]},e.prototype.isLoggedIn=function(){return!this.userSessionManagerService.isGuest()},e.prototype.isLoggedInIDP=function(){return this.userSessionManagerService.isLoggedInIDP()},e.prototype.changeTab=function(e){this.changeTabEvent.emit(e)},e.prototype.reloadServices=function(){this.activate(),this._servicesAdditionalParams=this.requestService.getServicesAdditionalParams(this.item)},e.prototype.activate=function(){this.recordId=this.ripIlsApiId(this.item),this.requestService.ilsApiId=this.recordId,this.getServicesFromIls()},e.prototype.getServicesFromIls=function(){var e=this;if(this.requestServicesService.services={},this.servicesListIsLoading=!1,this.requestService.setMessages(this.requestService.getHtml(this.isLoggedIn(),void 0)),this.isLoggedIn()){this.servicesListIsLoading=!0;var t=this.item.delivery.GetIt1.map(function(e){return e.links}).reduce(function(e,t){return e.concat(t)},[]).filter(function(e){return e.inst4opac}).map(function(e){return e.inst4opac})[0],r=this.checkValidUser(t,this.item.delivery.holding);if(this.item.delivery.GetIt1&&r){var n=t||this.item.delivery.holding[0].organization,i=void 0;this.item.delivery&&(i=this.item.delivery.physicalServiceId),this.opacService.getIlsServicesList(this.recordId,n,i).then(function(t){e.requestServicesService.services=t.data,e.updateServicesList();var r=t["reply-text"],n=!t.data.serviceinfo||0===t.data.serviceinfo.length||"N"===t.data.serviceinfo[0].allowed;e.isLoggedIn()&&r&&"0000"!==t["reply-code"]&&n&&e.requestService.setMessages(e.requestService.getHtml(e.isLoggedIn(),r)),e.servicesListIsLoading=!1},function(t){e.servicesListIsLoading=!1})}else this.requestService.setMessages(this.requestService.getHtml(this.isLoggedIn(),"requesttab.user.not.valid")),this.servicesListIsLoading=!1}},e.prototype.checkValidUser=function(e,t){var r=e,n=!0;return t.forEach(function(t,i,o){e===t.organization&&(r=e,n=t.isValidUser)}),r&&n},e.prototype.updateServicesList=function(){var e=this;s.forEach(this.requestServicesService.services.serviceinfo,function(t,r){var n={path:t["link-to-service"],method:"GET",serviceType:t["service-type"]};e.opacService.updateService(t.type,n)})},e.prototype.ripIlsApiId=function(e){if(e.delivery&&e.delivery.GetIt1){var t=h(e.delivery.GetIt1,function(e){if("Physical Item"===e.category||"Microform"===e.category||"Alma-P"===e.category){var t=e.links;if(!t)return!1;var r=h(t,function(e){return e.ilsApiId});return r}});return t[0].links[0].ilsApiId}},Object.defineProperty(e.prototype,"reqAlert",{get:function(){return this.isLoggedIn()&&this.requestService.reqAlert&&this.requestService.reqAlert.getMsgHtml()===this.requestService.getHtml(!1,void 0)&&this.requestService.setMessages(this.requestService.getHtml(this.isLoggedIn(),void 0)),this.requestService.reqAlert},enumerable:!0,configurable:!0}),e}();n([c.Input(),i("design:type",Object)],m.prototype,"item",void 0),n([c.Output(),i("design:type",c.EventEmitter)],m.prototype,"changeTabEvent",void 0),m=n([c.Component({selector:"prm-request-services",templateUrl:"components/search/fullView/getit/opac/request/request-services.html"}),o(5,c.Inject("$scope")),o(6,c.Inject("$rootScope")),i("design:paramtypes",[l.RequestServicesService,d.OpacService,u.RequestService,p.PnxUtil,f.UserSessionManagerService,Object,Object])],m),r.PrmRequestServices=m},{"../../../../../nddUtils/pnxUtil.service":604,"../../../../../security/userSessionManager.service":853,"../opac.directive":725,"../opac.service":727,"./request.service":730,"./requestsService.service":753,angular:"angular","lodash/filter":246,"ng-metadata/core":362}],733:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../../../../../../infra/formBuilder/formBuilder.service"),i=e("../../../../../../nddUtils/dateUtils.service"),o=e("lodash/uniqBy"),a=e("lodash/flatten"),s=e("lodash/filter"),c=e("lodash/forEach"),l=e("lodash/includes"),u=e("lodash/split"),d=(e("lodash/get"),e("angular")),p=d.injector(["ng"]),f=(p.get("$timeout"),function(){function e(){}return e.prototype.getFields=function(){return this.formFields},e.prototype.getSectionsMap=function(){return this.sectionsMap},e.prototype.itemsArrayPopulator=function(e,t,r,n){var i=this,s=this.getIlsDataByPath(n,e,r),c=s.key;if(n=s.data,c||(c=e.name),!n)return void(e.options=[]);if(!e.duplicateOf||!this.isDuplicatedFieldExists(t,e)){var l=this.filterPopulator(t,e,r,n);d.isArray(l)||(l=[l]);var u=l.map(function(t,n,o){return i.parseDataForMultiSelect(t,e,r)});u=a(u),e.options=o(u,"label").filter(this.filterEmpty)}},e.prototype.freeTextPopulator=function(e,t,r,n){this.updateDefaultValue(e,n,r),e.options={dummy:"dummy"},r[e.name]&&(e.disabled=!0)},e.prototype.hardCodedPopulator=function(e,t,r,n){e.disableMultiValueCheck=!0,this.isIlsFieldExists(n,r,e)||(e.options={})},e.prototype.parseDataForMultiSelect=function(e,t,r){var n=this;if(!e)return[];var i=this.getRequestKey(t,r),o=e[i];if(d.isArray(o)){var a=o.map(function(e,i,o){return n.parseDataForMultiSelect(e,t,r)}).filter(this.filterEmpty);return a}var s;if(t.populator&&(s=t.populator.params),d.isObject(o)){if(s&&s.key&&s.value)return r[t.name]||"Y"!==o.default||this.updateFormData(r,t,o[s.key]),{label:o[s.value],value:o[s.key]};var l=[];return c(o,function(e,t){l.push({label:t,value:e})}),l}if(s&&s.byKey&&e[s.byKey]===i&&s.byValue&&e[s.byValue]){var u=[];if(s.byCategory){var p=[];return c(e[s.byValue],function(e){var t=[];c(e.optionsList,function(e){t.push({label:e.value,value:e.key})}),p.push({label:e[s.byCategory],options:t})}),p}return c(e[s.byValue],function(e){s.key&&s.value?u.push({label:e[s.value],value:e[s.key]}):(u.push({label:e.value,value:e.key}),r[t.name]||"Y"!==e.default||n.updateFormData(r,t,e.key))}),u}return s&&s.byCategory&&s.value&&s.key?{label:e[s.value],value:e[s.key],category:e[s.byCategory]}:s&&s.key?(r[t.name]||"Y"!==e.default||this.updateFormData(r,t,e[s.key]),{label:e[s.value],value:e[s.key]}):d.isObject(e)?{label:e[i],value:e[i]}:{label:e,value:e}},e.prototype.datePopulator=function(e,t,r,n){if(e.populator&&e.populator.params&&e.populator.params.path){if(!n)return void(e.options=[]);d.isArray(n)&&(n=n[0]);var i=[];c(n[e.populator.params.path],function(e){i.push({day:e[0],month:e[1],year:e[2]})}),e.options=i}},e.prototype.timeSlotPopulator=function(e,t,r,n){var o=this,a=this.getIlsDataByPath(n,e,r),s=a.key;
if(n=a.data,s||(s=e.name),!n)return void(e.options=[]);if(!e.dependOn||!e.dependOn.key)return void(e.options=[]);var c,l=new i.DateUtils;if(d.isArray(e.dependOn)||(c=r[e.dependOn.key],c instanceof Date&&(c=l.convertDateTypeToIlsDateString(c))),d.isArray(n)&&(n=n[0]),n=n[s],!c)return void(e.options=[]);n=n[c];var u=n.map(function(t,n,i){return o.parseTimeForMultiSelect(t,e,r)});e.options=u},e.prototype.filterEmpty=function(e){return e.value||e.options},e.prototype.onChange=function(){return""},e.prototype.onClick=function(){return""},e.prototype.handleField=function(e,t,r,o,a){var s=this;if(e.uiType===n.FormBuilderEnums.UI_TYPE.MULTI_LABEL&&e.options&&e.options.length>0&&this.updateFormData(r,e,"DUMMY"),e.populator&&e.populator.params&&(e.populator.params.defaultValue||e.populator.params.defaultValuePath)&&(e.populator.params.filters&&l(e.populator.params.filters,a.trigger)&&delete r[e.name],!r[e.name]&&e.options&&e.options.length>0&&e.populator.params.defaultValue===n.FormBuilderEnums.FIRST&&this.updateFormData(r,e,e.options[0].value),!r[e.name]&&e.options&&e.options.length>0&&e.populator.params.defaultValuePath)){var u=d.isArray(o)?o[0][e.populator.params.defaultValuePath]:o[e.populator.params.defaultValuePath];this.updateFormData(r,e,u)}if(e.dependOn){if(e.dependOn.ilsFields){var p=!0;return c(Object.keys(e.dependOn.ilsFields),function(n){var i=!1;c(e.dependOn.ilsFields[n],function(e){var n=s.getFieldByName(t,e);i||(i=s.isIlsFieldExists(o,r,n))}),p=p&&i}),void(p||(e.uiType=n.FormBuilderEnums.UI_TYPE.HIDDEN,delete r[e.name]))}e.uiTypeBack||(e.uiTypeBack=e.uiType),e.fieldTypeBack||(e.fieldTypeBack=e.fieldType);var f=!1;if(d.isArray(e.dependOn)||(e.dependOn=[e.dependOn]),c(e.dependOn,function(t){t.isExists===!!r[t.key]||t.booleanCheckVar?(e.uiType=e.uiTypeBack,e.fieldType=e.fieldTypeBack,e.disabled=!1):t.booleanValue&&"false"===t.booleanValue&&!s.checkIfCondValEqFormCondKey(r,t)?(e.uiType=e.uiTypeBack,e.fieldType=e.fieldTypeBack,e.disabled=!1):t.booleanValue&&"true"!==t.booleanValue||!s.checkIfCondValEqFormCondKey(r,t)?f=!0:(e.uiType=e.uiTypeBack,e.fieldType=e.fieldTypeBack,e.disabled=!1)}),f&&(e.fieldType=n.FormBuilderEnums.FIELD_TYPE.INTERNAL,e.dependOn.behavior===n.FormBuilderEnums.BEHAVIOR.DISABLED?(delete r[e.name],e.disabled=!0):e.uiType=n.FormBuilderEnums.UI_TYPE.HIDDEN),1===e.dependOn.length&&(e.dependOn=e.dependOn[0]),e.dependOn.booleanCheckVar){var h=e.dependOn.booleanCheckVar,m=this.parseDataAndKeyFromPath(o,h,r),g=(m.key,m.data);g||(e.uiType=n.FormBuilderEnums.UI_TYPE.HIDDEN)}}var v=!a.trigger;if(e.uiType!==n.FormBuilderEnums.UI_TYPE.CHECK_BOX&&e.options&&1===e.options.length&&(e.dependOn&&!d.isDefined(e.dependOn.isExists)&&(e.disabled=!0),e.disabled||(v&&e.uiType!==n.FormBuilderEnums.UI_TYPE.HIDDEN?(e.saveFormField||(e.saveFormField={}),e.saveFormField.uiType=e.uiType,this.singleValueBehaviourDefined(e)?e.uiType=e.populator.params.singleValueBehaviour:e.uiType=n.FormBuilderEnums.UI_TYPE.LABEL):e.disabled=!0,e.value=e.options[0].label),this.updateFormData(r,e,e.options[0].value)),this.needToRestoreUiType(e)&&(e.uiType=e.saveFormField.uiType),this.updateDefaultValue(e,o,r),d.isArray(o)&&(o=o[0]),this.isIlsFieldExists(o,r,e)||(e.uiType=n.FormBuilderEnums.UI_TYPE.HIDDEN),e.uiType===n.FormBuilderEnums.UI_TYPE.DATE){var y=new i.DateUtils;r[e.name]instanceof Date||(r[e.name]=y.convertIlsDateStringToDateType(r[e.name])),e.populator&&e.populator.params&&e.populator.params.defaultValue&&(r[e.name]||e.populator.params.defaultValue!==n.FormBuilderEnums.TODAY||(r[e.name]=new Date)),"now"===e.minDate&&(e.minDate=new Date)}},e.prototype.singleValueBehaviourDefined=function(e){return e.populator&&e.populator.params&&e.populator.params.singleValueBehaviour},e.prototype.needToRestoreUiType=function(e){return e.uiType&&e.uiType===n.FormBuilderEnums.UI_TYPE.LABEL&&e.saveFormField&&e.saveFormField.uiType&&e.options&&e.options.length>1},e.prototype.checkIfCondValEqFormCondKey=function(e,t){return d.isArray(t.value)?t.value&&t.value.indexOf(e[t.key])!==-1:t.value&&e[t.key]===t.value},e.prototype.updateDefaultValue=function(e,t,r){d.isArray(t)&&(t=t[0]);var n=e.valuePath||"chosen-parameters-map";if(t[n]&&!r[e.name]){var i=d.isObject(t[n])?t[n][e.key]:t[n];this.updateFormData(r,e,i),e.value=i}},e.prototype.isIlsFieldExists=function(e,t,r){var i=r.existingPath||"optional-service-parameters/"+r.name,o=this.parseDataAndKeyFromPath(e,i,t);e=o.data;var a=o.key;if(t[r.name])return!0;var s=e&&d.isDefined(e[a])||e&&d.isArray(e)&&d.isDefined(e[0][a]),c=!r.disableMultiValueCheck&&r.options&&r.options.length>0,l=r.fieldType===n.FormBuilderEnums.FIELD_TYPE.INTERNAL,u=s||c||l;return delete r.disableMultiValueCheck,u},e.prototype.filterPopulator=function(e,t,r,n){var i=this;return t.populator&&t.populator.params&&t.populator.params.filters?s(n,function(n){var o=!0;return c(t.populator.params.filters,function(t){var a=i.getFieldByName(e,t);if(a){var s=i.getRequestKey(a,r);if(d.isArray(n[s])){var l=!1;c(n[s],function(e){r[t]&&i.convertToString(e[a.populator.params.key])!==i.convertToString(r[t])||(l=!0)}),o=o&&l}else if(d.isObject(n[s])){var u=!1;r[t]&&n[s][a.populator.params.key]!==r[t]||(u=!0),o=o&&u}else r[t]&&n[s]!==r[t]&&(o=!1)}}),o}):n},e.prototype.convertToString=function(e){return e?e.toString():e},e.prototype.getRequestKey=function(e,t){return e.path&&e.path!==n.FormBuilderEnums.ROOT?this.getRequestKeyByPath(e.path,t):e.name},e.prototype.getRequestKeyByPath=function(e,t){if(!e)return"";var r=e.split("/"),i=r[r.length-1],o=i.indexOf("{"),a=i.indexOf("}"),s=i.substring(o+1,a);if(o>=0){var c=u(s,":");c[0]===n.FormBuilderEnums.FIELD&&(i=t[c[1]])}return i},e.prototype.isDuplicatedFieldExists=function(e,t){var r=this.getFieldByName(e,t.duplicateOf);return r&&(t.mandatory=r.mandatory,t.mandatoryIndicator=r.mandatoryIndicator),r&&r.options&&r.options.length>0},e.prototype.getFieldByName=function(e,t){var r=s(e,function(e){return e.name===t});return r[0]},e.prototype.getIlsDataByPath=function(e,t,r){var n=t.path;return n?this.parseDataAndKeyFromPath(e,n,r):{key:t.name,data:e}},e.prototype.parseDataAndKeyFromPath=function(e,t,r){var n;return c(t.split("/"),function(t,i,o){if(i===o.length-1)n=t;else{if(e){if(d.isArray(e)){var a=t.indexOf("{");if(a>0){var c=t.indexOf("}"),l=t.substring(a+1,c);t=t.substring(0,a);var p=u(l,":");e=s(e,function(e){return e[p[1]]===r[p[0]]})}e&&(e=e[0])}}else e=[];e&&(e=e[t])}}),n=this.getRequestKeyByPath(t,r),{key:n,data:e}},e.prototype.parseTimeForMultiSelect=function(e,t,r){return t.populator&&t.populator.params?t.populator.params.func?t.populator.params.func(t,e):{label:e[t.populator.params.key],value:e[t.populator.params.value]}:[]},e.prototype.updateFormData=function(e,t,r){r?e[t.name]=r:delete e[t.name],t.uiType===n.FormBuilderEnums.UI_TYPE.DROP_DOWN&&(r?(t.mandatory&&(t.mandatoryIndicator=!0),t.mandatory=!1):t.mandatoryIndicator&&(t.mandatory=!0))},e}());r.AbstractRequest=f},{"../../../../../../infra/formBuilder/formBuilder.service":553,"../../../../../../nddUtils/dateUtils.service":597,angular:"angular","lodash/filter":246,"lodash/flatten":251,"lodash/forEach":253,"lodash/get":255,"lodash/includes":260,"lodash/split":305,"lodash/uniqBy":322}],734:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./abstractRequest"),c=e("../../../../../../infra/formBuilder/formBuilder.service"),l=function(e){function t(){var t=e.call(this)||this;return t.formFields=[{key:"request_issue",name:"request_issue",label:"ill.request_issue",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT}],t}return n(t,e),t}(s.AbstractRequest);l=i([a.Injectable(),o("design:paramtypes",[])],l),r.AcquisitionRequest=l},{"../../../../../../infra/formBuilder/formBuilder.service":553,"./abstractRequest":733,"ng-metadata/core":362}],735:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../abstractRequest"),c=e("../../../../../../../infra/formBuilder/formBuilder.service"),l=function(e){function t(){var t=e.call(this)||this;return t.formFields=[{key:"hold-or-booking",name:"requestType",label:"almaRequest.requestType",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,path:"requestType",uiType:c.FormBuilderEnums.UI_TYPE.RADIO_BUTTON,singleValueUiType:c.FormBuilderEnums.UI_TYPE.HIDDEN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",defaultValue:c.FormBuilderEnums.FIRST,singleValueBehaviour:c.FormBuilderEnums.UI_TYPE.HIDDEN}},events:{onClick:t.onClick.bind(t),params:[]}},{key:"pickupInstitution",name:"pickupInstitution",path:"groups-list-map/pickupInstitution",label:"almaRequest.pickupInstitution",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",filters:["pickupLocation","termsOfUse","materialType","requestType"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"pickupLocation",name:"pickupLocation",path:"groups-list-map/pickupLocation",label:"almaRequest.pickupLocation",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",byCategory:"category",filters:["pickupInstitution","termsOfUse","materialType","requestType"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"termsOfUse",name:"termsOfUse",path:"groups-list-map/termsOfUse",label:"almaRequest.termsOfUse",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{filters:["pickupInstitution","pickupLocation","materialType","requestType"]}},events:{onChange:t.onChange.bind(t),params:[]},dependOn:{key:"requestType",value:"hold"}},{key:"materialType",name:"materialType",path:"groups-list-map/materialType",label:"almaRequest.materialType",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",filters:["pickupInstitution","pickupLocation","termsOfUse","requestType"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"notNeedAfter",name:"lastInterestDate",label:"almaRequest.notNeedAfter",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.DATE,uiType:c.FormBuilderEnums.UI_TYPE.DATE,minDate:"now",dependOn:{key:"requestType",value:"hold"},populator:{params:{defaultValue:c.FormBuilderEnums.TODAY,allow:c.FormBuilderEnums.FUTURE_DATES}}},{key:"checkAvailiability",name:"checkAvailiability",label:"almaRequest.checkAvailiability",existingPath:"checkAvailiability",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.LINK,dependOn:{key:"requestType",value:"booking"}},{key:"startDate",name:"startDate",label:"almaRequest.startDate",existingPath:"dummyPath",mandatory:!0,fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DATE_TIME,dependOn:{key:"requestType",value:"booking"}},{key:"endDate",name:"endDate",label:"almaRequest.endDate",existingPath:"dummyPath",mandatory:!0,fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DATE_TIME,dependOn:{key:"requestType",value:"booking"}},{key:"comment",name:"comment",label:"almaRequest.comment",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT}],t}return n(t,e),t}(s.AbstractRequest);l=i([a.Injectable(),o("design:paramtypes",[])],l),r.AlmaRequest=l},{"../../../../../../../infra/formBuilder/formBuilder.service":553,"../abstractRequest":733,"ng-metadata/core":362}],736:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../abstractRequest"),c=e("../../../../../../../infra/formBuilder/formBuilder.service"),l=function(e){function t(){var t=e.call(this)||this;return t.formFields=[{key:"hold-or-booking",name:"requestType",label:"almaRequest.requestType",value:"hold",path:"groups-list-map/requestType",fieldType:c.FormBuilderEnums.FIELD_TYPE.INTERNAL,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN,populator:{params:{defaultValue:c.FormBuilderEnums.FIRST}},options:[{label:"almaRequest.requestType.hold",value:"hold"}],events:{onClick:t.onClick.bind(t),params:[]}},{key:"manualDescription",name:"manualDescription",label:"almaRequestAnyItem.manualDescription",mandatory:!0,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"pickupInstitution",name:"pickupInstitution",path:"groups-list-map/pickupInstitution",label:"almaRequest.pickupInstitution",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",filters:["pickupLocation","requestType"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"pickupLocation",name:"pickupLocation",path:"groups-list-map/pickupLocation",label:"almaRequest.pickupLocation",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",byCategory:"category",filters:["pickupInstitution","requestType"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"notNeedAfter",name:"lastInterestDate",label:"almaRequest.notNeedAfter",existingPath:"hasHold",fieldType:c.FormBuilderEnums.FIELD_TYPE.DATE,uiType:c.FormBuilderEnums.UI_TYPE.DATE,minDate:"now",dependOn:{key:"requestType",value:"hold"},populator:{params:{defaultValue:c.FormBuilderEnums.TODAY,allow:c.FormBuilderEnums.FUTURE_DATES}}},{key:"comment",name:"comment",label:"almaRequest.comment",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT}],t}return n(t,e),t}(s.AbstractRequest);l=i([a.Injectable(),o("design:paramtypes",[])],l),r.AlmaRequestAnyItem=l},{"../../../../../../../infra/formBuilder/formBuilder.service":553,"../abstractRequest":733,"ng-metadata/core":362}],737:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../abstractRequest"),c=e("../../../../../../../infra/formBuilder/formBuilder.service"),l=function(e){function t(){var t=e.call(this)||this;return t.formFields=[{key:"hold-or-booking",name:"requestType",label:"almaRequest.requestType",value:"hold",path:"groups-list-map/requestType",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN,populator:{params:{defaultValue:c.FormBuilderEnums.FIRST}},options:[{label:"almaRequest.requestType.hold",value:"hold"}],events:{onClick:t.onClick.bind(t),params:[]}},{key:"manualDescription",name:"manualDescription",label:"almaRequest.manualDescription",mandatory:!0,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"pickupLocationName",name:"pickupLocationName",label:"almaRequest.pickupLocationName",mandatory:!1,valuePath:"pickupLocationName",existingPath:"pickupLocationName",populator:{func:t.itemsArrayPopulator.bind(t)},fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.LABEL},{key:"notNeedAfter",name:"lastInterestDate",label:"almaRequest.notNeedAfter",existingPath:"hasHold",fieldType:c.FormBuilderEnums.FIELD_TYPE.DATE,uiType:c.FormBuilderEnums.UI_TYPE.DATE,minDate:"now",dependOn:{key:"requestType",value:"hold"},populator:{params:{defaultValue:c.FormBuilderEnums.TODAY,allow:c.FormBuilderEnums.FUTURE_DATES}}},{key:"comment",name:"comment",label:"almaRequest.comment",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"instCode",name:"instCode",label:"almaRequest.institutionCode",mandatory:!0,valuePath:"instCode",existingPath:"instCode",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN},{key:"pickupLocation",name:"pickupLocation",label:"almaRequest.pickupLocation",mandatory:!1,valuePath:"pickupLocation",existingPath:"pickupLocation",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN},{key:"callNumber",name:"callNumber",label:"almaRequestOther.callNumber",mandatory:!0,valuePath:"callNumber",existingPath:"callNumber",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN},{key:"holdingKey",name:"holdingKey",label:"almaRequestOther.holdingKey",mandatory:!0,valuePath:"holdingKey",existingPath:"holdingKey",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN}],t}return n(t,e),t}(s.AbstractRequest);l=i([a.Injectable(),o("design:paramtypes",[])],l),r.AlmaRequestOther=l},{"../../../../../../../infra/formBuilder/formBuilder.service":553,"../abstractRequest":733,"ng-metadata/core":362}],738:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../abstractRequest"),c=e("../../../../../../../infra/formBuilder/formBuilder.service"),l=function(e){function t(){var t=e.call(this)||this;return t.formFields=[{key:"partial",name:"partial",value:"",path:"drop-downs/isPartial",mandatory:!1,fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.CHECK_BOX,events:{onChange:t.onChange.bind(t),params:[]},populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}},{key:"chapterArticleTitle",name:"chapterArticleTitle",label:"almaDigitization.chapterArticleTitle",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"partial",value:"Yes"}},{key:"chapterArticleAuthor",name:"chapterArticleAuthor",label:"almaDigitization.chapterArticleAuthor",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"partial",value:"Yes"}},{key:"startPage",name:"startPage",label:"almaDigitization.startPage",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"partial",value:"Yes"},inputType:"number",validPattern:"[1-9]\\d*"},{key:"endPage",name:"endPage",label:"almaDigitization.endPage",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"partial",value:"Yes"},inputType:"number",validPattern:"[1-9]\\d*"},{key:"fullChapter",name:"fullChapter",value:"",existingPath:"dummyPath",mandatory:!1,fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.CHECK_BOX,dependOn:{key:"partial",value:"Yes"},options:[{label:"almaDigitization.fullChapter",value:"N"}]},{key:"comment",name:"comment",label:"almaDigitization.comment",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"notNeededAfter",name:"notNeededAfter",label:"almaDigitization.notNeededAfter",mandatory:!1,value:"",existingPath:"dummyPath",minDate:"now",fieldType:c.FormBuilderEnums.FIELD_TYPE.DATE,uiType:c.FormBuilderEnums.UI_TYPE.DATE,populator:{params:{defaultValue:c.FormBuilderEnums.TODAY,allow:c.FormBuilderEnums.FUTURE_DATES}}},{key:"generalUseLabel",name:"generalUseLabel",label:"almaDigitization.generalUseLabel",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,minDate:"now",uiType:c.FormBuilderEnums.UI_TYPE.TEXT}],t}return n(t,e),t}(s.AbstractRequest);l=i([a.Injectable(),o("design:paramtypes",[])],l),r.AlmaDigitization=l},{"../../../../../../../infra/formBuilder/formBuilder.service":553,"../abstractRequest":733,"ng-metadata/core":362}],739:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../abstractRequest"),c=e("../../../../../../../infra/formBuilder/formBuilder.service"),l=function(e){function t(){var t=e.call(this)||this;return t.formFields=[{key:"manualIssueLevelDescrption",name:"manualIssueLevelDescrption",label:"almaDigitizationOther.manualDescription",mandatory:!0,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"partial",name:"partial",value:"",path:"drop-downs/isPartial",mandatory:!1,fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.CHECK_BOX,events:{onChange:t.onChange.bind(t),params:[]},populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}},{key:"chapterArticleTitle",name:"chapterArticleTitle",label:"almaDigitization.chapterArticleTitle",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"partial",value:"Yes"}},{key:"chapterArticleAuthor",name:"chapterArticleAuthor",label:"almaDigitization.chapterArticleAuthor",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"partial",value:"Yes"}},{key:"startPage",name:"startPage",label:"almaDigitization.startPage",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"partial",value:"Yes"},inputType:"number",validPattern:"[1-9]\\d*"},{key:"endPage",name:"endPage",label:"almaDigitization.endPage",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"partial",value:"Yes"},inputType:"number",validPattern:"[1-9]\\d*"},{key:"fullChapter",name:"fullChapter",value:"",existingPath:"dummyPath",mandatory:!1,fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.CHECK_BOX,dependOn:{key:"partial",value:"Yes"},options:[{label:"almaDigitization.fullChapter",value:"N"}]},{key:"comment",name:"comment",label:"almaDigitization.comment",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"notNeededAfter",name:"notNeededAfter",label:"almaDigitization.notNeededAfter",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.DATE,minDate:"now",uiType:c.FormBuilderEnums.UI_TYPE.DATE,populator:{params:{defaultValue:c.FormBuilderEnums.TODAY,allow:c.FormBuilderEnums.FUTURE_DATES}}},{key:"generalUseLabel",name:"generalUseLabel",label:"almaDigitization.generalUseLabel",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"instCode",name:"instCode",label:"almaRequest.institutionCode",mandatory:!0,valuePath:"instCode",existingPath:"instCode",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN},{key:"callNumber",name:"callNumber",label:"almaRequestOther.callNumber",mandatory:!0,valuePath:"callNumber",existingPath:"callNumber",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN},{key:"holdingKey",name:"holdingKey",label:"almaRequestOther.holdingKey",mandatory:!0,valuePath:"holdingKey",existingPath:"holdingKey",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN}],t}return n(t,e),t}(s.AbstractRequest);l=i([a.Injectable(),o("design:paramtypes",[])],l),r.AlmaDigitizationOther=l},{"../../../../../../../infra/formBuilder/formBuilder.service":553,"../abstractRequest":733,"ng-metadata/core":362}],740:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../abstractRequest"),c=e("../../../../../../../infra/formBuilder/formBuilder.service"),l=function(e){function t(){var t=e.call(this)||this;return t.formFields=[{key:"issueLevelDescription",name:"issueLevelDescription",label:"almaItemDigitization.issueLevelDescription",mandatory:!1,valuePath:"issueLevelDescription",existingPath:"issueLevelDescription",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.LABEL},{key:"partial",name:"partial",value:"",path:"drop-downs/isPartial",mandatory:!1,fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.CHECK_BOX,events:{onChange:t.onChange.bind(t),params:[]},populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}},{key:"chapterArticleTitle",name:"chapterArticleTitle",label:"almaDigitization.chapterArticleTitle",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"partial",value:"Yes"}},{key:"chapterArticleAuthor",name:"chapterArticleAuthor",label:"almaDigitization.chapterArticleAuthor",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"partial",value:"Yes"}},{key:"startPage",name:"startPage",label:"almaDigitization.startPage",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"partial",value:"Yes"},inputType:"number",validPattern:"[1-9]\\d*"},{key:"endPage",name:"endPage",label:"almaDigitization.endPage",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"partial",value:"Yes"},inputType:"number",validPattern:"[1-9]\\d*"},{key:"fullChapter",name:"fullChapter",value:"",existingPath:"dummyPath",mandatory:!1,fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.CHECK_BOX,dependOn:{key:"partial",value:"Yes"},options:[{label:"almaDigitization.fullChapter",value:"N"}]},{key:"comment",name:"comment",label:"almaDigitization.comment",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"notNeededAfter",
name:"notNeededAfter",label:"almaDigitization.notNeededAfter",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.DATE,uiType:c.FormBuilderEnums.UI_TYPE.DATE,minDate:"now",populator:{params:{defaultValue:c.FormBuilderEnums.TODAY,allow:c.FormBuilderEnums.FUTURE_DATES}}},{key:"generalUseLabel",name:"generalUseLabel",label:"almaDigitization.generalUseLabel",mandatory:!1,value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"itemId",name:"itemId",label:"almaDigitization.itemId",mandatory:!0,valuePath:"itemId",existingPath:"itemId",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN}],t}return n(t,e),t}(s.AbstractRequest);l=i([a.Injectable(),o("design:paramtypes",[])],l),r.AlmaItemDigitization=l},{"../../../../../../../infra/formBuilder/formBuilder.service":553,"../abstractRequest":733,"ng-metadata/core":362}],741:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../abstractRequest"),c=e("../../../../../../../infra/formBuilder/formBuilder.service"),l=function(e){function t(){var t=e.call(this)||this;return t.formFields=[{key:"hold-or-booking",name:"requestType",label:"almaRequest.requestType",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,path:"requestType",uiType:c.FormBuilderEnums.UI_TYPE.RADIO_BUTTON,singleValueUiType:c.FormBuilderEnums.UI_TYPE.HIDDEN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",defaultValue:c.FormBuilderEnums.FIRST,singleValueBehaviour:c.FormBuilderEnums.UI_TYPE.HIDDEN}},events:{onClick:t.onClick.bind(t),params:[]}},{key:"itemDescription",name:"itemDescription",label:"almaItemRequest.itemDescription",mandatory:!1,valuePath:"itemDescription",existingPath:"itemDescription",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.LABEL},{key:"pickupInstitution",name:"pickupInstitution",path:"groups-list-map/pickupInstitution",label:"almaRequest.pickupInstitution",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",filters:["pickupLocation","termsOfUse","materialType","requestType"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"pickupLocation",name:"pickupLocation",path:"groups-list-map/pickupLocation",label:"almaRequest.pickupLocation",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",byCategory:"category",filters:["pickupInstitution","termsOfUse","materialType","requestType"]}},events:{onChange:t.onChange.bind(t),params:[]},dependOn:{key:"requestType",value:["booking","hold"]}},{key:"termsOfUse",name:"termsOfUse",path:"groups-list-map/termsOfUse",label:"almaRequest.termsOfUse",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{filters:["pickupInstitution","pickupLocation","materialType","requestType"]}},events:{onChange:t.onChange.bind(t),params:[]},dependOn:{key:"requestType",value:"hold"}},{key:"materialType",name:"materialType",path:"groups-list-map/materialType",label:"almaRequest.materialType",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",filters:["pickupInstitution","pickupLocation","termsOfUse","requestType"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"notNeedAfter",name:"lastInterestDate",label:"almaRequest.notNeedAfter",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.DATE,uiType:c.FormBuilderEnums.UI_TYPE.DATE,minDate:"now",dependOn:{key:"requestType",value:"hold"},populator:{params:{defaultValue:c.FormBuilderEnums.TODAY,allow:c.FormBuilderEnums.FUTURE_DATES}}},{key:"checkAvailiability",name:"checkAvailiability",label:"almaRequest.checkAvailiability",existingPath:"checkAvailiability",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.LINK,dependOn:{key:"requestType",value:"booking"}},{key:"startDate",name:"startDate",label:"almaRequest.startDate",existingPath:"dummyPath",mandatory:!0,fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DATE_TIME,dependOn:{key:"requestType",value:"booking"}},{key:"endDate",name:"endDate",label:"almaRequest.endDate",existingPath:"dummyPath",mandatory:!0,fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DATE_TIME,dependOn:{key:"requestType",value:"booking"}},{key:"comment",name:"comment",label:"almaRequest.comment",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"itemId",name:"itemId",label:"almaRequest.itemId",mandatory:!0,valuePath:"itemId",existingPath:"itemId",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN}],t}return n(t,e),t}(s.AbstractRequest);l=i([a.Injectable(),o("design:paramtypes",[])],l),r.AlmaItemRequest=l},{"../../../../../../../infra/formBuilder/formBuilder.service":553,"../abstractRequest":733,"ng-metadata/core":362}],742:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../abstractRequest"),c=e("../../../../../../../infra/formBuilder/formBuilder.service"),l=function(e){function t(){var t=e.call(this)||this;return t.formFields=[{key:"citationType",name:"citationType",label:"almaResourceSharing.citationType",value:"book",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,existingPath:"dummyPath",valuePath:"citationType",uiType:c.FormBuilderEnums.UI_TYPE.RADIO_BUTTON,populator:{params:{defaultValuePath:"citationType"}},options:[{label:"almaPurchaseRequest.dropdown.select.book",value:"book"},{label:"almaPurchaseRequest.dropdown.select.journal",value:"journal"}],events:{onClick:t.onClick.bind(t),params:[]}},{key:"title",name:"title",label:"almaPurchaseRequest.title",mandatory:!0,valuePath:"title",existingPath:"title",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"author",name:"author",label:"almaPurchaseRequest.author",mandatory:!1,valuePath:"author",existingPath:"author",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"edition",name:"edition",label:"almaPurchaseRequest.edition",mandatory:!1,valuePath:"edition",existingPath:"edition",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"isbn",name:"isbn",label:"almaPurchaseRequest.isbn",mandatory:!1,valuePath:"isbn",existingPath:"isbn",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"citationType",value:"book"}},{key:"issn",name:"issn",label:"almaPurchaseRequest.issn",mandatory:!1,valuePath:"issn",existingPath:"issn",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"citationType",value:"journal"}},{key:"lccNumber",name:"lccNumber",label:"almaPurchaseRequest.lccNumber",mandatory:!1,valuePath:"lccNumber",existingPath:"lccNumber",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"oclcNumber",name:"oclcNumber",label:"almaPurchaseRequest.oclcNumber",mandatory:!1,valuePath:"oclcNumber",existingPath:"oclcNumber",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"publisher",name:"publisher",label:"almaPurchaseRequest.publisher",mandatory:!1,valuePath:"publisher",existingPath:"publisher",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"publication_year",name:"publication_year",label:"almaPurchaseRequest.publication_year",mandatory:!1,valuePath:"publication_year",existingPath:"publication_year",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"place_of_publication",name:"place_of_publication",label:"almaPurchaseRequest.place_of_publication",mandatory:!1,valuePath:"place_of_publication",existingPath:"place_of_publication",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"volume",name:"volume",label:"almaPurchaseRequest.volume",mandatory:!1,valuePath:"volume",existingPath:"volume",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT}],t}return n(t,e),t}(s.AbstractRequest);l=i([a.Injectable(),o("design:paramtypes",[])],l),r.AlmaPurchaseRequest=l},{"../../../../../../../infra/formBuilder/formBuilder.service":553,"../abstractRequest":733,"ng-metadata/core":362}],743:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./almaDigitization"),a=e("./almaDigitizationOther"),s=e("./almaItemDigitization"),c=e("./almaItemRequest"),l=e("./almaPurchaseRequest"),u=e("./AlmaRequest"),d=e("./AlmaRequestAnyItem"),p=e("./AlmaRequestOther"),f=e("./almaResourceSharing"),h=function(){function e(){}return e}();h=n([i.NgModule({declarations:[],providers:[o.AlmaDigitization,a.AlmaDigitizationOther,s.AlmaItemDigitization,c.AlmaItemRequest,l.AlmaPurchaseRequest,u.AlmaRequest,d.AlmaRequestAnyItem,p.AlmaRequestOther,f.AlmaResourceSharing],imports:[]})],h),r.AlmaRequestTypeModule=h},{"./AlmaRequest":735,"./AlmaRequestAnyItem":736,"./AlmaRequestOther":737,"./almaDigitization":738,"./almaDigitizationOther":739,"./almaItemDigitization":740,"./almaItemRequest":741,"./almaPurchaseRequest":742,"./almaResourceSharing":744,"ng-metadata/core":362}],744:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../abstractRequest"),c=e("../../../../../../../infra/formBuilder/formBuilder.service"),l=function(e){function t(){var t=e.call(this)||this;return t.sectionsMap={owner:1,type:2,book:3,article:4,delivery:5},t.formFields=[{key:"citationType",name:"citationType",label:"almaResourceSharing.citationType",value:"book",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,existingPath:"dummyPath",valuePath:"citationType",uiType:c.FormBuilderEnums.UI_TYPE.RADIO_BUTTON,populator:{params:{defaultValuePath:"citationType"}},options:[{label:"almaResourceSharing.book",value:"BK"},{label:"almaResourceSharing.article",value:"CR"}],events:{onClick:t.onClick.bind(t),params:[]}},{key:"title",name:"title",label:"almaResourceSharing.title",existingPath:"dummyPath",valuePath:"title",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"citationType",value:"BK"},maxlength:4e3},{key:"articleTitle",name:"articleTitle",label:"almaResourceSharing.articleTitle",existingPath:"dummyPath",valuePath:"articleTitle",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"citationType",value:"CR"},maxlength:4e3},{key:"journalTitle",name:"journalTitle",label:"almaResourceSharing.journalTitle",existingPath:"dummyPath",valuePath:"journalTitle",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"citationType",value:"CR"},maxlength:4e3},{key:"author",name:"author",label:"almaResourceSharing.authors",existingPath:"dummyPath",valuePath:"author",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,maxlength:4e3},{key:"authorInitials",name:"authorInitials",label:"almaResourceSharing.authInit",existingPath:"dummyPath",valuePath:"authorInitials",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,maxlength:4e3},{key:"issue",name:"issue",label:"almaResourceSharing.issue",existingPath:"dummyPath",valuePath:"issue",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"citationType",value:"CR"}},{key:"specificEdition",name:"specificEdition",label:"",value:"",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.CHECK_BOX,populator:{func:t.hardCodedPopulator.bind(t)},options:[{label:"almaResourceSharing.specificEdition",value:"Y"}],dependOn:{key:"citationType",value:"BK"}},{key:"edition",name:"edition",label:"almaResourceSharing.edition",existingPath:"dummyPath",valuePath:"edition",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"citationType",value:"BK"},maxlength:4e3},{key:"isbn",name:"isbn",label:"almaResourceSharing.isbn",existingPath:"dummyPath",valuePath:"isbn",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"citationType",value:"BK"},maxlength:4e3},{key:"issn",name:"issn",label:"almaResourceSharing.issn",existingPath:"dummyPath",valuePath:"issn",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"citationType",value:"CR"},maxlength:4e3},{key:"lccn",name:"lccn",label:"almaResourceSharing.lccNumber",existingPath:"dummyPath",valuePath:"lccn",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,maxlength:4e3},{key:"oclcNumber",name:"oclcNumber",label:"almaResourceSharing.oclcNumber",existingPath:"dummyPath",valuePath:"oclcNumber",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,maxlength:4e3},{key:"doi",name:"doi",label:"almaResourceSharing.doi",existingPath:"dummyPath",valuePath:"doi",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"citationType",value:"CR"},maxlength:4e3},{key:"pmid",name:"pmid",label:"almaResourceSharing.pmid",existingPath:"dummyPath",valuePath:"pmid",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"citationType",value:"CR"},maxlength:4e3},{key:"publisher",name:"publisher",label:"almaResourceSharing.publisher",existingPath:"dummyPath",valuePath:"publisher",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,maxlength:4e3},{key:"publicationDate",name:"publicationDate",label:"almaResourceSharing.year",existingPath:"dummyPath",valuePath:"publicationDate",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,maxlength:4e3},{key:"placeOfPublication",name:"placeOfPublication",label:"almaResourceSharing.placeOfPublication",existingPath:"dummyPath",valuePath:"placeOfPublication",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,maxlength:4e3},{key:"additionalAuthor",name:"additionalAuthor",label:"almaResourceSharing.additionalAuthor",existingPath:"dummyPath",valuePath:"additionalAuthor",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,maxlength:4e3},{key:"volume",name:"volume",label:"almaResourceSharing.volume",existingPath:"dummyPath",valuePath:"volume",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"citationType",value:"BK"},maxlength:4e3},{key:"journalVolume",name:"journalVolume",label:"almaResourceSharing.journalVolume",existingPath:"dummyPath",valuePath:"journalVolume",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"citationType",value:"CR"},maxlength:4e3},{key:"part",name:"part",label:"almaResourceSharing.part",existingPath:"dummyPath",valuePath:"part",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"citationType",value:"BK"},maxlength:4e3},{key:"chapter",name:"chapter",label:"almaResourceSharing.chapter",existingPath:"dummyPath",valuePath:"chapter",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,maxlength:4e3},{key:"source",name:"source",label:"almaResourceSharing.source",existingPath:"dummyPath",valuePath:"source",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,maxlength:4e3},{key:"seriesTitleNumber",name:"seriesTitleNumber",label:"almaResourceSharing.seriesTitleNumber",existingPath:"dummyPath",valuePath:"seriesTitleNumber",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,maxlength:4e3},{key:"pagesToPhotocopy",name:"pagesToPhotocopy",label:"almaResourceSharing.pages",existingPath:"dummyPath",valuePath:"pagesToPhotocopy",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,maxlength:4e3},{key:"startPage",name:"startPage",label:"almaResourceSharing.startPage",existingPath:"dummyPath",valuePath:"startPage",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"citationType",value:"CR"},maxlength:4e3,inputType:"number",validPattern:"[1-9]\\d*"},{key:"endPage",name:"endPage",label:"almaResourceSharing.endPage",existingPath:"dummyPath",valuePath:"endPage",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"citationType",value:"CR"},maxlength:4e3,inputType:"number",validPattern:"[1-9]\\d*"},{key:"maximumFee",name:"maximumFee",label:"almaResourceSharing.maximumFee",existingPath:"dummyPath",valuePath:"maximumFee",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,maxlength:19,inputType:"number"},{key:"format",name:"format",label:"almaResourceSharing.format",path:"formatOptions",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.RADIO_BUTTON,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",defaultValuePath:"format"}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"alternativeLocationAddress",name:"alternativeLocationAddress",label:"almaResourceSharing.deliveryLocationToAlternativeAddress",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,path:"alternativeLocationAddress",populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value"}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"alternativeLocationEmail",name:"alternativeLocationEmail",label:"almaResourceSharing.deliveryLocationToAlternativeEmail",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,path:"alternativeLocationEmail",populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value"}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"email",name:"email",label:"almaResourceSharing.deliveryAlternative.email",existingPath:"dummyPath",valuePath:"email",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"alternativeLocationEmail",value:"alternativeEmail"},maxlength:255},{key:"line1",name:"line1",label:"almaResourceSharing.deliveryAlternative.line1 ",existingPath:"dummyPath",valuePath:"line1",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"alternativeLocationAddress",value:"alternativeAddress"},maxlength:255},{key:"line2",name:"line2",label:"almaResourceSharing.deliveryAlternative.line2 ",existingPath:"dummyPath",valuePath:"line2",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"alternativeLocationAddress",value:"alternativeAddress"},maxlength:255},{key:"line3",name:"line3",label:"almaResourceSharing.deliveryAlternative.line3 ",existingPath:"dummyPath",valuePath:"line3",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"alternativeLocationAddress",value:"alternativeAddress"},maxlength:255},{key:"line4",name:"line4",label:"almaResourceSharing.deliveryAlternative.line4 ",existingPath:"dummyPath",valuePath:"line4",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,dependOn:{key:"alternativeLocationAddress",value:"alternativeAddress"},maxlength:255},{key:"requestedMedia",name:"requestedMedia",label:"almaResourceSharing.requestedMedia",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,path:"requestedMedia",populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",defaultValuePath:"requestedMediaDefault"}}},{key:"owner",name:"owner",path:"groups-list-map/owner",label:"almaResourceSharing.owner",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",byCategory:"category",filters:["pickupLocation"],singleValueBehaviour:c.FormBuilderEnums.UI_TYPE.HIDDEN,defaultValuePath:"owner"}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"pickupLocation",name:"pickupLocation",path:"groups-list-map/pickupLocation",label:"almaResourceSharing.pickupLibrary",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",filters:["owner"]}},events:{onChange:t.onChange.bind(t),params:[]},dependOn:{key:"citationType",value:["BK","CR"]}},{key:"notNeedAfter",name:"notNeedAfter",label:"almaRequest.notNeedAfter",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.DATE,uiType:c.FormBuilderEnums.UI_TYPE.DATE,minDate:"now",populator:{params:{defaultValue:c.FormBuilderEnums.TODAY,allow:c.FormBuilderEnums.FUTURE_DATES}}},{key:"comment",name:"comment",label:"almaResourceSharing.comment",existingPath:"dummyPath",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,maxlength:1e3},{key:"language",name:"language",label:"almaResourceSharing.language",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,path:"language",populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value"}}},{key:"levelOfService",name:"levelOfService",label:"almaResourceSharing.levelOfService",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,path:"levelOfService",populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",defaultValuePath:"levelOfServiceDefault"}}},{key:"physicalServicesResultId",name:"physicalServicesResultId",label:"almaDigitization.physicalServicesResultId",mandatory:!0,valuePath:"physicalServicesResultId",existingPath:"physicalServicesResultId",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN}],t}return n(t,e),t.prototype.createOption=function(e,t){var r=t[e.populator.params.key],n=t[e.populator.params.value].slotstart.hour,i=t[e.populator.params.value].slotend.hour,o=moment(n,"HHmm").format("HH:mm"),a=moment(i,"HHmm").format("HH:mm"),s=o+" - "+a,c={label:s,value:r};return"0000"!==i&&parseInt(n)>parseInt(i)&&(c.info="Information"),console.log("value "+r),c},t}(s.AbstractRequest);l=i([a.Injectable(),o("design:paramtypes",[])],l),r.AlmaResourceSharing=l},{"../../../../../../../infra/formBuilder/formBuilder.service":553,"../abstractRequest":733,"ng-metadata/core":362}],745:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./abstractRequest"),c=e("../../../../../../infra/formBuilder/formBuilder.service"),l=function(e){function t(){var t=e.call(this)||this;return t.formFields=[{key:"select-or-describe",name:"select-or-describe",label:"",dependOn:{ilsFields:{group1:["request-option"],group2:["reqinput1","reqinput2","reqinput3"]}},value:"select-item",fieldType:c.FormBuilderEnums.FIELD_TYPE.INTERNAL,uiType:c.FormBuilderEnums.UI_TYPE.RADIO_BUTTON,populator:{params:{defaultValue:c.FormBuilderEnums.FIRST}},options:[{label:"callslip.dropdown.select.item",value:"select-item"},{label:"callsllip.describe.item",value:"describe-item"}],events:{onClick:t.onClick.bind(t),params:[]}},{key:"request-option",name:"request-option",path:"request-option",label:"callslip.dropdown.select.item",mandatory:!0,dependOn:{key:"select-or-describe",value:"select-item"},existingPath:"describe-item/optionid",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"optionid",value:"optiondescription"}}},{key:"reqinput1",name:"reqinput1",label:"callslip.describe.item_1",mandatory:!0,dependOn:{key:"select-or-describe",value:"describe-item"},existingPath:"describe-item/reqinput1",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"reqinput2",name:"reqinput2",label:"callslip.describe.item_2",mandatory:!0,dependOn:{key:"select-or-describe",value:"describe-item"},existingPath:"describe-item/reqinput2",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,path:"describe-item"},{key:"reqinput3",name:"reqinput3",label:"callslip.describe.item_3",mandatory:!0,dependOn:{key:"select-or-describe",value:"describe-item"},existingPath:"describe-item/reqinput3",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT,path:"describe-item"},{key:"locations",name:"pickup_location",label:"callslip.pickup_location",path:"ordered-locations",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"pickuplocationcode",value:"pickuplocationname"}}},{key:"last_interest_date",name:"last_interest_date",label:"hold.last_interest_date",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.DATE,uiType:c.FormBuilderEnums.UI_TYPE.DATE,populator:{params:{defaultValue:c.FormBuilderEnums.TODAY,allow:c.FormBuilderEnums.FUTURE_DATES}}},{key:"patron_note_1",name:"patron_note_1",label:"hold.patron_note_1",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"group_id",name:"group_id",label:"group_id",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.INTERNAL,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN},{key:"ils_db_code",name:"ils_db_code",path:"optional-service-parameters/ils_db_code",label:"hold.ils_db_code",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN,populator:{func:t.itemsArrayPopulator.bind(t),params:{defaultValue:c.FormBuilderEnums.FIRST}}},{key:"holdingrec_id",name:"holdingrec_id",path:"chosen-parameters-map/holdingrec_id",label:"NOT RELEVANT",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN},{key:"info-notes",name:"info-notes",path:c.FormBuilderEnums.ROOT,label:"",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.MULTI_LABEL,populator:{func:t.itemsArrayPopulator.bind(t)}},{key:"main_location",name:"main_location",path:"drop-downs/main_location",label:"hold.main_location",mandatory:!0,dependOn:{key:"info-notes",isExists:!1},value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}},{key:"item_description",name:"item-description",path:"drop-downs/item_description",label:"hold.item_description",mandatory:!0,dependOn:{key:"info-notes",isExists:!1},value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}},{key:"item_category_name",name:"item-category",path:"drop-downs/item_category",label:"hold.item_category",mandatory:!1,dependOn:{key:"info-notes",isExists:!1},value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}},{key:"item_status_name",name:"item-status-name",path:"drop-downs/item_status",label:"hold.item_status",mandatory:!0,dependOn:{key:"info-notes",isExists:!1},value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}}],t}return n(t,e),t}(s.AbstractRequest);l=i([a.Injectable(),o("design:paramtypes",[])],l),
r.CallslipRequest=l},{"../../../../../../infra/formBuilder/formBuilder.service":553,"./abstractRequest":733,"ng-metadata/core":362}],746:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./abstractRequest"),c=e("../../../../../../infra/formBuilder/formBuilder.service"),l=function(e){function t(){var t=e.call(this)||this;return t.formFields=[{key:"year",name:"year",path:"groups-list-map/year",label:"hold.year",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{filters:["volume","item-description","secondary-location-name","main-location-name","item-category","item-status","item-material","option-description","pickup_location"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"volume",name:"volume",path:"groups-list-map/volume",label:"hold.volume",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{filters:["year","item-description","secondary-location-name","main-location-name","item-category","item-status","item-material","option-description","pickup_location"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"item_description",name:"item-description",path:"groups-list-map/item-description",label:"hold.item_description",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{filters:["year","volume","secondary-location-name","main-location-name","item-category","item-status","item-material","option-description","pickup_location"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"secondary_location_name",name:"secondary-location-name",path:"groups-list-map/secondary-location-name",label:"hold.secondary_location",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{filters:["year","volume","item-description","main-location-name","item-category","item-status","item-material","option-description","pickup_location"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"main_location_name",name:"main-location-name",path:"groups-list-map/main-location-name",label:"hold.main_location",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{filters:["year","volume","item-description","secondary-location-name","item-category","item-status","item-material","option-description","pickup_location"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"item_category_name",name:"item-category",path:"groups-list-map/item-category",label:"hold.item_category",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{filters:["year","volume","item-description","secondary-location-name","main-location-name","item-status","item-material","option-description","pickup_location"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"item_status_name",name:"item-status",path:"groups-list-map/item-status",label:"hold.item_status",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{filters:["year","volume","item-description","secondary-location-name","main-location-name","item-category","item-material","option-description","pickup_location"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"item_material",name:"item-material",path:"groups-list-map/item-material",label:"hold.item_material",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{filters:["year","volume","item-description","secondary-location-name","main-location-name","item-category","item-status","option-description","pickup_location"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"option_description",name:"option-description",path:"groups-list-map/option-description",label:"hold.option_description",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{filters:["year","volume","item-description","secondary-location-name","main-location-name","item-category","item-status","item-material","pickup_location"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"pickup_locations",name:"pickup_location",path:"groups-list-map/pickup_locations",label:"hold.pickup_location",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"pickuplocationcode",value:"pickuplocationname",filters:["year","volume","item-description","secondary-location-name","main-location-name","item-category","item-status","item-material","option-description"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"group_id",name:"group_id",label:"group_id",path:"groups-list-map/group-id",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN,populator:{func:t.itemsArrayPopulator.bind(t),params:{filters:["year","volume","item-description","secondary-location-name","main-location-name","item-category","item-status","item-material","pickup_location","option-description"]}}},{key:"request-option",name:"item_id",path:"request-option",label:"hold.dropdown.select.item",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"optionid",value:"optiondescription",defaultValue:c.FormBuilderEnums.FIRST}}},{key:"locations",name:"pickup_location",label:"hold.pickup_location",path:"ordered-locations",mandatory:!0,value:"",duplicateOf:"pickup_location",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"pickuplocationcode",value:"pickuplocationname"}}},{key:"last_interest_date",name:"last_interest_date",label:"hold.last_interest_date",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.DATE,uiType:c.FormBuilderEnums.UI_TYPE.DATE,populator:{params:{defaultValue:c.FormBuilderEnums.TODAY,allow:c.FormBuilderEnums.FUTURE_DATES}}},{key:"request_author",name:"request_author",label:"hold.request_author",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"request_title",name:"request_title",label:"hold.request_title",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"request_pages",name:"request_pages",label:"hold.request_pages",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"patron_note_1",name:"patron_note_1",label:"hold.patron_note_1",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"patron_note_2",name:"patron_note_2",label:"hold.patron_note_2",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"rush_request",name:"rush_request",label:"",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.CHECK_BOX,populator:{func:t.hardCodedPopulator.bind(t)},options:[{label:"hold.rush_request",value:"Y"}]},{key:"ils_db_code",name:"ils_db_code",path:"optional-service-parameters/ils_db_code",label:"hold.ils_db_code",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN,populator:{func:t.itemsArrayPopulator.bind(t),params:{defaultValue:c.FormBuilderEnums.FIRST}}},{key:"info-notes",name:"info-notes",path:c.FormBuilderEnums.ROOT,label:"",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.INTERNAL,uiType:c.FormBuilderEnums.UI_TYPE.MULTI_LABEL,populator:{func:t.itemsArrayPopulator.bind(t)}},{key:"main_location",name:"main_location",path:"drop-downs/main_location",label:"hold.main_location",mandatory:!0,dependOn:{key:"info-notes",isExists:!1},value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}},{key:"item_description",name:"item-description",path:"drop-downs/item_description",label:"hold.item_description",mandatory:!0,dependOn:{key:"info-notes",isExists:!1},value:"",duplicateOf:"item-description",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}},{key:"item_category_name",name:"item-category",path:"drop-downs/item_category",label:"hold.item_category",mandatory:!1,dependOn:{key:"info-notes",isExists:!1},value:"",duplicateOf:"item-category",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}},{key:"item_status_name",name:"item-status-name",path:"drop-downs/item_status",label:"hold.item_status",mandatory:!0,dependOn:{key:"info-notes",isExists:!1},duplicateOf:"item-status",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}}],t}return n(t,e),t}(s.AbstractRequest);l=i([a.Injectable(),o("design:paramtypes",[])],l),r.HoldRequest=l},{"../../../../../../infra/formBuilder/formBuilder.service":553,"./abstractRequest":733,"ng-metadata/core":362}],747:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./abstractRequest"),c=e("../../../../../../infra/formBuilder/formBuilder.service"),l=e("../../../../../../infra/formBuilder/field/formField.interface"),u=function(e){function t(){var t=e.call(this)||this;return t.formFields=[{key:"allowed_media",name:"allowed_media",label:"illrequest.label.allowed_media",path:"allowed-media",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",defaultValue:c.FormBuilderEnums.FIRST}}},{key:"service_level",name:"service_level",label:"illrequest.label.service_level",path:"service-level",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{defaultValue:c.FormBuilderEnums.FIRST,key:"key",value:"value"}}},{key:"delivery_method",name:"delivery_method",label:"illrequest.label.delivery_method",path:"delivery-method",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{defaultValue:c.FormBuilderEnums.FIRST,key:"key",value:"value"}}},{key:"ill-unit",name:"ill_unit",label:"illrequest.label.ill_unit",path:"ill-unit",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",defaultValue:c.FormBuilderEnums.FIRST}}},{key:"ill-pickup-locations",name:"pickup_location",label:"illrequest.pickup_location",path:"ill-pickup-locations/{"+c.FormBuilderEnums.FIELD+":ill_unit}",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value"}}},{key:"request_year",name:"request_year",label:"illrequest.label.year",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"last_interest_date",name:"last_interest_date",label:"illrequest.label.last_interest_date",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.DATE,uiType:c.FormBuilderEnums.UI_TYPE.DATE,populator:{params:{defaultValue:c.FormBuilderEnums.TODAY,allow:c.FormBuilderEnums.FUTURE_DATES}}},{key:"willing_to_pay",name:"willing_to_pay",label:"illrequest.label.willing_to_pay",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.RADIO_BUTTON,populator:{params:{defaultValue:"N"}},options:l.YesOrNo()},{key:"send_directly",name:"send_directly",label:"illrequest.label.send_directly",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.RADIO_BUTTON,populator:{params:{defaultValue:"Y"}},options:l.YesOrNo()},{key:"language",name:"language",label:"illrequest.label.language",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"key",value:"value",defaultValue:c.FormBuilderEnums.FIRST}}},{key:"request_author",name:"request_author",label:"illrequest.label.author",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"request_title",name:"request_title",label:"illrequest.label.title",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"request_volume",name:"request_volume",label:"illrequest.label.volume",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"request_pages",name:"request_pages",label:"illrequest.label.pages",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"patron_note_1",name:"patron_note_1",label:"illrequest.label.note",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"request_month",name:"request_month",label:"illrequest.label.month",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"request_day",name:"request_day",label:"illrequest.label.day",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"request_issue",name:"request_issue",label:"illrequest.label.issue",value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT}],t}return n(t,e),t}(s.AbstractRequest);u=i([a.Injectable(),o("design:paramtypes",[])],u),r.IllRequest=u},{"../../../../../../infra/formBuilder/field/formField.interface":550,"../../../../../../infra/formBuilder/formBuilder.service":553,"./abstractRequest":733,"ng-metadata/core":362}],748:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./abstractRequest"),c=e("../../../../../../infra/formBuilder/formBuilder.service"),l=function(e){function t(){var t=e.call(this)||this;return t.formFields=[{key:"locations",name:"pickup_location",path:"ordered-locations",label:"PhotocopyRequest.pickup_location",value:"",mandatory:!0,fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"pickuplocationcode",value:"pickuplocationname",byKey:"field-name",byValue:"field-values"}}},{key:"request_author",name:"request_author",label:"PhotocopyRequest.request_author",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"request_title",name:"request_title",label:"PhotocopyRequest.request_title",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"request_pages",name:"request_pages",label:"PhotocopyRequest.request_pages",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"patron_note_1",name:"patron_note_1",label:"PhotocopyRequest.patron_note_1",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"patron_note_2",name:"patron_note_2",label:"PhotocopyRequest.patron_note_2",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"requester_name",name:"requester_name",label:"PhotocopyRequest.requester_name",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"add_info",name:"add_info",label:"PhotocopyRequest.add_info",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"info-notes",name:"info-notes",path:c.FormBuilderEnums.ROOT,label:"PhotocopyRequest.patron_note_1",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.INTERNAL,uiType:c.FormBuilderEnums.UI_TYPE.MULTI_LABEL,populator:{func:t.itemsArrayPopulator.bind(t)}},{key:"main_location",name:"main_location",path:"drop-downs/main_location",label:"PhotocopyRequest.main_location",mandatory:!0,dependOn:{key:"info-notes",isExists:!1},value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}},{key:"item_description",name:"item-description",path:"drop-downs/item_description",label:"PhotocopyRequest.item_description",mandatory:!0,dependOn:{key:"info-notes",isExists:!1},value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}},{key:"item_category_name",name:"item-category",path:"drop-downs/item_category",label:"PhotocopyRequest.category",mandatory:!1,dependOn:{key:"info-notes",isExists:!1},value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}},{key:"item_status_name",name:"item-status-name",path:"drop-downs/item_status",label:"PhotocopyRequest.item_status",mandatory:!0,dependOn:{key:"info-notes",isExists:!1},value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}}],t}return n(t,e),t}(s.AbstractRequest);l=i([a.Injectable(),o("design:paramtypes",[])],l),r.PhotocopyRequest=l},{"../../../../../../infra/formBuilder/formBuilder.service":553,"./abstractRequest":733,"ng-metadata/core":362}],749:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./abstractRequest"),c=e("../../../../../../infra/formBuilder/formBuilder.service"),l=function(e){function t(){var t=e.call(this)||this;return t.formFields=[{key:"request-option",name:"request-option",path:"request-option",label:"recall.dropdown.select.item",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"optionid",value:"optiondescription"}}},{key:"locations",name:"pickup_location",label:"recall.pickup_location",path:"ordered-locations",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"pickuplocationcode",value:"pickuplocationname"}}},{key:"last_interest_date",name:"last_interest_date",label:"recall.last_interest_date",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.DATE,uiType:c.FormBuilderEnums.UI_TYPE.DATE,populator:{params:{defaultValue:c.FormBuilderEnums.TODAY,allow:c.FormBuilderEnums.FUTURE_DATES}}},{key:"patron_note_1",name:"patron_note_1",label:"recall.patron_note_1",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT},{key:"group_id",name:"group_id",label:"",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN},{key:"ils_db_code",name:"ils_db_code",path:"optional-service-parameters/ils_db_code",label:"",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN,populator:{func:t.itemsArrayPopulator.bind(t),params:{defaultValue:"first"}}},{key:"info-notes",name:"info-notes",path:c.FormBuilderEnums.ROOT,label:"",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.INTERNAL,uiType:c.FormBuilderEnums.UI_TYPE.MULTI_LABEL,populator:{func:t.itemsArrayPopulator.bind(t)}},{key:"main_location",name:"main_location",path:"drop-downs/main_location",label:"hold.main_location",mandatory:!0,dependOn:{key:"info-notes",isExists:!1},value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}},{key:"item_description",name:"item-description",path:"drop-downs/item_description",label:"hold.item_description",mandatory:!0,dependOn:{key:"info-notes",isExists:!1},value:"",duplicateOf:"item-description",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}},{key:"item_category_name",name:"item-category",path:"drop-downs/item_category",label:"hold.item_category",mandatory:!1,dependOn:{key:"info-notes",isExists:!1},value:"",duplicateOf:"item-category",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}},{key:"item_status_name",name:"item-status-name",path:"drop-downs/item_status",label:"hold.item_status",mandatory:!0,dependOn:{key:"info-notes",isExists:!1},value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{byKey:"field-name",byValue:"field-values"}}}],t}return n(t,e),t}(s.AbstractRequest);l=i([a.Injectable(),o("design:paramtypes",[])],l),r.RecallRequest=l},{"../../../../../../infra/formBuilder/formBuilder.service":553,"./abstractRequest":733,"ng-metadata/core":362}],750:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./acquisitionRequest"),a=e("./callslipRequest"),s=e("./holdRequest"),c=e("./illRequest"),l=e("./photocopyRequest"),u=e("./recallRequest"),d=e("./shortLoanRequest"),p=e("./ubRequest"),f=e("./alma/almaRequestType.module"),h=function(){function e(){}return e}();h=n([i.NgModule({declarations:[],providers:[o.AcquisitionRequest,a.CallslipRequest,s.HoldRequest,c.IllRequest,l.PhotocopyRequest,u.RecallRequest,d.ShortLoanRequest,p.UBRequest],imports:[f.AlmaRequestTypeModule]})],h),r.RequestTypesModule=h},{"./acquisitionRequest":734,"./alma/almaRequestType.module":743,"./callslipRequest":745,"./holdRequest":746,"./illRequest":747,"./photocopyRequest":748,"./recallRequest":749,"./shortLoanRequest":751,"./ubRequest":752,"ng-metadata/core":362}],751:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./abstractRequest"),c=e("../../../../../../infra/formBuilder/formBuilder.service"),l=e("moment"),u=function(e){function t(){var t=e.call(this)||this;return t.formFields=[{key:"date",name:"date",path:"time-slots",label:"shortloan.date",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.INTERNAL,uiType:c.FormBuilderEnums.UI_TYPE.DATE,populator:{func:t.datePopulator.bind(t),params:{path:"dates"}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"time",name:"slot_id",path:"time-slots",label:"shortloan.hour",mandatory:!0,dependOn:{key:"date",isExists:!0},value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.RADIO_BUTTON,populator:{func:t.timeSlotPopulator.bind(t),params:{display:!0,key:"slot-id",value:"req-slot",func:t.createOption.bind(t)}},style:{layout:"column"}}],t}return n(t,e),t.prototype.createOption=function(e,t){var r=t[e.populator.params.key],n=t[e.populator.params.value].slotstart.hour,i=t[e.populator.params.value].slotend.hour,o=l(n,"HHmm").format("HH:mm"),a=l(i,"HHmm").format("HH:mm"),s=o+" - "+a,c={label:s,value:r};return"0000"!==i&&parseInt(n)>parseInt(i)&&(c.info="nui.shortloan.note"),console.log("value "+r),c},t}(s.AbstractRequest);u=i([a.Injectable(),o("design:paramtypes",[])],u),r.ShortLoanRequest=u},{"../../../../../../infra/formBuilder/formBuilder.service":553,"./abstractRequest":733,moment:326,"ng-metadata/core":362}],752:[function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./abstractRequest"),c=e("../../../../../../infra/formBuilder/formBuilder.service"),l=function(e){function t(){var t=e.call(this)||this;return t.formFields=[{key:"ils_db_c",name:"ils_db_code",path:"groups-list-map/ils_db",label:"ubrequest.dropdown.select_library",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"ils_db_code",value:"ils_db_name"}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"itemid",name:"itemid",path:"groups-list-map/items",label:"ubrequest.label.select_item",mandatory:!0,dependOn:{key:"ils_db_code",isExists:!0,behavior:c.FormBuilderEnums.BEHAVIOR.DISABLED},value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"itemid",value:"itemdescription",defaultValue:c.FormBuilderEnums.FIRST,filters:["ils_db_code"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"pickup_library_name",name:"pickup_library_code",path:"groups-list-map/pickup_library",label:"ubrequest.dropdown.pickup_library",mandatory:!0,dependOn:{key:"ils_db_code",isExists:!0,behavior:c.FormBuilderEnums.BEHAVIOR.DISABLED},value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"pickuplibrarycode",value:"pickuplibraryname",defaultValue:c.FormBuilderEnums.FIRST,filters:["ils_db_code","itemid"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"pickup_location_name",
name:"pickup_location_code",path:"groups-list-map/pickup_location",label:"ubrequest.dropdown.pickup_location",mandatory:!0,dependOn:{key:"ils_db_code",isExists:!0,behavior:c.FormBuilderEnums.BEHAVIOR.DISABLED},value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.DROP_DOWN,populator:{func:t.itemsArrayPopulator.bind(t),params:{key:"pickuplocationcode",value:"pickuplocationname",defaultValue:c.FormBuilderEnums.FIRST,filters:["ils_db_code","itemid","pickup_library_code"]}},events:{onChange:t.onChange.bind(t),params:[]}},{key:"last_interest_date",name:"last_interest_date",label:"ubrequest.last_interest_date",path:"ub-last-interest-date",valuePath:"ub-last-interest-date",existingPath:"describe-item/lastinterestdate",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.DATE,uiType:c.FormBuilderEnums.UI_TYPE.DATE,populator:{params:{defaultValue:c.FormBuilderEnums.TODAY,allow:c.FormBuilderEnums.FUTURE_DATES}}},{key:"item_request_link",name:"item_request_link",label:"",path:"describe-item/db/item{ils_db_code:ilsdbcode}/itemrequestlink",mandatory:!0,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.HIDDEN,populator:{func:t.itemsArrayPopulator.bind(t),params:{defaultValue:c.FormBuilderEnums.FIRST}}},{key:"comment",name:"patron_note_1",label:"ubrequest.patron_note_1",mandatory:!1,value:"",fieldType:c.FormBuilderEnums.FIELD_TYPE.STRING,uiType:c.FormBuilderEnums.UI_TYPE.TEXT}],t}return n(t,e),t}(s.AbstractRequest);l=i([a.Injectable(),o("design:paramtypes",[])],l),r.UBRequest=l},{"../../../../../../infra/formBuilder/formBuilder.service":553,"./abstractRequest":733,"ng-metadata/core":362}],753:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("../opac.service"),s=function(){function e(e){this.opacService=e,this._locationServices={}}return Object.defineProperty(e.prototype,"services",{get:function(){return this._services},set:function(e){this._services=e,this._tempServices=e,this.updateIlsServices(e)},enumerable:!0,configurable:!0}),e.prototype.putLocationServices=function(e,t){this._locationServices[e]=t},e.prototype.useLocationServices=function(e){this._locationServices&&(this._tempServices=this._services,this._services=this._locationServices[e])},e.prototype.restoreServices=function(){this._tempServices&&(this._services=this._tempServices)},e.prototype.updateIlsServices=function(e){this.opacService.getServices()},e}();s=n([o.Injectable(),i("design:paramtypes",[a.OpacService])],s),r.RequestServicesService=s},{"../opac.service":727,"ng-metadata/core":362}],754:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=function(){function e(e,t){this.$window=e,this.availabilityLineIcons=t}return e.prototype.hasLocations=function(){return this.item.delivery.holding.length>0},Object.defineProperty(e.prototype,"requestLink",{get:function(){try{var e=this.item.delivery.GetIt1.filter(function(e){return"linktoholdings"===e.links[0].displayText})[0];return e.links[0].link}catch(e){return null}},enumerable:!0,configurable:!0}),e}();n([a.Input(),i("design:type",Object)],s.prototype,"item",void 0),s=n([a.Component({selector:"prm-requests-services-ovl",templateUrl:"components/search/fullView/getit/opac/request/request-services-ovl.html"}),o(0,a.Inject("$window")),o(1,a.Inject("availabilityLineIcons")),i("design:paramtypes",[Object,Object])],s),r.PrmRequestsServicesOvl=s},{"ng-metadata/core":362}],755:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./serviceButton.service"),c=e("./opac.directive"),l=function(){function e(e,t){this.serviceButtonService=e,this.actionIcons=t,this.changeTabEvent=new a.EventEmitter}return e.prototype.getServiceDetails=function(){var e=this;if("OvL"===this.service["service-type"]){var t=this.service["link-to-service"];void 0!==t&&window.open(t,"_blank")}else this.serviceButtonService.makeIlsRequest(this.service,this.requestParameters).then(function(t){var r={referer:e.parentTab,dest:c.OPAC_TAB.REQUEST};e.changeTabEvent.emit(r)})},e}();n([a.Input(),i("design:type",Object)],l.prototype,"service",void 0),n([a.Input(),i("design:type",Number)],l.prototype,"parentTab",void 0),n([a.Input(),i("design:type",Object)],l.prototype,"requestParameters",void 0),n([a.Output(),i("design:type",a.EventEmitter)],l.prototype,"changeTabEvent",void 0),l=n([a.Component({selector:"prm-service-button",templateUrl:"components/search/fullView/getit/opac/service-button.html"}),o(1,a.Inject("actionIcons")),i("design:paramtypes",[s.ServiceButtonService,Object])],l),r.PrmServiceButton=l},{"./opac.directive":725,"./serviceButton.service":756,"ng-metadata/core":362}],756:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("./opac.service"),s=e("./request/request.service"),c=e("../../../../appConfig/appConfigForward"),l=function(){function e(e,t){this.opacService=e,this.requestService=t}return e.prototype.makeIlsRequest=function(e,t){var r=this;return t||(t={}),t.vid=c.getVid(),this.opacService.makeIlsCall(e,t,"GET").then(function(t){return r.requestService.setupNewForm(e,t),r.requestService.requestIsLoading=!1,t})},e}();l=n([o.Injectable(),i("design:paramtypes",[a.OpacService,s.RequestService])],l),r.ServiceButtonService=l},{"../../../../appConfig/appConfigForward":484,"./opac.service":727,"./request/request.service":730,"ng-metadata/core":362}],757:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=(e("lodash/zipObject"),function(){function e(e){this.availabilityLineIcons=e}return e.prototype.getLabel=function(){return"getit."+this.item.linkElement.links[0].getItTabText},e.prototype.getLinks=function(){var e=this.item.linkElement.links;return e},e}());n([a.Input(),i("design:type",Object)],s.prototype,"item",void 0),s=n([a.Component({selector:"prm-view-online",templateUrl:"components/search/fullView/getit/viewOnline/viewOnline.html"}),o(0,a.Inject("availabilityLineIcons")),i("design:paramtypes",[Object])],s),r.PrmViewOnline=s},{"lodash/zipObject":324,"ng-metadata/core":362}],758:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./serviceLinks.service"),c=e("../../../appConfig/appConfigForward"),l=function(){function e(e,t,r){this.availabilityLineIcons=e,this.linksService=t,this.$scope=r,this.vid=c.getVid()}return e.prototype.ngOnInit=function(){var e=this;this.$scope.$watch(function(){return e.item.delivery?e.item.delivery.link:void 0},function(){e.updateLinks()}),this.recordLinks=[],this.updateLinks()},e.prototype.updateLinks=function(){var e=this;this.linksService.hasGoogleLinks(this.item)?this.linksService.handleGoogleLinks(this.item).then(function(t){e.recordLinks=e.linksService.getPnxLinks(e.item,e.linksService.getGoogleLinks(t.data))}):this.linksService.hasLinks(this.item)&&(this.recordLinks=this.linksService.getPnxLinks(this.item))},e.prototype.getLabel=function(e){return"fulldisplay."+e.displayLabel.substring(3)},e.prototype.getLinks=function(){return this.recordLinks},e.prototype.getRecordId=function(){return this.item.pnx.control.recordid[0]},e.prototype.hasSourceRecordLink=function(){return this.linksService.hasSourceRecordLink(this.item)},e.prototype.getSourceRecordLinkName=function(){return"fulldisplay."+this.linksService.getSourceRecordLinkName()},e}();n([a.Input(),i("design:type",Object)],l.prototype,"item",void 0),l=n([a.Component({selector:"prm-service-links",templateUrl:"components/search/fullView/links/service-links.html"}),o(0,a.Inject("availabilityLineIcons")),o(2,a.Inject("$scope")),i("design:paramtypes",[Array,s.FullViewLinksService,Object])],l),r.PrmServiceLinks=l},{"../../../appConfig/appConfigForward":484,"./serviceLinks.service":759,"ng-metadata/core":362}],759:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../nddUtils/configurationUtil.service"),c=e("../../../appConfig/appConfigForward"),l=function(){function e(e,t,r){this.$http=e,this.configurationUtil=t,this.$translate=r;var n,i=t.getFullViewConfiguration();i&&(n=i.resultlinks),n&&(this.linksDefinitions=n[0].links.split(","))}return e.prototype.hasLinks=function(e){if(this.linksDefinitions){if(this.hasGoogleLinks(e))return!0;if(this.hasSourceRecordLink(e))return!0;if(e.delivery){var t=e.delivery.link;if(t)for(var r=0;r<this.linksDefinitions.length;r++)if(this.linksDefinitions[r].length>0)for(var n=0;n<t.length;n++)if(t[n].linkType.endsWith(this.linksDefinitions[r]))return!0}}return!1},e.prototype.hasSourceRecordLink=function(e){return!(!this.linksDefinitions||this.linksDefinitions.indexOf("sourcerecord")===-1||!this.isLocal(e))},e.prototype.isLocal=function(e){return"L"===e.context||"U"===e.context&&e.pnx.control.sourceid.indexOf("alma")!==-1},e.prototype.getSourceRecordLinkName=function(){return"sourcerecord"},e.prototype.hasGoogleLinks=function(e){return!(!this.linksDefinitions||this.linksDefinitions.indexOf("gbsabout")===-1&&this.linksDefinitions.indexOf("gbsfull")===-1&&this.linksDefinitions.indexOf("gbsaboutnofull")===-1||!e.pnx||!e.pnx.addata||!e.pnx.addata.isbn&&!e.pnx.addata.oclcid)},e.prototype.getPnxLinks=function(e,t){for(var r=e.delivery.link,n=[],i=0;i<this.linksDefinitions.length;i++)if(this.linksDefinitions[i].length>0){var o=!1,a=[],s=[];if(s="gbsabout"!==this.linksDefinitions[i]&&"gbsfull"!==this.linksDefinitions[i]&&"gbsaboutnofull"!==this.linksDefinitions[i]||!t?r:t)for(var c=0;c<s.length;c++)!s[c].linkType.endsWith(this.linksDefinitions[i])||o&&a.indexOf(s[c].linkURL)!==-1||(n.push(s[c]),a.push(s[c].linkURL),o=!0,n[n.length-1].displayLabel===this.linksDefinitions[i]&&(n[n.length-1].displayLabel=this.$translate.instant("fulldisplay."+n[n.length-1].displayLabel)))}return n},e.prototype.getGoogleLinks=function(e){var t=[],r=Object.keys(e);if(r)for(var n=0;n<r.length;n++)if(e[r[n]]){var i=e[r[n]],o=i.preview;if(i.info_url&&t.push({linkType:"gbsabout",linkURL:i.info_url,displayLabel:"$$Egbsabout"}),"partial"!==o&&"full"!==o||!i.preview_url||t.push({linkType:"gbsfull",linkURL:i.preview_url,displayLabel:"$$Egbsfull"}),"partial"!==o&&"full"!==o||!i.preview_url?"noview"===o&&i.info_url&&t.push({linkType:"gbsaboutnofull",linkURL:i.info_url,displayLabel:"$$Egbsaboutnofull"}):t.push({linkType:"gbsaboutnofull",linkURL:i.preview_url,displayLabel:"$$Egbsaboutnofull"}),t.length>0)return t}return t},e.prototype.handleGoogleLinks=function(e){var t=c.getGoogWithProxy(),r=!1,n=!1;if(e.pnx.addata.isbn&&(t+="ISBN:"+e.pnx.addata.isbn[0],r=!0),e.pnx.addata.oclcid&&(r&&(t+=","),t+="OCLC:"+e.pnx.addata.oclcid[0],n=!0),r||n)return t+="&jscmd=viewapi",this.$http.jsonp(t)},e}();l=n([a.Injectable(),o(0,a.Inject("$http")),o(2,a.Inject("$translate")),i("design:paramtypes",[Object,s.ConfigurationUtil,Function])],l),r.FullViewLinksService=l},{"../../../appConfig/appConfigForward":484,"../../../nddUtils/configurationUtil.service":596,"ng-metadata/core":362}],760:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./recomendationItem.service"),c=e("../../../analytics/primolytics.service"),l=function(){function e(e,t,r,n,i){this.recomendationsItemService=e,this.$http=t,this.primolyticsService=r,this.availabilityLineIcons=n,this.featuredActionsIcons=i,this.isfavorites=!1}return e.prototype.ngOnInit=function(){this.pnx=this.item,this.rec=new s.Rec(this.item),this.rec.index=this.index,this.getImage(),console.log(this.rec.link1)},e.prototype.showBookmark=function(){return!1},e.prototype.showPin=function(){return!1},e.prototype.updateFavorites=function(){},e.prototype.getImage=function(){this.rec.image=this.recomendationsItemService.getImage(this.rec)},e.prototype.getPlaceHolders=function(e){return{idx_0:e.type}},e.prototype.sendBeacon=function(){},e.prototype.getLink=function(){if(this.rec.link1.indexOf("&")<=-1)return this.rec.link1;for(var e="",t=this.rec.link1.split("&"),r=0,n=t;r<n.length;r++){var i=n[r];i.startsWith("rfr_id=")&&(i+="-Bx"),e+="&"+i}return e.slice(1)},e}();n([a.Input(),i("design:type",Object)],l.prototype,"item",void 0),n([a.Input(),i("design:type",Number)],l.prototype,"index",void 0),n([c.beacon({p:"recommender",op:"ClickTrough",item:"rec"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],l.prototype,"sendBeacon",null),l=n([a.Component({selector:"prm-recomendation-item",templateUrl:"components/search/fullView/recomendation/recomendationItem.html"}),o(1,a.Inject("$http")),o(3,a.Inject("availabilityLineIcons")),o(4,a.Inject("featuredActionsIcons")),i("design:paramtypes",[s.RecomendationsItemService,Function,c.PrimolyticsService,Array,Array])],l),r.PrmRecomendationItem=l},{"../../../analytics/primolytics.service":480,"./recomendationItem.service":761,"ng-metadata/core":362}],761:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../appConfig/appConfigForward"),c=function(){function e(e,t){this.$http=e,this.query=t.thumbUrl}return e.prototype.getImage=function(e){var t=s.getSyndetixWithProxy();return t+="primo",e.isbn&&(t+="&isbn=",t+=e.isbn,t+="/sc.jpg"),e.issn&&(t+="&issn=",t+=e.issn,t+="/sc.jpg"),t},e}();c=n([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),i("design:paramtypes",[Function,Object])],c),r.RecomendationsItemService=c;var l=function(){function e(e){if(this.issn="",this.isbn="",this.maxTitle=70,this.maxLine1=70,this.maxLine2=70,this.image="",this.line1="",this.line1dot="",this.issn="",e.pnx.addata.issn&&(this.issn=e.pnx.addata.issn[0]),e.pnx.control.sourceid&&(this.sourceid=e.pnx.control.sourceid[0]),this.isbn="",e.pnx.addata.isbn&&(this.isbn=e.pnx.addata.isbn[0]),this.title=e.pnx.display.title[0],this.title.length>this.maxTitle?this.titledot=this.title.substring(0,this.maxTitle)+"...":this.titledot=this.title,this.image="","suprima"!==s.getBackendSystem()){var t=e.delivery.getIt1.getItTabsData["Remote Search Resource"];t?this.link1=t.getItLinks[0].linkUrl:(t=e.delivery.getIt1.getItTabsData["Remote Search Resource:Alma"],this.link1=t.getItLinks[0].linkUrl)}else this.link1=e.pnx.delivery.availabilityLinkUrl;this.line1="",e.pnx.display.creator&&(this.line1=e.pnx.display.creator.join(";")),this.line2=e.pnx.display.ispartof[0],this.line1.length>this.maxLine1?this.line1dot=this.line1.substring(0,this.maxLine1)+"...":this.line1dot=this.line1,this.line2.length>this.maxLine2?this.line2dot=this.line2.substring(0,this.maxLine2)+"...":this.line2dot=this.line2,this.suggestion=e.context,this.type=e.pnx.display.type[0],this.suggestionText=e.pnx.display.identifier[0]}return e}();r.Rec=l},{"../../../appConfig/appConfigForward":484,"ng-metadata/core":362}],762:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./recomendations.service"),c=function(){function e(e,t){this.recomendationsService=e,this.availabilityLineIcons=t,this.bxenable=!1,this.quantity=5,this.more=!1}return e.prototype.ngOnInit=function(){this.getRecomendations(),this.quantity=5},e.prototype.moreSuggestions=function(){this.quantity=10,this.more=!1},e.prototype.getRecomendations=function(){var e=this;this.recomendationsService.getRecomendations(this.item).then(function(t){e.recommendations=t.data,e.recommendations.docs.length>0?(e.bxenable=!0,e.bxdisplay=!0):e.bxdisplay=!1,e.recommendations.docs.length>5?e.more=!0:e.more=!1},function(t){e.bxdisplay=!1})},e}();n([a.Input(),i("design:type",Object)],c.prototype,"item",void 0),n([a.Input(),i("design:type",Boolean)],c.prototype,"bxdisplay",void 0),c=n([a.Component({selector:"prm-recomendations",templateUrl:"components/search/fullView/recomendation/recomendations.html"}),o(1,a.Inject("availabilityLineIcons")),i("design:paramtypes",[s.RecomendationsService,Array])],c),r.PrmRecomendation=c},{"./recomendations.service":763,"ng-metadata/core":362}],763:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../appConfig/appConfigForward"),c=function(){function e(e,t){this.$http=e,this.query=t.bxUrl+("suprima"===s.getBackendSystem()?"/"+s.getVid():"")}return e.prototype.getRecomendations=function(e){return this.$http({method:"POST",url:this.query,data:e})},e}();c=n([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),i("design:paramtypes",[Function,Object])],c),r.RecomendationsService=c},{"../../../appConfig/appConfigForward":484,"ng-metadata/core":362}],764:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./recomendationItem.directive"),a=e("./recomendationItem.service"),s=e("./recomendations.service"),c=e("./recomendations.directive"),l=function(){function e(){}return e}();l=n([i.NgModule({declarations:[c.PrmRecomendation,o.PrmRecomendationItem],providers:[a.RecomendationsItemService,s.RecomendationsService],imports:[]})],l),r.RecommendationModule=l},{"./recomendationItem.directive":760,"./recomendationItem.service":761,"./recomendations.directive":762,"./recomendations.service":763,"ng-metadata/core":362}],765:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=function(){function e(){}return e}();n([o.Input(),i("design:type",String)],a.prototype,"title",void 0),a=n([o.Component({selector:"prm-service-header",templateUrl:"components/search/fullView/serviceHeader/service-header.html"})],a),r.PrmServiceHeader=a},{"ng-metadata/core":362}],766:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../security/login/login.service"),c=e("../../appConfig/appConfigForward"),l=function(){function e(e,t){this.signInIcon=e,this.loginService=t,this.authenticationMethods=c.getAuthenticationMethods()}return e.prototype.handleLogin=function(e){this.loginService.handleLoginClick()},e.prototype.ngOnInit=function(){},e}();l=n([a.Component({selector:"prm-sign-in-to-view",templateUrl:"components/search/fullView/sign-in-to-view.html"}),o(0,a.Inject("signInIcon")),i("design:paramtypes",[Object,s.LoginService])],l),r.PrmSignInToView=l},{"../../appConfig/appConfigForward":484,"../../security/login/login.service":845,"ng-metadata/core":362}],767:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./syndeticUnbound.service"),c=function(){function e(e,t){this.$translate=e,this.syndeticUnboundService=t,this.suenabled=!0,console.log("Syndetic Unbound Constructor")}return e.prototype.ngOnInit=function(){console.log("Syndetic Unbound ngOnInit"),this.runSU()},e.prototype.runSU=function(){var e=this;console.log("Syndetic Unbound getSU"),this.syndeticUnboundService.isLoaded()?this.runSyndeticUnboundCoore():this.syndeticUnboundService.getSU().then(function(t){console.log("Syndetic Unbound Script Loaded"),e.syndeticUnboundService.setLoaded(),e.runSyndeticUnboundCoore()},function(e){console.log("Error Load Syndetic Unbound Script")})},e.prototype.runSyndeticUnboundCoore=function(){if(console.log("runSyndeticUnboundCoore"),"undefined"!=typeof LibraryThingConnector){var e="",t="",r="",n="",i="";this.item.pnx.addata.isbn?e=this.item.pnx.addata.isbn[0]||"":this.item.pnx.search.isbn&&(e=this.item.pnx.search.isbn[0]||""),this.item.pnx.addata.btitle?t=this.item.pnx.addata.btitle[0]||"":this.item.pnx.addata.atitle?t=this.item.pnx.addata.atitle[0]||"":this.item.pnx.search.title&&(t=this.item.pnx.search.title[0]||""),this.item.pnx.addata.au?r=this.item.pnx.addata.au[0]||"":this.item.pnx.search.creatorcontrib&&(r=this.item.pnx.search.creatorcontrib[0]||""),this.item.pnx.control.recordid&&(n=this.item.pnx.control.recordid[0]||""),this.item.enrichment.virtualBrowseObject&&this.item.enrichment.virtualBrowseObject.callNumber?i=this.item.enrichment.virtualBrowseObject.callNumber||"":this.item.delivery.bestlocation&&this.item.delivery.bestlocation.callNumber&&(i=this.item.delivery.bestlocation.callNumber||"");var o=this.$translate.instant("nui.aria.fulldisplay.exploreButton"),a=this.$translate.instant("brief.results.tabs.syndeticsunbound"),s={isbn:e,title:t,author:r,id:n,callnumber:i,buttonTitle:o,sectionTitle:a};console.log("LibraryThingConnector Loaded: "+s),LibraryThingConnector.error=function(e){console.error("ERR SU:  "+e)},LibraryThingConnector.runUnboundWithMetadata(s)}},e}();n([a.Input(),i("design:type",Object)],c.prototype,"item",void 0),c=n([a.Component({selector:"prm-syndetic-unbound",templateUrl:"components/search/fullView/syndeticUnbound/syndeticUnbound.html"}),o(0,a.Inject("$translate")),i("design:paramtypes",[Object,s.SyndeticUnboundService])],c),r.PrmSyndeticUnbound=c},{"./syndeticUnbound.service":769,"ng-metadata/core":362}],768:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./syndeticUnbound.service"),a=e("./syndeticUnbound.directive"),s=function(){function e(){}return e}();s=n([i.NgModule({declarations:[a.PrmSyndeticUnbound],providers:[o.SyndeticUnboundService],imports:["angularLoad"]})],s),r.SyndeticUnboundModule=s},{"./syndeticUnbound.directive":767,"./syndeticUnbound.service":769,"ng-metadata/core":362}],769:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../appConfig/appConfigForward"),c=function(){function e(e,t){this.$http=e,this.angularLoad=t,this.isloaded=!1,this.query="https://unbound.syndetics.com/syndeticsunbound/connector/initiator.php?a_id="+s.getSyndeticUnboundId()}return e.prototype.setLoaded=function(){this.isloaded=!0},e.prototype.isLoaded=function(){return this.isloaded},e.prototype.getSU=function(){return this.angularLoad.loadScript(this.query)},e}();c=n([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("angularLoad")),i("design:paramtypes",[Function,Object])],c),r.SyndeticUnboundService=c},{"../../../appConfig/appConfigForward":484,"ng-metadata/core":362}],770:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("../../nddUtils/configurationUtil.service"),s=function(){function e(e){this.configurationUtil=e}return Object.defineProperty(e.prototype,"highlights",{get:function(){return this._highlights},set:function(e){this._highlights=e},enumerable:!0,configurable:!0}),e.prototype.updateHighlights=function(e){e&&(!this.configurationUtil.getBriefResultConfiguration().showhighlights,this.highlights=e)},e.prototype.getFieldsFromHighlightsAsArray=function(e){var t={};return t[e.field]=e.terms,
t},e}();s=n([o.Injectable(),i("design:paramtypes",[a.ConfigurationUtil])],s),r.HighlightsService=s},{"../../nddUtils/configurationUtil.service":596,"ng-metadata/core":362}],771:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./personalizeResultsButton.service"),c=e("../../../infra/sharedSessionStorage.service"),l=e("../../../primoExplore/primoExploreStates.module"),u=e("../../../appConfig/appConfigForward"),d=e("../../../security/jwtUtil.service"),p=e("../../../analytics/primolytics.service"),f=function(){function e(e,t,r,n,i,o,a){this.personalizeResultsButtonService=e,this.sharedSessionStorage=t,this.jwtUtilService=r,this.$stateParams=n,this.primolyticsService=i,this.$state=o,this.$timeout=a,this.personalizationEnabled=!!u.getAttributesMap().personalizationEnabled&&u.getAttributesMap().personalizationEnabled,this.personalizeResultsButtonService.cancelPressed=!0,this.personalizeResultsButtonService.editPressed=!1}return e.prototype.doPersonalization=function(){this.enable=!this.enable,this.personalizeResultsButtonService.cancelPressed=!1,this.$timeout(function(){var e=document.querySelector("#personalizationDialog");e.focus()},100)},e.prototype.sendBeaconEnablePersonalization=function(){},e.prototype.sendBeaconDisablePersonalization=function(){},Object.defineProperty(e.prototype,"enable",{get:function(){return this.personalizeResultsButtonService.enable&&null!==this.sharedSessionStorage.getItem("personalization")},set:function(e){this.personalizeResultsButtonService.cancelPressed=!1,this.personalizeResultsButtonService.enable=e,this.sharedSessionStorage.setItem("enable_personalization",e),null!==this.sharedSessionStorage.getItem("personalization")&&(this.personalizeResultsButtonService.addCameFromPersonalizationParam(),this.$state.go(l.STATE_NAMES.SEARCH,this.personalizeResultsButtonService.searchParams,{reload:!0}),this.enable?this.sendBeaconEnablePersonalization():this.sendBeaconDisablePersonalization(),this.isSignedIn()&&this.personalizeResultsButtonService.setUserPersonalizationPreferencesToDB(this.$stateParams.vid))},enumerable:!0,configurable:!0}),e.prototype.isSignedIn=function(){return"GUEST"!=this.jwtUtilService.getDecodedToken().userGroup},e.prototype.displayDialog=function(){return this.personalizeResultsButtonService.displayDialog()},e}();n([p.beacon({p:"personalizedResults",op:"enable"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],f.prototype,"sendBeaconEnablePersonalization",null),n([p.beacon({p:"personalizedResults",op:"disable"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],f.prototype,"sendBeaconDisablePersonalization",null),f=n([a.Component({selector:"prm-personalize-results-button",templateUrl:"components/search/personalization/personalizationButton/personalize-results-button.html"}),o(3,a.Inject("$stateParams")),o(5,a.Inject("$state")),o(6,a.Inject("$timeout")),i("design:paramtypes",[s.PersonalizeResultsButtonService,c.SharedSessionStorage,d.JwtUtilService,Object,p.PrimolyticsService,Object,Function])],f),r.PrmPersonalizeResultsButton=f},{"../../../analytics/primolytics.service":480,"../../../appConfig/appConfigForward":484,"../../../infra/sharedSessionStorage.service":569,"../../../primoExplore/primoExploreStates.module":620,"../../../security/jwtUtil.service":842,"./personalizeResultsButton.service":772,"ng-metadata/core":362}],772:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../infra/sharedSessionStorage.service"),c=e("lodash/clone"),l=function(){function e(e,t,r,n,i){this.sharedSessionStorage=e,this.restBaseURLs=t,this.$q=r,this.$stateParams=n,this.$http=i,this._enable=!1,this._recentness=!1,this._editPressed=!1,this._cancelPressed=!1;var o=this.sharedSessionStorage.getItem("enable_personalization");null!==o&&null!==this.sharedSessionStorage.getItem("personalization")?this.enable="true"===o:null!==o&&null===this.sharedSessionStorage.getItem("personalization")&&this.sharedSessionStorage.removeItem("enable_personalization");var a=this.sharedSessionStorage.getItem("recentness");null!==a&&null!==this.sharedSessionStorage.getItem("personalization")&&(this.recentness="true"===a),this.userSettingsUrl=t.userSettingsBaseURL}return e.prototype.displayDialog=function(){return!!(this.enable&&null===this.sharedSessionStorage.getItem("personalization")&&!this.cancelPressed||this.editPressed)},e.prototype.personalizationToggled=function(){return!(!this.enable||null===this.sharedSessionStorage.getItem("personalization"))},e.prototype.updatePersonalization=function(e){return this.sharedSessionStorage.getItem("personalization")?this.setUserPersonalizationPreferencesToDB(e):this.getUserPersonalizationPreferencesFromDB(e)},e.prototype.setUserPersonalizationPreferencesToDB=function(e){var t=this.buildPersonalizationPaylod(e);return this.$http.post(this.userSettingsUrl,t)},e.prototype.buildPersonalizationPaylod=function(e){var t=this.sharedSessionStorage.getItem("personalization")?this.sharedSessionStorage.getItem("personalization"):"";return{vid:e,"pr-discipline":t,"pr-recentness":this.recentness,"pr-enabled":this.enable}},e.prototype.addCameFromPersonalizationParam=function(){var e=c(this.$stateParams);e.came_from="personalization",this.searchParams=e},e.prototype.getUserPersonalizationPreferencesFromDB=function(e){var t=this,r=this.$q.defer(),n=this.userSettingsUrl+"?vid="+e;return this.$http({method:"GET",url:n}).then(function(e){var r=e.data;r.pr_discipline&&(t.sharedSessionStorage.setItem("personalization",r.pr_discipline),t.recentness="true"===r.pr_recentness||"1"===r.pr_recentness,r.pr_enabled?(t.enable="true"===r.pr_enabled,t.sharedSessionStorage.setItem("enable_personalization",t.enable)):(t.enable=!0,t.sharedSessionStorage.setItem("enable_personalization","true")))}).then(function(e){r.resolve(e)},function(e){r.resolve(e)}),r.promise},Object.defineProperty(e.prototype,"cancelPressed",{get:function(){return this._cancelPressed},set:function(e){this._cancelPressed=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recentness",{get:function(){return this._recentness},set:function(e){this._recentness=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},set:function(e){this._promise=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editPressed",{get:function(){return this._editPressed},set:function(e){this._editPressed=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enable",{get:function(){return this._enable},set:function(e){this._enable=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchParams",{get:function(){return this._searchParams},set:function(e){this._searchParams=e},enumerable:!0,configurable:!0}),e}();l=n([a.Injectable(),o(1,a.Inject("restBaseURLs")),o(2,a.Inject("$q")),o(3,a.Inject("$stateParams")),o(4,a.Inject("$http")),i("design:paramtypes",[s.SharedSessionStorage,Object,Object,Object,Function])],l),r.PersonalizeResultsButtonService=l},{"../../../infra/sharedSessionStorage.service":569,"lodash/clone":236,"ng-metadata/core":362}],773:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../mappingTablesCache/mappingTablesCache.service"),c=e("../../../infra/sharedSessionStorage.service"),l=e("../../../appConfig/appConfigForward"),u=e("../../../infra/widgets/alerts/alertFactory.service"),d=e("../../../primoExplore/primoExploreStates.module"),p=e("./personalizationDialog.service"),f=e("../personalizationButton/personalizeResultsButton.service"),h=e("../../../analytics/primolytics.service"),m=e("lodash/groupBy"),g=(e("lodash/sortBy"),e("lodash/fromPairs")),v=(e("lodash/extend"),function(){function e(e,t,r,n,i,o,a,s,c){var d=this;this.personalizeResultsButtonService=e,this.mappingTablesCache=t,this.sharedSessionStorage=r,this.personalizationDialogService=n,this.$translate=i,this.$state=o,this.alertService=a,this.primolyticsService=s,this.$stateParams=c,this.vid=l.getVid(),this.sortedDisc=[],this.subDisc=[],this.sortedSub=[],this.selectedDisc={},this.subMap={},this.KEY_CODE={COMMA:188,SEMICOLON:186,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,TAB:9,BACKSPACE:8,DELETE:46},this.maxDisciplines=a.create(u.ALERT_MSG_TYPE.SIMPLE_WITHOUT_DISMISS),this.maxDisciplines.show("nui.validation.pyr.maxDisciplines");var p=this.mappingTablesCache.findByProperties("Personalize Your Results Disciplines Fields",{source1:this.vid});0===p.length&&(p=this.mappingTablesCache.findByProperties("Personalize Your Results Disciplines Fields",{source1:"default"}));var f=p.filter(function(e){return!e.source2});f=f.map(function(e){return e.target});var h=p.filter(function(e){return e.source2});h=h.map(function(e){return{disc:e.source2,subDisc:e.target}});var g=m(h,"disc");Object.keys(g).forEach(function(e){d.subDisc["pyr.discipline."+e]=g[e].map(function(e){return"pyr.discipline."+e.subDisc})}),f=f.map(function(e){return"pyr.discipline."+e}),this.subMap=this.createSubMap(),this.$translate(f).then(function(e){d.sortedDisc=Object.entries(e),d.sortedDisc.sort(function(e,t){return e[1].localeCompare(t[1])})}),Object.keys(this.subDisc).forEach(function(e,t){d.$translate(d.subDisc[e]).then(function(t){var r=Object.entries(t),n=r.sort(function(e,t){return e[1].localeCompare(t[1])});d.sortedSub.push([e,n])})}),this.initSelectedDisiplines()}return e.prototype.getsubDisciplines=function(e){var t=g(this.sortedSub);return t[e]},Object.defineProperty(e.prototype,"enable",{get:function(){return this.personalizeResultsButtonService.enable},enumerable:!0,configurable:!0}),e.prototype.personalize=function(){var e=this,t=[];Object.keys(this.selectedDisc).forEach(function(r){e.selectedDisc[r]&&t.push(r)}),t.length>0?this.$translate(t).then(function(t){var r=Object.entries(t),n=r.sort(function(e,t){return e[1].localeCompare(t[1])}),i=n.map(function(e){return e[0].replace("pyr.discipline.","")}),o=e.sharedSessionStorage.getItem("personalization");e.sharedSessionStorage.setItem("personalization",i.join(";")),o!=i.join(";")?e.reloadStateWithBeacon():e.reloadStateWithoutBeacon(),e.personalizationDialogService.isSignedIn()&&e.personalizeResultsButtonService.setUserPersonalizationPreferencesToDB(e.$stateParams.vid)}):0===t.length&&null!==this.sharedSessionStorage.getItem("personalization")&&this.resetPersonalization(),this.personalizeResultsButtonService.editPressed=!1},e.prototype.reloadStateWithBeacon=function(){this.personalizeResultsButtonService.addCameFromPersonalizationParam(),this.$state.go(d.STATE_NAMES.SEARCH,this.personalizeResultsButtonService.searchParams,{reload:!0})},e.prototype.reloadStateWithoutBeacon=function(){this.$state.go(d.STATE_NAMES.SEARCH,{},{reload:!0})},e.prototype.resetPersonalization=function(e){this.selectedDisc={},this.personalizationDialogService.resetPersonalization(),this.personalizeResultsButtonService.addCameFromPersonalizationParam(),this.$state.go(d.STATE_NAMES.SEARCH,this.personalizeResultsButtonService.searchParams,{reload:!0}),this.personalizationDialogService.isSignedIn()&&this.personalizeResultsButtonService.setUserPersonalizationPreferencesToDB(this.$stateParams.vid)},e.prototype.displayDialog=function(){return this.personalizeResultsButtonService.displayDialog()},e.prototype.isPreferredSaved=function(){return null!==this.sharedSessionStorage.getItem("personalization")},e.prototype.isDisabled=function(e){var t=this,r=this.getsubDisciplines(e[0]);if(!r)return!1;r=r.map(function(e){return e[0]});var n=!1;return r.forEach(function(e,r){t.selectedDisc[e]&&(n=!0)}),n},e.prototype.isDisabledSub=function(e){var t=this.subMap[e[0]];return!!this.selectedDisc[t]},e.prototype.createSubMap=function(){var e=this,t={};return Object.keys(this.subDisc).forEach(function(r,n){e.subDisc[r].forEach(function(e,n){t[e]=r})}),t},e.prototype.countSelectedDisc=function(){var e=this,t=0;return Object.keys(this.selectedDisc).forEach(function(r,n){e.selectedDisc[r]&&(t+=1)}),t},e.prototype.initSelectedDisiplines=function(){var e=this;this.selectedDisc={};var t=this.sharedSessionStorage.getItem("personalization");if(null!==t){var r=t.split(";");r.forEach(function(t,r){e.selectedDisc["pyr.discipline."+t]=!0})}},e.prototype.cancel=function(e){this.personalizeResultsButtonService.cancelPressed=!0,this.personalizeResultsButtonService.editPressed=!1},e.prototype.getSliceLen=function(e){return Math.ceil(e.length/2)},e.prototype.keydownSupport=function(e){this.KEY_CODE;if(9===e.keyCode)return e.preventDefault(),document.querySelector("#personalizationDialog").focus()},e}());n([h.beacon({p:"personalizedResults",op:"updated"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],v.prototype,"reloadStateWithBeacon",null),n([h.beacon({p:"personalizedResults",op:"updated"}),i("design:type",Function),i("design:paramtypes",[Boolean]),i("design:returntype",void 0)],v.prototype,"resetPersonalization",null),v=n([a.Component({selector:"prm-personalization-dialog",templateUrl:"components/search/personalization/personalizationDialog/personalization-dialog.html"}),o(4,a.Inject("$translate")),o(5,a.Inject("$state")),o(8,a.Inject("$stateParams")),i("design:paramtypes",[f.PersonalizeResultsButtonService,s.MappingTablesCache,c.SharedSessionStorage,p.PersonalizationDialogService,Object,Object,u.AlertFactory,h.PrimolyticsService,Object])],v),r.PrmPersonalizationDialog=v},{"../../../analytics/primolytics.service":480,"../../../appConfig/appConfigForward":484,"../../../infra/sharedSessionStorage.service":569,"../../../infra/widgets/alerts/alertFactory.service":574,"../../../mappingTablesCache/mappingTablesCache.service":592,"../../../primoExplore/primoExploreStates.module":620,"../personalizationButton/personalizeResultsButton.service":772,"./personalizationDialog.service":774,"lodash/extend":245,"lodash/fromPairs":254,"lodash/groupBy":256,"lodash/sortBy":304,"ng-metadata/core":362}],774:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("../../../infra/sharedSessionStorage.service"),s=e("../personalizationButton/personalizeResultsButton.service"),c=e("../../../security/jwtUtil.service"),l=function(){function e(e,t,r){this.sharedSessionStorage=e,this.personalizeResultsButtonService=t,this.jwtUtilService=r}return e.prototype.resetPersonalization=function(){this.sharedSessionStorage.removeItem("personalization"),this.sharedSessionStorage.removeItem("enable_personalization"),this.sharedSessionStorage.removeItem("recentness"),this.personalizeResultsButtonService.enable=!1,this.personalizeResultsButtonService.recentness=!1,this.personalizeResultsButtonService.editPressed=!1},e.prototype.isSignedIn=function(){return"GUEST"!=this.jwtUtilService.getDecodedToken().userGroup},e}();l=n([o.Injectable(),i("design:paramtypes",[a.SharedSessionStorage,s.PersonalizeResultsButtonService,c.JwtUtilService])],l),r.PersonalizationDialogService=l},{"../../../infra/sharedSessionStorage.service":569,"../../../security/jwtUtil.service":842,"../personalizationButton/personalizeResultsButton.service":772,"ng-metadata/core":362}],775:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./personalizationButton/personalizeResultsButton.directive"),a=e("./personalizationButton/personalizeResultsButton.service"),s=e("./personalizationDialog/personalizationDialog.directive"),c=e("./personalizationDialog/personalizationDialog.service"),l=function(){function e(){}return e}();l=n([i.NgModule({declarations:[o.PrmPersonalizeResultsButton,s.PrmPersonalizationDialog],providers:[a.PersonalizeResultsButtonService,c.PersonalizationDialogService],imports:[]})],l),r.PersonalizeResultsButtonModule=l},{"./personalizationButton/personalizeResultsButton.directive":771,"./personalizationButton/personalizeResultsButton.service":772,"./personalizationDialog/personalizationDialog.directive":773,"./personalizationDialog/personalizationDialog.service":774,"ng-metadata/core":362}],776:[function(e,t,r){"use strict";function n(e,t){var r=t?l(e.resources,0,t):e.resources;return f(r,function(t){return t.resourceType=e.resourceType}),r}var i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var s=e("ng-metadata/core"),c=e("./resourceRecommender.service"),l=e("lodash/slice"),u=(e("lodash/map"),e("lodash/flatMap")),d=e("lodash/cloneDeep"),p=e("lodash/min"),f=e("lodash/forEach"),h=3,m=e("../../infra/mediaQueries.service"),g=v=function(){function e(e,t,r){this.resourceRecommenderService=e,this.$mdDialog=t,this.mediaQueries=r,this.recommendedResources=[],this.previewResources=[],this.resourceRecommenderEvent=new s.EventEmitter}return e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(e){var t=this;if(e.query){var r=e.query.currentValue;r&&this.resourceRecommenderService.getRecommendations(r).then(function(e){return t.parseRecommendations(e)})}},e.prototype.showAdditionalResourcesLink=function(){var e;return e=this.mediaQueries.gtxs?h:1,this.recommendedResources.length>e},e.prototype.numOfResources=function(){return this.recommendedResources.length},e.prototype.parseRecommendations=function(e){var t=e.data;if(this.resourceRecommenderEvent.emit(t&&t.length>0),!t||0===t.length)return this.recommendedResources=[],void(this.previewResources=[]);t=d(t),this.recommendedResources=u(t,function(e){return n(e)});for(var r=t.length,i=[],o=h,a=0;a<r&&o>0;){var s=0===a?2:1,c=p([t[a].resources.length,s]);i.push(c),o-=c,a++}if(o>0){var l=r-1,c=p([t[l].resources.length-i[l],o]);c>0&&(i[l]+=c)}var f=u(i,function(e,r){return n(t[r],e)});this.previewResources=f,this.previewClass=v.previewClassByLength[f.length]},e.prototype.resourceRecommenderLimit=function(){return this.mediaQueries.gtxs?null:1},e.prototype.openFullView=function(){this.$mdDialog.show({templateUrl:"components/search/resourceRecommender/resource-recommender-dialog-template.html",locals:{dialog:this.$mdDialog,mediaQueries:this.mediaQueries,query:this.query,resources:this.recommendedResources},bindToController:!0,clickOutsideToClose:!0,fullscreen:!0,escapeToClose:!0,controllerAs:"$ctrl",controller:function(){}})},e}();g.previewClassByLength={1:"flex",2:"flex-50",3:"flex-33"},i([s.Input("query"),o("design:type",String)],g.prototype,"query",void 0),i([s.Output(),o("design:type",Object)],g.prototype,"resourceRecommenderEvent",void 0),g=v=i([s.Component({selector:"prm-resource-recommender",templateUrl:"components/search/resourceRecommender/resource-recommender.html"}),a(1,s.Inject("$mdDialog")),o("design:paramtypes",[c.ResourceRecommenderService,Object,m.MediaQueries])],g),r.PrmResourceRecommender=g;var v},{"../../infra/mediaQueries.service":562,"./resourceRecommender.service":778,"lodash/cloneDeep":237,"lodash/flatMap":250,"lodash/forEach":253,"lodash/map":284,"lodash/min":288,"lodash/slice":302,"ng-metadata/core":362}],777:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./resourceRecommender.directive"),a=e("./resourceRecommender.service"),s=e("./resourceRecommenderCardContent.directive"),c=e("./resourceRecommenderFullView.directive"),l=function(){function e(){}return e}();l=n([i.NgModule({declarations:[o.PrmResourceRecommender,s.PrmResourceRecommenderCardContent,c.PrmResourceRecommenderFullView],providers:[a.ResourceRecommenderService]})],l),r.ResourceRecommenderModule=l},{"./resourceRecommender.directive":776,"./resourceRecommender.service":778,"./resourceRecommenderCardContent.directive":779,"./resourceRecommenderFullView.directive":780,"ng-metadata/core":362}],778:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../appConfig/appConfigForward"),c=function(){function e(e,t,r){this.$http=e,this.$translate=r,this.view=s.getVid(),this.restUrl=t.resourceRecommenderUrl}return e.prototype.getRecommendations=function(e){e.endsWith(",AND")&&(e=e.slice(0,-4));var t={query:e,view:this.view,lang:this.$translate.use()};return this.$http.get(this.restUrl,{params:t})},e}();c=n([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),o(2,a.Inject("$translate")),i("design:paramtypes",[Function,Object,Function])],c),r.ResourceRecommenderService=c},{"../../appConfig/appConfigForward":484,"ng-metadata/core":362}],779:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("../../analytics/primolytics.service"),s=function(){function e(e){this.primolyticsService=e}return e.prototype.handle_click=function(){this.report_beacon(this.resource)},e.prototype.report_beacon=function(e){},e}();n([o.Input(),i("design:type",Object)],s.prototype,"resource",void 0),n([a.beacon({p:"brief",op:"resourceRecommender"}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],s.prototype,"report_beacon",null),s=n([o.Component({selector:"prm-resource-recommender-card-content",templateUrl:"components/search/resourceRecommender/resource-recommender-card-content.html"}),i("design:paramtypes",[a.PrimolyticsService])],s),r.PrmResourceRecommenderCardContent=s},{"../../analytics/primolytics.service":480,"ng-metadata/core":362}],780:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("lodash/partition"),s=e("../../infra/mediaQueries.service"),c=e("lodash/includes"),l=["library_information","library_guide","person"],u=function(){function e(e){this.mediaQueries=e}return e.prototype.ngOnInit=function(){e=a(this.resources,function(e){return c(l,e.resourceType)}),this.libraryResources=e[0],this.otherResources=e[1];var e},e}();n([o.Input(),i("design:type",Array)],u.prototype,"resources",void 0),n([o.Input(),i("design:type",String)],u.prototype,"query",void 0),u=n([o.Component({selector:"prm-resource-recommender-full-view",templateUrl:"components/search/resourceRecommender/resource-recommender-full-view.html"}),i("design:paramtypes",[s.MediaQueries])],u),r.PrmResourceRecommenderFullView=u},{"../../infra/mediaQueries.service":562,"lodash/includes":260,"lodash/partition":294,"ng-metadata/core":362}],781:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../appConfig/appConfigForward"),c=e("../nddUtils/configurationUtil.service"),l=e("./fullView/getit/opac/locations/locations.service"),u=e("../appConfig/appConfig.module"),d=function(){function e(e,t,r,n){this.$http=e,this.configurationUtil=t,this.locationsService=r,this.$stateParams=n}return e.prototype.updateAvailability=function(e,t){var r=this;void 0===t&&(t={});var n=this.calcRtaUrl(e);if(n){var i=this.calcRtaPayload(e,t);this.setRtaInProgress(e,!0),n=n.replace(/(https?:\/\/[^\/]*)/,"").replace("//","/"),this.$http.post(n,i).then(function(t){return r.onSuccess(t,e)},this.onError).finally(function(){r.setRtaInProgress(e,!1)})}},e.prototype.calcRtaUrl=function(e){var t=e.map(function(e){if(e["@rta_link"]&&e["@rta_link"].length>0)return e["@rta_link"]}).filter(this.filterEmpty),r=".*recordInformation=";if(t.length>0&&t[0]){var n=t[0].match(r);if(null!=n){var i=n[0];return i.replace("recordInformation=","")}}return null},e.prototype.calcRtaPayload=function(e,t){var r=e.map(function(e){if(e["@rta_link"]&&e["@rta_link"].length>0)return e["@rta_link"]}).filter(this.filterEmpty),n=".*recordInformation=",i="";if(r.length>0&&r[0]){var o=r[0].match(n);if(null!=o){for(var a=0;a<r.length;a++){var c=new RegExp(".*recordInformation="),l=r[a].replace(c,"");i+=l,a!==r.length-1&&(i+="|;|")}var u={recordsData:i,instCode:s.getInstitutionCode(),vid:s.getVid(),rtaOnAllInstitutions:"false",instSort:this.configurationUtil.getLocationsConfiguration().instsort,selectedScope:this.$stateParams.search_scope,lang:"en_US"};return Object.assign(u,t),u}}return null},e.prototype.setRtaInProgress=function(e,t){e.forEach(function(e){e["@rta_link"]&&(e.rtaInProgress=t)})},e.prototype.onSuccess=function(e,t){var r=this;if(200===e.status){var n=e.data;t.forEach(function(e){var i=e.pnx.control.recordid;n[i]&&n[i].delivery.availability&&n[i].delivery.holding.length>0&&(e.pnx.delivery.availability=n[i].delivery.availability,e.pnx.delivery.displayedAvailability=n[i].delivery.availability[0],e.pnx.delivery.holding=n[i].delivery.holding,e.pnx.delivery.bestlocation=n[i].delivery.bestlocation,e.pnx.delivery.physicalItemTextCodes=n[i].delivery.physicalItemTextCodes,e.pnx.delivery.feDisplayOtherLocations=n[i].delivery.feDisplayOtherLocations,e.delivery.availability=n[i].delivery.availability,e.delivery.displayedAvailability=n[i].delivery.availability[0],e.delivery.holding=n[i].delivery.holding,e.delivery.bestlocation=n[i].delivery.bestlocation,e.delivery.bestlocation&&(e.delivery.bestlocation.pendingRender=!0),e.delivery.physicalItemTextCodes=n[i].delivery.physicalItemTextCodes,e.delivery.feDisplayOtherLocations=n[i].delivery.feDisplayOtherLocations,(e.delivery.almaInstitutionsList||n[i].delivery.almaInstitutionsList)&&(e.delivery.almaInstitutionsList=n[i].delivery.almaInstitutionsList),1===t.length&&r.locationsService.setLocations(n[i]))})}return e},e.prototype.onError=function(e){return console.error("RTA request failed",e),e},e.prototype.filterEmpty=function(e){return e},e}();d=n([a.Injectable(),o(0,a.Inject("$http")),o(3,a.Inject("$stateParams")),i("design:paramtypes",[Function,c.ConfigurationUtil,l.LocationsService,Object])],d),r.RtaService=d,r.default=[u.default.name]},{"../appConfig/appConfig.module":482,"../appConfig/appConfigForward":484,"../nddUtils/configurationUtil.service":596,"./fullView/getit/opac/locations/locations.service":718,"ng-metadata/core":362}],782:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../favorites/savedQueries/savedQueries.service"),c=e("../../../nddUtils/smoothScrollUtil.service"),l=e("../../../nddUtils/configurationUtil.service"),u=e("../../cheetah.service"),d=e("../../../infra/mediaQueries.service"),p=e("lodash/flatten"),f=e("lodash/get"),h=function(){
function e(e,t,r,n,i,o,a){this.$mdDialog=e,this.$mdToast=t,this.savedQueriesService=r,this.smoothScrollUtil=n,this.configurationUtil=i,this.cheetahService=o,this.mediaQueries=a}return e.prototype.ngOnInit=function(){var e=p([this.id]);this.addMode?"undefined"==this.userEmail?this.email="":this.email=this.userEmail:this.email=this.userEmail?this.userEmail:this.savedQueriesService.Items.filter(function(t){return t.ID===e[0]})[0].email},e.prototype.openMoreInfo=function(e){var t='<md-dialog aria-label="" style="display:initial;max-width: 380px;"><md-dialog-content><prm-edit-notification-settings [id]="ctrl.selectedIds" [email]="ctrl.email"[add-mode]="ctrl.addMode"></prm-edit-notification-settings></md-dialog-content></md-dialog>',r=p([this.id]),n=this.email,i=this.addMode,o=this.smoothScrollUtil;this.$mdDialog.show({controllerAs:"ctrl",controller:function(){this.selectedIds=r,this.email=n,this.addMode=i},template:t,parent:angular.element(document.body),focusOnOpen:!1,clickOutsideToClose:!0,onComplete:function(){o.focusOn("input-mail-saved-searches")}})},e.prototype.onDismiss=function(){this.$mdToast.hide()},e.prototype.detectMobile=function(){return!(!this.mediaQueries.xs&&!this.mediaQueries.sm)},e.prototype.displayAlertForm=function(){if(this.configurationUtil.isSuprima()){var e=this.cheetahService.searchData.scope,t=this.configurationUtil.getScopesObj(e),r=f(t,"[0].locations");if(r){var n=r.split(",");if(n.includes("EbscoLocal")||n.includes("WorldCatLocal"))return!1}}return!0},e}();n([a.Input(),i("design:type",String)],h.prototype,"userEmail",void 0),n([a.Input(),i("design:type",Object)],h.prototype,"id",void 0),n([a.Input(),i("design:type",String)],h.prototype,"addMode",void 0),h=n([a.Component({selector:"prm-add-alert-toast",templateUrl:"components/search/savedQueries/addAlertToast/add-alert-toast.html"}),o(0,a.Inject("$mdDialog")),o(1,a.Inject("$mdToast")),i("design:paramtypes",[Object,Object,s.SavedQueriesService,c.SmoothScrollUtil,l.ConfigurationUtil,u.Cheetah,d.MediaQueries])],h),r.PrmAddAlertToast=h},{"../../../favorites/savedQueries/savedQueries.service":522,"../../../infra/mediaQueries.service":562,"../../../nddUtils/configurationUtil.service":596,"../../../nddUtils/smoothScrollUtil.service":607,"../../cheetah.service":661,"lodash/flatten":251,"lodash/get":255,"ng-metadata/core":362}],783:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core");e("angular-material");var s=e("./addQueryToSavedSearches.service"),c=function(){function e(e,t,r){this.addQueryToSavedSearchesService=e,this.$mdToast=t,this.actionsIcons=r}return e.prototype.add=function(){var e=this;this.addQueryToSavedSearchesService.addItems().then(function(t){var r='<prm-add-alert-toast id="'+t.id+'" add-mode="'+!0+'" user-email="'+t.email+'"></prm-add-alert-toast>';e.$mdToast.show({hideDelay:8e3,position:"top right",template:r}).then(function(){e.addQueryToSavedSearchesService.onToastClose()})},function(e){console.log("add failed: ",e)})},e}();c=n([a.Component({selector:"prm-add-query-to-saved-searches",templateUrl:"components/search/savedQueries/addQueryToSavedSearches/add-query-to-saved-searches.html"}),o(1,a.Inject("$mdToast")),o(2,a.Inject("featuredActionsIcons")),i("design:paramtypes",[s.AddQueryToSavedSearchesService,Object,Object])],c),r.PrmAddQueryToSavedSearches=c},{"./addQueryToSavedSearches.service":784,"angular-material":17,"ng-metadata/core":362}],784:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../search/cheetah.service"),c=e("../../../appConfig/appConfigForward"),l=e("../../search.fields.service"),u=e("../../../appConfig/appConfigForward"),d=e("../../../infra/storageUtil.service"),p=function(){function e(e,t,r,n,i,o,a){this.cheetahService=e,this.$location=t,this.$http=r,this.restBaseURLs=n,this.$httpParamSerializer=i,this.searchFieldsService=o,this.storageUtil=a,this.GET_URL=n.saveSearchURL}return e.prototype.calculatePayload=function(){var e="";e="suprima"===u.getBackendSystem()?this.$location.protocol()+"://"+location.host+"/discovery/search?"+this.$httpParamSerializer(this.searchFieldsService.searchParams):this.$location.protocol()+"://"+location.host+"/primo-explore/search?"+this.$httpParamSerializer(this.searchFieldsService.searchParams),e=this.multiReplace(e,"+","%20");var t={add:[{searchData:this.cheetahService.searchData,queryUrl:e,suprimaSearchApiurl:this.storageUtil.sessionStorage.getItem("suprimaSearchApiurl")}]};return t},e.prototype.multiReplace=function(e,t,r){if(t===r)return e;do e=e.replace(t,r);while(e.indexOf(t)!==-1);return e},e.prototype.addItems=function(){var e=this.calculatePayload();return this.makeRequest("add",e,"POST","/add?vid="+c.getVid())},e.prototype.makeRequest=function(e,t,r,n){var i=this;void 0===t&&(t=null),void 0===r&&(r=null),void 0===n&&(n="");var o={method:r,url:this.GET_URL+n,params:"GET"===r?t:null,data:"POST"===r||"PUT"===r?t:null};return this.$http(o).then(function(e){return i.reqSuccess(e.data)},function(r){return i.reqFailure(r,e,t)})},e.prototype.reqSuccess=function(e){return e},e.prototype.reqFailure=function(e,t,r){throw e},e.prototype.onToastClose=function(){angular.element(document.querySelector("primo-explore")).css("position","")},e}();p=n([a.Injectable(),o(1,a.Inject("$location")),o(2,a.Inject("$http")),o(3,a.Inject("restBaseURLs")),o(4,a.Inject("$httpParamSerializer")),i("design:paramtypes",[s.Cheetah,Object,Function,Object,Function,l.SearchFieldsService,d.StorageUtil])],p),r.AddQueryToSavedSearchesService=p},{"../../../appConfig/appConfigForward":484,"../../../infra/storageUtil.service":571,"../../../search/cheetah.service":661,"../../search.fields.service":790,"ng-metadata/core":362}],785:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../favorites/savedQueries/savedQueries.service"),c=e("lodash/flatten"),l=function(){function e(e,t){this.$mdDialog=e,this.savedQueriesService=t,this.emailRegEx=/^(([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5}){1,25})+([;](([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5}){1,25})+)*$/}return e.prototype.saveEmail=function(){var e=this;if(this.isFormValid()){var t=c([this.id]);this.savedQueriesService.setAlertToSelectedSearches(this.email,t).then(function(t){console.log("entire res:"+JSON.stringify(t)),e.savedQueriesService.getItemsFromApi(),e.$mdDialog.hide()},function(e){console.log("add failed: ",e)})}},e.prototype.isFormValid=function(){return this.emailRegEx.test(this.email)},e.prototype.close=function(){this.$mdDialog.hide()},e}();n([a.Input(),i("design:type",String)],l.prototype,"email",void 0),n([a.Input(),i("design:type",Object)],l.prototype,"id",void 0),n([a.Input(),i("design:type",Boolean)],l.prototype,"addMode",void 0),l=n([a.Component({selector:"prm-edit-notification-settings",templateUrl:"components/search/savedQueries/editNotificationSettings/edit-notification-settings.html"}),o(0,a.Inject("$mdDialog")),i("design:paramtypes",[Object,s.SavedQueriesService])],l),r.PrmEditNotificationSettings=l},{"../../../favorites/savedQueries/savedQueries.service":522,"lodash/flatten":251,"ng-metadata/core":362}],786:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./addQueryToSavedSearches/addQueryToSavedSearches.service"),a=e("./editNotificationSettings/editNotificationSettings.directive"),s=e("./addAlertToast/addAlertToast.directive"),c=e("./addQueryToSavedSearches/addQueryToSavedSearches.directive"),l=function(){function e(){}return e}();l=n([i.NgModule({declarations:[s.PrmAddAlertToast,a.PrmEditNotificationSettings,c.PrmAddQueryToSavedSearches],providers:[o.AddQueryToSavedSearchesService],imports:[]})],l),r.SearchSavedQueriesModule=l},{"./addAlertToast/addAlertToast.directive":782,"./addQueryToSavedSearches/addQueryToSavedSearches.directive":783,"./addQueryToSavedSearches/addQueryToSavedSearches.service":784,"./editNotificationSettings/editNotificationSettings.directive":785,"ng-metadata/core":362}],787:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("./scroll.service"),s=function(){function e(e){this.scrollService=e}return e.prototype.ngOnInit=function(){},e}();s=n([o.Component({selector:"prm-scroll",templateUrl:"components/search/scroller/scroll.html"}),i("design:paramtypes",[a.ScrollService])],s),r.PrmScroll=s},{"./scroll.service":788,"ng-metadata/core":362}],788:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../infra/lang/changeLang.service"),c=e("../../infra/mediaQueries.service"),l=function(){function e(e,t,r){this.$interval=e,this.changeLangService=t,this.mediaQueries=r}return e.prototype.easeInOutQuart=function(e,t,r,n){return e/=n/2,e<1?r/2*e*e*e*e+t:(e-=2,-r/2*(e*e*e*e-2)+t)},e.prototype.detectMobile=function(){return!(!this.mediaQueries.xs&&!this.mediaQueries.sm)},e.prototype.smoothScrollClick=function(e,t,r){var n=this;void 0===r&&(r=null);var i=0;if(null!=r){var o=this.detectMobile()?1:2,a=r[0].clientWidth+15;i=a*o}else i=120;"left"===e&&(i=-i);var s=0,c=60,l=t.scrollLeft,u=this.$interval(function(){var e=n.easeInOutQuart(s,l,i,c);s++,t.scrollLeft=e,s===c&&n.$interval.cancel(u)},2)},e.prototype.onLeftArrowClick=function(e){null!=e&&this.smoothScrollClick("left",e)},e.prototype.onRightArrowClick=function(e){null!=e&&this.smoothScrollClick("right",e)},e.prototype.isShowLeftArrow=function(e){if(null!=e)return"rtl"===this.changeLangService.direction?e.scrollLeft>50:e.scrollLeft>0},e.prototype.isShowRightArrow=function(e){if(null!=e)return this.getScrollRight(e)>0},e.prototype.getScrollRight=function(e){if(null!=e){var t=e.scrollWidth-e.scrollLeft-e.offsetWidth;return t<15?0:t}},e}();l=n([a.Injectable(),o(0,a.Inject("$interval")),i("design:paramtypes",[Function,s.ChangeLangService,c.MediaQueries])],l),r.ScrollService=l},{"../../infra/lang/changeLang.service":561,"../../infra/mediaQueries.service":562,"ng-metadata/core":362}],789:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("../primoExplore/primoExploreStates.module"),s=e("ng-metadata/core"),c=e("./search.service"),l=e("./search.fields.service"),u=e("../appConfig/appConfigForward"),d=e("../analytics/primolytics.service"),p=e("./topbar/menu.service"),f=e("./topbar/skipTo/skipTo.service"),h=e("../infra/mediaQueries.service"),m=e("../infra/widgets/alerts/alertFactory.service"),g=e("../journals/journals.service"),v=e("../infra/annotations"),y=e("../appConfig/appConfigForward"),b=e("./searchState.service"),S=e("./personalization/personalizationButton/personalizeResultsButton.service"),_=e("../mappingTablesCache/mappingTablesCache.service"),w=e("../journals/databases.service"),E=e("../security/userSessionManager.service"),T=e("lodash/isArray"),O=e("lodash/isEmpty"),I={query:"-1",queryTerm:"-1"},P=function(){function e(e,t,r,n,i,o,a,s,c,l,u,d,p,f,h,m,g,v,y,b,S,_,w){var E=this;this.mobileMenu=e,this.searchService=t,this.$location=r,this.$timeout=n,this.searchBoxIcons=i,this.iconSets=o,this.$mdDialog=a,this.searchFieldsService=s,this.$urlRouter=c,this.$state=l,this.$rootScope=u,this.primolyticsService=d,this.mappingTablesCache=p,this.mediaQueries=f,this.skipToService=h,this.searchStateService=m,this.$stateParams=g,this.alertService=v,this.journalsService=y,this.databasesService=b,this.personalizeResultsButtonService=S,this.$scope=_,this.userSessionManagerService=w,this._showMobileFacets=!0,this.showFacets=!1,this._showUIBlocker=!1,this.KEY_CODE={COMMA:188,SEMICOLON:186,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,TAB:9,BACKSPACE:8,DELETE:46},this.showResourceRecommender=!1,this.searchService.resetSearchDone(),this.searchStateService.resetSearchObject(),this.searchService.resetResultObject();var T=this.searchService.getSearchObject();T?(this.query=this.parseSearchTerm(T.query),this.scope=T.scope):this.query="",this.init(),this.$scope.$watch(function(){return E.searchInProgress},function(e){e||E.$timeout(function(){E.showTimer=!0},0)})}return e.prototype.isRecommendationsEnabled=function(){var e=this.mappingTablesCache.findByProperties("Resource Recommender Config",{target:"enable"});return"true"===e[0].source2},e.prototype.hideFacets=function(){return this.$state.current.name===a.STATE_NAMES.CITATION_TRAILS},e.prototype.isLoggedInIDP=function(){return this.userSessionManagerService.isLoggedInIDP()},e.prototype.init=function(){this.preventSearchStateReload(),this.callResetParametersOfSearchService(),this.updateFieldsFromUrl(),this.updatePageTitle()},e.prototype.callResetParametersOfSearchService=function(){var e=this,t=this.searchService.facetService.getStickyFacets();if(t.forEach(function(t){t.persistent&&e.searchStickyFacetBeacon(t)}),this.searchService.cameFromState.startsWith("lateralLinking:")){var r="",n=this.searchService.cameFromState.split(":");n.length>1&&(r=n[1]),""==this.searchService.cameFromState,this.resetParametersOfSearchServiceWithBeacon(r)}else this.$stateParams.came_from&&("search_history"===this.$stateParams.came_from?this.resetParametersWithSearchHistoryBeacon():"saved_queries"===this.$stateParams.came_from&&this.resetParametersWithSavedQueriesBeacon()),this.hasFacets()?this.resetParametersOfSearchService():"pagination"===this.$stateParams.came_from?this.resetParametersWithPaginationBeacon():this.$stateParams.query?this.$state.current.name===a.STATE_NAMES.JOURNAL_SEARCH?this.searchJournalsWithBeacon():this.$state.current.name===a.STATE_NAMES.DB_SEARCH?this.searchDBWithBeacon():"browse"===this.$state.params.mode?this.searchBrowseWithBeacon():"featuredResults"===this.$stateParams.came_from?this.searchFeaturedResultWithBeacon():"personalization"===this.$stateParams.came_from?this.searchPersonalization():"sort"===this.$stateParams.came_from?this.searchSort():this.searchWithBeacon():this.resetParametersOfSearchService()},e.prototype.hasFacets=function(){var e=this.$stateParams.facet,t=this.$stateParams.mfacet;return!(O(e)&&O(t))},e.prototype.searchWithBeacon=function(){this.resetParametersOfSearchService()},e.prototype.searchJournalsWithBeacon=function(){this.resetParametersOfSearchService()},e.prototype.searchDBWithBeacon=function(){this.resetParametersOfSearchService()},e.prototype.searchBrowseWithBeacon=function(){this.resetParametersOfSearchService()},e.prototype.searchFeaturedResultWithBeacon=function(){this.resetParametersOfSearchService()},e.prototype.searchStickyFacetBeacon=function(e){},e.prototype.searchPersonalization=function(){this.resetParametersOfSearchService(),this.$location.search("came_from",null)},e.prototype.searchSort=function(){this.resetParametersOfSearchService(),this.$location.search("came_from",null)},e.prototype.setShowResourceRecommender=function(e){this.showResourceRecommender=e},e.prototype.resetParametersOfSearchService=function(){var e=this,t=this.searchService.resetParameters();t&&t.then&&t.then(function(){e.$timeout(function(){return e.showFacets=!0},1e3),e.$state.current.name===a.STATE_NAMES.CITATION_TRAILS&&e.focusOnFirstPage()})},e.prototype.resetParametersWithSearchHistoryBeacon=function(){this.$location.search("came_from",null)},e.prototype.resetParametersWithSavedQueriesBeacon=function(){this.$location.search("came_from",null)},e.prototype.resetParametersWithPaginationBeacon=function(){this.$location.search("came_from",null),this.resetParametersOfSearchService()},e.prototype.focusOnFirstPage=function(){this.$timeout(function(){var e=document.querySelector("#searchResultPage1");e&&(e.setAttribute("tabindex","-1"),e.focus(),e.setAttribute("tabindex","0"))},0)},e.prototype.resetParametersOfSearchServiceWithBeacon=function(e){this.resetParametersOfSearchService()},e.prototype.isLinksMenuVisible=function(){return this.mobileMenu.getLinksMenuVisible()},e.prototype.preventSearchStateReload=function(){var e=this.$state.current;e.reloadOnSearch=!1},e.prototype.isSearchDone=function(){return this.searchService.isSearchDone()},e.prototype.hasSearchResults=function(){var e=this.searchResults;return T(e)&&e.length>0},Object.defineProperty(e.prototype,"searchResults",{get:function(){return this.searchService.getResultObject().data},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"featuredResult",{get:function(){return this.searchService.getResultObject().featuredResult},enumerable:!0,configurable:!0}),e.prototype.updatePageTitle=function(){this.searchService.updatePageTitle()},e.prototype.parseSearchTerm=function(e){if(!e)return"";if(I.query===e)return I.queryTerm;for(var t=e.split(","),r=0;r<2;r++)t.shift();I.query=e;var n=t.join(",");return I.queryTerm=n,n},e.prototype.updateFieldsFromUrl=function(){var e=this.searchService.getSearchObject();this.searchFieldsService.searchParams=this.$location.search(),"advanced"!==this.$stateParams.mode&&e&&(this.searchFieldsService.mainSearch=this.parseSearchTerm(e.query)),e=e||{},this.searchFieldsService.scope=e.scope||u.getDefaultScope(),this.searchFieldsService.sortby=e.sortby||"rank",this.searchFieldsService.offset=e.offset||0},Object.defineProperty(e.prototype,"signInAlert",{get:function(){return this.searchService.signInAlert},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skipLinks",{get:function(){return this.skipToService.skipLinks.search},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"highlights",{get:function(){return this.searchService.highlightsService.highlights},enumerable:!0,configurable:!0}),e.prototype.isShowPartsOnCitationTrails=function(){var e=this.$state.current.name;return e===a.STATE_NAMES.CITATION_TRAILS},Object.defineProperty(e.prototype,"isAtozSearch",{get:function(){return this.journalsService.isJournalSearch()||this.databasesService.isDBSearch()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBrowseMode",{get:function(){return"browse"===this.$stateParams.mode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"facetToLeft",{get:function(){var e=y.getAttributesMap();return"left"===e.selectedFacetLocation},enumerable:!0,configurable:!0}),e.prototype.displayDialog=function(){return this.personalizeResultsButtonService.displayDialog()},Object.defineProperty(e.prototype,"searchInProgress",{get:function(){return this.searchService.isSearchInProgress()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showUIBlocker",{get:function(){return this._showUIBlocker},enumerable:!0,configurable:!0}),e.prototype.cancel=function(e){this.personalizeResultsButtonService.cancelPressed=!0},e.prototype.keydownSupport=function(e){this.KEY_CODE;27===e.keyCode&&this.cancel(e)},e.prototype.closeMobileFacet=function(){this.showMobileFacets=!0},Object.defineProperty(e.prototype,"showMobileFacets",{get:function(){return this._showMobileFacets},set:function(e){this._showMobileFacets=e},enumerable:!0,configurable:!0}),e}();n([d.beacon({p:"search",op:"do"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],P.prototype,"searchWithBeacon",null),n([d.beacon({p:"search",op:"atoz"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],P.prototype,"searchJournalsWithBeacon",null),n([d.beacon({p:"search",op:"azdb"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],P.prototype,"searchDBWithBeacon",null),n([d.beacon({p:"search",op:"browseRelated"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],P.prototype,"searchBrowseWithBeacon",null),n([d.beacon({p:"search",op:"featuredResults"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],P.prototype,"searchFeaturedResultWithBeacon",null),n([d.beacon({p:"persistent"}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],P.prototype,"searchStickyFacetBeacon",null),n([v.preventStateReload,d.beacon({p:"search",op:"sessionQuery"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],P.prototype,"resetParametersWithSearchHistoryBeacon",null),n([v.preventStateReload,d.beacon({p:"search",op:"savedQuery"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],P.prototype,"resetParametersWithSavedQueriesBeacon",null),n([v.preventStateReload,d.beacon({p:"brief",op:"next"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],P.prototype,"resetParametersWithPaginationBeacon",null),n([d.beacon({p:"search",op:"lateralLinking"}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],P.prototype,"resetParametersOfSearchServiceWithBeacon",null),P=n([s.Component({selector:"prm-search",templateUrl:"components/search/search.html"}),o(2,s.Inject("$location")),o(3,s.Inject("$timeout")),o(4,s.Inject("searchBoxIcons")),o(5,s.Inject("iconSets")),o(6,s.Inject("$mdDialog")),o(8,s.Inject("$urlRouter")),o(9,s.Inject("$state")),o(10,s.Inject("$rootScope")),o(16,s.Inject("$stateParams")),o(21,s.Inject("$scope")),i("design:paramtypes",[p.MobileMenu,c.SearchService,Object,Function,Object,Object,Object,l.SearchFieldsService,Object,Object,Object,d.PrimolyticsService,_.MappingTablesCache,h.MediaQueries,f.SkipToService,b.SearchStateService,Object,m.AlertFactory,g.JournalsService,w.DatabasesService,S.PersonalizeResultsButtonService,Object,E.UserSessionManagerService])],P),r.PrmSearch=P},{"../analytics/primolytics.service":480,"../appConfig/appConfigForward":484,"../infra/annotations":531,"../infra/mediaQueries.service":562,"../infra/widgets/alerts/alertFactory.service":574,"../journals/databases.service":584,"../journals/journals.service":588,"../mappingTablesCache/mappingTablesCache.service":592,"../primoExplore/primoExploreStates.module":620,"../security/userSessionManager.service":853,"./personalization/personalizationButton/personalizeResultsButton.service":772,"./search.fields.service":790,"./search.service":792,"./searchState.service":814,"./topbar/menu.service":822,"./topbar/skipTo/skipTo.service":824,"lodash/isArray":264,"lodash/isEmpty":268,"ng-metadata/core":362}],790:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../appConfig/appConfigForward"),c=function(){function e(e){this.$translate=e,this.searchParams={vid:s.getVid(),lang:e.use()},this.facets=[],this.prevFacets=[]}return e.prototype.reset=function(){this.mainSearch=void 0,this.scope=void 0,this.sortby=void 0,this.facets=void 0,this.prevSortBy=void 0,this.prevOffset=void 0,this.prevFacets=void 0,this.advancedSearch=void 0,this.tab=void 0,this.searchParams=void 0,this.offset=void 0,this.pfilters=void 0,this.journals=void 0,this.databases=void 0},Object.defineProperty(e.prototype,"mainSearch",{get:function(){return this._mainSearch},set:function(e){this._mainSearch=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scope",{get:function(){return this._scope},set:function(e){this._scope=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tab",{get:function(){return this._tab},set:function(e){this._tab=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortby",{get:function(){return this._sortby},set:function(e){this._sortby=e,this._searchParams.sortby=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"facets",{get:function(){return this._facets},set:function(e){this._facets=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"prevFacets",{get:function(){return this._prevFacets},set:function(e){this._prevFacets=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"prevSortBy",{get:function(){return this._prevSortBy},set:function(e){this._prevSortBy=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"advancedSearch",{get:function(){return this._advancedSearch},set:function(e){this._advancedSearch=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},set:function(e){this._offset=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"prevOffset",{get:function(){return this._prevOffset},set:function(e){this._prevOffset=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pfilters",{get:function(){return this._pfilters},set:function(e){this._pfilters=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchParams",{get:function(){return this._searchParams},set:function(e){this._searchParams=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"databases",{get:function(){return this._databases},set:function(e){this._databases=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"journals",{get:function(){return this._journals},set:function(e){this._journals=e},enumerable:!0,configurable:!0}),e}();c=n([a.Injectable(),o(0,a.Inject("$translate")),i("design:paramtypes",[Function])],c),r.SearchFieldsService=c},{"../appConfig/appConfigForward":484,"ng-metadata/core":362}],791:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=(e("angular-material"),e("./searchResult/searchResult.module")),a=e("./search.fields.service"),s=e("./searchState.service"),c=e("./cheetah.service"),l=e("./searchResultParser.service"),u=e("./facet/facet.module"),d=e("./searchBar/searchBar.module"),p=e("./fullView/fullView.module"),f=e("./rta.service"),h=e("./highlight/highlight.service"),m=e("./search.service"),g=e("./savedQueries/searchSavedQueries.module"),v=e("./citationTrails/citationTrails.module"),y=e("./didUMean/didUMean.module"),b=e("../static/static.module"),S=e("./topbar/topbar.module"),_=e("./search.directive"),w=e("./autocomplete.service"),E=e("./virtualBrowse/virtualBrowse.module"),T=e("../security/browserStorageManager.module"),O=e("./resourceRecommender/resourceRecommender.module"),I=e("./personalization/personalizeResultsButton.module"),P=e("./controlledVocabulary/controlledVocabulary.module"),R=function(){function e(){}return e}();R=n([i.NgModule({declarations:[_.PrmSearch],providers:[w.AutoComplete,c.Cheetah,h.HighlightsService,f.RtaService,a.SearchFieldsService,l.SearchResultParser,m.SearchService,s.SearchStateService],imports:[v.CitationTrailsModule,P.ControlledVocabularyModule,y.DidUMeanModule,u.FacetModule,p.FullViewModule,O.ResourceRecommenderModule,d.SearchBarModule,o.SearchResultModule,g.SearchSavedQueriesModule,b.StaticModule,S.TopbarModule,E.VirtualBrowseModule,T.BrowserStorageManagerModule,I.PersonalizeResultsButtonModule]})],R),r.SearchModule=R},{"../security/browserStorageManager.module":840,"../static/static.module":865,"./autocomplete.service":648,"./cheetah.service":661,"./citationTrails/citationTrails.module":662,"./controlledVocabulary/controlledVocabulary.module":672,"./didUMean/didUMean.module":675,"./facet/facet.module":678,"./fullView/fullView.module":687,"./highlight/highlight.service":770,"./personalization/personalizeResultsButton.module":775,"./resourceRecommender/resourceRecommender.module":777,"./rta.service":781,"./savedQueries/searchSavedQueries.module":786,"./search.directive":789,"./search.fields.service":790,"./search.service":792,"./searchBar/searchBar.module":795,"./searchResult/searchResult.module":803,"./searchResultParser.service":813,"./searchState.service":814,
"./topbar/topbar.module":826,"./virtualBrowse/virtualBrowse.module":835,"angular-material":17,"ng-metadata/core":362}],792:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("../infra/RecordUtil.service"),s=e("./cheetah.service"),c=e("./facet/facet.service"),l=e("./searchResultParser.service"),u=e("./searchBar/searchBar.service"),d=e("./searchState.service"),p=e("../nddUtils/configurationUtil.service"),f=e("../nddUtils/searchUtil.service"),h=e("../appConfig/appConfigForward"),m=e("../infra/widgets/alerts/alertFactory.service"),g=e("../security/jwtUtil.service"),v=e("./rta.service"),y=e("./search.fields.service"),b=e("../appConfig/appConfigForward"),S=e("ng-metadata/core"),_=e("./snippet/snippet.service"),w=e("./highlight/highlight.service"),E=e("../primoExplore/primoExploreStates.module"),T=e("../infra/restUtils.service"),O=e("../infra/annotations"),I=e("../security/userSessionManager.service"),P=e("./timesCited/timesCited.service"),R=e("../nddUtils/zoteroUtil"),C=e("../favorites/searchHistory/searchHistory.service"),A=e("../nddUtils/filterInstitution.service"),j=e("../journals/journals.service"),k=e("../journals/databases.service"),D=e("lodash/flatten"),$=(e("lodash/forEach"),e("he")),M=e("lodash/join"),x=e("lodash/remove"),F=(e("lodash/findIndex"),e("lodash/get")),L=function(){function e(e,t,r,n,i,o,a,s,c,l,u,d,p,f,g,v,y,S,_,w,E,T,O,I,P,R,C,A,j,k){this.$http=e,this.cheetah=t,this.$stateParams=r,this.searchHistoryService=n,this.searchResultParser=i,this.searchStateService=o,this.timesCitedService=a,this.facetService=s,this.limit=c,this.imagesBarLimit=l,this.configurationUtil=u,this.searchUtil=d,this.$state=p,this.$location=f,this.searchBar=g,this.searchFieldsService=v,this.jwtUtilService=y,this.alertService=S,this.rtaService=_,this.databasesService=w,this.snippetService=E,this.highlightsService=T,this.restUtils=O,this.$httpParamSerializer=I,this.userSessionManagerService=P,this.recordUtil=R,this.filterInstitution=C,this.$translate=A,this.journalsService=j,this.$rootScope=k,this.searchDone=!1,this.locationsTileConfiguration=h.getLocationsConfiguration(),this.vid=b.getVid(),this.reloadSearch=!1,this.limit=c,this.imagesBarLimit=l,this.query="",this.cameFromState="",this._signInAlert=this.alertService.create(m.ALERT_MSG_TYPE.SIGNIN)}return Object.defineProperty(e.prototype,"signInAlert",{get:function(){return this._signInAlert},enumerable:!0,configurable:!0}),e.prototype.resetSearchDone=function(){this.searchDone=!1},e.prototype.isSearchDone=function(){return this.searchDone},e.prototype.getItemAtIndex=function(e){var t=this.searchStateService.getItemAtIndex(e);return t?t:void(this.searchStateService.isSearchInProgress()||this.nextResults())},e.prototype.resetResultObject=function(){this.searchStateService.resetResultObject()},e.prototype.parseSearchResponse=function(e,t){void 0===t&&(t=!1);var r=this.searchResultParser.parseSearchResponse(e);this.searchStateService.setResultObject(r,t),1!==F(this.getSearchObject(),"getMore","")&&this.handleMetaLibMoreStatus(!0),this.facetService.setResult(this.getResultObject().facets)},e.prototype.performCitationTrailsSearch=function(e){var t=this.searchStateService.getSearchObject();return t.offset=0,t.facets=this.getFacetsFromUrl([e],!1),this.searchStateService.resetResultObject(),this.search(t,!0)},e.prototype.search=function(e,t){return e.sortby=this.setSortBy(e),e.getMore=e.getMore||0,t?this.searchStateService.setSearchObject(e):this.searchStateService.updateSearchObject(e),1!==F(this.getSearchObject(),"getMore","")?this.getSearchObject().metalibMoreStatus={}:this.handleMetaLibMoreStatus(!1),this._search()},e.prototype.setSortBy=function(e){return e.journals&&"letter"===e.journals.split(",")[0]||e.databases&&"letter"===e.databases.split(",")[0]?"title":e.sortby||"rank"},e.prototype.handleMetaLibMoreStatus=function(e){var t=this,r=this.getResultObject(),n=F(r,"data","");n.map(function(r,n){var i=F(r,"pnx.ranking.booster2");if(i){t.getSearchObject().metalibMoreStatus||(t.getSearchObject().metalibMoreStatus={});var o=++i[0];e&&(t.getSearchObject().metalibMoreStatus={},o=0),t.getSearchObject().metalibMoreStatus[r.pnx.control.recordid[0]]=o}return r})},e.prototype.setMessages=function(e,t){var r=this.configurationUtil.getBriefResultConfiguration().groupmessage,n=this.configurationUtil.getBriefResultConfiguration().displaysigninmsg;n&&(0===r&&e||1===r&&t)&&this._signInAlert.show("nui.signin_message",!1)},e.prototype.restSignInAlertMessage=function(){this._signInAlert.show("",!1)},e.prototype.loadResults=function(e,t){void 0===t&&(t=!1),this.parseSearchResponse(e,t)},e.prototype.nextResults=function(e){var t=this;if(void 0===e&&(e=!1),this.needToGetNextResults())return this.searchStateService.nextBulk(),this.getSearchObject().getMore=0,this._search(e).then(function(){if(e){var r=t.searchStateService.getSearchObject().offset;r!=t.$stateParams.offset&&t.updateOffsetInUrl(r)}})},e.prototype.updateOffsetInUrl=function(e){this.$location.search("offset",e)},e.prototype.jumpToPage=function(e){this.searchStateService.jumpToPage(e),this._search()},e.prototype.needToGetNextResults=function(){return this.searchStateService.hasNextBulk()},e.prototype.previousResults=function(){this.searchStateService.isNotFirstBulk()&&(this.searchStateService.previousBulk(),this._search())},e.prototype.getSearchObject=function(){return this.searchStateService.getSearchObject()},e.prototype.getResultObject=function(){return this.searchStateService.getResultObject()},e.prototype.selectItem=function(e){this.searchStateService.selectItem(e)},e.prototype.getSelectedItem=function(){return this.searchStateService.getSelectedItem()},e.prototype.addImagesResults=function(e){this.parseImagesSearchResponse(e)},e.prototype.parseImagesSearchResponse=function(e){var t=this.searchResultParser.parseImagesSearchResponse(e);this.searchStateService.addImagesToResultObject(t)},e.prototype.isSearchInProgress=function(){return this.searchStateService.isSearchInProgress()},e.prototype.getFrbrDisplay=function(){return this.configurationUtil.getBriefResultConfiguration().frbrdisplay},e.prototype.resetParameters=function(e){var t=this;void 0===e&&(e="");var r=this.getSearchObject()||{};this.getSearchObject().metalibMoreStatus={},this.$stateParams.offset?r.offset=parseInt(this.$stateParams.offset,10):r.offset=0,r.scope=this.searchUtil.urlParamScope||r.scope,r.tab=this.searchUtil.urlParamTab||r.tab,r.sortby=this.$stateParams.sortby;var n=this.getFacetsFromUrl(this.$stateParams.facet,!1);r.facets=n.concat(this.getFacetsFromUrl(this.$stateParams.mfacet,!0));for(var i=this.facetService.getStickyFacets(),o=function(e){x(r.facets,function(r){return t.facetService.isFacetEqual(r,e)}),r.facets.unshift(e)},a=0,s=i;a<s.length;a++){var c=s[a];o(c)}r.journals=this.$stateParams.journals,r.databases=this.$stateParams.databases,r.pcAvailability=this.calcPcAvailability()||r.pcAvailabilty,r.browseParams=this.$stateParams.browseParams,r.getMore=0;var l=this.$stateParams.query||r.query;Array.isArray(l)?r.query=M(l,";"):r.query=l;var u=this.$stateParams.mode;u&&"advanced"===u&&(r.mode="advanced",this.searchFieldsService.advancedSearch=!0);var d=this.$stateParams.pfilter;if(d)if(Array.isArray(d)&&(d=M(d,";")),this.configurationUtil.isSuprima())d&&(r.query+=";"+d);else{var p=d.replace("lang","facet_lang").replace("pfilter","facet_pfilter").replace("creationdate","facet_creationdate");p&&(r.query+=";"+p)}if("false"===F(this,["$stateParams","conVoc"],!0)&&(r.noConVoc=!0),l)return this.search(r,!0)},e.prototype.getFacetsFromUrl=function(e,t){var r=this;if(!e)return[];var n=D([e]),i=n.map(function(e){var n,i=e.split(",");t&&(n=i.pop());for(var o=3;o<i.length;o++)i[2]=i[2]+","+i[o];i[2]=$.decode(i[2]),i=i.slice(0,3);var a,s=r.facetService.displayedTypeFacet[i[0].replace("facet_","",1)]||"exact",c=r.filterInstitution.filterAndNormalizeDataFacets([{name:i[0],value:i[2]}]),l=i[2];c&&c.length>0&&(l=r.facetService.facetLabel(c[0]),a=c[0].displayValue);var u=r.facetService.getFacetLabelValue(i[0],i[2]);u&&(a=u);var d=r.facetService.getFacetLabel(i[0],s,l);r.$translate(d,[],"",d).then(function(e){p.label=e});var p={name:i[0],type:i[1],value:i[2],displayValue:a,displayedType:s,label:d,multiFacetGroupId:n,isMultiFacet:t,tooltip:""};return r.$translate(d,[],"",d).then(function(e){var t=r.$translate.instant("nui.facets.remove.tooltip");"searchcreationdate"===i[0]&&(i[0]="creationdate");var n=r.$translate.instant("facets.facet.facet_"+i[0]),o="range"===r.facetService.displayedTypeFacet[p.name]?r.facetService.getRangeFacetLabelFromValue(p.displayValue):r.$translate.instant(r.facetService.facetLabel(p));p.tooltip="frbrgroupid"!==p.name?t+n+" "+o:t+n}),p});return i},Object.defineProperty(e.prototype,"numOfLoadedResultBulks",{get:function(){return this.searchStateService.numOfLoadedResultBulks},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.resetParameters()},e.prototype.reloadSearchAfterSLI=function(){this.reloadSearch?(this.reloadSearch=!1,this.$state.reload()):this.reloadSearch=!0},e.prototype._search=function(e){var t=this;this.$rootScope.$on("silentLogin",function(){t.reloadSearchAfterSLI()}),this.searchDone=!0;var r=this.configurationUtil.isSuprima()?"N":"Y";this.searchStateService.setSkipDelivery(r);var n=this.getSearchObject();this.searchStateService.setSearchInProgress(!0),this.searchBar.setShowSignIn(!1);var i=this.getResultObject();window.appPerformance.timeStamps["before search api"]=Date.now();var o=this.cheetah.performSearch(n,i.info).then(function(r){if("Y"===t.searchStateService.getSkipDelivery()){var n=t.cheetah.restUrl+"/delivery?"+t.$httpParamSerializer(t.cheetah.searchData);t.$http.post(n,{records:r.data.docs}).then(function(e){var n=e.data;e.data.docs.forEach(function(t,i){r.data.docs[i].delivery=t.delivery,t["@rta_link"]&&e.data.docs[i]["@rta_link"]&&(r.data.docs[i]["@rta_link"]=e.data.docs[i]["@rta_link"],n.docs[i]["@rta_link"]=e.data.docs[i]["@rta_link"])});var i=n.timelog.FullEndDMDataDeltaTime;e.data.rtaResultsLink&&(r.data.rtaResultsLink=e.data.rtaResultsLink,n.rtaResultsLink=e.data.rtaResultsLink),window.appPerformance.serverTimeLog.FullEndDMDataDeltaTime=i,t.configurationUtil.getLocationsConfiguration()&&"none"!==t.configurationUtil.getLocationsConfiguration().rta&&t.rtaService.updateAvailability(n.docs)})}t.reloadSearch=!1,window.appPerformance.timeStamps["after search api"]=Date.now();var i=r.data;window.appPerformance.serverTimeLog=i.timelog;var o=t.$state.current;o.reloadOnSearch=!0,t.recordUtil.loadRecordsExtras(i.docs),t.$stateParams.journals||t.$stateParams.databases||t.$stateParams.browseScope||t.snippetService.updateSnippets(i.docs),t.loadResults(i,e),t.searchStateService.setSearchInProgress(!1),t.highlightsService.updateHighlights(i.highlights);var a="GUEST"===t.jwtUtilService.getDecodedToken().userGroup,s="true"!==t.jwtUtilService.getDecodedToken().onCampus;a&&t.setMessages(a,s),R.updateZoteroPlugin()},function(e){var r=e.data,n={docs:[],facets:[],info:{first:"1",last:"0",total:"0"}};t.loadResults(n),t.searchStateService.setSearchInProgress(!1),"Not Authorized"===r.errorMessage&&(t.reloadSearchAfterSLI(),t.searchBar.setShowSignIn(!0),t._signInAlert.hide())}).then(function(e){"browse"===t.$stateParams.mode||t.journalsService.isJournalSearch()||t.databasesService.isDBSearch()||t.searchHistoryService.updateSearchHistory()});return o},e.prototype.IsScopeLocal=function(e){var t;return t=e?window.appConfig["scopes-context-map"][e]:this.searchFieldsService.scope?window.appConfig["scopes-context-map"][this.searchFieldsService.scope]:"","L"===t},e.prototype.calcPcAvailability=function(){return this.$state.current.name===E.STATE_NAMES.CITATION_TRAILS||(this.$stateParams.pcAvailability||!this.facetService.showPcAvailabilityForScope(this.$stateParams.search_scope))},e.prototype.updatePageTitle=function(){var e=this.searchFieldsService.mainSearch;try{this.$translate(["nui.brief.title"],{query:e}).then(function(e){var t=document.getElementById("primoExploreTitle");t.innerHTML=e["nui.brief.title"],t.innerHTML=t.innerHTML.replace(/\s*\-\s*$/,"")})}catch(e){console.log("translation of 'nui.brief.title' is corrupt")}},e}();n([O.preventStateReload,i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],L.prototype,"updateOffsetInUrl",null),L=n([S.Injectable(),o(0,S.Inject("$http")),o(2,S.Inject("$stateParams")),o(8,S.Inject("limit")),o(9,S.Inject("imagesBarLimit")),o(12,S.Inject("$state")),o(13,S.Inject("$location")),o(23,S.Inject("$httpParamSerializer")),o(27,S.Inject("$translate")),o(29,S.Inject("$rootScope")),i("design:paramtypes",[Function,s.Cheetah,Object,C.SearchHistoryService,l.SearchResultParser,d.SearchStateService,P.TimesCitedService,c.FacetService,Object,Object,p.ConfigurationUtil,f.SearchUtil,Object,Object,u.SearchBarService,y.SearchFieldsService,g.JwtUtilService,m.AlertFactory,v.RtaService,k.DatabasesService,_.SnippetService,w.HighlightsService,T.RestUtils,Function,I.UserSessionManagerService,a.RecordUtil,A.FilterInstitution,Function,j.JournalsService,Object])],L),r.SearchService=L},{"../appConfig/appConfigForward":484,"../favorites/searchHistory/searchHistory.service":525,"../infra/RecordUtil.service":530,"../infra/annotations":531,"../infra/restUtils.service":567,"../infra/widgets/alerts/alertFactory.service":574,"../journals/databases.service":584,"../journals/journals.service":588,"../nddUtils/configurationUtil.service":596,"../nddUtils/filterInstitution.service":599,"../nddUtils/searchUtil.service":606,"../nddUtils/zoteroUtil":610,"../primoExplore/primoExploreStates.module":620,"../security/jwtUtil.service":842,"../security/userSessionManager.service":853,"./cheetah.service":661,"./facet/facet.service":679,"./highlight/highlight.service":770,"./rta.service":781,"./search.fields.service":790,"./searchBar/searchBar.service":796,"./searchResultParser.service":813,"./searchState.service":814,"./snippet/snippet.service":816,"./timesCited/timesCited.service":818,he:32,"lodash/findIndex":248,"lodash/flatten":251,"lodash/forEach":253,"lodash/get":255,"lodash/join":280,"lodash/remove":299,"ng-metadata/core":362}],793:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../nddUtils/configurationUtil.service"),c=e("../search.service"),l=e("../search.fields.service"),u=e("./searchBar.service"),d=e("../../appConfig/appConfigForward"),p=e("../../appConfig/appConfigForward"),f=e("../../appConfig/appConfigForward"),h=e("../../appConfig/appConfigForward"),m=e("../../appConfig/appConfigForward"),g=e("../../appConfig/appConfigForward"),v=e("../../appConfig/appConfigForward"),y=e("../../appConfig/appConfigForward"),b=e("../../infra/widgets/alerts/alertFactory.service"),S=e("../../analytics/primolytics.service"),_=e("../../nddUtils/smoothScrollUtil.service"),w=e("../../primoExplore/primoExploreStates.module"),E=e("../../security/jwtUtil.service"),T=e("lodash/uniq"),O=e("lodash/isEmpty"),I=e("lodash/flatten"),P=function(){function e(e,t,r,n,i,o,s,c,l,u,m,b){this.$mdDateLocaleProvider=e,this.searchService=t,this.searchFieldsService=r,this.$stateParams=n,this.searchBarService=i,this.alertService=o,this.primolyticsService=s,this.smoothScrollUtil=c,this.$state=l,this.configurationUtil=u,this.jwtUtilService=m,this.$scope=b,this.updateFindInDbEvent=new a.EventEmitter,this.searchTabs=d.getTabs(),this.scopes=p.getScopeList(),this.queryTerms=g.getQueryTerms(),this.searchConfig=f.getSearchConfiguration(),this.UIComponents=v.getUIComponents(),this.invokeAutomaticSearch=y.getAttributesMap().tabsRemote,this.vid=h.getVid(),this.limit=2,this.isDateRange=!1,this.error=!1,this.startYear="",this.endYear="",this.isStartsWithSearch=!1,this.yearRegex="-?\\d+"}return e.prototype.ngOnInit=function(){var e=this;this.errorCode="",this.initSelectedTab(),this.scopesOptions=this.getScopesOptionsByTab(this.selectedSearchTab),this.initSelectedScope(),this.dispalyServerMap={},this.serverDispalyMap={},this.filterTabByEmptyScope(),this.getComplexLine(),this.isAdvanced()?(this.fillComplexLineFromUrl(),this.fillPreFiltersFromUrl()):this.typedQuery&&(this.rowArray[0].searchQuery=this.typedQuery),this._signInAlert=this.alertService.create(b.ALERT_MSG_TYPE.SIGNIN),this._signInAlert.show("nui.search.tnsearch.error.authorization"),this.smoothScrollUtil.focusOn("advanced-search"),this.$scope.$watch(function(){return e.rowArray[0].searchQuery},function(){e.typedQuery=e.rowArray[0].searchQuery})},e.prototype.initSelectedScope=function(){return this.selectedScope?void(this.scope=this.selectedScope):void(this.isAdvanced()&&this.$stateParams.search_scope&&this.scopesOptions.indexOf(this.$stateParams.search_scope)===-1?this.error=!0:this.isAdvanced()&&this.$stateParams.search_scope&&this.scopesOptions.indexOf(this.$stateParams.search_scope)!==-1&&(this.scope=this.$stateParams.search_scope))},e.prototype.isAdvanced=function(){return"advanced"===this.$stateParams.mode},e.prototype.filterTabByEmptyScope=function(){var e=this;this.searchTabs=this.searchTabs.filter(function(t){if(!O(e.getScopesOptionsByTab(t)))return t})},e.prototype.initSelectedTab=function(){this.selectedTab?this.selectedSearchTab=this.selectedTab:this.$stateParams.tab&&this.searchTabs.indexOf(this.$stateParams.tab)===-1?this.error=!0:this.$stateParams.tab&&this.searchTabs.indexOf(this.$stateParams.tab)!==-1?this.selectedSearchTab=this.$stateParams.tab:this.$stateParams.tab||(this.selectedSearchTab=this.searchTabs[0])},e.prototype.initRowArray=function(){this.rowArray=[{boolOperator:this.boolOperator,searchOperator:this.searchOperator,searchCategory:this.searchCategory,searchQuery:""},{boolOperator:this.boolOperator,searchOperator:this.searchOperator,searchCategory:this.searchCategory,searchQuery:""},{boolOperator:this.boolOperator,searchOperator:this.searchOperator,searchCategory:this.searchCategory,searchQuery:""},{boolOperator:this.boolOperator,searchOperator:this.searchOperator,searchCategory:this.searchCategory,searchQuery:""},{boolOperator:this.boolOperator,searchOperator:this.searchOperator,searchCategory:this.searchCategory,searchQuery:""},{boolOperator:this.boolOperator,searchOperator:this.searchOperator,searchCategory:this.searchCategory,searchQuery:""},{boolOperator:this.boolOperator,searchOperator:this.searchOperator,searchCategory:this.searchCategory,searchQuery:""}]},e.prototype.filterEmpty=function(e){if(""!==e)return e},e.prototype.getScopesOptionsByTab=function(e){var t=this.scopes.map(function(t){if(t.tab===e)return t["scope-id"]}).filter(this.filterEmpty);return T(t)},e.prototype.setScopes=function(){this.scopesOptions=this.getScopesOptionsByTab(this.selectedSearchTab),this.scope=this.scopesOptions[0]},e.prototype.changeSearchFields=function(){this.clearForm=!1,this.errorCode="",this.setScopes(),this.getComplexLine(),"true"===this.invokeAutomaticSearch&&this.textAppears()&&this.search(),this.updateFindInDbEvent.emit(this.selectedSearchTab)},e.prototype.getComplexLine=function(){var e=this.rowArray;this.dispalyServerMap={},this.serverDispalyMap={},this.searchOperator="",this.serachOptions=[],this.searchCategory="",this.searchCategoryOptions=[],this.boolOperator="",this.boolOptions=[];var t=this.configurationUtil.getTile("SearchTileInterface-Advanced",m.getTabToTiles(this.selectedSearchTab)),r=this.searchConfig[t].qtvinstance,n=this.complexLines(r);if(n.length>0){var i=n[0],o=this.queryTerms[i];this.UIComponents.boolOperator||(this.UIComponents.boolOperator={defaultOption:"AND",displayOptions:["AND","OR","NOT"],options:["AND","OR","NOT"],indexFields:["AND","OR","NOT"]}),this.boolOperator=this.UIComponents.boolOperator.defaultOption,this.boolOptions=this.UIComponents.boolOperator.displayOptions,this.updateMapWithPrecisionBoolOperator(this.UIComponents.boolOperator);for(var a=o.map(function(e){if("freeText"!==e&&"boolOperator"!==e)return e}).filter(this.filterEmpty),s=0;s<a.length;s++)this.UIComponents[a[s]]&&"precisionOperator"===this.UIComponents[a[s]].type._string?(this.searchOperator=this.UIComponents[a[s]].defaultOption,this.serachOptions=this.UIComponents[a[s]].displayOptions,this.updateMapWithPrecisionBoolOperator(this.UIComponents[a[s]])):this.UIComponents[a[s]]&&"scope"===this.UIComponents[a[s]].type._string&&(this.searchCategory=this.getDefaultSerachCategory(this.UIComponents[a[s]].defaultOption,this.UIComponents[a[s]].displayOptions),this.searchCategoryOptions=this.UIComponents[a[s]].displayOptions,this.updateMapWithIndexField(this.UIComponents[a[s]]));this.initRowArray(),e&&this.copyRowsFromTabToTab(e)}var c=this.language?this.language.selection:"",l=this.materialType?this.materialType.selection:"",u=this.publicationData?this.publicationData.selection:"",d=this.isDateRange?this.startDay.selection:"",p=this.isDateRange?this.startMonth.selection:"",f=this.isDateRange?this.endDay.selection:"",h=this.isDateRange?this.endMonth.selection:"",g=this.isDateRange&&this.startYear?this.startYear:"",v=this.isDateRange&&this.endYear?this.endYear:"";this.language=this.getPreFilterByType(r,".language"),this.materialType=this.getPreFilterByType(r,".mediaType"),this.publicationData=this.getPreFilterByType(r,".publicationData"),this.isDateRange=this.getDateRangeFilter(r),!O(this.publicationData)&&this.isDateRange&&(this.publicationData.displayOptions.splice(1,0,"specificDate"),this.publicationData.options.splice(1,0,"specificDate")),c&&!O(this.language)&&this.language.displayOptions.indexOf(c)!==-1&&(this.language.selection!==c&&(this.clearForm=!0),this.language.selection=c),l&&!O(this.materialType)&&this.materialType.displayOptions.indexOf(l)!==-1&&(this.materialType.selection!==l&&(this.clearForm=!0),this.materialType.selection=l),u&&!O(this.publicationData)&&this.publicationData.displayOptions.indexOf(u)!==-1&&(this.publicationData.selection!==u&&(this.clearForm=!0),this.publicationData.selection=u),this.isDateRange&&(d&&(this.startDay.selection=d),p&&(this.startMonth.selection=p),f&&(this.endDay.selection=f),h&&(this.endMonth.selection=h),this.startYear=g,this.endYear=v,this.isDate()&&(this.clearForm=!0,O(this.publicationData)||u||(this.publicationData.selection="specificDate")))},e.prototype.copyRowsFromTabToTab=function(e){for(var t=0,r=0;r<this.limit;r++)e[r].searchQuery&&(this.boolOptions.indexOf(e[r].boolOperator)!==-1&&(this.rowArray[r].boolOperator=e[r].boolOperator),this.serachOptions.indexOf(e[r].searchOperator)!==-1&&(this.rowArray[r].searchOperator=e[r].searchOperator),this.searchCategoryOptions.indexOf(e[r].searchCategory)!==-1&&(this.rowArray[r].searchCategory=e[r].searchCategory),this.rowArray[r].searchQuery=e[r].searchQuery,t=r,this.clearForm=!0);this.limit=Math.max(2,t+1)},e.prototype.fillComplexLineFromUrl=function(){var e=this,t=this.$stateParams.query;t&&(t=I([t]),this.rowArray[0].boolOperator="AND",t.forEach(function(t,r,n){var i=t.split(",");e.rowArray[r].searchCategory=e.serverDispalyMap[i[0]]?e.serverDispalyMap[i[0]].display:i[0],e.rowArray[r].searchOperator=e.serverDispalyMap[i[1]]?e.serverDispalyMap[i[1]].display:i[1];var o=i[2];if(i.length>3){var a=i.slice(2,i.length-1);o=a.join(",")}e.rowArray[r].searchQuery=o,r+1<e.rowArray.length&&(e.rowArray[r+1].boolOperator=i[i.length-1]?e.serverDispalyMap[i[i.length-1]].display:"AND")}),t.length>2&&(this.limit=t.length))},e.prototype.fillPreFiltersFromUrl=function(){var e=this,t=this.$stateParams.pfilter;if(t){t=I([t]);var r=!1;t.forEach(function(t,n,i){var o=t.split(",");"lang"===o[0]?e.language.selection=e.getPreFilterFordisplay(e.language,o[2]):"pfilter"===o[0]||"rtype"===o[0]?e.materialType.selection=e.getPreFilterFordisplay(e.materialType,o[2]):"creationdate"===o[0]?e.publicationData.selection=e.getPreFilterFordisplay(e.publicationData,o[2]):"dr_s"===o[0]||"cdate"===o[0]&&!r?(O(e.publicationData)||(e.publicationData.selection="specificDate"),e.startYear=o[2].substring(0,o[2].length-4),e.startMonth.selection=o[2].substring(o[2].length-4,o[2].length-2),e.startDay.selection=o[2].substring(o[2].length-2,o[2].length),r=!0):("dr_e"===o[0]||"cdate"===o[0]&&r)&&(e.endYear=o[2].substring(0,o[2].length-4),e.endMonth.selection=o[2].substring(o[2].length-4,o[2].length-2),e.endDay.selection=o[2].substring(o[2].length-2,o[2].length))})}},e.prototype.updateMapWithIndexField=function(e){var t=this;e.displayOptions&&e.displayOptions.forEach(function(r,n,i){t.dispalyServerMap[r]={send:e.indexFields[n]}}),e.indexFields&&e.indexFields.forEach(function(r,n,i){t.serverDispalyMap[r]={display:e.displayOptions[n]}})},e.prototype.updateMapWithPrecisionBoolOperator=function(e){var t=this;e.displayOptions&&e.displayOptions.forEach(function(r,n,i){t.dispalyServerMap[r]={send:e.options[n]}}),e.options&&e.options.forEach(function(r,n,i){t.serverDispalyMap[r]={display:e.displayOptions[n]}})},e.prototype.getDefaultSerachCategory=function(e,t){var r="";return r=t.indexOf("any")!==-1?"any":e.length>0?e:t[0]},e.prototype.showDateRange=function(){return!(!O(this.publicationData)||O(this.isDateRange))},e.prototype.getPreFilterByType=function(e,t){var r=this,n=e.map(function(e){if(e.qtvid.includes(t)&&r.queryTerms[e.qtvid])return r.UIComponents[r.queryTerms[e.qtvid][0]]}).filter(this.filterEmpty)[0];if(n){var i=T(n.displayOptions.slice()),o=n.defaultOption?n.defaultOption:i[0],a={label:n.type._string,options:T(n.options.slice()),displayOptions:i,indexField:n.indexFields[0],defaultOption:o,selection:o};return a}return{}},e.prototype.getDateRangeFilter=function(e){var t=this,r=e.map(function(e){if(e.qtvid.includes(".date_range"))return t.queryTerms[e.qtvid]}).filter(this.filterEmpty);if(O(r))return!1;var n=r[0].map(function(e){return t.UIComponents[e]});return this.startDay=this.getDate(n,"drStartDay"),this.startDay.selection=this.startDay.defaultOption,this.endDay=this.getDate(n,"drEndDay"),this.endDay.selection=this.endDay.defaultOption,this.startMonth=this.getDate(n,"drStartMonth"),this.startMonth.selection=this.startMonth.defaultOption,this.endMonth=this.getDate(n,"drEndMonth"),this.endMonth.selection=this.endMonth.defaultOption,this.startYear="",this.endYear="",!0},e.prototype.isDateValid=function(){var e="";if(this.startYear=this.changeDate(this.startYear),this.endYear=this.changeDate(this.endYear),"start_day"!==this.startDay.selection&&"start_month"===this.startMonth.selection||"start_month"!==this.startMonth.selection&&""===this.startYear)e="search.search.error.startDateInvalid";else if("end_day"!==this.endDay.selection&&"end_month"===this.endMonth.selection||"end_month"!==this.endMonth.selection&&""===this.endYear)e="search.search.error.endDateInvalid";else if(this.isLegalDate(this.startYear)&&this.isLegalDate(this.endYear))if(""!==this.startYear&&""!==this.endYear){var t=parseInt(this.startYear),r=parseInt(this.endYear);r<t?e="search.search.error.startLaterThanEnd":r===t&&"start_month"!==this.startMonth.selection&&"end_month"!==this.endMonth.selection&&(this.endMonth.selection<this.startMonth.selection?e="search.search.error.startLaterThanEnd":this.startMonth.selection===this.endMonth.selection&&"start_day"!=this.startDay.selection&&"end_day"!=this.endDay.selection&&this.endDay.selection<this.startDay.selection&&(e="search.search.error.startLaterThanEnd"))}else""===this.startYear&&""!==this.endYear&&this.isBcDate(this.endYear)&&(e="search.search.error.startLaterThanEnd");else e="search.search.error.yearOutOfRange";return e},e.prototype.isLegalDate=function(e){return""==e||!(this.isBcDate(e)&&e.length>5||!this.isBcDate(e)&&e.length>4&&"0"!==e.substring(0,1))},e.prototype.isBcDate=function(e){return e&&0===e.indexOf("-")},e.prototype.isDate=function(){return"start_day"!==this.startDay.selection||"start_month"!==this.startMonth.selection||""!==this.startYear||"end_day"!==this.endDay.selection||"end_month"!==this.endMonth.selection||""!==this.endYear},e.prototype.getDate=function(e,t){return e.filter(function(e){if(e.type._string===t)return e})[0]},e.prototype.complexLines=function(e){var t=e.map(function(e){if(e.qtvid.includes("searchbox_complex"))return e.qtvid}).filter(this.filterEmpty);return t},e.prototype.incrementLimit=function(){this.limit+=1,this.clearForm=!0},e.prototype.clearSearchForm=function(){this.initRowArray(),this.scope=this.scopesOptions[0],this.clearForm=!1,this.errorCode="",this.limit=2,O(this.language)||(this.language.selection=this.language.defaultOption),O(this.materialType)||(this.materialType.selection=this.materialType.defaultOption),O(this.publicationData)||(this.publicationData.selection=this.publicationData.defaultOption),this.isDateRange&&(this.startDay.selection="start_day",this.startMonth.selection="start_month",this.startYear="",this.endDay.selection="end_day",this.endMonth.selection="end_month",this.endYear="")},e.prototype.specificDate=function(){return!!(O(this.publicationData)&&this.isDateRange||!O(this.publicationData)&&"specificDate"===this.publicationData.selection)},e.prototype.onChange=function(){this.clearForm=!0},e.prototype.changeOperator=function(e){"startswith"===this.rowArray[e].searchOperator&&this.searchCategoryOptions.indexOf("title")!==-1&&(this.rowArray[e].searchCategory="title"),this.clearForm=!0,this.changeSortbyForOperator(this.rowArray[e].searchOperator)},e.prototype.changeSortbyForOperator=function(e){switch(e){case"startswith":this.sortby="title";break;case"contains":this.sortby="rank";break;case"exact":this.sortby="rank";break;default:this.sortby="rank"}},e.prototype.textAppears=function(){return!!(this.rowArray[0].searchQuery||this.rowArray[1].searchQuery||this.rowArray[2].searchQuery||this.rowArray[3].searchQuery||this.rowArray[4].searchQuery||this.rowArray[5].searchQuery||this.rowArray[6].searchQuery)},e.prototype.search=function(){if(this.errorCode="",this.specificDate()&&this.isDate()&&(this.errorCode=this.isDateValid()),!this.errorCode){var e=this.createQuery();this.searchFieldsService.scope=this.scope,this.selectedScope=this.scope,this.searchFieldsService.tab=this.selectedSearchTab,this.selectedTab=this.selectedSearchTab,this.showTabAndScopes=!0,this.typedQuery=this.rowArray[0].searchQuery,this.goToSearch(e.query)}},e.prototype.goToSearch=function(e){var t=e.split(";"),r=t.filter(function(e){return!e.match("(facet_|dr_s|dr_e|lang|rtype|cdate).*,exact,.*,AND")}),n=t.filter(function(e){return e.match("(facet_|dr_s|dr_e|lang|rtype|cdate).*,exact,.*,AND")}).map(function(e){return e.replace("facet_","")}),i={mode:"advanced",vid:this.vid,query:r,pfilter:n,tab:this.selectedTab,search_scope:this.selectedScope,facet:[],mfacet:[],offset:0};this.sortby&&(i.sortby=this.sortby,this.sortby=""),this.searchFieldsService.searchParams=i,this.$state.go(w.STATE_NAMES.SEARCH,i,{reload:w.STATE_NAMES.SEARCH})},e.prototype.createQuery=function(){var e=this.getQueriesWithText();return O(this.language)||"all_items"===this.language.selection||"any"===this.language.selection||(e+=this.language.indexField+",exact,"+this.getPreFilterForServer(this.language)+",AND;"),O(this.materialType)||"all_items"===this.materialType.selection||"any"===this.materialType.selection||(e+=this.materialType.indexField+",exact,"+this.getPreFilterForServer(this.materialType)+",AND;"),
O(this.publicationData)||"all_items"===this.publicationData.selection||"specificDate"===this.publicationData.selection?this.specificDate()&&this.isDate()&&(this.fillEmptyDateFields(),this.startYear=this.zeroPadYear(this.startYear),this.endYear=this.zeroPadYear(this.endYear),e+=this.startDay.indexFields[0]+",exact,"+this.startYear+this.getPreFilterForServer(this.startMonth)+this.getPreFilterForServer(this.startDay)+",AND;",e+=this.endDay.indexFields[0]+",exact,"+this.endYear+this.getPreFilterForServer(this.endMonth)+this.getPreFilterForServer(this.endDay)+",AND;"):e+=this.publicationData.indexField+",exact,"+this.getPreFilterForServer(this.publicationData)+",AND;",e=e.slice(0,-1),console.log("query"),console.log(e),{query:e}},e.prototype.changeDate=function(e){return e?e&&e.match("^-?0{0,4}0$")&&(e="0000"):e="",e},e.prototype.zeroPadYear=function(e){var t=this.isBcDate(e);return t&&(e=e.substr(1)),1===e.length?e="000"+e:2===e.length?e="00"+e:3===e.length?e="0"+e:5===e.length&&(e=e.slice(1)),t&&(e="-"+e),e},e.prototype.fillEmptyDateFields=function(){var e=this.isBcDate(this.startYear),t=this.isBcDate(this.endYear);("start_day"===this.startDay.selection||e)&&(this.startDay.selection="01"),("start_month"===this.startMonth.selection||e)&&(this.startMonth.selection="01"),""===this.startYear&&(this.startYear="0000"),("end_day"===this.endDay.selection||t)&&(this.endDay.selection="31"),("end_month"===this.endMonth.selection||t)&&(this.endMonth.selection="12"),""===this.endYear&&(this.endYear="9999")},e.prototype.getQueriesWithText=function(){var e=this,t=this.rowArray.filter(function(e){return e.searchQuery}),r="";return this.isStartsWithSearch=!1,t.forEach(function(n,i,o){t[i].searchQuery&&("startswith"===n.searchOperator&&(e.isStartsWithSearch=!0),r+=e.getParamForServer(t[i].searchCategory)+","+e.getParamForServer(e.getSearchOperator(t[i].searchOperator))+","+t[i].searchQuery.split(";").join(" ")+",",r+=i+1<t.length?e.getParamForServer(t[i+1].boolOperator)+";":"AND;")}),r},e.prototype.getPreFilterForServer=function(e){var t=e.displayOptions.indexOf(e.selection);return t!==-1?e.options[t]:e},e.prototype.getPreFilterFordisplay=function(e,t){var r=e.options.indexOf(t);return r===-1?(this.error=!0,e.selection):e.displayOptions[r]},e.prototype.getParamForServer=function(e){return this.dispalyServerMap[e]?this.dispalyServerMap[e].send:e},e.prototype.getSearchOperator=function(e){return""!==e?e:"contains"},e.prototype.getCodeForPublicationDate=function(e){return"specificDate"===e?"nui.search-advanced.publicationDate.option.":"search-advanced.publicationDate.option."},e.prototype.firstQuery=function(){for(var e=0;e<this.rowArray.length;e++)if(this.rowArray[e].searchQuery)return e;return-1},Object.defineProperty(e.prototype,"signInAlert",{get:function(){return this._signInAlert},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showSignIn",{get:function(){return this.searchBarService.showSignIn},enumerable:!0,configurable:!0}),e.prototype.isSignedIn=function(){var e=this.jwtUtilService.getDecodedToken().userGroup;return"GUEST"!==e},e}();n([a.Input(),i("design:type",String)],P.prototype,"selectedScope",void 0),n([a.Input(),i("design:type",String)],P.prototype,"selectedTab",void 0),n([a.Input(),i("design:type",Boolean)],P.prototype,"showTabAndScopes",void 0),n([a.Input(),i("design:type",String)],P.prototype,"typedQuery",void 0),n([a.Output(),i("design:type",Object)],P.prototype,"updateFindInDbEvent",void 0),n([S.beacon({p:"search",op:"advancedSearch"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],P.prototype,"search",null),P=n([a.Component({providers:[],selector:"prm-advanced-search",templateUrl:"components/search/searchBar/advanced-search-header.html"}),o(0,a.Inject("$mdDateLocale")),o(3,a.Inject("$stateParams")),o(8,a.Inject("$state")),o(11,a.Inject("$scope")),i("design:paramtypes",[Object,c.SearchService,l.SearchFieldsService,Object,u.SearchBarService,b.AlertFactory,S.PrimolyticsService,_.SmoothScrollUtil,Object,s.ConfigurationUtil,E.JwtUtilService,Object])],P),r.PrmAdvancedSearch=P},{"../../analytics/primolytics.service":480,"../../appConfig/appConfigForward":484,"../../infra/widgets/alerts/alertFactory.service":574,"../../nddUtils/configurationUtil.service":596,"../../nddUtils/smoothScrollUtil.service":607,"../../primoExplore/primoExploreStates.module":620,"../../security/jwtUtil.service":842,"../search.fields.service":790,"../search.service":792,"./searchBar.service":796,"lodash/flatten":251,"lodash/isEmpty":268,"lodash/uniq":321,"ng-metadata/core":362}],794:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../search.fields.service"),c=e("./searchBar.service"),l=e("../autocomplete.service"),u=e("../../infra/widgets/alerts/alertFactory.service"),d=e("../../infra/annotations"),p=e("../../appConfig/appConfigForward"),f=e("../../appConfig/appConfigForward"),h=e("../../nddUtils/smoothScrollUtil.service"),m=e("../../nddUtils/stringUtils.service"),g=e("../../infra/mediaQueries.service"),v=e("../../primoExplore/primoExploreStates.module"),y=e("../../nddUtils/searchUtil.service"),b=e("./tabsAndScopesSelector/tabsAndScopesSelector.service"),S=e("../../security/jwtUtil.service"),_=e("../../appConfig/appConfigForward"),w=e("../search.service"),E=e("../../infra/storageUtil.service"),T=(e("lodash/isEmpty"),8),O=e("lodash/find"),I=function(){function e(e,t,r,n,i,o,s,c,l,d,f,h,m,g,y,b,S,_,w,E,O){var I=this;this.$stateParams=e,this.$location=t,this.scopesIcons=r,this.$scope=n,this.$translate=i,this.searchBoxIcons=o,this.$mdDialog=s,this.$state=c,this.$timeout=l,this.mediaQueries=d,this.searchFieldsService=f,this.autocompleteService=h,this.searchBarService=m,this.alertService=g,this.smoothScrollUtil=y,this.stringUtil=b,this.searchUtil=S,this.tabsAndScopesSelectorService=_,this.jwtUtilService=w,this.searchService=E,this.storageUtil=O,this.searchEvent=new a.EventEmitter,this.showTabsAndScopes=!1,this.searchScopesMap=p.getSearchScopesMap(),this.searchOperator="any,contains,",this.vid=p.getVid(),this.tabs=[],Object.keys(this.searchScopesMap).slice(0,T).forEach(function(e,t){var r="tabbedmenu."+e+".label",n={tab:e,displayName:""};I.$translate(r).then(function(e){n.displayName=e}),I.tabs.push(n)}),i("nui.search.placeholder").then(function(e){I._placeHolderText=e}),this.initStateFromUrl(e),this.$scope.$on("$stateChangeSuccess",function(t,r){r.name===v.STATE_NAMES.SEARCH&&I.initStateFromUrl(e)}),this.scopesDialerConfiguration={display:!1,isOpen:!1,direction:"down",iconsArray:r,autoHideToolTip:!1,toolTipDelay:100,toolTipDirection:"right",tooTipDefaultOpen:!1},this._signInAlert=this.alertService.create(u.ALERT_MSG_TYPE.SIGNIN),this._signInAlert.show("nui.search.tnsearch.error.authorization",!0),this.updateShowFindDBButton()}return e.prototype.ngOnInit=function(){this.autocompleteLength=this.calculateAtocompleteLength()},e.prototype.calculateAtocompleteLength=function(){return this.mediaQueries.xs?51:this.mediaQueries.sm?58:this.mediaQueries.md?77:this.mediaQueries.lgPlus?105:this.mediaQueries.lg?94:114},e.prototype.initStateFromUrl=function(e){var t=this,r=this.searchUtil.getValidScope(e.search_scope),n=e.tab;return e.query||n||r?(n?(this.selectedTab=n,r?this.scopeField=r:this.scopeField=this.searchScopesMap[this.selectedTab][0]["scope-id"]):r?(this.scopeField=r,this.selectedTab=O(f.getScopeList(),function(e){return e["scope-id"]===t.scopeField}).tab):(this.selectedTab=this.tabs[0].tab,this.scopeField=this.searchScopesMap[this.selectedTab][0]["scope-id"]),this.searchFieldsService.tab=this.selectedTab,void(this.showTabsAndScopes=!0)):(this.selectedTab=this.tabs[0].tab,void(this.scopeField=this.searchScopesMap[this.selectedTab][0]["scope-id"]))},e.prototype.showTabsAndScopesVal=function(){return 0==this.showTabsAndScopes?1===this.tabs.length:this.showTabsAndScopes},e.prototype.switchAdvancedSearch=function(){var e=this;this.searchFieldsService.advancedSearch=!this.searchFieldsService.advancedSearch,this.searchFieldsService.advancedSearch||this.smoothScrollUtil.focusOn("searchBar"),this.$timeout(function(){if(1==e.advancedSearch)return document.querySelector("#advanced-search").focus()},100)},Object.defineProperty(e.prototype,"signInAlert",{get:function(){return this._signInAlert},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"advancedSearch",{get:function(){return this.searchFieldsService.advancedSearch},enumerable:!0,configurable:!0}),e.prototype.parseResults=function(e){var t=this,r=[];if(this.tabs.length>1&&r.push(this.tabs),e.length>0){var n=e.slice(0,T-this.tabs.length).map(function(e){var r=t.autocompleteLength,n=t.stringUtil.abbreviate(e,r),i={display:e,shortDisplay:n};return i});r.push(n)}return r},e.prototype.autocompleteQuery=function(e){var t=this;this.typedQuery=e;var r=document.getElementsByTagName("body")[0];this.autocompleteService.isAutocompleteEnabledFor(this.scopeField)?("false"===this.hasSearchResults&&r.setAttribute("style","overflow-x: hidden"),this.autoCompleteItems=this.autocompleteService.search(e,this.scopeField).then(function(e){var r=t.parseResults(e);return r},function(){var e=t.parseResults([]);return e})):this.autoCompleteItems=this.parseResults([])},e.prototype.onSelectItem=function(){this.selectedItem&&(this.selectedItem.tab&&(this.selectedTab=this.selectedItem.tab,this.scopeField=this.searchScopesMap[this.selectedTab][0]["scope-id"]),this.onSubmit(),this.updateShowFindDBButton())},e.prototype.onSubmit=function(){if(this.showTabsAndScopes=!0,this.mainSearchField){window.appPerformance.timeStamps["search button clicked"]=Date.now(),this.typedQuery=this.mainSearchField,this.autoCompleteItems=[],this._scopeField||this.selectedTab||(this.selectedTab=this.tabs[0].tab,this.scopeField=this.searchScopesMap[this.selectedTab][0]["scope-id"]),this.searchFieldsService.tab=this.selectedTab,this.searchFieldsService.scope=this.scopeField,this.$location.search().tab!==this.selectedTab;var e={mainSearchField:this.searchOperator+this.mainSearchField,scopeField:this.scopeField,tab:this.selectedTab,mode:null,facet:[],mfacet:[],pfilter:[]};this.searchEvent.emit(e);var t=this.$scope;t.$$childHead.$mdAutocompleteCtrl.hidden=!0}},e.prototype.addTabToUrl=function(){this.$location.search("tab",this.searchFieldsService.tab)},Object.defineProperty(e.prototype,"mainSearchField",{get:function(){return this.searchFieldsService.mainSearch},set:function(e){this.searchFieldsService.mainSearch=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scopeField",{get:function(){return this._scopeField},set:function(e){this._scopeField=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedTab",{get:function(){return this._selectedTab},set:function(e){this._selectedTab=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoCompleteItems",{get:function(){return this.searchBarService.autoCompleteItems},set:function(e){this.searchBarService.autoCompleteItems=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showSignIn",{get:function(){return this.searchBarService.showSignIn},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"placeHolderText",{get:function(){return this._placeHolderText},enumerable:!0,configurable:!0}),e.prototype.updateShowFindDBButton=function(e){var t=e?e:this.selectedTab;this.tabsAndScopesSelectorService.updateIsRemoteTab(t);var r=!!p.getFindInDbPerTabs()[t]&&p.getFindInDbPerTabs()[t];this.isShowFindDBButton=this.tabsAndScopesSelectorService.isRemoteTab||r},e.prototype.onFindDBDialogClose=function(e){var t=this;this.tabsAndScopesSelectorService.updateScopes().then(function(r){if(p.updateSearchScopesMap(r.data),e&&e.selectedSetId){var n="Current Session"===e.selectedSetId?"Selected_Databases":e.selectedSetId,i=t.tabsAndScopesSelectorService.findTabByScopeName(n);if(!i)return void console.log('error could not find "find DB" selected scope in any tab');var o=t.$state.params;o.tab=i,o.search_scope=n,t.$state.transitionTo(t.$state.current,o,{reload:!0})}else t.$state.reload()})},e.prototype.openFdbIframe=function(){var e=this,t=this,r=this.$mdDialog.show({bindToController:!0,controller:function(){this.displayFDBNothingSelectedErr=!1;var e=t.jwtUtilService.getPdsHandle(),r=e?"":t.jwtUtilService.getDecodedToken().user;this.getUrl=function(){return t.$location.protocol()+"://"+t.$location.host()+":"+t.$location.port()+"/primo_library/libweb/action/searchDB.do?fn=nuiSearchDbIframe&vid="+t.vid+"&pds_handle="+e+"&guestID="+r},this.closeDialog=function(){t.$mdDialog.hide()},this.goToSearch=function(){var e=t.storageUtil.localStorage.getItem("selectedSetId");if(e){t.storageUtil.localStorage.removeItem("selectedSetId");var r=JSON.parse(e);t.$mdDialog.hide(r)}else this.displayFDBNothingSelectedErr=!0}},controllerAs:"ctrl",templateUrl:"components/search/topbar/mainMenu/find-db-dialog-template.html"});r.then(function(t){e.onFindDBDialogClose(t)})},Object.defineProperty(e.prototype,"facetToLeft",{get:function(){var e=_.getAttributesMap();return"left"===e.selectedFacetLocation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isShowFindDBButton",{get:function(){return this._isShowFindDBButton},set:function(e){this._isShowFindDBButton=e},enumerable:!0,configurable:!0}),e}();n([a.Input(),i("design:type",String)],I.prototype,"hasSearchResults",void 0),n([a.Output(),i("design:type",Object)],I.prototype,"searchEvent",void 0),n([d.preventStateReload,i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],I.prototype,"addTabToUrl",null),I=n([a.Component({selector:"prm-search-bar",templateUrl:"components/search/searchBar/search-bar.html"}),o(0,a.Inject("$stateParams")),o(1,a.Inject("$location")),o(2,a.Inject("scopesIcons")),o(3,a.Inject("$scope")),o(4,a.Inject("$translate")),o(5,a.Inject("searchBoxIcons")),o(6,a.Inject("$mdDialog")),o(7,a.Inject("$state")),o(8,a.Inject("$timeout")),i("design:paramtypes",[Object,Object,Array,Object,Function,Array,Object,Object,Function,g.MediaQueries,s.SearchFieldsService,l.AutoComplete,c.SearchBarService,u.AlertFactory,h.SmoothScrollUtil,m.StringUtils,y.SearchUtil,b.TabsAndScopesSelectorService,S.JwtUtilService,w.SearchService,E.StorageUtil])],I),r.PrmSearchBar=I},{"../../appConfig/appConfigForward":484,"../../infra/annotations":531,"../../infra/mediaQueries.service":562,"../../infra/storageUtil.service":571,"../../infra/widgets/alerts/alertFactory.service":574,"../../nddUtils/searchUtil.service":606,"../../nddUtils/smoothScrollUtil.service":607,"../../nddUtils/stringUtils.service":608,"../../primoExplore/primoExploreStates.module":620,"../../security/jwtUtil.service":842,"../autocomplete.service":648,"../search.fields.service":790,"../search.service":792,"./searchBar.service":796,"./tabsAndScopesSelector/tabsAndScopesSelector.service":798,"lodash/find":247,"lodash/isEmpty":268,"ng-metadata/core":362}],795:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=(e("angular-material"),e("./searchBar.service"));e("angular-elastic-input");var a=e("./advancedSearch.directive"),s=e("./tabsAndScopesSelector/tabsAndScopesSelector.service"),c=e("./tabsAndScopesSelector/tabsAndScopesSelector.directive"),l=e("../../appConfig/appConfig.module"),u=e("./searchBar.directive"),d=function(){function e(){}return e}();d=n([i.NgModule({declarations:[a.PrmAdvancedSearch,u.PrmSearchBar,c.PrmTabsAndScopesSelector],providers:[o.SearchBarService,s.TabsAndScopesSelectorService],imports:["puElasticInput",l.default.name]})],d),r.SearchBarModule=d},{"../../appConfig/appConfig.module":482,"./advancedSearch.directive":793,"./searchBar.directive":794,"./searchBar.service":796,"./tabsAndScopesSelector/tabsAndScopesSelector.directive":797,"./tabsAndScopesSelector/tabsAndScopesSelector.service":798,"angular-elastic-input":10,"angular-material":17,"ng-metadata/core":362}],796:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=function(){function e(){this._showSignIn=!1}return Object.defineProperty(e.prototype,"autoCompleteItems",{get:function(){return this._autoCompleteItems},set:function(e){this._autoCompleteItems=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showSignIn",{get:function(){return this._showSignIn},enumerable:!0,configurable:!0}),e.prototype.setShowSignIn=function(e){this._showSignIn=e},e}();a=n([o.Injectable(),i("design:paramtypes",[])],a),r.SearchBarService=a},{"ng-metadata/core":362}],797:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("./tabsAndScopesSelector.service"),s=e("../../../appConfig/appConfigForward"),c=e("../../../nddUtils/configurationUtil.service"),l=function(){function e(e,t){this.tabsAndScopesSelectorService=e,this.configurationUtil=t,this.searchScopesMap=s.getSearchScopesMap(),this.updateFindInDbEvent=new o.EventEmitter,this.updateScopes(),this._tabOptions=Object.keys(this.searchScopesMap)}return e.prototype.ngAfterViewInit=function(){this.tab=this.tab||this._tabOptions[0],this._scopeOptions=this.searchScopesMap[this.tab],this.tabsAndScopesSelectorService.updateIsRemoteTab(this.tab)},Object.defineProperty(e.prototype,"scope",{get:function(){return this.selectedScope},set:function(e){this.selectedScope=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tab",{get:function(){return this.selectedTab},set:function(e){this.selectedTab=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabOptions",{get:function(){return this._tabOptions},enumerable:!0,configurable:!0}),e.prototype.onTabChange=function(){this.scope=this.scopeOptions[0]["scope-id"],this.tabsAndScopesSelectorService.updateIsRemoteTab(this.tab),this.updateFindInDbEvent.emit(this.tab)},e.prototype.showScopesSelect=function(){return this.scopeOptions.length>1},e.prototype.showTabsSelect=function(){return this.tabOptions.length>1},Object.defineProperty(e.prototype,"scopeOptions",{get:function(){return this.searchScopesMap[this.tab]},enumerable:!0,configurable:!0}),e.prototype.updateScopes=function(){var e=this;this.configurationUtil.isSuprima()||this.tabsAndScopesSelectorService.updateScopes().then(function(t){s.updateSearchScopesMap(t.data),e.searchScopesMap=s.getSearchScopesMap()})},e}();n([o.Input(),i("design:type",String)],l.prototype,"selectedTab",void 0),n([o.Input(),i("design:type",String)],l.prototype,"selectedScope",void 0),n([o.Output(),i("design:type",Object)],l.prototype,"updateFindInDbEvent",void 0),l=n([o.Component({selector:"prm-tabs-and-scopes-selector",templateUrl:"components/search/searchBar/tabsAndScopesSelector/tabs-and-scopes-selector.html"}),i("design:paramtypes",[a.TabsAndScopesSelectorService,c.ConfigurationUtil])],l),r.PrmTabsAndScopesSelector=l},{"../../../appConfig/appConfigForward":484,"../../../nddUtils/configurationUtil.service":596,"./tabsAndScopesSelector.service":798,"ng-metadata/core":362}],798:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../appConfig/appConfigForward"),c=e("../../../appConfig/appConfigForward"),l=e("lodash/findKey"),u=e("lodash/findIndex"),d=function(){function e(e,t){this.$http=e,this.restBaseURLs=t,this._isRemoteTab=!1}return e.prototype.updateScopes=function(){return this.scopesUrl=this.restBaseURLs.scopeListBaseURL+"/"+s.getVid()+"/scopes",this.$http({method:"GET",url:this.scopesUrl,params:{}})},e.prototype.findTabByScopeName=function(e){var t=c.getSearchScopesMap();return l(t,function(t){return u(t,function(t){return t["scope-id"]==e})>-1})},e.prototype.updateIsRemoteTab=function(e){var t=c.getSearchScopesMap(),r=t[e];this._isRemoteTab=u(r,function(e){return e.types.includes("remote")})>-1},Object.defineProperty(e.prototype,"isRemoteTab",{get:function(){return this._isRemoteTab},enumerable:!0,configurable:!0}),e}();d=n([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),i("design:paramtypes",[Function,Object])],d),r.TabsAndScopesSelectorService=d,r.default=[]},{"../../../appConfig/appConfigForward":484,"lodash/findIndex":248,"lodash/findKey":249,"ng-metadata/core":362}],799:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../primoExplore/primoExploreStates.module"),c=e("../../../appConfig/appConfigForward"),l=function(){function e(e){this.$state=e,this.featuredResultItem.thumbnailLinks=this.featuredResultItem.thumbnailLinks.map(function(e){var t={linkURL:e};return t})}return e.prototype.ngOnInit=function(){},Object.defineProperty(e.prototype,"isThumbnails",{get:function(){return"thumbnails"===this.format},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatType",{get:function(){return"image"===this.featuredResultItem.type?"image":"article"===this.featuredResultItem.type?"article":"book"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"picOfImageItem",{get:function(){return this.featuredResultItem.thumbnailLinks[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showEllipsis",{get:function(){var e=this.isThumbnails?3:10;return this.featuredResultItem.title.split(" ").length>e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this.featuredResultItem.title},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayLines",{get:function(){return this.featuredResultItem.generalData},enumerable:!0,configurable:!0}),e.prototype.getFullDisplayStateParams=function(){return{docid:this.featuredResultItem.recordId,vid:c.getVid(),context:this.scope,search_scope:this.scope,adaptor:this.adaptor,tab:this.tab,query:this.$state.params.query,sortby:this.$state.params.sortby,offset:"0",lang:this.$state.params.lang,fromFeaturedResult:!0,originScope:this.$state.params.search_scope,originTab:this.$state.params.tab}},e.prototype.fullDisplayParam=function(){return this.$state.href(s.STATE_NAMES.FULL_DISPLAY,this.getFullDisplayStateParams(),{lossy:!0})},e.prototype.getImage=function(){return this.featuredResultItem.thumbnailLinks},Object.defineProperty(e.prototype,"recordId",{get:function(){return this.featuredResultItem.recordId},enumerable:!0,configurable:!0}),e}();n([a.Input(),i("design:type",Object)],l.prototype,"featuredResultItem",void 0),n([a.Input(),i("design:type",Object)],l.prototype,"adaptor",void 0),n([a.Input(),i("design:type",Object)],l.prototype,"tab",void 0),n([a.Input(),i("design:type",Object)],l.prototype,"scope",void 0),n([a.Input(),i("design:type",Object)],l.prototype,"format",void 0),n([a.Input(),i("design:type",Object)],l.prototype,"index",void 0),l=n([a.Component({selector:"prm-featured-result-item",templateUrl:"components/search/searchResult/featuredResults/featured-result-item.html"}),o(0,a.Inject("$state")),i("design:paramtypes",[Object])],l),r.PrmFeaturedResultItem=l},{"../../../appConfig/appConfigForward":484,"../../../primoExplore/primoExploreStates.module":620,"ng-metadata/core":362}],800:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../primoExplore/primoExploreStates.module"),c=e("../../../appConfig/appConfigForward"),l=e("../../scroller/scroll.service"),u=e("../../../nddUtils/configurationUtil.service"),d=function(){function e(e,t,r,n,i){this.$state=e,this.actionIcons=t,this.$interval=r,this.scrollService=n,this.configurationUtil=i}return e.prototype.ngOnInit=function(){this.offseterElem=document.querySelector(".horizontal-content-scroller"),this.featuredContent=document.querySelector(".horizontal-content-scroll-offseter"),this.featuredItems=this.offseterElem.getElementsByTagName("prm-featured-result-item")},Object.defineProperty(e.prototype,"leftArrowShowing",{get:function(){return this.scrollService.isShowLeftArrow(this.offseterElem)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isShowRightArrow",{get:function(){return this.scrollService.isShowRightArrow(this.offseterElem)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"featuredResultItems",{get:function(){return this.featuredResults.featuedResultsItems},enumerable:!0,configurable:!0}),e.prototype.searchParam=function(){var e="all_items"===this.featuredResults.resourceType?void 0:"advanced",t=this.configurationUtil.isSuprima()?"rtype":"pfilter",r=void 0!=e?t+",exact,"+this.featuredResults.resourceType:void 0,n=e?",AND":"";return{tab:this.featuredResults.moreTab,search_scope:this.featuredResults.searchScopeSet,vid:c.getVid(),mode:e,pfilter:e?r+n:void 0,query:this.$state.params.query+n,came_from:"featuredResults"}},Object.defineProperty(e.prototype,"isSuprima",{get:function(){return this.configurationUtil.isSuprima()},enumerable:!0,configurable:!0}),e.prototype.searchLink=function(){return this.$state.href(s.STATE_NAMES.SEARCH,this.searchParam(),{lossy:!0})},e.prototype.scrollContent=function(e){this.scrollService.smoothScrollClick(e,this.offseterElem,this.featuredItems)},Object.defineProperty(e.prototype,"tab",{get:function(){return this.featuredResults.moreTab},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scope",{get:function(){return this.featuredResults.searchScopeSet},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this.featuredResults.barTitle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adaptor",{get:function(){return this.featuredResults.searchLocations},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.featuredResults.resourceType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"format",{get:function(){return this.featuredResults.format},enumerable:!0,configurable:!0}),e}();n([a.Input(),i("design:type",Object)],d.prototype,"featuredResults",void 0),d=n([a.Component({selector:"prm-featured-results",templateUrl:"components/search/searchResult/featuredResults/featured-results.html"}),o(0,a.Inject("$state")),o(1,a.Inject("actionIcons")),o(2,a.Inject("$interval")),i("design:paramtypes",[Object,Object,Function,l.ScrollService,u.ConfigurationUtil])],d),r.PrmFeaturedResults=d},{"../../../appConfig/appConfigForward":484,"../../../nddUtils/configurationUtil.service":596,"../../../primoExplore/primoExploreStates.module":620,"../../scroller/scroll.service":788,"ng-metadata/core":362}],801:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../nddUtils/dateUtils.service"),c=e("../../../favorites/savedQueries/savedQueries.service"),l=e("../../savedQueries/addQueryToSavedSearches/addQueryToSavedSearches.service"),u=e("../../../security/userSessionManager.service"),d=e("../../../favorites/searchHistory/searchHistory.service"),p=e("../../../nddUtils/configurationUtil.service"),f=e("../../../analytics/primolytics.service"),h=e("../../../appConfig/appConfigForward"),m=(e("lodash/replace"),e("lodash/get")),g=function(){function e(e,t,r,n,i,o,a,s,c,l,u){this.dateUtils=e,this.savedQueriesService=t,this.searchHistoryService=r,this.savedSearches=n,this.$mdToast=i,this.$translate=o,this.addQueryToSavedSearchesService=a,this.userSessionManagerService=s,this.configurationUtil=c,this.primolyticsService=l,this.restBaseURLs=u,this.preFilterMap={pfilter:"material_type",lang:"language",creationdate:"publication_date",dr_s:"DateRangeStart",dr_e:"DateRangeEnd"},this.prefixCodesForTypes={material_type:"search-advanced.mediaType.option.",language:"search-advanced.language.option.",publication_date:"",DateRangeStart:"search-advanced.DateRange.label.",DateRangeEnd:"search-advanced.DateRange.label."}}return e.prototype.convertDate=function(e){return this.isSearchHistory?e:this.dateUtils.convertIlsDateStringToPrimoDateString(e)},e.prototype.decodeString=function(e){
return decodeURI(e)},e.prototype.getPfilterMap=function(e){return this.preFilterMap[e]},e.prototype.getPrefixCodeAccordingToType=function(e){return this.prefixCodesForTypes[e]},e.prototype.removeSearch=function(e){var t=this;this.savedQueriesService.removeSearch(e).then(function(e){console.log("entire res:"+JSON.stringify(e)),t.savedQueriesService.getItemsFromApi()},function(e){console.log("get searches failed: ",e)})},e.prototype.updateAlert=function(e,t){var r=this;void 0===t&&(t="");var n=e.ID,i=e.alert?0:1;this.savedQueriesService.updateAlerts(e,t).then(function(t){if(console.log("entire res:"+JSON.stringify(t)),e.alert=!e.alert,e.email=t,i){var o='<prm-add-alert-toast [id]="ctrl.searchId" [add-mode]="ctrl.addMode"></prm-add-alert-toast>';r.$mdToast.show({controllerAs:"ctrl",controller:function(){this.searchId=n,this.addMode=!1},hideDelay:8e3,position:"top right",template:o}).then(function(){r.addQueryToSavedSearchesService.onToastClose()})}},function(e){console.log("get searches failed: ",e)})},e.prototype.createRSS=function(e){var t=e.ID,r=e.query.split(",")[2];r.split("%20").length>9&&(r=r.split("%20").slice(0,9).join("%20"));var n=this.restBaseURLs.rss+"?rssId="+t+"&queryTerm="+e.query.split(",")[2]+"&vid="+h.getVid()+"&amp;ver=2_1_4",i=document.getElementById("RRSFORM");i.action=n;var o=document.createElement("input");o.setAttribute("type","hidden"),o.setAttribute("name","sr"),o.setAttribute("value",e.sr),i.appendChild(o),o=document.createElement("input"),o.setAttribute("type","hidden"),o.setAttribute("name","encCtxt"),o.setAttribute("value",e.encCtxt),i.appendChild(o),i.submit(),console.log(e)},e.prototype.successRssAction=function(e){console.log(e),console.log("Rss successfully sent")},e.prototype.failedRssAction=function(e){console.log("Rss call failed"),console.log("Event:"+event),console.log(e)},e.prototype.getSavedQueriesHeader=function(){if(this.itemlist){var e={idx_0:this.isSearchHistory?this.searchHistoryService.totalItems.length:this.savedQueriesService.totalItems.length};return this.$translate.instant("nui.favorites.search.items",e)}},e.prototype.getCheckedItems=function(){return this.itemlist?this.itemlist.filter(function(e){return e.checked}):[]},e.prototype.isAllChecked=function(){return!!this.itemlist&&this.itemlist.length===this.getCheckedItems().length},e.prototype.selectAllToggle=function(){if(this.isAllChecked())for(var e=0,t=this.itemlist;e<t.length;e++){var r=t[e];r.checked=!1}else for(var n=0,i=this.itemlist;n<i.length;n++){var r=i[n];r.checked=!0}},e.prototype.userName=function(){return this.userSessionManagerService.getUserName()},e.prototype.isLoggedIn=function(){return this.userName().length>0},e.prototype.removeSearchHistoryItem=function(e){var t=this;this.searchHistoryService.removeSearchHistoryItem(e).then(function(e){t.searchHistoryService.setTotalItems(e),t.searchHistoryService.refreshItems()})},e.prototype.saveSearchHistoryItemToSavedSearches=function(e){this.searchHistoryService.saveSearchHistoryItemToSavedSearches(e)},e.prototype.removeSearchHistoryItemFromSavedSearches=function(e){this.searchHistoryService.removeSearchHistoryItemFromSavedSearches(e)},e.prototype.nextResults=function(){this.isSearchHistory?this.searchHistoryService.nextResults():this.savedQueriesService.nextResults()},e.prototype.hasNextResults=function(){return this.isSearchHistory?this.searchHistoryService.hasNextResults():this.savedQueriesService.hasNextResults()},e.prototype.isSearchHistoryItemInSavedSearches=function(e){return this.searchHistoryService.isSearchHistoryItemInSavedSearches(e)},e.prototype.isDisplayAlert=function(e){var t=!0;if(this.configurationUtil.isSuprima()){var r=e.scope,n=this.configurationUtil.getScopesObj(r),i=m(n,"[0].locations");if(i){var o=i.split(",");(o.includes("EbscoLocal")||o.includes("WorldCatLocal"))&&(t=!1)}}return t},e}();n([a.Input(),i("design:type",Array)],g.prototype,"itemlist",void 0),n([a.Input(),i("design:type",Boolean)],g.prototype,"isSearchHistory",void 0),n([f.beacon({p:"rssSubscription",op:"click"}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],g.prototype,"createRSS",null),g=n([a.Component({selector:"prm-saved-queries-list",templateUrl:"components/search/searchResult/savedQueriesList/saved-queries-list.html"}),o(3,a.Inject("savedSearches")),o(4,a.Inject("$mdToast")),o(5,a.Inject("$translate")),o(10,a.Inject("restBaseURLs")),i("design:paramtypes",[s.DateUtils,c.SavedQueriesService,d.SearchHistoryService,Object,Object,Function,l.AddQueryToSavedSearchesService,u.UserSessionManagerService,p.ConfigurationUtil,f.PrimolyticsService,Object])],g),r.PrmSavedQueriesList=g},{"../../../analytics/primolytics.service":480,"../../../appConfig/appConfigForward":484,"../../../favorites/savedQueries/savedQueries.service":522,"../../../favorites/searchHistory/searchHistory.service":525,"../../../nddUtils/configurationUtil.service":596,"../../../nddUtils/dateUtils.service":597,"../../../security/userSessionManager.service":853,"../../savedQueries/addQueryToSavedSearches/addQueryToSavedSearches.service":784,"lodash/get":255,"lodash/replace":300,"ng-metadata/core":362}],802:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../../nddUtils/dateUtils.service"),c=e("angular-material"),l=function(){function e(e,t,r){this.dateUtils=e,this.$translate=t,this.savedSearches=r,this.preFilterMap={pfilter:"material_type",lang:"language",creationdate:"publication_date",dr_s:"DateRangeStart",dr_e:"DateRangeEnd"},this.prefixCodesForTypes={material_type:"search-advanced.mediaType.option.",language:"search-advanced.language.option.",publication_date:"",DateRangeStart:"search-advanced.DateRange.label.",DateRangeEnd:"search-advanced.DateRange.label."}}return e.prototype.convertDate=function(e){return this.dateUtils.convertIlsDateStringToPrimoDateString(e)},e.prototype.decodeString=function(e){return decodeURI(e)},e.prototype.getPfilterMap=function(e){return this.preFilterMap[e]},e.prototype.getPrefixCodeAccordingToType=function(e){return this.prefixCodesForTypes[e]},e.prototype.defTrans=function(e){var t,r=this.decodeString(e.split(",")[2]);if("tlevel"===e.split(",")[0])t="facets.facet.tlevel."+r;else{if("searchcreationdate"===e.split(",")[0])return this.decodeString(e.split(",")[2]).slice(0,-1)+"-"+this.decodeString(e.split(",")[3]).slice(1);t="facets.facet.facet_"+e.split(",")[0]+"."+r}var n=this.$translate.instant(t);return n===t?r:n},e.prototype.facetNameTransfer=function(e){return"searchcreationdate"===e.split(",")[0]?"creationdate":e.split(",")[0]},e}();n([a.Input(),i("design:type",Object)],l.prototype,"item",void 0),l=n([a.Component({directives:[],providers:[c],selector:"prm-saved-query-filter",templateUrl:"components/search/searchResult/savedQueriesList/savedQueryFilter/saved-query-filter.html",inputs:["item"]}),o(1,a.Inject("$translate")),o(2,a.Inject("savedSearches")),i("design:paramtypes",[s.DateUtils,Function,Object])],l),r.PrmSavedQueryFilter=l},{"../../../../nddUtils/dateUtils.service":597,"angular-material":17,"ng-metadata/core":362}],803:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0}),e("ng-infinite-scroll"),e("angular-inview");var i=e("ng-metadata/core"),o=e("angular-material"),a=e("./searchResultAvailability/searchResultAvailabilityLine.directive"),s=e("./searchResultThumbnail/searchResultThumbnailContainer.directive"),c=e("./searchResultFrbr/searchResultFrbrLine.directive"),l=e("../briefResult/briefResult.service"),u=e("../briefResult/briefResult.directive"),d=e("../snippet/snippet.service"),p=e("../snippet/snippet.directive"),f=e("../actions/actions.module"),h=e("../citationTrails/citationTrails.service"),m=e("../briefResult/upFrontActions.service"),g=e("../briefResult/briefResultContainer.directive"),v=e("./searchResultList/noSearchResult.directive"),y=e("./savedQueriesList/savedQueryFilter/savedQueryFilter.directive"),b=e("./savedQueriesList/savedQueriesList.directive"),S=e("./searchResultList/pageNavMenu/pageNavMenu.directive"),_=e("./searchResultList/pageNavMenu/pageNavMenu.service"),w=e("./searchResultList/searchResult.directive"),E=e("./searchResultSortBy/searchResultSortBy.directive"),T=e("../timesCited/timesCited.service"),O=e("../timesCited/timesCited.directive"),I=e("./featuredResults/featuredResults.directive"),P=e("./featuredResults/featuredResultItem.directive"),R=e("./searchResultJournalIndication/searchResultJournalIndicationLine.directive"),C=function(){function e(){}return e}();C=n([i.NgModule({declarations:[u.PrmBriefResult,g.PrmBriefResultContainer,v.PrmNoSearchResult,S.PrmPageNavMenu,b.PrmSavedQueriesList,y.PrmSavedQueryFilter,a.PrmSearchResultAvailabilityLine,c.PrmSearchResultFrbrLine,w.PrmSearchResultList,s.PrmSearchResultThumbnailContainer,p.PrmSnippet,E.SearchResultSortBy,O.PrmTimesCited,R.PrmSearchResultJournalIndicationLine,P.PrmFeaturedResultItem,I.PrmFeaturedResults],providers:[l.BriefResultService,h.CitationTrailsService,d.SnippetService,m.UpFrontActionsService,_.PageNavMenuService,T.TimesCitedService],imports:[o,f.ActionsModule,"angular-inview","infinite-scroll"]})],C),r.SearchResultModule=C},{"../actions/actions.module":626,"../briefResult/briefResult.directive":650,"../briefResult/briefResult.service":651,"../briefResult/briefResultContainer.directive":652,"../briefResult/upFrontActions.service":653,"../citationTrails/citationTrails.service":663,"../snippet/snippet.directive":815,"../snippet/snippet.service":816,"../timesCited/timesCited.directive":817,"../timesCited/timesCited.service":818,"./featuredResults/featuredResultItem.directive":799,"./featuredResults/featuredResults.directive":800,"./savedQueriesList/savedQueriesList.directive":801,"./savedQueriesList/savedQueryFilter/savedQueryFilter.directive":802,"./searchResultAvailability/searchResultAvailabilityLine.directive":804,"./searchResultFrbr/searchResultFrbrLine.directive":805,"./searchResultJournalIndication/searchResultJournalIndicationLine.directive":806,"./searchResultList/noSearchResult.directive":807,"./searchResultList/pageNavMenu/pageNavMenu.directive":808,"./searchResultList/pageNavMenu/pageNavMenu.service":809,"./searchResultList/searchResult.directive":810,"./searchResultSortBy/searchResultSortBy.directive":811,"./searchResultThumbnail/searchResultThumbnailContainer.directive":812,"angular-inview":11,"angular-material":17,"ng-infinite-scroll":361,"ng-metadata/core":362}],804:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../analytics/primolytics.service"),c=e("../../../nddUtils/configurationUtil.service"),l=e("../../../nddUtils/smoothScrollUtil.service"),u=e("../../fullView/fullView.service"),d=e("../../../collectionDiscovery/collectionDiscovery.service"),p=e("../../../primoExplore/primoExploreStates.module"),f=e("../../../infra/lang/changeLang.service"),h=e("lodash/get"),m=[],g=function(){function e(e,t,r,n,i,o,s,c,l,u,d){var f=this;this.smoothScrollUtil=t,this.$timeout=r,this.primolyticsService=n,this.$element=i,this.$translate=o,this.configurationUtil=s,this.fullViewService=c,this.collectionDiscoveryService=l,this.$stateParams=u,this.changeLangService=d,this.showTimer=!1,this.COLLECTION_DISCOVERY_STATE=p.STATE_NAMES.COLLECTION_DISCOVERY,this.openFullDisplayWithGetit1=new a.EventEmitter,this.availabilityLineIcons=e,this.locationReady=!1,this.configurationUtil.isSuprima()?this.$timeout(function(){f.showTimer=!0},2e3):this.showTimer=!0}return e.prototype.ngOnInit=function(){this.collectionDiscoveryData&&(this.isCollectionDiscoveryCollection="COLLECTION"===this.collectionDiscoveryData.type||"TOPCOLLECTION"===this.collectionDiscoveryData.type,this._collectionStateParams={collectionId:this.collectionDiscoveryData.collectionId,inst:this.collectionDiscoveryData.institution,vid:this.$stateParams.vid,lang:this.$stateParams.lang})},e.prototype.scrollToElementId=function(e){var t=e,r=document.getElementById(t);r||(t="links",r=document.getElementById(t)),r.classList.add("section-focused"),this.$timeout(function(){r.classList.remove("section-focused")},500),this.isOverlayFullView?this.smoothScrollUtil.scrollTo(t,"","sticky-scroll"):this.smoothScrollUtil.scrollTo(t,"","")},e.prototype.initLocation=function(){void 0!=this.result.delivery.bestlocation&&(this.result.delivery.bestlocation.pendingRender=!1,this.locationReady=!0,this.initOrg(),this.initLibraryCode(),this.initSubLocation())},e.prototype.availabilityLinks=function(){return this.result&&this.result.delivery&&this.result.delivery.availabilityLinks?this.result.delivery.availabilityLinks:m},e.prototype.availabilityLinksUrl=function(){return this.result&&this.result.delivery&&this.result.delivery.availabilityLinksUrl?this.result.delivery.availabilityLinksUrl:m},e.prototype.delCategories=function(){return this.result&&this.result.delivery&&this.result.delivery.deliveryCategory?this.result.delivery.deliveryCategory:m},Object.defineProperty(e.prototype,"displayedAvailability",{get:function(){return this.result&&this.result.delivery?(this.result.delivery.availability&&this.result.delivery.availability.length>1&&this.isPhysical(1,this.result.delivery.availability[1])&&(this.result.delivery.availability.reverse(),this.result.delivery.availabilityLinks&&this.result.delivery.availabilityLinks.reverse(),this.result.delivery.availabilityLinksUrl&&this.result.delivery.availabilityLinksUrl.reverse(),this.result.delivery.deliveryCategory&&this.result.delivery.deliveryCategory.reverse(),this.result.delivery.serviceMode&&this.result.delivery.serviceMode.reverse()),this.result.delivery.availability&&this.result.delivery.availability.length>1&&"not_restricted"===this.result.delivery.availability[0]&&this.result.delivery.availability.reverse(),this.result.delivery.availability):m},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"libraryCode",{get:function(){return this._libraryCode},set:function(e){this._libraryCode=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subLocation",{get:function(){return this._subLocation},set:function(e){this._subLocation=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"organization",{get:function(){return this._organization},set:function(e){this._organization=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"callNumber",{get:function(){var e=this.result.delivery.bestlocation||{},t=e.callNumber||"";return t.length>0&&this.configurationUtil.isSuprima()?'<span class="availability-line-parenthesis">(</span>'+t+'<span class="availability-line-parenthesis">)</span>':t},set:function(e){this._callNumber=e},enumerable:!0,configurable:!0}),e.prototype.getTranslatedLine=function(e){var t=this.result.delivery.bestlocation||{},r=(t.callNumber||"",t.organization||""),n=t.libraryCode||"",i=t.subLocation||"",o={idx_0:this.$translate.instant(r),idx_1:this.$translate.instant(n),idx_2:this.$translate.instant(i),idx_3:t.callNumber,idx_4:this.$translate.instant(this.result.delivery.formatedDueDate||"")},a=this.$translate.instant(e,o);return a},e.prototype.getPlaceHolders=function(){this.locationReady&&!this.result.delivery.bestlocation.pendingRender||this.initLocation();var e=this.callNumber||"",t=this.organization||"",r=this.libraryCode||"",n=this.subLocation||"",i='<span class="best-location-library-code locations-link">'+r+"</span>",o='<span class="best-location-sub-location locations-link">'+n+"</span>",a='<span class="best-location-delivery locations-link">'+e+"</span>",s={idx_0:'<span class="best-location-organization locations-link">'+t+"</span>",idx_1:i+" "+o+" "+a,idx_2:'<span class="best-location-due-date">'+this.result.delivery.formatedDueDate+"</span>"};return s},e.prototype.initOrg=function(){var e=this,t=this.result.delivery.bestlocation||{},r=t.organization||"";this.$translate(r,[],"",r).then(function(t){e.organization=t})},e.prototype.initLibraryCode=function(){var e=this,t=this.result.delivery.bestlocation||{},r=t.libraryCode||"";this.$translate(r,[],"",r).then(function(t){e.libraryCode=t})},e.prototype.initSubLocation=function(){var e=this,t=this.result.delivery.bestlocation||{},r=t.subLocation||"";this.$translate(r,[],"",r).then(function(t){e.subLocation=t})},e.prototype.showPhysicalItemTextCodes=function(){return this.result.delivery.physicalItemTextCodes},e.prototype.showDisplayOtherLocations=function(){return this.result.delivery.feDisplayOtherLocations},e.prototype.handleAvailability=function(e,t){this.handleAvailabilityLine(e,t)},e.prototype.handleAvailabilityLine=function(e,t){if(this.isDirectLink(e)){var r=this.availabilityLinksUrl()[e];window.open(r,"_blank")}else{var n=0;if(2===this.result.delivery.availability.length&&(n=this.configurationUtil.isSuprima()?e:1-e),this.isFull())return this.scrollToElementId("getit_link1_"+n);var i={index:"getit_link1_"+n,target:this.$element[0]};this.openFullDisplayWithGetit1.emit(i)}this.result.beaconIsPhsical=this.isPhysical(e)},e.prototype.isDirectLink=function(e){return this.availabilityLinks().length>0&&"directlink"===this.availabilityLinks()[e]&&!this.configurationUtil.isSuprima()},e.prototype.isPhysical=function(e,t){var r=this.delCategories();return"Physical Item"===r[e]||"Microform"===r[e]||"Alma-P"===r[e]||"Remote Search Resource"===r[e]&&"worldcat"===t},e.prototype.isOnline=function(e,t){return!(this.isPhysical(e)||"Remote Search Resource"===this.delCategories()[e]&&"worldcat"===t)},e.prototype.isFull=function(){return!(!this.isFullView||void 0===this.isFullView)},Object.defineProperty(e.prototype,"collectionStateParams",{get:function(){return this._collectionStateParams},enumerable:!0,configurable:!0}),e.prototype.showDedupOtherLocations=function(){return void 0!=h(this.result,"pnx.dedup")&&h(this.result,"pnx.display.availlibrary.length",0)>1},e.prototype.switchToLtrString=function(){return"rtl"==this.changeLangService.direction},e}();n([a.Input(),i("design:type",Boolean)],g.prototype,"isOverlayFullView",void 0),n([a.Input(),i("design:type",Object)],g.prototype,"result",void 0),n([a.Input(),i("design:type",Boolean)],g.prototype,"isFullView",void 0),n([a.Input(),i("design:type",Object)],g.prototype,"collectionDiscoveryData",void 0),n([a.Output(),i("design:type",Object)],g.prototype,"openFullDisplayWithGetit1",void 0),n([s.beacon({p:"brief",op:"availabilityStatement",item:"result"}),i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",void 0)],g.prototype,"handleAvailabilityLine",null),g=n([a.Component({selector:"prm-search-result-availability-line",templateUrl:"components/search/searchResult/searchResultAvailability/searchResultAvailabilityLine.html"}),o(0,a.Inject("availabilityLineIcons")),o(2,a.Inject("$timeout")),o(4,a.Inject("$element")),o(5,a.Inject("$translate")),o(9,a.Inject("$stateParams")),i("design:paramtypes",[Object,l.SmoothScrollUtil,Function,s.PrimolyticsService,Object,Function,c.ConfigurationUtil,u.FullViewService,d.CollectionDiscoveryService,Object,f.ChangeLangService])],g),r.PrmSearchResultAvailabilityLine=g},{"../../../analytics/primolytics.service":480,"../../../collectionDiscovery/collectionDiscovery.service":498,"../../../infra/lang/changeLang.service":561,"../../../nddUtils/configurationUtil.service":596,"../../../nddUtils/smoothScrollUtil.service":607,"../../../primoExplore/primoExploreStates.module":620,"../../fullView/fullView.service":688,"lodash/get":255,"ng-metadata/core":362}],805:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../facet/facet.service"),c=e("../../search.service"),l=e("../../../nddUtils/pnxUtil.service"),u=e("../../../nddUtils/resultUtil.service"),d=e("../../../analytics/primolytics.service"),p=e("../../search.fields.service"),f=e("../../../nddUtils/configurationUtil.service"),h=(e("lodash/flatten"),e("he"),function(){function e(e,t,r,n,i,o,a,s,c,l,u){this.searchService=e,this.facetService=t,this.searchFieldsService=r,this.configurationUtil=n,this.pnxUtil=i,this.resultUtil=o,this.searchResultsIcons=a,this.primolyticsService=s,this.$stateParams=c,this.$state=l,this.$mdDialog=u}return e.prototype.getFrbrRecords=function(){var e="frbrgroupid,include,"+this.pnxUtil.getValue(this.result,"facets","frbrgroupid");this.facetService.frbrSearch({facet:e},this.index),this.$mdDialog.hide()},e.prototype.getPlaceHolders=function(){var e=this.pnxUtil.getValue(this.result,"display","version");return{idx_0:'<span class="best-location-organization">'+e+"</span>"}},e.prototype.isPc=function(){return"PC"===this.result.context},e.prototype.isFrbrGeneric=function(){return this.resultUtil.isFrbr(this.result)&&1===this.searchService.getFrbrDisplay()},e}());n([a.Input(),i("design:type",Boolean)],h.prototype,"isFullView",void 0),n([a.Input(),i("design:type",Object)],h.prototype,"result",void 0),n([a.Input(),i("design:type",Object)],h.prototype,"index",void 0),n([d.beacon({p:"refine",op:"frbr",item:"result"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],h.prototype,"getFrbrRecords",null),h=n([a.Component({selector:"prm-search-result-frbr-line",templateUrl:"components/search/searchResult/searchResultFrbr/searchResultFrbrLine.html"}),o(6,a.Inject("searchResultsIcons")),o(8,a.Inject("$stateParams")),o(9,a.Inject("$stateParams")),o(10,a.Inject("$mdDialog")),i("design:paramtypes",[c.SearchService,s.FacetService,p.SearchFieldsService,f.ConfigurationUtil,l.PnxUtil,u.ResultUtil,Object,d.PrimolyticsService,Object,Object,Object])],h),r.PrmSearchResultFrbrLine=h},{"../../../analytics/primolytics.service":480,"../../../nddUtils/configurationUtil.service":596,"../../../nddUtils/pnxUtil.service":604,"../../../nddUtils/resultUtil.service":605,"../../facet/facet.service":679,"../../search.fields.service":790,"../../search.service":792,he:32,"lodash/flatten":251,"ng-metadata/core":362}],806:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=function(){function e(e){this.journalLineIcons=e}return e.prototype.isOpenaccess=function(){return this.item.pnx.addata.openaccess},e.prototype.isPeerreviewed=function(){return this.item.pnx.addata.peerreview},e}();n([a.Input(),i("design:type",Object)],s.prototype,"item",void 0),s=n([a.Component({selector:"prm-search-result-journal-indication-line",templateUrl:"components/search/searchResult/searchResultJournalIndication/searchResultJournalIndicationLine.html"}),o(0,a.Inject("journalLineIcons")),i("design:paramtypes",[Object])],s),r.PrmSearchResultJournalIndicationLine=s},{"ng-metadata/core":362}],807:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("../../searchState.service"),s=function(){function e(e){this.searchStateService=e}return Object.defineProperty(e.prototype,"isSearchWithFilter",{get:function(){return this.searchStateService.getSearchObject().facets.length>0},enumerable:!0,configurable:!0}),e}();n([o.Input(),i("design:type",Object)],s.prototype,"term",void 0),s=n([o.Component({selector:"prm-no-search-result",templateUrl:"components/search/searchResult/searchResultList/noSearchResult.html"}),i("design:paramtypes",[a.SearchStateService])],s),r.PrmNoSearchResult=s},{"../../searchState.service":814,"ng-metadata/core":362}],808:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../../nddUtils/smoothScrollUtil.service"),c=e("../../../../primoExplore/primoExploreStates.module"),l=e("../../../../appConfig/appConfigForward"),u=e("../../../../infra/lang/changeLang.service"),d=e("../../../../infra/mediaQueries.service"),p=e("lodash/clone"),f=e("lodash/range"),h=(e("lodash/tail"),5),m=function(){function e(e,t,r,n,i,o,s,l,u){var d=this;this.smoothScrollUtil=e,this.$stateParams=t,this.$timeout=r,this.$translate=n,this.$scope=i,this.$element=o,this.$state=s,this.changeLangService=l,this.mediaQueries=u,this.showNextButtonPredicate=function(){return!1},this.showPrevButtonPredicate=function(){return!1},this.loadNextResultsEvent=new a.EventEmitter,this.loadPrevResultsEvent=new a.EventEmitter,this.isOpen=!1,this.selectedMode="md-fling",this.expandDirection="right",this.availablePages=[],this.SEARCH_STATE=c.STATE_NAMES.SEARCH,n(["nui.brief.results.loadMore","link.title.results.next"]).then(function(e){d.loadMoreResultText=e["nui.brief.results.loadMore"],d.goToNextPageText=e["link.title.results.next"]})}return e.prototype.ngOnInit=function(){var e=this;this.PAGE_SIZE=l.getResultsBulkSize(),this.initPageList(),this.$scope.$watch(function(){return e.isOpen},function(t,r){e.unfocusActionButtons()})},e.prototype.initPageList=function(){var e=this.$stateParams.offset?this.$stateParams.offset:0;this.startPage=Math.floor(e/this.PAGE_SIZE)+1;var t=this.startPage+this.numOfLoadedPages-1,r=Math.floor(h/2),n=Math.min(t-r+1,r),i=r+(r-n);n+=r-Math.min(this.maxPage-t,r),this.availablePages=f(Math.max(t-n,1),Math.min(t+i,this.maxPage)+1)},e.prototype.unfocusActionButtons=function(){if(!this.isOpen&&this.$element)for(var e=this.$element[0].querySelectorAll("md-fab-actions a"),t=0,r=e;t<r.length;t++){var n=r[t];n.setAttribute("tabindex","-1")}},e.prototype.getPageList=function(){return this.facetToLeft?this.availablePages.slice().reverse():this.availablePages},e.prototype.getNextPage=function(e){e.preventDefault();var t=this.startPage+this.numOfLoadedPages-1;this.currentPage<t?this.jumpToPage(this.currentPage+1,e):this.loadNextResultsEvent.emit(null)},e.prototype.jumpToPage=function(e,t){return"browse"===this.mode?void t.preventDefault():void(document.querySelector("#searchResultPage"+e)&&(t.preventDefault(),this.smoothScrollUtil.scrollTo("searchResultPage"+e,null,null)))},e.prototype.getPageLinkParams=function(e){var t=p(this.$stateParams);return t.offset=(e-1)*this.PAGE_SIZE,t.came_from="pagination",t},e.prototype.onClickSpeedDial=function(){this.isClickEvent=!0,this.$timeout.cancel(this.closeTimeout)},e.prototype.onTriggerButtonFocus=function(e){this.isOpen=!0},e.prototype.onActionButtonFocus=function(){this.$timeout.cancel(this.closeTimeout)},e.prototype.onBlur=function(){var e=this;this.closeTimeout=this.$timeout(function(){e.isOpen=!1},100)},e.prototype.isLastLoadedPage=function(e){return e===this.startPage+this.numOfLoadedPages-1},e.prototype.isFirstLoadedPage=function(e){return e===this.startPage},e.prototype.getNextPageButtonText=function(){return this.isLastLoadedPage(this.currentPage)?this.loadMoreResultText:this.goToNextPageText},e.prototype.getPageWidgetDirection=function(){var e=window.getComputedStyle(this.$element[0].children[0]).direction,t=this.$element.attr("dir");return"rtl"===this.changeLangService.direction||"rtl"===t||"rtl"===e?"left":"right"},e.prototype.throwPrevResultsEvent=function(){this.loadPrevResultsEvent.emit(null)},Object.defineProperty(e.prototype,"maxPage",{get:function(){return Math.ceil(this.numOfResults/this.PAGE_SIZE)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stateName",{get:function(){return this.$state.current.name},enumerable:!0,configurable:!0}),e}();n([a.Input(),i("design:type",Number)],m.prototype,"currentPage",void 0),n([a.Input(),i("design:type",Number)],m.prototype,"numOfResults",void 0),n([a.Input(),i("design:type",Number)],m.prototype,"numOfLoadedPages",void 0),n([a.Input(),i("design:type",Object)],m.prototype,"showComponents",void 0),n([a.Input(),i("design:type",String)],m.prototype,"mode",void 0),n([a.Input(),i("design:type",Boolean)],m.prototype,"facetToLeft",void 0),n([a.Input(),i("design:type",Object)],m.prototype,"showNextButtonPredicate",void 0),n([a.Input(),i("design:type",Object)],m.prototype,"showPrevButtonPredicate",void 0),n([a.Output(),i("design:type",Object)],m.prototype,"loadNextResultsEvent",void 0),n([a.Output(),i("design:type",Object)],m.prototype,"loadPrevResultsEvent",void 0),m=n([a.Component({selector:"prm-page-nav-menu",templateUrl:"components/search/searchResult/searchResultList/pageNavMenu/page-nav-menu.html"}),o(1,a.Inject("$stateParams")),o(2,a.Inject("$timeout")),o(3,a.Inject("$translate")),o(4,a.Inject("$scope")),o(5,a.Inject("$element")),o(6,a.Inject("$state")),i("design:paramtypes",[s.SmoothScrollUtil,Object,Function,Function,Object,Object,Object,u.ChangeLangService,d.MediaQueries])],m),r.PrmPageNavMenu=m},{"../../../../appConfig/appConfigForward":484,"../../../../infra/lang/changeLang.service":561,
"../../../../infra/mediaQueries.service":562,"../../../../nddUtils/smoothScrollUtil.service":607,"../../../../primoExplore/primoExploreStates.module":620,"lodash/clone":236,"lodash/range":298,"lodash/tail":309,"ng-metadata/core":362}],809:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=function(){function e(){}return Object.defineProperty(e.prototype,"pageInView",{get:function(){return this._pageInView},set:function(e){this._pageInView=e},enumerable:!0,configurable:!0}),e}();a=n([o.Injectable(),i("design:paramtypes",[])],a),r.PageNavMenuService=a},{"ng-metadata/core":362}],810:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("lodash/isEmpty"),c=(e("angular-material"),e("lodash/get")),l=e("../../briefResult/briefResult.service"),u=e("../../facet/facet.service"),d=e("../../search.service"),p=e("../../../favorites/favorites.service"),f=e("../../../nddUtils/endlessScollingUtil.service"),h=e("../../../analytics/primolytics.service"),m=e("../../../security/jwtUtil.service"),g=e("../../../infra/browserSniffer"),v=e("../../../appConfig/appConfigForward"),y=e("../../../nddUtils/smoothScrollUtil.service"),b=e("../../../primoExplore/primoExploreStates.module"),S=e("../../../journals/journals.service"),_=e("./pageNavMenu/pageNavMenu.service"),w=e("../../../nddUtils/pnxUtil.service"),E=e("../../../journals/databases.service"),T=function(){function e(e,t,r,n,i,o,a,s,c,l,u,d,p,f,h,m){var y=this;this.briefResultService=e,this.searchService=t,this.facetService=r,this.pnxUtil=n,this.favoritesService=i,this.endlessScrollingUtil=o,this.primolyticsService=a,this.jwtUtilService=s,this.databasesService=c,this.$stateParams=l,this.$timeout=u,this.smoothScrollUtil=d,this.$scope=p,this.$state=f,this.journalsService=h,this.pageNavMenuService=m,this._currentPage=0,this.expandedItemIndex=-1,this.initialOffset=0,this.isIe=g.isBrowserIE(),this.PAGE_SIZE=v.getResultsBulkSize(),this._totalResultVersion=0,this.testisOpen=!1,this.showTimer=!1,this.$timeout(function(){y.showTimer=!0},2e3),this.briefResultService=e,this.briefResultService.resetIsChosen(),t.getSearchObject()&&t.getSearchObject().offset&&(this.initialOffset=t.getSearchObject().offset-t.getSearchObject().offset%this.PAGE_SIZE),this.pageInView=Math.floor((this.$stateParams.offset||0)/this.PAGE_SIZE)+1}return e.prototype.ngOnInit=function(){var e=this;this.$scope.$watch(function(){return e.itemlist},function(t,r){t&&t.forEach(function(t){"MetaLib"===t.context&&(e.pagingConfigutation={firstPage:!1,paging:!1})}),e._totalResultVersion=e.recordsNumberInludeFrbr})},Object.defineProperty(e.prototype,"indeterminateState",{get:function(){return!this.briefResultService.checkIfAllSelected()&&0!==this.briefResultService.getChosenRecords().length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allIn",{get:function(){return!!this.briefResultService.checkIfAllSelected()},enumerable:!0,configurable:!0}),e.prototype.showFeaturedResults=function(e){return!!this.featuredResult&&(0!==this.itemlist.length&&(1==this.itemlist.length||2==this.itemlist.length&&1==e||2==e))},e.prototype.selectOrUnselectAll=function(){this.briefResultService.selectAll=!this.allIn,this.briefResultService.chooseAll()},Object.defineProperty(e.prototype,"isAtozSearch",{get:function(){return this.journalsService.isJournalSearch()||this.databasesService.isDBSearch()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalResultVersion",{get:function(){return this._totalResultVersion},enumerable:!0,configurable:!0}),e.prototype.firstInPage=function(e){return 0===e||e%this.itemsPerPage===0},e.prototype.shouleFeaturedResultsApear=function(){return!(0===this.itemlist.length||void 0===this.featuredResult||this.featuredResult.featuedResultsItems.length<4)},e.prototype.lastInPage=function(e){return e%this.itemsPerPage===this.itemsPerPage-1},e.prototype.calcPage=function(e){return 1+this.getItemOffset(e)/this.itemsPerPage},Object.defineProperty(e.prototype,"currentPage",{get:function(){return this._currentPage+1},set:function(e){this._currentPage=e-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemsPerPage",{get:function(){return this.PAGE_SIZE},enumerable:!0,configurable:!0}),e.prototype.isDisabled=function(){return this.searchInProgress},e.prototype.offset=function(){return this.searchService.getSearchObject().offset-this.searchService.getSearchObject().offset%this.PAGE_SIZE},e.prototype.from=function(){return this.offset()+1},e.prototype.to=function(){return this.searchService.getSearchObject().to},Object.defineProperty(e.prototype,"selectedItem",{get:function(){return this.searchService.getSelectedItem()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchInProgress",{get:function(){return this.searchService.isSearchInProgress()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imagesBarFillersList",{get:function(){return this.searchService.getResultObject().images},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchResults",{get:function(){return this.searchService.getResultObject().data},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resultsExists",{get:function(){return!s(this.searchService.getResultObject().info)},enumerable:!0,configurable:!0}),e.prototype.isShowMoreResultButton=function(){var e=this.searchService.getResultObject().info;return this.resultsExists&&Number(e.last)<e.total},e.prototype.isShowFetchMoreResultButton=function(){var e=this.searchService.getResultObject().info;return this.resultsExists&&e.total<e.maxTotal},Object.defineProperty(e.prototype,"searchInfo",{get:function(){return this.searchService.getResultObject().info},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchString",{get:function(){return this.searchService.searchFieldsService._mainSearch},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"didUMean",{get:function(){return this.searchService.getResultObject().didUMean},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controlledVocabulary",{get:function(){return c(this,["searchInfo","controlledVocabulary"])},enumerable:!0,configurable:!0}),e.prototype.getLength=function(){var e=this.searchInfo;return e?e.total:2},Object.defineProperty(e.prototype,"totalItems",{get:function(){return this.getLength()},enumerable:!0,configurable:!0}),e.prototype.getItemAtIndex=function(e){return this.searchService.getItemAtIndex(e)},e.prototype.getNgRepeatItemId=function(e,t){return e.pnx.control.recordid[0]+"-"+t},e.prototype.showPin=function(e){return this.briefResultService.getShowPinForRecordId(e.pnx.control.recordid[0])},e.prototype.hasNextResults=function(){return this.searchService.needToGetNextResults()},e.prototype.nextResults=function(){this.endlessScrollingUtil.isSearchEndlessScrollingEnabled&&(this.searchService.needToGetNextResults()?this.callSearchServiceNextResultsWithBeacon():this.callSearchServiceNextResults())},e.prototype.jumpToPage=function(e){var t=e-1;this.searchService.jumpToPage(t),this._currentPage=t},e.prototype.callSearchServiceNextResultsWithBeacon=function(){this.callSearchServiceNextResults()},e.prototype.callSearchServiceNextResults=function(){var e=this,t=this.searchService.nextResults(this.isIe);t&&!this.isIe&&t.then(function(){var t=e.$stateParams.offset||0,r=Math.floor(t/e.PAGE_SIZE)+1,n=r+e.numOfLoadedPages-1;e.$timeout(function(){e.smoothScrollUtil.scrollTo("searchResultPage"+n,null,null)},0,!1)})},Object.defineProperty(e.prototype,"numOfLoadedPages",{get:function(){return this.searchService.numOfLoadedResultBulks},enumerable:!0,configurable:!0}),e.prototype.getPlaceHolders=function(){return{idx_0:this.favoritesService.getTotalItems()}},e.prototype.getPlaceHoldersForFilter=function(){return{idx_0:this.favoritesService.getCountRecords(),idx_1:this.favoritesService.getTotalItems()}},e.prototype.selectAll=function(){this.briefResultService.chooseAll()},e.prototype.isExpanded=function(e){return this.expandedItemIndex===e},e.prototype.setExpandedItem=function(e,t){e.expand?(this.expandedItemHeight=e.target.parentNode.offsetHeight+"px",this.expandedItemIndex=t):(this.expandedItemHeight="",this.expandedItemIndex=-1)},e.prototype.selectedItemHeight=function(){this.expandedItemHeight},Object.defineProperty(e.prototype,"skipLinks",{get:function(){return this.links},enumerable:!0,configurable:!0}),e.prototype.getItemOffset=function(e){return this.isIe?this.offset()+e:this.initialOffset+e},e.prototype.getItemIndex=function(e){return this.getItemOffset(e)+1},e.prototype.isSignedIn=function(){var e=this.jwtUtilService.getDecodedToken().userGroup;return"GUEST"!==e},e.prototype.onTopOfPageInView=function(e,t,r){if(t){var n=r.viewportRect.height/2;if(r.elementRect.top<n)return void(this.pageInView=e);var i=this.$stateParams.offset||0,o=Math.floor(i/this.PAGE_SIZE)+1;this.pageInView!==o&&e===this.pageInView&&r.elementRect.top>n&&this.pageInView--}},e.prototype.onBottomOfPageInView=function(e,t,r){},e.prototype.isCitationState=function(){return this.$state.current.name===b.STATE_NAMES.CITATION_TRAILS},e.prototype.isBrowsHeaderResults=function(){return"browse"===this.$stateParams.mode},e.prototype.notLocal=function(){return!this.searchService.IsScopeLocal()},e.prototype.shouldDisplayPagingWidget=function(){return this.$state.current.name===b.STATE_NAMES.SEARCH||this.$state.current.name===b.STATE_NAMES.JOURNAL_SEARCH||this.$state.current.name===b.STATE_NAMES.DB_SEARCH||this.$state.current.name===b.STATE_NAMES.CITATION_TRAILS},Object.defineProperty(e.prototype,"pageInView",{get:function(){return this.pageNavMenuService.pageInView},set:function(e){this.pageNavMenuService.pageInView=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recordsNumberInludeFrbr",{get:function(){if("browse"!=this.$stateParams.mode||this.briefResultService.isSuprima())return 0;var e=Number(this.$stateParams.docCount);return void 0==this.searchInfo?0:this.searchInfo.total>=e||this.inFrbrMode?0:e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inFrbrMode",{get:function(){var e=this.$stateParams.facet;if(void 0==e)return!1;if(e instanceof Array){for(var t=0,r=e;t<r.length;t++){var n=r[t];if(n.startsWith("frbrgroupid,"))return!0}return!1}return!!e.startsWith("frbrgroupid,")},enumerable:!0,configurable:!0}),e}();n([a.Input(),i("design:type",Array)],T.prototype,"itemlist",void 0),n([a.Input(),i("design:type",Boolean)],T.prototype,"isFavorites",void 0),n([a.Input(),i("design:type",Boolean)],T.prototype,"isSavedQuery",void 0),n([a.Input(),i("design:type",Boolean)],T.prototype,"isSearchHistory",void 0),n([a.Input(),i("design:type",Array)],T.prototype,"links",void 0),n([a.Input(),i("design:type",Boolean)],T.prototype,"facetToLeft",void 0),n([a.Input(),i("design:type",Object)],T.prototype,"featuredResult",void 0),n([a.Input(),i("design:type",String)],T.prototype,"query",void 0),n([h.beacon({p:"brief",op:"next"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],T.prototype,"callSearchServiceNextResultsWithBeacon",null),T=n([a.Component({selector:"prm-search-result-list",templateUrl:"components/search/searchResult/searchResultList/search-result-list.html"}),o(9,a.Inject("$stateParams")),o(10,a.Inject("$timeout")),o(12,a.Inject("$scope")),o(13,a.Inject("$state")),i("design:paramtypes",[l.BriefResultService,d.SearchService,u.FacetService,w.PnxUtil,p.FavoritesService,f.EndlessScrollingUtil,h.PrimolyticsService,m.JwtUtilService,E.DatabasesService,Object,Function,y.SmoothScrollUtil,Object,Object,S.JournalsService,_.PageNavMenuService])],T),r.PrmSearchResultList=T},{"../../../analytics/primolytics.service":480,"../../../appConfig/appConfigForward":484,"../../../favorites/favorites.service":511,"../../../infra/browserSniffer":534,"../../../journals/databases.service":584,"../../../journals/journals.service":588,"../../../nddUtils/endlessScollingUtil.service":598,"../../../nddUtils/pnxUtil.service":604,"../../../nddUtils/smoothScrollUtil.service":607,"../../../primoExplore/primoExploreStates.module":620,"../../../security/jwtUtil.service":842,"../../briefResult/briefResult.service":651,"../../facet/facet.service":679,"../../search.service":792,"./pageNavMenu/pageNavMenu.service":809,"angular-material":17,"lodash/get":255,"lodash/isEmpty":268,"ng-metadata/core":362}],811:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../nddUtils/configurationUtil.service"),c=e("../../search.fields.service"),l=e("../../facet/facet.service"),u=e("../../../analytics/primolytics.service"),d=function(){function e(e,t,r,n,i){this.configurationUtil=e,this.searchFieldsService=t,this.facetService=r,this.primolyticsService=n,this.$stateParams=i,this.myOptions=this.configurationUtil.getBriefResultConfiguration().sortby.split(",").filter(function(e,t,r){return"popularity"!==e}).map(this.createSortByMapping);var o=this.$stateParams.journals||this.$stateParams.databases;o&&(this.myOptions=[],"any"===o.split(",")[0]&&(this.myOptions.push(this.createSortByMapping("rank")),this.myOptions.push(this.createSortByMapping("title")))),this.sortBy||(this.sortBy=this.myOptions[0].value)}return Object.defineProperty(e.prototype,"options",{get:function(){return this.myOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortBy",{get:function(){return this.searchFieldsService.sortby},set:function(e){this.searchFieldsService.sortby=e},enumerable:!0,configurable:!0}),e.prototype.createSortByMapping=function(e){return{value:e,text:e}},e.prototype.onSortChange=function(){this.facetService.facetSearch({sortby:this.sortBy,came_from:"sort"})},e}();n([u.beacon({p:"sort"}),i("design:type",Object),i("design:paramtypes",[Object])],d.prototype,"sortBy",null),d=n([a.Component({selector:"prm-search-result-sort-by",templateUrl:"components/search/searchResult/searchResultSortBy/searchResultSortBy.html"}),o(4,a.Inject("$stateParams")),i("design:paramtypes",[s.ConfigurationUtil,c.SearchFieldsService,l.FacetService,u.PrimolyticsService,Object])],d),r.SearchResultSortBy=d},{"../../../analytics/primolytics.service":480,"../../../nddUtils/configurationUtil.service":596,"../../facet/facet.service":679,"../../search.fields.service":790,"ng-metadata/core":362}],812:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../appConfig/appConfigForward"),c=e("../../../nddUtils/ImagesUtil.service"),l=e("../../../appConfig/customizationConfig"),u=e("../../../nddUtils/resultUtil.service"),d=e("../../briefResult/briefResult.service"),p=e("../../../infra/browserSniffer"),f=e("../../../nddUtils/configurationUtil.service"),h=e("../../../primoExplore/primoExploreStates.module"),m=e("../../../appConfig/appConfigForward"),g=e("../../search.service"),v=e("lodash/get"),y=function(){function e(e,t,r,n,i,o,a,s,c){this.$http=e,this.$q=t,this.imagesUtil=r,this.resultUtil=n,this.briefResultService=i,this.$state=o,this.$timeout=a,this.configurationUtil=s,this.searchService=c,this.lastPnxId="-1";var l=this.getType(),u={displayLabel:"thumbnail",linkType:"http://purl.org/pnx/linkType/thumbnail",linkURL:l.length>0?"img/icon_"+l+".png":void 0};this.defaultThumbnailLink=u}return e.prototype.go=function(){var e=this,t=0;this.configurationUtil.isSuprima()&&(t=p.isBrowserIE()?400:100),this.$timeout(function(){return e.getThumbnailLinks(s.getVid())},t,!1)},e.prototype.getThumbnailLinks=function(e){var t=this,r=[],n=this.links||[],i=this.getType();this.defineDefaultTumbnail(i).then(function(e){t.defaultThumbnailLink=e,t.isFrbr()&&r.push(e),r=t.isFeaturedResult?t.links:r.concat(n.filter(function(e){return"thumbnail"===e.displayLabel})),t.frbr&&t.isFrbrGeneric&&!t.isPcRecord()?t.selectedThumbnailLink=e:t.getThumbnailFromAlmaD().then(function(n){n?t.selectedThumbnailLink=n:t.getThumbnailFromSyndeticsEXL(r).then(function(n){n?t.selectedThumbnailLink=n:t.getThumbnailFromSyndetics(r).then(function(n){n?t.selectedThumbnailLink=n:t.getThumbnailFromGoogle(r).then(function(n){n?t.selectedThumbnailLink=n:t.getThumbnailFromOther(r).then(function(r){r?t.selectedThumbnailLink=r:t.selectedThumbnailLink=e})})})})})})},e.prototype.isPcRecord=function(){var e=v(this.item,"pnx.control.recordid[0]"),t=v(this.item,"context"),r=v(this.item,"adaptor");return"PC"===t||e&&e.startsWith("TN_")||"Primo Central"===r},e.prototype.isMultipleVersions=function(){return!this.isFeaturedResult&&this.resultUtil.displayMultipleVersions(this.item,this.briefResultService.getSearchObject())},e.prototype.isPc=function(){return"PC"===this.item.context},e.prototype.defineDefaultTumbnail=function(e){var t=this;this.frbr&&this.isFrbrGeneric&&!this.isPc()&&!this.isFavoriteState()&&(e="versions");var r={displayLabel:"thumbnail",linkType:"http://purl.org/pnx/linkType/thumbnail",linkURL:"img/icon_other.png"},n={displayLabel:"thumbnail",linkType:"http://purl.org/pnx/linkType/thumbnail",linkURL:e.length>0?"img/icon_"+e+".png":void 0},i={displayLabel:"thumbnail",linkType:"http://purl.org/pnx/linkType/thumbnail",linkURL:l.getResouceTypeImages()[e]};return this.$q(function(e){t.isFeaturedResult&&e("");t.imagesUtil.getImageLink(i).then(function(t){e(i)},function(i){t.imagesUtil.getImageLink(n).then(function(t){e(n)},function(n){e(t.isVirtualBrowse?"":r)})})})},e.prototype.getSpecificLink=function(e){var t=this;return"string"==typeof e?e.indexOf(t)>-1:e.linkURL.indexOf(t)>-1},e.prototype.getAllButSpecificLink=function(e){var t=this;return"string"==typeof e?e.indexOf(t)===-1:e.linkURL.indexOf(t)===-1},e.prototype.getThumbnailFromAlmaD=function(){var e=this;return this.$q(function(t){if(!e.isVirtualBrowse&&e.isAlmaD()){var r=v(e.item,"pnx.control.sourcerecordid[0]"),n=m.getInstitutionCode();e.imagesUtil.getImageLink(e.createLinkObj("/view/delivery/thumbnail/"+n+"/"+r)).then(function(e){t(e)},function(){t("")})}else t("")})},e.prototype.isAlmaD=function(){return!!this.configurationUtil.isSuprima()&&("SP"===this.item.context&&"alma"===v(this.item,"pnx.control.sourceid")&&this.item.delivery.electronicServices?this.item.delivery.electronicServices.filter(function(e){return"DIGITAL"===e.serviceType}).length>0:this.item.delivery.hasD===!0)},e.prototype.getThumbnailFromGoogle=function(e){var t=this;return this.$q(function(r){var n=e.filter(t.getSpecificLink,"books.google.com");if(angular.isDefined(n)&&n.length>0){var i=n[0].linkURL,o=i.replace("&callback=updateGBSCover","");t.$http.jsonp(o).then(function(e){var n=e.data,i=Object.keys(n);if(i.length>0){var o=n[i[0]].thumbnail_url;if(angular.isDefined(o)){var a={displayLabel:"thumbnail",linkType:"http://purl.org/pnx/linkType/thumbnail",linkURL:t.imagesUtil.handleLink(o)};r(a)}else r("")}else r("")})}else r("")})},e.prototype.getThumbnailFromAmazon=function(e){var t=this;return this.$q(function(r){var n=e.filter(t.getSpecificLink,"amazon");n.length>0?t.imagesUtil.getImageLink(n[0]).then(function(e){r(e)},function(){r("")}):r("")})},e.prototype.getThumbnailFromSyndeticsEXL=function(e){var t=this;return this.$q(function(r){var n=!1,i=[];if(i=e.filter(t.getSpecificLink,"syndetics.com").filter(t.getSpecificLink,"primo"),i.length>0)n=!0;else if(t.configurationUtil.isSuprima()){var o=v(t.item,"pnx.addata.isbn",[]),a=v(t.item,"pnx.addata.issn",[]),s="https://syndetics.com/index.php?client=primo&";if(o&&o.length>0){for(var c=0;c<o.length;c++)i.push(t.createLinkObj(s+"isbn="+o[c]+"/sc.jpg"));n=!0}if(a&&a.length>0){for(var c=0;c<a.length;c++)i.push(t.createLinkObj(s+"issn="+a[c]+"/sc.jpg"));n=!0}}if(n)for(var c=0;c<i.length;c++){var l=i[c];t.imagesUtil.getImageLink(l).then(function(e){r(e)},function(){r("")})}else r("")})},e.prototype.createLinkObj=function(e){return{displayLabel:"thumbnail",linkType:"http://purl.org/pnx/linkType/thumbnail",linkURL:e}},e.prototype.getThumbnailFromSyndetics=function(e){var t=this;return this.$q(function(r){var n=!1,i=[];if(i=e.filter(t.getSpecificLink,"syndetics.com"),i.length>0&&(n=!0),n)for(var o=0;o<i.length;o++){var a=i[o];t.imagesUtil.getImageLink(a).then(function(e){r(e)},function(){r("")})}else r("")})},e.prototype.getThumbnailFromOther=function(e){var t=this;return this.$q(function(r){var n=e.filter(t.getAllButSpecificLink,"amazon");if(n.length)for(var i=0;i<n.length;i++)t.imagesUtil.getImageLink(n[i]).then(function(e){r(e)},function(){r("")});else r("")})},e.prototype.isFavoriteState=function(){return!!this.$state.is(h.STATE_NAMES.FAVORITES)},e.prototype.getResourceTypeForDisplay=function(){return 1===this.searchService.getFrbrDisplay()?"mediatype.multiplever":"mediatype."+this.item.pnx.display.type[0]},e.prototype.getType=function(){return this.isFeaturedResult?"book":this.item&&this.item.pnx.display.type?this.item.pnx.display.type:[]},e.prototype.isFrbr=function(){return!this.isFeaturedResult&&this.frbr},e}();n([a.Input(),i("design:type",Object)],y.prototype,"frbr",void 0),n([a.Input(),i("design:type",Boolean)],y.prototype,"isFrbrGeneric",void 0),n([a.Input(),i("design:type",Object)],y.prototype,"item",void 0),n([a.Input(),i("design:type",Array)],y.prototype,"links",void 0),n([a.Input(),i("design:type",String)],y.prototype,"pnxId",void 0),n([a.Input(),i("design:type",Boolean)],y.prototype,"isVirtualBrowse",void 0),n([a.Input(),i("design:type",Boolean)],y.prototype,"isFeaturedResult",void 0),y=n([a.Component({providers:[c.ImagesUtil],selector:"prm-search-result-thumbnail-container",templateUrl:"components/search/searchResult/searchResultThumbnail/search-result-thumbnail-container.html"}),o(0,a.Inject("$http")),o(1,a.Inject("$q")),o(5,a.Inject("$state")),o(6,a.Inject("$timeout")),i("design:paramtypes",[Function,Function,c.ImagesUtil,u.ResultUtil,d.BriefResultService,Object,Function,f.ConfigurationUtil,g.SearchService])],y),r.PrmSearchResultThumbnailContainer=y},{"../../../appConfig/appConfigForward":484,"../../../appConfig/customizationConfig":485,"../../../infra/browserSniffer":534,"../../../nddUtils/ImagesUtil.service":593,"../../../nddUtils/configurationUtil.service":596,"../../../nddUtils/resultUtil.service":605,"../../../primoExplore/primoExploreStates.module":620,"../../briefResult/briefResult.service":651,"../../search.service":792,"lodash/get":255,"ng-metadata/core":362}],813:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("angular"),a=e("lodash/forEach"),s=e("ng-metadata/core"),c=function(){function e(){}return e.prototype.parseImagesSearchResponse=function(e){for(var t=e.docs,r=t.length,n=[],i=0;i<r;i++){var o=t[i];this.enrichItem(o),n.push(o.thumbnail)}return{images:n}},e.prototype.reverseAvailability=function(e){e.delivery&&(e.delivery.availability&&e.delivery.availability.length>1&&e.delivery.availability.reverse(),e.delivery.deliveryCategory&&e.delivery.deliveryCategory.length>1&&e.delivery.deliveryCategory.reverse(),e.delivery.availabilityLinks&&e.delivery.availabilityLinks.length>1&&e.delivery.availabilityLinks.reverse(),e.delivery.availabilityLinksUrl&&e.delivery.availabilityLinksUrl.length>1&&e.delivery.availabilityLinksUrl.reverse(),e.delivery.serviceMode&&e.delivery.serviceMode.length>1&&e.delivery.serviceMode.reverse())},e.prototype.parseSearchResponse=function(e){var t=e.docs,r=e.info,n=e.did_u_mean;a(t,this.reverseAvailability);var i;try{i=e.facets}catch(e){i=[]}i.forEach(function(t){t.count=t.values.length,e.searchStatus&&"domain"===t.name&&t.values.forEach(function(t){var r=e.searchStatus.filter(function(e){return e["full-name"]===t.value});r&&r.length>0&&(t.maxCount=r[0].total)})});for(var o=t.length,s=[],c=0;c<o;c++){var l=t[c];this.enrichItem(l),s.push(l)}return{lang3:e.lang3,featuredResult:e.featuredResultJson,did_u_mean:n,groups:s,info:r,facetsList:i,beaconO22:e.beaconO22}},e.prototype.removeLinksPrefix=function(e){return e.replace("http://purl.org/pnx/linkType/","")},e.prototype.removePrefixFromLinks=function(e){var t;if(e.delivery&&e.delivery.link&&(t=e.delivery.link),e.link={},o.isDefined(t))for(var r=0;r<t.length;r++)e.link[this.removeLinksPrefix(t[r].linkType)]=this.removeLinksPrefix(t[r].linkURL)},e.prototype.enrichItem=function(e){this.removePrefixFromLinks(e)},e}();c=n([s.Injectable(),i("design:paramtypes",[])],c),r.SearchResultParser=c},{angular:"angular","lodash/forEach":253,"ng-metadata/core":362}],814:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("../appConfig/appConfigForward"),s=e("../appConfig/appConfigForward"),c=e("ng-metadata/core"),l=e("../nddUtils/jsonUtils.service"),u=e("angular"),d=function(){function e(){this.data=[]}return e.prototype.saveResponse=function(e){this.featuredResult=e.featuredResult,this.data=e.groups,this.didUMean=e.did_u_mean,this.details=e.details,this.info=e.info,this.facets=e.facetsList,this.images=e.images,this.beaconO22=e.beaconO22,this.lang3=e.lang3},e.prototype.updateResponse=function(e,t){void 0===t&&(t=!1),t?this.data=e.groups:Array.prototype.push.apply(this.data,e.groups),this.info=e.info,this.facets=e.facetsList,this.beaconO22=e.beaconO22},e.prototype.updateResponseImages=function(e){this.images=e},e}(),p=function(){function e(e,t,r){this.jsonUtils=e,this.$filter=t,this.$anchorScroll=r,this.resultsBulkSize=s.getResultsBulkSize(),this.showMoreThreshold=s.getShowMoreThreshold(),this.resultObject=new d,this.firstBulk=0,this.$filter=t,this.currentItem={},this.selectedItem="",this.PAGE_SIZE=s.getResultsBulkSize()}return e.prototype.resetResultObject=function(){this.resultObject=new d},e.prototype.resetSearchObject=function(){this.searchObject={}},e.prototype.getItemAtIndex=function(e){var t=this.resultObject.data;return t&&t.length>e?t[e]:null},e.prototype.hasNextBulk=function(){var e=this.resultObject.info.maxTotal&&this.resultObject.info.maxTotal>0?this.resultObject.info.maxTotal:this.resultObject.info.total;return this.resultObject.info&&this.searchObject.to<e},e.prototype.isNotFirstBulk=function(){return this.searchObject.offset>this.firstBulk},e.prototype.nextBulk=function(){this.searchObject.offset=Math.min(this.searchObject.offset+this.searchObject.bulkSize,this.resultObject.info.total),this.searchObject.to=Math.min(this.searchObject.offset+this.searchObject.bulkSize,this.resultObject.info.total)},e.prototype.jumpToPage=function(e){this.searchObject.offset=Math.min(10*e,this.resultObject.info.total),this.searchObject.to=Math.min(this.searchObject.offset+this.searchObject.bulkSize,this.resultObject.info.total),this.searchObject.newSearch=!0},e.prototype.previousBulk=function(){this.searchObject.offset=Math.max(this.searchObject.offset-this.searchObject.bulkSize,1);var e=this.searchObject.offset+this.searchObject.bulkSize-1;this.searchObject.to=Math.min(e,this.resultObject.info.total)},e.prototype.getResultObject=function(){return this.resultObject},Object.defineProperty(e.prototype,"numOfLoadedResultBulks",{get:function(){return this.resultObject&&this.resultObject.data?Math.ceil(this.resultObject.data.length/this.PAGE_SIZE):0},enumerable:!0,configurable:!0}),e.prototype.getSearchObject=function(){return this.searchObject||{}},e.prototype.setUpdatedSearchObject=function(e){this.searchObject={bulkSize:this.resultsBulkSize,query:e.query||this.searchObject.query,facets:e.facets||this.searchObject.facets,pcAvailability:e.pcAvailability||this.searchObject.pcAvailability,scope:e.scope||this.searchObject.scope,browseParams:this.searchObject.browseParams,tab:e.tab||this.searchObject.tab,sortby:e.sortby||this.searchObject.sortby,journals:e.journals||this.searchObject.journals,databases:e.databases||this.searchObject.databases,offset:this.firstBulk,to:this.resultsBulkSize,newSearch:!0,searchInProgress:!1,mode:this.searchObject.mode,getMore:e.getMore}},e.prototype.setSearchObject=function(e){e.searchObject&&(e=e.searchObject);var t=e.offset||this.firstBulk;this.searchObject={bulkSize:this.resultsBulkSize,query:e.query||"",facets:e.facets||[],pcAvailability:e.pcAvailability||!1,scope:e.scope||a.getDefaultScope(),browseParams:e.browseParams,tab:e.tab,journals:e.journals,databases:e.databases,sortby:e.sortby,offset:t,to:t+this.resultsBulkSize,newSearch:!0,searchInProgress:!1,mode:e.mode,getMore:e.getMore},e.noConVoc&&(this.searchObject.noConVoc=!0)},e.prototype.setResultObject=function(e,t){void 0===t&&(t=!1),this.searchObject.newSearch?(this.searchObject.newSearch=!1,this.$anchorScroll(),this.resultObject.saveResponse(e)):(t&&this.$anchorScroll(),this.resultObject.updateResponse(e,t))},e.prototype.updateSearchObject=function(e){u.extend(this.searchObject,e)},e.prototype.updateResultObject=function(e){u.extend(this.resultObject,e)},e.prototype.selectItem=function(e){this.selectedDetail=e},e.prototype.getSelectedItem=function(){return this.selectedDetail},e.prototype.addImagesToResultObject=function(e){
var t=[];if(!u.isUndefined(e.images)){var r=this.jsonUtils.convertObjectToArray(e.images);r=this.$filter("filter")(r,"!img/icon_image.png");for(var n=0;n<r.length&&n<9;n++)t.push({link:r[n],type:"dynamic"});t=t.sort(function(){return 5-Math.random()})}this.resultObject.updateResponseImages(t)},e.prototype.isSearchInProgress=function(){return this.searchObject&&this.searchObject.searchInProgress||!1},e.prototype.setSearchInProgress=function(e){this.searchObject.searchInProgress=e},e.prototype.setSkipDelivery=function(e){this.searchObject.skipDelivery=e},e.prototype.getSkipDelivery=function(){return this.searchObject.skipDelivery},e}();p=n([c.Injectable(),o(1,c.Inject("$filter")),o(2,c.Inject("$anchorScroll")),i("design:paramtypes",[l.JsonUtils,Function,Function])],p),r.SearchStateService=p},{"../appConfig/appConfigForward":484,"../nddUtils/jsonUtils.service":601,angular:"angular","ng-metadata/core":362}],815:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=(e("angular-material"),e("ng-metadata/core")),s=e("./snippet.service"),c=e("../search.service"),l=function(){function e(e,t,r){this.snippetService=e,this.searchService=t,this.actionIcons=r}return e.prototype.getSnippet=function(){var e=this.snippetService.snippets;if(e){var t=this.record.pnx.control.recordid;return angular.isArray(t)&&(t=t[0]),e[t]}},Object.defineProperty(e.prototype,"highlights",{get:function(){return this.searchService.highlightsService.highlights},enumerable:!0,configurable:!0}),e}();n([a.Input(),i("design:type",Object)],l.prototype,"record",void 0),l=n([a.Component({directives:[],selector:"prm-snippet",templateUrl:"components/search/snippet/snippet.html"}),o(2,a.Inject("actionIcons")),i("design:paramtypes",[s.SnippetService,c.SearchService,Object])],l),r.PrmSnippet=l},{"../search.service":792,"./snippet.service":816,"angular-material":17,"ng-metadata/core":362}],816:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../infra/httpRequest/http.service"),c=e("../cheetah.service"),l=e("../searchState.service"),u=e("../../nddUtils/configurationUtil.service"),d=e("lodash/indexOf"),p=e("lodash/assign"),f=e("lodash/get"),h=function(){function e(e,t,r,n,i){this.httpService=e,this.restBaseURLs=t,this.cheetah=r,this.searchStateService=n,this.configurationUtil=i}return Object.defineProperty(e.prototype,"snippets",{get:function(){return this._snippets},set:function(e){this._snippets=e},enumerable:!0,configurable:!0}),e.prototype.updateSnippets=function(e){var t=this;if(e&&this.configurationUtil.getBriefResultConfiguration().showsnip){var r=e.map(function(e,r,n){return t.getFieldsFromPnxAsArray(e)});r=r.filter(this.filterByContexts),r&&0!==r.length&&this.httpService.callPostAndParams(this.restBaseURLs.snippetURL,this.cheetah.searchData,r).then(function(e){t.searchStateService.getSearchObject().newSearch?t.snippets=e:(t.snippets||(t.snippets={}),p(t.snippets,e))})}},e.prototype.getFieldsFromPnxAsArray=function(e){var t=f(e,"pnx.search.rsrctype");return t&&t.length>0&&(t=t[0]),{context:e.context,recordId:e.pnx.control.recordid[0],resourceType:t}},e.prototype.filterByContexts=function(e){return d(["L","PC"],e.context)>=0},e}();h=n([a.Injectable(),o(1,a.Inject("restBaseURLs")),i("design:paramtypes",[s.HttpService,Object,c.Cheetah,l.SearchStateService,u.ConfigurationUtil])],h),r.SnippetService=h,r.default=[]},{"../../infra/httpRequest/http.service":556,"../../nddUtils/configurationUtil.service":596,"../cheetah.service":661,"../searchState.service":814,"lodash/assign":234,"lodash/get":255,"lodash/indexOf":261,"ng-metadata/core":362}],817:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./timesCited.service"),c=e("../../analytics/primolytics.service"),l=function(){function e(e,t,r,n){this.timesCitedService=e,this.$translate=t,this.primolyticsService=n,this.availabilityLineIcons=r}return Object.defineProperty(e.prototype,"citedLink",{get:function(){return this.timesCitedService.citedData.citedLink},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extensionVal",{get:function(){return this.timesCitedService.citedData.extensionVal},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recordLink",{get:function(){return this.timesCitedService.citedData.recordLink},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vendorLogo",{get:function(){return this.timesCitedService.citedData.citedRedId.startsWith("scopus")?"img/logo_scopus_s.png":"img/logo_wos_s.png"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scopOrWosTrans",{get:function(){return this.timesCitedService.citedData.citedRedId.startsWith("scopus")?this.$translate.instant("citationsTab.pc_citation_scopus_label"):this.$translate.instant("citationsTab.pc_citation_wos_label")},enumerable:!0,configurable:!0}),e.prototype.reportBeacon=function(){this.doBeacon(this.item)},e.prototype.doBeacon=function(e){},e.prototype.getAraiaLabelForTimeCited=function(){return this.$translate.instant("citationsTab.viewCitations",{idx_0:this.extensionVal})},e.prototype.getTimeCitedType=function(){return this.timesCitedService.citedData.citedRedId.startsWith("scopus")?this.$translate.instant("citationsTab.pc_citation_scopus_label"):this.$translate.instant("citationsTab.pc_citation_wos_label")},Object.defineProperty(e.prototype,"shouldDisplayTimesCited",{get:function(){return this.timesCitedService.shouldDisplayTimesCited},enumerable:!0,configurable:!0}),e}();n([a.Input(),i("design:type",Object)],l.prototype,"item",void 0),n([c.beacon({p:"linksService",op:"TimesCited",item:"item"}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],l.prototype,"doBeacon",null),l=n([a.Component({selector:"prm-times-cited",templateUrl:"components/search/timesCited/times-cited.html"}),o(1,a.Inject("$translate")),o(2,a.Inject("availabilityLineIcons")),i("design:paramtypes",[s.TimesCitedService,Function,Object,c.PrimolyticsService])],l),r.PrmTimesCited=l},{"../../analytics/primolytics.service":480,"./timesCited.service":818,"ng-metadata/core":362}],818:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../appConfig/appConfigForward"),c=e("../../security/jwtUtil.service"),l=e("../../nddUtils/configurationUtil.service"),u=e("lodash/map"),d=function(){function e(e,t,r,n,i){this.jwtUtilService=e,this.$http=t,this.$stateParams=r,this.restBaseURLs=n,this.configurationUtil=i}return Object.defineProperty(e.prototype,"citedData",{get:function(){return this._citedData},set:function(e){this._citedData=e},enumerable:!0,configurable:!0}),e.prototype.containsInArr=function(e,t){for(var r=0,n=e;r<n.length;r++){var i=n[r];if(i===t)return!0}return!1},Object.defineProperty(e.prototype,"inFrbrMode",{get:function(){var e=this.$stateParams.facet;if(void 0==e)return!1;if(e instanceof Array){for(var t=0,r=e;t<r.length;t++){var n=r[t];if(n.startsWith("frbrgroupid,"))return!0}return!1}return!!e.startsWith("frbrgroupid,")},enumerable:!0,configurable:!0}),e.prototype.updateCitedTimesAvailability=function(e){var t=this;this.citedData=void 0;var r=e.pnx.control,n=e.pnx.facets;if((!this.configurationUtil.isSuprima()||"Primo Central"===e.adaptor)&&(this.containsInArr(r.sourceid,"scopus")||this.containsInArr(r.sourceid,"wos")||6!=n.frbrtype&&!this.inFrbrMode)){var i=[],o=e.pnx.control.recordid,a=e.pnx.facets.frbrgroupid,c=e.pnx.facets.frbrtype;c=u(c,function(e){return 5==e?7:e});var l={recordid:o,facetGroupid:a,facetType:c};i.push(l);var d=s.getInstitutionCode(),p=s.getCurrentPCKey(),f=this.isSignedIn(),h={institutionCode:d,signedIn:f,recordsPnx:i,pcKey:p},m=this.$http.post(this.restBaseURLs.timesCited,h);m.then(function(e){t.addDataToDoc(e.data)})}},e.prototype.addDataToDoc=function(e){e&&(this.citedData=e[0])},e.prototype.isSignedIn=function(){var e=this.jwtUtilService.getDecodedToken().userGroup;return"GUEST"!==e},Object.defineProperty(e.prototype,"shouldDisplayTimesCited",{get:function(){return void 0!=this.citedData},enumerable:!0,configurable:!0}),e.prototype.isShowTimesCitedForSuprima=function(){return this.showTimesCitedForSuprima},e.prototype.setShowTimesCitedForSuprima=function(e){this.showTimesCitedForSuprima=e},e}();d=n([a.Injectable(),o(1,a.Inject("$http")),o(2,a.Inject("$stateParams")),o(3,a.Inject("restBaseURLs")),i("design:paramtypes",[c.JwtUtilService,Function,Object,Object,l.ConfigurationUtil])],d),r.TimesCitedService=d},{"../../appConfig/appConfigForward":484,"../../nddUtils/configurationUtil.service":596,"../../security/jwtUtil.service":842,"lodash/map":284,"ng-metadata/core":362}],819:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("angular"),s=e("ng-metadata/core"),c=e("../../../appConfig/appConfigForward"),l=e("../../../analytics/primolytics.service"),u=e("../../../primoExplore/primoExploreStates.module"),d=e("../../search.fields.service"),p=e("../../../journals/journals.service"),f=e("../../../infra/storageUtil.service"),h=(e("lodash/clone"),e("lodash/throttle")),m=function(){function e(e,t,r,n,i,o,s,l,d,p,f){var m=this;this.topBarIcons=e,this.$state=t,this.$location=r,this.$translate=n,this.primolyticsService=i,this.backToTopIcon=o,this.$scope=s,this.$window=l,this.searchFieldsService=d,this.journalsService=p,this.storageUtil=f,this.view=c.getVid(),this.FAVORITES_STATE=u.STATE_NAMES.FAVORITES,this.SEARCH_STATE=u.STATE_NAMES.SEARCH,this.handler=h(function(){return m.handlerUnbound()},100),this.scroll=0;var g=a.element(l);g.on("scroll",function(){return m.handler()})}return e.prototype.handlerUnbound=function(){this.scroll=window.pageYOffset,this.$scope.$digest()},Object.defineProperty(e.prototype,"isFavorites",{get:function(){return this.$state.is(u.STATE_NAMES.FAVORITES)},enumerable:!0,configurable:!0}),e.prototype.backToTop=function(){var e=-window.pageYOffset/2,t=setInterval(function(){window.pageYOffset&&0!=window.pageYOffset?window.scrollBy(0,e):clearInterval(t)},15)},e.prototype.fixedToTop=function(){return!!(this.scroll>60&&(this.$state.is(u.STATE_NAMES.FAVORITES)||this.$state.is(u.STATE_NAMES.SEARCH)||this.$state.is(u.STATE_NAMES.JOURNAL_SEARCH)||this.$state.is(u.STATE_NAMES.COLLECTION_DISCOVERY)))},e.prototype.goToFavorties=function(){},e.prototype.goToSearch=function(){},e.prototype.goToSearchHistory=function(){},Object.defineProperty(e.prototype,"favoritesStateParams",{get:function(){return{vid:this.view,lang:this.$translate.use()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchHistoryParams",{get:function(){return{vid:this.view,lang:this.$translate.use(),section:"search_history"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchStateParams",{get:function(){return this.searchFieldsService.searchParams},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uiState",{get:function(){return this.journalsService.returnToJournalsSearch()?u.STATE_NAMES.JOURNAL_SEARCH:u.STATE_NAMES.SEARCH},enumerable:!0,configurable:!0}),e.prototype.showSearchHistoryTab=function(){return this.storageUtil.isLocalStorageAvailable},e}();n([l.beacon({p:"general",op:"gotoeShelf"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],m.prototype,"goToFavorties",null),n([l.beacon({p:"general",op:"gotoSearch"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],m.prototype,"goToSearch",null),n([l.beacon({p:"general",op:"gotoSearchHistory"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],m.prototype,"goToSearchHistory",null),m=n([s.Component({selector:"prm-search-bookmark-filter",templateUrl:"components/search/topbar/bookmarkFilter/search-bookmark-filter.html"}),o(0,s.Inject("topBarIcons")),o(1,s.Inject("$state")),o(2,s.Inject("$location")),o(3,s.Inject("$translate")),o(5,s.Inject("backToTopIcon")),o(6,s.Inject("$scope")),o(7,s.Inject("$window")),i("design:paramtypes",[Object,Object,Object,Function,l.PrimolyticsService,Object,Object,Object,d.SearchFieldsService,p.JournalsService,f.StorageUtil])],m),r.PrmSearchBookmarkFilter=m},{"../../../analytics/primolytics.service":480,"../../../appConfig/appConfigForward":484,"../../../infra/storageUtil.service":571,"../../../journals/journals.service":588,"../../../primoExplore/primoExploreStates.module":620,"../../search.fields.service":790,angular:"angular","lodash/clone":236,"lodash/throttle":311,"ng-metadata/core":362}],820:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../appConfig/customizationConfig"),c=e("../../../appConfig/customizationConfig"),l=e("../../../primoExplore/primoExploreStates.module"),u=e("../../../appConfig/appConfigForward"),d=function(){function e(e){this.$state=e,this.vid=u.getVid(),this.getLogoIcon(),this.setLogoURL()}return e.prototype.getLogoIcon=function(){this.iconLink=s.getLibraryLogo()||"img/library-logo.png"},e.prototype.setLogoURL=function(){var e=c.getLibraryLogoClickableURL();e?this.logoURL=e:this.logoURL=this.$state.href(l.STATE_NAMES.SEARCH,{vid:this.vid},{inherit:!1})},e}();d=n([a.Component({selector:"prm-logo",templateUrl:"components/search/topbar/logo/logo.html"}),o(0,a.Inject("$state")),i("design:paramtypes",[Object])],d),r.PrmLogo=d},{"../../../appConfig/appConfigForward":484,"../../../appConfig/customizationConfig":485,"../../../primoExplore/primoExploreStates.module":620,"ng-metadata/core":362}],821:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../nddUtils/configurationUtil.service"),c=e("../../../nddUtils/smoothScrollUtil.service"),l=e("lodash/cloneDeep"),u=e("lodash/find"),d=(e("lodash/filter"),e("lodash/orderBy"),e("../../../appConfig/appConfigForward")),p=e("../menu.service"),f=e("../../../primoExplore/primoExplore.service"),h=e("../../../security/userSessionManager.service"),m=e("../../../security/jwtUtil.service"),g=e("../../../primoExplore/primoExploreStates.module"),v=e("../../../analytics/primolytics.service"),y=e("../../search.fields.service"),b=e("../../searchState.service"),S=e("../../search.service"),_=e("../../browse/browseSearchBar/browseSearchBar.service"),w=e("../../../journals/databases.service"),E=function(){function e(e,t,r,n,i,o,a,s,c,p,f,h,m,g,v,y,b,S,_){if(this.configurationUtil=e,this.mobileMenu=t,this.$location=r,this.$mdMedia=n,this.$translate=i,this.$mdDialog=o,this.$interpolate=a,this.primoExploreService=s,this.smoothScrollUtil=c,this.userSessionManagerService=p,this.jwtUtilService=f,this.$state=h,this.primolyticsService=m,this.$timeout=g,this.searchFieldsService=v,this.searchStateService=y,this.searchService=b,this.databasesService=S,this.browseSearchBarService=_,this.vid=d.getVid(),this.menuLabels={atoz:"nui.mainmenu.label.journalsearch",citationlinker:"nui.mainmenu.label.citationlinker",tags:"nui.mainmenu.label.tags",dbsearch:"nui.mainmenu.label.databasesearch",browse:"nui.mainmenu.label.browse"},this.menuTooltips={atoz:"nui.mainmenu.description.journalsearch",citationlinker:"nui.mainmenu.description.citation_linker",tags:"nui.mainmenu.description.tags",dbsearch:"nui.mainmenu.description.databasesearch",browse:"nui.mainmenu.description.browse"},this.mainMenuConfiguration=l(e.getMainMenuConfiguration()),this.mainMenuConfiguration){var w=u(this.mainMenuConfiguration.mainview,function(e){return"primo_help"===e.label});w&&(w.url=h.href("static",{section:"help",vid:this.vid,lang:this.$translate.use()})),this.mainView=this.mainMenuConfiguration.mainview}this.configurationUtil.isSuprima()&&(this.menuLabels.citationlinker=void 0,this.menuTooltips.citationlinker=void 0,this.menuLabels.tags=void 0,this.menuTooltips.tags=void 0),this.languages=d.getAttributesMap().interfaceLanguageOptions.split(","),this.tLanguages=d.getAttributesMap().threeLettersLanguagesOptions.split(",")}return e.prototype.ngOnInit=function(){"menu"===this.menuType?this.templateUrl="components/search/topbar/mainMenu/main-menu.html":this.templateUrl="components/search/topbar/mainMenu/main-menu-full.html"},e.prototype.ngAfterViewInit=function(){var e=this;this.$timeout(function(){e.smoothScrollUtil.scrollTo("mainMenuFullCloseButton","","")},300)},e.prototype.getMenuLabel=function(e){return this.menuLabels[e.label]?this.menuLabels[e.label]:"mainmenu.label."+e.label},e.prototype.getMenuTooltip=function(e){return this.menuTooltips[e.label]?this.menuTooltips[e.label]:"nui.mainmenu.description."+e.label},e.prototype.closeLinksMenu=function(){this.mobileMenu.setLinksMenuVisible(!1),this.$mdDialog.hide(),this.removeBackgroundDarkClass()},e.prototype.disableMobileMenu=function(){this.mobileMenu.setMobileMenu(!1),this.mobileMenu.setLinksMenuVisible(!0),this.showMainMenu()},e.prototype.showMainMenu=function(){var e='<md-dialog aria-label="Main menu" class="light-on-dark-dialog full-cover-dialog"> <md-dialog-content class="layout-full-height"> <prm-main-menu menu-type="full"></prm-main-menu> </md-dialog-content></md-dialog>';this.addBackgroundDarkClass(),this.$mdDialog.show({bindToController:!0,controller:function(){},controllerAs:"ctrl",template:e})},e.prototype.addBackgroundDarkClass=function(){this.primoExploreService.dimScreen(!0)},e.prototype.removeBackgroundDarkClass=function(){this.primoExploreService.dimScreen(!1)},e.prototype.getTemplateUrl=function(e){return"menu"===e?"components/search/topbar/mainMenu/main-menu.html":"components/search/topbar/mainMenu/main-menu-full.html"},Object.defineProperty(e.prototype,"viewId",{get:function(){return this.mainMenuConfiguration.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDepositDisplay",{get:function(){return this.mobileMenu.getDepositDisplay()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewUrlsList",{get:function(){return this.mainView},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewUrlsCount",{get:function(){return this.mainView.length},enumerable:!0,configurable:!0}),e.prototype.showCount=function(){return this.$mdMedia("lg")?6:this.$mdMedia("md")?4:this.$mdMedia("sm")?2:this.$mdMedia("xs")?0:6},e.prototype.showMoreOptionsButton=function(){var e=this.showCount();return 0!==e&&this.mainView.length>e},e.prototype.updateUrl=function(e){var t=e.url,r=e.target,n=this.jwtUtilService.getPdsHandle();if(t=this.$interpolate(t)({pds_handle:n}),!this.handleJournals(e)&&!this.isUrlHardCodedTreatment(e))return t.startsWith("/discovery/browse")?void this.browseUseReport():void window.open(t,r)},e.prototype.handleJournals=function(e){if("atoz"!=e.label)return!1;if(e.url.startsWith("dlSearch.do"))window.open(this.$location.protocol()+"://"+this.$location.host()+":"+this.$location.port()+"/primo-explore/jsearch?vid="+this.vid+"&lang="+this.$translate.use(),e.target);else{var t=this.setLanguage(e.url);this.goToExternalJournal(t,e)}return!0},e.prototype.goToExternalJournal=function(e,t){window.open(e,"_blank")},e.prototype.getUrl=function(){return this.$location.protocol()+"://"+this.$location.host()+":"+this.$location.port()+"/primo_library/libweb/action/searchDB.do?fn=nuiSearchDbIframe&vid="+this.vid},e.prototype.browseUseReport=function(){this.browseSearchBarService.searchBarInput="",void 0!=this.browseSearchBarService.selectedScope&&(this.browseSearchBarService.selectedScope=this.browseSearchBarService.scopes[0]),this.closeLinksMenu(),this.$state.go(g.STATE_NAMES.BROWSE_SEARCH,{vid:this.vid},{inherit:!1})},e.prototype.isUrlHardCodedTreatment=function(e){var t=e.url;if("citationlinker"===e.label)this.closeLinksMenu(),this.$state.go(g.STATE_NAMES.CITATION_LINKER,{vid:this.vid},{reload:!0});else if("tags"===e.label)this.closeLinksMenu(),this.$state.go(g.STATE_NAMES.TAGS,{vid:this.vid},{reload:!0});else if("dbsearch"===e.label)this.closeLinksMenu(),this.$state.go(g.STATE_NAMES.DB_SEARCH,{vid:this.vid},{reload:!0});else if("browse"===e.label||"BrowseSearch"===e.label)this.browseUseReport();else if(t.startsWith("/action/collectionDiscovery.do"))window.open(this.$location.protocol()+"://"+this.$location.host()+":"+this.$location.port()+"/primo_library/libweb"+t,"_blank");else if(t.startsWith("dlSearch.do"))window.open(this.$location.protocol()+"://"+this.$location.host()+":"+this.$location.port()+"/primo_library/libweb/action/"+t,"_blank");else if("/action/search.do"===t)window.open(this.$location.protocol()+"://"+this.$location.host()+":"+this.$location.port()+"/primo-explore/search?vid="+this.vid+"&lang="+this.$translate.use(),"_self");else if(t.endsWith("lang=")){var r=this.setLanguage(t);window.open(r,e.target)}else if("BlankIll"===t)this.$state.go(g.STATE_NAMES.BLANK_ILL,{vid:this.vid},{reload:!0});else if("jsearch"===t)this.resetSearchParams(),this.$state.go(g.STATE_NAMES.JOURNAL_SEARCH,{vid:this.vid},{reload:!0});else{if(!(t.indexOf("/discovery/search?")>-1&&t.indexOf("vid="+this.vid)>-1))return!1;window.open(this.$location.protocol()+"://"+this.$location.host()+":"+this.$location.port()+"/discovery/search?vid="+this.vid+"&lang="+this.$translate.use(),"_self")}return!0},e.prototype.setLanguage=function(e){for(var t=0,r=this.$translate.use();t<this.languages.length&&this.languages[t]!==r;++t);return this.tLanguages.length>t?e+this.tLanguages[t]:e},e.prototype.resetSearchParams=function(){this.searchFieldsService.reset(),this.searchStateService.resetSearchObject(),this.searchService.restSignInAlertMessage()},e.prototype.userName=function(){return this.userSessionManagerService.getUserName()},Object.defineProperty(e.prototype,"isLoggedIn",{get:function(){return this.userName().length>0},enumerable:!0,configurable:!0}),e.prototype.dispalyResourceSharing=function(e){return!(!this.userSessionManagerService.isGuest()||!e.includes("pds_handle={{pds_handle}}"))},e.prototype.hideLegantoMenuLink=function(e,t){return!(!this.userSessionManagerService.isGuest()||"leganto"!==t)},e}();n([a.Input(),i("design:type",Object)],E.prototype,"menuType",void 0),n([v.beacon({p:"general",op:"gotoAZ"}),i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",void 0)],E.prototype,"goToExternalJournal",null),n([v.beacon({p:"click",op:"browsePage"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],E.prototype,"browseUseReport",null),E=n([a.Component({selector:"prm-main-menu",template:'<div class="layout-full-height" ng-include="::$ctrl.templateUrl"></div>'}),o(2,a.Inject("$location")),o(3,a.Inject("$mdMedia")),o(4,a.Inject("$translate")),o(5,a.Inject("$mdDialog")),o(6,a.Inject("$interpolate")),o(11,a.Inject("$state")),o(13,a.Inject("$timeout")),i("design:paramtypes",[s.ConfigurationUtil,p.MobileMenu,Object,Function,Function,Object,Object,f.PrimoExploreService,c.SmoothScrollUtil,h.UserSessionManagerService,m.JwtUtilService,Object,v.PrimolyticsService,Object,y.SearchFieldsService,b.SearchStateService,S.SearchService,w.DatabasesService,_.BrowseSearchBarService])],E),r.PrmMainMenu=E},{"../../../analytics/primolytics.service":480,"../../../appConfig/appConfigForward":484,"../../../journals/databases.service":584,"../../../nddUtils/configurationUtil.service":596,"../../../nddUtils/smoothScrollUtil.service":607,"../../../primoExplore/primoExplore.service":615,"../../../primoExplore/primoExploreStates.module":620,"../../../security/jwtUtil.service":842,"../../../security/userSessionManager.service":853,"../../browse/browseSearchBar/browseSearchBar.service":660,"../../search.fields.service":790,"../../search.service":792,"../../searchState.service":814,"../menu.service":822,"lodash/cloneDeep":237,"lodash/filter":246,"lodash/find":247,"lodash/orderBy":293,"ng-metadata/core":362}],822:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=function(){function e(){this.isMobileMenu=!1,this.isLinksMenuVisible=!1,this.isDepositDisplay=!1}return e.prototype.getMobileMenu=function(){return this.isMobileMenu},e.prototype.setMobileMenu=function(e){this.isMobileMenu=e},e.prototype.getLinksMenuVisible=function(){return this.isLinksMenuVisible},e.prototype.setLinksMenuVisible=function(e){this.isLinksMenuVisible=e},e.prototype.getDepositDisplay=function(){return this.isDepositDisplay},e.prototype.setDepositDisplay=function(e){this.isDepositDisplay=e},e}();a=n([o.Injectable(),i("design:paramtypes",[])],a),r.MobileMenu=a,r.default=[]},{"ng-metadata/core":362}],823:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("./skipTo.service"),s=e("../../../nddUtils/smoothScrollUtil.service"),c=function(){function e(e,t){this.skipToService=e,this.smoothScrollUtil=t}return e.prototype.scrollToElementId=function(e){this.smoothScrollUtil.scrollTo(e,"","")},Object.defineProperty(e.prototype,"skipLinks",{get:function(){return this.skipToService.skipLinks},enumerable:!0,configurable:!0}),e}();c=n([o.Component({selector:"prm-skip-to",templateUrl:"components/search/topbar/skipTo/skip-to.html"}),i("design:paramtypes",[a.SkipToService,s.SmoothScrollUtil])],c),r.PrmSkipTo=c},{"../../../nddUtils/smoothScrollUtil.service":607,"./skipTo.service":824,"ng-metadata/core":362}],824:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../primoExplore/primoExploreStates.module"),c=e("../../../security/userSessionManager.service"),l=e("../../search.service"),u=e("lodash/differenceWith"),d=e("lodash/isEqual"),p=e("lodash/isArray"),f=function(){function e(e,t,r){this.userSessionManagerService=e,this.searchService=t,this.$state=r,this.skipLinksObject={},this.signedInOnlyLabels=["favoritesLabels"],this.withSearchResultsLabels=["facets","mainResults"],this.skipLinksObject[s.STATE_NAMES.SEARCH]=["mainMenu","searchBar","mainResults","facets"],this.skipLinksObject[s.STATE_NAMES.JOURNAL_SEARCH]=["mainMenu","searchBarJournal","mainResults"],this.skipLinksObject[s.STATE_NAMES.FAVORITES]=["mainResults","searchBar","favoritesLabels"],this.skipLinksObject.account=["backtosearch","accountoverview","banner"],this.skipLinksObject[s.STATE_NAMES.CITATION_TRAILS]=["mainMenu","citationTrail","mainResults"]}return Object.defineProperty(e.prototype,"skipLinks",{get:function(){var e=this.skipLinksObject[this.$state.current.name];return this.userSessionManagerService.isGuest()&&(e=u(e,this.signedInOnlyLabels,d)),this.hasSearchResults()||(e=u(e,this.withSearchResultsLabels,d)),e},enumerable:!0,configurable:!0}),e.prototype.getStateSkipLinksArray=function(){var e=["searchBar","navigation"];
return this.hasSearchResults()&&e.push("mainResults","facets"),e},e.prototype.hasSearchResults=function(){var e=this.searchResults;return p(e)&&e.length>0},Object.defineProperty(e.prototype,"searchResults",{get:function(){return this.searchService.getResultObject().data},enumerable:!0,configurable:!0}),e}();f=n([a.Injectable(),o(2,a.Inject("$state")),i("design:paramtypes",[c.UserSessionManagerService,l.SearchService,Object])],f),r.SkipToService=f,r.default=[]},{"../../../primoExplore/primoExploreStates.module":620,"../../../security/userSessionManager.service":853,"../../search.service":792,"lodash/differenceWith":241,"lodash/isArray":264,"lodash/isEqual":269,"ng-metadata/core":362}],825:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../nddUtils/configurationUtil.service"),c=e("../../journals/journals.service"),l=function(){function e(e,t,r){this.$state=e,this.configurationUtil=t,this.journalsService=r,this.displayFavorites=!0,this.showMainMenu=!0,this.isSummonOverAlma()&&(this.displayFavorites=!1,this.showMainMenu=!1),"servicesPage"===this.$state.current.name&&(this.showMainMenu=!1),"deposit"===this.$state.current.name&&(this.showMainMenu=!1,this.displayFavorites=!1)}return e.prototype.isSummonOverAlma=function(){return"suprima"===this.configurationUtil.getBackendSystem()&&this.configurationUtil.getSummonOverAlma()},e}();l=n([a.Component({selector:"prm-topbar",templateUrl:"components/search/topbar/topbar.html"}),o(0,a.Inject("$state")),i("design:paramtypes",[Object,s.ConfigurationUtil,c.JournalsService])],l),r.PrmTopbar=l},{"../../journals/journals.service":588,"../../nddUtils/configurationUtil.service":596,"ng-metadata/core":362}],826:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./mainMenu/mainMenu.directive"),a=e("./menu.service"),s=e("./skipTo/skipTo.directive"),c=e("./skipTo/skipTo.service"),l=e("./logo/logo.directive"),u=e("./bookmarkFilter/searchBookmarkFilter.directive"),d=e("./userArea/userArea.module"),p=e("./topbar.directive"),f=function(){function e(){}return e}();f=n([i.NgModule({declarations:[l.PrmLogo,o.PrmMainMenu,u.PrmSearchBookmarkFilter,s.PrmSkipTo,p.PrmTopbar],providers:[a.MobileMenu,c.SkipToService],imports:[d.UserAreaModule]})],f),r.TopbarModule=f},{"./bookmarkFilter/searchBookmarkFilter.directive":819,"./logo/logo.directive":820,"./mainMenu/mainMenu.directive":821,"./menu.service":822,"./skipTo/skipTo.directive":823,"./skipTo/skipTo.service":824,"./topbar.directive":825,"./userArea/userArea.module":832,"ng-metadata/core":362}],827:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./authentication.service"),c=e("../../../appConfig/appConfigForward"),l=e("../../../analytics/primolytics.service"),u=e("../../../security/login/login.service"),d=e("../../../infra/sharedSessionStorage.service"),p=e("../../../security/userSessionManager.service"),f=function(){function e(e,t,r,n,i,o,a){this.authenticationService=e,this.$mdDialog=t,this.primolyticsService=r,this.loginService=n,this.$location=i,this.sharedSessionStorage=o,this.userSessionManagerService=a,this.authenticationMethods=c.getAuthenticationMethods()}return e.prototype.handleLogin=function(e){this.loginService.handleLoginClick()},e.prototype.handleLogout=function(){this.authenticationService.handleLogout()},e.prototype.isLoggedInIDP=function(){return!!this.userSessionManagerService.isLoggedInIDP()||this.isLoggedIn},e}();n([a.Input(),i("design:type",Boolean)],f.prototype,"isLoggedIn",void 0),n([a.Input(),i("design:type",Boolean)],f.prototype,"idpLogout",void 0),n([l.beacon({p:"general",op:"signIn"}),i("design:type",Function),i("design:paramtypes",[c.AuthenticationMethod]),i("design:returntype",void 0)],f.prototype,"handleLogin",null),n([l.beacon({p:"general",op:"signOut"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],f.prototype,"handleLogout",null),f=n([a.Component({selector:"prm-authentication",templateUrl:"components/search/topbar/userArea/authentication.html"}),o(1,a.Inject("$mdDialog")),o(4,a.Inject("$location")),i("design:paramtypes",[s.AuthenticationService,Object,l.PrimolyticsService,u.LoginService,Object,d.SharedSessionStorage,p.UserSessionManagerService])],f),r.PrmAuthentication=f},{"../../../analytics/primolytics.service":480,"../../../appConfig/appConfigForward":484,"../../../infra/sharedSessionStorage.service":569,"../../../security/login/login.service":845,"../../../security/userSessionManager.service":853,"./authentication.service":828,"ng-metadata/core":362}],828:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("../../../security/userSessionManager.service"),s=function(){function e(e){this.userSessionManagerService=e}return e.prototype.handleLogout=function(){this.userSessionManagerService.logout(!1)},e}();s=n([o.Injectable(),i("design:paramtypes",[a.UserSessionManagerService])],s),r.AuthenticationService=s,r.default=[]},{"../../../security/userSessionManager.service":853,"ng-metadata/core":362}],829:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("../../../../analytics/primolytics.service"),s=e("ng-metadata/core"),c=e("./libraryCardMenu.service"),l=e("../../../../appConfig/appConfigForward"),u=function(){function e(e,t,r,n,i,o){this.libraryCardMenuService=e,this.topBarIcons=t,this.$state=r,this.$translate=n,this.$window=i,this.primolyticsService=o,this.actionEvent=new s.EventEmitter,this.KEY_CODE={COMMA:188,SEMICOLON:186,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,TAB:9,BACKSPACE:8,DELETE:46},this.opacType=this.libraryCardMenuService.getOpacType(),this.lang=this.$translate.use()}return e.prototype.isOvp=function(){return this.opacType===c.OPAC_TYPE.OVP},e.prototype.goToMyLibraryCard=function(){this.isOvp()?this.$state.go("account",{vid:l.getVid(),lang:this.lang,section:"overview"},{reload:!0}):this.$window.open(this.libraryCardMenuService.getIlsBaseUrl(),"_blank"),this.actionEvent.emit(null)},e.prototype.goToUserSettings=function(){this.$state.go("account",{vid:l.getVid(),lang:this.lang},{reload:!0}),this.actionEvent.emit(null)},e.prototype.getLibraryCardAriaLabel=function(){return this.isOvp()?"nui.aria.menu.librarycard":"nui.aria.menu.libraycard.link"},e.prototype.keydownSupport=function(e){this.KEY_CODE;if(9===e.keyCode)return e.preventDefault(),document.querySelector("prm-authentication button").focus()},e}();n([s.Output(),i("design:type",Object)],u.prototype,"actionEvent",void 0),n([a.beacon({p:"general",op:"gotoMyAccount"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],u.prototype,"goToMyLibraryCard",null),n([a.beacon({p:"general",op:"gotoMyAccount"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],u.prototype,"goToUserSettings",null),u=n([s.Component({selector:"prm-library-card-menu",templateUrl:"components/search/topbar/userArea/libraryCard/library-card-menu.html"}),o(1,s.Inject("topBarIcons")),o(2,s.Inject("$state")),o(3,s.Inject("$translate")),o(4,s.Inject("$window")),i("design:paramtypes",[c.LibraryCardMenuService,Object,Object,Function,Object,a.PrimolyticsService])],u),r.PrmLibraryCardMenu=u},{"../../../../analytics/primolytics.service":480,"../../../../appConfig/appConfigForward":484,"./libraryCardMenu.service":830,"ng-metadata/core":362}],830:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("../../../../mappingTablesCache/mappingTablesCache.service"),a=e("ng-metadata/core"),s=e("../../../../appConfig/appConfigForward"),c=e("../../../../appConfig/appConfigForward"),l=e("../../../../security/jwtUtil.service"),u=function(){function e(e,t){this.mtCache=e,this.jwtUtilService=t}return e.prototype.getOpacType=function(){var e=s.getApiBaseUrl();return e?d.OVP:d.OVL},e.prototype.getIlsBaseUrl=function(){var e=c.getBaseUrls().my_library_card||"";return e.replace("__pds_handle__",this.getPdsHandle())},e.prototype.getPdsHandle=function(){var e=this.jwtUtilService.getDecodedToken();return e.jti||""},e}();u=n([a.Injectable(),i("design:paramtypes",[o.MappingTablesCache,l.JwtUtilService])],u),r.LibraryCardMenuService=u;var d;!function(e){e[e.OVL=0]="OVL",e[e.OVP=1]="OVP"}(d=r.OPAC_TYPE||(r.OPAC_TYPE={})),r.default=[]},{"../../../../appConfig/appConfigForward":484,"../../../../mappingTablesCache/mappingTablesCache.service":592,"../../../../security/jwtUtil.service":842,"ng-metadata/core":362}],831:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./userArea.service"),c=e("../../../security/userSessionManager.service"),l=e("../../../appConfig/appConfigForward"),u=e("../../../analytics/primolytics.service"),d=e("../menu.service"),p=e("../../../security/jwtUtil.service"),f=e("../../../primoExplore/primoExplore.service"),h=e("../../../primoExplore/loginIframe.service"),m=e("../../../infra/mediaQueries.service"),g=e("../../../infra/browserSniffer"),v=function(){function e(e,t,r,n,i,o,a,s,c,u,d,p,f,h,m,g){var v=this;this.userAreaService=e,this.topBarIcons=t,this.mobileMenu=r,this.userSessionManagerService=n,this.jwtUtilService=i,this.$translate=o,this.$http=a,this.$state=s,this.$timeout=c,this.$mdDialog=u,this.$element=d,this.$scope=p,this.primoExploreService=f,this.primolyticsService=h,this.loginIframeService=m,this.mediaQueries=g,this.attributesMap=l.getAttributesMap(),this.view=l.getVid(),this.showUserArea=!0,this.isOpen=!1,this.spinnerTimedOut=!1,this.KEY_CODE={COMMA:188,SEMICOLON:186,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,TAB:9,BACKSPACE:8,DELETE:46},this._selectedLanguage=this.$translate.use(),this.languages=this.attributesMap.interfaceLanguageOptions.split(","),this.displayLanguage=this.displayLanguageIfThereIsMoreThanOne(this.languages.length),this.showMoreOptions=!1,this.showUserMenu=!1;this.menuTimeout;this.$timeout(function(){v.spinnerTimedOut=!0},4e3),"deposit"===this.$state.current.name&&(this.showUserArea=!1),this.$translate("eshelf.user.anonymous").then(function(e){return v.displayedGuest=e}),this.$element[0].querySelectorAll("button")[1].setAttribute("id","changUserStatus")}return e.prototype.ngOnInit=function(){var e=this;this.$scope.$watch(function(){return e.showUserMenu},function(t,r){e.$timeout(function(){e.unfocusActionButtons("md-fab-actions button"),e.unfocusActionButtons("md-fab-actions md-select")},400)})},e.prototype.unfocusActionButtons=function(e){var t=this.$element[0].querySelectorAll(e);if(!this.showUserMenu&&this.$element)for(var r=0,n=t;r<n.length;r++){var i=n[r];i.setAttribute("tabindex","-1")}else for(var o=0,a=t;o<a.length;o++){var i=a[o];i.setAttribute("tabindex","0")}},e.prototype.changUserStatus=function(){this.showUserMenu=!this.showUserMenu,g.isBrowserSafari()||this.$timeout(function(){var e=document.querySelector("prm-authentication button");e.focus()},100)},e.prototype.enableMobileMenu=function(){this.mobileMenu.setMobileMenu(!0),this.mobileMenu.setLinksMenuVisible(!0),this.showUserArea||this.mobileMenu.setDepositDisplay(!0),this.showMainMenu()},e.prototype.showMainMenu=function(){var e='<md-dialog aria-label="Main menu" class="light-on-dark-dialog full-cover-dialog"> <md-dialog-content class="layout-full-height"> <prm-main-menu menu-type="full"></prm-main-menu> </md-dialog-content></md-dialog>';this.addBackgroundDarkClass(),this.$mdDialog.show({bindToController:!0,controller:function(){},controllerAs:"ctrl",template:e})},e.prototype.addBackgroundDarkClass=function(){this.primoExploreService.dimScreen(!0)},Object.defineProperty(e.prototype,"selectedLanguage",{get:function(){return this.$translate.use()},set:function(e){this._selectedLanguage=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayedUser",{get:function(){return this.userName()?this.userName():this.displayedGuest},enumerable:!0,configurable:!0}),e.prototype.displayLanguageIfThereIsMoreThanOne=function(e){return 1!==e},e.prototype.userName=function(){return"suprima"===l.getBackendSystem()?this.userSessionManagerService.getUserNameForDisplay():this.userSessionManagerService.getUserName()},e.prototype.showSpinner=function(){return!this.spinnerTimedOut&&!this.jwtUtilService.backFromLoginIframe&&!(!this.loginIframeService.iframeSilentLoginEnabled||this.jwtUtilService.backFromLoginIframe)},e.prototype.detectMobile=function(){return!(!this.mediaQueries.xs&&!this.mediaQueries.sm)},e.prototype.keydownSupport=function(e){this.KEY_CODE;if(27===e.keyCode)return e.preventDefault(),document.querySelector("#changUserStatus").focus()},e}();v=n([a.Component({selector:"prm-user-area",templateUrl:"components/search/topbar/userArea/user-area.html"}),o(1,a.Inject("topBarIcons")),o(5,a.Inject("$translate")),o(6,a.Inject("$http")),o(7,a.Inject("$state")),o(8,a.Inject("$timeout")),o(9,a.Inject("$mdDialog")),o(10,a.Inject("$element")),o(11,a.Inject("$scope")),i("design:paramtypes",[s.UserAreaService,Object,d.MobileMenu,c.UserSessionManagerService,p.JwtUtilService,Function,Function,Object,Function,Object,Object,Object,f.PrimoExploreService,u.PrimolyticsService,h.LoginIframeService,m.MediaQueries])],v),r.PrmUserArea=v},{"../../../analytics/primolytics.service":480,"../../../appConfig/appConfigForward":484,"../../../infra/browserSniffer":534,"../../../infra/mediaQueries.service":562,"../../../primoExplore/loginIframe.service":612,"../../../primoExplore/primoExplore.service":615,"../../../security/jwtUtil.service":842,"../../../security/userSessionManager.service":853,"../menu.service":822,"./userArea.service":833,"ng-metadata/core":362}],832:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./userArea.service"),a=e("./authentication.directive"),s=e("./authentication.service"),c=e("./libraryCard/libraryCardMenu.directive"),l=e("./libraryCard/libraryCardMenu.service"),u=e("../../../appConfig/appConfig.module"),d=e("./userArea.directive"),p=function(){function e(){}return e}();p=n([i.NgModule({declarations:[a.PrmAuthentication,c.PrmLibraryCardMenu,d.PrmUserArea],providers:[s.AuthenticationService,l.LibraryCardMenuService,o.UserAreaService],imports:[u.default.name,"primo-explore.security"]})],p),r.UserAreaModule=p},{"../../../appConfig/appConfig.module":482,"./authentication.directive":827,"./authentication.service":828,"./libraryCard/libraryCardMenu.directive":829,"./libraryCard/libraryCardMenu.service":830,"./userArea.directive":831,"./userArea.service":833,"ng-metadata/core":362}],833:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=function(){function e(e,t){this.$http=e,this.UPDATE_DB_URL=t.userSettingsBaseURL}return e.prototype.buildPaylod=function(e,t){var r={vid:e,"interface-language":t};return r},e.prototype.updateUserLanguage=function(e,t){var r=this.buildPaylod(e,t);return this.$http.post(this.UPDATE_DB_URL,r)},e}();s=n([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),i("design:paramtypes",[Function,Object])],s),r.UserAreaService=s},{"ng-metadata/core":362}],834:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./virtualBrowse.service"),c=e("../../nddUtils/smoothScrollUtil.service"),l=e("../../nddUtils/configurationUtil.service"),u=e("lodash/findIndex"),d=50,p=110,f=function(){function e(e,t,r,n,i,o,a){var s=this;this.virtualBrowseService=e,this.$mdPanel=t,this.$timeout=r,this.$element=n,this.$interval=i,this.smoothScrollUtil=o,this.configurationUtil=a,this.CLICK_TIME=200,this.INITIAL_DISTANCE=3,this.LEFT="LEFT",this.RIGHT="RIGHT",this.KEY_CODE={COMMA:188,SEMICOLON:186,ENTER:13,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,TAB:9,BACKSPACE:8,DELETE:46},this.MAX_DISTANCE=20,this.focusedIndex=d,this.isListFocused=!1,this.scrollElement=angular.element(document.querySelector("#prm-virtual-browse .md-virtual-repeat-scroller")),n[0].addEventListener&&(n[0].addEventListener("mousewheel",function(e){s.mouseWheelHandler(e)},!1),n[0].addEventListener("DOMMouseScroll",function(e){s.mouseWheelHandler(e)},!1))}return e.prototype.ngOnInit=function(){this.dynamicVirtualBrowseItems=new h(this.item,this.virtualBrowseService,this.scrollElement,this.configurationUtil)},Object.defineProperty(e.prototype,"currentIndex",{get:function(){return this.dynamicVirtualBrowseItems.currentIndex},set:function(e){this.dynamicVirtualBrowseItems.currentIndex=e},enumerable:!0,configurable:!0}),e.prototype.scrollLeftMouseDown=function(){var e=this;this.$interval.cancel(this.interval),this.intervalCounter=0,this.distance=this.INITIAL_DISTANCE,this.scrollDirection=this.LEFT,this.clickTimeOut=this.$timeout(function(){e.interval=e.$interval(function(){e.scrollList()},5)},this.CLICK_TIME)},e.prototype.scrollRightMouseDown=function(){var e=this;this.$interval.cancel(this.interval),this.intervalCounter=0,this.distance=this.INITIAL_DISTANCE,this.scrollDirection=this.RIGHT,this.clickTimeOut=this.$timeout(function(){e.interval=e.$interval(function(){e.scrollList()},5)},this.CLICK_TIME)},e.prototype.previous=function(e){13===e.which&&this.scrollListWithClick(this.LEFT)},e.prototype.next=function(e){13===e.which&&this.scrollListWithClick(this.RIGHT)},e.prototype.scrollListWithClick=function(e){this.$interval.cancel(this.interval),this.scrollDirection=e,this.smoothScrollClick()},e.prototype.focusSupport=function(e){var t=angular.element(e.target).parent().children();if(t.attr("tabindex",-1),!this.isListFocused)switch(e.type){case"focus":if(this.isListFocused=!0,angular.element(document.querySelector("#vBrowseid"+this.focusedIndex)).length)this.smoothScrollUtil.focusOn("vBrowseid"+this.focusedIndex);else{var r=t[Math.ceil(t.length/2)];this.focusedIndex=Number.parseInt(r.id.split("vBrowseid")[1]),r.focus()}}},e.prototype.focusOutSupport=function(e){this.isListFocused=!1;var t=angular.element(e.target).parent().children();t.attr("tabindex",0)},e.prototype.keyDownSupport=function(e){var t=this.KEY_CODE;switch(e.keyCode){case t.UP_ARROW:case t.LEFT_ARROW:this.focusedIndex>0&&(this.focusedIndex--,this.smoothScrollUtil.focusOn("vBrowseid"+this.focusedIndex));break;case t.DOWN_ARROW:case t.RIGHT_ARROW:this.focusedIndex<2*d-1&&(this.focusedIndex++,this.smoothScrollUtil.focusOn("vBrowseid"+this.focusedIndex));break;case t.TAB:}},e.prototype.scrollList=function(){this.intervalCounter++,this.distance+=this.intervalCounter%38===0&&this.distance<this.MAX_DISTANCE?1:0,this.scrollDirection===this.LEFT&&(this.scrollElement[0].scrollLeft-=this.distance),this.scrollDirection===this.RIGHT&&(this.scrollElement[0].scrollLeft+=this.distance),(this.scrollElement[0].scrollLeft>=this.dynamicVirtualBrowseItems.rightScrollLimit||this.scrollElement[0].scrollLeft<=this.dynamicVirtualBrowseItems.leftScrollLimit)&&this.$interval.cancel(this.interval)},e.prototype.scrollMouseUp=function(){this.$timeout.cancel(this.clickTimeOut)?this.smoothScrollClick():this.$interval.cancel(this.interval)},e.prototype.easeOutExpo=function(e,t,r,n){return r*(-Math.pow(2,-10*e/n)+1)+t},e.prototype.easeInOutQuart=function(e,t,r,n){return e/=n/2,e<1?r/2*e*e*e*e+t:(e-=2,-r/2*(e*e*e*e-2)+t)},e.prototype.smoothScrollClick=function(){var e=this,t=7*(this.scrollElement[0].offsetWidth/10);this.scrollDirection===this.LEFT&&(t=-t);var r=0,n=60,i=this.scrollElement[0].scrollLeft;this.interval=this.$interval(function(){var o=e.easeInOutQuart(r,i,t,n);return o<=e.dynamicVirtualBrowseItems.leftScrollLimit&&o<e.scrollElement[0].scrollLeft?(e.$interval.cancel(e.interval),void(e.scrollElement[0].scrollLeft=e.dynamicVirtualBrowseItems.leftScrollLimit)):o>=e.dynamicVirtualBrowseItems.rightScrollLimit&&o>e.scrollElement[0].scrollLeft?(e.$interval.cancel(e.interval),void(e.scrollElement[0].scrollLeft=e.dynamicVirtualBrowseItems.rightScrollLimit)):(r++,e.scrollElement[0].scrollLeft=o,void(r===n&&e.$interval.cancel(e.interval)))},2)},e.prototype.mouseWheelHandler=function(e){e.preventDefault();var t=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail));return!(t>=0&&this.isRightScrollDisabled||t<=0&&this.isLeftScrollDisabled)&&(this.scrollElement[0].scrollLeft+=30*t,!1)},e.prototype.navigateToItemFullView=function(e){this.virtualBrowseService.navigateToItemFullView(e)},e.prototype.getItemFullViewParams=function(e){return this.virtualBrowseService.getItemFullViewParams(e)},Object.defineProperty(e.prototype,"isRightScrollDisabled",{get:function(){return!!this.scrollElement&&this.scrollElement[0].scrollLeft>=this.dynamicVirtualBrowseItems.rightScrollLimit},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLeftScrollDisabled",{get:function(){return!!this.scrollElement&&(void 0==this.dynamicVirtualBrowseItems.leftScrollLimit?0==this.scrollElement[0].scrollLeft:this.scrollElement[0].scrollLeft<=this.dynamicVirtualBrowseItems.leftScrollLimit)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftFinalIndex",{get:function(){return this.dynamicVirtualBrowseItems.leftFinalIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightFinalIndex",{get:function(){return this.dynamicVirtualBrowseItems.rightFinalIndex},enumerable:!0,configurable:!0}),e.prototype.onItemInView=function(e,t,r){console.log(e),e===this.leftFinalIndex-1&&(this.dynamicVirtualBrowseItems.leftScrollLimit=this.dynamicVirtualBrowseItems.leftScrollLimit||this.scrollElement[0].scrollLeft),e===this.rightFinalIndex+1&&(this.dynamicVirtualBrowseItems.rightScrollLimit=this.dynamicVirtualBrowseItems.rightScrollLimit||this.scrollElement[0].scrollLeft)},e}();n([a.Input(),i("design:type",Object)],f.prototype,"item",void 0),f=n([a.Component({selector:"prm-virtual-browse",templateUrl:"components/search/virtualBrowse/virtual-browse.html"}),o(1,a.Inject("$mdPanel")),o(2,a.Inject("$timeout")),o(3,a.Inject("$element")),o(4,a.Inject("$interval")),i("design:paramtypes",[s.VirtualBrowseService,Object,Function,Object,Function,c.SmoothScrollUtil,l.ConfigurationUtil])],f),r.PrmVirtualBrowse=f;var h=function(){function e(e,t,r,n){var i=this;this.item=e,this.virtualBrowseService=t,this.scrollElement=r,this.configurationUtil=n,this.currentIndex=d,this.numItems=2*d,this.params=this.virtualBrowseService.buildRestApiInitialParams(this.item.enrichment.virtualBrowseObject),this.isLoading=!0,this.virtualBrowseService.callVirtualBrowseApi(this.params).then(function(e){i.handleResponse(e.data)})}return e.prototype.getLength=function(){return this.numItems},e.prototype.getItemAtIndex=function(e){var t=this;if(!(e<this.leftFinalIndex||e>this.rightFinalIndex))return e<=this.rightLimitIndex&&e>=this.leftLimitIndex?this.virtualBrowseItems[e-this.leftLimitIndex]:void(this.isLoading||(e>this.rightLimitIndex&&(this.params.callNumber=this.nextTerm,this.params.position="RIGHT"),e<this.leftLimitIndex&&(this.params.callNumber=this.backTerm,this.params.position="LEFT"),this.isLoading=!0,this.params.numOfRecords=10,this.virtualBrowseService.callVirtualBrowseApi(this.params).then(function(e){t.handleResponse(e.data)})))},e.prototype.handleResponse=function(e){var t=this.virtualBrowseService.parseVirtualBrowseApiResponse(e),r=t.virtualBrowseItems;switch(this.params.position){case"CENTER":var n=this.params.callNumber;n="suprima"===this.configurationUtil.getBackendSystem()?this.item.enrichment.virtualBrowseObject.callNumber:this.virtualBrowseService.getDisplayCallNumber(this.item.pnx.browse.callnumber,this.params.callNumber);var i=u(r,function(e){return e.callNumber===n});i>-1?r[i].isSelectedRecord=!0:i=20,this.rightLimitIndex=d+r.length-i,this.leftLimitIndex=d-i,this.virtualBrowseItems=r,this.currentIndex=this.calculateStartIndex(i,r.length),this.nextTerm=t.nextTerm,this.nextTerm||(this.rightFinalIndex=this.rightLimitIndex-1),this.backTerm=t.backTerm,this.backTerm||(this.leftFinalIndex=this.leftLimitIndex);break;case"RIGHT":this.rightLimitIndex=this.rightLimitIndex+r.length,this.nextTerm=t.nextTerm,this.nextTerm||(this.rightFinalIndex=this.rightLimitIndex-1),this.virtualBrowseItems=this.virtualBrowseItems.concat(r);break;case"LEFT":this.leftLimitIndex=this.leftLimitIndex-r.length,this.backTerm=t.backTerm,this.backTerm||(this.leftFinalIndex=this.leftLimitIndex),this.virtualBrowseItems=r.reverse().concat(this.virtualBrowseItems)}this.isLoading=!1},e.prototype.calculateStartIndex=function(e,t){var r=Math.floor(this.scrollElement[0].offsetWidth/p),n=Math.floor((r-1)/2),i=r-1-n;return t-e<=i?d-r+(t-e)+1:e<=n?d-n+e:d-n},e}()},{"../../nddUtils/configurationUtil.service":596,"../../nddUtils/smoothScrollUtil.service":607,"./virtualBrowse.service":836,"lodash/findIndex":248,"ng-metadata/core":362}],835:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./virtualBrowse.directive"),a=e("./virtualBrowse.service"),s=e("./virtualBrowseItem/virtualBrowseItem.directive"),c=e("./virtualBrowseItemInfo/virtualBrowseItemInfo.directive"),l=e("./virtualBrowseItemInfo/virtualBrowseItemInfo.service");e("angular-inview");var u=function(){function e(){}return e}();u=n([i.NgModule({declarations:[o.PrmVirtualBrowse,s.PrmVirtualBrowseItem,c.PrmVirtualBrowseItemInfo],providers:[a.VirtualBrowseService,l.VirtualBrowseItemInfoService],imports:["angular-inview"]})],u),r.VirtualBrowseModule=u},{"./virtualBrowse.directive":834,"./virtualBrowse.service":836,"./virtualBrowseItem/virtualBrowseItem.directive":837,"./virtualBrowseItemInfo/virtualBrowseItemInfo.directive":838,"./virtualBrowseItemInfo/virtualBrowseItemInfo.service":839,"angular-inview":11,"ng-metadata/core":362}],836:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../appConfig/appConfigForward"),c=e("lodash/endsWith"),l=(e("lodash/orderBy"),function(){function e(e,t,r,n,i){this.$http=e,this.restBaseURLs=t,
this.$location=r,this.$state=n,this.$mdDialog=i}return e.prototype.buildRestApiInitialParams=function(e){this.type=void 0;var t={callNumber:"",callNumberBrowseField:"",institution:s.getInstitutionCode(),position:"CENTER",numOfRecords:40};return t.callNumberBrowseField=e.callNumberBrowseField,t.callNumber=e.callNumber,t},e.prototype.callVirtualBrowseApi=function(e){return this.$http.get(this.restBaseURLs.browse,{params:e})},e.prototype.parseVirtualBrowseApiResponse=function(e){for(var t=[],r=0,n=e.browseShelfItems;r<n.length;r++){var i=n[r];t.push(new u(i))}return{virtualBrowseItems:t,nextTerm:e.nextTerm,backTerm:e.backTerm,currTerm:e.currTerm,browseField:e.browseField}},e.prototype.navigateToItemFullView=function(e){var t=this.$location.search();t.docid=e.recordId,this.$state.go("fulldisplay",t,{reload:!0}),this.$mdDialog.hide()},e.prototype.getItemFullViewParams=function(e){if(e){var t=angular.copy(this.$location.search());return t.docid=e.recordId,t}},e.prototype.getDisplayCallNumber=function(e,t){for(var r=e.map(function(e){return e.split("$$")}),n=r.filter(function(e){var r=e.filter(function(e){return"E"===e.charAt(0)})[0]||"";return r.substring(1)===t})[0],i=0,o=n;i<o.length;i++){var a=o[i];if("D"===a.charAt(0))return a.substring(1)}},e}());l=n([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),o(2,a.Inject("$location")),o(3,a.Inject("$state")),o(4,a.Inject("$mdDialog")),i("design:paramtypes",[Function,Object,Object,Object,Object])],l),r.VirtualBrowseService=l;var u=function(){function e(e){this.isSelectedRecord=!1,this.callNumber=e.callNumber,this.title=e.title,this.author=e.author,this.date=e.date,this.recordId=e.recordId,this.thumbnails=this.buildThumbnailsArray(e.thumbnails)}return e.prototype.buildThumbnailsArray=function(e){var t=[];if(!e||!e.url)return t;for(var r=e.url,n=0,i=r;n<i.length;n++){var o=i[n];t.push({displayLabel:"thumbnail",linkURL:o})}return t},e.prototype.getThumbnail=function(e){for(var t=0,r=e.url;t<r.length;t++){var n=r[t];if(c(n,".jpg"))return n}},e}();r.VirtualBrowseItem=u,r.default=[]},{"../../appConfig/appConfigForward":484,"lodash/endsWith":242,"lodash/orderBy":293,"ng-metadata/core":362}],837:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../virtualBrowse.service"),c=function(){function e(e,t){this.$scope=e,this.$timeout=t,this.renderFlag=!0}return e.prototype.ngOnInit=function(){var e=this;this.$scope.$watch(function(){return e.virtualBrowseItem},function(){e.renderFlag=!1,e.$timeout(function(){e.renderFlag=!0},0),e.tooltipDelay="500"})},e}();n([a.Input(),i("design:type",s.VirtualBrowseItem)],c.prototype,"virtualBrowseItem",void 0),c=n([a.Component({selector:"prm-virtual-browse-item",templateUrl:"components/search/virtualBrowse/virtualBrowseItem/virtual-browse-item.html"}),o(0,a.Inject("$scope")),o(1,a.Inject("$timeout")),i("design:paramtypes",[Object,Function])],c),r.PrmVirtualBrowseItem=c},{"../virtualBrowse.service":836,"ng-metadata/core":362}],838:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("./virtualBrowseItemInfo.service"),s=e("../virtualBrowse.service"),c=function(){function e(e){this.virtualBrowseItemInfoService=e}return e.prototype.ngOnInit=function(){},e}();n([o.Input(),i("design:type",s.VirtualBrowseItem)],c.prototype,"virtualBrowseItem",void 0),c=n([o.Component({selector:"prm-virtual-browse-item-info",templateUrl:"components/search/virtualBrowse/virtualBrowseItemInfo/virtual-browse-item-info.html"}),i("design:paramtypes",[a.VirtualBrowseItemInfoService])],c),r.PrmVirtualBrowseItemInfo=c},{"../virtualBrowse.service":836,"./virtualBrowseItemInfo.service":839,"ng-metadata/core":362}],839:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../appConfig/appConfigForward"),c=function(){function e(e,t,r){this.$http=e,this.$translate=r,this.GET_ITEM_API_URL=t.pnxBaseURL}return e.prototype.getItem=function(e){var t=this.GET_ITEM_API_URL+"/L/"+e+"?vid="+s.getVid()+"&lang="+this.$translate.use();return this.$http.get(t).then(function(e){return new l(e.data)})},e}();c=n([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),o(2,a.Inject("$translate")),i("design:paramtypes",[Function,Object,Function])],c),r.VirtualBrowseItemInfoService=c;var l=function(){function e(e){this._displayLine=e.pnx.display.title[0]}return Object.defineProperty(e.prototype,"displayLine",{get:function(){return this._displayLine},enumerable:!0,configurable:!0}),e}();r.ItemInfo=l,r.default=[]},{"../../../appConfig/appConfigForward":484,"ng-metadata/core":362}],840:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./browserStorageManager.service"),a=function(){function e(){}return e}();a=n([i.NgModule({declarations:[],providers:[o.BrowserStorageManagerService],imports:[]})],a),r.BrowserStorageManagerModule=a},{"./browserStorageManager.service":841,"ng-metadata/core":362}],841:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("../infra/storageUtil.service"),s=e("./jwtUtil.service"),c=function(){function e(e,t){this.jwtUtilService=e,this.storageUtil=t}return e.prototype.addValueToKeyInLocalForage=function(e,t){var r=this;this.storageUtil.$localForage.getItem(e).then(function(n){null==n&&(n=[]),n.unshift(t),r.storageUtil.$localForage.setItem(e,n)})},e.prototype.cleanOldItemsFromLocalForage=function(){var e=this,t=this.jwtUtilService.getDecodedToken().user;this.storageUtil.$localForage.keys().then(function(r){var n=r.filter(function(e){return e.indexOf("SearchHistoryQeuriesKey")!==-1&&e.indexOf(t)===-1});for(var i in n)e.storageUtil.$localForage.removeItem(n[i])})},e.prototype.removeValueFromKeyInLocalForage=function(e){var t=this;this.storageUtil.$localForage.getItem(e).then(function(r){r.pop(),t.storageUtil.$localForage.setItem(e,r)})},e}();c=n([o.Injectable(),i("design:paramtypes",[s.JwtUtilService,a.StorageUtil])],c),r.BrowserStorageManagerService=c},{"../infra/storageUtil.service":571,"./jwtUtil.service":842,"ng-metadata/core":362}],842:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a,s=e("ng-metadata/core"),c=e("../infra/storageUtil.service"),l="primoExploreJwt",u=function(){function e(e,t){this.jwtHelper=e,this.storageUtil=t,this.backFromLoginIframe=!1}return e.prototype.isTokenExpired=function(e){return this.jwtHelper.isTokenExpired(e)},e.prototype.getDecodedToken=function(){if(!a){var e=this.getJwtFromLocalStorage();if(!e)return{};try{a=this.jwtHelper.decodeToken(e)}catch(e){return this.removeJwt(),{}}}return a},e.prototype.storeJwt=function(e){this.storageUtil.sessionStorage.setItem(l,e),a=""},e.prototype.getJwtFromLocalStorage=function(){var e=this.storageUtil.sessionStorage.getItem(l);return e},e.prototype.removeJwt=function(){this.storageUtil.sessionStorage.removeItem(l),a=""},e.prototype.getPdsHandle=function(){var e=this.getDecodedToken();return e.jti||""},e.prototype.decodeJWT=function(e){return this.jwtHelper.decodeToken(e)},e}();u=n([s.Injectable(),o(0,s.Inject("jwtHelper")),i("design:paramtypes",[Object,c.StorageUtil])],u),r.JwtUtilService=u},{"../infra/storageUtil.service":571,"ng-metadata/core":362}],843:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./login.service"),c=e("../usernamePasswordLogin.service"),l=e("../jwtUtil.service"),u=e("./loginHelp/loginHelp.service"),d=e("../../primoExplore/primoExploreStates.module"),p=e("../../search/personalization/personalizationButton/personalizeResultsButton.service"),f=function(){function e(e,t,r,n,i,o,a,s,c,l,u){this.loginService=e,this.$mdDialog=t,this.loginIcons=r,this.jwtUtilService=n,this.personalizeResultsButtonService=i,this.i18nService=o,this.$state=a,this.$stateParams=s,this.usernamePasswordLoginService=c,this.loginHelpService=l,this.$location=u,this._selectedTab=0,this._showSubmitButton=!1,this.showActionsBar=!1,this._showBackButton=!1,this._isDualLogin=!1,this._errorLabel="",this._errorField=""}return e.prototype.ngOnInit=function(){if(1===this.authenticationMethods.length){var e=this.authenticationMethods[0];e.isExternal()?this.loginService.redirectLogin(e,this.$location.search().targetURL):(this._showSubmitButton=!0,this.showActionsBar=!0,this._showBackButton=!1,this.selectedTab=1,this._isDualLogin=!1,this._selectedAuthenticationMethod=e)}else this._isDualLogin=!0},Object.defineProperty(e.prototype,"selectedTab",{get:function(){return this._selectedTab},set:function(e){this._selectedTab=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedAuthenticationMethod",{get:function(){return this._selectedAuthenticationMethod},set:function(e){this._selectedAuthenticationMethod=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showError",{get:function(){return this._errorLabel?1:0},enumerable:!0,configurable:!0}),e.prototype.handleLoginClick=function(e){e.isExternal()?this.loginService.redirectLogin(e):(this._showSubmitButton=!0,this.showActionsBar=!0,this._showBackButton=!0,this.selectedTab=1,this._selectedAuthenticationMethod=e)},e.prototype.showSubmitButton=function(){return this._showSubmitButton},e.prototype.showBackButton=function(){return this._showBackButton},e.prototype.handleBackButtonClick=function(){this._showSubmitButton=!1,this.showActionsBar=!0,this._showBackButton=!1,this.selectedTab=0},e.prototype.cancelLogin=function(){this.loginService.removeBackgroundDarkClass(),this.loginService.clearSavedState(),this.$mdDialog.cancel()},e.prototype.getLoginTitleForDisplay=function(){return this._isDualLogin?"login.dual.title":"login.title"},e.prototype.getErrorForDisplay=function(){return this._errorLabel},e.prototype.login=function(){var e=this,t=this.username,r=this.password;if(t||r)if(t&&r){this._errorLabel=null;var n=this.jwtUtilService.getDecodedToken().user,i=this._selectedAuthenticationMethod.profileName;this.usernamePasswordLoginService.login(t,r,i).then(function(){if(e.usernamePasswordLoginService.copyFavoritesRecordsThatWereSavedForGuest(n),e.usernamePasswordLoginService.changeSearchHistorylocalForageKey(n),e.personalizeResultsButtonService.promise=e.personalizeResultsButtonService.updatePersonalization(e.$stateParams.vid),e.isStandAlone)e.loginService.redirectToTargetURL();else{e.$mdDialog.hide(),e.loginService.removeBackgroundDarkClass(),e.loginService.toState?e.loginService.loadSavedState():e.$state.current.name===d.STATE_NAMES.SEARCH&&e.$state.go(d.STATE_NAMES.SEARCH,{},{reload:!0});var t=e.jwtUtilService.getDecodedToken();""!==t.language&&t.language!==e.i18nService.getLanguage()&&e.i18nService.setLanguage(t.language).then(function(){e.$state.go(e.$state.current,{},{reload:!0})})}},function(t){e._errorLabel="login.error.message"})}else this._errorLabel="nui.login.error.missing_field",t?r?this._errorField="":this._errorField="login.password":this._errorField="login.userid";else this._errorLabel="nui.login.error.missing_fields"},e.prototype.getPlaceHolders=function(){return{idx_0:'{{"'+this._errorField+'" | translate}}'}},Object.defineProperty(e.prototype,"displaySigninHelp",{get:function(){return this.loginHelpService.displaySigninHelp},enumerable:!0,configurable:!0}),e.prototype.standAlone=function(){return this.isStandAlone},e}();n([a.Input(),i("design:type",Array)],f.prototype,"authenticationMethods",void 0),n([a.Input(),i("design:type",Boolean)],f.prototype,"isStandAlone",void 0),f=n([a.Component({selector:"prm-login",templateUrl:"components/security/login/login.html"}),o(1,a.Inject("$mdDialog")),o(2,a.Inject("loginIcons")),o(5,a.Inject("I18nService")),o(6,a.Inject("$state")),o(7,a.Inject("$stateParams")),o(10,a.Inject("$location")),i("design:paramtypes",[s.LoginService,Object,Object,l.JwtUtilService,p.PersonalizeResultsButtonService,Object,Object,Object,c.UsernamePasswordLoginService,u.LoginHelpService,Object])],f),r.PrmLogin=f},{"../../primoExplore/primoExploreStates.module":620,"../../search/personalization/personalizationButton/personalizeResultsButton.service":772,"../jwtUtil.service":842,"../usernamePasswordLogin.service":855,"./login.service":845,"./loginHelp/loginHelp.service":847,"ng-metadata/core":362}],844:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./loginItem/loginItem.directive"),a=e("./loginHelp/loginHelp.service"),s=e("./loginHelp/loginHelp.directive"),c=e("./login.service"),l=e("./login.directive"),u=e("./standAloneLogin.directive"),d=function(){function e(){}return e}();d=n([i.NgModule({declarations:[l.PrmLogin,s.PrmLoginHelp,o.PrmLoginItem,u.PrmStandAloneLogin],providers:[a.LoginHelpService,c.LoginService],imports:[]})],d),r.LoginModule=d},{"./login.directive":843,"./login.service":845,"./loginHelp/loginHelp.directive":846,"./loginHelp/loginHelp.service":847,"./loginItem/loginItem.directive":848,"./standAloneLogin.directive":849,"ng-metadata/core":362}],845:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../appConfig/appConfigForward"),c=e("../userSessionManager.service"),l=e("../../primoExplore/primoExplore.service"),u=e("../../analytics/primolytics.service"),d=e("../jwtUtil.service"),p=e("../../primoExplore/primoExploreStates.module"),f=e("../../infra/storageUtil.service"),h=e("angular"),m=function(){function e(e,t,r,n,i,o,a,s,c){this.$window=e,this.$location=t,this.$mdDialog=r,this.userSessionManagerService=n,this.$state=i,this.primoExploreService=o,this.primolyticsService=a,this.jwtUtilService=s,this.storageUtil=c}return e.prototype.redirectLogin=function(e,t,r){void 0===t&&(t=""),void 0===r&&(r=!1),this._toUrl&&!t&&(t=this._toUrl,this._toUrl=""),this.$window.location.assign(this.loginUrl(e.profileName,e.authenticationSystem,t,r))},e.prototype.loginUrl=function(e,t,r,n){void 0===n&&(n=!1);var i="";r?i=r:(!this._toState||null===this._toState||"account"!==this._toState.name&&"blankIll"!==this._toState.name?this._toState&&null!==this._toState&&this._toState.name===p.STATE_NAMES.FAVORITES&&this.$location.path("favorites").search("section","queries"):this.$location.path(this._toState.name),i=this.normalizeTargetUrl(),!this._toState||null===this._toState||"account"!==this._toState.name&&this._toState.name!==p.STATE_NAMES.FAVORITES&&"blankIll"!==this._toState.name||(i+="&fromLogin=true",i=i.replace("&authenticationError=1",""))),n&&(i+="&isIframeSSO=true");var o=this.jwtUtilService.getDecodedToken().institution;return o||(o=s.getInstitutionCode()),"/primo_library/libweb/primoExploreLogin?institution="+encodeURIComponent(o)+"&lang="+encodeURIComponent(this.$location.search().lang)+"&target-url="+encodeURIComponent(i)+"&authenticationProfile="+encodeURIComponent(e)+"&auth="+encodeURIComponent(t)+"&isSilent="+n},e.prototype.normalizeTargetUrl=function(){var e=decodeURIComponent(this.$location.absUrl());return h.forEach(this.$state.params,function(t,r){var n=this;if("vid"!==r&&t)if(Array.isArray(t))t.map(function(t){e=e.replace(t,encodeURIComponent(n.replaceCharacters(encodeURIComponent(t))))});else{var i=t;e=e.replace(r+"="+i,r+"="+encodeURIComponent(this.replaceCharacters(encodeURIComponent(i))))}},this),e},e.prototype.replaceCharacters=function(e){return e.replace(/\'/g,"%27").replace(/~/g,"%7E").replace(/!/g,"%21").replace(/\*/g,"%2A").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/-/g,"%2D").replace(/_/g,"%5F").replace(/\+/g,"%2B").replace(/\_/g,"%2E")},e.prototype.redirectToTargetURL=function(){var e=this.$location.search().targetURL;e?this.$window.location.assign(e):this._toState&&this.loadSavedState()},e.prototype.loadSavedState=function(){var e=this._toState;"openurl"===e?e="servicesPage":"search"===e?e=p.STATE_NAMES.SEARCH:"favorites"===e?e=p.STATE_NAMES.FAVORITES:"jsearch"===e?e=p.STATE_NAMES.JOURNAL_SEARCH:"dbsearch"===e&&(e=p.STATE_NAMES.DB_SEARCH);var t=this._toParams;this._toState="",this._toParams="",this.$state.go(e,t,{reload:!0})},e.prototype.clearSavedState=function(){this._toState="",this._toParams="",this._toUrl=""},e.prototype.handleLoginClick=function(){if(s.getAuthenticationMethods().length>1)this.handleInternalLogin();else{var e=s.getAuthenticationMethods()[0];e.isExternal()?this.redirectLogin(e):this.handleInternalLogin()}},e.prototype.callHandleLoginClickWithBeacon=function(){this.handleLoginClick()},e.prototype.handleInternalLogin=function(){if(this._toState);else{this._toParams=this.$location.search();for(var e in this._toParams)this._toParams[e]&&"string"==typeof this.toParams[e]&&(this._toParams[e]=this._toParams[e].replace("~2F","/"));this._toState=this.$location.path().replace(/^\/|\/$/g,""),this._toUrl=this.normalizeTargetUrl()}this.showLoginDialog()},e.prototype.showLoginDialog=function(){var e='<md-dialog aria-label="Login dialog" class="login-dialog light-on-dark-dialog tabbed-dialog"> <prm-login [authentication-methods] = "ctrl.authenticationMethods" layout="row"></prm-login> </md-dialog>';this.addBackgroundDarkClass(),this.$mdDialog.show({bindToController:!0,controller:function(){},controllerAs:"ctrl",locals:{authenticationMethods:s.getAuthenticationMethods()},template:e})},Object.defineProperty(e.prototype,"toState",{get:function(){return this._toState},set:function(e){this._toState=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toParams",{get:function(){return this._toParams},set:function(e){this._toParams=e},enumerable:!0,configurable:!0}),e.prototype.addBackgroundDarkClass=function(){this.primoExploreService.dimScreen(!0)},e.prototype.removeBackgroundDarkClass=function(){this.primoExploreService.dimScreen(!1)},e}();n([u.beacon({p:"general",op:"signIn"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],m.prototype,"callHandleLoginClickWithBeacon",null),m=n([a.Injectable(),o(0,a.Inject("$window")),o(1,a.Inject("$location")),o(2,a.Inject("$mdDialog")),o(4,a.Inject("$state")),i("design:paramtypes",[Object,Object,Object,c.UserSessionManagerService,Object,l.PrimoExploreService,u.PrimolyticsService,d.JwtUtilService,f.StorageUtil])],m),r.LoginService=m,r.default=[]},{"../../analytics/primolytics.service":480,"../../appConfig/appConfigForward":484,"../../infra/storageUtil.service":571,"../../primoExplore/primoExplore.service":615,"../../primoExplore/primoExploreStates.module":620,"../jwtUtil.service":842,"../userSessionManager.service":853,angular:"angular","ng-metadata/core":362}],846:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./loginHelp.service"),c=e("../../../appConfig/appConfigForward"),l=function(){function e(e,t){this.loginHelpService=e,this.loginIcons=t,this._showMoreInfo=!1}return Object.defineProperty(e.prototype,"displaySigninHelp",{get:function(){return this.loginHelpService.displaySigninHelp},enumerable:!0,configurable:!0}),e.prototype.toggleShowMoreInfo=function(){this._showMoreInfo=!this._showMoreInfo},Object.defineProperty(e.prototype,"showMoreInfoButton",{get:function(){return this.loginHelpService.loginHelpData.links&&1===this.loginHelpService.loginHelpData.links.length&&!this.loginHelpService.loginHelpData.description?(this._showMoreInfoButton=!1,this._showMoreInfo=!0):this._showMoreInfoButton=!0,this._showMoreInfoButton},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showMoreInfo",{get:function(){return this._showMoreInfo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loginHelpLinks",{get:function(){return this.loginHelpService.loginHelpData?this.loginHelpService.loginHelpData.links:[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showHelpDescription",{get:function(){return this.loginHelpService.loginHelpData&&this.loginHelpService.loginHelpData.description?1:0},enumerable:!0,configurable:!0}),e}();n([a.Input(),i("design:type",c.AuthenticationMethod)],l.prototype,"authenticationMethod",void 0),l=n([a.Component({selector:"prm-login-help",templateUrl:"components/security/login/loginHelp/login-help.html"}),o(1,a.Inject("loginIcons")),i("design:paramtypes",[s.LoginHelpService,Object])],l),r.PrmLoginHelp=l},{"../../../appConfig/appConfigForward":484,"./loginHelp.service":847,"ng-metadata/core":362}],847:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../../mappingTablesCache/mappingTablesCache.service"),c=e("../../../nddUtils/configurationUtil.service"),l=function(){function e(e,t,r){var n=this;this.mappingTablesCache=e,this.$translate=t,this.configurationUtil=r,this._displaySigninHelp=!1,this.getHelpCodeData().then(function(e){n.setHelpData(e)},function(e){n._displaySigninHelp=!1})}return e.prototype.setHelpData=function(e){var t=e["nui.login.help"],r=e["nui.help.description"];"nui.login.help"===t&&(t=""),"nui.help.description"===r&&(r="");for(var n=[],i=0;i<3;i++){var o=i+1,a=this.mappingTablesCache.findByProperties("User Login Links",{source1:"login.link"+o});a.length>0&&(this.configurationUtil.isSuprima()?n.push({label:"nui.help.login.link"+o,linkURL:a[0].source2}):n.push({label:"nui.help.login.link"+o,linkURL:a[0].target}))}t&&(r||n&&0!==n.length)?this._displaySigninHelp=!0:this._displaySigninHelp=!1,this._loginHelpData={moreInfo:t,description:r,links:n}},Object.defineProperty(e.prototype,"displaySigninHelp",{get:function(){return this._displaySigninHelp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loginHelpData",{get:function(){return this._loginHelpData},enumerable:!0,configurable:!0}),e.prototype.getHelpCodeData=function(){return this.$translate(["nui.login.help","nui.help.description"])},e}();l=n([a.Injectable(),o(1,a.Inject("$translate")),i("design:paramtypes",[s.MappingTablesCache,Function,c.ConfigurationUtil])],l),r.LoginHelpService=l,r.default=[]},{"../../../mappingTablesCache/mappingTablesCache.service":592,"../../../nddUtils/configurationUtil.service":596,"ng-metadata/core":362}],848:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=function(){function e(e){this.loginIcons=e}return e.prototype.getProfileLinkForDisplay=function(e){var t=e+1;return"parallel.login.link"+t},e.prototype.getProfileLinkDescriptionForDisplay=function(e){var t=e+1;return"parallel.login.description"+t},e}();n([a.Input(),i("design:type",Object)],s.prototype,"authenticationMethod",void 0),s=n([a.Component({selector:"prm-login-item",templateUrl:"components/security/login/loginItem/login-item.html"}),o(0,a.Inject("loginIcons")),i("design:paramtypes",[Object])],s),r.PrmLoginItem=s},{"ng-metadata/core":362}],849:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("../../appConfig/appConfigForward"),c=function(){function e(e,t){this.loginIcons=e,this.$state=t,this.authenticationMethods=s.getAuthenticationMethods()}return e.prototype.getAuthenticationMethods=function(){return this.authenticationMethods},e}();c=n([a.Component({selector:"prm-stand-alone-login",templateUrl:"components/security/login/stand-alone-login.html"}),o(0,a.Inject("loginIcons")),o(1,a.Inject("$state")),i("design:paramtypes",[Object,Object])],c),r.PrmStandAloneLogin=c},{"../../appConfig/appConfigForward":484,"ng-metadata/core":362}],850:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./jwtUtil.service"),a=e("./userSessionManager.service"),s=e("./usernamePasswordLogin.service"),c=e("./usernamePasswordLogin.directive"),l=e("./login/login.module"),u=function(){function e(){}return e}();u=n([i.NgModule({declarations:[c.UsernamePasswordLoginController],providers:[o.JwtUtilService,s.UsernamePasswordLoginService,a.UserSessionManagerService],imports:[l.LoginModule]})],u),r.SecurityModule=u},{"./jwtUtil.service":842,"./login/login.module":844,"./userSessionManager.service":853,"./usernamePasswordLogin.directive":854,"./usernamePasswordLogin.service":855,"ng-metadata/core":362}],851:[function(e,t,r){"use strict";function n(e,t,r){function n(){return{request:function(e){return e.url.includes("primo_library/libweb")||e.url.includes("/primaws/rest")||e.url.includes("/primaws/suprimaLogout")||(e.skipAuthorization=!0),e}}}function o(e){var t={response:function(t){if(e.active){e.modelInstance;if(t.config.url.indexOf("/rest/")>-1){var r=e.getKey(t.config.url);e.addToModel(r,t)}}return t}};return t}function a(e,t){return{responseError:function(r){switch(r.status){case 401:if(null!=r.headers("invalid_jwt")){var n=e.get(u.getInjectableName(h.UserSessionManagerService));n.performLocalLogout(!1)}}return t.reject(r)}}}e.interrupt("keydown mousedown"),t.tokenGetter=i,r.interceptors.push(n),r.interceptors.push("jwtInterceptor"),r.interceptors.push(o),r.interceptors.push(a),o.$inject=[u.getInjectableName(d.ModelService)],a.$inject=["$injector","$q"];
}function i(e){var t=e.getJwt();return t?t:h.bootstrapJwt()}function o(e,t,r){r.absUrl().indexOf("debugmode=true")>-1&&(t.defaults.headers.common["explore-debug-mode"]="1"),e.runStartupCode()}Object.defineProperty(r,"__esModule",{value:!0});var a=e("angular-jwt"),s=e("angular-localforage"),c=e("ng-idle"),l=e("angular-ui-router"),u=e("ng-metadata/core"),d=e("../infra/dataStructures/model/model.service"),p=e("angular"),f=e("../appConfig/appConfig.module"),h=e("./userSessionManager.service");r.default=p.module("primo-explore.security",[a,f.default.name,s,c,l]).config(n).run(o),n.$inject=["IdleProvider","jwtInterceptorProvider","$httpProvider"],i.$inject=[u.getInjectableName(h.UserSessionManagerService)],o.$inject=[u.getInjectableName(h.UserSessionManagerService),"$http","$location"],e("./sessionTimeout.service")},{"../appConfig/appConfig.module":482,"../infra/dataStructures/model/model.service":541,"./sessionTimeout.service":852,"./userSessionManager.service":853,angular:"angular","angular-jwt":13,"angular-localforage":15,"angular-ui-router":27,"ng-idle":360,"ng-metadata/core":362}],852:[function(e,t,r){"use strict";function n(e){function t(t){if(!t)return void e.unwatch();var r=i.getSessionTimeoutParams(),n=60*(t?r.guestSessionTimeout:r.userSessionTimeout);n&&n>0?(e.setIdle(n),e.watch()):e.unwatch()}function r(){return e.isExpired()}function n(t){e.setIdle(t)}var o={isSessionExpired:r,startSession:t,updateSessionTimeoutTime:n};return o}Object.defineProperty(r,"__esModule",{value:!0});var i=e("../appConfig/appConfigForward"),o=e("angular");o.module("primo-explore.security").factory("SessionTimeoutService",n),n.$inject=["Idle","$state"]},{"../appConfig/appConfigForward":484,angular:"angular"}],853:[function(e,t,r){"use strict";function n(){return s}var i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var s,c=e("ng-metadata/core"),l=e("../infra/restUtils.service"),u=e("../appConfig/appConfigForward"),d=e("../appConfig/appConfigForward"),p=e("./jwtUtil.service"),f=e("../search/searchState.service"),h=e("../appConfig/appConfigForward"),m=e("../appConfig/appConfigForward"),g=e("../appConfig/appConfigForward"),v=e("../nddUtils/UUIDGenerator.service"),y=e("../primoExplore/primoExploreStates.module"),b=e("../journals/journals.service"),S=e("../search/personalization/personalizationDialog/personalizationDialog.service"),_=e("../infra/sharedSessionStorage.service"),w="",E=e("lodash/includes"),T=e("../infra/storageUtil.service"),O=e("../mappingTablesCache/mappingTablesCache.service"),I=e("../journals/databases.service");r.bootstrapJwt=n;var P=function(){function e(e,t,r,n,i,o,a,s,c,l,p,f,m,g,v,y,b,S,_,w){this.jwtUtilService=e,this.restUtils=t,this.sessionTimeoutService=r,this.$http=n,this.$location=i,this.$q=o,this.$rootScope=a,this.$state=s,this.$window=c,this.i18nService=l,this.restBaseURLs=p,this.$stateParams=f,this.searchStateService=m,this.sharedSessionStorage=g,this.uuidGenerator=v,this.journalsService=y,this.personalizationDialogService=b,this.storageUtil=S,this.databasesService=_,this.mappingTablesCache=w,this.inst=u.getInstitutionCode(),this.userInstitution=u.getInstitutionCode(),this.attributesMap=u.getAttributesMap(),this.authenticationMethods=u.getAuthenticationMethods(),this.sessionStorageKeys=["stickyFacets"],this.vid=d.getVid(),this.urlContext=h.getUrlContext(),this.uuid=this.uuidGenerator.generateUUID(),this.userSettingsUrl=p.userSettingsBaseURL,this.userDetailsDeferred=this.$q.defer()}return e.prototype.isGuest=function(e){var t,r=this.getUserName(e);return t=!r},e.prototype.getUserName=function(e){var t,r=e?this.jwtUtilService.decodeJWT(e):this.jwtUtilService.getDecodedToken();return t="GUEST"!==r.userGroup?r.userName:""},e.prototype.getUserNameForDisplay=function(){var e,t=this.jwtUtilService.getDecodedToken();return e="GUEST"!==t.userGroup?t.displayName?t.displayName:t.userName:""},e.prototype.getUserLanguage=function(){return this.i18nService.getLanguage()},e.prototype.createOrGetUserArea=function(e){var t,r=this;return this.areaName=e,this.storageUtil.$localForage.getItem(this.areaName).then(function(e){return e?t=e:(r.storageUtil.$localForage.setItem(r.areaName,[]),[])}).then(function(e){return e?e:[]})},e.prototype.getGuestJwt=function(){var e=this,t=this.$location.search().lang,r={targetUrl:encodeURIComponent(this.$location.absUrl()),viewId:this.vid,isGuest:this.isGuest(),lang:t?t:this.attributesMap.interfaceLanguage},n={url:"/primo_library/libweb/webservices/rest/v1/guestJwt/"+this.inst,skipAuthorization:!0,method:"GET",params:r};return s=this.$http(n).then(function(t){return e.guestJwtResponseHandler(t)})},e.prototype.guestJwtResponseHandler=function(e){var t=e.data;if(t.includes("http")&&"SAML"!==this.getAuthenticationSystem()&&"PDS"!==this.getAuthenticationSystem())return this.$window.location.assign(t),t;var r=this.getJwt();return t=w||r||t,this.login(t),t},e.prototype.getJwt=function(){return this.jwtUtilService.getJwtFromLocalStorage()},e.prototype.syncJwtWithTabs=function(e){this.storageUtil.localStorage.setItem("tempJWT",JSON.stringify({jwt:e,uuid:this.uuid,vid:d.getVid()}))},e.prototype.login=function(e){var t=this,r=this.isGuest(e);!this.$location.absUrl().includes("performLogout=true")&&r||(this.syncJwtWithTabs(e),this.storageUtil.localStorage.removeItem("tempJWT")),this.jwtUtilService.storeJwt(e);var n=this.getInterfaceLanguage();this.i18nService.setLanguage(n).then(function(){var e=t.getUserInstitutionCode();if(t.userInstitution!==e){t.userInstitution=e;var n="/primo_library/libweb/webservices/rest/v1/configuration/",i=window.location.protocol+"//"+window.location.host+n+t.vid+"?institution="+e;t.$http.get(i).then(function(e){window.appConfig=e.data,window.appConfig.vid=t.vid})}t.updateUserDetailsInForage(),t.sessionTimeoutService.startSession(r)})},e.prototype.getInterfaceLanguage=function(){var e=this.attributesMap.interfaceLanguage;return this.isGuest()&&this.$stateParams.lang&&(e=this.$stateParams.lang),!this.isGuest()&&this.jwtUtilService.getDecodedToken().language&&(e=this.jwtUtilService.getDecodedToken().language),e},e.prototype.getUserInstitutionCode=function(){return this.jwtUtilService.getDecodedToken().institution},e.prototype.logout=function(e){var t=this,r="";r=this.attributesMap.sessionTimeoutURL,r=""===r?this.getHomePage():r,this.personalizationDialogService.resetPersonalization();for(var n=0,i=this.sessionStorageKeys;n<i.length;n++){var o=i[n];this.sharedSessionStorage.removeItem(o)}e&&this.sessionTimeoutService.startSession(!0),this.i18nService.setLanguage(this.attributesMap.interfaceLanguage).then(function(){var n=!0;"servicesPage"===t.$state.current.name&&(n=!1),t.isGuest()&&!t.isLoggedInIDP()?(n=n&&!e,t.guestLogout(n,r)):t.userLogout(e,n,r)})},e.prototype.isLoggedInIDP=function(){return!(!this.sharedSessionStorage.getItem("loggedInIDP")||"true"!==this.sharedSessionStorage.getItem("loggedInIDP")||!this.sharedSessionStorage.getItem("authenticationProfile"))},e.prototype.runStartupCode=function(){var e=this;this.prevTabDeeplink=window.location.href;var t=this.getJwt();t||this.storageUtil.localStorage.setItem("getJWTFromSessionStorage",this.uuid);var r=function(t){if(t||(t=window.event),t.newValue&&t.newValue!==e.uuid)if("getJWTFromSessionStorage"===t.key&&e.getJwt())e.storageUtil.localStorage.setItem("tempJWT",JSON.stringify({jwt:e.getJwt(),uuid:e.uuid,vid:d.getVid()})),e.storageUtil.localStorage.removeItem("tempJWT");else if("tempJWT"===t.key){var r=JSON.parse(t.newValue);r&&r.uuid!==e.uuid&&r.vid===d.getVid()&&r.jwt!==w&&r.jwt!==e.getJwt()&&e.isGuest()&&(w=r.jwt,e.jwtUtilService.storeJwt(r.jwt),console.log(e.prevTabDeeplink),e.prevTabDeeplink=e.prevTabDeeplink.replace(/(loginId=.*?)(&|(\%26)|$)/i,""),console.log("location assign:"+e.prevTabDeeplink),"login"===e.$state.current.name?window.location.assign(e.prevTabDeeplink):window.location.reload())}else if("logout"===t.key){var r=JSON.parse(t.newValue);r&&r.uuid!==e.uuid&&r.vid===d.getVid()&&(e.jwtUtilService.removeJwt(),e.cleanURL(),e.$rootScope.$apply())}};window.addEventListener?window.addEventListener("storage",r,!1):window.attachEvent("onstorage",r),this.$location.absUrl().includes("performLogout=true")&&(this.$location.search("performLogout",null),this.$location.search("amp;performLogout",null))},e.prototype.performLocalLogout=function(e){var t=this;this.local_logout().then(function(){return t.goToHomepage(e)},function(){return t.goToHomepage(e)})},e.prototype.updateUserArea=function(e){if(!this.area)throw"trying to update user area without creating it";var t=this.area;return t.unshift(e),this.storageUtil.$localForage.setItem(this.areaName,this.area)},e.prototype.removeRecordFromFavorites=function(e){var t=this.area;return t.splice(e,1),this.storageUtil.$localForage.setItem(this.areaName,this.area)},e.prototype.extendUserArea=function(e){var t=this.area;return this.area=t.concat(e),this.storageUtil.$localForage.setItem(this.areaName,this.area)},e.prototype.removeArrayOfRecords=function(e){for(var t=0;t<this.area.length;t++){var r=this.returnRecordId(this.area[t]);if(E(e,r)){var n=this.area;n.splice(t,1),t-=1}}return this.storageUtil.$localForage.setItem(this.areaName,this.area)},e.prototype.returnRecordId=function(e){return this.isGuest()?e.pnx.control.recordid[0]:e},e.prototype.getAuthenticationMethodForSSO=function(){return this.authenticationMethods[0].profileName},e.prototype.getAuthenticationSystem=function(){return this.authenticationMethods[0].authenticationSystem},e.prototype.isRedirectToSessionTimeoutUrl=function(){return"servicesPage"!==this.$state.current.name&&"suprima"===u.getBackendSystem()&&!this.journalsService.isJournalSearch()},e.prototype.guestLogout=function(e,t){var r=this;return this.local_logout().then(function(){e?r.isRedirectToSessionTimeoutUrl()&&""!==t?r.$window.location.assign(t):r.$window.location.assign(r.getHomePage()):r.$window.location.reload()})},e.prototype.userLogout=function(e,t,r){var n=this;this.remoteLogout(e).then(function(e){n.local_logout().then(function(){e?(t&&(e=n.setTargetUrl(e,n.getHomePage())),e=n.addFlagOfLogout(e),n.$window.location.assign(e)):"suprima"===u.getBackendSystem()?n.suprimaLogout(t,r):t?n.goToHomepage(!0):n.$window.location.reload()},function(e){console.log("local logout failed: "+e),n.goToHomepage(!0)})},function(e){console.log("Failed getting redirectUrl: "+e),n.goToHomepage(!0)})},e.prototype.addFlagOfLogout=function(e){var t=this.jwtUtilService.getDecodedToken().authenticationProfile,r=t?m.isRedirectOnlyForAuthName(t):"false";return(!g.isSaml(t)||g.isSaml(t)&&"false"===r)&&(e+="%26performLogout=true"),e},e.prototype.setTargetUrl=function(e,t){return e=e.replace(/(\&|\%26)url(\=|\%3D).*/i,"&url="+t),e=e.replace(/(\&|\%26)RelayState(\=|\%3D).*/i,"&RelayState="+t),e=e.replace(/(\?|\%3F)service(\=|\%3D).*/i,"?service="+encodeURIComponent(t))},e.prototype.suprimaLogout=function(e,t){e&&this.isRedirectToSessionTimeoutUrl()&&""!==t?this.$window.location.assign(t):"servicesPage"===this.$state.current.name||this.journalsService.isJournalSearch()?this.$window.location.reload():this.goToHomepage(!0)},e.prototype.goToHomepage=function(e){e&&(this.searchStateService.setSearchObject({}),this.searchStateService.setResultObject({})),this.$window.location.assign(this.getHomePage())},e.prototype.getHomePage=function(){return this.$state.href(y.STATE_NAMES.SEARCH,{vid:this.vid},{inherit:!1,absolute:!0})},e.prototype.remoteLogout=function(e){this.cleanURL();var t={sessionTimeout:"false",targetURL:encodeURIComponent(this.$location.absUrl())};return e&&(t.sessionTimeout="true"),this.isLoggedInIDP()&&(t.authenticationProfile=this.sharedSessionStorage.getItem("authenticationProfile"),this.sharedSessionStorage.removeItem("loggedInIDP"),this.sharedSessionStorage.removeItem("authenticationProfile")),this.restUtils.postToServlet("/primo_library/libweb/primoExploreLogout",t).then(function(e){var t=e.data.redirect;return t})},e.prototype.cleanURL=function(){this.$location.search().authenticationError&&this.$location.search("authenticationError",null),this.$location.search().authenticationProfile&&this.$location.search("authenticationProfile",null),this.$location.search()["from-new-ui"]&&this.$location.search("from-new-ui",null)},e.prototype.local_logout=function(){return this.storageUtil.localStorage.setItem("logout",JSON.stringify({uuid:this.uuid,vid:d.getVid()})),this.storageUtil.localStorage.removeItem("logout"),this.jwtUtilService.removeJwt(),this.storageUtil.$localForage.clear()},e.prototype.updateUserDetailsInForage=function(){var e=this,t=this.userSettingsUrl+"?vid="+this.vid,r=this.$http({method:"GET",url:t});r.then(function(t){e.userDetailsDeferred.resolve(t),e.storageUtil.$localForage.setItem("userDetails",t.data)})},e.prototype.isJWTValidForApp=function(e){if(!e)return console.log("no jwt so invalid"),!1;console.log(e);var t=this.jwtUtilService.decodeJWT(e),r=t.viewId,n=d.getVid(),i=u.getInstitutionCode(),o=t.institution;return!(r!==n&&(this.isGuest()||!this.isViewCentral(n)&&o!==i))},e.prototype.isViewCentral=function(e){var t=this.mappingTablesCache.findByProperties("Central View Configuration",{source1:"Keep users signed-in when switching to or from view",source2:"true",target:e});return t&&t.length>0},e}();P=i([c.Injectable(),a(2,c.Inject("SessionTimeoutService")),a(3,c.Inject("$http")),a(4,c.Inject("$location")),a(5,c.Inject("$q")),a(6,c.Inject("$rootScope")),a(7,c.Inject("$state")),a(8,c.Inject("$window")),a(9,c.Inject("I18nService")),a(10,c.Inject("restBaseURLs")),a(11,c.Inject("$stateParams")),o("design:paramtypes",[p.JwtUtilService,l.RestUtils,Object,Function,Object,Function,Object,Object,Object,Object,Object,Object,f.SearchStateService,_.SharedSessionStorage,v.UUIDGenerator,b.JournalsService,S.PersonalizationDialogService,T.StorageUtil,I.DatabasesService,O.MappingTablesCache])],P),r.UserSessionManagerService=P},{"../appConfig/appConfigForward":484,"../infra/restUtils.service":567,"../infra/sharedSessionStorage.service":569,"../infra/storageUtil.service":571,"../journals/databases.service":584,"../journals/journals.service":588,"../mappingTablesCache/mappingTablesCache.service":592,"../nddUtils/UUIDGenerator.service":594,"../primoExplore/primoExploreStates.module":620,"../search/personalization/personalizationDialog/personalizationDialog.service":774,"../search/searchState.service":814,"./jwtUtil.service":842,"lodash/includes":260,"ng-metadata/core":362}],854:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./usernamePasswordLogin.service"),c=e("./jwtUtil.service"),l=e("angular"),u=function(){function e(e,t,r,n,i,o){this.usernamePasswordLoginService=e,this.$mdDialog=t,this.jwtUtilService=r,this.i18nService=n,this.$state=i,this.$http=o}return e.prototype.login=function(){var e=this,t=this.jwtUtilService.getDecodedToken().user;this.usernamePasswordLoginService.login(this.username,this.password,this.authenticationProfileName).then(function(){e.$mdDialog.hide();var r=e.jwtUtilService.getDecodedToken();""!=r.language&&r.language!=e.i18nService.getLanguage()&&e.i18nService.setLanguage(r.language).then(function(){e.$state.go(e.$state.current,{},{reload:!0})}),e.usernamePasswordLoginService.copyFavoritesRecordsThatWereSavedForGuest(t)},function(t){e.$mdDialog.show(e.$mdDialog.alert().parent(l.element(document.querySelector("#popupContainer"))).clickOutsideToClose(!0).title("Login failed").textContent("Username/Password is invalid").ok("Close"))})},e}();n([a.Input(),i("design:type",String)],u.prototype,"authenticationProfileName",void 0),u=n([a.Component({selector:"prm-username-password-login",templateUrl:"components/security/username-password-login.html"}),o(1,a.Inject("$mdDialog")),o(3,a.Inject("I18nService")),o(4,a.Inject("$state")),o(5,a.Inject("$http")),i("design:paramtypes",[s.UsernamePasswordLoginService,Object,c.JwtUtilService,Object,Object,Function])],u),r.UsernamePasswordLoginController=u},{"./jwtUtil.service":842,"./usernamePasswordLogin.service":855,angular:"angular","ng-metadata/core":362}],855:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./userSessionManager.service"),c=e("../infra/restUtils.service"),l=e("../appConfig/appConfigForward"),u=e("../search/briefResult/briefResult.service"),d=e("../favorites/favorites.service"),p=e("./jwtUtil.service"),f=e("../primoExplore/primoExploreStates.module"),h=e("../infra/storageUtil.service"),m=e("../favorites/searchHistory/searchHistory.service"),g=e("../search/personalization/personalizationButton/personalizeResultsButton.service"),v=function(){function e(e,t,r,n,i,o,a,s,c,u,d){this.restUtils=e,this.userSessionManagerService=t,this.$http=r,this.searchHistoryService=n,this.jwtUtilService=i,this.briefResultService=o,this.restBaseURLs=a,this.storageUtil=s,this.favoritesService=c,this.personalizeResultsButtonService=u,this.$state=d,this.inst=l.getInstitutionCode(),this.vid=l.getVid(),this.GET_LABELS_URL=a.favoritesBaseURL,this.UPDATE_FAVORITES_URL=a.favoritesBaseURL+"/"}return e.prototype.login=function(e,t,r){var n=this,i={authenticationProfile:r,username:e,password:t,institution:this.inst,view:this.vid};return this.restUtils.postToServlet("/primo_library/libweb/primoExploreLogin",i).then(function(e){var t=e.data;return n.userSessionManagerService.login(t),t})},e.prototype.buildPayloads=function(e){for(var t,r,n=[],i=0;i<e.length;i++){t=this.getContext(e[i]),r=e[i].pnx.control.recordid[0];var o={recordId:r,context:t,pnx:e[i].pnx};n.push(o)}var a={add:{records:n}};return a},e.prototype.getContext=function(e){var t=e.pnx.control.recordid[0],r=e.context;return void 0===r&&(r=t.startsWith("TN_")?"PC":t.startsWith("RS_")?"SP":"L"),r},e.prototype.getFavorites=function(){return this.$http.get(this.GET_LABELS_URL)},e.prototype.addFavorites=function(e){var t=this.buildPayloads(e);return this.$http.post(this.UPDATE_FAVORITES_URL,t)},e.prototype.copyFavoritesRecordsThatWereSavedForGuest=function(e){var t=this;void 0!=e?this.userSessionManagerService.createOrGetUserArea(e).then(function(e){e.length>0?t.addFavorites(e).then(function(){t.getFavoritesFromServer()}):t.getFavoritesFromServer()}):this.getFavoritesFromServer()},e.prototype.changeSearchHistorylocalForageKey=function(e){this.searchHistoryService.changeSearchHistorylocalForageKey(e)},e.prototype.getFavoritesFromServer=function(){var e=this;this.getFavorites().then(function(t){var r=t.data,n=r.records.map(function(e){return e.recordId});e.userSessionManagerService.createOrGetUserArea(e.jwtUtilService.getDecodedToken().user).then(function(t){e.userSessionManagerService.area=t,n.length>0&&e.userSessionManagerService.extendUserArea(n).then(function(){e.briefResultService.buildJsonOdIdsAndPins(),e.$state.current.name===f.STATE_NAMES.FAVORITES&&e.favoritesService.getItemsFromServer()})})})},e}();v=n([a.Injectable(),o(2,a.Inject("$http")),o(6,a.Inject("restBaseURLs")),o(10,a.Inject("$state")),i("design:paramtypes",[c.RestUtils,s.UserSessionManagerService,Function,m.SearchHistoryService,p.JwtUtilService,u.BriefResultService,Object,h.StorageUtil,d.FavoritesService,g.PersonalizeResultsButtonService,Object])],v),r.UsernamePasswordLoginService=v},{"../appConfig/appConfigForward":484,"../favorites/favorites.service":511,"../favorites/searchHistory/searchHistory.service":525,"../infra/restUtils.service":567,"../infra/storageUtil.service":571,"../primoExplore/primoExploreStates.module":620,"../search/briefResult/briefResult.service":651,"../search/personalization/personalizationButton/personalizeResultsButton.service":772,"./jwtUtil.service":842,"./userSessionManager.service":853,"ng-metadata/core":362}],856:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./servicesPage.directive"),a=e("./servicesPage.service"),s=function(){function e(){}return e}();s=n([i.NgModule({declarations:[o.PrmServicesPage],providers:[a.ServicesPageService],imports:[]})],s),r.ServicePagesModule=s},{"./servicesPage.directive":857,"./servicesPage.service":858,"ng-metadata/core":362}],857:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./servicesPage.service"),c=function(){function e(e,t,r){var n=this;this.servicesPageService=e,this.$stateParams=t,this.$window=r;var i=e.getItem(t.institution,t.vid);i.then(function(e){e.data.redirect_to?r.location.assign(e.data.redirect_to):n.item=e.data})}return e}();c=n([a.Component({selector:"prm-services-page",templateUrl:"components/servicesPage/services-page.html"}),o(1,a.Inject("$stateParams")),o(2,a.Inject("$window")),i("design:paramtypes",[s.ServicesPageService,Object,Object])],c),r.PrmServicesPage=c},{"./servicesPage.service":858,"ng-metadata/core":362}],858:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=function(){function e(e,t,r){this.$http=e,this.$location=t,this.OPENURL_API_URL=r.openUrl}return e.prototype.getItem=function(e,t){var r=this.$location.search(),n={params:r};return this.$http.get(this.OPENURL_API_URL+"/"+e+"/"+t,n)},e}();s=n([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("$location")),o(2,a.Inject("restBaseURLs")),i("design:paramtypes",[Function,Object,Object])],s),r.ServicesPageService=s},{"ng-metadata/core":362}],859:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./sourceRecord.service"),c=function(){function e(e,t){this.sourceRecordService=e,this.$stateParams=t}return e.prototype.ngOnInit=function(){var e=this;this.sourceRecordService.getSourceRecord(this.$stateParams.docId).then(function(t){return e.sourceRecord=t.data})},e.prototype.getTemplateUrl=function(){return this.sourceRecord},e}();c=n([a.Component({selector:"prm-source-record",templateUrl:"components/sourceRecord/source-record.html"}),o(1,a.Inject("$stateParams")),i("design:paramtypes",[s.SourceRecordService,Object])],c),r.PrmSourceRecord=c},{"./sourceRecord.service":861,"ng-metadata/core":362}],860:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./sourceRecord.service"),a=e("./sourceRecord.directive"),s=function(){function e(){}return e}();s=n([i.NgModule({declarations:[a.PrmSourceRecord],providers:[o.SourceRecordService],imports:[]})],s),r.SourceRecordModule=s},{"./sourceRecord.directive":859,"./sourceRecord.service":861,"ng-metadata/core":362}],861:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=function(){function e(e,t){this.$http=e,this.restBaseURLs=t}return e.prototype.getSourceRecord=function(e){var t=this.restBaseURLs.sourceRecord+"?docId="+e;return this.$http.get(t)},e}();s=n([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),i("design:paramtypes",[Function,Object])],s),r.SourceRecordService=s},{"ng-metadata/core":362}],862:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=function(){function e(){}return e}();o=n([i.Component({selector:"prm-spinner",templateUrl:"components/spinner/spinner.html"})],o),r.PrmSpinner=o},{"ng-metadata/core":362}],863:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./spinner.directive"),a=function(){function e(){}return e}();a=n([i.NgModule({declarations:[o.PrmSpinner],providers:[],imports:[]})],a),r.SpinnerModule=a},{"./spinner.directive":862,"ng-metadata/core":362}],864:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("./static.service"),s=function(){function e(e){this.staticService=e}return e.prototype.getTemplateUrl=function(){return this.staticService.getTemplateUrl(this.section)},e}();n([o.Input(),i("design:type",String)],s.prototype,"section",void 0),s=n([o.Component({selector:"prm-static",template:'<div ng-include="$ctrl.getTemplateUrl()"></div>'}),i("design:paramtypes",[a.StaticService])],s),r.PrmStatic=s},{"./static.service":866,"ng-metadata/core":362}],865:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./static.service"),a=e("./static.directive"),s=e("./staticPage"),c=function(){function e(){}return e}();c=n([i.NgModule({declarations:[a.PrmStatic,s.PrmStaticPage],providers:[o.StaticService],imports:[]})],c),r.StaticModule=c},{"./static.directive":864,"./static.service":866,"./staticPage":867,"ng-metadata/core":362}],866:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("../appConfig/customizationConfig"),s=e("../appConfig/staticFiles"),c=e("lodash/merge"),l=e("../security/userSessionManager.service"),u=function(){function e(e){this.userSessionManagerService=e,this.staticHtml=c(s.getStaticOtbHtml(),a.getStaticHtml()||{})}return e.prototype.getTemplateUrl=function(e){var t=this.userSessionManagerService.getUserLanguage();return this.staticHtml[e][t]||this.staticHtml[e].default},e}();u=n([o.Injectable(),i("design:paramtypes",[l.UserSessionManagerService])],u),r.StaticService=u,r.default=[]},{"../appConfig/customizationConfig":485,"../appConfig/staticFiles":488,"../security/userSessionManager.service":853,"lodash/merge":287,"ng-metadata/core":362}],867:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){
var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=function(){function e(e){this.$stateParams=e,this.section=e.section}return e}();s=n([a.Component({selector:"prm-static-page",template:'<prm-static [section]="$ctrl.section"></prm-static>'}),o(0,a.Inject("$stateParams")),i("design:paramtypes",[Object])],s),r.PrmStaticPage=s},{"ng-metadata/core":362}],868:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./tags.service"),c=e("../security/userSessionManager.service"),l=e("../infra/widgets/alerts/alertFactory.service"),u=function(){function e(e,t,r,n){this.userSessionManagerService=e,this.tagsService=t,this.alertService=r,this.$location=n,this.tagsService.getTagsFromApi(),this.tagsService.isInSearch=!1,this.borInfoAlert=r.create(l.ALERT_MSG_TYPE.SIGNIN),this.borInfoAlert.show("nui.bor_info_failed")}return e.prototype.userLoggedIn=function(){return this.userSessionManagerService.getUserName().length>0},e.prototype.isInSearch=function(){return this.tagsService.isInSearch},Object.defineProperty(e.prototype,"popularTags",{get:function(){return this.tagsService.popularTags},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recentTags",{get:function(){return this.tagsService.recentTags},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"myTags",{get:function(){return this.tagsService.myTags},enumerable:!0,configurable:!0}),e.prototype.displayBorInfoAlert=function(){return!(!this.$location.search().authenticationError||"1"!==this.$location.search().authenticationError)},e}();u=n([a.Component({selector:"prm-tags",templateUrl:"components/tags/tags.html"}),o(3,a.Inject("$location")),i("design:paramtypes",[c.UserSessionManagerService,s.TagsService,l.AlertFactory,Object])],u),r.PrmTags=u},{"../infra/widgets/alerts/alertFactory.service":574,"../security/userSessionManager.service":853,"./tags.service":870,"ng-metadata/core":362}],869:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./tags.service"),a=e("./tags.directive"),s=e("./tagsList/tagsList.module"),c=e("./tagsSearchBar/tagsSearchBar.module"),l=e("./tagsResults/tagsResults.module"),u=function(){function e(){}return e}();u=n([i.NgModule({declarations:[a.PrmTags],providers:[o.TagsService],imports:[s.TagsListModule,c.TagsSearchBarModule,l.TagsResultsModule]})],u),r.TagsModule=u},{"./tags.directive":868,"./tags.service":870,"./tagsList/tagsList.module":872,"./tagsResults/tagsResults.module":875,"./tagsSearchBar/tagsSearchBar.module":878,"ng-metadata/core":362}],870:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=(e("angular"),function(){function e(e,t){this.$http=e,this.restBaseURLs=t,this.tagsBulkSize=20}return e.prototype.getTagsFromApi=function(){var e=this;this.GET_API_URL=this.restBaseURLs.tagsBaseURL,this.$http.get(this.GET_API_URL).then(function(t){e.popularTags=t.data.popularTags,e.recentTags=t.data.recentTag,e.myTags=t.data.recentUserTags})},e.prototype.doTagsSearch=function(e){var t=this;this.searchInProgress=!0,this.GET_API_URL=this.restBaseURLs.tagsSearchBaseURL+e,this.$http.get(this.GET_API_URL).then(function(e){t.searchInProgress=!1,t.tagsSearchResult=e.data.tagsSearchResult})},e.prototype.getRecordTagsFromApi=function(e){var t=this;this.GET_API_URL=this.restBaseURLs.tagsBaseURL+"/"+e,this.$http.get(this.GET_API_URL).then(function(e){t.allRecordNonUserTags=e.data.nonUserTags,t.recordUserTags=e.data.userTags,t.allRecordNonUserTags.length<t.tagsBulkSize?(t.showAllNonUserTags=!0,t.recordNonUserTags=t.allRecordNonUserTags):(t.showAllNonUserTags=!1,t.recordNonUserTags=t.allRecordNonUserTags.slice(0,t.tagsBulkSize))})},e.prototype.addTag=function(e,t){var r=e.pnx.control.recordid;this.GET_API_URL=this.restBaseURLs.tagsBaseURL+"/"+r;var n=this.getContext(e),i={add:{tagName:t,context:n,pnx:e.pnx}};return this.$http.post(this.GET_API_URL,i)},e.prototype.removeTag=function(e,t){var r=e.pnx.control.recordid;this.GET_API_URL=this.restBaseURLs.tagsBaseURL+"/"+r;var n={delete:{tagName:t}};return this.$http.post(this.GET_API_URL,n)},e.prototype.getContext=function(e){var t=e.pnx.control.recordid[0],r=e.context;return void 0===r&&(r=t.startsWith("TN_")?"PC":t.startsWith("RS_")?"SP":"L"),r},e.prototype.showAllRecordNonUserTags=function(){this.showAllNonUserTags=!0,this.recordNonUserTags=this.allRecordNonUserTags},e}());s=n([a.Injectable(),o(0,a.Inject("$http")),o(1,a.Inject("restBaseURLs")),i("design:paramtypes",[Function,Object])],s),r.TagsService=s;var c=function(){function e(e){this.count=e.count,this.tagName=e.tagName}return e}();r.TagItem=c},{angular:"angular","ng-metadata/core":362}],871:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("ng-metadata/core"),s=e("./tagsList.service"),c=e("../../appConfig/appConfigForward"),l=e("../tags.service"),u=e("../../security/userSessionManager.service"),d=e("../../security/login/login.service"),p=e("../../analytics/primolytics.service"),f=e("lodash/find"),h=e("angular"),m=function(){function e(e,t,r,n,i,o,a){this.userSessionManagerService=e,this.tagsListService=t,this.tagsService=r,this.loginService=n,this.primolyticsService=i,this.$state=o,this.$mdDialog=a,this.validInputRegex="^[0-9A-Za-z_'-]+$",this.invalidInputRestResponse="The request sent by the client was syntactically incorrect.",this.editTagsMode=!1,this.isSearchTextValid=!0,this.tagsService.getTagsFromApi()}return e.prototype.resultSearchUrl=function(e){var t="usertag,contains,"+e+",AND";"suprima"===c.getBackendSystem()&&(t="user_tags,exact,"+e+",AND");({mode:"advanced",query:t,vid:c.getVid()});return JSON.stringify({vid:c.getVid(),query:t,mode:"advanced"})},e.prototype.closeDialog=function(){this.$mdDialog.hide()},Object.defineProperty(e.prototype,"autocompleteTagslist",{get:function(){return this.tagsService.myTags},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showAllNonUserTags",{get:function(){return this.tagsService.showAllNonUserTags},enumerable:!0,configurable:!0}),e.prototype.showAllRecordNonUserTags=function(){return this.tagsService.showAllRecordNonUserTags()},e.prototype.editTags=function(){this.editTagsMode=!0},e.prototype.userLoggedIn=function(){return this.userSessionManagerService.getUserName().length>0},e.prototype.onTagRemove=function(e){this.tagsService.removeTag(this.item,e.tagName)},e.prototype.handleLoginClick=function(){this.loginService.handleLoginClick()},e.prototype.addTag=function(e){var t=this;e.tagName&&(e=e.tagName);var r=this.tagsService.addTag(this.item,e);r.then(function(e){return t.onSuccess()},function(e){return t.onError(e.data)})},e.prototype.searchTextChange=function(){this.searchText.length>0&&!this.isValidInput(this.searchText)?this.isSearchTextValid=!1:this.isSearchTextValid=!0},e.prototype.isValidInput=function(e){return!f(this.usertagslist,{tagName:e})&&!f(this.tagslist,{tagName:e})&&e.length<36&&e.length>0&&e.match(this.validInputRegex)},e.prototype.querySearch=function(e){var t=e?this.tagsService.myTags.filter(this.createFilterFor(this.searchText)):this.tagsService.myTags;return t},e.prototype.createFilterFor=function(e){if(e){var t=h.lowercase(e);return function(e){return 0===e.tagName.indexOf(t)}}return function(e){return!0}},e.prototype.onSuccess=function(){return this.tagsService.getRecordTagsFromApi(this.item.pnx.control.recordid),this.isSearchTextValid=!0,null},e.prototype.onError=function(e){return this.tagsService.getRecordTagsFromApi(this.item.pnx.control.recordid),e.indexOf(this.invalidInputRestResponse)!==-1&&(this.isSearchTextValid=!1),null},e}();n([a.Input(),i("design:type",Object)],m.prototype,"item",void 0),n([a.Input(),i("design:type",Array)],m.prototype,"tagslist",void 0),n([a.Input(),i("design:type",Array)],m.prototype,"usertagslist",void 0),n([a.Input(),i("design:type",Boolean)],m.prototype,"editable",void 0),n([a.Input(),i("design:type",Boolean)],m.prototype,"isFullDisplay",void 0),n([p.beacon({p:"tags",op:"deleteTag"}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],m.prototype,"onTagRemove",null),n([p.beacon({p:"tags",op:"addTags"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],m.prototype,"onSuccess",null),m=n([a.Component({selector:"prm-tags-list",templateUrl:"components/tags/tagsList/tags-list.html"}),o(5,a.Inject("$state")),o(6,a.Inject("$mdDialog")),i("design:paramtypes",[u.UserSessionManagerService,s.TagsListService,l.TagsService,d.LoginService,p.PrimolyticsService,Object,Object])],m),r.PrmTagsList=m},{"../../analytics/primolytics.service":480,"../../appConfig/appConfigForward":484,"../../security/login/login.service":845,"../../security/userSessionManager.service":853,"../tags.service":870,"./tagsList.service":873,angular:"angular","lodash/find":247,"ng-metadata/core":362}],872:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./tagsList.service"),a=e("./tagsList.directive"),s=function(){function e(){}return e}();s=n([i.NgModule({declarations:[a.PrmTagsList],providers:[o.TagsListService],imports:[]})],s),r.TagsListModule=s},{"./tagsList.directive":871,"./tagsList.service":873,"ng-metadata/core":362}],873:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=function(){function e(){}return e}();a=n([o.Injectable(),i("design:paramtypes",[])],a),r.TagsListService=a},{"ng-metadata/core":362}],874:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("./tagsResults.service"),s=e("ng-metadata/core"),c=e("../tags.service"),l=e("../../primoExplore/primoExploreStates.module"),u=e("../../appConfig/appConfigForward"),d=e("../../nddUtils/configurationUtil.service"),p=function(){function e(e,t,r,n){this.tagsResultsService=e,this.tagsService=t,this.$state=r,this.configurationUtil=n,this.tagsResultsLimit=1e3}return Object.defineProperty(e.prototype,"tagsSearchResult",{get:function(){return this.tagsService.tagsSearchResult},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchInProgress",{get:function(){return this.tagsService.searchInProgress},enumerable:!0,configurable:!0}),e.prototype.resultSearchUrl=function(e){var t="usertag,contains,"+e+",AND";this.configurationUtil.isSuprima()&&(t="user_tags,exact,"+e+",AND");var r={mode:"advanced",query:t,vid:u.getVid()};return this.$state.href(l.STATE_NAMES.SEARCH,r)},e}();p=n([s.Component({selector:"prm-tags-results",templateUrl:"components/tags/tagsResults/tags-results.html"}),o(2,s.Inject("$state")),i("design:paramtypes",[a.TagsResultsService,c.TagsService,Object,d.ConfigurationUtil])],p),r.PrmTagsResults=p},{"../../appConfig/appConfigForward":484,"../../nddUtils/configurationUtil.service":596,"../../primoExplore/primoExploreStates.module":620,"../tags.service":870,"./tagsResults.service":876,"ng-metadata/core":362}],875:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./tagsResults.service"),a=e("./tagsResults.directive"),s=function(){function e(){}return e}();s=n([i.NgModule({declarations:[a.PrmTagsResults],providers:[o.TagsResultsService],imports:[]})],s),r.TagsResultsModule=s},{"./tagsResults.directive":874,"./tagsResults.service":876,"ng-metadata/core":362}],876:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=function(){function e(){}return e}();o=n([i.Injectable()],o),r.TagsResultsService=o},{"ng-metadata/core":362}],877:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=e("./tagsSearchBar.service"),s=e("../tags.service"),c=function(){function e(e,t){this.tagsService=e,this.tagsSearchBarService=t}return e.prototype.doTagsSearch=function(){0===this.mainSearchField.length?this.tagsService.isInSearch=!1:this.tagsService.isInSearch=!0,this.tagsService.doTagsSearch(this.mainSearchField)},e}();c=n([o.Component({selector:"prm-tags-search-bar",templateUrl:"components/tags/tagsSearchBar/tags-search-bar.html"}),i("design:paramtypes",[s.TagsService,a.TagsSearchBarService])],c),r.PrmTagsSearchBar=c},{"../tags.service":870,"./tagsSearchBar.service":879,"ng-metadata/core":362}],878:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=e("ng-metadata/core"),o=e("./tagsSearchBar.service"),a=e("./tagsSearchBar.directive"),s=function(){function e(){}return e}();s=n([i.NgModule({declarations:[a.PrmTagsSearchBar],providers:[o.TagsSearchBarService],imports:[]})],s),r.TagsSearchBarModule=s},{"./tagsSearchBar.directive":877,"./tagsSearchBar.service":879,"ng-metadata/core":362}],879:[function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(r,"__esModule",{value:!0});var o=e("ng-metadata/core"),a=function(){function e(){}return e}();a=n([o.Injectable(),i("design:paramtypes",[])],a),r.TagsSearchBarService=a},{"ng-metadata/core":362}],880:[function(e,t,r){!function(){"use strict";function t(e,t){var r="NOT_DEFINED";return function(n){var i=e.getMapping(n),o=n,a=n.lastIndexOf(".");a!==-1&&a!==n.length-1&&(o=n.substring(a+1),o=o.replace(/_/g," "),o=o.replace(/-/g," "));var s;return i||(s=e.getMapping(o),s!==r&&(e.setMapping(o,r),s=t.instant(o),s&&(e.setMapping(o,s),e.setMapping(n,s)))),i===r?(e.setMapping(o,o),e.setMapping(n,o),o):i||s||o}}var r=e("angular");r.module("prmTranslate").factory("PrmMissingTranslationHandler",t),t.$inject=["PrmTranslationIdToCodeMapping","$translate"]}()},{angular:"angular"}],881:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("angular");r.default=n.module("prmTranslate",[]),e("./prmMissingTranslationHandler.factory"),e("./prmTranslatePlaceholder.factory"),e("./prmTranslationIdToCodeMapping.factory")},{"./prmMissingTranslationHandler.factory":880,"./prmTranslatePlaceholder.factory":882,"./prmTranslationIdToCodeMapping.factory":883,angular:"angular"}],882:[function(e,t,r){!function(){"use strict";function t(e,t){var r;return{setLocale:function(e){r=e},getInterpolationIdentifier:function(){return"custom"},interpolate:function(r,n){function i(e){var r=e.code;if(!("prefix"in e))return r;var n,i=e.prefix;if(n=i?i+"."+r:r,t.setMapping(n,r),e.tag){var o=Object.keys(e.tag)[0];return"<"+o+" "+e.tag[o].join(" ")+'" translate="'+n+'"></'+o+">"}return'<span class="'+e.cssClass+'" translate="'+n+'"> </span>'}function o(e,t){var r=n.placeholders[t],o=r.map(i).join(" ");return o}if(n=n||{},n.placeholders&&r.search(/\{(\d+)}/)>-1){var a=r.replace(/\{(\d+)}/g,o);return e(a)(n)}if(!r.includes("{{"))return r;try{return e(r)(n)}catch(e){return r}}}}var r=e("angular");r.module("prmTranslate").factory("prmInterpolation",t),t.$inject=["$interpolate","PrmTranslationIdToCodeMapping"]}()},{angular:"angular"}],883:[function(e,t,r){!function(){"use strict";function t(){function e(e){return r[e]}function t(e,t){r[e]=t}var r={},n={getMapping:e,setMapping:t};return n}var r=e("angular");r.module("prmTranslate").factory("PrmTranslationIdToCodeMapping",t)}()},{angular:"angular"}]},{},[431,481]);


angular.module('primo-explore.config').run(['$templateCache', function($templateCache) {$templateCache.put('components/infra/formBuilder/field/form-field-radio.html','<md-input-container layout="row" layout-align="start start">\r\n    <md-radio-group ng-model="$ctrl.formData[$ctrl.field.name]"\r\n    \t\t\t    layout="{{$ctrl.field.style && $ctrl.field.style.layout ? $ctrl.field.style.layout : \'row\'}}"\r\n    \t\t\t    layout-align="start center" >\r\n        <p ng-if="$ctrl.field.label" class="label" flex="noshrink" for="prm_{{$ctrl.field.label}}" translate="{{$ctrl.field.label}}"></p>\r\n        <div {{$ctrl.field.style && $ctrl.field.style.layout === \'column\' ? \'flex\' : \'\'}}\r\n        \tlayout="row" layout-align="start center"\r\n        \tclass="layout-align-start-center layout-row\r\n        \t\t{{$ctrl.field.style && $ctrl.field.style.layout === \'column\' ? \'flex\' : \'\'}}"\r\n        \tng-repeat="option in $ctrl.field.options">\r\n\r\n\t        <md-radio-button  value="{{option.value}}"\r\n\t        \t\t\t\t (click)="$ctrl.field.events.onClick($ctrl.field.events.params)" >\r\n\t        \t{{option.label | translate}}\r\n\r\n\t\t        <div ng-if="option.info" class="inline-help ng-scope">\r\n\t\t        \t<md-tooltip>\r\n\t \t\t\t\t\t{{option.info | translate}}\r\n\t \t\t\t\t</md-tooltip>\r\n\r\n\t\t        \t<prm-icon\r\n\t\t\t              [icon-type]="::$ctrl.actionIcons.info.type"\r\n\t\t\t              [svg-icon-set]="::$ctrl.actionIcons.info.iconSet"\r\n\t\t\t              [icon-definition]="::$ctrl.actionIcons.info.icon">\r\n\t\t\t\t    </prm-icon>\r\n\r\n\t\t        </div>\r\n\t        </md-radio-button>\r\n        </div>\r\n    </md-radio-group>\r\n</md-input-container>\r\n');
$templateCache.put('components/account/account.html','<div layout="column" layout-fill class="header relative-position"><prm-topbar [links]="$ctrl.skipLinks"></prm-topbar><h1 class="accessible-only">{{(\'nui.aria.page.libraryCard\' | translate)}}</h1></div><md-toolbar class="default-toolbar"><div class="md-toolbar-tools" layout="row"><div flex="0" flex-md="5" flex-lg="10" flex-xl="20" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus}"></div><md-button aria-label="{{\'nui.aria.account.back\' | translate}}" ng-show="$ctrl.displayBackToSearchLink" class="back-button offset-to-left" (click)="$ctrl.backToSearch()" id="backtosearch" role="link"><md-tooltip md-delay="400"><span translate="nui.aria.account.back"></span></md-tooltip><prm-icon aria-label="{{\'nui.aria.account.back\' | translate}}" icon-type="{{::$ctrl.accountIcons.backToSearch.type}}" svg-icon-set="{{::$ctrl.accountIcons.backToSearch.iconSet}}" icon-definition="{{::$ctrl.accountIcons.backToSearch.icon}}"></prm-icon></md-button><md-divider class="toolbar-divider visible"></md-divider><h1 class="toolbar-title"><span ng-if="$ctrl.isOvp()" translate="menu.myaccount.my_library_card"></span> <span ng-if="!$ctrl.isOvp()" translate="nui.details.header.ovl"></span></h1><prm-linked-user-selector></prm-linked-user-selector></div></md-toolbar><md-content layout="row" layout-fill class="padded-container" layout-align="center start"><div flex="0" flex-md="5" flex-lg="10" flex-xl="20" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus}"></div><div class="main" layout="row" flex><prm-account-overview ng-if="$ctrl.isOvp()" layout-fill></prm-account-overview><prm-personal-info flex ng-if="!$ctrl.isOvp()" layout-fill></prm-personal-info></div><div flex="0" flex-md="5" flex-lg="10" flex-xl="20" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus}"></div></md-content><prm-account-after parent-ctrl="$ctrl"></prm-account-after>');
$templateCache.put('components/blankIll/blank-ill.html','<div layout="column" layout-fill class="header relative-position"><prm-topbar></prm-topbar></div><prm-spinner ng-if="$ctrl.getRequestIsLoading()" class="default-loader dark-on-light overlay-cover no-text" layout="row" layout-align="center center"></prm-spinner><md-tabs md-dynamic-height md-dynamic- md-selected="$ctrl.selectedTab" ng-show="!$ctrl.getRequestIsLoading()" class="tabs-as-app hidden-tabs"><md-tab></md-tab><md-tab></md-tab><md-tab label="Request Form"><md-content><prm-request blank-service="AlmaResourceSharing" (change-tab-event)="$ctrl.onChangeTabEvent($event)" layout="column"></prm-request></md-content></md-tab><md-tab label="copyrights"><md-content layout="column"><prm-copyright (change-tab-event)="$ctrl.onChangeTabEvent($event)"></prm-copyright></md-content></md-tab><md-tab label="Request reply"><md-content><div ng-class="$ctrl.responseStatus.isSuccess ? \'success-bar\': \'error-bar\'" class="bar large-bar" layout="row" layout-align="center center" layout-padding layout-fill><span>{{$ctrl.responseStatus.msg === \'ok\' ? \'Your request was successfully placed\' : $ctrl.responseStatus.msg}}</span></div></md-content></md-tab></md-tabs><prm-blank-ill-after parent-ctrl="$ctrl"></prm-blank-ill-after>');
$templateCache.put('components/citationLinker/citation-linker.html','<header layout="row"><div flex="0" flex-md="15" flex-lg="20" flex-xl="30"></div><div class="padding-medium padding-bottom-zero margin-bottom-medium" flex><h1 class="light-text margin-bottom-tiny" ng-style="$mdMedia(\'xs\') && {\'font-size\': \'1.5em\'}"><span translate="nui.citationLinker.title1"></span> <small translate="nui.citationLinker.title2"></small></h1><p><span translate="nui.citationLinker.helptext1"></span><br><span translate="nui.citationLinker.helptext2"></span></p></div><div flex="0" flex-md="15" flex-lg="20" flex-xl="30"></div></header><main tabindex="0" role="search" layout="row"><div flex="0" flex-md="15" flex-lg="20" flex-xl="30"></div><div class="padding-left-medium padding-right-medium margin-bottom-large" layout="column" flex><div class="form-focus" layout="column" flex><form class="request-form" ng-cloak action="{{$ctrl.getBaseURL()}}" name="citationLinker" method="get" target="_blank" enctype="application/x-www-form-urlencoded; charset=utf-8"><div class="form-shaded-content padding-medium" layout="row"><md-radio-group layout="row" ng-model="$ctrl.activeTab" ng-change="$ctrl.changeTab()"><md-radio-button ng-repeat="tab in ::$ctrl.tabs" value="{{tab}}"><span translate="citationLinker.{{tab}}"></span></md-radio-button></md-radio-group></div><input ng-if="$ctrl.isSuprima()" type="hidden" name="institution" id="institution" value="{{$ctrl.institutionCode}}"/> <input ng-if="$ctrl.isSuprima()" type="hidden" name="vid" id="vid" value="{{$ctrl.vid}}"/> <input type="hidden" name="ctx_ver" id="ctx_ver" value="Z39.88-2004"/> <input type="hidden" name="rft.genre" id="rft.genre" value="{{$ctrl.activeTab}}"/> <input type="hidden" name="ctx_enc" id="ctx_enc" value="info:ofi/enc:UTF-8"/> <input type="hidden" name="url_ver" id="url_ver" value="Z39.88-2004"/> <input type="hidden" name="url_ctx_fmt" id="url_ctx_fmt" value="infofi/fmt:kev:mtx:ctx"/> <input type="hidden" name="rfr_id" id="rfr_id" value="info:sid/primo.exlibrisgroup.com:primo4-{{$ctrl.activeTab}}-cLinker"/> <input type="hidden" name="rft_val_fmt" id="rft_val_fmt" value="info:ofi/fmt:kev:mtx:{{$ctrl.activeTab}}"/> <input type="hidden" name="isCitationLinker" id="isCitationLinker" value="Y"/> <input ng-if="$ctrl.isJtitle && !$ctrl.isSuprima()" type="hidden" name="sfx.title_search" id="sfx.title_search" value="{{$ctrl.getTitleSearch()}}"/> <input ng-if="$ctrl.isDate" type="hidden" name="rft.date" id="isCitationLinker" value="{{$ctrl.calcDate()}}"/> <input ng-if="$ctrl.isDoi && $ctrl.isOpenURLFieldFilled(\'rft.doi\')" type="hidden" name="rft_id" id="rft_id" value="info:doi/{{$ctrl.formData[\'rft.doi\']}}"/> <input ng-if="$ctrl.isPmid && $ctrl.isOpenURLFieldFilled(\'rft.pmid\')" type="hidden" name="rft_id" id="rft_id" value="info:pmid/{{$ctrl.formData[\'rft.pmid\']}}"/><div class="padding-large" layout="column" layout-align-gt-xs="start start" layout-align-xs="strech"><div class="request-form-group" layout="row" layout-xs="column" ng-repeat="group in $ctrl.sortedOpenURLFields"><div ng-class="{\'request-form-group-item\':!$ctrl.detectMobile()}" layout="row" layout-xs="column" ng-repeat="field in group"><prm-form-field [field]="field" [data]="$ctrl.formData" [form]="::this.citationLinker"></prm-form-field><md-input-container class="underlined-input" ng-if="$ctrl.isSfx() && field.name == \'rft.jtitle\'"><md-select ng-model="$ctrl.titleSearch"><md-option ng-repeat="option in $ctrl.journalTitleDropdown" ng-value="option" translate="citationLinker.{{option}}"></md-option></md-select></md-input-container></div></div></div><div class="padding-small" layout="row"><md-button (click)="$ctrl.clearForm()" class="button-secondary button-with-icon" aria-label="{{(\'nui.citationLinker.reset\' | translate)}}"><prm-icon icon-type="svg" svg-icon-set="navigation" icon-definition="ic_refresh_24px"></prm-icon><span translate="nui.citationLinker.reset"></span></md-button><span flex></span><md-button type="submit" ng-disabled="citationLinker.$invalid" class="button-confirm button-large button-with-icon"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="send"></prm-icon><span translate="nui.citationLinker.submit"></span></md-button></div></form></div></div><div flex="0" flex-md="15" flex-lg="20" flex-lg-plus="" flex-xl="30"></div></main><prm-citation-linker-after parent-ctrl="$ctrl"></prm-citation-linker-after>');
$templateCache.put('components/clipboard/copy-clipboard-btn.html','<md-button ng-click="$ctrl.saveOffset()"\r\n\t\t        ng-if="$ctrl.isSupported"\r\n           ng-hide="$ctrl.copySuccessful"\r\n           clipboard\r\n           type="button"\r\n           text="$ctrl.textToCopy"\r\n           on-copied="$ctrl.clipboardSuccess() | translate"\r\n           on-error="$ctrl.clipboardFailure(err) | translate"\r\n           id="copy-citation-button"\r\n           class="button-confirm button-with-icon"\r\n           aria-label="{{$ctrl.buttonText}}">\r\n   <prm-icon  icon-type="svg"\r\n              svg-icon-set="primo-ui"\r\n              icon-definition="clipboard">\r\n   </prm-icon>\r\n   <span translate="{{$ctrl.buttonText}}"></span>\r\n</md-button>\r\n\r\n<md-button ng-if="!$ctrl.isSupported"\r\n            ng-hide="$ctrl.copySuccessful"\r\n\t\t        ng-click="$ctrl.clipboardSuccess()"\r\n           type="button"\r\n           id="copy-citation-button"\r\n           class="button-confirm button-with-icon">\r\n   <prm-icon  icon-type="svg"\r\n              svg-icon-set="primo-ui"\r\n              icon-definition="clipboard">\r\n   </prm-icon>\r\n   <span translate="{{$ctrl.buttonText}}"></span>\r\n</md-button>\r\n\r\n<div ng-if="$ctrl.copySuccessful" \r\n      layout="row" \r\n      layout-align="center center" \r\n      layout-padding \r\n      class="zero-padding-top">\r\n\t   <prm-icon  icon-type="svg"\r\n              svg-icon-set="primo-ui"\r\n              icon-definition="check">\r\n   \t</prm-icon>\r\n\t   <span translate="{{$ctrl.buttonText}}"></span>\r\n</div>\r\n\r\n\n<prm-copy-clipboard-btn-after parent-ctrl="$ctrl"></prm-copy-clipboard-btn-after>');
$templateCache.put('components/collection/collection-discovery.html','<div class="collections-wrapper"><md-toolbar><div class="md-toolbar-tools"><div class="collection-nav" layout="column"><prm-collection-breadcrumbs coll_id="{{$ctrl.colId}}" curr_col_name="{{$ctrl.highlightedCollection.name}}" bvid="{{$ctrl.vid}}" colayout="{{$ctrl.colayout}}" inst="{{$ctrl.inst}}"></prm-collection-breadcrumbs><h2 class="collection-title" layout="row" layout-align="start center" ng-show="$ctrl.highlightedCollection"><prm-icon icon-type="{{$ctrl.collectionIcons.leftArrow.type}}" svg-icon-set="{{$ctrl.collectionIcons.leftArrow.iconSet}}" icon-definition="{{$ctrl.collectionIcons.leftArrow.icon}}"></prm-icon><span>{{$ctrl.highlightedCollection.name}}</span></h2></div><span flex></span><div layout="row" class="collection-actions" ng-init="toggleList={layoutParam : $ctrl.colayout, materailLayout : ($ctrl.colayout === \'list\' ? \'column\' : \'row\')}"><md-button class="md-icon-button" aria-label="{{\'nui.aria.collection.list\' | translate}}" aria-label="View Collections as List" (click)="toggleList={layoutParam : \'list\' , materailLayout :  \'column\' };"><prm-icon id="noam" class="md-icon-button" prm-aria-label="{{\'nui.aria.collection.list\' | translate}}" icon-type="{{$ctrl.collectionIcons.listView.type}}" svg-icon-set="{{$ctrl.collectionIcons.listView.iconSet}}" icon-definition="{{$ctrl.collectionIcons.listView.icon}}"></prm-icon></md-button><md-button class="md-icon-button" aria-label="{{\'nui.aria.collection.grid\' | translate}}" (click)="toggleList={layoutParam : \'grid\' , materailLayout :  \'row\' };"><prm-icon class="md-icon-button selected" prm-aria-label="{{\'nui.aria.collection.grid\' | translate}}" icon-type="{{$ctrl.collectionIcons.gridView.type}}" svg-icon-set="{{$ctrl.collectionIcons.gridView.iconSet}}" icon-definition="{{$ctrl.collectionIcons.gridView.icon}}"></prm-icon></md-button></div></div></md-toolbar><md-content><div class="collections-container tile-view" layout="row" layout-fill layout-wrap><md-card class="collection-cover" layout="row" ng-show="$ctrl.highlightedCollection != \'\'"><div class="cover-image-container" flex flex-order="1" flex-order-gt-xs="2"><img class="md-card-image" src="{{$ctrl.highlightedCollection.thumbnail}}"></div><md-card-content flex><p ng-bind-html="$ctrl.highlightedCollection.description"></p><div class="md-actions" layout="row" layout-align="end center"><md-button aria-label="{{\'nui.aria.collection.focus\' | translate:\'{name: \\\'\'+$ctrl.highlightedCollection.name+\'\\\'}\'}}" class="anchor-link" (click)="$ctrl.handleViewHighlightedCol($ctrl.highlightedCollection)" ng-show="$ctrl.colId==0 && $ctrl.highlightedCollection.collections"><span translate="colldiscovery.viewcoll.toplevel"></span></md-button><md-button aria-label="{{\'nui.aria.collection.items\' | translate:\'{name: \\\'\'+$ctrl.highlightedCollection.name+\'\\\'}\'}}" class="anchor-link" ng-href="/primo_library/libweb/action/dlSearch.do?vid={{$ctrl.vid}}&institution={{$ctrl.inst}}&query=cdparentid,exact,{{$ctrl.colId}}&loc=scope:({{$ctrl.inst}})&displayquery=false" ng-show="$ctrl.highlightedCollection.items==\'Y\'"><span translate="colldiscovery.viewitems"></span></md-button></div></md-card-content></md-card><section class="collection-section"><div ng-class="\'layout-\'+toggleList.materailLayout" layout="{{toggleList.materailLayout}}" layout-xs="column" layout-sm="column" layout-wrap flex="100"><div class="collection-item keep" flex-gt-lg="25" flex-lg="33" flex-md="50" flex-xs="100" flex-sm="100" ng-repeat="item in $ctrl.allCollections" ng-if="item!=$ctrl.highlightedCollection"><md-card layout="row"><div class="md-card-image keep" style="background-image: url({{item.thumbnail}})" flex-order="2" layout="column"></div><md-card-content layout="column" flex="60"><h2 class="md-title">{{item.name}}</h2><p ng-bind-html="item.description"></p><section layout="row" layout-xs="column" layout-sm="column" layout-align-gt-md="start end" layout-align="start start" layout-wrap><span layout="row" layout-gt-md="column" flex="100"><md-button aria-label="{{\'nui.aria.collection.focus\' | translate:\'{name: \\\'\'+item.name+\'\\\'}\'}}" class="md-raised" ng-href="collectionDiscovery.do?collectionId={{item.pid.value}}&vid={{$ctrl.vid}}&colayout={{toggleList.layoutParam}}&inst={{$ctrl.inst}}"><span translate="colldiscovery.viewcoll.sub"></span><span class="chevron-right"></span></md-button></span></section></md-card-content></md-card></div></div></section></div></md-content></div><prm-collection-after parent-ctrl="$ctrl"></prm-collection-after>');
$templateCache.put('components/collectionDiscovery/collection-discovery.html','<prm-collection-gallery-header [is-gallery-lobby]="::$ctrl.isGalleryLobby" [current-collection]="::$ctrl.currentCollection" [current-collection-record]="::$ctrl.currentCollectionRecord" [path]="::$ctrl.path"></prm-collection-gallery-header><prm-collection-gallery ng-if="::$ctrl.currentCollection" [is-gallery-lobby]="::$ctrl.isGalleryLobby" [current-collection]="::$ctrl.currentCollection" [path]="::$ctrl.path"></prm-collection-gallery><prm-collection-discovery-after parent-ctrl="$ctrl"></prm-collection-discovery-after>');
$templateCache.put('components/favorites/favorites.html','<prm-favorites-tool-bar layout="column"></prm-favorites-tool-bar><div layout="row"><div flex="0" flex-md="0" flex-lg="10" flex-xl="20" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus}"></div><md-tabs flex md-selected="$ctrl.selectedTabIndex" md-dynamic-height md-border-bottom class="default-tabs"><md-tab id="tab1" md-on-select="$ctrl.onSavedItemsSelect();$ctrl.primolyticsService.doBeaconReport({\'p\':\'myAccount\', \'op\':\'menu.myaccount.overview\'});"><md-tab-label><span translate="nui.favorites.records.tabheader"></span></md-tab-label><md-tab-body><md-content class="main" layout="row" layout-align="center start" flex ng-class="{\'padded-container\': $ctrl.mediaQueries.gtxs}"><div flex><prm-search-result-list flex [itemlist]="$ctrl.getItems()" [is-favorites]="true"></prm-search-result-list></div><div class="sidebar" flex-md="25" flex-lg="20" flex-xl="20" layout="column" id="favoritesLabels" role="contentinfo" ng-show="$ctrl.mediaQueries.gtsm || $ctrl.showMobileFacets"><div class="sidebar-section margin-bottom-small margin-left-medium compensate-padding-left" layout="row" ng-if="$ctrl.getItems().length > 1"><div layout="row" layout-align="start center" class="section-title"><h3 class="section-title-header"><span translate="nui.favorites.sortby" translate-attr-title="nui.favorites.sortby.tooltip"></span></h3><md-input-container class="static-select empty-select-on-init" layout="row" ng-if="!$ctrl.sortInProgress"><md-select ng-model="$ctrl.favoritesService.sortBy" ng-change="$ctrl.favoritesService.sortAllFavFromDropdown()" aria-label="{{\'nui.aria.favorites.sortByFavorites\' | translate}}"><md-option ng-repeat="sort in $ctrl.favoritesService.sortOptions" value="{{sort}}"><span translate="nui.favorites.sort.{{sort}}"></span></md-option></md-select></md-input-container></div></div><prm-favorites-labels ng-if="$ctrl.getItems().length > 0" class="layout-full-width"></prm-favorites-labels></div></md-content><md-toolbar ng-if="$ctrl.showMobileFacets" class="default-toolbar bottom-fixed-toolbar" hide-gt-sm><div class="md-toolbar-tools" layout="row" layout-align="center "><md-button id="sidebar-trigger" class="button-with-icon layout-full-height" aria-label="{{::(\'nui.facets.title\' | translate)}}" (click)="$ctrl.showMobileFacets = !$ctrl.showMobileFacets"><prm-icon ng-if="$ctrl.showMobileFacets" icon-type="svg" svg-icon-set="primo-ui" icon-definition="filterOut"></prm-icon><prm-icon ng-if="!$ctrl.showMobileFacets" icon-type="svg" svg-icon-set="primo-ui" icon-definition="filter"></prm-icon><span ng-if="!$ctrl.showMobileFacets" translate="nui.favorites.labels.header"></span> <span ng-if="$ctrl.showMobileFacets" translate="nui.facets.close"></span></md-button></div></md-toolbar></md-tab-body></md-tab><md-tab ng-if="$ctrl.isSignedIn() && $ctrl.requiredTabsList.indexOf(\'loans\') !== -1" md-on-select="$ctrl.onSavedQueriesSelect();$ctrl.primolyticsService.doBeaconReport({\'p\':\'myAccount\', \'op\':\'menu.myaccount.loans\'});" id="tab2"><md-tab-label><span translate="nui.favorites.search.tabheader"></span></md-tab-label><md-tab-body><md-content class="main" layout="row" layout-align="center start" flex ng-class="{\'padded-container\': $ctrl.mediaQueries.gtxs}"><prm-saved-queries flex></prm-saved-queries></md-content></md-tab-body></md-tab><md-tab ng-if="($ctrl.requiredTabsList.indexOf(\'loans\') !== -1) && ($ctrl.showSearchHistoryTab())" md-on-select="$ctrl.onSearchHistorySelect();$ctrl.primolyticsService.doBeaconReport({\'p\':\'myAccount\', \'op\':\'menu.myaccount.loans\'});" id="tab2"><md-tab-label><span translate="nui.favorites.history.tabheader"></span></md-tab-label><md-tab-body><md-content class="main" layout="row" layout-align="center start" flex ng-class="{\'padded-container\': $ctrl.mediaQueries.gtxs}"><prm-search-history flex></prm-search-history></md-content></md-tab-body></md-tab></md-tabs><div flex="0" flex-md="0" flex-lg="5" flex-xl="10" ng-class="{\'flex-lgPlus-10\': $ctrl.mediaQueries.lgPlus}"></div></div><prm-favorites-after parent-ctrl="$ctrl"></prm-favorites-after>');
$templateCache.put('components/icon/icon.html','<md-icon md-svg-icon="{{::$ctrl.svgIconSet}}:{{::$ctrl.iconDefinition}}" aria-label="{{::$ctrl.prmAriaLabel}}"></md-icon><prm-icon-after parent-ctrl="$ctrl"></prm-icon-after>');
$templateCache.put('components/infra/highlight.html','<span ng-bind-html="$ctrl.highlightedText"></span><span ng-if="$ctrl.combineStringLastChar($ctrl.highlightedText)">&#8207</span>');
$templateCache.put('components/journals/atoz-search-bar.html','<div tabindex="-1" role="search" layout="row"><div flex="0" flex-md="0" flex-lg="15" flex-xl="20" ng-class="{\'flex-lgPlus-15\' : $ctrl.mediaQueries.lgPlus}"></div><div layout="column" flex flex-sm="85" flex-md="75" flex-lg="{{$ctrl.isSuprima() ? \'55\' : \'60\'}}" flex-xl="{{$ctrl.isSuprima() ? \'50\' : \'60\'}}"><div class="search-elements-wrapper" layout="row"><form name="search-form" ng-submit="$ctrl.onSubmit()" class="layout-full-width"><input type="submit" class="accessible-only"/><div class="classic-input simple-search-wrapper" layout="row" layout-fill tabindex="-1"><div class="search-scope journal-search-tile" layout="column" layout-align="center start"><span translate="{{::$ctrl.title}}"></span></div><md-autocomplete flex md-no-float id="autoComplete" md-input-id="searchBarJournal" md-search-text="$ctrl.mainSearchField" md-selected-item-change="$ctrl.onSubmit()" md-items="item in $ctrl.getAutoCompleteItems()" md-item-text="item.display" md-min-length="0" placeholder="{{$ctrl.placeHolderText}}"><md-item-template><span ng-bind="item.display"></span></md-item-template></md-autocomplete><md-button class="submit-button button-confirm" aria-label="Search" (click)="$ctrl.onSubmit()"><prm-icon icon-type="{{::$ctrl.searchBoxIcons.searchTextBox.type}}" svg-icon-set="{{::$ctrl.searchBoxIcons.searchTextBox.iconSet}}" icon-definition="{{::$ctrl.searchBoxIcons.searchTextBox.icon}}"></prm-icon></md-button></div></form></div><div ng-if="$ctrl.enableAtoZView()" tabindex="-1" role="search" layout="row"><prm-alphabet-toolbar flex (selected-letter)="$ctrl.onSubmit($event)" [cur-active-letter]="$ctrl.selectedLetter"></prm-alphabet-toolbar></div><div layout="row" ng-if="$ctrl.showSignIn"><div flex="0" flex-md="0" flex-lg="15" flex-xl="20"></div><prm-alert-bar flex [alert-object]="$ctrl.signInAlert"></prm-alert-bar><div class="padding-left-medium" flex="0" flex-md="25" flex-lg="10" flex-xl="15" hide-xs></div><div flex="0" flex-md="0" flex-sm="10" flex-lg="20" flex-xl="20"></div></div></div></div><prm-atoz-search-bar-after parent-ctrl="$ctrl"></prm-atoz-search-bar-after>');
$templateCache.put('components/journals/databases-full-view.html','<prm-full-view-page></prm-full-view-page><prm-databases-full-view-after parent-ctrl="$ctrl"></prm-databases-full-view-after>');
$templateCache.put('components/journals/databases.html','<prm-search></prm-search><prm-databases-after parent-ctrl="$ctrl"></prm-databases-after>');
$templateCache.put('components/journals/journals-full-view.html','<prm-full-view-page></prm-full-view-page><prm-journals-full-view-after parent-ctrl="$ctrl"></prm-journals-full-view-after>');
$templateCache.put('components/journals/journals-search.html','<prm-search></prm-search><prm-journals-after parent-ctrl="$ctrl"></prm-journals-after>');
$templateCache.put('components/journals/search-within-journal.html','<p class="margin-bottom-large" translate="nui.journalsearch.searchwithin.desc"></p><div class="classic-input" layout="row"><form layout="row" flex ng-submit="$ctrl.onSubmit()"><md-input-container flex><label translate="nui.journalsearch.searchwithin.help"></label><input ng-model="$ctrl.searchInput" autocomplete="off"></md-input-container><md-button class="submit-button button-confirm" aria-label="Search" ng-click="$ctrl.onSubmit()"><prm-icon icon-type="{{::$ctrl.searchBoxIcons.searchTextBox.type}}" svg-icon-set="{{::$ctrl.searchBoxIcons.searchTextBox.iconSet}}" icon-definition="{{::$ctrl.searchBoxIcons.searchTextBox.icon}}"></prm-icon></md-button></form></div><prm-search-within-journal-after parent-ctrl="$ctrl"></prm-search-within-journal-after>');
$templateCache.put('components/primoExplore/login-iframe.html','<iframe style="display:none !important" id="login-iframe" ng-src="{{$ctrl.getUrl()}}" ng-if="::$ctrl.isSilentIframeEnabled()"/><prm-login-iframe-after parent-ctrl="$ctrl"></prm-login-iframe-after>');
$templateCache.put('components/primoExplore/ng-forward-hack.html','<ng-forward-hack-after parent-ctrl="$ctrl"></ng-forward-hack-after>');
$templateCache.put('components/primoExplore/primo-explore-main.html','<prm-performance-monitor ng-if="$ctrl.showPerformanceMonitor"></prm-performance-monitor><div layout="column" class="header topbar-wrapper relative-position" ng-show="::$ctrl.allowSearch()"><prm-topbar ng-class="{\'transparent-top-bar\': $ctrl.isCollectionDiscoveryFocused}"></prm-topbar><h1 class="accessible-only">{{($ctrl.showStatName() | translate)}}</h1><prm-search-bar ng-if="$ctrl.showSearchBar() && !$ctrl.isAtozSearch && !$ctrl.showBroseSearchBar" has-search-results="{{$ctrl.hasSearchResults()}}" (search-event)="$ctrl.onSearchBarSearchEvent($event)"></prm-search-bar><prm-atoz-search-bar ng-if="$ctrl.isAtozSearch && $ctrl.showSearchBar()" (search-event)="$ctrl.onSearchBarSearchEvent($event)" class="animate-search-bar"></prm-atoz-search-bar><prm-browse-search-bar ng-if="$ctrl.showBroseSearchBar"></prm-browse-search-bar><div ng-if="$ctrl.displayBorInfoAlert()"><prm-alert-bar flex [alert-object]="$ctrl.borInfoAlert" [idp-logout]="true"></prm-alert-bar></div><prm-spinner ng-if="$ctrl.searchInProgress" class="half-transparent no-text" layout="row" layout-align="center center"></prm-spinner></div><prm-back-to-search-results-button ng-if="$ctrl.isBrowseMode"></prm-back-to-search-results-button><ui-view ng-show="::$ctrl.allowSearch()"></ui-view><ng-forward-hack></ng-forward-hack><prm-explore-main-after parent-ctrl="$ctrl"></prm-explore-main-after>');
$templateCache.put('components/search/search.html','<prm-alert-bar ng-if="!$ctrl.isLoggedInIDP() && !$ctrl.isShowPartsOnCitationTrails()" flex [alert-object]="$ctrl.signInAlert"></prm-alert-bar><md-content class="main" ng-if="!$ctrl.isSearchDone() && !$ctrl.isAtozSearch" layout="row" layout-align="center start" flex><div flex="0" flex-md="0" flex-lg="10" flex-xl="20" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus && !$ctrl.facetToLeft, \'flex-lgPlus-20\': $ctrl.mediaQueries.lgPlus && $ctrl.facetToLeft, \'flex-xl-25\': $ctrl.facetToLeft}"></div><prm-static section="homepage" flex class="md-padding"></prm-static><div flex="0" flex-md="10" flex-lg="25" ng-class="{\'flex-lgPlus-30\': $ctrl.mediaQueries.lgPlus && !$ctrl.facetToLeft, \'flex-lgPlus-25\': $ctrl.mediaQueries.lgPlus && $ctrl.facetToLeft, \'flex-xl-30\': $ctrl.mediaQueries.xl && !$ctrl.facetToLeft, \'flex-xl-25\': $ctrl.mediaQueries && $ctrl.facetToLeft}"></div></md-content><md-content layout="row" layout-align="center start" flex ng-if="$ctrl.displayDialog()"><div flex="0" flex-sm="0" flex-lg="15" flex-xl="20" ng-class="{\'facet-to-left-spacer\': $ctrl.facetToLeft&&!$ctrl.mediaQueries.xl && !$ctrl.mediaQueries.md && !$ctrl.mediaQueries.sm && !$ctrl.mediaQueries.xs, \'flex-xl-25\': $ctrl.facetToLeft}"></div><prm-personalization-dialog tabindex="0" id="personalizationDialog" flex (keydown)="$ctrl.keydownSupport($event)"></prm-personalization-dialog><div flex="0" flex-sm="0" flex-md="0" flex-lg="30" flex-xl="30" ng-class="{\'flex-lg-25 flex-lgPlus-25\': $ctrl.facetToLeft && !$ctrl.mediaQueries.md && !$ctrl.mediaQueries.sm && !$ctrl.mediaQueries.xs}"></div></md-content><md-content class="main" ng-if="$ctrl.isSearchDone()" layout="row" layout-align="center start" flex ng-class="{\'padded-container\': $ctrl.mediaQueries.gtxs, \'facet-to-left\': $ctrl.facetToLeft}"><div ng-if="!$ctrl.facetToLeft" flex="0" flex-md="0" flex-lg="10" flex-xl="20" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus && !$ctrl.facetToLeft}"></div><div flex ng-class="{\'flex-order-2\': $ctrl.facetToLeft}"><prm-resource-recommender [query]="$ctrl.parseSearchTerm($ctrl.searchService.getSearchObject().query)" (resource-recommender-event)="$ctrl.setShowResourceRecommender($event)" ng-if="::$ctrl.isRecommendationsEnabled()" ng-show="$ctrl.showResourceRecommender"></prm-resource-recommender><prm-search-result-list flex ng-if="$ctrl.isSearchDone()" [itemlist]="$ctrl.searchResults" [featured-result]="$ctrl.featuredResult" [is-favorites]="::(false)" [links]="$ctrl.skipLinks" [query]="$ctrl.parseSearchTerm($ctrl.searchService.getSearchObject().query)" [facet-to-left]="$ctrl.facetToLeft" tabindex="-1"></prm-search-result-list></div><div tabindex="-1" id="facets" role="contentinfo" class="sidebar" flex-md="25" flex-lg="20" ng-class="{\'flex-order-1\': $ctrl.facetToLeft, \'flex-lgPlus-20\': $ctrl.mediaQueries.lgPlus, \'flex-lgPlus-20\': $ctrl.mediaQueries.lgPlus && $ctrl.facetToLeft, \'flex-lgPlus-20\': $ctrl.mediaQueries.lgPlus && !$ctrl.facetToLeft, \'flex-xl-20\': $ctrl.mediaQueries.xl && !$ctrl.facetToLeft, \'flex-xl-25\': $ctrl.mediaQueries && $ctrl.facetToLeft}" ng-show="$ctrl.mediaQueries.gtsm || !$ctrl.showMobileFacets"><prm-facet tabindex="-1" ng-if="(!$ctrl.isShowPartsOnCitationTrails() || $ctrl.searchInProgress) && $ctrl.showTimer" (close-mobile-facet-event)="$ctrl.closeMobileFacet($event)"></prm-facet></div><div flex="0" flex-md="0" flex-lg="5" flex-xl="10" ng-class="{\'flex-order-4\': $ctrl.facetToLeft, \'flex-lgPlus-10\': $ctrl.mediaQueries.lgPlus, \'flex-lg-15 flex-xl-25\': $ctrl.facetToLeft, \'flex-lg-5\': !$ctrl.facetToLeft, \'flex-lgPlus-25\': $ctrl.mediaQueries.lgPlus && $ctrl.facetToLeft}"></div></md-content><md-toolbar class="default-toolbar bottom-fixed-toolbar" ng-if="$ctrl.hasSearchResults()" hide-gt-sm><div class="md-toolbar-tools" layout="row" layout-align="center "><md-button id="sidebar-trigger" class="button-with-icon layout-full-height" aria-label="{{::(\'nui.facets.title\' | translate)}}" (click)="$ctrl.showMobileFacets = !$ctrl.showMobileFacets"><prm-icon ng-if="$ctrl.showMobileFacets" [icon-type]="::$ctrl.searchBoxIcons.filter.type" [svg-icon-set]="::$ctrl.searchBoxIcons.filter.iconSet" [icon-definition]="::$ctrl.searchBoxIcons.filter.icon"></prm-icon><prm-icon ng-if="!$ctrl.showMobileFacets" [icon-type]="::$ctrl.searchBoxIcons.filterClose.type" [svg-icon-set]="::$ctrl.searchBoxIcons.filterClose.iconSet" [icon-definition]="::$ctrl.searchBoxIcons.filterClose.icon"></prm-icon><span ng-if="$ctrl.showMobileFacets" translate="nui.facets.title"></span> <span ng-if="!$ctrl.showMobileFacets" translate="nui.facets.close"></span></md-button></div></md-toolbar><prm-view-overlay ng-class="{\'visible\': viewOverlayVisible}" layout="row"><div class="prm-view-overlay-close-button" layout="column" layout-align="center center" ng-if="viewOverlayVisible" flex><md-button class="button-large" ng-click="viewOverlayVisible = false">Close</md-button></div><div class="prm-view-overlay-inner" ng-if="viewOverlayVisible"></div><div class="prm-view-overlay-backdrop" ng-if="viewOverlayVisible"></div></prm-view-overlay><prm-search-after parent-ctrl="$ctrl"></prm-search-after>');
$templateCache.put('components/security/username-password-login.html','<md-input-container><label>User Name</label><input type="text" ng-model="$ctrl.username"></md-input-container><md-input-container><label>Password</label><input type="password" ng-model="$ctrl.password"></md-input-container><md-button class="md-raised" (click)="$ctrl.login()">Submit</md-button><prm-username-password-login-after parent-ctrl="$ctrl"></prm-username-password-login-after>');
$templateCache.put('components/servicesPage/services-page.html','<prm-full-view-cont [item]="$ctrl.item"></prm-full-view-cont><prm-services-page-after parent-ctrl="$ctrl"></prm-services-page-after>');
$templateCache.put('components/sfx/getit1.html','<ion-modal-view class="EXLArticlPreviewContent"><ion-header-bar><h1 class="title">{{sfxCtrl.modalHeader}}</h1></ion-header-bar><ion-content class="EXLGetIt1Content" direction="xy"><iframe ng-src="{{sfxCtrl.targetLink | trustUrl}}" class="EXLGetIt1Iframe" ng-if="sfxCtrl.targetLink"/></ion-content></ion-modal-view>');
$templateCache.put('components/sfx/sfx-menu.html','<md-content ng-repeat="(service, targets) in sfxCtrl.getSfxResults().services"><md-toolbar class="item-stable" (click)="sfxCtrl.toggleService(service)" ng-class="{active: sfxCtrl.isServiceShown(service)}"><i class="icon" ng-class="sfxCtrl.isServiceShown(service) ? \'ion-minus\' : \'ion-plus\'"></i> &nbsp; {{service}}</md-toolbar><md-list><div><md-item class="item-accordion item-icon-right" ng-repeat="target in targets" ng-show="sfxCtrl.isServiceShown(service)"><md-item-content>{{target.target_public_name}} <i class="icon ion-arrow-right-c" (click)="sfxCtrl.openTargetLink(target)" ng-if="target.target_url"></i></md-item-content></md-item></div></md-list></md-content>');
$templateCache.put('components/sourceRecord/source-record.html','<pre>{{$ctrl.sourceRecord}}</pre><prm-source-record-after parent-ctrl="$ctrl"></prm-source-record-after>');
$templateCache.put('components/spinner/spinner.html','<div class="spinner-wrapper" layout="row" layout-align="space-between" ng-init="loadingText = \'\'"><div class="loader"><div class="diamond"></div><div class="diamond"></div><div class="diamond"></div></div><div ng-if="loadingText" class="loader-text">{{loadingText}}</div></div>');
$templateCache.put('components/tabs/details_pane.html','<md-card><img src="{{listCtrl.selectedItem[\'thumbnail\']}}" class="md-card-image"><h3><span ng-bind-html="listCtrl.selectedItem[\'title\']"></span> <span ng-hide="!listCtrl.selectedItem[\'date\']">[<span ng-bind-html="listCtrl.selectedItem[\'date\']"></span>]</span></h3><span ng-hide="!listCtrl.selectedItem[\'creator\']"><h4><span ng-bind-html="listCtrl.selectedItem[\'creator\']"></span></h4></span><div layout="row"><md-card class="md-whiteframe-z5 EXLExploreDetailsCard EXLExploreDetailsRecordCard" flex="33"><md-card-content><md-item><md-item-content><div class="md-tile-content"><span ng-hide="!listCtrl.selectedItem[\'description\']"><p><span ng-bind-html="listCtrl.selectedItem[\'description\']"></span></p></span><span ng-hide="!listCtrl.selectedItem[\'isPartOf\']"><p><span ng-bind-html="listCtrl.selectedItem[\'isPartOf\']"></span></p></span><span ng-hide="!listCtrl.selectedItem[field]"><p ng-repeat="field in [\'publisher\',\'lccn\',\'isbn\']"><span><span class="EXLExploreDetailsLabel">{{field}}:</span> <span ng-bind-html="listCtrl.selectedItem[field]"></span></span></p></span></div></md-item-content></md-item></md-card-content></md-card><md-card flex="33"><facets-list-display element-type="[\'source\']" element-label="[\'Sources\']" elements-array="listCtrl.selectedItem[\'source\']"></facets-list-display><facets-list-display element-type="[\'subject\']" element-label="[\'Subjects\']" elements-array="listCtrl.selectedItem[\'subject\']"></facets-list-display></md-card></div></md-card>');
$templateCache.put('components/tabs/images_pane.html','<md-toolbar class="md-tall EXLExploreImagesBar" ng-show="listCtrl.imagesBarFillersList"><div class="EXLExploreImagesBarImageContainer" layout="row"><div flex="20"></div><div flex="60"><div class="EXLExploreImagesBarBigCol"><div class="EXLExploreImagesBarBigImage"><a href="#"><img ng-class="{EXLExploreImagesBarImageFace: listCtrl.imagesBarFillersList[0].type == \'dynamic\'}" ng-src="{{listCtrl.imagesBarFillersList[0].link}}" alt=""/></a></div></div><div class="EXLExploreImagesBarSmallCol"><div class="EXLExploreImagesBarSmallImage"><a href="#"><img ng-class="{EXLExploreImagesBarImageFace: listCtrl.imagesBarFillersList[1].type == \'dynamic\'}" ng-src="{{listCtrl.imagesBarFillersList[1].link}}" alt=""/> </a><a href="#"><img ng-class="{EXLExploreImagesBarImageFace: listCtrl.imagesBarFillersList[2].type == \'dynamic\'}" ng-src="{{listCtrl.imagesBarFillersList[2].link}}" alt=""/></a></div></div><div class="EXLExploreImagesBarMediumCol EXLExploreImagesBarMediumImage"><a href="#"><img ng-class="{EXLExploreImagesBarImageFace: listCtrl.imagesBarFillersList[4].type == \'dynamic\'}" ng-src="{{listCtrl.imagesBarFillersList[4].link}}" alt=""/> </a><a href="#"><img ng-class="{EXLExploreImagesBarImageFace: listCtrl.imagesBarFillersList[5].type == \'dynamic\'}" ng-src="{{listCtrl.imagesBarFillersList[5].link}}" alt=""/></a></div><div class="EXLExploreImagesBarBigCol"><div class="EXLExploreImagesBarBigImage"><a href="#"><img ng-class="{EXLExploreImagesBarImageFace: listCtrl.imagesBarFillersList[6].type == \'dynamic\'}" ng-src="{{listCtrl.imagesBarFillersList[6].link}}" alt=""/></a></div></div><div class="EXLExploreImagesBarMediumCol EXLExploreImagesBarMediumImage"><a href="#"><img ng-class="{EXLExploreImagesBarImageFace: listCtrl.imagesBarFillersList[7].type == \'dynamic\'}" ng-src="{{listCtrl.imagesBarFillersList[7].link}}" alt=""/> </a><a href="#"><img ng-class="{EXLExploreImagesBarImageFace: listCtrl.imagesBarFillersList[8].type == \'dynamic\'}" ng-src="{{listCtrl.imagesBarFillersList[8].link}}" alt=""/></a></div></div><div flex="20"></div></div></md-toolbar>');
$templateCache.put('components/tabs/locations_pane.html','<ils-items></ils-items><div ng-controller="GoogleMapsController as googleMapsCtrl"><ui-gmap-google-map center="googleMapsCtrl.center" zoom="googleMapsCtrl.zoom"><ui-gmap-marker ng-repeat="location in searchCtrl.selectedItem.locations" idKey="location.libraryCode" coords="googleMapsCtrl.getLocationByLibraryCode(location.libraryCode)"></ui-gmap-marker></ui-gmap-google-map></div>');
$templateCache.put('components/tags/tags.html','<div layout="column" class="header topbar-wrapper relative-position"><prm-topbar></prm-topbar><prm-tags-search-bar></prm-tags-search-bar><div ng-if="$ctrl.displayBorInfoAlert()"><prm-alert-bar flex [alert-object]="$ctrl.borInfoAlert" [idp-logout]="true"></prm-alert-bar></div></div><ui-view></ui-view><prm-tags-results ng-if="$ctrl.isInSearch()"></prm-tags-results><md-content ng-if="!$ctrl.isInSearch()" class="padded-container" layout="row" layout-align="center start" flex><div flex="0" flex-md="10" flex-lg="20" flex-xl="25"></div><div layout-sm="column" layout-xs="column" layout-gt-sm="row" flex layout-align="center start"><md-card class="default-card" flex tabindex="0"><md-card-title><md-card-title-text><span class="md-headline" translate="nui.tags.mostpopular"></span></md-card-title-text></md-card-title><md-card-content><prm-tags-list [tagslist]="$ctrl.popularTags" [editable]="false" sortBy="count"></prm-tags-list></md-card-content></md-card><md-card class="default-card" flex><md-card-title><md-card-title-text><span class="md-headline" translate="nui.tags.mostrecent"></span></md-card-title-text></md-card-title><md-card-content><prm-tags-list [tagslist]="$ctrl.recentTags" [editable]="false"></prm-tags-list></md-card-content></md-card><md-card class="default-card" ng-if="$ctrl.userLoggedIn()" flex><md-card-title><md-card-title-text><span class="md-headline" translate="nui.tags.mytags"></span></md-card-title-text></md-card-title><md-card-content><prm-tags-list [tagslist]="$ctrl.myTags" [editable]="false"></prm-tags-list></md-card-content></md-card></div><div flex="0" flex-md="10" flex-lg="20" flex-xl="25"></div></md-content><prm-tags-after parent-ctrl="$ctrl"></prm-tags-after>');
$templateCache.put('components/account/accountLinks/account-links.html','<a ng-repeat="link in $ctrl.links" href="{{$ctrl.getTarget(link)}}" target="_blank" class="bold-text"><span translate="{{link.source2}}"></span><prm-icon icon-type="{{$ctrl.accountIcons.externalLinkIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.externalLinkIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.externalLinkIcon.icon}}" aria-label="{{\'nui.aria.account.links.open\' | translate}}"></prm-icon></a><prm-account-links-after parent-ctrl="$ctrl"></prm-account-links-after>');
$templateCache.put('components/account/deposits/deposit-confirm-dialog.html','<md-dialog class="in-element-dialog" layout="column"><form layout="row" layout-align="end center" layout-fill><md-dialog-content><div class="md-dialog-content bold-text" layout-align="center"><span translate="nui.deposit.confirm.message"></span></div></md-dialog-content><div class="md-actions" layout="row"><md-button ng-click="ctrl.hide()"><span translate="nui.deposit.confirm.no"></span></md-button><md-button class="dialog-primary button-confirm" ng-click="ctrl.cancelIt(); ctrl.hide();"><span translate="nui.deposit.confirm.ok"></span></md-button></div></form></md-dialog>');
$templateCache.put('components/account/deposits/deposits.html','<div class="tab-content-header" layout="row" layout-xs="column" layout-align="space-between end" layout-align-xs="start stretch"><div layout="column"><div class="header-title" layout="row"><h2 class="zero-margin" layout="row" layout-align="start center"><span translate="nui.deposits.header"></span></h2></div><div class="header-subtitle"><span class="items-count" ng-if="$ctrl.depositsCounter"><em translate="nui.deposits.counter" translate-values="$ctrl.getDepositsCountPlaceHolder()"></em><prm-account-links tab-name="deposits"></prm-account-links></span></div></div><div class="tab-header-actions" layout="row" layout-align="end center" layout-align-xs="space-between center"><div layout="row" layout-align="start center" ng-if="$ctrl.depositsCounter"><md-input-container class="static-select" layout="row" style="padding-bottom: 8px"><label class="md-container-ignore bold-text"><span translate="nui.librarycard.sortby"></span></label><md-select ng-model="$ctrl.sortBy" ng-change="$ctrl.sortDepositsDisplay()"><md-option ng-repeat="sortOption in ::$ctrl.sortOptions" value="{{::sortOption.fieldName}}"><span translate="{{::sortOption.optionName}}"></span></md-option></md-select></md-input-container></div><md-divider class="vertical-divider transparent-divider" ng-if="$ctrl.depositsCounter"></md-divider><div layout="row" layout-align="start center" ng-show="$ctrl.showCreateDeposit()"><md-menu><md-button ng-click="$ctrl.openMenu($mdOpenMenu, $event)"><span translate="nui.deposits.createDeposit"></span></md-button><md-menu-content width="3" layout="column"><md-menu-item ng-repeat="profileOption in $ctrl.depositProfilesOptions"><md-button ng-click="$ctrl.showDepositForm(\'\', $index)"><span md-menu-align-target>{{profileOption.depositProfileName}}</span></md-button></md-menu-item></md-menu-content></md-menu></div><md-divider class="vertical-divider transparent-divider" ng-if="$ctrl.depositsCounter"></md-divider><md-button class="md-icon-button header-action expand-collapse-button" (click)="$ctrl.toggleAllExpand()" aria-label="epand all deposit items button" ng-if="$ctrl.depositsCounter"><md-tooltip md-autohide="true"><span ng-if="$ctrl.isAllExpanded" translate="nui.librarycard.collapseall.tooltip"></span><span ng-if="!$ctrl.isAllExpanded" translate="nui.librarycard.expandall.tooltip"></span></md-tooltip><span ng-if="!$ctrl.isAllExpanded"><prm-icon icon-type="{{::$ctrl.accountIcons.expandAllIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.expandAllIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.expandAllIcon.icon}}" aria-label="{{::(nui.aria.account.expandall | translate)}}"></prm-icon></span><span ng-if="$ctrl.isAllExpanded"><prm-icon icon-type="{{::$ctrl.accountIcons.collapseAllIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.collapseAllIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.collapseAllIcon.icon}}" aria-label="{{::(\'default.nui.aria.account.collapseall\' | translate)}}"></prm-icon></span></md-button></div></div><div class="bar success-bar" layout-margin layout="row" ng-if="$ctrl.depositInProcess" layout-align="start center"><span translate="nui.deposits.submittedDepositInProcess" class="zero-margin"></span></div><div class="tab-content-header" layout="row" layout-xs="column" layout-align="space-between end" layout-align-xs="start stretch" ng-if="!$ctrl.depositsCounter || $ctrl.depositsCounter === \'0\'"><div layout="column"><div ng-cloak class="message-with-icon" layout="row" layout-align="center center" layout-padding layout-margin><prm-icon class="giant-icon bg-icon" icon-type="{{$ctrl.accountIcons.sun.type}}" svg-icon-set="{{$ctrl.accountIcons.sun.iconSet}}" icon-definition="{{$ctrl.accountIcons.sun.icon}}"></prm-icon><div><span translate="nui.overview.nodeposits"></span></div></div></div></div><md-list class="separate-list-items gapped-list" layout="column"><md-list-item tabindex="0" class="md-3-line has-expand in-element-dialog-parent" ng-repeat="depositDisplay in $ctrl.depositsDisplay | limitTo:200" ng-hide="actionSuccessful" ng-class="depositDisplay.isExpanded?\'item-expanded\':\'\'"><div class="in-element-dialog-context" layout="row" flex><div class="md-list-item-text" layout="row" layout-wrap flex><span class="item-index">{{$index + 1}}</span><div flex flex-xs="100"><a ng-if="::(depositDisplay.firstLineLeft && depositDisplay.deliveryUrl)" class="arrow-link" href="{{::depositDisplay.deliveryUrl}}" target="_blank"><h3>{{::depositDisplay.firstLineLeft}}<prm-icon ng-if="::(depositDisplay.firstLineLeft && depositDisplay.deliveryUrl)" external-link icon-type="svg" svg-icon-set="primo-ui" icon-definition="open-in-new" class="deposit-external-link"></prm-icon></h3></a><h3 ng-if="::(depositDisplay.firstLineLeft && !depositDisplay.deliveryUrl)">{{::depositDisplay.firstLineLeft}}</h3><h4 ng-if="::depositDisplay.secondLineLeft">{{::depositDisplay.secondLineLeft}}</h4></div><div flex flex-xs="100" class="weak-text"><p class="bold-text" ng-if="::depositDisplay.firstLineRight" ng-style="::(deposit.new && {\'color\':\'#5cb85c\'})"><prm-icon ng-if="::depositDisplay.isAlert" style="color: #5cb85c" icon-type="{{::$ctrl.accountIcons.depositsAlertIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.depositsAlertIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.depositsAlertIcon.icon}}" aria-label="{{::(\'nui.aria.account.deposits.alert\' | translate)}}"></prm-icon><span>{{depositDisplay.firstLineRight}}</span></p><p ng-if="::depositDisplay.secondLineRight"><span translate="nui.deposits.updatedOn"></span> <span>{{::depositDisplay.secondLineRight}}</span></p></div><div layout-align="end center" layout="row" layout-wrap flex-xs="400" flex-sm="80" flex class="list-item-actions"><md-button ng-if="{\'rotate-180\':depositDisplay.isExpanded}" class="button-with-icon button-link" ng-hide="depositDisplay.isSubmitted" (click)="$ctrl.showDepositForm({{$index}}, -1)" aria-label="cancel deposit button"><prm-icon icon-type="{{::$ctrl.accountIcons.editIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.editIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.editIcon.icon}}"></prm-icon><span translate="nui.deposits.edit"></span></md-button><div class="skewed-divider" ng-hide="depositDisplay.isSubmitted"></div><md-button ng-if="{\'rotate-180\':depositDisplay.isExpanded}" class="button-link" ng-hide="depositDisplay.isSubmitted" (click)="$ctrl.showCancelPrompt($event,depositDisplay.depositId)" aria-label="cancel deposit button"><prm-icon icon-type="{{::$ctrl.accountIcons.removeIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.removeIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.removeIcon.icon}}"></prm-icon><span translate="nui.deposits.withdraw"></span></md-button><div class="item-respond" ng-if="$ctrl.failedDepositId === depositDisplay.depositId"><span class="error-response">{{$ctrl.failedDepositMessage}}</span></div></div></div><div class="align-self-stretch"><md-button class="item-expand-button" aria-label="{{::(\'nui.aria.account.deposits.expandcollapse\' | translate)}}" (click)="depositDisplay.isExpanded = !depositDisplay.isExpanded"><prm-icon ng-class="{\'rotate-180\':depositDisplay.isExpanded}" icon-type="{{::$ctrl.accountIcons.expandIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.expandIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.expandIcon.icon}}"></prm-icon></md-button></div></div></md-list-item></md-list><prm-deposits-after parent-ctrl="$ctrl"></prm-deposits-after>');
$templateCache.put('components/account/depositsLink/deposits-link.html','<div layout="column" layout-fill class="header relative-position"><prm-topbar [links]="$ctrl.skipLinks"></prm-topbar></div><div layout="row" ng-class="{\'deposits-margin\' : !$ctrl.depositsCounter}"><div flex="0" flex-gt-md="25"></div><prm-deposits [deposits-counter]="$ctrl.depositsCounter" flex></prm-deposits><div flex="0" flex-gt-md="25"></div></div><prm-deposits-link-after parent-ctrl="$ctrl"></prm-deposits-link-after>');
$templateCache.put('components/account/fines/fines.html','<div class="tab-content-header" layout="row" layout-xs="column" layout-align="space-between end" layout-align-xs="start stretch"><div layout="column"><div class="header-title" layout="row"><h2 class="zero-margin" layout="row" layout-align="start center"><span translate="nui.fines.header"></span></h2></div><div class="header-subtitle"><span ng-if="$ctrl.finesBalance" class="items-count"><em translate="nui.fines.balance" translate-values="$ctrl.getFinesBalancePlaceHolder()"></em> </span><span ng-if="$ctrl.demeritsBalance" class="items-count"><em translate="nui.fines.demerits" translate-values="$ctrl.getDemeritsBalancePlaceHolder()"></em></span><md-button ng-if="$ctrl.payFinesLink" class="button-as-link button-external-link inline-button" ng-href="{{::$ctrl.payFinesLink}}" target="_blank"><span translate="fines.payfinelink"></span><prm-icon icon-type="{{::$ctrl.accountIcons.externalLinkIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.externalLinkIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.externalLinkIcon.icon}}" aria-label="{{::(\'nui.aria.account.links.open\' | translate)}}"></prm-icon></md-button><prm-account-links tab-name="fines"></prm-account-links></div><div ng-if="!$ctrl.finesDisplay.length || $ctrl.finesDisplay.length === \'0\'" ng-cloak class="message-with-icon" layout="row" layout-align="center center" layout-padding layout-margin><prm-icon class="giant-icon bg-icon" icon-type="{{$ctrl.accountIcons.emoticonCool.type}}" svg-icon-set="{{$ctrl.accountIcons.emoticonCool.iconSet}}" icon-definition="{{$ctrl.accountIcons.emoticonCool.icon}}"></prm-icon><div><span translate="nui.overview.nofines"></span></div></div></div><div class="tab-header-actions" layout="row" layout-align="end center" layout-align-xs="space-between center" ng-if="$ctrl.finesDisplay.length"><div layout="row" layout-align="start center"><md-input-container class="static-select" layout="row"><label class="md-container-ignore bold-text"><span translate="nui.librarycard.sortby"></span></label><md-select id="fines-focus" ng-model="$ctrl.sortBy" ng-change="$ctrl.sortFinesDisplay()" aria-label="{{::(\'nui.librarycard.sortby\' | translate)}}"><md-option ng-repeat="sortOption in ::$ctrl.sortOptions" value="{{::sortOption.fieldName}}"><span translate="{{::sortOption.optionName}}"></span></md-option></md-select></md-input-container></div><md-divider class="vertical-divider transparent-divider"></md-divider><md-button class="md-icon-button header-action expand-collapse-button" (click)="$ctrl.toggleAllExpand()" aria-label="epand all request items button"><md-tooltip md-autohide="true"><span ng-if="$ctrl.isAllExpanded" translate="nui.librarycard.collapseall.tooltip"></span><span ng-if="!$ctrl.isAllExpanded" translate="nui.librarycard.expandall.tooltip"></span></md-tooltip><span ng-if="!$ctrl.isAllExpanded"><prm-icon icon-type="{{::$ctrl.accountIcons.expandAllIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.expandAllIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.expandAllIcon.icon}}" aria-label="{{::(nui.aria.account.expandall | translate)}}"></prm-icon></span><span ng-if="$ctrl.isAllExpanded"><prm-icon icon-type="{{::$ctrl.accountIcons.collapseAllIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.collapseAllIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.collapseAllIcon.icon}}" aria-label="{{::(\'default.nui.aria.account.collapseall\' | translate)}}"></prm-icon></span></md-button></div></div><md-list class="separate-list-items gapped-list" layout="column"><md-list-item tabindex="0" class="md-3-line has-expand in-element-dialog-parent" ng-repeat="fine in $ctrl.finesDisplay| limitTo:200" ng-class="fine.isExpanded?\'item-expanded\':\'\'"><div class="in-element-dialog-context" layout="row" flex aria-live="assertive"><div class="md-list-item-text" layout="row" layout-wrap flex><span class="item-index">{{$index + 1}}</span><div flex flex-xs="100"><h3 ng-if="::fine.firstLineLeft" ng-class="::(fine.isAlert? \'prm-warn has-icon-on-left\': \'\')"><div ng-if="::fine.isAlert"><md-tooltip md-delay="400"><span translate="nui.fine.alert.tooltip"></span></md-tooltip><prm-icon icon-type="{{::$ctrl.accountIcons.fineAlertIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.fineAlertIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.fineAlertIcon.icon}}"></prm-icon></div><span>{{::fine.firstLineLeft}}</span></h3><h4 ng-if="::fine.secondLineLeft"><span translate="nui.fine.brief.1"></span> <span>{{::fine.secondLineLeft}}</span></h4></div><div flex flex-xs="100" class="weak-text"><p ng-if="::fine.firstLineRight" class="bold-text"><span>{{::fine.firstLineRight}}</span></p><p ng-if="::fine.secondLineRight"><span translate="nui.fine.brief.2"></span> <span>{{::fine.secondLineRight}}</span></p><p ng-if="fine.isExpanded" ng-repeat="line in ::fine.expandedDisplay"><span translate="{{::line.label}}"></span> <span>{{::line.data}}</span></p></div></div><div class="align-self-stretch"><md-button class="item-expand-button" aria-label="{{\'nui.aria.account.requests.expandcollapse\' | translate:\'{title: $ctrl.item.title}\'}}" (click)="$ctrl.toggleSingleExpand(fine)"><prm-icon ng-class="{\'rotate-180\':fine.isExpanded}" icon-type="{{::$ctrl.accountIcons.expandIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.expandIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.expandIcon.icon}}" aria-label="{{\'nui.aria.account.requests.expandcollapse\' | translate:\'{title: $ctrl.item.title}\'}}"></prm-icon></md-button><div ng-init="messageAdded = \'open\' ;\r\n                     messageRemoved = \'close\' " class="accessible-only" aria-label="{{fine.isExpanded ? messageAdded : messageRemoved}}" aria-live="assertive">{{fine.isExpanded ? messageAdded : messageRemoved}}</div></div></div></md-list-item></md-list><prm-fines-after parent-ctrl="$ctrl"></prm-fines-after>');
$templateCache.put('components/account/linkedUserSelector/linked-user-selector.html','<md-input-container ng-if="$ctrl.numOfInstitutions>1" layout="row" class="toolbar-select-input" layout-align="center"><md-select ng-model="$ctrl.selectedInstitution" ng-change="$ctrl.updateData()" aria-label="select linked user institution"><md-option ng-repeat="inst in $ctrl.institutionsList" ng-value="inst.value"><span translate="{{inst.label}}"></span></md-option></md-select></md-input-container><prm-linked-user-selector-after parent-ctrl="$ctrl"></prm-linked-user-selector-after>');
$templateCache.put('components/account/loans/loan.html','<div class="md-list-item-text" layout="row" layout-wrap flex aria-live="assertive"><span class="item-index">{{$ctrl.index}}</span><div flex="40" flex-xs="100"><h3 ng-if="::$ctrl.item.title">{{::$ctrl.item.title}}</h3><h4 ng-class="{\'loans-brief-display\':!$ctrl.isExpanded}"><span translate="nui.loan.brief.1"></span>{{::($ctrl.item.getBriefDisplayLine(1))}}</h4></div><div flex="40" flex-xs="100" class="weak-text"><div ng-if="::$ctrl.item.isActiveLoan()"><p class="normal-text" ng-style="$ctrl.item.isDueAlert() && {\'color\':\'tomato\'}"><prm-icon ng-if="::$ctrl.item.isDueAlert()" class="alert-red" aria-label="{{::(\'nui.aria.account.loans.alert\' | translate)}}" icon-type="{{::$ctrl.accountIcons.timerIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.timerIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.timerIcon.icon}}"></prm-icon><span translate="{{$ctrl.item.getCodeAlert()}}"></span>: {{($ctrl.item.getDateForBriefDisplay())}}. <span ng-if="::($ctrl.item.isFine())"><span translate="nui.loan.fine"></span>: {{::$ctrl.item.fine}}</span></p></div><div ng-if="::(!$ctrl.item.isActiveLoan())"><span translate="loans.return_date"></span> {{::($ctrl.item.getDateForBriefDisplay())}}</div><p class="normal-text" ng-class="{\'loans-brief-display\':!$ctrl.isExpanded}"><span translate="nui.loan.brief.2"></span>{{::($ctrl.item.getBriefDisplayLine(2))}}</p><div ng-if="$ctrl.isExpanded"><p ng-repeat="line in ::$ctrl.item.fullDisplayValues" class="normal-text"><span translate="loans.{{::line.key}}"></span> {{::line.value}}</p></div></div><div layout-align="end center" layout="row" flex="20" flex-xs="100" ng-class="{\'not-clickable\': $ctrl.renewAllInProgress}" class="list-item-actions"><div ng-if="$ctrl.isRenewable && !$ctrl.isRenewed && !$ctrl.renewInProgress"><md-button class="button-with-icon zero-margin button-link" (click)="$ctrl.renewLoan()" aria-label="{{\'nui.loans.renew\' | translate}}"><prm-icon class="h-flipped" icon-type="{{::$ctrl.accountIcons.renewLoanIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.renewLoanIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.renewLoanIcon.icon}}"></prm-icon><span translate="nui.loans.renew"></span></md-button></div><prm-spinner class="inline-loader half-transparent no-text" layout="row" layout-align="center center" ng-if="$ctrl.renewInProgress"></prm-spinner><div class="item-respond" ng-if="$ctrl.isRenewed"><span ng-style="$ctrl.renewResponse.renewed === \'N\' && {\'color\':\'tomato\'} || $ctrl.renewResponse.renewed === \'Y\' && {\'color\':\'green\'}"><span translate="{{$ctrl.renewResponse.response || \'loans.renewed.\' + $ctrl.renewResponse.renewed}}"></span></span></div></div></div><div class="align-self-stretch" flex-xs="100"><md-button class="item-expand-button" aria-label="{{\'nui.aria.account.requests.expandcollapse\' | translate:\'{title: $ctrl.item.title}\'}}" (click)="$ctrl.toggleDisplayMode()"><prm-icon ng-class="{\'rotate-180\':$ctrl.isExpanded}" icon-type="{{::$ctrl.accountIcons.expandIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.expandIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.expandIcon.icon}}" aria-label="{{\'nui.aria.account.requests.expandcollapse\' | translate:\'{title: $ctrl.item.title}\'}}"></prm-icon></md-button><div ng-init="messageAdded = \'open\' ;\r\n                      messageRemoved = \'close\' " class="accessible-only" aria-label="{{$ctrl.isExpanded ? messageAdded : messageRemoved}}" aria-live="assertive">{{$ctrl.isExpanded ? messageAdded : messageRemoved}}</div></div><prm-loan-after parent-ctrl="$ctrl"></prm-loan-after>');
$templateCache.put('components/account/loans/loans-list.html','<div class="tab-content-header" layout="row" layout-xs="column" layout-align="space-between end" layout-align-xs="start stretch"><div layout="column"><div class="header-title" layout="row" layout-align="start center"><h2 class="zero-margin"><span translate="nui.loans.header"></span></h2><md-input-container ng-if="$ctrl.hasHistoricLoans" class="prm-primary-color"><md-select id="loans-focus" ng-model="$ctrl.loanType" ng-change="$ctrl.changeLoansType()" aria-label="{{::(\'nui.aria.account.loans.types\' | translate)}}"><md-option ng-repeat="type in ::$ctrl.loanTypes" value="{{type}}"><span translate="nui.loan.{{::type}}"></span></md-option></md-select></md-input-container></div><div class="header-subtitle" ng-if="$ctrl.loansCounter"><span class="items-count"><em translate="nui.loans.counter" translate-values="$ctrl.getLoansBalancePlaceHolder()"></em><prm-account-links tab-name="loans"></prm-account-links></span></div><div ng-if="!$ctrl.loans || $ctrl.loans.length === 0" ng-cloak class="message-with-icon" layout="row" layout-align="center center" layout-padding layout-margin><prm-icon class="giant-icon bg-icon" icon-type="{{$ctrl.accountIcons.beer.type}}" svg-icon-set="{{$ctrl.accountIcons.beer.iconSet}}" icon-definition="{{$ctrl.accountIcons.beer.icon}}"></prm-icon><div><span translate="nui.overview.noloans"></span></div></div></div><div class="tab-header-actions" layout="row" layout-align="end center" layout-align-xs="space-between center" ng-if="$ctrl.loansCounter"><div layout="row" layout-align="start center"><md-input-container class="static-select empty-select-on-init" layout="row" ng-if="!$ctrl.sortInProgress"><label class="bold-text"><span translate="nui.librarycard.sortby"></span></label><md-select ng-model="$ctrl.sortBy" ng-change="$ctrl.sortAllLoans()" aria-label="{{\'nui.aria.account.loans.sort\' | translate}}"><md-option ng-repeat="sort in $ctrl.sortByOptions" value="{{sort}}"><span translate="nui.loan.sort.{{sort}}"></span></md-option></md-select></md-input-container><prm-spinner class="inline-loader half-transparent no-text" layout="row" layout-align="center center" ng-if="$ctrl.sortInProgress"></prm-spinner></div><md-divider class="vertical-divider transparent-divider"></md-divider><div layout="column" ng-if="$ctrl.loanType !== \'history\' && $ctrl.hasRenewableLoans()"><md-button ng-if="!$ctrl.renewAllInProgress" class="button-with-icon button-link" aria-label="{{\'nui.loans.renewall\' | translate}}" (click)="$ctrl.renewAllLoans()" ng-disabled="$ctrl.renewAllInProgress"><prm-icon class="h-flipped" icon-type="{{$ctrl.accountIcons.renewLoanIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.renewLoanIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.renewLoanIcon.icon}}" aria-label="{{\'nui.loans.renewall\' | translate}}"></prm-icon><span translate="nui.loans.renewall"></span></md-button><prm-spinner class="inline-loader half-transparent no-text" layout="row" layout-align="center center" ng-if="$ctrl.renewAllInProgress"></prm-spinner></div><md-divider class="vertical-divider transparent-divider" ng-if="$ctrl.loanType !== \'history\' && $ctrl.hasRenewableLoans()"></md-divider><md-button class="md-icon-button" (click)="$ctrl.toggleExpandAll()" aria-label="{{\'nui.aria.account.expandacollapse\' | translate}}"><md-tooltip md-autohide="true"><span ng-if="$ctrl.isExpandAll" translate="nui.loans.collapse"></span> <span ng-if="!$ctrl.isExpandAll" translate="nui.loans.expand"></span></md-tooltip><prm-icon ng-if="!$ctrl.isExpandAll" icon-type="{{$ctrl.accountIcons.expandAllIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.expandAllIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.expandAllIcon.icon}}" aria-label="{{\'nui.aria.account.expandall\' | translate}}"></prm-icon><prm-icon ng-if="$ctrl.isExpandAll" icon-type="{{$ctrl.accountIcons.collapseAllIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.collapseAllIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.collapseAllIcon.icon}}" aria-label="{{\'nui.aria.account.collapseall\' | translate}}"></prm-icon></md-button></div></div><prm-alert-bar flex [alert-object]="$ctrl.renewResponseAlert"></prm-alert-bar><md-list class="separate-list-items gapped-list" layout="column" infinite-scroll="$ctrl.loadMoreLoans()" infinite-scroll-distance="0"><md-list-item tabindex="0" class="md-3-line has-expand in-element-dialog-parent" ng-repeat="loan in $ctrl.loans" ng-class="{\'item-expanded\':loan.isExpanded}"><prm-loan [item]="::loan" index="{{$index + 1}}" class="in-element-dialog-context" layout="row" flex></prm-loan></md-list-item></md-list><prm-loans-after parent-ctrl="$ctrl"></prm-loans-after>');
$templateCache.put('components/account/messagesAndBlocks/messages-and-blocks.html','<div class="tab-content-header" layout="row" layout-xs="column" layout-align="space-between end" layout-align-xs="start stretch"><div class="layout-column"><h2 class="zero-margin" layout="row" layout-align="start center"><span class="title" translate="nui.blocks.header"></span></h2><span class="header-subtitle"><prm-account-links tab-name="blocks"></prm-account-links></span><div ng-if="!$ctrl.numOfMessages || $ctrl.numOfMessages === \'0\'" ng-cloak class="message-with-icon" layout="row" layout-align="center center" layout-padding layout-margin><prm-icon class="giant-icon bg-icon" icon-type="{{$ctrl.accountIcons.beach.type}}" svg-icon-set="{{$ctrl.accountIcons.beach.iconSet}}" icon-definition="{{$ctrl.accountIcons.beach.icon}}"></prm-icon><div><span translate="nui.overview.noblocks"></span></div></div></div><div class="tab-header-actions"></div></div><md-list class="separate-list-items gapped-list" layout="column"><md-list-item tabindex="0" ng-if="$ctrl.patronBlock" class="md-3-line has-expand" ng-class="libraryItemExpand?\'item-expanded\':\'\'"><div class="in-element-dialog-context" layout="row" flex><div class="md-list-item-text" layout="row"><div flex><h3 translate="block.patron"></h3><h4 ng-repeat="item in $ctrl.patronBlockText">{{item}}</h4></div></div></div></md-list-item><div ng-repeat="(institutionCode, institution) in $ctrl.messagesDisplay"><div ng-repeat="(mainLocationCode, messages) in institution"><p class="unmuted-text">{{institutionCode}}-{{mainLocationCode}}</p><md-list-item class="md-3-line {{message.new}}" ng-repeat="message in messages"><div class="in-element-dialog-context" layout="row" flex><div class="md-list-item-text" layout="row"><span class="item-index">{{message.index}}</span><div flex><p ng-if="message.ilsinstitutionname">{{message.ilsinstitutionname}}</p><p ng-if="message.text">{{message.text}}</p></div></div></div></md-list-item></div></div></md-list><prm-messages-and-blocks-after parent-ctrl="$ctrl"></prm-messages-and-blocks-after>');
$templateCache.put('components/account/overview/account-overview.html','<md-content flex id="accountoverview" tabindex="-1" role="main"><md-tabs md-selected="$ctrl.selectedTabIndex" md-dynamic-height md-border-bottom class="static-tabs default-tabs"><md-tab id="tab1" md-on-select="$ctrl.updateSelectedSection(\'overview\');\r\n        \t\t\t\t\t\t\t\t$ctrl.primolyticsService.doBeaconReport({\'p\':\'myAccount\', \'op\':\'menu.myaccount.overview\'}, undefined, $ctrl.primolyticsService.getTimestamp()); "><md-tab-label><span translate="nui.overview.header"></span></md-tab-label><md-tab-body><div class="gridListdemoDynamicTiles"><div class="tiles-grid"><prm-loans-overview ng-if="$ctrl.requiredTabsList.indexOf(\'loans\') !== -1" [loans-counters]="$ctrl.loansCounters" (link-to-loans-event)="$ctrl.handleOpenTabEvent($event,\'loans\')"></prm-loans-overview><prm-requests-overview ng-if="$ctrl.requiredTabsList.indexOf(\'requests\') !== -1" [requests-counters]="$ctrl.requestsCounter" (link-to-requests-event)="$ctrl.handleOpenTabEvent($event,\'requests\')"></prm-requests-overview><prm-fines-overview ng-if="$ctrl.requiredTabsList.indexOf(\'fines\') !== -1" [fines-counters]="$ctrl.finesCounters" [demerits-counter]="$ctrl.demeritsCounter" (link-to-fines-event)="$ctrl.handleOpenTabEvent($event,\'fines\')"></prm-fines-overview><prm-messages-and-blocks-overview ng-if="$ctrl.requiredTabsList.indexOf(\'blocks\') !== -1" (link-to-messages-event)="$ctrl.handleOpenTabEvent($event,\'blocks\')"></prm-messages-and-blocks-overview><prm-deposits-overview ng-if="$ctrl.requiredTabsList.indexOf(\'deposits\') !== -1" [deposits-counters]="$ctrl.depositsCounter" (link-to-deposits-event)="$ctrl.handleOpenTabEvent($event,\'deposits\')"></prm-deposits-overview></div></div></md-tab-body></md-tab><md-tab ng-if="$ctrl.requiredTabsList.indexOf(\'loans\') !== -1" md-on-select="$ctrl.updateSelectedSection(\'loans\'); $ctrl.primolyticsService.doBeaconReport({\'p\':\'myAccount\', \'op\':\'menu.myaccount.loans\'}, undefined, $ctrl.primolyticsService.getTimestamp()); $ctrl.focusFirstElement(\'loans\')" id="tab2"><md-tab-label><div layout="row"><span translate="nui.loans.header"></span><prm-icon ng-if="$ctrl.isLoansAlerts()" class="prm-warn" icon-type="{{$ctrl.accountIcons.timerIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.timerIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.timerIcon.icon}}"></prm-icon></div></md-tab-label><md-tab-body><div layout="row"><prm-loans [loans-counter]="$ctrl.loansCounters" flex></prm-loans><div flex="0" flex-gt-md="20"></div></div></md-tab-body></md-tab><md-tab ng-if="$ctrl.requiredTabsList.indexOf(\'requests\') !== -1" md-on-select="$ctrl.updateSelectedSection(\'requests\'); $ctrl.primolyticsService.doBeaconReport({\'p\':\'myAccount\', \'op\':\'menu.myaccount.requests\'}, undefined, $ctrl.primolyticsService.getTimestamp()); $ctrl.focusFirstElement(\'requests\')" id="tab3" label="Requests"><md-tab-label><div layout="row"><span translate="nui.requests.header"></span><prm-icon ng-if="$ctrl.requestsGeneralAlert" class="prm-positive" icon-type="{{$ctrl.accountIcons.requestsAlertIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.requestsAlertIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.requestsAlertIcon.icon}}" aria-label="{{\'nui.aria.account.requests.alert\' | translate}}"></prm-icon></div></md-tab-label><md-tab-body><div layout="row"><prm-requests [requests-counter]="$ctrl.requestsCounter" flex></prm-requests><div flex="0" flex-gt-md="20"></div></div></md-tab-body></md-tab><md-tab ng-if="$ctrl.requiredTabsList.indexOf(\'fines\') !== -1" md-on-select="$ctrl.updateSelectedSection(\'fines\'); $ctrl.primolyticsService.doBeaconReport({\'p\':\'myAccount\', \'op\':\'menu.myaccount.finesAndFees\'}, undefined, $ctrl.primolyticsService.getTimestamp());\r\n                $ctrl.focusFirstElement(\'fines\')" id="tab4"><md-tab-label><div layout="row"><span translate="nui.fines.header"></span><div ng-if="$ctrl.finesGeneralAlert"><md-tooltip md-delay="400"><span translate="nui.fine.alert.tooltip"></span></md-tooltip><prm-icon class="prm-warn" icon-type="{{$ctrl.accountIcons.fineAlertIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.fineAlertIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.fineAlertIcon.icon}}"></prm-icon></div></div></md-tab-label><md-tab-body><div layout="row"><prm-fines [fines-counters]="$ctrl.finesCounters" [demerits-counter]="$ctrl.demeritsCounter" flex></prm-fines><div flex="0" flex-gt-md="20"></div></div></md-tab-body></md-tab><md-tab ng-if="$ctrl.requiredTabsList.indexOf(\'blocks\') !== -1" md-on-select="$ctrl.updateSelectedSection(\'blocks_messages\'); $ctrl.primolyticsService.doBeaconReport({\'p\':\'myAccount\', \'op\':\'menu.myaccount.blocksAndMessages\'}, undefined, $ctrl.primolyticsService.getTimestamp())" id="tab5"><md-tab-label><div layout="row"><span translate="nui.blocks.header"></span><prm-icon ng-if="$ctrl.messagesGeneralAlert" class="prm-notice" icon-type="{{$ctrl.accountIcons.messagesAlertIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.messagesAlertIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.messagesAlertIcon.icon}}"></prm-icon></div></md-tab-label><md-tab-body><div layout="row"><prm-messages-and-blocks flex></prm-messages-and-blocks><div flex="0" flex-gt-md="20"></div></div></md-tab-body></md-tab><md-tab ng-if="$ctrl.requiredTabsList.indexOf(\'personal_settings\') !== -1" id="tab6" md-on-select="$ctrl.updateSelectedSection(\'personal_details\'); $ctrl.primolyticsService.doBeaconReport({\'p\':\'myAccount\', \'op\':\'menu.myaccount.personalDetails\'}, undefined, $ctrl.primolyticsService.getTimestamp()); $ctrl.focusFirstElement(\'personal_settings\')"><md-tab-label><span translate="nui.details.header"></span></md-tab-label><md-tab-body><div layout="row"><prm-personal-info flex></prm-personal-info><div flex="0" flex-lg="10" flex-xl="20" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus}"></div></div></md-tab-body></md-tab><md-tab ng-if="$ctrl.requiredTabsList.indexOf(\'deposits\') !== -1" md-on-select="$ctrl.updateSelectedSection(\'deposits\'); $ctrl.primolyticsService.doBeaconReport({\'p\':\'myAccount\', \'op\':\'menu.myaccount.deposits\'})" id="tab7" label="Deposits"><md-tab-label><div layout="row"><span translate="nui.deposits.header"></span><prm-icon ng-if="$ctrl.depositsGeneralAlert" class="prm-positive" icon-type="{{$ctrl.accountIcons.depositsAlertIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.depositsAlertIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.depositsAlertIcon.icon}}" aria-label="{{\'nui.aria.account.deposits.alert\' | translate}}"></prm-icon></div></md-tab-label><md-tab-body><div layout="row"><prm-deposits [deposits-counter]="$ctrl.depositsCounter" flex></prm-deposits><div flex="0" flex-gt-md="20"></div></div></md-tab-body></md-tab></md-tabs></md-content><prm-account-overview-after parent-ctrl="$ctrl"></prm-account-overview-after>');
$templateCache.put('components/account/personalInfo/personal-info.html','<div class="tab-content-header" layout="row" layout-align="space-between end"><div layout="column"><div class="header-title" layout="row"><h2 class="zero-margin" layout="row" layout-align="start center"><span translate="nui.details.header"></span></h2></div><div class="header-subtitle"><div ng-repeat="inst in $ctrl.generalSection" class="header-subtitle"><div ng-repeat="cur in inst" layout="column"><em class="first-letter-uppercase"><span ng-if="cur.institution" translate="nui.details.patronstatus.institution" translate-values="$ctrl.getPlaceHolders(cur)"></span> <span ng-if="cur.expiryDate" translate="nui.details.patronstatus.expirydate" translate-values="$ctrl.getPlaceHolders(cur)"></span> <span ng-if="cur.patronGroup" translate="nui.details.patronstatus.group" translate-values="$ctrl.getPlaceHolders(cur)"></span></em></div></div><prm-account-links tab-name="personalsettings"></prm-account-links></div></div></div><div layout="row" layout-wrap layout-align="center start" style="z-index: 1"><md-card class="default-card card-with-header-actions" id="personalDetails" ng-class="{\'editable editable-active\':$ctrl.formMode == \'Edit\', \'error-warning\':$ctrl.formMode == \'Error\'}" flex flex-sm="100" flex-xs="100"><div class="bar success-bar" ng-repeat="msg in $ctrl.successMessages" layout-margin ng-if="$ctrl.successMessages.length > 0" layout="row" layout-align="start center"><span translate="{{msg}}" class="zero-margin"></span></div><div class="bar error-bar" ng-repeat="msg in $ctrl.errorMessages" layout-margin ng-if="$ctrl.errorMessages.length > 0" layout="row" layout-align="start center"><span translate="{{msg}}" class="zero-margin"></span></div><md-card-header class="transparent-toolbar" layout-fill><div class="md-toolbar-tools"><span flex></span><md-button id="personal_settings-focus" ng-if="$ctrl.isEditable() && $ctrl.formMode == \'View\'" class="button-with-icon button-link" (click)="$ctrl.editDetails()" aria-label="{{\'nui.details.edit\' | translate}}"><prm-icon icon-type="{{$ctrl.accountIcons.editIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.editIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.editIcon.icon}}"></prm-icon><span translate="nui.details.edit"></span></md-button><md-button ng-if="$ctrl.formMode != \'View\'" class="button-with-icon button-warn" (click)="$ctrl.discardChanges()" aria-label="{{\'nui.details.discard\' | translate}}"><prm-icon icon-type="{{$ctrl.accountIcons.discardChangesIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.discardChangesIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.discardChangesIcon.icon}}"></prm-icon><span class="ng-scope" translate="nui.details.discard"></span></md-button><md-button ng-if="$ctrl.formMode != \'View\'" class="button-with-icon button-confirm" (click)="$ctrl.save()" aria-label="{{\'nui.details.Save\' | translate}}"><prm-icon icon-type="{{$ctrl.accountIcons.saveChangesIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.saveChangesIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.saveChangesIcon.icon}}"></prm-icon><span translate="nui.details.Save"></span></md-button></div></md-card-header><md-card-content class="presentable-disabled-inputs animate-form-inputs" layout="row" layout-wrap><div class="card-content-section layout-full-width" layout="row" layout-wrap layout-align="start start"><h4 class="card-content-section-title" layout-fill><span translate="nui.details.addressSection"></span></h4><div ng-repeat="groupFields in $ctrl.addressSection" class="input-containers-group" flex-xs="100" flex-gt-xs="50" flex-gt-md="33" layout="column"><div layout-margin><md-input-container ng-repeat="field in groupFields" class="underlined-input" layout="column"><label for="prm_{{field.label}}" translate="{{field.label}}"></label><input ng-model="$ctrl.personalInfo[field.name]" type="text" disabled="disabled" ng-disabled="$ctrl.formMode == \'View\' || field.uiType == \'readonly\'"></md-input-container></div></div></div><md-divder class="card-divider margin-bottom-large" layout-margin></md-divder><div class="card-content-section layout-full-width" layout="row" layout-wrap layout-align="start start"><h4 class="card-content-section-title" layout-fill><span translate="nui.details.phoneNumberSection"></span></h4><div ng-repeat="groupFields in $ctrl.phoneNumberSection" class="input-containers-group" flex-xs="100" flex-gt-xs="50" flex-gt-md="50" layout="column"><div layout-margin><md-input-container ng-repeat="field in groupFields" class="underlined-input" layout="column"><label for="prm_{{field.label}}" translate="{{field.label}}"></label><input ng-model="$ctrl.personalInfo[field.name]" type="text" disabled="disabled" ng-disabled="$ctrl.formMode == \'View\' || field.uiType == \'readonly\'"></md-input-container></div></div></div><md-divder ng-if="false" class="card-divider margin-bottom-medium" layout-margin></md-divder><div ng-if="false" class="card-content-section layout-full-width" layout="row" layout-wrap layout-align="start start"><div flex flex-gt-xs="45" flex-gt-md="30"><div layout-margin><md-input-container ng-hide="true" layout="row" class="underlined-input"><label><span translate="nui.details.mailing"></span></label><md-select ng-model="$ctrl.mailSelectedOption"><md-option ng-repeat="option in $ctrl.mailOptions" value="{{option.value}}"><span translate="results.sortby.option.{{option.text}}"></span></md-option></md-select></md-input-container></div></div></div><md-divder ng-if="$ctrl.showActionSection()" class="card-divider margin-bottom-medium" layout-margin></md-divder><div ng-if="$ctrl.showActionSection()" class="card-content-section layout-full-width" layout="row" layout-wrap layout-align="start start"><h4 class="card-content-section-title" layout-fill><span translate="nui.details.actionSection"></span></h4><md-checkbox ng-repeat="cur in $ctrl.actionSection" class="has-small-text zero-margin" ng-model="$ctrl.personalInfo[cur.name]" ng-disabled="$ctrl.formMode == \'View\'" flex="50"><div layout="column"><span translate="{{cur.label}}"></span></div></md-checkbox></div></md-card-content></md-card><md-card class="default-card" flex-sm="100" flex-xs="100"><md-card-content layout="column" layout-align="space-around center"><prm-change-lang label-type="text" layout="column" layout-align="center center"></prm-change-lang><md-divider class="card-divider" layout-margin></md-divider><md-button ng-if="$ctrl.showPasswordSection()" class="button-link" aria-label="{{\'nui.aria.account.details.editpassword\' | translate}}" ng-click="$ctrl.showLoginDialog()"><span translate="contact.header.changePassword"></span></md-button></md-card-content></md-card></div><prm-personal-info-after parent-ctrl="$ctrl"></prm-personal-info-after>');
$templateCache.put('components/account/requests/request-confirm-dialog.html','<md-dialog class="in-element-dialog" layout="column"><form layout="row" layout-align="end center" layout-fill><md-dialog-content><div class="md-dialog-content bold-text" layout-align="center"><span translate="nui.request.confirm.message"></span></div></md-dialog-content><div class="md-actions" layout="row"><md-button ng-click="ctrl.hide()"><span translate="nui.request.confirm.no"></span></md-button><md-button class="dialog-primary button-confirm" ng-click="ctrl.cancelIt(); ctrl.hide();"><span translate="nui.request.confirm.ok"></span></md-button></div></form></md-dialog>');
$templateCache.put('components/account/requests/requests.html','<div class="tab-content-header" layout="row" layout-xs="column" layout-align="space-between end" layout-align-xs="start stretch"><div layout="column"><div class="header-title" layout="row"><h2 class="zero-margin" layout="row" layout-align="start center"><span translate="nui.requests.header"></span></h2></div><div class="header-subtitle"><span class="items-count" ng-if="$ctrl.requestsCounter"><em translate="nui.requests.counter" translate-values="$ctrl.getRequestsCountPlaceHolder()"></em><prm-account-links tab-name="requests"></prm-account-links></span></div><div ng-if="!$ctrl.requestsCounter || $ctrl.requestsCounter === \'0\'" ng-cloak class="message-with-icon" layout="row" layout-align="center center" layout-padding layout-margin><prm-icon class="giant-icon bg-icon" icon-type="{{$ctrl.accountIcons.sun.type}}" svg-icon-set="{{$ctrl.accountIcons.sun.iconSet}}" icon-definition="{{$ctrl.accountIcons.sun.icon}}"></prm-icon><div><span translate="nui.overview.norequests"></span></div></div></div><div class="tab-header-actions" layout="row" layout-align="end center" layout-align-xs="space-between center" ng-if="$ctrl.requestsCounter"><div layout="row" layout-align="start center"><md-input-container class="static-select empty-select-on-init" layout="row"><label class="md-container-ignore bold-text"><span translate="nui.librarycard.sortby"></span></label><md-select id="requests-focus" ng-model="$ctrl.sortBy" ng-change="$ctrl.sortRequestsDisplay()" aria-label="{{::(\'nui.librarycard.sortby\' | translate)}}"><md-option ng-repeat="sortOption in ::$ctrl.sortOptions" value="{{::sortOption.fieldName}}"><span translate="{{::sortOption.optionName}}"></span></md-option></md-select></md-input-container></div><md-divider class="vertical-divider transparent-divider"></md-divider><md-button class="md-icon-button header-action expand-collapse-button" (click)="$ctrl.toggleAllExpand()" aria-label="epand all request items button"><md-tooltip md-autohide="true"><span ng-if="$ctrl.isAllExpanded" translate="nui.librarycard.collapseall.tooltip"></span><span ng-if="!$ctrl.isAllExpanded" translate="nui.librarycard.expandall.tooltip"></span></md-tooltip><span ng-if="!$ctrl.isAllExpanded"><prm-icon icon-type="{{::$ctrl.accountIcons.expandAllIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.expandAllIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.expandAllIcon.icon}}" aria-label="{{::(nui.aria.account.expandall | translate)}}"></prm-icon></span><span ng-if="$ctrl.isAllExpanded"><prm-icon icon-type="{{::$ctrl.accountIcons.collapseAllIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.collapseAllIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.collapseAllIcon.icon}}" aria-label="{{::(\'default.nui.aria.account.collapseall\' | translate)}}"></prm-icon></span></md-button></div></div><md-list class="separate-list-items gapped-list" layout="column"><md-list-item tabindex="0" class="md-3-line has-expand in-element-dialog-parent" ng-repeat="requestDisplay in $ctrl.requestsDisplay | limitTo:200" ng-hide="actionSuccessful" ng-class="requestDisplay.isExpanded?\'item-expanded\':\'\'"><div class="in-element-dialog-context" layout="row" flex><div class="md-list-item-text" layout="row" layout-wrap flex aria-live="assertive"><span class="item-index">{{$index + 1}}</span><div flex flex-xs="100"><h3 ng-if="::requestDisplay.firstLineLeft">{{::requestDisplay.firstLineLeft}}</h3><h4 ng-if="::requestDisplay.secondLineLeft"><span translate="nui.request.brief.1"></span>{{::requestDisplay.secondLineLeft}}</h4></div><div flex flex-xs="100" class="weak-text"><p class="bold-text" ng-if="::requestDisplay.firstLineRight" ng-style="::(request.new && {\'color\':\'#5cb85c\'})"><prm-icon ng-if="::requestDisplay.isAlert" style="color: #5cb85c" icon-type="{{::$ctrl.accountIcons.requestsAlertIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.requestsAlertIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.requestsAlertIcon.icon}}" aria-label="{{::(\'nui.aria.account.requests.alert\' | translate)}}"></prm-icon><span class="text-uppercase"><span translate="{{::(\'request.\'+requestDisplay.requestType+\'.request_type\')}}"></span></span>.{{requestDisplay.firstLineRight}}</p><p ng-if="::requestDisplay.secondLineRight"><span translate="nui.request.brief.2"></span> {{::requestDisplay.secondLineRight}}</p><div ng-if="requestDisplay.isExpanded"><p ng-repeat="line in ::requestDisplay.expandedDisplay"><span ng-if="line.label != \'request_id\'"><span translate="{{::(line.label)}}"></span> {{::line.data}}</span></p></div></div><div layout-align="end center" layout="row" layout-wrap flex-xs="100" flex-sm="30" flex class="list-item-actions"><md-button ng-if="::(requestDisplay.isCancelable)" class="button-with-icon zero-margin button-link" ng-hide="$ctrl.cancelPromptDisplayId === requestDisplay.requestId || $ctrl.failedRequestId === requestDisplay.requestId" ng-disabled="$ctrl.isInCancelAction" (click)="$ctrl.showCancelPrompt($event,requestDisplay.requestId, requestDisplay.requestType)" aria-label="cancel request button"><prm-icon class="h-flipped" icon-type="{{::$ctrl.accountIcons.removeIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.removeIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.removeIcon.icon}}"></prm-icon><span translate="nui.requests.cancel"></span></md-button><div class="item-respond" ng-if="$ctrl.failedRequestId === requestDisplay.requestId"><span class="error-response">{{$ctrl.failedRequestMessage}}</span></div></div></div><div class="align-self-stretch"><md-button class="item-expand-button" aria-label="{{::(\'nui.aria.account.requests.expandcollapse\' | translate)}}" (click)="requestDisplay.isExpanded = !requestDisplay.isExpanded"><prm-icon ng-class="{\'rotate-180\':requestDisplay.isExpanded}" icon-type="{{::$ctrl.accountIcons.expandIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.expandIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.expandIcon.icon}}"></prm-icon></md-button><div ng-init="messageAdded = \'open\';\r\n                      messageRemoved = \'close\' " class="accessible-only" aria-label="{{requestDisplay.isExpanded ? messageAdded : messageRemoved}}" aria-live="assertive">{{requestDisplay.isExpanded ? messageAdded : messageRemoved}}</div></div></div></md-list-item></md-list><prm-requests-after parent-ctrl="$ctrl"></prm-requests-after>');
$templateCache.put('components/analytics/performanceMonitor/performance-monitor.html','<div ng-if="$ctrl.displayMonitor"><span>Client monitor</span><ul><li>total search time: {{$ctrl.totalSearchTime}}</li><li>search api response time: {{$ctrl.searchApiTime}}</li><li>results render time: {{$ctrl.resultsRenderTime}}</li></ul><span>Server monitor</span><ul><li>total search api time: {{$ctrl.totalSearchServerTime}}</li><li>search time: {{$ctrl.searchServerTime}}</li><li>delivery manager time: {{$ctrl.deliveryManagerServerTime}}</li></ul></div><prm-performance-monitor-after parent-ctrl="$ctrl"></prm-performance-monitor-after>');
$templateCache.put('components/collection/collectionBreadcrumbs/collectionBreadcrumbs.html','<div class="breadcrumbs-bar" layout="row" layout-wrap layout-align="start center"><md-button aria-label="{{\'nui.aria.collectionDiscovery.topNodeButton\' | translate}}" ng-href="collectionDiscovery.do?collectionId=0&vid={{$ctrl.bvid}}&colayout={{$ctrl.colayout}}&inst={{$ctrl.inst}}"><span translate="colldiscovery.collpath.topnode"></span></md-button><prm-icon prm-aria-label="Collection Level Indicator" icon-type="{{$ctrl.collectionIcons.rightArrow.type}}" svg-icon-set="{{$ctrl.collectionIcons.rightArrow.iconSet}}" icon-definition="{{$ctrl.collectionIcons.rightArrow.icon}}"></prm-icon><md-button ng-repeat="item in $ctrl.breadcrumbs" ng-href="collectionDiscovery.do?collectionId={{item.pid}}&vid={{$ctrl.bvid}}&colayout={{$ctrl.colayout}}&inst={{$ctrl.inst}}">{{item.name}}<prm-icon prm-aria-label="Collection Level Indicator" icon-type="{{$ctrl.collectionIcons.rightArrow.type}}" svg-icon-set="{{$ctrl.collectionIcons.rightArrow.iconSet}}" icon-definition="{{$ctrl.collectionIcons.rightArrow.icon}}"></prm-icon></md-button></div><prm-collection-breadcrumbs-after parent-ctrl="$ctrl"></prm-collection-breadcrumbs-after>');
$templateCache.put('components/collectionDiscovery/collectionGallery/collection-gallery.html','<md-content class="padded-container" layout="row" layout-align="center start" flex><div flex="0" flex-md="0" flex-lg="10" flex-xl="20"></div><div flex><div class="ui-blocker" ng-if="vm.state.searchInProgress"></div><div class="results-title" layout="row" layout-align="start center" style="font-style: italic; position: relative; top: -7px; padding-left: 10px"><span flex></span></div><prm-gallery-collections-list ng-if="::$ctrl.collections" [collections]="::$ctrl.collections" [next-path]="::$ctrl.nextPath" [is-gallery-lobby]="$ctrl.isGalleryLobby"></prm-gallery-collections-list><prm-gallery-items-list></prm-gallery-items-list></div><div flex="0" flex-md="0" flex-lg="10" flex-xl="15"></div></md-content><prm-collection-gallery-after parent-ctrl="$ctrl"></prm-collection-gallery-after>');
$templateCache.put('components/collectionDiscovery/collectionGalleryHeader/collection-gallery-header.html','<div class="collection-header-inner has-transparent-topbar" ng-class="{\'has-backdrop-image\': $ctrl.thumbnailUrl}" layout="column" ng-style="$ctrl.thumbnailUrl && {\'background-image\': \'url(\' + $ctrl.thumbnailUrl + \')\'}"><div layout="row" class="margin-top-medium"><div flex="0" flex-lg="10" flex-xl="20"></div><div flex><prm-collection-navigation-breadcrumbs ng-if="::!$ctrl.isGalleryLobby" [path]="::$ctrl.path"></prm-collection-navigation-breadcrumbs></div><div flex="0" flex-md="15" flex-lg="20" flex-xl="20"></div></div><div layout="row"><div flex="0" flex-lg="10" flex-xl="20"></div><div layout="column" flex><div class="collection-info"><h1 class="collection-title bold-text">{{::$ctrl.title}}</h1><div class="item-actions result-item-actions"><prm-save-to-favorites-button ng-if="::$ctrl.currentCollectionRecord" [item]="::$ctrl.currentCollectionRecord"></prm-save-to-favorites-button></div><p>{{::$ctrl.description}}</p></div></div><div flex="0" flex-md="15" flex-lg="20" flex-xl="20"></div></div></div><prm-collection-gallery-header-after parent-ctrl="$ctrl"></prm-collection-gallery-header-after>');
$templateCache.put('components/collectionDiscovery/collectionNavigationBreadcrumbs/collection-navigation-breadcrumbs.html','<div layout="row" layout-align="start center" layout-wrap><prm-collection-navigation-breadcrumbs-item layout="row" layout-align="start center" class="root-item" [path-object]="pathObject" [is-root-object]="true" [institution]="$ctrl.institution"></prm-collection-navigation-breadcrumbs-item><prm-collection-navigation-breadcrumbs-item layout="row" layout-align="start center" ng-repeat="pathObject in $ctrl.path" [path-object]="pathObject" [institution]="$ctrl.institution"></prm-collection-navigation-breadcrumbs-item></div><prm-collection-navigation-breadcrumbs-after parent-ctrl="$ctrl"></prm-collection-navigation-breadcrumbs-after>');
$templateCache.put('components/collectionDiscovery/recordCollectionPaths/record-collection-paths.html','<div ng-if="::$ctrl.paths" layout="row" layout-xs="column" class="layout-block-xs"><div flex-gt-sm="20" flex-gt-xs="25" flex><span class="bold-text" translate="nui.colldiscovery.details.paths" translate-attr-title="nui.colldiscovery.details.paths"></span></div><div flex (click)="$ctrl.closeDialog()"><prm-collection-navigation-breadcrumbs ng-repeat="pathObject in $ctrl.paths" [path]="::pathObject.path" [institution]="::pathObject.institution"></prm-collection-navigation-breadcrumbs></div></div><prm-record-collection-paths-after parent-ctrl="$ctrl"></prm-record-collection-paths-after>');
$templateCache.put('components/favorites/favoritesEditLabelsMenu/favorites-edit-labels-menu.html','<md-menu><md-button prm-brief-internal-button-marker class="labels-menu-button prm-primary" ng-click="$ctrl.openMenu($mdOpenMenu, $event)" aria-label="{{$ctrl.isChosenLabels() | translate}}" ng-class="$ctrl.returnAssignedLabels().length ? \'md-icon-button\':\'button-with-icon\'"><md-tooltip md-delay="400"><span translate="nui.favorites.labels.tooltip"></span></md-tooltip><prm-icon ng-init="iconDef=$ctrl.isSection ? $ctrl.favoritesIcons.addLabelTop : $ctrl.favoritesIcons.addLabelRecord" ng-class="{\'disabledFavTool\':$ctrl.disable}" icon-type="svg" svg-icon-set="primo-ui" icon-definition="pencil"></prm-icon><span ng-if="!$ctrl.returnAssignedLabels().length" translate="nui.favorites.labels.add" ng-class="{\'disabledFavTool\':$ctrl.disable}"></span></md-button><md-menu-content width="4" layout="column" class="menu-with-footer"><md-menu-item ng-repeat="label in $ctrl.returnAssignedLabels() track by $index" class="icon-on-right" ng-class="{\'category-first-item\': $first}"><div class="menu-title" ng-if="$first"><span translate="nui.favorites.labels.assigned"></span></div><md-button md-autofocus ng-click="$ctrl.removeLabel(label)" aria-label="{{\'nui.aria.account.favorites.removelabel\' | translate}}" layout="row" layout-align="space-around center" layout-fill><span layout="row" layout-align="space-around center" layout-fill><span flex="90" class="flex-trim">{{label}}</span><prm-icon flex="10" class="prm-primary" icon-type="{{$ctrl.favoritesIcons.removeLabel.type}}" svg-icon-set="{{$ctrl.favoritesIcons.removeLabel.iconSet}}" icon-definition="{{$ctrl.favoritesIcons.removeLabel.icon}}"></prm-icon></span></md-button></md-menu-item><md-menu-divider ng-if="$ctrl.returnOtherLabels().length && $ctrl.returnAssignedLabels().length"></md-menu-divider><md-menu-item ng-repeat="otherLabel in $ctrl.returnOtherLabels() track by $index" class="icon-on-right" ng-class="{\'category-first-item\': $first}"><div class="menu-title" ng-if="$first"><span translate="nui.favorites.labels.other"></span></div><md-button ng-click="$ctrl.addLabel(otherLabel)" aria-label="{{\'nui.aria.account.favorites.addlabel\' | translate}}" layout="row" layout-align="space-around center" layout-fill><span layout="row" layout-align="space-around center" layout-fill><span flex="90" class="flex-trim">{{otherLabel}}</span><prm-icon flex="10" class="prm-primary" icon-type="{{$ctrl.favoritesIcons.addLabel.type}}" svg-icon-set="{{$ctrl.favoritesIcons.addLabel.iconSet}}" icon-definition="{{$ctrl.favoritesIcons.addLabel.icon}}"></prm-icon></span></md-button></md-menu-item><div class="menu-footer"><md-menu-divider ng-if="$ctrl.returnOtherLabels().length || $ctrl.returnAssignedLabels().length" class="zero-margin-top"></md-menu-divider><form ng-submit="$ctrl.addNewLabel()" class=""><div layout="row" layout-fill layout-align="center center"><md-input-container flex="80"><label translate="nui.favorites.labels.new"></label><input ng-model="$ctrl.newLabel" type="text" autocomplete="off" md-autofocus></md-input-container></div></form></div></md-menu-content></md-menu><prm-favorites-edit-labels-menu-after parent-ctrl="$ctrl"></prm-favorites-edit-labels-menu-after>');
$templateCache.put('components/favorites/favoritesLabels/favorites-labels.html','<div layout="column" ng-if="$ctrl.getUser()" sticky offset="84" disabled-sticky="!$ctrl.mediaQueries.gtsm"><div class="sidebar-inner-wrapper padding-left-large" layout="column"><h2 class="sidebar-title" translate="nui.favorites.labels.header"></h2><div class="sidebar-section" layout="column" layout-align="start start"><div class="md-chips chips-column" layout="column" layout-align="start start"><div class="md-chip toggleable-chip rounded-chip hovered-chip {{labels[0]}}" ng-repeat="labels in $ctrl.favoritesService.getSortedLabels()" ng-class="{\'chip-toggled-on\': $ctrl.isSelectedLabel(labels[0])}" ng-click="$ctrl.checkSelectedLabels(labels[0])" aria-label="{{labels[0]}} Tag" layout-row><md-tooltip md-delay="800"><span ng-if="!$ctrl.isSelectedLabel(labels[0])" translate="nui.favorites.selectFilter.tooltip"></span> <span ng-if="$ctrl.isSelectedLabel(labels[0])" translate="nui.favorites.removeFilter.tooltip"></span></md-tooltip><div class="md-chip-content"><strong translate-default="{{labels[0]}}" translate="nui.favorites.{{labels[0]}}"></strong> &nbsp; <span class="text-in-brackets text-italic">{{labels[1]}}</span></div><div class="md-chip-remove-container" ng-if="$ctrl.isSelectedLabel(labels[0])" ng-mouseenter="showRemoveIcon = true" ng-mouseleave="showRemoveIcon = false"><button class="md-chip-remove ng-scope" type="button" aria-hidden="true" tabindex="-1"><prm-icon aria-label="{{\'nui.aria.favorites.removelabel\' | translate:\'{name: \\\'\'+labels[0]+\'\\\'}\'}}" icon-type="{{$ctrl.favoritesIcons.labelChecked.type}}" svg-icon-set="{{$ctrl.favoritesIcons.labelChecked.iconSet}}" icon-definition="{{$ctrl.favoritesIcons.labelChecked.icon}}" ng-if="!showRemoveIcon"></prm-icon><prm-icon aria-label="{{\'nui.aria.favorites.removelabel\' |           translate:\'{name: \\\'\'+labels[0]+\'\\\'}\'}}" icon-type="svg" svg-icon-set="primo-ui" icon-definition="close" ng-if="showRemoveIcon" class="close-button"></prm-icon><span class="_md-visually-hidden ng-binding" translate="nui.favorites.remove"></span></button></div></div></div><div class="margin-top-small margin-bottom-medium animate-enter-leave-scale-bounce" ng-if="$ctrl.selectedLabels.length > 0"><md-button class="button-as-link link-alt-color zero-margin" (click)="$ctrl.clearAll()"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="close"></prm-icon><span class="bold-text" translate="nui.favorites.labels.clear"></span></md-button></div></div></div></div><prm-favorites-labels-after parent-ctrl="$ctrl"></prm-favorites-labels-after>');
$templateCache.put('components/favorites/favoritesRecordLabels/favorites-record-labels.html','<div class="media-labels md-chips md-chips-wrap" layout="row" layout-align="start start" layout-wrap><div class="label-item md-chip outline-chip md-readonly animate-opacity-and-scale" ng-repeat="label in $ctrl.returnLabelsOfItem() track by $index"><div class="md-chip-content"><strong>{{label}}</strong></div></div><div ng-if="$ctrl.getUser()"><prm-favorites-edit-labels-menu [item]="$ctrl.item" [is-section]="false"></prm-favorites-edit-labels-menu></div></div><prm-favorites-record-labels-after parent-ctrl="$ctrl"></prm-favorites-record-labels-after>');
$templateCache.put('components/favorites/favoritesToolBar/favorites-tool-bar.html','<md-toolbar class="default-toolbar" sticky sticky-class="is-stuck" ng-class="{\'is-visible\': !$ctrl.mediaQueries.gtxs && ($ctrl.showButtons() || $ctrl.showSavedSearchesActions()) }"><div class="md-toolbar-tools" layout="row"><div flex="0" flex-md="0" flex-lg="10" flex-xl="20" ng-class="{\'flex-lgPlus-15\':$ctrl.mediaQueries.lgPlus}"></div><span translate="nui.favorites.header" class="toolbar-title" ng-hide="$ctrl.showButtons() && !$ctrl.mediaQueries.gtxs"></span><md-divider class="toolbar-divider" ng-class="{\'visible\':true || $ctrl.showSavedSearchesActions()}"></md-divider><div layout="row"><div class="toolbar-item animate-enter-leave-scale-bounce staggered" ng-if="$ctrl.showSearchHistoryActions() || ($ctrl.showSavedSearchesActions() && $ctrl.getUser())"><prm-saved-searches-group-actions></prm-saved-searches-group-actions></div><div class="toolbar-item animate-enter-leave-scale-bounce staggered" ng-if="$ctrl.isFavorites() && $ctrl.getUser()"><prm-favorites-edit-labels-menu [disable]="!$ctrl.showButtons()" [is-section]="true"></prm-favorites-edit-labels-menu></div><div class="toolbar-item animate-enter-leave-scale-bounce staggered" ng-if="$ctrl.isFavorites()"><md-button class="md-icon-button unpin-button" aria-label="{{$ctrl.isChosenFav() | translate}}" (click)="$ctrl.unpinFromFavorites()"><md-tooltip md-delay="400"><span translate="nui.favorites.unpin.tooltip"></span></md-tooltip><prm-icon class="h-flipped-25-icon" ng-class="{\'disabledFavTool\':!$ctrl.showButtons()}" icon-type="{{::$ctrl.favoritesIcons.unPin.type}}" svg-icon-set="{{::$ctrl.favoritesIcons.unPin.iconSet}}" icon-definition="{{::$ctrl.favoritesIcons.unPin.icon}}"></prm-icon></md-button></div><div class="toolbar-item animate-enter-leave-scale-bounce staggered" ng-if="$ctrl.isFavorites()"><md-button class="md-icon-button has-bottom-arrow" ng-class="$ctrl.showPushtoActions ? \'arrow-showing\' : \'\' " aria-label="{{$ctrl.isChosenActions() | translate}}" (click)="$ctrl.switchShowPushtoActions($event);$ctrl.closeOpenTabs($event);$event.stopPropagation()"><md-tooltip md-delay="400"><span translate="nui.favorites.pushto.tooltip"></span></md-tooltip><prm-icon icon-type="{{::$ctrl.favoritesIcons.favoriteActionsList.type}}" ng-class="{\'disabledFavTool\':!$ctrl.showButtons()}" svg-icon-set="{{::$ctrl.favoritesIcons.favoriteActionsList.iconSet}}" icon-definition="{{::$ctrl.favoritesIcons.favoriteActionsList.icon}}"></prm-icon></md-button></div></div></div></md-toolbar><div class="favorites-action-list" ng-if="$ctrl.showPushtoActions && $ctrl.showButtons()" sticky offset="64" sticky-class="is-stuck"><div class="action-list-content" ng-keydown="$ctrl.keyDownSupport($event)"><md-content layout="row"><div flex="0" flex-md="0" flex-lg="10" flex-xl="20" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus}"></div><prm-action-list [display-all]="false" displaymode="favorites" [item]="$ctrl.selectedItems()" [display-close-icon]="true" flex style="margin: 8px" (close-modal)="$ctrl.switchShowPushtoActions()"></prm-action-list><div flex="0" flex-md="25" flex-lg="25" flex-xl="30" ng-class="{\'flex-lgPlus-30\': $ctrl.mediaQueries.lgPlus}"></div></md-content></div></div><prm-favorites-tool-bar-after parent-ctrl="$ctrl"></prm-favorites-tool-bar-after>');
$templateCache.put('components/favorites/saveToFavoritesButton/save-to-favorites-button.html','<div tabindex="-1" ng-click="$event.stopPropagation()" aria-live="assertive" ng-if="::(!$ctrl.isFavorites  && $ctrl.showBookmark())" class="pin-button"><md-button ng-if="!$ctrl.showPin()" ng-class="{\'pinned\':!$ctrl.showPin()}" ng-disabled="$ctrl.isFavoritesDisabled()" class="md-icon-button custom-button pin-button" aria-label="{{::(\'nui.aria.favorites.pin\' | translate:\'{index: \\\'\'+$ctrl.index +\'\\\'}\')}}" ng-click="$event.stopPropagation(); $event.preventDefault(); $ctrl.updateFavorites($event);"><md-tooltip md-delay="400"><span translate="{{\'nui.favorites.add.tooltip\' | translate:\'{index: \\\'\'+$ctrl.index +\'\\\'}\'}}"></span></md-tooltip><prm-icon aria-label="{{::(\'nui.aria.favorites.pin\' | translate:\'{index: \\\'\'+ $ctrl.index+\'\\\'}\')}}" [icon-type]="::$ctrl.actionsIcons.pin.type" [svg-icon-set]="::$ctrl.actionsIcons.pin.iconSet" [icon-definition]="::$ctrl.actionsIcons.pin.icon"></prm-icon></md-button><md-button ng-if="$ctrl.showPin()" ng-class="{\'unpinned\':$ctrl.showPin()}" class="md-icon-button custom-button unpin-button" aria-label="{{::(\'nui.aria.favorites.unpin\' | translate:\'{index: \\\'\'+ $ctrl.index+\'\\\'}\')}}" ng-click="$event.stopPropagation();$event.preventDefault();$ctrl.updateFavorites($event);"><md-tooltip md-delay="400"><span translate="{{::(\'nui.favorites.remove.tooltip\' | translate:\'{index: \\\'\'+ $ctrl.index+\'\\\'}\')}}"></span></md-tooltip><prm-icon aria-label="{{::(\'nui.aria.favorites.unpin\' | translate:\'{index: \\\'\'+ $ctrl.index+\'\\\'}\')}}" [icon-type]="::$ctrl.actionsIcons.unPin.type" [svg-icon-set]="::$ctrl.actionsIcons.unPin.iconSet" [icon-definition]="::$ctrl.actionsIcons.unPin.icon"></prm-icon></md-button><div ng-init="messageAdded = (\'nui.aria.favorites.in\' | translate) ;messageRemoved = (\'nui.aria.favorites.out\' | translate)" class="accessible-only" aria-label="{{$ctrl.showPin() ? messageAdded : messageRemoved}}" aria-live="assertive">{{$ctrl.showPin() ? messageAdded : messageRemoved}}</div></div><md-button ng-if="::($ctrl.isFavorites  && $ctrl.showBookmark())" class="md-icon-button custom-button prm-primary" aria-label="{{::(\'nui.aria.favorites.unpin\' | translate:\'{index: \\\'\'+($ctrl.index)+\'\\\'}\')}}" ng-click="$event.stopPropagation();$event.preventDefault();$ctrl.unpinFavorites();"><md-tooltip md-delay="400">{{::("nui.favorites.remove.tooltip" | translate)}}</md-tooltip><prm-icon aria-label="{{::(\'nui.aria.favorites.unpin\' | translate:\'{index: \\\'\'+($ctrl.index)+\'\\\'}\')}}" class="" [icon-type]="::$ctrl.actionsIcons.unPin.type" [svg-icon-set]="::$ctrl.actionsIcons.unPin.iconSet" [icon-definition]="::$ctrl.actionsIcons.unPin.icon"></prm-icon></md-button><prm-save-to-favorites-button-after parent-ctrl="$ctrl"></prm-save-to-favorites-button-after>');
$templateCache.put('components/favorites/savedQueries/savedQueries.html','<div><prm-search-result-list flex [itemlist]="$ctrl.getItems()" [is-favorites]="true" [is-saved-query]="true"></prm-search-result-list></div><prm-saved-queries-after parent-ctrl="$ctrl"></prm-saved-queries-after>');
$templateCache.put('components/favorites/searchHistory/search-history.html','<div><prm-search-result-list flex [itemlist]="$ctrl.getItems()" [is-favorites]="true" [is-saved-query]="true" [is-search-history]="true"></prm-search-result-list></div><prm-search-history-after parent-ctrl="$ctrl"></prm-search-history-after>');
$templateCache.put('components/infra/deposit/deposit-form.html','<form name="depositForm" class="padded-container"><md-dialog-content><div class="deposit-section"><div layout="column"><div class="light-text margin-bottom-medium" layout="row"><h2 class="zero-margin" layout="row" layout-align="start center"><span translate="nui.deposit.depositDetails"></span></h2></div><div class="italic-text"><span class="items-count" ng-bind-html="$ctrl.depositInfo.depositProfileInfo.depositProfileInstruction"></span></div></div><div class="service-form-item"><md-input-container class="underlined-input deposit-dialog-container" ng-class="{\'md-required\':true}"><label translate="nui.deposit.title"></label><input ng-required="true" name="depositTitle" ng-model="$ctrl.depositInfo.title" type="text" autocomplete="off"/><div ng-messages="depositForm.depositTitle.$error" class="help-block" ng-messages-multiple ng-if="depositForm.depositIAgree.$touched || depositForm.depositTitle.$touched"><div ng-message="required"><span translate="nui.deposit.validation.mandatoryTitle"></span></div></div></md-input-container></div><md-input-container class="underlined-input deposit-dialog-container"><label translate="nui.deposit.abstract"></label><textarea class="deposit-textarea" ng-model="$ctrl.depositInfo.abstract" columns="3"></textarea></md-input-container><prm-upload-file upload-to-amazon="true" [amazoninfo]="::$ctrl.depositInfo.amazonInfo" [depositfiles]="::$ctrl.depositInfo.depositFiles" allow-delete="!item.id" use-cached-files="true" source="addItem" on-upload="fileFunction(file)" on-grobid="grobid(grobidResponse)" on-remove="removeFileFunction()" reset="resetFileUpload" id="uploadItem"></prm-upload-file><div class="mandatory-files-error" ng-if="$ctrl.errorMessages.length > 0"><span translate="nui.deposit.validation.mandatoryFiles"></span></div><md-list layout="column" ng-show="mode != \'hover\' && $ctrl.depositInfo.depositFiles" class="separate-list-items"><md-list-item ng-repeat="file in $ctrl.depositInfo.depositFiles track by $index" class="md-3-line in-element-dialog-parent"><div class="in-element-dialog-context" layout="row" flex><div class="md-list-item-text uploaded-file-list" layout="row" layout-wrap flex><div flex flex-xs="100"><div layout="row" class="uploaded-filename"><span>{{file.fileName}}</span></div></div><div layout-align="end center" layout="row" layout-wrap flex-xs="100" flex-sm="30" ng-show="file.isUploaded"><md-input-container class="underlined-input uploaded-file-list"><input ng-model="file.label" type="text" autocomplete="off" ng-change="$ctrl.updateLabelAction($index)"></md-input-container></div><div layout-align="end center" layout="row" layout-wrap flex-xs="100" flex-sm="30" ng-show="!file.isUploaded"><div class="underlined-input uploaded-file-list"><div class="progress progress-striped progress-default active" ng-show="file.file.progress >= 0"><div class="progress-bar" style="width: {{file.file.progress}}%">{{file.file.progress}}%</div></div><span><em>({{file.file.size}} bytes)</em></span></div></div></div><div class="align-self-stretch"><md-button class="md-icon-button" (click)="$ctrl.deleteFile($index)"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="trash"></prm-icon></md-button></div></div></md-list-item></md-list><md-input-container class="underlined-input deposit-dialog-container"><label translate="nui.deposit.note"></label><input ng-model="$ctrl.depositInfo.note" type="text" autocomplete="off"></md-input-container><div ng-hide="$ctrl.hideTOU()"><div class="form-section"><button type="button" class="btn btn-link btn-deposit" id="more-details-button" ng-click="$ctrl.showTOU(!$ctrl.displayTOU)"><span translate="nui.deposit.TOU"></span> <span ng-class="{\'deposit-caret-up\' : $ctrl.displayTOU, \'deposit-caret-down\' : !$ctrl.displayTOU}" class="deposit-caret-down"></span></button></div><div class="form-section collapsed deposit-tou" ng-class="$ctrl.displayTOU ? \'\' : \'collapsed\' "><span ng-bind-html="$ctrl.depositInfo.termsOfUse"></span></div><md-input-container><md-checkbox name="depositIAgree" aria-label="nui.deposit.TOU.Iagree" ng-change="isSubmitAllowed()" ng-true-value="true" ng-model="$ctrl.IAgree"><span translate="nui.deposit.TOU.Iagree"></span></md-checkbox></md-input-container></div><div ng-show="$ctrl.depositInfo.previousNotes.length"><div class="form-section"><button type="button" class="btn btn-link btn-deposit" id="more-details-button" ng-click="$ctrl.showNotes(!$ctrl.displayNotes)"><span translate="nui.deposit.previousNotes"></span> <span ng-class="{\'deposit-caret-up\' : $ctrl.displayNotes, \'deposit-caret-down\' : !$ctrl.displayNotes}" class="deposit-caret-down"></span></button></div><div class="form-section collapsed" ng-class="$ctrl.displayNotes ? \'\' : \'collapsed\' "><md-list ng-show="$ctrl.depositInfo.previousNotes" class="separate-list-items"><md-list-item ng-repeat="note in $ctrl.depositInfo.previousNotes | orderBy:\'+\':true" class="md-2-line md-long-text"><div class="md-list-item-text"><span class="item-index">{{$index + 1}}</span> <span>{{note.content}}</span><p class="italic-text">{{note.updatedby}}, {{note.date}}</p></div></md-list-item></md-list></div></div></div></md-dialog-content><md-dialog-actions layout="row" class="layout-row deposit-dialog-actions"><md-button (click)="$ctrl.close()"><span translate="nui.deposit.cancel"></span></md-button><md-button ng-disabled="!$ctrl.depositInfo.editMode && !$ctrl.IAgree" class="button-confirm" (click)="$ctrl.depositInfo.saveAsDraft= true; $ctrl.commit()"><span translate="nui.deposit.saveAsDraft"></span></md-button><md-button ng-disabled="!$ctrl.depositInfo.editMode && !$ctrl.IAgree" class="button-confirm" (click)="$ctrl.depositInfo.saveAsDraft= false; $ctrl.commit()"><span translate="nui.deposit.submit"></span></md-button></md-dialog-actions></form>');
$templateCache.put('components/infra/lang/change-lang.html','<div ng-if="::($ctrl.getLabelType() == \'text\')"><span translate="nui.mypref.label.interface_languages"></span></div><md-input-container layout="row" layout-align="center center"><prm-icon ng-if="::($ctrl.getLabelType() == \'icon\')" [icon-type]="::$ctrl.topBarIcons.language.type" [svg-icon-set]="::$ctrl.topBarIcons.language.iconSet" [icon-definition]="::$ctrl.topBarIcons.language.icon"></prm-icon><md-select ng-model="$ctrl.selectedLanguage" ng-change="$ctrl.changeLanguage()" aria-label="{{\'nui.aria.account.details.langaugesselect\' | translate}}"><md-option ng-repeat="language in ::$ctrl.languages" value="{{::language}}"><span translate="mypref.language.option.{{::language}}"></span></md-option></md-select></md-input-container>');
$templateCache.put('components/infra/password/change-password.html','<form class="padded-container"><h2 class="light-text margin-bottom-medium" layout-margin><span translate="contact.header.changePassword"></span></h2><ul layout-margin><li ng-repeat="error in $ctrl.errorMessages"><span translate="{{error}}" style="color:tomato"></span></li></ul><div layout="column" layout-margin><md-input-container ng-repeat="field in $ctrl.displayFields" class="underlined-input margin-bottom-medium"><label for="prm_{{field.label}}" translate="{{field.label}}"></label><input type="{{field.uiType}}" ng-model="$ctrl.form[field.name]"/></md-input-container></div></form><md-dialog-actions><md-button (click)="$ctrl.close()"><span translate="preferences.cancel"></span></md-button><md-button class="button-confirm" (click)="$ctrl.commit()"><span translate="mypref.button.save"></span></md-button></md-dialog-actions>');
$templateCache.put('components/journals/alphabetToolbar/alphabet-toolbar.html','<div layout="row" layout-wrap layout-align="center"><md-button ng-href="#" ng-repeat="character in $ctrl.aToZList" (click)="$ctrl.sendSelected(character.letter)" aria-label="{{$ctrl.getAraiaLabelForLetter(character.letter)}}" ng-class="{\'active\' : $ctrl.activeLetter === character.letter, \'letter-button\' : character.type === \'alphabet\'}" translate="{{\'AZ.\'+character.letter}}"><md-tooltip md-delay="800" md-autohide="true"><span translate="{{::$ctrl.tooltipText}}" translate-values="{\'idx_0\' : $ctrl.getTranslatedLetter(character.letter)}"></span></md-tooltip></md-button></div><prm-alphabet-toolbar-after parent-ctrl="$ctrl"></prm-alphabet-toolbar-after>');
$templateCache.put('components/primoExplore/silentLogin/silent-login.html','<prm-silent-login-after parent-ctrl="$ctrl"></prm-silent-login-after>');
$templateCache.put('components/search/actions/action-list.html','<md-nav-bar md-selected-nav-item="$ctrl.activeAction"><div tabindex="-1" class="container-nav-controls" ng-if="!$ctrl.isSafariBrowse()"><md-button tabindex="-1" aria-label="{{\'nui.aria.vbrowse.previous\' | translate}}" ng-if="$ctrl.isLeftScrollDisabled" ng-keypress="$ctrl.previous($event)" ng-mousedown="$ctrl.scrollLeftMouseDown();$event.stopPropagation()" ng-mouseup="$ctrl.scrollLeftMouseUp();$event.stopPropagation()" class="nav-control nav-left"><md-tooltip><span ng-bind-html="\'virtualbrowse.button.previous\' | translate"></span></md-tooltip><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-left" aria-label="{{\'nui.aria.vbrowse.previous\' | translate}}"></prm-icon></md-button></div><div layout="row" layout-align="space-between center" class="scroll-hidden" id="scrollActionList"><md-nav-item layout="column" tabindex="-1" id="{{actionName}}" ng-class="{\'marg-nav-item\':$ctrl.requiredActionsList.length<8 && !$ctrl.isLeftScrollDisabled && !$ctrl.isRightScrollDisabled,\'safari-wrapper\':$ctrl.isSafariBrowse()}" ng-repeat="actionName in ::$ctrl.requiredActionsList" name="{{actionName}}" ng-if="$ctrl.showMe(actionName)" md-nav-click="$ctrl.performAction(actionName)" translate-attr="{ \'aria-label\': \'nui.aria.action.nameTitle\'}" translate-values="{name: $ctrl.getActionTranslate(actionName), title:$ctrl.getRecordTitle()}"><div layout="column"><prm-icon style="z-index:1" icon-type="{{::$ctrl.actionIcons[$ctrl.actionIconNamesMap[actionName]].type}}" svg-icon-set="{{::$ctrl.actionIcons[$ctrl.actionIconNamesMap[actionName]].iconSet}}" icon-definition="{{::$ctrl.actionIcons[$ctrl.actionIconNamesMap[actionName]].icon}}"></prm-icon><span class="button-text" translate="{{::(\'fulldisplay.command.\'+$ctrl.actionLabelNamesMap[actionName])}}"></span></div></md-nav-item></div><div tabindex="-1" class="container-nav-controls" ng-if="!$ctrl.isSafariBrowse()"><md-button tabindex="-1" aria-label="{{\'nui.aria.vbrowse.next\' | translate}}" ng-if="$ctrl.isRightScrollDisabled" ng-keypress="$ctrl.next($event)" ng-mousedown="$ctrl.scrollRightMouseDown()" ng-mouseup="$ctrl.scrollRightMouseUp()" class="nav-control nav-right"><md-tooltip><span ng-bind-html="\'virtualbrowse.button.next\' | translate"></span></md-tooltip><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-right" aria-label="{{\'nui.aria.vbrowse.next\' | translate}}"></prm-icon></md-button></div></md-nav-bar><md-button ng-if="::!$ctrl.isFullView && $ctrl.displayCloseIcon" class="close-action-menu md-icon-button more-options-button" aria-label="{{::(\'nui.aria.moreActions\' | translate)}}" (click)="$ctrl.closeModalActions($event)" hide-xs><prm-icon aria-label="{{::(\'nui.aria.actions.hide\' | translate)}}" [icon-type]="::$ctrl.actionsIcons.closeActions.type" class="close-icon" [svg-icon-set]="::$ctrl.actionsIcons.closeActions.iconSet" [icon-definition]="::$ctrl.actionsIcons.closeActions.icon"></prm-icon></md-button><prm-action-container (close-tabs-event)="$ctrl.closeAllTabs()" [item]="::$ctrl.item" [action-name]="$ctrl.selectedAction" [on-toggle]="::$ctrl.onToggle"></prm-action-container><div layout="row" layout-align="center center" ng-if="::$ctrl.showMe(actionName) && !$ctrl.isFullView"><md-button (keydown)="$ctrl.keydownSupport($event)" class="accessible-close button-link" (click)="$ctrl.closeModalActions($event)" aria-label="{{::(\'nui.aria.close_actions\' | translate)}}" style="margin: 0 0 1em 0"><span translate="nui.aria.fulldisplay.closeButton.short"></span></md-button></div><prm-action-list-after parent-ctrl="$ctrl"></prm-action-list-after>');
$templateCache.put('components/search/breadcrumbs/breadcrumbs.html','<div><h2 class="sidebar-title" translate="nui.facets.activefilter"></h2></div><div class="md-chips md-chips-wrap" layout="row" layout-wrap><div class="md-chip animate-chip" ng-repeat="facet in $ctrl.selectedFacets" ng-class="{\'facet-excluded\': (facet.type === \'exclude\'), \'persistent-facet\': facet.persistent}" layout="row" layout-align="space-between center" ng-if="facet.persistent"><div class="md-chip-content" layout="row" layout-align="start center"><md-button class="persistence-button md-icon-button md-primary" ng-click="$ctrl.removeStickyFacet(facet)" aria-label="{{\'nui.facets.cancel_persistent\' | translate}}{{\' \'}}{{$ctrl.facetLabel(facet) | translate}}"><md-tooltip md-delay="600"><span class="bold-text" translate="nui.facets.cancel_persistent"></span></md-tooltip><prm-icon class="show-on-hover" icon-type="svg" svg-icon-set="primo-ui" icon-definition="remove-persistent"></prm-icon><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="persistent"></prm-icon></md-button><md-tooltip md-delay="600"><span class="uppercase-bold" translate="nui.facets.persistent.tootltip"></span> <b ng-if="!(facet.type === \'exclude\')" translate="nui.facets.including.tooltip"></b> <b ng-if="(facet.type === \'exclude\')" translate="nui.facets.excluding.tooltip"></b> <strong translate-default="{{::$ctrl.getFacetDefaultValue(facet)}}" translate="{{$ctrl.facetLabel(facet)}}" translate-attr-title="{{$ctrl.facetLabel(facet)}}"></strong></md-tooltip><strong translate-default="{{::$ctrl.getFacetDefaultValue(facet)}}" translate="{{$ctrl.facetLabel(facet)}}"></strong></div><div class="md-chip-remove-container"><button role="button" class="md-chip-remove ng-scope" aria-label="{{facet.tooltip}}" ng-click="$ctrl.removeFacet(facet)"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="remove"></prm-icon><md-tooltip>{{facet.tooltip}}</md-tooltip></button></div></div></div><div class="md-chips md-chips-wrap" layout="row" layout-wrap><div class="md-chip animate-chip" ng-repeat="facet in $ctrl.selectedFacets" ng-class="{\'facet-excluded\': (facet.type == \'exclude\') }" layout="row" layout-align="space-between center" ng-if="!facet.persistent"><div class="md-chip-content"><md-button ng-if="facet.name !== \'frbrgroupid\'" class="persistence-button md-icon-button md-primary" ng-click="$ctrl.addStickyFacet(facet)" aria-label="{{\'nui.facets.set_persistent\' | translate}}{{\' \'}}{{$ctrl.facetLabel(facet) | translate}}"><md-tooltip md-delay="1000"><span class="bold-text" translate="nui.facets.set_persistent"></span></md-tooltip><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="remove-persistent"></prm-icon><prm-icon class="show-on-hover" icon-type="svg" svg-icon-set="primo-ui" icon-definition="persistent"></prm-icon></md-button><md-tooltip md-delay="600"><b ng-if="!(facet.type === \'exclude\')" translate="nui.facets.including.tooltip"></b> <b ng-if="(facet.type === \'exclude\')" translate="nui.facets.excluding.tooltip"></b> <strong translate-default="{{::$ctrl.getFacetDefaultValue(facet)}}" translate="{{$ctrl.facetLabel(facet)}}" translate-attr-title="{{$ctrl.facetLabel(facet)}}"></strong></md-tooltip><strong translate-default="{{::$ctrl.getFacetDefaultValue(facet)}}" translate="{{$ctrl.facetLabel(facet)}}"></strong></div><div class="md-chip-remove-container"><button role="button" aria-label="{{facet.tooltip}}" class="md-chip-remove ng-scope" ng-click="$ctrl.removeFacet(facet)\t"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="remove"></prm-icon><md-tooltip>{{facet.tooltip}}</md-tooltip></button></div></div></div><div><md-button class="button-as-link link-alt-color zero-margin" (click)="$ctrl.clearAllFacets()"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="replay"></prm-icon><span class="bold-text" translate="nui.facets.reset"></span></md-button></div><prm-breadcrumbs-after parent-ctrl="$ctrl"></prm-breadcrumbs-after>');
$templateCache.put('components/search/briefResult/briefResult.html','<span ng-if="$ctrl.zoteroParamsString && (!$ctrl.isFullViewOverlayOpen || $ctrl.isFullView)" class="Z3988" title="{{::$ctrl.zoteroParamsString}}" aria-hidden="true"></span><h3 class="item-title" ng-class="{\'string-to-rtl\': $ctrl.changeStringDirectionToRtl($ctrl.firstLine.values)}"><a ng-if="$ctrl.displayTitleAsLink" ng-class="{\'full-view-mouse-pointer\':$ctrl.isFullView}" ng-click="$event.preventDefault()" ng-href="{{::$ctrl.deepLink}}"><span ng-repeat="item in ::$ctrl.firstLine.values"><span ng-if="::$ctrl.firstLine.delimiter" class="media-delimiter" ng-show="::(!$first)">{{::$ctrl.firstLine.delimiter}}</span><div ng-if="::!$ctrl.firstLine.delimiter" class="media-delimiter" ng-show="::(!$first)"></div><prm-highlight terms="::$ctrl.highlights[item.key]" text="::$ctrl.getDisplayValFromVal(val, $ctrl.firstLine.delimiter)" ng-repeat="val in ::$ctrl.filterAndNormalize(item.values)"></prm-highlight></span></a><sapn ng-if="!$ctrl.displayTitleAsLink" ng-class="{\'full-view-mouse-pointer\':$ctrl.isFullView}"><span ng-repeat="item in ::$ctrl.firstLine.values"><span class="media-delimiter" ng-show="::(!$first)">{{::displayLine.delimiter}}</span><prm-highlight terms="::$ctrl.highlights[item.key]" text="::$ctrl.getDisplayValFromVal(val, $ctrl.firstLine.delimiter)" ng-repeat="val in ::$ctrl.filterAndNormalize(item.values)"></prm-highlight></span></sapn></h3><div ng-repeat="displayLine in ::$ctrl.otherLines" class="item-detail" ng-class="(displayLine.values[0].key === \'identifier\') ? $ctrl.getClassForIdentifier() : \'\'; $ctrl.changeStringDirectionToRtl(displayLine.values) ? \'string-to-rtl\': \'\' "><span ng-repeat="item in ::displayLine.values"><span class="media-delimiter" ng-show="::(!$first)">{{::displayLine.delimiter}} </span><span ng-repeat="val in ::$ctrl.filterAndNormalize(item.text) track by $index"><prm-highlight terms="$ctrl.highlights[item.key]" text="::$ctrl.getDisplayValFromVal(val, displayLine.delimiter)"></prm-highlight><span class="media-delimiter" ng-show="::(!$last)">{{::$ctrl.logTimeStamp}} {{::displayLine.delimiter}}</span></span></span></div><prm-brief-result-after parent-ctrl="$ctrl"></prm-brief-result-after>');
$templateCache.put('components/search/briefResult/briefResultContainer.html','<div ng-click="$ctrl.handleDetails($ctrl.item,$event, true)" role="listitem" class="list-item-primary-content result-item-primary-content" ng-class="::{\'has-checkbox\': $ctrl.isfavorites, \'new-result-item\' : ($ctrl.index && $ctrl.newMetalibItem())}" data-recordid="{{::$ctrl.recordId}}" layout="row"><span class="list-item-count" ng-if="!$ctrl.isFullView"><span>{{$ctrl.index}}</span><md-tooltip ng-if="::($ctrl.index && $ctrl.newMetalibItem())"><span translate="brief.New_Result"></span></md-tooltip></span><md-checkbox ng-if="::$ctrl.isfavorites" flex="5" aria-label="{{::(\'nui.aria.brief.select\' | translate)}}{{::$ctrl.index}}" ng-click="$event.stopPropagation()" ng-model="$ctrl.isChosen"></md-checkbox><div class="result-item-image" layout="column" ng-if="!$ctrl.mediaQueries.xs"><div class="media-content-images"><div class="media-thumbnail"><a tabindex="-1" ng-click="$event.preventDefault()" ng-href="{{::$ctrl.getDeepLinkPath()}}" class="a-tag-as-wrapper"><prm-search-result-thumbnail-container class="media-content-images" ng-class="::{\'dedup-images-holder\' : $ctrl.isMultipleVersions() && !$ctrl.isFavoriteState()}" [item]="::$ctrl.item" [links]="$ctrl.links" [frbr]="::$ctrl.isMultipleVersions()" [is-frbr-generic]="::$ctrl.isFrbrGeneric()"></prm-search-result-thumbnail-container></a></div></div></div><div class="text-selector-spacer"></div><div class="result-item-text" layout="column" layout-fill flex><div class="media-content-type align-self-start"><span ng-if="::$ctrl.showItemType" translate="{{::$ctrl.getResourceTypeForDisplay()}}"></span><span ng-if="::($ctrl.isPc() && !$ctrl.isfavorites && $ctrl.isMultipleVersions() && !$ctrl.isFavoriteForDisplayFrbr)"><prm-search-result-frbr-line [result]="::$ctrl.item" [is-full-view]="::$ctrl.isFullView" [index]="::$ctrl.index"></prm-search-result-frbr-line></span></div><div ng-if="::(!$ctrl.isPc() && !$ctrl.isFrbrGeneric() && !$ctrl.isfavorites && $ctrl.isMultipleVersions() && !$ctrl.isFavoriteForDisplayFrbr)"><prm-search-result-frbr-line [result]="::$ctrl.item" [is-full-view]="::$ctrl.isFullView" [index]="::$ctrl.index"></prm-search-result-frbr-line></div><prm-brief-result class="result-item-details" [item]="::$ctrl.item" [resource-type-for-display]="::$ctrl.getResourceTypeForDisplay()" [deep-link]="::$ctrl.getDeepLinkPath()" [is-full-view]="::$ctrl.isFullView" [is-collection-discovery-collection]="::$ctrl.isCollectionDiscoveryCollection" layout="column"></prm-brief-result><prm-snippet [record]="::$ctrl.item"></prm-snippet><prm-search-result-journal-indication-line [item]="::$ctrl.item"></prm-search-result-journal-indication-line><div class="search-result-availability-line-wrapper"><prm-search-result-availability-line ng-if="($ctrl.delivery &&(!$ctrl.isGenericRecord() || $ctrl.isPc()))" tabindex="-1" [result]="::$ctrl.item" [is-full-view]="::$ctrl.isFullView" [is-overlay-full-view]="$ctrl.isOverlayFullView" [collection-discovery-data]="::$ctrl.collectionDiscoveryData" ng-click="$event.stopPropagation()" (open-full-display-with-getit1)="$ctrl.handleDetails($ctrl.item, $event, false);"></prm-search-result-availability-line></div><prm-search-result-frbr-line [result]="::$ctrl.item" [is-full-view]="::$ctrl.isFullView" [index]="::$ctrl.index" ng-if="::($ctrl.isFrbrGeneric() && !$ctrl.isfavorites && $ctrl.isMultipleVersions() && !$ctrl.isPc() && !$ctrl.isFavoriteForDisplayFrbr)"></prm-search-result-frbr-line><prm-favorites-record-labels [item]="::$ctrl.item" ng-if="::$ctrl.isfavorites"></prm-favorites-record-labels><form ng-if="$ctrl.displayCTOButton()" class="request-form" ng-cloak action="{{$ctrl.ctoUrl()}}" method="post" target="_blank"><input type="hidden" name="doc" id="doc" value="{{$ctrl.getItme()}}"/><md-button type="submit"><span>DISPLAY CTO</span></md-button></form></div></div><div ng-if="((!$ctrl.isGenericRecord() || $ctrl.isPc()) && $ctrl.showTimer)" class="result-item-actions" layout="row" ng-keydown="$ctrl.keyDownSupport($event)"><prm-citation-trails-indication-container ng-if="::($ctrl.isShowCitationTrails() && !$ctrl.isFullView)" [record]="::$ctrl.item"></prm-citation-trails-indication-container><md-button ng-repeat="action in ::$ctrl.upFrontActions" aria-label="{{::(\'nui.aria.action.nameTitle\' | translate: $ctrl.getNameTitleParams([\'name\',\'title\'],action))}}" ng-if="::(!$ctrl.isFullView)" class="md-icon-button custom-button prm-primary" data-custom-button="action" (click)="$ctrl.openTab($event, action)" hide-xs><md-tooltip md-delay="400"><span translate="{{::(\'fulldisplay.command.\'+$ctrl.getActionLabel(action))}}"></span></md-tooltip><prm-icon aria-label="{{::(\'nui.aria.upFrontActions.action\' | translate:{action: $ctrl.getActionLabel(action)})}}" class="md-icon-button-custom" icon-type="{{::$ctrl.actionsIcons[$ctrl.getActionIconName(action)].type}}" svg-icon-set="{{::$ctrl.actionsIcons[$ctrl.getActionIconName(action)].iconSet}}" icon-definition="{{::$ctrl.actionsIcons[$ctrl.getActionIconName(action)].icon}}"></prm-icon></md-button><prm-save-to-favorites-button [item]="::$ctrl.item" [index]="::$ctrl.index" [is-favorites]="::$ctrl.isFavorites"></prm-save-to-favorites-button><md-button id="briefResultMoreOptionsButton" ng-if="::!$ctrl.isFullView" class="md-icon-button more-options-button" aria-label="{{::(\'nui.aria.moreActions\' | translate)}}" (click)="$ctrl.closeOpenTabs($event);$ctrl.toggleItemMenu($event);$event.stopPropagation();" hide-xs><md-tooltip md-delay="800" md-autohide="true"><span translate="eshelf.send_to.tooltip"></span></md-tooltip><prm-icon aria-label="{{::(\'nui.aria.actions.show\' | translate)}}" [icon-type]="::$ctrl.actionsIcons.moreActions.type" class="open-icon" [svg-icon-set]="::$ctrl.actionsIcons.moreActions.iconSet" [icon-definition]="::$ctrl.actionsIcons.moreActions.icon"></prm-icon><prm-icon aria-label="{{::(\'nui.aria.actions.hide\' | translate)}}" [icon-type]="::$ctrl.actionsIcons.closeActions.type" class="close-icon" [svg-icon-set]="::$ctrl.actionsIcons.closeActions.iconSet" [icon-definition]="::$ctrl.actionsIcons.closeActions.icon"></prm-icon></md-button></div><div class="action-list-content" ng-style="{\'padding-top\': $ctrl.itemHeight}" ng-if="!$ctrl.isFullView" ng-keydown="$ctrl.keyDownSupport($event)"><md-content ng-if="$ctrl.isExpanded" ng-class="::{\'secondary-content-holder\': !$ctrl.isFullView}"><md-divider></md-divider><prm-action-list ng-if="$ctrl.isExpanded2 && !$ctrl.isGenericRecord() || $ctrl.isPc()" ng-class="{ \'visible\': $ctrl.isExpanded3 }" [display-all]="true" [display-close-icon]="false" [item]="::$ctrl.item" [(selected-action)]="$ctrl.selectedAction" (close-modal)="$ctrl.closeOpenTabs($event);$ctrl.toggleItemMenu($event);$event.stopPropagation();$ctrl.focusOnXButton()"></prm-action-list></md-content></div><prm-brief-result-container-after parent-ctrl="$ctrl"></prm-brief-result-container-after>');
$templateCache.put('components/search/browse/browse-search.html','<prm-spinner ng-if="$ctrl.inProgress" class="half-transparent no-text" layout="row" layout-align="center center" style="padding-top: 5em"></prm-spinner><md-content class="padded-container" layout="row" layout-align="center start" flex><div flex="0" flex-md="0" flex-lg="20" flex-xl="20"></div><div flex><div layout="row" layout-sm="column" layout-align="space-around" ng-show="$ctrl.inProgress"><md-progress-circular class="md-accent" md-diameter="40"></md-progress-circular></div><md-list ng-if="$ctrl.showList()" ng-hide="$ctrl.inProgress" class="prm-list prm-linkable-list-items prm-dense-list has-list-nav zero-padding" flex><prm-browse-result ng-repeat="obj in $ctrl.browseResult" [browse-result]="obj"></prm-browse-result></md-list></div><div flex="0" flex-md="0" flex-lg="20" flex-xl="20"></div><prm-page-nav-menu ng-if="$ctrl.showList()" (load-prev-results-event)="$ctrl.doPrev()" (load-next-results-event)="$ctrl.doNext()" [current-page]="$ctrl.pageInView" [num-of-results]="$ctrl.searchInfo.total" [show-components]="$ctrl.pagingConfiguration" [mode]="\'browse\'" [show-next-button-predicate]="::$ctrl.showNextButtonPredicate" [show-prev-button-predicate]="::$ctrl.showPrevButtonPredicate"></prm-page-nav-menu></md-content><prm-browse-search-after parent-ctrl="$ctrl"></prm-browse-search-after>');
$templateCache.put('components/search/citationTrails/citation-trails-breadcrumbs.html','<md-toolbar class="default-toolbar"><div class="md-toolbar-tools" layout="row" ng-hide="citationLimit == 0"><div flex="0" flex-md="5" flex-lg="10" flex-gt-lg="20" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus}"></div><md-button class="back-button offset-to-left" aria-label="{{\'fulldisplay.deatiles.back\' | translate}}" ui-state="$ctrl.SEARCH_STATE" ui-state-params="$ctrl.savedSearchParams" ui-sref-opts="{reload: true, inherit:false}" ref=""><prm-icon aria-label="{{\'fulldisplay.deatiles.back\' | translate}}" class="" icon-type="svg" svg-icon-set="primo-ui" icon-definition="back-to-search"></prm-icon><md-tooltip md-delay="400"><span translate="{{::(\'fulldisplay.deatiles.back\'+$ctrl.getActionLabel(action))}}"></span></md-tooltip></md-button><md-divider class="toolbar-divider visible"></md-divider><h1 class="toolbar-title"><span aria-label="{{\'nui.citation_trail.link.header\' | translate}}" translate="{{\'nui.citation_trail.link.header\' + $ctrl.getActionLabel(action)}}"></span></h1></div></md-toolbar><div class="prm-horizontal-content no-scrollbar stacked-items prm-background prm-hue1" layout="row" aria-label="{{\'nui.aria.current.path\' | translate}}"><div hide-xs hide-sm flex-md="0" flex-lg="10" flex-gt-lg="20" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus}"></div><div flex class="horizontal-content-container citations-container"><md-button class="horizontal-content-control left-button" ng-if="$ctrl.isShowLeftArrow()" tabindex="0" ng-click="$ctrl.onLeftArrowClick()" aria-label="{{\'nui.citation_trail.link.left.tooltip\' | translate}}"><prm-icon aria-label="{{\'nui.citation_trail.link.left.tooltip\' | translate}}" icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-left"></prm-icon><md-tooltip><span translate="nui.citation_trail.link.left.tooltip"></span></md-tooltip></md-button><div class="horizontal-content-scroller citations-scroller" role="list" layout="row" ng-class="{\'left-button-visible\': $ctrl.isShowLeftArrow(), \'right-button-visible\': $ctrl.isShowRightArrow()}"><div class="horizontal-content-scroll-offseter" layout="row"><prm-citation-trails-item id="citationItem{{$index}}" ng-init="index = $index" tabindex="-1" ng-repeat="seed in $ctrl.seedList" ng-class="{\'active-item\':$index === $ctrl.getActiveLevel()}" aria-label="{{::(\'nui.aria.citation_path_item_number\' | translate)}}{{\' \'}}{{::$index+1}}{{\' \'}}{{$ctrl.isActive($index) | translate}}" [seed]="seed" [active]="$index === $ctrl.getActiveLevel()" [active-level]="$ctrl.getActiveLevel()" [index]="$index" class="{{$ctrl.isActive}} horizontal-content-item" (change-active-seed-event)="$ctrl.onChangeActiveSeedEvent(seed, $index)" [z-order]="$index > $ctrl.getActiveLevel() ? ($ctrl.seedList.length - $index) : \'\' "></prm-citation-trails-item></div></div><md-button class="horizontal-content-control right-button" ng-hide="$ctrl.hideArrows" tabindex="0" ng-if="$ctrl.isShowRightArrow()" ng-click="$ctrl.onRightArrowClick()" aria-label="{{\'nui.citation_trail.link.right.tooltip\' | translate}}"><prm-icon aria-label="{{\'nui.citation_trail.link.right.tooltip\' | translate}}" icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-right"></prm-icon><md-tooltip><span translate="nui.citation_trail.link.right.tooltip"></span></md-tooltip></md-button></div><div hide-xs hide-sm flex-md="0" flex-lg="10" flex-gt-lg="20" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus}"></div></div><prm-alert-bar flex [alert-object]="::$ctrl.citingAlert " ng-if="$ctrl.citationTraisLength && $ctrl.activeSeedTypeCiting"></prm-alert-bar><prm-alert-bar flex [alert-object]="::$ctrl.citedByAlert " ng-if="$ctrl.citationTraisLength && !$ctrl.activeSeedTypeCiting"></prm-alert-bar><prm-search></prm-search><prm-citation-trails-breadcrumbs-after parent-ctrl="$ctrl"></prm-citation-trails-breadcrumbs-after>');
$templateCache.put('components/search/citationTrails/citation-trails-fullview-link.html','<div ng-if="$ctrl.shouldDisplayCitationTrial"><span ng-if="!$ctrl.configurationUtil.isSuprima()" translate="{{\'nui.citation_trail.link.Find\' + $ctrl.getActionLabel(action)}}"></span> <span ng-if="!$ctrl.configurationUtil.isSuprima()" translate="{{\'nui.citation_trail.link.sources\' + $ctrl.getActionLabel(action)}}"></span> <span ng-if="$ctrl.configurationUtil.isSuprima()" translate="{{\'nui.citation_trail.link.findSource\' + $ctrl.getActionLabel(action)}}"></span><prm-citation-trails-indication ng-if="$ctrl.hasCitedby()" [record]="::$ctrl.record" [is-full-view]="true" type="cited_by" class="margin-left-small"></prm-citation-trails-indication><span ng-if="$ctrl.hasCitedby() && $ctrl.hasCiting()" aria-label="{{\'nui.citation_trail.link.or\' | translate}}" translate="{{::(\'nui.citation_trail.link.or\'+$ctrl.getActionLabel(action))}}"></span><prm-citation-trails-indication ng-if="$ctrl.hasCiting()" [record]="::$ctrl.record" [is-full-view]="true" type="citing" class="margin-left-small"></prm-citation-trails-indication></div><prm-times-cited ng-if="$ctrl.shouldDisplayTimesCited" [item]="$ctrl.record"></prm-times-cited><prm-citation-trails-fullview-link-after parent-ctrl="$ctrl"></prm-citation-trails-fullview-link-after>');
$templateCache.put('components/search/citationTrails/citation-trails-indication-container.html','<div ng-if="$ctrl.record.extras && $ctrl.record.extras.citationTrails" layout="row"><prm-citation-trails-indication ng-if="$ctrl.citedby.length > 0" [record]="::$ctrl.record" type="cited_by"></prm-citation-trails-indication><prm-citation-trails-indication ng-if="$ctrl.citing.length > 0" [record]="::$ctrl.record" type="citing"></prm-citation-trails-indication></div><prm-citation-trails-indication-container-after parent-ctrl="$ctrl"></prm-citation-trails-indication-container-after>');
$templateCache.put('components/search/citationTrails/citation-trails-indication.html','<md-button aria-label="{{$ctrl.getLabel() | translate:\'{action: \\\'\'+ $ctrl.getActionLabel(action)+\'\\\'}\'}}" data-custom-button="action" prm-brief-internal-button-marker ui-state="$ctrl.CITATION_TRAILS_STATE" ui-state-params="$ctrl.citationsStateParams" ui-sref-opts="{reload: true, inherit:true}" ng-click="$ctrl.onClick($event, $ctrl.type)" ng-class="$ctrl.isFullView ? \'button-with-icon\' : \'md-icon-button\'" href=""><md-tooltip md-delay="400" ng-if="!$ctrl.isFullView"><span translate="{{::($ctrl.isCitationStatTooltip() + $ctrl.getActionLabel(action))}}"></span></md-tooltip><prm-icon svg-icon-set="primo-ui" icon-definition="{{$ctrl.getIconName()}}"></prm-icon><span ng-if="$ctrl.isFullView" translate="{{::($ctrl.getLabel())}}"></span></md-button><prm-citation-trails-indication-after parent-ctrl="$ctrl"></prm-citation-trails-indication-after>');
$templateCache.put('components/search/citationTrails/citation-trails-item.html','<md-card tabindex="-1"><md-button id="citationTrail" ng-href="{{::$ctrl.deepLinkPath}}" ng-click="$ctrl.onItemClick($ctrl.index, citation, $event)" tabindex="0" ng-style="{\'z-index\':$ctrl.zOrder}" title="{{::$ctrl.activeCitationType()+\' \' +$ctrl.seed.title}}" aria-label="{{::(\'nui.aria.citation_path_item_number\' | translate)}}{{\' \'}}{{::$ctrl.index+1}}{{\' \'}}{{$ctrl.isActiveSeed() | translate}}"><md-card-content layout="column" tabindex="-1"><span class="item-type" ng-show="!$ctrl.isActive()"><prm-icon ng-if="$ctrl.citationType === \'citing\' " aria-label="{{\'nui.citation_trail.link.citing.activeSeed\' | translate}}" class="rotate-180" icon-type="svg" svg-icon-set="primo-ui" icon-definition="citing"></prm-icon><prm-icon ng-if="$ctrl.citationType === \'citedby\' " aria-label="{{\'nui.citation_trail.link.citedin.activeSeed\' | translate}}" icon-type="svg" svg-icon-set="primo-ui" icon-definition="citedBy"></prm-icon></span><h4 class="item-type" layout="row" tabindex="-1" ng-show="$ctrl.isActive()"><prm-icon ng-if="$ctrl.citationType === \'citing\' " aria-label="{{\'nui.citation_trail.link.citing.activeSeed\' | translate}}" class="rotate-180" icon-type="svg" svg-icon-set="primo-ui" icon-definition="citing"></prm-icon><prm-icon ng-if="$ctrl.citationType === \'citedby\' " aria-label="{{\'nui.citation_trail.link.citedin.activeSeed\' | translate}}" icon-type="svg" svg-icon-set="primo-ui" icon-definition="citedBy"></prm-icon><span>{{$ctrl.activeCitationType()}}</span></h4><h3 class="md-subhead item-title" tabindex="-1" title="{{::$ctrl.seed.title}}"><span>{{::$ctrl.seed.title}}</span></h3><p ng-if="$ctrl.isActive()" title="{{::$ctrl.seed.creator}}">{{::$ctrl.seed.creator}}</p></md-card-content></md-button></md-card><prm-citation-trails-item-after parent-ctrl="$ctrl"></prm-citation-trails-item-after>');
$templateCache.put('components/search/controlledVocabulary/controlled-vocabulary.html','<p class="zero-margin"><span translate="nui.results.controlVocabulary.including" translate-values="$ctrl.getEquivalentTerm()"></span> <a ui-state="$ctrl.STATE" ui-state-params="$ctrl.stateParams" ui-sref-opts="{reload: true, inherit:false}" translate="nui.results.controlVocabulary.searchOnly" translate-values="$ctrl.getOriginalQuery()"></a></p><prm-controlled-vocabulary-after parent-ctrl="$ctrl"></prm-controlled-vocabulary-after>');
$templateCache.put('components/search/didUMean/did-u-mean.html','<p class="zero-margin"><span translate="nui.results.didumean"></span> <a ui-state="$ctrl.STATE" ui-state-params="$ctrl.stateParams" ui-sref-opts="{reload: true, inherit:false}">{{$ctrl.didUMean}}</a>?</p><prm-did-u-mean-after parent-ctrl="$ctrl"></prm-did-u-mean-after>');
$templateCache.put('components/search/facet/facet-group.html','<div><prm-facet-exact tabindex="-1" ng-if="$ctrl.displayedType === \'exact\'" [facet-group]="$ctrl.facetGroup"></prm-facet-exact><prm-facet-range ng-if="$ctrl.displayedType === \'range\'" [facet-group]="$ctrl.facetGroup"></prm-facet-range></div>');
$templateCache.put('components/search/facet/facet.html','<div tabindex="-1" class="primo-scrollbar" sticky offset="24" sticky-class="is-stuck" disabled-sticky="!$ctrl.mediaQueries.gtsm" ng-if="$ctrl.showFacetSection() " ng-class="$ctrl.activeMultipleFacets ? \'multifacets-active\' : \'\'"><div tabindex="-1" class="sidebar-inner-wrapper" layout="column"><div ng-if="$ctrl.isShowFetchMoreResultButton()" class="sidebar-section compensate-padding-left margin-bottom-large"><h2 class="sidebar-title" translate="nui.facets.remote.title"></h2><p translate="nui.facets.remote.description"></p><md-button (click)="$ctrl.fetchMoreResults()" translate="nui.facets.remote.button" class="zero-margin button-confirm button-large"></md-button></div><div ng-class="{\'up-z-index\': $ctrl.showUIBlocker}" tabindex="-1" ng-if="($ctrl.selectedFacets).length || $ctrl.isFiltered()" class="sidebar-section filtered-facets-section animate-chip-section margin-bottom-large"><prm-breadcrumbs></prm-breadcrumbs></div><div ng-if="$ctrl.showPersonalizationSection() && $ctrl.notLocal() && $ctrl.personalizationToggled()"><div tabindex="-1" class="sidebar-section compensate-padding-left margin-bottom-large personalization-section" ng-class="{\'is-active\':$ctrl.personalizationToggled()}"><h2 class="sidebar-title prm-personalization" translate="nui.pyr.search.label"></h2><div class="section-content"><md-checkbox ng-model="$ctrl.recentness"><span translate="nui.pyr.search.recent_date"></span></md-checkbox><ul class="sidebar-list margin-bottom-zero margin-top-small" layout="column" layout-align="start start" tabindex="-1"><li ng-repeat="discipline in $ctrl.getPersonalization()" layout="row" layout-align="start center"><strong title="{{discipline}}">{{\'pyr.discipline.\'+discipline | translate}} </strong><span class="button-container"><md-button class="md-icon-button" ng-click="$ctrl.removeDiscipline(discipline)" aria-label="{{\'pyr.discipline.removeDiscipline\' | translate}}{{\' \'}}{{\'pyr.discipline.\'+discipline | translate}}"><prm-icon icon-type="svg" svg-icon-set="navigation" icon-definition="ic_close_24px"></prm-icon><md-tooltip md-delay="400"><span translate="{{\'pyr.discipline.removeDiscipline\' | translate}}{{\' \'}}{{\'pyr.discipline.\'+discipline | translate}}"></span></md-tooltip></md-button></span></li></ul><md-button class="button-as-link link-alt-color zero-margin" ng-click="$ctrl.edit()"><b translate="nui.pyr.search.edit"></b></md-button></div></div></div><div tabindex="-1" ng-if="$ctrl.totalResults > 1 || $ctrl.showPcAvailability" class="sidebar-section compensate-padding-left"><h2 class="sidebar-title" translate="nui.facets.title"></h2></div><div tabindex="-1" ng-if="$ctrl.showPcAvailability && !$ctrl.searchInProgress" class="sidebar-section margin-top-small margin-bottom-medium compensate-padding-left"><md-checkbox ng-model="$ctrl.pcAvailability" ng-change="$ctrl.changePcAvailability()" aria-label="{{\'expandresults\' | translate}}"><span translate="expandresults"></span></md-checkbox></div><div ng-if="$ctrl.totalResults > 1  " class="sidebar-section margin-bottom-small compensate-padding-left" layout="row"><div layout="row" layout-align="start center" class="section-title"><h3 class="section-title-header"><span translate="nui.results.sortby" translate-attr-title="nui.results.sortby.tooltip"></span></h3><prm-search-result-sort-by (sort-by-change)="$ctrl.sortByChange.emit(null)"></prm-search-result-sort-by></div></div><div ng-if="$ctrl.totalResults > 1" class="sidebar-section available-facets multiselect-facet-group" ng-repeat="facetGroup in $ctrl.facets" ng-class="$ctrl.activeMultipleFacets ? \'multiselect-active\' : \'multiselect-inactive\'"><prm-facet-group [facet-group]="::facetGroup" [displayed-type]="::facetGroup.displayedType"></prm-facet-group></div><div ng-if="$ctrl.totalResults == 1 && $ctrl.isFiltered()"><span translate="nui.facets.nofacets"></span></div></div><div ng-if="($ctrl.totalResults > 1) && $ctrl.activeMultipleFacets" class="multiselect-submit" ng-class="{\'is-active\': $ctrl.activeMultipleFacets}"><div flex-md="25" flex-lg="20" class="multiselect-submit-inner" layout="row" ng-class="{\'flex-lgPlus-20\': $ctrl.mediaQueries.lgPlus, \'flex-xl-20\': $ctrl.mediaQueries.xl, \'flex-xl-25\': $ctrl.mediaQueries}"><md-button ng-click="$ctrl.clearMultiFacets()"><span translate="nui.facets.clear"></span></md-button><md-button class="md-primary button-large md-button md-ink-ripple" ng-click="$ctrl.applyMultiFacets()"><span translate="nui.facets.applyfilters"></span></md-button></div></div></div><prm-facet-after parent-ctrl="$ctrl"></prm-facet-after>');
$templateCache.put('components/search/fullView/full-view-container.html','<div layout="column" layout-fill class="header topbar-wrapper"><prm-topbar></prm-topbar><prm-search-bar ng-if="::($ctrl.showSearch  && !$ctrl.isAtozSearch && !$ctrl.isBrowseMode)" (search-event)="$ctrl.onSearchBarSearchEvent($event)"></prm-search-bar><prm-atoz-search-bar ng-if="::($ctrl.showSearch  && $ctrl.isAtozSearch)" (search-event)="$ctrl.onSearchBarSearchEvent($event)"></prm-atoz-search-bar><prm-browse-search-bar ng-if="$ctrl.isBrowseMode"></prm-browse-search-bar></div><prm-back-to-search-results-button></prm-back-to-search-results-button><div ng-if="$ctrl.displayBorInfoAlert()"><prm-alert-bar flex [alert-object]="$ctrl.borInfoAlert" [idp-logout]="true"></prm-alert-bar></div><md-content layout="row" layout-fill class="padded-container"><div flex="0" flex-md="0" flex-lg="10" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus}" flex-xl="20" ng-if="!$ctrl.isRestrictedRecord()"></div><div layout="row" flex><div flex="0"></div><prm-full-view id="fullView" ng-if="$ctrl.item" [item]="$ctrl.item" flex></prm-full-view><div flex="0"></div></div></md-content><prm-full-view-cont-after parent-ctrl="$ctrl"></prm-full-view-cont-after>');
$templateCache.put('components/search/fullView/full-view-dialog-template.html','<div layout="row"><md-dialog aria-label="Full Display" class="md-dialog-full prm-full-view-dialog"><md-dialog-content layout="row" style="overflow-y: hidden"><md-toolbar class="default-toolbar is-stuck zero-padding" ng-if="!$ctrl.mediaQueries.gtsm"><div class="md-toolbar-tools zero-padding" layout="row"><md-button class="back-button has-text padding-left-medium" (click)="$ctrl.handleHideDetails()" aria-label="{{\'nui.aria.fulldisplay.closeButton\' | translate}}"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="back-to-search"></prm-icon><span translate="fulldisplay.deatiles.back"></span></md-button></div></md-toolbar><sticky-scroll flex="100" style="overflow-y: scroll"><prm-full-view flex="100" ng-if="$ctrl.dialogOpened.val" [load-full-view-additional-services]="$ctrl.loadFullViewAdditionalServices.val" [is-overlay-full-view]="true" [isfavorites]="$ctrl.isfavorites" [item]="::$ctrl.item" [focus-id]="$ctrl.focusId" [originator]="$ctrl.originator" id="fullView" tabindex="-1" role="contentinfo" ng-class="{\'padding-top-medium\':$ctrl.mediaQueries.xs}"></prm-full-view></sticky-scroll></md-dialog-content></md-dialog><md-button class="md-icon-button close-button" ng-if="$ctrl.mediaQueries.gtsm" (click)="$ctrl.handleHideDetails()" aria-label="{{\'nui.aria.fulldisplay.closeButton\' | translate}}"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="close"></prm-icon></md-button></div>');
$templateCache.put('components/search/fullView/full-view.html','<div ng-if="!$ctrl.isRestrictedRecord()" ng-class="{\'\': $ctrl.isOverlayFullView , \'layout-row\': !$ctrl.isOverlayFullView && $ctrl.mediaQueries.gtsm, \'layout-column\': !$ctrl.isOverlayFullView && $ctrl.mediaQueries.sm}"><div class="full-view-container flex" layout-xs="column" layout-sm="column" layout-gt-sm="row" id="full-view-container" flex><div class="full-view-inner-container" flex ng-class="{\'flex-basis-auto-ie11\': !$ctrl.isOverlayFullView }"><div class="services-index-under" hide-xs role="navigation"><div id="services-index" layout="column" layout-align="start start" sticky offset="35"><div ng-if="!$ctrl.isOverlayFullView" style="height: 2em"></div><md-button aria-label="{{service.title|translate}}" class="zero-margin button-right-align button-link" ng-class="($ctrl.shouldAddSearchWithinClass(service)) ? \'search-within-p-only\' : \'\'" ng-repeat="service in $ctrl.services track by $index" ng-click="$ctrl.scrollToElementIdWithBeacon(service.scrollId)" ng-if="!service.isDisabled && $ctrl.showConditionalService(service)"><span translate="{{service.title}}"></span></md-button><div ng-if="::($ctrl.enableSU())" class="accessible-explore"></div><md-button ng-if="::$ctrl.isOverlayFullView" class="accessible-close zero-margin button-link" (click)="$ctrl.closeDialog()" aria-label="{{::(\'nui.aria.fulldisplay.closeButton\' | translate)}}"><span translate="nui.aria.fulldisplay.closeButton.short"></span></md-button></div></div><div ng-attr-id="{{$ctrl.services[0].scrollId}}"><prm-full-view-service-container [load-additional-services]="$ctrl.loadFullViewAdditionalServices || !$ctrl.isOverlayFullView" [item]="::$ctrl.item" [isfavorites]="$ctrl.isfavorites" [service]="$ctrl.services[0]" [is-overlay-full-view]="$ctrl.isOverlayFullView"></prm-full-view-service-container></div><div class="full-view-section" ng-class="($ctrl.shouldAddSearchWithinClass(service)) ? \'search-within-p-only\' : \'\'" ng-repeat="service in $ctrl.services.slice(1) track by $index" ng-attr-id="{{service.scrollId}}" ng-if="!service.isDisabled"><div class="full-view-section-content" ng-if="$ctrl.showConditionalService(service)"><prm-full-view-service-container [load-additional-services]="$ctrl.loadFullViewAdditionalServices || !$ctrl.isOverlayFullView" [item]="::$ctrl.item" [service]="service" [index]="::$index"></prm-full-view-service-container></div></div><div ng-if="::($ctrl.enableSU())" class="syndetic-unbound-section"><prm-syndetic-unbound [item]="::$ctrl.item"></prm-syndetic-unbound></div></div><div ng-if="::($ctrl.bxdisplay && $ctrl.isOverlayFullView)" class="full-view-aside" flex-md="25" flex-lg="25" flex-xl="20" flex><prm-recomendations [item]="::$ctrl.item" [(bxdisplay)]="$ctrl.bxdisplay"></prm-recomendations></div><div ng-if="::($ctrl.bxdisplay && $ctrl.isOverlayFullView)" flex-xl="20" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus}"></div><div class="full-view-spacer" ng-if="::(!$ctrl.bxdisplay  && $ctrl.isOverlayFullView)" flex="0" flex-md="0" flex-lg="20" flex-xl="30" ng-class="{\'flex-lgPlus-25\': $ctrl.mediaQueries.lgPlus}"></div></div><div ng-if="::($ctrl.bxdisplay && !$ctrl.isOverlayFullView)" flex-md="25" flex-lg="25" flex-xl="20" flex><prm-recomendations [item]="::$ctrl.item" [bxenable]="::$ctrl.bxenable" [(bxdisplay)]="::$ctrl.bxdisplay"></prm-recomendations></div><div ng-if="::($ctrl.bxdisplay && !$ctrl.isOverlayFullView)" flex="0" flex-gt-md="5" flex-xl="20" ng-class="{\'flex-lgPlus-10\': $ctrl.mediaQueries.lgPlus}"></div><div class="full-view-spacer" ng-if="::(!$ctrl.bxdisplay  && !$ctrl.isOverlayFullView)" flex="0" flex-md="0" flex-lg="20" flex-xl="30" ng-class="{\'flex-lgPlus-25\': $ctrl.mediaQueries.lgPlus}"></div></div><div ng-if="$ctrl.isRestrictedRecord()" class="margin-bottom-medium zero-padding-bottom ng-scope" layout="row" layout-align="center center"><prm-sign-in-to-view ng-if="!$ctrl.isLoggedIn()" flex-sm="50" flex-xs="90" flex-lg="30"></prm-sign-in-to-view></div><prm-full-view-after parent-ctrl="$ctrl"></prm-full-view-after>');
$templateCache.put('components/search/fullView/sign-in-to-view.html','<div flex-gt-lg="15" flex="0"></div><md-card class="default-card"><md-card-content><h2 class="light-text" translate="nui.search.error.permalink.header"></h2><p><span class="display-block" translate="nui.search.error.permalink.description1"></span> <span class="display-block" translate="nui.search.error.permalink.description2"></span></p><md-card-actions class="md-actions layout-padding layout-align-end-center layout-row" layout="row" layout-align="end center"><button ng-click="$ctrl.handleLogin()" class="button-confirm zero-margin button-with-icon md-button md-ink-ripple" type="button" aria-label="{{\'nui.search.error.aria.permalink.signIn\' | translate}}"><prm-icon icon-type="{{$ctrl.signInIcon.signInToViewPermalimk.type}}" svg-icon-set="{{$ctrl.signInIcon.signInToViewPermalimk.iconSet}}" icon-definition="{{$ctrl.signInIcon.signInToViewPermalimk.icon}}"></prm-icon><span class="ng-scope" translate="nui.search.error.permalink.signIn"></span><div class="md-ripple-container"></div></button></md-card-actions></md-card-content></md-card><div flex-gt-lg="15" flex="0" class="flex-gt-lg-15 flex-0"></div><prm-sign-in-to-view-after parent-ctrl="$ctrl"></prm-sign-in-to-view-after>');
$templateCache.put('components/search/resourceRecommender/resource-recommender-card-content.html','<div ng-class="::{\'layout-row\': $ctrl.resource.resourceType != \'library_information\'}"><div class="resource-image" ng-if="::$ctrl.resource.image_url"><div class="resource-image-inner" ng-class="::{\'person-image\': $ctrl.resource.resourceType===\'person\', \'normlized-resource-image\': $ctrl.resource.resourceType!=\'library_information\'}"><img class="md-card-image" ng-src="{{::$ctrl.resource.image_url}}"/></div></div><div class="resource-content" layout-fill><h3 class="normal-text resource-title"><div><span ng-if="::(!$ctrl.resource.url_text && !$ctrl.resource.url) || $ctrl.resource.url_text">{{::$ctrl.resource.name}}</span></div><a ng-if="::$ctrl.resource.url" ng-href="{{::$ctrl.resource.url}}" target="_blank" ng-click="$ctrl.handle_click()">{{::($ctrl.resource.url_text|| $ctrl.resource.name || $ctrl.resource.url)}}</a></h3><div ng-if="::$ctrl.resource.description"><p ng-if="::$ctrl.resource.description" style="word-wrap: break-word">{{::$ctrl.resource.description}}</p></div><div ng-if="::$ctrl.resource.email"><p ng-if="::$ctrl.resource.email" style="word-wrap: break-word"><a ng-if="::$ctrl.resource.email" ng-href="mailto:{{::$ctrl.resource.email}}"><prm-icon aria-label="{{::$ctrl.resource.email_text||$ctrl.resource.email}}" class="md-icon-button-custom" icon-type="svg" svg-icon-set="primo-actions" icon-definition="email"></prm-icon>{{::$ctrl.resource.email_text||$ctrl.resource.email}}</a></p></div></div></div><prm-resource-recommender-card-content-after parent-ctrl="$ctrl"></prm-resource-recommender-card-content-after>');
$templateCache.put('components/search/resourceRecommender/resource-recommender-dialog-template.html','<div layout="row"><md-dialog aria-label="Full Display" class="prm-resource-recommendations-fullview md-dialog-full prm-full-view-dialog"><md-dialog-content layout="row" style="overflow-y: hidden; height: 100%"><md-toolbar class="default-toolbar is-stuck zero-padding" ng-if="!$ctrl.mediaQueries.gtsm"><div class="md-toolbar-tools zero-padding" layout="row"><md-button class="back-button has-text padding-left-medium" (click)="$ctrl.dialog.hide()" aria-label="{{\'nui.aria.fulldisplay.closeButton\' | translate}}"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="back-to-search"></prm-icon><span translate="fulldisplay.deatiles.back"></span></md-button></div></md-toolbar><sticky-scroll flex="100" style="overflow-y: scroll"><prm-resource-recommender-full-view [query]="$ctrl.query" [resources]="$ctrl.resources"></prm-resource-recommender-full-view></sticky-scroll></md-dialog-content></md-dialog><md-button class="md-icon-button close-button" ng-click="$ctrl.dialog.hide()" ng-if="$ctrl.mediaQueries.gtsm"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="close"></prm-icon></md-button></div>');
$templateCache.put('components/search/resourceRecommender/resource-recommender-full-view.html','<div class="padding-large prm-recommendations-fullview" layout="column"><div class="padding-medium"><h2 translate="nui.resRecomm.full.title" class="zero-margin-bottom"></h2><span translate="nui.resRecomm.full.description"></span> <span class="bold-text italic-text">{{$ctrl.query}}</span></div><div class="padding-medium padding-left-large" layout="row" ng-class="{\'margin-left-small\': $ctrl.mediaQueries.gtxs}"><div flex="60" layout="column"><div class="resource-item" ng-repeat="resource in $ctrl.otherResources"><span class="resource-count ng-binding">{{$index + 1}}</span><div class="resource-type" translate="{{::(\'nui.resRecomm.type.label.\'+resource.resourceType)}}"></div><prm-resource-recommender-card-content [resource]="resource"></prm-resource-recommender-card-content></div></div><div class="max-width-100" layout="column" flex="40" ng-class="{\'padding-left-large\': $ctrl.mediaQueries.gtxs}"><md-card ng-repeat="resource in $ctrl.libraryResources"><md-card-title><md-card-title-text translate="{{::(\'nui.resRecomm.type.label.\'+resource.resourceType)}}"><br></md-card-title-text></md-card-title><md-card-content layout="row"><prm-resource-recommender-card-content [resource]="resource"></prm-resource-recommender-card-content></md-card-content></md-card></div></div></div><prm-resource-recommender-full-view-after parent-ctrl="$ctrl"></prm-resource-recommender-full-view-after>');
$templateCache.put('components/search/resourceRecommender/resource-recommender.html','<div layout="column" layout-sm="column" ng-if="$ctrl.previewResources && $ctrl.previewResources.length"><div layout="row"><div layout="row" flex><md-card ng-repeat="resource in $ctrl.previewResources| limitTo:$ctrl.resourceRecommenderLimit()" ng-class="$ctrl.previewClass" class="one-slot"><div class="resource-header" layout="column" layout-align="center start" translate="{{::(\'nui.resRecomm.type.label.\'+resource.resourceType)}}"></div><md-card-content layout="row"><prm-resource-recommender-card-content [resource]="::resource" class="max-width-100"></prm-resource-recommender-card-content></md-card-content></md-card></div></div><div layout="column" layout-align="center end"><md-button class="button-as-link link-alt-color zero-margin" ng-click="$ctrl.openFullView()" ng-if="$ctrl.showAdditionalResourcesLink()"><span class="bold-text ng-binding ng-scope" translate="nui.resRecomm.brief.fullviewLink" translate-values="{\'idx_0\' : $ctrl.numOfResources()}"></span></md-button></div></div><prm-resource-recommender-after parent-ctrl="$ctrl"></prm-resource-recommender-after>');
$templateCache.put('components/search/scroller/scroll.html','<prm-scroll-after parent-ctrl="$ctrl"></prm-scroll-after>');
$templateCache.put('components/search/searchBar/advanced-search-header.html','<form class="search-element layout-full-width" name="advancedSearch" (submit)="advancedSearch.$valid && $ctrl.search()"><div layout="column" class="form-focus"><div layout="row" class="advanced-search-tabs padded-container" layout-align="space-between center" layout-wrap><div class="input-cell" ng-if="$ctrl.searchTabs.length > 1" layout="row" layout-wrap layout-align="start center"><span translate="search-advanced.search.title" class="bold-text"></span><md-radio-group ng-model="$ctrl.selectedSearchTab" layout="row" ng-change="$ctrl.changeSearchFields()" layout-wrap><md-radio-button ng-repeat="tab in $ctrl.searchTabs" value="{{tab}}" class="md-primary" aria-label="{{\'tabbedmenu.\'+tab+\'.label\' | translate}}"><span translate="tabbedmenu.{{tab}}.label"></span></md-radio-button></md-radio-group></div><div class="input-cell"><md-input-container ng-if="$ctrl.scopesOptions.length > 1" class="underlined-input zero-margin" layout="row" layout-align="start center"><label translate="search-advanced.scopes.label" class="bold-text width-auto"></label><md-select ng-model="$ctrl.scope" ng-change="$ctrl.onChange()"><md-option ng-repeat="scope in $ctrl.scopesOptions" value="{{scope}}"><span translate="scopes.option.{{scope}}"></span></md-option></md-select></md-input-container></div></div><div layout="row" flex layout-xs="column"><md-card layout="column" layout-align="start start" flex class="zero-margin marginless-inputs padded-container"><div layout="column" layout-align="start start" class="layout-full-width"><div layout="row" ng-repeat="row in $ctrl.rowArray | limitTo: $ctrl.limit" class="inputs-row animate-input layout-full-width"><md-input-container class="underlined-input tiny-bold uppercase" ng-if="!$first && $ctrl.boolOptions.length > 0"><md-select aria-label="{{\'nui.aria.advanced.boolean\' | translate:\'{number: \\\'\'+($indexi+1)+\'\\\'}\'}}" ng-model="row.boolOperator " ng-change="$ctrl.onChange()"><md-option ng-repeat="bool in $ctrl.boolOptions" ng-value="bool"><span translate="search-advanced.boolOperator.option.{{bool}}"></span></md-option></md-select></md-input-container><md-input-container class="underlined-input" ng-if="$ctrl.searchCategoryOptions.length > 0"><md-select aria-label="{{\'nui.aria.advanced.field\' | translate:\'{number: \\\'\'+($index+1)+\'\\\'}\'}}" ng-disabled="row.searchOperator == \'startswith\'" ng-model="row.searchCategory" ng-change="$ctrl.onChange()"><md-option ng-repeat="category in $ctrl.searchCategoryOptions" ng-value="category"><span translate="search-advanced.scope.option.nui.advanced.index.{{category}}"></span></md-option></md-select></md-input-container><md-input-container class="underlined-input italics" ng-if="$ctrl.serachOptions.length > 0"><md-select aria-label="{{\'nui.aria.advanced.percision\' | translate:\'{number: \\\'\'+($index+1)+\'\\\'}\'}}" ng-model="row.searchOperator" ng-change="$ctrl.changeOperator($index)"><md-option ng-repeat="operator in $ctrl.serachOptions" ng-value="operator"><span translate="search-advanced.precisionOperator.option.{{operator}}"></span></md-option></md-select></md-input-container><md-input-container class="underlined-input bold-text" flex ng-if="$ctrl.boolOptions.length > 0 || $ctrl.searchCategoryOptions.length > 0\r\n                            || $ctrl.serachOptions.length > 0 "><input aria-label="{{\'nui.aria.advanced.query\' | translate:\'{number: \\\'\'+($index+1)+\'\\\'}\'}}" name="textField" ng-model="row.searchQuery"/></md-input-container></div></div><md-divider class="margin-top-small margin-bottom-small"></md-divider><div layout="row" layout-align="start center" class="margin-top-small"><md-button aria-label="{{\'nui.search-advanced.add\' | translate}}" class="button-with-icon md-primary zero-margin button-with-icon" ng-click="$ctrl.incrementLimit()" ng-hide="$ctrl.limit >= 7" ng-if="$ctrl.boolOptions.length > 0 || $ctrl.searchCategoryOptions.length > 0|| $ctrl.serachOptions.length > 0 "><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="plus"></prm-icon><span translate="nui.search-advanced.add"></span></md-button><span class="margin-right-small"></span><md-button ng-if="$ctrl.clearForm || $ctrl.textAppears()" class="button-with-icon zero-margin button-notice button-with-icon" ng-click="$ctrl.clearSearchForm()"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="replay"></prm-icon><span translate="link.title.search.clear"></span></md-button></div></md-card><md-card flex-gt-sm="30" flex class="zero-margin marginless-inputs padded-container" layout="column"><div layout="column"><md-input-container class="underlined-input" ng-if="$ctrl.materialType.label && $ctrl.materialType.displayOptions.length > 0"><label translate="search-advanced.label.material_type"></label><md-select ng-disabled="$ctrl.materialType.displayOptions.length == 1" ng-model="$ctrl.materialType.selection" ng-change="$ctrl.onChange()"><md-option ng-repeat="material in $ctrl.materialType.displayOptions" ng-value="material"><span translate="search-advanced.mediaType.option.{{material}}"></span></md-option></md-select></md-input-container><md-input-container class="underlined-input" ng-if="$ctrl.language.label && $ctrl.language.displayOptions.length > 0"><label translate="search-advanced.label.language"></label><md-select ng-disabled="$ctrl.language.displayOptions.length == 1" ng-model="$ctrl.language.selection" ng-change="$ctrl.onChange()"><md-option ng-repeat="language in $ctrl.language.displayOptions" ng-value="language"><span translate="search-advanced.language.option.{{language}}"></span></md-option></md-select></md-input-container><md-input-container class="underlined-input" ng-if="$ctrl.publicationData.label && $ctrl.publicationData.displayOptions.length > 0"><label translate="search-advanced.label.publication_date"></label><md-select ng-disabled="$ctrl.publicationData.displayOptions.length == 1" ng-model="$ctrl.publicationData.selection" ng-change="$ctrl.onChange()"><md-option ng-repeat="publication in $ctrl.publicationData.displayOptions" ng-value="publication"><span translate="{{$ctrl.getCodeForPublicationDate(publication)}}{{publication}}"></span></md-option></md-select></md-input-container><div layout="row" ng-if="$ctrl.specificDate()" class="date-range-inputs animate-input"><md-input-container class="underlined-input"><label translate="search-advanced.DateRange.label.DateRangeStart"></label><md-select ng-model="$ctrl.startDay.selection" ng-change="$ctrl.onChange()"><md-option ng-repeat="day in $ctrl.startDay.displayOptions" ng-value="day"><span translate-default="{{day}}" translate="search-advanced.drStartDay.option.{{day}}"></span></md-option></md-select></md-input-container><md-input-container class="underlined-input"><md-select ng-model="$ctrl.startMonth.selection" ng-change="$ctrl.onChange()"><md-option ng-repeat="month in $ctrl.startMonth.displayOptions" ng-value="month"><span translate-default="{{month}}" translate="search-advanced.drStartMonth.option.{{month}}"></span></md-option></md-select></md-input-container><md-input-container class="underlined-input hidden-label"><input placeholder="{{\'search-advanced.DateRange.label.Year\' | translate}}" type="text" ng-model="$ctrl.startYear" maxlength="5" size="5" name="startYear" ng-pattern="$ctrl.yearRegex"/></md-input-container></div><div ng-messages="advancedSearch.startYear.$error" style="color:tomato"><div ng-message="pattern"><span translate="search.search.error.yearInvalidCharacters"></span></div></div><div layout="row" ng-if="$ctrl.specificDate()" class="date-range-inputs animate-input"><md-input-container class="underlined-input"><label translate="search-advanced.DateRange.label.DateRangeEnd"></label><md-select ng-model="$ctrl.endDay.selection" ng-change="$ctrl.onChange()"><md-option ng-repeat="day in $ctrl.endDay.displayOptions" ng-value="day"><span translate-default="{{day}}" translate="search-advanced.drEndDay.option.{{day}}"></span></md-option></md-select></md-input-container><md-input-container class="underlined-input"><md-select ng-model="$ctrl.endMonth.selection" ng-change="$ctrl.onChange()"><md-option ng-repeat="month in $ctrl.endMonth.displayOptions" ng-value="month"><span translate-default="{{month}}" translate="search-advanced.drEndMonth.option.{{month}}"></span></md-option></md-select></md-input-container><md-input-container class="underlined-input hidden-label"><input placeholder="{{\'search-advanced.DateRange.label.Year\' | translate}}" type="text" ng-model="$ctrl.endYear" maxlength="5" size="5" name="endYear" ng-pattern="$ctrl.yearRegex"></md-input-container></div><div ng-messages="advancedSearch.endYear.$error" style="color:tomato"><div ng-message="pattern"><span translate="search.search.error.yearInvalidCharacters"></span></div></div><span translate="{{$ctrl.errorCode}}" ng-if="$ctrl.errorCode && $ctrl.specificDate()" style="color:tomato"></span></div></md-card></div><div layout="row" class="advanced-search-output" flex ng-if="$ctrl.textAppears()"><md-card class="marginless-inputs layout-full-width" layout-align="center start"><div layout="row" ng-if="$ctrl.textAppears()" layout-align="start center" layout-align-xs="center" class="layout-full-width"><div class="search-string padding-right-medium" layout="column" flex hide-xs><div><div ng-repeat="row in $ctrl.rowArray | limitTo: $ctrl.limit" ng-if="row.searchQuery" class="string-block animate-scale middle" ng-class="{\'clear-row\': row.boolOperator == \'OR\'}"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="keyboard-return" ng-if="$ctrl.firstQuery() == $index" class="prm-positive h-flipped"></prm-icon><span ng-hide="$ctrl.firstQuery() == $index" ng-if="$ctrl.boolOptions.length > 0"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="keyboard-return" ng-if="$ctrl.rowArray[$index].boolOperator == \'OR\'" class="prm-positive h-flipped"></prm-icon><md-input-container class="tiny-bold uppercase string-field"><md-select aria-label="{{\'nui.aria.advanced.boolean\' | translate}}" ng-model="row.boolOperator " ng-change="$ctrl.onChange()"><md-option ng-repeat="bool in $ctrl.boolOptions" ng-value="bool"><span translate="search-advanced.boolOperator.option.{{bool}}"></span></md-option></md-select></md-input-container></span><span><md-input-container class="string-field" ng-if="$ctrl.searchCategoryOptions.length > 0"><md-select ng-disabled="row.searchOperator == \'startswith\'" ng-model="row.searchCategory" ng-change="$ctrl.onChange()"><md-option ng-repeat="category in $ctrl.searchCategoryOptions" ng-value="category"><span translate="search-advanced.scope.option.nui.advanced.index.{{category}}"></span></md-option></md-select></md-input-container></span><span><md-input-container class="italic-text string-field" ng-if="$ctrl.serachOptions.length > 0"><md-select ng-model="row.searchOperator" ng-change="$ctrl.changeOperator($index)"><md-option ng-repeat="operator in $ctrl.serachOptions" ng-value="operator"><span translate="search-advanced.precisionOperator.option.{{operator}}"></span></md-option></md-select></md-input-container></span><span class="string-field bold-text"><input type="text" ng-model="row.searchQuery" pu-elastic-input pu-elastic-input-maxwidth="none"/></span></div></div></div><div layout="row"><md-button type="submit" class="button-confirm button-large button-with-icon"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="magnifying-glass"></prm-icon><span translate="link.title.search.search"></span></md-button></div></div></md-card></div></div><div ng-if="$ctrl.showSignIn"><prm-alert-bar flex [alert-object]="$ctrl.signInAlert"></prm-alert-bar></div></form><prm-advanced-search-after parent-ctrl="$ctrl"></prm-advanced-search-after>');
$templateCache.put('components/search/searchBar/search-bar.html','<div layout="column" layout-fill tabindex="-1" role="search" ng-class="{\'zero-padding\': $ctrl.showTabsAndScopesVal()}"><div class="search-wrapper dark-toolbar prm-top-bar-container main-header-row" div layout="row" ng-class="{\'facet-to-left\': $ctrl.facetToLeft && !$ctrl.mediaQueries.xs && !$ctrl.mediaQueries.sm && !$ctrl.mediaQueries.md}"><div flex="0" flex-md="0" flex-lg="10" flex-xl="20" ng-class="{\'facet-to-left-spacer\': $ctrl.facetToLeft && !$ctrl.mediaQueries.xl && !$ctrl.mediaQueries.md && !$ctrl.mediaQueries.sm && !$ctrl.mediaQueries.xs, \'flex-xl-25\': $ctrl.facetToLeft}"></div><div class="search-elements-wrapper" layout="column" flex flex-sm="85" flex-md="75" flex-lg="65" flex-xl="50" ng-class="(!$ctrl.advancedSearch ?\'simple-mode\' : \'advanced-mode\')  + \' \' + ($ctrl.mainSearchField ? \'has-input\' : \'\') + \' \' + ($ctrl.mediaQueries.lgPlus ? \'flex-lgPlus-55\' : \'\') + \' \' + ($ctrl.facetToLeft? \'facet-to-left-search-bar\' : \'\')"><div class="simple-search-wrapper layout-full-width" ng-hide="$ctrl.advancedSearch"><form class="layout-full-height" layout="column" name="search-form" ng-submit="$ctrl.onSubmit()"><input type="submit" class="accessible-only" tabindex="-1" aria-hidden="true"/><div class="layout-full-width"><div class="search-element-inner layout-full-width"><div class="search-input"><prm-autocomplete class="search-input-container EXLPRMHeaderAutoComplete" md-input-id="searchBar" md-search-text="$ctrl.mainSearchField" md-search-text-change="$ctrl.autocompleteQuery($ctrl.mainSearchField)" md-selected-item="$ctrl.selectedItem" md-selected-item-change="$ctrl.onSelectItem()" md-item-text="item.display || $ctrl.typedQuery " md-min-length="2" md-autofocus="false" md-no-cache="true" md-items="item in $ctrl.autoCompleteItems" md-item-text="item" placeholder="{{$ctrl.placeHolderText}}" flex><md-item-template><div ng-if="item.tab"><span md-highlight-text="$ctrl.mainSearchField">{{$ctrl.mainSearchField}}</span><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="magnifying-glass"></prm-icon><span class="suggestion-scope" translate="{{\'tabbedmenu.\'+item.tab+\'.label\'}}"></span></div><div ng-if="!item.tab" md-highlight-text="$ctrl.mainSearchField">{{item.shortDisplay}}</div></md-item-template></prm-autocomplete></div><div class="search-options" ng-class="{\'flex-sm-0 flex-0 hide-on-xs\':!$ctrl.showTabsAndScopesVal(), \'flex-sm-40 visible\':$ctrl.showTabsAndScopesVal()}"><prm-tabs-and-scopes-selector ng-if="$ctrl.showTabsAndScopesVal()" [(selected-scope)]="$ctrl.scopeField" [(selected-tab)]="$ctrl.selectedTab" ng-class="{\'is-displayed\':$ctrl.showTabsAndScopesVal()}" (update-find-in-db-event)="$ctrl.updateShowFindDBButton($event)"></prm-tabs-and-scopes-selector></div><div class="search-actions" ng-if="::(!$ctrl.scopesDialerConfiguration.display)" layout-align-xs="start center"><md-button class="zero-margin md-icon-button" ng-if="!$ctrl.advancedSearch" ng-click="$ctrl.switchAdvancedSearch()" hide-gt-xs><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="tune"></prm-icon></md-button><md-button class="zero-margin button-confirm" aria-label="Search" (click)="$ctrl.onSubmit()"><prm-icon icon-type="{{::$ctrl.searchBoxIcons.searchTextBox.type}}" svg-icon-set="{{::$ctrl.searchBoxIcons.searchTextBox.iconSet}}" icon-definition="{{::$ctrl.searchBoxIcons.searchTextBox.icon}}"></prm-icon></md-button></div></div></div></form></div><div class="advanced-search-wrapper layout-full-width" layout="row" ng-if="$ctrl.advancedSearch" ng-cloak><prm-advanced-search tabindex="0" role="search" id="advanced-search" [(selected-scope)]="$ctrl.scopeField" [(selected-tab)]="$ctrl.selectedTab" [(show-tab-and-scopes)]="$ctrl.showTabsAndScopes" [(typed-query)]="$ctrl.mainSearchField" (update-find-in-db-event)="$ctrl.updateShowFindDBButton($event)"></prm-advanced-search><md-button class="switch-to-simple zero-margin md-icon-button" ng-if="$ctrl.advancedSearch" ng-click="$ctrl.switchAdvancedSearch()" hide-gt-xs><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="close"></prm-icon></md-button></div><div ng-if="$ctrl.isShowFindDBButton" class="search-extras layout-full-width"><div layout="row"><span flex></span><md-button class="button-over-dark button-with-icon" (click)="::$ctrl.openFdbIframe();" translate-attr-title="mainmenu.label.moreoptions" aria-label="{{::(\'finddb.sb.title\' | translate)}}"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="database"></prm-icon><span translate="finddb.sb.title"></span></md-button></div></div></div><div class="search-switch-buttons" layout-sm="column" layout-align-sm="start stretch" hide-xs ng-class="{\'facet-to-left-advanced-search\': $ctrl.facetToLeft}"><md-button aria-label="{{\'nui.aria.searchBar.advancedLink\' | translate}}" class="switch-to-advanced zero-margin button-with-icon" ng-if="!$ctrl.advancedSearch" ng-click="$ctrl.switchAdvancedSearch()"><span layout="row" layout-align="start center"><span translate="label.advanced_search"></span></span></md-button><md-button class="switch-to-simple zero-margin button-with-icon" ng-if="$ctrl.advancedSearch" ng-click="$ctrl.switchAdvancedSearch()"><span layout="row" layout-align="start center"><span translate="label.simple_search"></span></span></md-button></div><div flex="0" flex-md="0" flex-sm="0" flex-lg="15" flex-xl="15" ng-class="{\'flex-lgPlus-10\': $ctrl.facetToLeft && !$ctrl.mediaQueries.xs}"></div></div><div layout="row" ng-if="!$ctrl.advancedSearch && $ctrl.showSignIn"><div flex="0" flex-md="0" flex-lg="15" flex-xl="20"></div><prm-alert-bar flex [alert-object]="$ctrl.signInAlert"></prm-alert-bar><div class="padding-left-medium" flex="0" flex-md="25" flex-lg="10" flex-xl="15" hide-xs></div><div flex="0" flex-md="0" flex-sm="10" flex-lg="20" flex-xl="20"></div></div></div><div class="advanced-search-backdrop" ng-class="{\'visible\': $ctrl.advancedSearch}"></div><prm-search-bar-after parent-ctrl="$ctrl"></prm-search-bar-after>');
$templateCache.put('components/search/snippet/snippet.html','<span ng-if="$ctrl.getSnippet()"><prm-icon class="open-quote" icon-type="{{::$ctrl.actionIcons.citations.type}}" svg-icon-set="{{::$ctrl.actionIcons.citations.iconSet}}" icon-definition="{{::$ctrl.actionIcons.citations.icon}}"></prm-icon><prm-highlight class="italic-text" terms="$ctrl.highlights[\'termsUnion\']" text="$ctrl.getSnippet()"></prm-highlight><prm-icon class="close-quote" icon-type="{{::$ctrl.actionIcons.citations.type}}" svg-icon-set="{{::$ctrl.actionIcons.citations.iconSet}}" icon-definition="{{::$ctrl.actionIcons.citations.icon}}"></prm-icon></span><prm-snippet-after parent-ctrl="$ctrl"></prm-snippet-after>');
$templateCache.put('components/search/timesCited/times-cited.html','<div id="timesCited" layout="row" class="margin-top-small" ng-if="$ctrl.shouldDisplayTimesCited"><div class="margin-right-medium"><img src="{{$ctrl.vendorLogo}}" alt="{{$ctrl.getTimeCitedType()}}"></div><div layout="column"><div><a ng-href="{{$ctrl.citedLink}}" (click)="$ctrl.reportBeacon()" target="_blank" class="arrow-link" style="line-height: 2.7em" aria-label="{{$ctrl.getAraiaLabelForTimeCited()}}{{\' \'}}{{\'results.scopes.for\' | translate}}{{\' \'}}{{$ctrl.getTimeCitedType() | translate}}" title="{{$ctrl.getAraiaLabelForTimeCited()}}{{\' \'}}{{\'results.scopes.for\' | translate}}{{\' \'}}{{$ctrl.getTimeCitedType() | translate}}"><span ng-if="$ctrl.extensionVal>1" translate="nui.citation.multicited" translate-values="{\'idx_0\' : $ctrl.extensionVal}"></span> <span ng-if="$ctrl.extensionVal ==1" translate="nui.citation.singlecited"></span> <strong>{{$ctrl.scopOrWosTrans}}</strong><prm-icon external-link icon-type="{{$ctrl.availabilityLineIcons.externalLink.type}}" svg-icon-set="{{$ctrl.availabilityLineIcons.externalLink.iconSet}}" icon-definition="{{$ctrl.availabilityLineIcons.externalLink.icon}}"></prm-icon><prm-icon link-arrow icon-type="{{$ctrl.availabilityLineIcons.arrowRight.type}}" svg-icon-set="{{$ctrl.availabilityLineIcons.arrowRight.iconSet}}" icon-definition="{{$ctrl.availabilityLineIcons.arrowRight.icon}}"></prm-icon></a></div></div></div><prm-times-cited-after parent-ctrl="$ctrl"></prm-times-cited-after>');
$templateCache.put('components/search/topbar/topbar.html','<prm-top-bar-before parent-ctrl="$ctrl"></prm-top-bar-before><div class="top-nav-bar" layout="row" tabindex="-1" role="banner"><prm-skip-to tabindex="-1"></prm-skip-to><prm-logo></prm-logo><div flex="50" hide-xs></div><prm-main-menu role="navigation" ng-if="::$ctrl.showMainMenu" menu-type="menu" flex="50" hide-xs></prm-main-menu><div flex="50" flex-xs="100"></div><prm-search-bookmark-filter ng-show="$ctrl.displayFavorites" class="view-switcher" layout-align="end center" layout="row" flex="noshrink"></prm-search-bookmark-filter><prm-user-area></prm-user-area></div><prm-topbar-after parent-ctrl="$ctrl"></prm-topbar-after>');
$templateCache.put('components/search/virtualBrowse/virtual-browse.html','<div tabindex="-1" class="container-nav-controls"><md-button tabindex="-1" aria-label="{{\'nui.aria.vbrowse.previous\' | translate}}" ng-disabled="$ctrl.isLeftScrollDisabled" ng-keypress="$ctrl.previous($event)" ng-mousedown="$ctrl.scrollLeftMouseDown();$event.stopPropagation()" ng-mouseup="$ctrl.scrollMouseUp();$event.stopPropagation()" class="nav-control nav-left"><md-tooltip><span ng-bind-html="\'virtualbrowse.button.previous\' | translate"></span></md-tooltip><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-left" aria-label="{{\'nui.aria.vbrowse.previous\' | translate}}"></prm-icon></md-button></div><md-virtual-repeat-container dir="ltr" role="tablist" id="prm-virtual-browse" md-top-index="$ctrl.currentIndex" md-orient-horizontal><ul tabindex="-1" role="listbox" layout="row" layout-align="start start" style="min-width:100%"><li in-view="$ctrl.onItemInView($index, $inview, $inviewInfo)" in-view-options="{generateDirection: true, throttle: 50}" md-virtual-repeat="virtualBrowseItem in $ctrl.dynamicVirtualBrowseItems" ng-click="$ctrl.navigateToItemFullView(virtualBrowseItem, $index);$event.stopPropagation();" id="vBrowseid{{$index}}" tabindex="0" role="tab" ng-focus="$ctrl.focusSupport($event)" ng-blur="$ctrl.focusOutSupport($event)" ng-keydown="$ctrl.keyDownSupport($event);" md-item-size="110" md-on-demand ng-mouseenter="highlightItem = true" ng-mouseleave="highlightItem = false" ng-class="{\'md-whiteframe-2dp\': highlightItem, \'md-whiteframe-5dp current-item\': $index == $ctrl.focusedIndex}"><a tabindex="-1" ui-state="\'fulldisplay\'" ui-state-params="$ctrl.getItemFullViewParams(virtualBrowseItem)" ui-sref-opts="{reload: true}"><prm-virtual-browse-item ng-style="{\'color\': \'hsl({{($index*$index)/2}}, 30%, 70%)\'}" ng-class="{\'hide-disabled-virtual-browse-items\': $index < $ctrl.leftFinalIndex || $index > $ctrl.rightFinalIndex}" [virtual-browse-item]="virtualBrowseItem"></prm-virtual-browse-item></a></li></ul></md-virtual-repeat-container><div tabindex="-1" class="container-nav-controls"><md-button tabindex="-1" aria-label="{{\'nui.aria.vbrowse.next\' | translate}}" ng-disabled="$ctrl.isRightScrollDisabled" ng-keypress="$ctrl.next($event)" ng-mousedown="$ctrl.scrollRightMouseDown();$event.stopPropagation()" ng-mouseup="$ctrl.scrollMouseUp();$event.stopPropagation()" class="nav-control nav-right"><md-tooltip><span ng-bind-html="\'virtualbrowse.button.next\' | translate"></span></md-tooltip><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-right" aria-label="{{\'nui.aria.vbrowse.next\' | translate}}"></prm-icon></md-button></div><prm-virtual-browse-after parent-ctrl="$ctrl"></prm-virtual-browse-after>');
$templateCache.put('components/security/login/login.html','<prm-spinner ng-if="showLoader" class="light-on-dark no-text overlay-cover" layout="row" layout-align="center center"></prm-spinner><form class="layout-full-width" layout="column" ng-submit="$ctrl.login()"><div layout="row" layout-align="center center" style="margin-top: 1.5em; min-height: 40px"><div class="animate-enter-leave-scale-bounce" style="width: 0;position: absolute; top: 1em; z-index: 10; left: 0" ng-if="$ctrl.showBackButton()"><md-button class="md-icon-button icon-button-large" aria-label="Back button" ng-click="$ctrl.handleBackButtonClick()"><prm-icon [icon-type]="::$ctrl.loginIcons.backIcon.type" [svg-icon-set]="::$ctrl.loginIcons.backIcon.iconSet" [icon-definition]="::$ctrl.loginIcons.backIcon.icon"></prm-icon></md-button></div><h2 class="md-headline light-text" layout="row" layout-align="center center" flex><span translate="{{$ctrl.getLoginTitleForDisplay()}}"></span></h2></div><md-dialog-content><md-tabs md-dynamic-height md-border-bottom md-selected="$ctrl.selectedTab" class="hidden-tabs"><md-tab label="one"><md-content><md-list role="list" class="padded-container"><md-list-item ng-repeat="authenticationMethod in $ctrl.authenticationMethods" class="md-2-line md-long-text" ng-click="$ctrl.handleLoginClick( authenticationMethod )"><prm-login-item [authentication-method]="authenticationMethod"></prm-login-item><div class="md-secondary"><prm-icon [icon-type]="::$ctrl.loginIcons.gotoLinkIcon.type" [svg-icon-set]="::$ctrl.loginIcons.gotoLinkIcon.iconSet" [icon-definition]="::$ctrl.loginIcons.gotoLinkIcon.icon"></prm-icon></div></md-list-item></md-list></md-content></md-tab><md-tab label="two" md-on-select="showBackButton()"><md-content class="md-padding"><span ng-if="$ctrl.showError" class="error-warning-message error-color"><prm-icon [icon-type]="::$ctrl.loginIcons.errorIcon.type" [svg-icon-set]="::$ctrl.loginIcons.errorIcon.iconSet" [icon-definition]="::$ctrl.loginIcons.errorIcon.icon"></prm-icon><span translate="{{ $ctrl.getErrorForDisplay() }}" translate-values="$ctrl.getPlaceHolders()" translate-compile></span></span><div class="dialog-inputs overflow-hidden" layout="column" layout-align="start center"><md-input-container class="centered-input"><label translate="login.userid" class="text-uppercase"></label><input type="text" ng-model="$ctrl.username"/></md-input-container><md-input-container class="centered-input"><label translate="login.password" class="text-uppercase"></label><input type="password" ng-model="$ctrl.password"/></md-input-container></div><div class="dialog-divider transparent-divider"></div><prm-login-help ng-if="$ctrl.displaySigninHelp" [authentication-method]="$ctrl.selectedAuthenticationMethod"></prm-login-help></md-content></md-tab></md-tabs></md-dialog-content><md-dialog-actions class="animate-enter-leave-scale-bounce" layout="row" layout-align="center center" ng-if="!hideActionsBar"><md-button ng-if="!$ctrl.standAlone()" class="button-large" ng-click="$ctrl.cancelLogin()"><span translate="login.cancel"></span></md-button><md-button ng-if="$ctrl.showSubmitButton()" class="button-large button-confirm animate-scale animate-enter-leave-scale-bounce" type="submit" style="margin-right:20px"><span translate="login.login"></span></md-button></md-dialog-actions></form><prm-login-after parent-ctrl="$ctrl"></prm-login-after>');
$templateCache.put('components/security/login/stand-alone-login.html','<body><div layout="column" layout-fill layout-align="start center"><div flex="5"></div><div class="login-header"><prm-logo></prm-logo></div><md-card class="login-card login-dialog"><md-card-content><prm-login [authentication-methods]="$ctrl.getAuthenticationMethods()" [is-stand-alone]="true"></prm-login></md-card-content></md-card><div flex="10"></div></div></body><prm-stand-alone-login-after parent-ctrl="$ctrl"></prm-stand-alone-login-after>');
$templateCache.put('components/tags/tagsList/tags-list.html','<div layout="column" layout-align="start start"><div ng-if="$ctrl.tagslist.length > 0"><md-chips ng-model="$ctrl.tagslist" name="{{$chip.tagName}}" readonly="true" md-removable="false"><md-chip-template><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="tag-outline"></prm-icon><a (click)="$ctrl.closeDialog()" ui-sref="exploreMain.search({{::$ctrl.resultSearchUrl($chip.tagName)}})" ui-sref-opts="{reload: true}"><strong>{{$chip.tagName}}</strong> </a><em class="tagNameRTL" ng-if="$chip.count > 0">({{$chip.count}})</em></md-chip-template></md-chips><md-button class="button-as-link link-alt-color zero-margin" ng-if="$ctrl.isFullDisplay && !$ctrl.showAllNonUserTags" (click)="$ctrl.showAllRecordNonUserTags()"><span class="bold-text" translate="nui.facets.showmore"></span></md-button></div><div ng-if="$ctrl.editable && $ctrl.userLoggedIn()"><form name="chipsAutocompleteForm"><md-chips ng-model="$ctrl.usertagslist" md-require-match="false" md-transform-chip="$ctrl.addTag($chip)" md-enable-chip-edit="true" delete-button-label="Remove Tag" delete-hint="Press delete to remove tag" md-on-add="$ctrl.onTagAdd($chip)" md-on-remove="$ctrl.onTagRemove($chip)"><md-autocomplete ng-show="$ctrl.usertagslist.length>0 || $ctrl.editTagsMode" md-selected-item="$ctrl.selectedItem" md-search-text="$ctrl.searchText" md-dropdown-items="5" md-input-name="autocompleteTagField" md-items="item in $ctrl.querySearch($ctrl.searchText)" md-item-text="item.tagName" placeholder="{{\'nui.tags.add.more\' | translate}}" md-min-length="0" md-input-minlength="0" md-autocomplete-snap="width" md-input-id="own-tags-input"><md-item-template><span md-highlight-text="$ctrl.searchText">{{item.tagName}}</span></md-item-template></md-autocomplete><md-chip-template><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="tag-outline"></prm-icon><md-tooltip><span translate="nui.tags.delete.tooltip"></span></md-tooltip><a (click)="$ctrl.closeDialog()" ui-sref="exploreMain.search({{::$ctrl.resultSearchUrl($chip.tagName)}})" ui-sref-opts="{reload: true}"><strong>{{$chip.tagName}}</strong> </a><em class="tagNameRTL" ng-if="$chip.count > 0">({{$chip.count}})</em></md-chip-template></md-chips><span translate="nui.tags.search.invalidtag" ng-if="!$ctrl.isSearchTextValid" class="error-response"></span></form><md-button class="button-link button-with-icon margin-left-zero" ng-if="!$ctrl.editTagsMode && $ctrl.usertagslist.length===0" ng-click="$ctrl.editTags()"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="pencil"></prm-icon><span translate="nui.tags.add"></span></md-button></div><md-button class="button-link button-with-icon margin-left-zero" ng-if="$ctrl.editable && !$ctrl.userLoggedIn()" ng-click="$ctrl.handleLoginClick()"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="pencil"></prm-icon><span translate="nui.tags.add"></span></md-button></div><prm-tags-list-after parent-ctrl="$ctrl"></prm-tags-list-after>');
$templateCache.put('components/tags/tagsResults/tags-results.html','<md-content class="padded-container" layout="row" layout-align="center start" flex><div flex="0" flex-md="0" flex-lg="20" flex-xl="30"></div><div flex><prm-tags-results-list><div class="results-title" layout="row" layout-align="start center" aria-hidden="false"><i class="results-count">{{$ctrl.tagsSearchResult.length}} Tags found</i> <span flex></span><prm-toggle-button><md-button class="margin-zero" ng-click="doToggle = !doToggle" ng-class="doToggle? \'toggle-one\':\'toggle-two\'"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="toggle-items"></prm-icon><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="toggle-list"></prm-icon></md-button></prm-toggle-button></div><prm-spinner ng-if="$ctrl.searchInProgress" class="half-transparent no-text" layout="row" layout-align="center center" style="padding-top: 5em"></prm-spinner><md-list class="prm-list prm-linkable-list-items prm-dense-list has-list-nav zero-padding" ng-class="{\'prm-bricks-list\': doToggle}" flex><span translate="nui.tags.search.noresults" ng-if="$ctrl.tagsSearchResult.length===0"></span><md-list-item class="md-2-line" ng-repeat="tag in $ctrl.tagsSearchResult | orderBy: \'tagName\'  | limitTo:$ctrl.tagsResultsLimit" ng-href="{{::$ctrl.resultSearchUrl(tag.tagName)}}"><div class="md-list-item-text" layout="row"><div layout="column" layout-align="center start" flex><h3 class="item-title bold-text"><span>{{tag.tagName}}</span> <span ng-if="doToggle">({{tag.count}})</span></h3></div><div ng-if="!doToggle" flex="20" layout-align="center start" layout="column"><span>{{tag.count}} records</span></div></div></md-list-item></md-list></prm-tags-results-list></div><div flex="0" flex-md="0" flex-lg="20" flex-xl="30"></div></md-content><prm-tags-results-after parent-ctrl="$ctrl"></prm-tags-results-after>');
$templateCache.put('components/tags/tagsResults/toggle-button.html','');
$templateCache.put('components/tags/tagsSearchBar/tags-search-bar.html','<div tabindex="-1" role="search" layout="row"><div flex="0" flex-md="15" flex-lg="20" flex-xl="30"></div><div layout="column" flex><div class="search-elements-wrapper" layout="row"><form name="search-form" ng-submit="$ctrl.doTagsSearch()" class="layout-full-width"><div class="classic-input" layout="row" layout-fill><div class="search-scope" layout="column" layout-align="center start"><div layout="row" layout-align="center center"><span class="static-text bold-text" layout="column" layout-align="center start" style="font-size: .8em; text-transform: uppercase;letter-spacing: 0.03em"><span class="bold-text" translate="nui.tags.yellow1"></span> <span class="bold-text" translate="nui.tags.yellow2"></span></span></div></div><md-input-container flex md-no-float><input ng-model="$ctrl.mainSearchField" placeholder="{{\'nui.tags.search.text\' | translate}}" autocomplete="off"></md-input-container><md-button class="submit-button button-confirm" aria-label="Search" ng-click="$ctrl.doTagsSearch()"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="magnifying-glass"></prm-icon></md-button></div></form></div></div><div flex="0" flex-md="15" flex-lg="20" flex-xl="30"></div></div><div ng-if="$ctrl.withAlphabet === \'true\'" tabindex="0" role="search" layout="row"><div flex="0" flex-md="0" flex-lg="10" flex-xl="20"></div><prm-alphabet-toolbar flex></prm-alphabet-toolbar><div flex="0" flex-md="0" flex-lg="10" flex-xl="20"></div></div><prm-tags-search-bar-after parent-ctrl="$ctrl"></prm-tags-search-bar-after>');
$templateCache.put('components/account/overview/depositsOverview/deposits-overview.html','<div class="tiles-grid-tile"><div class="tile-content" layout="column"><div class="tile-header" layout="column"><div layout="row" layout-align="space-between"><h2 class="header-link light-text" (click)="$ctrl.triggerLinkToDepositsSection()"><span translate="nui.deposits.header"></span><prm-icon class="arrow-icon" icon-type="{{::$ctrl.accountIcons.arrowRightIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.arrowRightIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.arrowRightIcon.icon}}"></prm-icon></h2></div></div><md-list layout="column"><prm-spinner ng-if="$ctrl.inProgress" class="default-loader dark-on-light overlay-cover no-text" layout="row" layout-align="center center"></prm-spinner><md-list-item class="md-3-line" ng-repeat="deposit in $ctrl.depositsOverviewDisplay" ng-click="$ctrl.triggerLinkToDepositsSection(deposit.depositId)"><span class="item-index">{{$index + 1}}</span><div class="md-list-item-text" layout-fill><h3 ng-if="::deposit.firstLineLeft"><span>{{::deposit.firstLineLeft}}</span></h3><h4 ng-if="::deposit.secondLineLeft"><span>{{::deposit.secondLineLeft}}</span></h4><p class="no-wrap-line" ng-if="::deposit.firstLineRight" ng-class="{\'has-icon-on-left prm-positive\':deposit.isAlert}"><prm-icon ng-if="::deposit.isAlert" icon-type="{{::$ctrl.accountIcons.depositsAlertIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.depositsAlertIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.depositsAlertIcon.icon}}" aria-label="{{::(\'nui.aria.account.deposits.alert\' | translate)}}"></prm-icon><span>{{::deposit.firstLineRight}}</span></p><p ng-if="::deposit.secondLineRight" class="weak-text"><span translate="nui.deposits.updatedOn"></span> <span>{{::deposit.secondLineRight}}</span></p></div><div class="tile-item-arrow"><prm-icon icon-type="{{::$ctrl.accountIcons.arrowRightIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.arrowRightIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.arrowRightIcon.icon}}"></prm-icon></div></md-list-item></md-list><div ng-if="!$ctrl.numOfDeposits || $ctrl.numOfDeposits === \'0\'" ng-cloak class="message-with-icon" layout="column" layout-align="center center" layout-padding layout-margin><prm-icon class="giant-icon bg-icon" icon-type="{{$ctrl.accountIcons.sun.type}}" svg-icon-set="{{$ctrl.accountIcons.sun.iconSet}}" icon-definition="{{$ctrl.accountIcons.sun.icon}}"></prm-icon><div><span translate="nui.overview.nodeposits"></span></div></div><md-button class="button-with-icon prm-links overflow-visible" layout="row" layout-align="center center" ng-if="$ctrl.numOfDeposits > 3" (click)="$ctrl.triggerLinkToDepositsSection()" aria-label="View all"><span translate="nui.overview.deposits.viewall" translate-values="{placeholders:$ctrl.getViewAllPlaceHolder()}" translate-compile></span><prm-icon aria-label="arrow right" class="arrow-icon" icon-type="{{::$ctrl.accountIcons.arrowRightIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.arrowRightIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.arrowRightIcon.icon}}"></prm-icon></md-button></div></div><prm-deposits-overview-after parent-ctrl="$ctrl"></prm-deposits-overview-after>');
$templateCache.put('components/account/overview/finesOverview/fines-overview.html','<div class="tiles-grid-tile"><div class="tile-content" layout="column"><div class="tile-header" layout="column"><div layout="row" layout-align="space-between"><h2 class="header-link light-text" ng-click="$ctrl.triggerLinkToFinesSection()" tabindex="0"><span translate="nui.fines.header"></span><prm-icon class="arrow-icon" icon-type="{{$ctrl.accountIcons.arrowRightIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.arrowRightIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.arrowRightIcon.icon}}"></prm-icon></h2><md-button ng-if="$ctrl.payFinesLink" class="button-link" ng-href="{{$ctrl.payFinesLink}}" target="_blank" aria-label="Pay fines button"><span translate="fines.payfinelink"></span><prm-icon icon-type="{{$ctrl.accountIcons.externalLinkIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.externalLinkIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.externalLinkIcon.icon}}"></prm-icon></md-button></div><div layout="row" ng-if="$ctrl.finesBalance"><em><span translate="nui.fines.balance" translate-values="$ctrl.getFinesBalancePlaceHolder()"></span></em></div><div layout="row" ng-if="$ctrl.demeritsBalance"><em><span translate="nui.fines.demerits" translate-values="$ctrl.getDemeritsBalancePlaceHolder()"></span></em></div></div><md-list layout="column"><prm-spinner ng-if="$ctrl.inProgress" class="default-loader dark-on-light overlay-cover no-text" layout="row" layout-align="center center"></prm-spinner><md-list-item class="md-3-line" ng-repeat="fine in $ctrl.finesOverviewDisplay" ng-click="$ctrl.triggerLinkToFinesSection(fine.fineid)"><span class="item-index">{{$index + 1}}</span><div class="md-list-item-text"><h3 ng-if="fine.firstLineLeft" class="has-icon-on-left prm-warn"><div ng-if="fine.isAlert"><md-tooltip md-delay="400"><span translate="nui.fine.alert.tooltip"></span></md-tooltip><prm-icon icon-type="{{$ctrl.accountIcons.fineAlertIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.fineAlertIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.fineAlertIcon.icon}}"></prm-icon></div><span>{{fine.firstLineLeft}}</span></h3><h4 ng-if="fine.secondLineLeft"><span translate="nui.fine.brief.1"></span> <span>{{fine.secondLineLeft}}</span></h4><p ng-if="fine.firstLineRight" class="bold-text weak-text"><span>{{fine.firstLineRight}}</span></p><p ng-if="fine.secondLineRight" class="weak-text"><span translate="nui.fine.brief.2"></span> <span>{{fine.secondLineRight}}</span></p></div><div class="tile-item-arrow"><prm-icon aria-label="right arrow Icon" icon-type="{{$ctrl.accountIcons.arrowRightIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.arrowRightIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.arrowRightIcon.icon}}"></prm-icon></div></md-list-item></md-list><div ng-if="!$ctrl.numOfFines || $ctrl.numOfFines === 0" ng-cloak class="message-with-icon" layout="column" layout-align="center center" layout-padding layout-margin><prm-icon class="giant-icon bg-icon" icon-type="{{$ctrl.accountIcons.emoticonCool.type}}" svg-icon-set="{{$ctrl.accountIcons.emoticonCool.iconSet}}" icon-definition="{{$ctrl.accountIcons.emoticonCool.icon}}"></prm-icon><div><span translate="nui.overview.nofines"></span></div></div><md-button class="button-with-icon prm-links overflow-visible" layout="row" layout-align="center center" ng-if="$ctrl.numOfFines > 3" (click)="$ctrl.triggerLinkToFinesSection()" aria-label="view fines button"><span translate="nui.overview.fines.viewall" translate-values="$ctrl.getViewAllPlaceHolder()"></span><prm-icon aria-label="arrow right" class="arrow-icon" icon-type="{{$ctrl.accountIcons.arrowRightIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.arrowRightIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.arrowRightIcon.icon}}"></prm-icon></md-button></div></div><prm-fines-overview-after parent-ctrl="$ctrl"></prm-fines-overview-after>');
$templateCache.put('components/account/overview/messagesAndBlocksOverview/messages-and-blocks-overview.html','<div class="tiles-grid-tile"><div class="tile-content" layout="column"><div class="tile-header" layout="column"><div layout="row" layout-align="space-between"><h2 class="header-link light-text" ng-click="$ctrl.triggerLinkToMessagesSection()" tabindex="0"><span translate="nui.blocks.header"></span><prm-icon class="arrow-icon" icon-type="{{$ctrl.accountIcons.arrowRightIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.arrowRightIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.arrowRightIcon.icon}}"></prm-icon></h2></div></div><md-list layout="column"><prm-spinner ng-if="$ctrl.inProgress" class="default-loader dark-on-light overlay-cover no-text" layout="row" layout-align="center center"></prm-spinner><md-list-item class="md-3-line" ng-repeat="message in $ctrl.messagesOverviewDisplay" ng-click="$ctrl.triggerLinkToMessagesSection()"><span class="item-index">{{$index + 1}}</span><div class="md-list-item-text"><h3 ng-if="message.ilsinstitutionname" class="no-wrap-line"><span>{{message.ilsinstitutionname}}</span></h3><h4 ng-if="message.text" class="no-wrap-line"><span>{{message.text}}</span></h4></div><div class="tile-item-arrow"><prm-icon icon-type="{{$ctrl.accountIcons.arrowRightIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.arrowRightIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.arrowRightIcon.icon}}"></prm-icon></div></md-list-item></md-list><div ng-if="$ctrl.numOfMessages === 0" ng-cloak layout="column" layout-align="center center" layout-padding layout-margin><prm-icon class="giant-icon bg-icon" icon-type="{{$ctrl.accountIcons.beach.type}}" svg-icon-set="{{$ctrl.accountIcons.beach.iconSet}}" icon-definition="{{$ctrl.accountIcons.beach.icon}}"></prm-icon><div><span translate="nui.overview.noblocks"></span></div></div><md-button class="button-with-icon prm-links overflow-visible" layout="row" layout-align="center center" ng-if="$ctrl.numOfMessages > 3" (click)="$ctrl.triggerLinkToMessagesSection()" aria-label="view all messages button"><span translate="nui.overview.blocks.viewall" translate-values="$ctrl.getViewAllPlaceHolder()"></span><prm-icon class="arrow-icon" icon-type="{{$ctrl.accountIcons.arrowRightIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.arrowRightIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.arrowRightIcon.icon}}"></prm-icon></md-button></div></div><prm-messages-and-blocks-overview-after parent-ctrl="$ctrl"></prm-messages-and-blocks-overview-after>');
$templateCache.put('components/account/overview/loansOverview/loans-overview.html','<div class="tiles-grid-tile"><div class="tile-content" layout="column"><div class="tile-header" layout="column"><div layout="row" layout-align="space-between"><h2 class="header-link light-text" ng-click="$ctrl.triggerLinkToLoansSection()" tabindex="0"><span translate="nui.loans.header"></span><prm-icon class="arrow-icon" icon-type="{{$ctrl.accountIcons.arrowRightIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.arrowRightIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.arrowRightIcon.icon}}"></prm-icon></h2><md-button ng-if="$ctrl.hasRenewableLoans()" class="button-link" (click)="$ctrl.triggerLinkToLoansSection(); $ctrl.renewAllLoans()" aria-label="{{::(\'nui.loans.renewall\' | translate)}}"><prm-icon class="h-flipped" icon-type="{{$ctrl.accountIcons.renewLoanIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.renewLoanIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.renewLoanIcon.icon}}" aria-label="{{::(\'nui.loans.renewall\' | translate)}}"></prm-icon><span translate="nui.loans.renewall"></span></md-button></div></div><md-list layout="column"><prm-spinner ng-if="$ctrl.inProgress" class="default-loader dark-on-light overlay-cover no-text" layout="row" layout-align="center center"></prm-spinner><md-list-item class="md-3-line" ng-repeat="item in $ctrl.loansOverviewDisplay" ng-click="$ctrl.triggerLinkToLoansSection(item.loanid)"><span class="item-index">{{$index + 1}}</span><div class="md-list-item-text"><h3 ng-if="item.title">{{item.title}}</h3><h4 class="loans-brief-display" ng-if="item.getBriefDisplayLine(1)"><span translate="nui.loan.brief.1"></span> {{item.getBriefDisplayLine(1)}}</h4><p class="no-wrap-line" ng-class="{\'has-icon-on-left prm-warn\': item.isDueAlert()}" ng-if="item.isActiveLoan()"><prm-icon ng-if="item.isDueAlert()" aria-label="Due alert icon" icon-type="{{$ctrl.accountIcons.timerIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.timerIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.timerIcon.icon}}"></prm-icon><span translate="{{item.getCodeAlert()}}"></span>: <span>{{item.getDateForBriefDisplay()}}</span></p><p class="normal-text loans-brief-display no-wrap-line weak-text"><span translate="nui.loan.brief.2"></span> {{item.getBriefDisplayLine(2)}}</p></div><div ng-if="!item.isActiveLoan()"><span translate="loans.return_date"></span>: <span>{{item.getDateForBriefDisplay()}}</span></div><div class="tile-item-arrow"><prm-icon aria-label="right arrow Icon" icon-type="{{$ctrl.accountIcons.arrowRightIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.arrowRightIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.arrowRightIcon.icon}}"></prm-icon></div></md-list-item></md-list><div ng-if="!$ctrl.numOfLoans || $ctrl.numOfLoans === \'0\'" ng-cloak class="message-with-icon" layout="column" layout-align="center center" layout-padding layout-margin><prm-icon class="giant-icon bg-icon" icon-type="{{$ctrl.accountIcons.beer.type}}" svg-icon-set="{{$ctrl.accountIcons.beer.iconSet}}" icon-definition="{{$ctrl.accountIcons.beer.icon}}"></prm-icon><div><span translate="nui.overview.noloans"></span></div></div><md-button class="button-with-icon overflow-visible" layout="row" layout-align="center center" ng-if="$ctrl.numOfLoans > 3" (click)="$ctrl.triggerLinkToLoansSection()" aria-label="view all loans button"><span translate="nui.overview.loans.viewall" translate-values="$ctrl.getViewAllPlaceHolder()"></span><prm-icon aria-label="arrow right" class="arrow-icon" icon-type="{{$ctrl.accountIcons.arrowRightIcon.type}}" svg-icon-set="{{$ctrl.accountIcons.arrowRightIcon.iconSet}}" icon-definition="{{$ctrl.accountIcons.arrowRightIcon.icon}}"></prm-icon></md-button></div></div><prm-loans-overview-after parent-ctrl="$ctrl"></prm-loans-overview-after>');
$templateCache.put('components/account/overview/requestsOverview/requests-overview.html','<div class="tiles-grid-tile"><div class="tile-content" layout="column"><div class="tile-header" layout="column"><div layout="row" layout-align="space-between"><h2 class="header-link light-text" ng-click="$ctrl.triggerLinkToRequestsSection()" tabindex="0"><span translate="nui.requests.header"></span><prm-icon class="arrow-icon" icon-type="{{::$ctrl.accountIcons.arrowRightIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.arrowRightIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.arrowRightIcon.icon}}"></prm-icon></h2></div></div><md-list layout="column"><prm-spinner ng-if="$ctrl.inProgress" class="default-loader dark-on-light overlay-cover no-text" layout="row" layout-align="center center"></prm-spinner><md-list-item class="md-3-line" ng-repeat="request in $ctrl.requestsOverviewDisplay" ng-click="$ctrl.triggerLinkToRequestsSection(request.requestId)" class="display-block"><span class="item-index">{{$index + 1}}</span><div class="md-list-item-text" layout-fill><h3 ng-if="::request.firstLineLeft"><span>{{::request.firstLineLeft}}</span></h3><h4 ng-if="::request.secondLineLeft"><span translate="nui.request.brief.1"></span> <span>{{::request.secondLineLeft}}</span></h4><p class="no-wrap-line" ng-if="::request.firstLineRight" ng-class="{\'has-icon-on-left prm-positive\':request.isAlert}"><prm-icon ng-if="::request.isAlert" icon-type="{{::$ctrl.accountIcons.requestsAlertIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.requestsAlertIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.requestsAlertIcon.icon}}" aria-label="{{::(\'nui.aria.account.requests.alert\' | translate)}}"></prm-icon><span class="text-uppercase" translate="{{::(\'request.\'+request.requestType+\'.request_type\')}}"></span>. <span>{{::request.firstLineRight}}</span></p><p ng-if="::request.secondLineRight" class="weak-text"><span translate="nui.request.brief.2"></span> <span>{{::request.secondLineRight}}</span></p></div><div class="tile-item-arrow"><prm-icon icon-type="{{::$ctrl.accountIcons.arrowRightIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.arrowRightIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.arrowRightIcon.icon}}"></prm-icon></div></md-list-item></md-list><div ng-if="!$ctrl.numOfRequests || $ctrl.numOfRequests === \'0\'" ng-cloak class="message-with-icon" layout="column" layout-align="center center" layout-padding layout-margin><prm-icon class="giant-icon bg-icon" icon-type="{{$ctrl.accountIcons.sun.type}}" svg-icon-set="{{$ctrl.accountIcons.sun.iconSet}}" icon-definition="{{$ctrl.accountIcons.sun.icon}}"></prm-icon><div><span translate="nui.overview.norequests"></span></div></div><md-button class="button-with-icon prm-links overflow-visible" layout="row" layout-align="center center" ng-if="$ctrl.numOfRequests > 3" (click)="$ctrl.triggerLinkToRequestsSection()" aria-label="View all"><span translate="nui.overview.requests.viewall" translate-values="$ctrl.getViewAllPlaceHolder()"></span><prm-icon aria-label="arrow right" class="arrow-icon" icon-type="{{::$ctrl.accountIcons.arrowRightIcon.type}}" svg-icon-set="{{::$ctrl.accountIcons.arrowRightIcon.iconSet}}" icon-definition="{{::$ctrl.accountIcons.arrowRightIcon.icon}}"></prm-icon></md-button></div></div><prm-requests-overview-after parent-ctrl="$ctrl"></prm-requests-overview-after>');
$templateCache.put('components/collectionDiscovery/collectionGallery/collectionDiscoveryViewSwitcher/collection-discovery-view-switcher.html','<span class="margin-right-small">{{\'nui.colldiscovery.view\' | translate}}</span><md-button class="md-icon-button zero-margin" style="top: -8px;font-style: normal" ng-click="$ctrl.setResultsViewStyle(\'grid\')" ng-class="{\'is-active\': $ctrl.resultsViewStyle === \'grid\'}"><md-tooltip><span>{{\'nui.colldiscovery.view.grid.tooltip\' | translate}}</span></md-tooltip><prm-icon availability-type icon-type="{{::$ctrl.collectionDiscoveryIcons.gridViewIcon.type}}" svg-icon-set="{{::$ctrl.collectionDiscoveryIcons.gridViewIcon.iconSet}}" icon-definition="{{::$ctrl.collectionDiscoveryIcons.gridViewIcon.icon}}"></prm-icon></md-button><md-button class="md-icon-button zero-margin" style="top: -8px;font-style: normal" ng-click="$ctrl.setResultsViewStyle(\'gallery\')" ng-class="{\'is-active\': $ctrl.resultsViewStyle === \'gallery\'}"><md-tooltip><span>{{\'nui.colldiscovery.view.gallery.tooltip\' | translate}}</span></md-tooltip><prm-icon availability-type icon-type="{{::$ctrl.collectionDiscoveryIcons.GalleryViewIcon.type}}" svg-icon-set="{{::$ctrl.collectionDiscoveryIcons.GalleryViewIcon.iconSet}}" icon-definition="{{::$ctrl.collectionDiscoveryIcons.GalleryViewIcon.icon}}"></prm-icon></md-button><prm-collection-discovery-view-switcher-after parent-ctrl="$ctrl"></prm-collection-discovery-view-switcher-after>');
$templateCache.put('components/collectionDiscovery/collectionGallery/galleryCollectionsList/gallery-collections-list.html','<div layout="column" class="is-gallery-view" style="margin-top: 10px"><div class="padding-left-small margin-bottom-medium" ng-if="true" layout="row" layout-align="start center"><h2 ng-if="!$ctrl.isGalleryLobby" class="margin-zero">{{\'nui.colldiscovery.subcollections.title\' | translate}}</h2><h2 ng-if="$ctrl.isGalleryLobby" class="margin-zero">{{\'nui.colldiscovery.collections.title\' | translate}}</h2><span class="results-count text-italic margin-left-medium" style="position: relative; top: .2em" ng-if="$ctrl.collections.length > 0 && $ctrl.isGalleryLobby">{{\'nui.colldiscovery.lobby.no.collections\' | translate: {\'idx_1\': $ctrl.collections.length} }} </span><span class="results-count text-italic margin-left-medium" style="position: relative; top: .2em" ng-if="$ctrl.collections.length > 0 && !$ctrl.isGalleryLobby">{{\'nui.colldiscovery.lobby.no.subcollections\' | translate: {\'idx_1\': $ctrl.collections.length} }}</span></div><div layout="row" class="margin-bottom-small" flex ng-if="true" layout-wrap><prm-gallery-collection ng-repeat="collection in $ctrl.collections" [collection]="collection" [next-path]="::$ctrl.nextPath" [index]="::1 + $index" [total-collections]="::$ctrl.collections.length" [is-gallery-lobby]="$ctrl.isGalleryLobby" ng-class="{\'ie-gallery-collection\': $ctrl.isIE}"></prm-gallery-collection></div></div><prm-gallery-collections-list-after parent-ctrl="$ctrl"></prm-gallery-collections-list-after>');
$templateCache.put('components/collectionDiscovery/collectionGallery/galleryItemsList/gallery-items-list.html','<div layout="column" ng-if="$ctrl.itemsList.length > 0"><div class="padding-left-small margin-bottom-medium" ng-if="::$ctrl.itemsList" layout="row" layout-align="start center"><h2 class="margin-zero">{{\'nui.colldiscovery.items.title\' | translate}}</h2><span class="text-italic margin-left-medium" style="position: relative; top: .2em">{{\'nui.colldiscovery.lobby.no.items\' | translate: {\'idx_1\': $ctrl.totalItems} }} </span><span flex></span><prm-collection-discovery-view-switcher style="height: 19px; margin-left: 1em; margin-right: 15px; font-style: normal" layout="row"></prm-collection-discovery-view-switcher></div><div layout="row"><div deckgrid source="$ctrl.itemsList" class="is-gallery-view" ng-if="$ctrl.itemsViewStyle === \'gallery\'"><prm-gallery-item [item]="::card" [index]="::1 + card.$index" [total-items]="::mother.$ctrl.totalItems"></prm-gallery-item></div><div class="is-grid-view" ng-if="$ctrl.itemsViewStyle === \'grid\'" layout="row" layout-wrap><prm-gallery-item ng-repeat="item in $ctrl.itemsList" [item]="item" [index]="::1 + $index" [total-items]="::$ctrl.totalItems"></prm-gallery-item></div></div><div layout="row" layout-align="center center" ng-hide="$ctrl.searchInProgress" class="padding-top-large"><md-button ng-if="$ctrl.hasNextResults" (click)="$ctrl.getMoreResults()" translate="nui.brief.results.loadMore" class="button-confirm button-large"></md-button></div><prm-spinner ng-if="$ctrl.searchInProgress" class="half-transparent no-text bottom-loader" layout="row" layout-align="center end" layout-margin></prm-spinner></div><prm-gallery-items-list-after parent-ctrl="$ctrl"></prm-gallery-items-list-after>');
$templateCache.put('components/collectionDiscovery/collectionNavigationBreadcrumbs/collectionNavigationBreadcrumbsItem/collection-navigation-breadcrumbs-item.html','<md-button class="button-as-link link-alt-color" href ng-click="vm.handleNavClick(collection)" ng-class="{\'button-with-icon\': $ctrl.isRootObject}" ui-state="$ctrl.COLLECTION_DISCOVERY_STATE" ui-state-params="$ctrl.breadcrumbStateParams" ui-sref-opts="{reload: true, inherit:false, }"><prm-icon ng-if="::$ctrl.isRootObject" icon-type="{{::$ctrl.collectionDiscoveryIcons.HeaderHomeIcon.type}}" svg-icon-set="{{::$ctrl.collectionDiscoveryIcons.HeaderHomeIcon.iconSet}}" icon-definition="{{::$ctrl.collectionDiscoveryIcons.HeaderHomeIcon.icon}}"></prm-icon><span>{{::$ctrl.title}}</span></md-button><md-divider class="skewed-divider"></md-divider><prm-collection-navigation-breadcrumbs-item-after parent-ctrl="$ctrl"></prm-collection-navigation-breadcrumbs-item-after>');
$templateCache.put('components/favorites/favoritesToolBar/saved-searches-group-actions/saved-searches-group-actions.html','<div layout="row"><div ng-if="!$ctrl.showSearchHistoryActions()" class="toolbar-item animate-enter-leave-scale-bounce staggered"><md-button class="md-icon-button unpin-button" (click)="$ctrl.removeSelectedSearches()"><md-tooltip md-delay="400"><span translate="nui.favorites.search.unpin.multiple.tooltip"></span></md-tooltip><prm-icon ng-if="!item.alert" icon-type="svg" svg-icon-set="primo-ui" icon-definition="prm_unpin" aria-label="unpin" class="custom-button" ng-class="{\'disabledFavTool\':$ctrl.disable()}"></prm-icon></md-button></div><div ng-if="$ctrl.isLoggedIn() && $ctrl.showSearchHistoryActions()" class="toolbar-item animate-enter-leave-scale-bounce staggered"><md-button class="md-icon-button" (click)="$ctrl.saveSelectedSearchHistoryItemsToSavedSearches()"><md-tooltip md-delay="400"><span translate="nui.favorites.search.save.single.tooltip"></span></md-tooltip><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="prm_pin" aria-label="Remove" class="custom-button" ng-class="{\'disabledFavTool\':$ctrl.disable()}"></prm-icon></md-button></div><div ng-if="$ctrl.isLoggedIn() && $ctrl.showSearchHistoryActions()" class="toolbar-item animate-enter-leave-scale-bounce staggered"><md-button class="md-icon-button" (click)="$ctrl.removeSelectedSearchHistoryItemFromSavedSearches()"><md-tooltip md-delay="400"><span translate="nui.favorites.search.unpin.single.tooltip"></span></md-tooltip><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="prm_unpin" aria-label="Remove" class="custom-button" ng-class="{\'disabledFavTool\':$ctrl.disable()}"></prm-icon></md-button></div><div ng-if="$ctrl.showSearchHistoryActions()" class="toolbar-item animate-enter-leave-scale-bounce staggered"><md-button class="md-icon-button" (click)="$ctrl.removeSearchHistorySelectedItems()"><md-tooltip md-delay="400"><span translate="nui.favorites.search.remove.single.tooltip"></span></md-tooltip><prm-icon icon-type="svg" svg-icon-set="action" icon-definition="ic_delete_24px" aria-label="Remove" class="custom-button" ng-class="{\'disabledFavTool\':$ctrl.disable()}"></prm-icon></md-button></div></div><prm-saved-searches-group-actions-after parent-ctrl="$ctrl"></prm-saved-searches-group-actions-after>');
$templateCache.put('components/infra/dataStructures/model/model.html','<md-toolbar class="md-primay"><div class="md-toolbar-tools" layout="row" layout-align="space-between center" layout-padding><md-switch ng-model="$ctrl.active" aria-label="Switch Model Debug Mode on/off">Model Debug Mode: {{ $ctrl.active}}</md-switch><span flex></span><h2><span>Primo Model</span></h2><span flex></span></div></md-toolbar><header layout="column" class="topbar-wrapper"></header><md-content layout="row" class="padded-container" layout-align="center start"><div class="main" layout="row" flex><div flex="0" flex-gt-sm="5" flex-gt-md="10" flex-gt-lg="20"></div><div flex><md-tabs md-dynamic-height md-border-bottom ng-if="$ctrl.active"><md-tab ng-repeat="(key, val) in ($ctrl.model)" label="{{key}}"><md-content class="md-padding"><h1 class="md-display-2">{{key}}</h1><md-card><md-card-content><textarea style="height:100em;width: 100%" ng-if="!$ctrl.isJsonArray(val)">{{::($ctrl.beautifyJson(val))}}</textarea></md-card-content></md-card><md-card ng-if="$ctrl.isJsonArray(val)" ng-repeat="item in val"><md-card-title>Batch {{::($index +1)}}</md-card-title><md-card-content><textarea style="height:100em;width: 100%">\r\n                            {{::($ctrl.beautifyJson(item))}}</textarea></md-card-content></md-card></md-content></md-tab></md-tabs></div><div class="sidebar" flex-gt-sm="25" flex-gt-lg="20" class="sidebar" layout="row"></div><div flex="0" flex-gt-sm="5" flex-gt-lg="10"></div></div></md-content>');
$templateCache.put('components/infra/deposit/uploadFile/upload-file.html','<div ng-show="badFormat" class="Error">File fomrat not supported!</div><div class="form-group" ng-show="$ctrl.mode == \'hover\' || !$ctrl.filename"><div class="input-row" class="FullWidth"><div class="file-drop-zone-wrapper"><div class="input-message warning-inverse" ng-if="fileFailed && !f.upload.aborted">{{\'file.upload.error.message\' | translate}}</div><div class="input-message warning-inverse" ng-if="fileTooLarge && !f.upload.aborted">{{\'file.upload.error.too.large\' | translate:{size:$ctrl.formatBytes($ctrl.userMaxFileSize)} }}</div><div ngf-drop="$ctrl.upload()" ngf-select="$ctrl.upload()" ngf-drop-disabled="disabled && $ctrl.mode == \'hover\'" ngf-select-disabled="$ctrl.mode == \'hover\'" ng-model="$ctrl.files" class="file-drop-zone" id="dragAndDropBtn" ngf-drag-over-class="{accept:\'dragover\', reject:\'dragover-err\', delay:100}" ng-model-rejected="rejFiles" ngf-multiple="true" ngf-allow-dir="true" accept="{{$ctrl.filesFormat}}" ngf-accept="$ctrl.filesFormat"><span ng-if="$ctrl.mode != \'hover\'"><span class="guidance-text-out">{{\'nui.deposit.dragFiles\' | translate}}<br><span class="small">{{\'nui.deposit.browseFiles\' | translate}}</span> </span><span class="guidance-text-on">{{\'nui.deposit.dropIt\' | translate}}</span></span></div></div></div></div>');
$templateCache.put('components/infra/widgets/alerts/alert-bar.html','<div ng-if="$ctrl.htmlMsg" role="alert" layout-align="center center" ng-include src="$ctrl.templateSrc"></div>');
$templateCache.put('components/infra/formBuilder/field/form-field-checkbox.html','<md-input-container><label for="prm_{{$ctrl.field.label}}" translate="{{$ctrl.field.label}}"></label><md-checkbox ng-repeat="option in $ctrl.field.options" aria-label="{{option.label}}" ng-change="$ctrl.field.events.onChange($ctrl.field.events.params)" ng-true-value="\'Yes\'" ng-model="$ctrl.formData[$ctrl.field.name]"><span translate="{{option.label}}"></span></md-checkbox></md-input-container>');
$templateCache.put('components/infra/formBuilder/field/form-field-date-dropdown.html','<div ng-if="$ctrl.delayForLabels" layout="row"><md-input-container class="underlined-input"><label translate="search-advanced.DateRange.label.Year"></label><input type="text" ng-model="$ctrl.formData[$ctrl.field.name].year" ng-model-options="{allowInvalid: true}" maxlength="4" size="4" ng-pattern="$ctrl.yearRegex"/><div ng-messages="$ctrl.form.$error" style="color:tomato"><div ng-message="pattern"><span translate="search.search.error.yearInvalidCharacters"></span></div></div></md-input-container><md-input-container class="underlined-input"><label translate="search-advanced.drStartMonth.option.start_month"></label><md-select ng-model="$ctrl.formData[$ctrl.field.name].month"><md-option ng-repeat="month in $ctrl.months" ng-value="month"><span>{{month}}</span></md-option></md-select></md-input-container><md-input-container class="underlined-input" ng-class="{\'md-required\':$ctrl.field.mandatory}"><label translate="search-advanced.drStartDay.option.start_day"></label><md-select ng-model="$ctrl.formData[$ctrl.field.name].day"><md-option ng-repeat="day in $ctrl.days" ng-value="day"><span>{{day}}</span></md-option></md-select></md-input-container></div>');
$templateCache.put('components/infra/formBuilder/field/form-field-date.html','<label for="prm_{{$ctrl.field.label}}" translate="{{$ctrl.field.label}}"></label><div class="service-form-item" layout="column"><md-tooltip>{{\'nui.datePicker.tooltip\' | translate}}</md-tooltip><md-datepicker ng-model="$ctrl.formData[$ctrl.field.name]" name="{{$ctrl.field.name}}" md-placeholder="Pickup date" md-date-filter="$ctrl.filterDates" ng-change="$ctrl.field.events.onChange($ctrl.field.events.params)" ng-required="$ctrl.field.mandatory" md-min-date="$ctrl.field.minDate"></md-datepicker><md-input-container><div ng-messages="$ctrl.form[$ctrl.field.name].$error" class="validation-messages" ng-if="$ctrl.form.$submitted || $ctrl.form[$ctrl.field.name].$touched"><div ng-message="required"><span translate="nui.mandatory.shortloan.slot"></span></div><div ng-message="valid"><span translate="nui.valid.date"></span></div><div ng-message="mindate"><span translate="nui.valid.date.early"></span></div></div></md-input-container></div>');
$templateCache.put('components/infra/formBuilder/field/form-field-datetime.html','<md-input-container ng-class="{\'md-required\':($ctrl.field.mandatory || $ctrl.field.mandatoryIndicator)}"><label for="prm_{{$ctrl.field.label}}" translate="{{$ctrl.field.label}}"></label><input ng-model="$ctrl.formData[$ctrl.field.name]" type="datetime-local" name="{{$ctrl.field.name}}" ng-required="$ctrl.field.mandatory" ng-disabled="$ctrl.field.disabled" name="{{$ctrl.field.name}}" value="{{$ctrl.getCurrentDate()}}" min="{{$ctrl.getCurrentDate()}}"/><div ng-messages="$ctrl.form[$ctrl.field.name].$error" style="color:maroon" class="help-block" ng-if="$ctrl.form[$ctrl.field.name].$touched  || $ctrl.form[$ctrl.field.name].$dirty"><div ng-message="required"><span translate="nui.mandatory.text" translate-values="$ctrl.errorMsgPlaceholders" translate-compile></span></div></div></md-input-container>');
$templateCache.put('components/infra/formBuilder/field/form-field-dropdown.html','<prm-icon ng-if="$ctrl.field.disabled" icon-type="svg" svg-icon-set="primo-ui" icon-definition="lock"></prm-icon><md-input-container class="underlined-input" ng-class="{\'md-required\':($ctrl.field.mandatory || $ctrl.field.mandatoryIndicator)}"><label for="prm_{{$ctrl.field.label}}" translate="{{$ctrl.field.label}}"></label><md-select ng-model="$ctrl.formData[$ctrl.field.name]" ng-change="$ctrl.field.events.onChange($ctrl.field.events.params)" aria-label="{{$ctrl.field.label}}" ng-required="$ctrl.field.mandatory" ng-disabled="$ctrl.field.disabled" name="{{$ctrl.field.name}}"><md-option ng-repeat="option in $ctrl.field.options" value="{{option.value}}" ng-if="!$ctrl.field.populator.params.byCategory || !$ctrl.getCatagories() ||  $ctrl.getCatagories().length===0"><span>{{option.label}}</span></md-option><md-optgroup ng-if="$ctrl.field.populator.params.byCategory" ng-repeat="category in $ctrl.getCatagories()" label="{{category}}"><md-option ng-repeat="option in $ctrl.field.options | filter: {category: category }" ng-value="{{option.value}}"><span>{{option.label}}</span></md-option></md-optgroup></md-select><div ng-messages="$ctrl.form[$ctrl.field.name].$error" ng-messages-multiple class="help-block" ng-if="$ctrl.form.$submitted || $ctrl.form[$ctrl.field.name].$touched  || $ctrl.form[$ctrl.field.name].$dirty"><div ng-message="required"><span translate="nui.mandatory.drop-down" translate-values="$ctrl.errorMsgPlaceholders" translate-compile></span></div></div></md-input-container><prm-icon ng-if="$ctrl.field.disabled" class="animate-enter-leave-scale"><md-tooltip md-direction="right" md-autohide="true" ng-if="$ctrl.field.disabled">Reset request form to edit category</md-tooltip><md-icon md-svg-icon="./images/lock-outline.svg" aria-label="Lock Icon"></md-icon></prm-icon>');
$templateCache.put('components/infra/formBuilder/field/form-field-hidden.html','');
$templateCache.put('components/infra/formBuilder/field/form-field-label.html','<div class="label-dummy" flex-order="1" translate="{{$ctrl.field.label}}"></div><div layout="row" flex-order="2"><div layout="row"><span>{{$ctrl.field.value}}</span> <span class="md-select-icon-dummy md-select-icon" aria-hidden="true"></span></div></div>');
$templateCache.put('components/infra/formBuilder/field/form-field-link.html','<span><a href="{{$ctrl.formData[$ctrl.field.name]}}" target="_blank"><span translate="{{$ctrl.field.label}}"></span></a></span>');
$templateCache.put('components/infra/formBuilder/field/form-field-multi-label.html','<div class="label-dummy" flex-order="1" translate="{{field.label}}"></div><div ng-repeat="option in $ctrl.field.options" layout="row" flex-order="2"><div layout="row"><span>{{option.label}}</span> <span class="md-select-icon-dummy md-select-icon" aria-hidden="true"></span></div></div>');
$templateCache.put('components/infra/formBuilder/field/form-field-readonly.html','<md-input-container><label for="prm_{{$ctrl.field.label}}" translate="{{$ctrl.field.label}}"></label><input ng-model="$ctrl.formData[$ctrl.field.name]" type="text" name="{{$ctrl.field.name}}" ng-required="$ctrl.field.mandatory"><div ng-messages="requestForm[$ctrl.field.name].$error" role="alert"><div ng-message="required">You did not enter a field</div></div></md-input-container>');
$templateCache.put('components/infra/formBuilder/field/form-field-text.html','<md-input-container class="underlined-input" ng-class="{\'md-required\':$ctrl.field.mandatory}"><label translate="{{$ctrl.field.label}}"></label><input ng-model="$ctrl.formData[$ctrl.field.name]" type="{{$ctrl.field.inputType? $ctrl.field.inputType : \'text\'}}" name="{{$ctrl.field.name}}" ng-required="$ctrl.field.mandatory" ng-disabled="$ctrl.field.disabled" name="{{$ctrl.field.name}}" maxlength="{{$ctrl.field.maxlength}}" ng-pattern="{{$ctrl.field.validPattern}}"/><div ng-messages="$ctrl.form[$ctrl.field.name].$error" class="help-block" ng-messages-multiple><div ng-message="required"><span translate="nui.mandatory.text" translate-values="$ctrl.errorMsgPlaceholders" translate-compile></span></div><div ng-message="pattern"><span translate="nui.validPattern.invalid"></span></div></div></md-input-container>');
$templateCache.put('components/infra/formBuilder/field/form-field-textarea.html','<md-input-container ng-if="requestType == \'Call slip\'"><label for="prm_{{$ctrl.field.label}}" translate="{{$ctrl.field.label}}"></label><textarea ng-model="$ctrl.formData[$ctrl.field.name]" columns="1"></textarea></md-input-container>');
$templateCache.put('components/infra/formBuilder/field/form-field.html','<div ng-include src="$ctrl.getFormFieldHtml()"></div>');
$templateCache.put('components/search/actions/actionContainer/action-container.html','<prm-send-email ng-if="($ctrl.actionName===\'E-mail\')" (finished-email-event)="$ctrl.throwCloseTabsEvent()" [item]="::$ctrl.item" [toggleform]="::$ctrl.toggleActionCotent" [user]="::\'\'"></prm-send-email><prm-citation ng-if="($ctrl.actionName===\'Citation\')" [item]="::$ctrl.item"></prm-citation><prm-permalink ng-if="($ctrl.actionName===\'Permalink\')" [item]="::$ctrl.item"></prm-permalink><prm-print-item ng-if="($ctrl.actionName===\'Print\')" (close-tabs-event)="$ctrl.throwCloseTabsEvent()" [item]="::$ctrl.item"></prm-print-item><prm-endnote ng-if="($ctrl.actionName===\'EndNote\')" (close-tabs-event)="$ctrl.throwCloseTabsEvent()" [item]="::$ctrl.item"></prm-endnote><prm-easybib ng-if="($ctrl.actionName===\'EasyBib\')" (close-tabs-event)="$ctrl.throwCloseTabsEvent()" [item]="::$ctrl.item"></prm-easybib><prm-refworks ng-if="($ctrl.actionName===\'RefWorks\')" (close-tabs-event)="$ctrl.throwCloseTabsEvent()" [item]="::$ctrl.item"></prm-refworks><prm-export-ris ng-if="($ctrl.actionName===\'RISPushTo\')" [item]="::$ctrl.item"></prm-export-ris><prm-export-bibtex ng-if="($ctrl.actionName===\'BibTeXPushTo\')" [item]="::$ctrl.item"></prm-export-bibtex><prm-leganto ng-if="($ctrl.actionName===\'Leganto\')" (finished-leganto-event)="$ctrl.throwCloseTabsEvent()" [item]="::$ctrl.item" [on-toggle]="::$ctrl.onToggle"></prm-leganto><prm-mendeley ng-if="($ctrl.actionName===\'Mendeley\')" (close-tabs-event)="$ctrl.throwCloseTabsEvent()" [item]="::$ctrl.item"></prm-mendeley><prm-action-container-after parent-ctrl="$ctrl"></prm-action-container-after>');
$templateCache.put('components/search/actions/citation/citation.html','<div class="send-actions-content-item"><md-content><div layout="row" ng-class="\'layout-\'+$ctrl.layoutPos"><md-nav-bar md-selected-nav-item="$ctrl.selectedStyle" class="vertical-nav-bar" flex="nogrow"><md-nav-item ng-repeat="style in ::$ctrl.getStyles()" md-nav-click="$ctrl.getCitation(style)" name="{{style}}"><span translate="citation.labels.{{::style}}" class="text-no-case"></span></md-nav-item></md-nav-bar><div data-tab-pane="cite" flex><div layout="column" layout-padding layout-align="start center"><div class="form-focus" layout-padding layout="row" layout-align="center center"><div ng-if="$ctrl.inProgress" layout="row" layout-align="center center" layout-padding layout-margin><span translate="nui.citation.labels.inprogress"></span><prm-spinner class="inline-loader dark-on-light" layout="row" layout-align="start center"></prm-spinner></div><div id="{{::$ctrl.getCitationId()}}" ng-if="!$ctrl.inProgress && !$ctrl.isError" ng-bind-html="$ctrl.lastCitation"></div><div ng-if="!$ctrl.inProgress && $ctrl.isError" layout="row" layout-align="center">{{\'nui.citation.error\' | translate}}</div></div><prm-copy-clipboard-btn ng-if="::$ctrl.displayCopyButton()" ng-hide="$ctrl.inProgress || $ctrl.isError" class="zero-padding-top" (click)="$ctrl.selectText()" [text]="$ctrl.lastCitationDecoded()" action="citation"></prm-copy-clipboard-btn><span class="zero-padding-top bold-text">{{\'citation.labels.disclaimer\' | translate}}</span></div></div></div></md-content></div><prm-citation-after parent-ctrl="$ctrl"></prm-citation-after>');
$templateCache.put('components/search/actions/easyBibAction/easybib.html','<prm-easybib-after parent-ctrl="$ctrl"></prm-easybib-after>');
$templateCache.put('components/search/actions/endNoteAction/endnote.html','<prm-endnote-after parent-ctrl="$ctrl"></prm-endnote-after>');
$templateCache.put('components/search/actions/exportBibTexAction/export-bibtex.html','<div class="send-actions-content-item" layout="row" layout-align="center center"><md-content layout-wrap layout-padding layout-fill><form name="" novalidate layout="column" layout-align="center center"><div layout="row" class="layout-full-width" layout-align="center center"><div flex="20" flex-sm="10" hide-xs></div><div class="form-focus service-form" layout-padding><md-input-container><label>{{\'fulldisplay.command.pushto.option.RISPushTo.encoding\' | translate}}</label><md-select ng-model="$ctrl.encodingVal" class="form-control" aria-label="encoding"><md-option ng-repeat="option in ::$ctrl.encodingList track by option" value="{{::option}}"><span translate="{{::option}}"></span></md-option></md-select></md-input-container></div><div flex="20" flex-sm="10" hide-xs></div></div><div layout="row"><div layout="row" layout-align="center" layout-fill><md-button type="submit" class="button-with-icon button-large button-confirm" aria-label="{{\'fulldisplay.command.pushto.option.RISPushTo.importToCitationManager\' | translate}}" (click)="$ctrl.getFile()"><span translate="fulldisplay.command.pushto.option.RISPushTo.download"></span></md-button></div></div></form></md-content></div><prm-export-bibtex-after parent-ctrl="$ctrl"></prm-export-bibtex-after>');
$templateCache.put('components/infra/widgets/breadcrumbs/breadcrumbs.html','<md-toolbar><div class="default-toolbar" layout="row" ng-hide="citationLimit == 0"><div class="md-toolbar-tools"><div flex-gt-sm="15" flex-md="10" flex-gt-lg="20" hide-xs hide-sm></div><md-button class="back-button offset-to-left" aria-label="back to search results" ng-click="refreshPage()"><prm-icon aria-label="{{\'nui.favorites.goFavorites.tooltip\' | translate}}" class="" icon-type="svg" svg-icon-set="primo-ui" icon-definition="citationBack"></prm-icon></md-button><md-divider class="toolbar-divider visible"></md-divider><span class="md-headline">Your Current Citation Path</span><md-button class="save-path-btn"><prm-icon aria-label="{{\'nui.favorites.goFavorites.tooltip\' | translate}}" class="rotate-25" icon-type="svg" svg-icon-set="primo-ui" icon-definition="prm_pin"></prm-icon><span class="bold-text ng-scope">Save Path</span></md-button></div></div></md-toolbar><prm-horizontal-content class="stacked-items no-scrollbar" layout="row" ng-init="scrollWatch()"><div flex-gt-sm="15" flex-md="10" flex-gt-lg="20" hide-xs hide-sm></div><div flex class="horizontal-content-container citations-container"><div class="horizontal-content-controls" ng-if="!hideArrows"><md-button class="left-button" ng-if="showLeftArrow" aria-label="button"><prm-icon><md-icon aria-hidden="true"><svg width="100%" height="100%" viewBox="0 0 24 24" y="480" xmlns="http://www.w3.org/2000/svg" fit="" preserveAspectRatio="xMidYMid meet" focusable="false"><path d="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"/></svg></md-icon></prm-icon></md-button><md-button class="right-button" ng-if="showRightArrow" ng-hide="!showRightArrow" aria-label="button"><prm-icon><md-icon aria-hidden="true"><svg width="100%" height="100%" viewBox="0 0 24 24" y="480" xmlns="http://www.w3.org/2000/svg" fit="" preserveAspectRatio="xMidYMid meet" focusable="false"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"/></svg></md-icon></prm-icon></md-button></div><md-list role="list"><md-list-item><prm-citation-trails-item [item]="::ctrl.item" class="citation-item horizontal-content-item" id="citationItem{{$index}}" ng-class="{\'current-item \': $index == currentItem}" layout="row" ng-style="($index > currentItem) && {\'z-index\' : citations.length - $index } || {\'z-index\': \'\'}"></prm-citation-trails-item></md-list-item></md-list></div><div flex-gt-sm="15" flex-md="10" flex-gt-lg="20" hide-xs hide-sm></div></prm-horizontal-content>');
$templateCache.put('components/infra/widgets/breadcrumbs/crumb.html','');
$templateCache.put('components/search/actions/exportRISAction/export-ris.html','<div class="send-actions-content-item" layout="row" layout-align="center center"><md-content layout-wrap layout-padding layout-fill><form name="" novalidate layout="column" layout-align="center center"><div layout="row" class="layout-full-width" layout-align="center center"><div flex="20" flex-sm="10" hide-xs></div><div class="form-focus service-form" layout-padding><md-input-container><label>{{\'fulldisplay.command.pushto.option.RISPushTo.encoding\' | translate}}</label><md-select ng-model="$ctrl.encodingVal" class="form-control" aria-label="encoding"><md-option ng-repeat="option in ::$ctrl.encodingList track by option" value="{{::option}}"><span translate="{{::option}}"></span></md-option></md-select></md-input-container></div><div flex="20" flex-sm="10" hide-xs></div></div><div layout="row"><div layout="row" layout-align="center" layout-fill><md-button type="submit" class="button-with-icon button-large button-confirm" aria-label="{{\'fulldisplay.command.pushto.option.RISPushTo.importToCitationManager\' | translate}}" (click)="$ctrl.getFile()"><span translate="fulldisplay.command.pushto.option.RISPushTo.download"></span></md-button></div></div></form></md-content></div><prm-export-ris-after parent-ctrl="$ctrl"></prm-export-ris-after>');
$templateCache.put('components/search/actions/legantoAction/leganto.html','<div class="send-actions-content-item" layout="row" layout-align="center center"><md-content layout-wrap layout-padding layout-fill><form name="" novalidate layout="column" layout-align="center center" (submit)="$ctrl.pushRecord($event);"><div layout="row" class="layout-full-width" layout-align="center center"><div flex="20" flex-sm="10" hide-xs></div><div class="form-focus service-form" layout-padding flex><div layout-margin><div layout="column" ng-if="$ctrl.legantoService.showTemplateType === \'userSelection\'"><div ng-if="$ctrl.pushToOptions.length > 1" layout="row" layout-align="start center" flex><span translate="fulldisplay.command.pushto.option.LegantoPushTo.pushToText"></span><span>:</span> <span flex></span></div><div class="input-cell" ng-if="$ctrl.pushToOptions.length > 1" layout="row" layout-wrap layout-align="start center"><md-radio-group ng-model="$ctrl.selectedPushToOption" layout="row" ng-change="$ctrl.changedPushToOption()" layout-wrap><md-radio-button ng-repeat="option in $ctrl.pushToOptions" value="{{option}}" class="md-primary" aria-label="{{option}}"><span translate="fulldisplay.command.pushto.option.LegantoPushTo.{{option}}"></span></md-radio-button></md-radio-group></div><div ng-show="$ctrl.showLists === \'show\'" layout-padding><md-input-container class="input-select-width"><label>{{\'fulldisplay.command.pushto.option.LegantoPushTo.list.select\' | translate}}</label><md-select ng-model="$ctrl.selectedUserList" class="form-control" aria-label="{{\'fulldisplay.command.pushto.option.LegantoPushTo.list.select\' | translate}} {{\'fulldisplay.command.pushto.option.LegantoPushTo.list.vocal\' | translate}}" ng-change="$ctrl.changedUserList()"><md-option ng-repeat="list in $ctrl.userLists" value="{{list.id}}"><span title="{{list.name}}">{{list.name | limitTo: 70}}{{list.name.length > 70 ? \'...\' : \'\'}}</span></md-option></md-select></md-input-container><div class="color-Tomato" ng-messages="true" ng-if="$ctrl.noSectionsError === \'show\'"><span aria-label="{{\'fulldisplay.command.pushto.option.LegantoPushTo.section.notExists\' | translate}}" aria-live="assertive" translate="fulldisplay.command.pushto.option.LegantoPushTo.section.notExists"></span></div></div><div ng-show="$ctrl.showSections === \'show\'" layout-padding><md-input-container class="input-select-width"><label>{{\'fulldisplay.command.pushto.option.LegantoPushTo.section.select\' | translate}}</label><md-select ng-model="$ctrl.selectedUserSection" class="form-control" aria-label="{{\'fulldisplay.command.pushto.option.LegantoPushTo.section.select\' | translate}}" ng-change="$ctrl.changedUserSection()"><md-option ng-repeat="section in $ctrl.userSections" value="{{::section.id}}"><span title="{{section.name}}">{{section.name | limitTo: 70}}{{section.name.length > 70 ? \'...\' : \'\'}}</span></md-option></md-select></md-input-container></div></div><div ng-if="$ctrl.legantoService.showTemplateType === \'signIn\'" class="bar alert-bar" layout="row" layout-align="start center" flex><span translate="fulldisplay.command.pushto.option.LegantoPushTo.signInMessage"></span><prm-authentication flex="none"></prm-authentication><span flex></span></div><div ng-if="$ctrl.legantoService.showTemplateType === \'error\'" layout-align="center center"><span aria-live="assertive" aria-label="{{$ctrl.legantoService.statusMessage}}">{{$ctrl.legantoService.statusMessage}}</span></div><div ng-if="$ctrl.legantoService.showSpinner === \'show\'" layout="row" layout-align="center center" layout-padding layout-margin><prm-spinner class="inline-loader dark-on-light no-text" layout="row" layout-align="start center" layout-margin></prm-spinner></div><div ng-if="$ctrl.legantoService.showTemplateType === \'noListsExist\'" layout="row" layout-align="start center" flex><span translate="{{$ctrl.legantoService.noListsMessage}}"></span> <span flex></span></div></div></div><div flex="20" flex-sm="10" hide-xs></div></div><div layout="row"><div layout="row" layout-align="center" layout-fill><md-button type="submit" class="button-with-icon button-large button-confirm" aria-label="{{\'fulldisplay.command.pushto.option.LegantoPushTo.add\' | translate}}" ng-style="!$ctrl.pushAllowed ? { \'z-index\':\'0\' } : { }" ng-disabled="!$ctrl.legantoService.pushAllowed"><span translate="fulldisplay.command.pushto.option.LegantoPushTo.add"></span></md-button></div></div></form></md-content></div><prm-leganto-after parent-ctrl="$ctrl"></prm-leganto-after>');
$templateCache.put('components/search/actions/mendeleyAction/mendeley.html','<prm-mendeley-after parent-ctrl="$ctrl"></prm-mendeley-after>');
$templateCache.put('components/search/actions/permalinkAction/permalink.html','<div class="send-actions-content-item" layout="row"><md-content layout-wrap layout-padding layout-fill><div layout="column"><div class="form-focus" layout="row" layout-padding><div layout-margin layout-fill class="word-break-all"><span id="{{::(\'permalink\'+ $ctrl.getRecordId())}}" layout-fill>{{$ctrl.permalink}}</span></div></div><div ng-if="::$ctrl.displayCopyButton()" layout="row" layout-align="center center"><prm-copy-clipboard-btn (click)="$ctrl.selectText();" [text]="$ctrl.permalink" action="permalink"></prm-copy-clipboard-btn></div></div></md-content></div><prm-permalink-after parent-ctrl="$ctrl"></prm-permalink-after>');
$templateCache.put('components/search/actions/printAction/print-item.html','<prm-print-item-after parent-ctrl="$ctrl"></prm-print-item-after>');
$templateCache.put('components/search/actions/sendEmailAction/send-email.html','<div class="send-actions-content-item" layout="row"><md-content layout-wrap layout-padding layout-fill><form name="emailForm" novalidate layout="column" layout-align="center center" (submit)="$ctrl.sendEmail($event);"><div layout="row" class="layout-full-width" layout-align="center center"><div flex="20" flex-sm="10" hide-xs></div><div class="form-focus service-form" layout-padding flex><div layout-margin><div layout="column"><label translate="email.subject"></label><div name="subject">{{$ctrl.subject}}</div><md-input-container class="underlined-input md-required"><label translate="email.to"></label><input ng-model="$ctrl.addresses" name="addresses" type="text" required ng-pattern="::$ctrl.emailRegEx" ng-change="$ctrl.changeAddress(emailForm)"><div ng-messages="emailForm.addresses.$error" ng-if="emailForm.$submitted || emailForm.addresses.$touched  || emailForm.addresses.$dirty"><div ng-message="validationError" ng-if="$ctrl.isUser()"><span translate="too.many.emails.nonguest"></span></div><div ng-message="validationError" ng-if="$ctrl.isGuest()"><span translate="too.many.emails.guest"></span></div><div ng-message="pattern, required "><span translate="nui.email.invalidaddress"></span></div></div></md-input-container><md-input-container class="underlined-input" ng-if="$ctrl.isUser()"><label translate="email.note"></label><textarea ng-model="$ctrl.note" name="note" columns="1" rows="1" ng-change="$ctrl.changeNote(emailForm)"></textarea><div ng-messages="emailForm.note.$error" ng-if="emailForm.$submitted || emailForm.note.$touched  || emailForm.note.$dirty"><div ng-message="validationError"><span translate="html.in.email.notes"></span></div></div></md-input-container><md-input-container class="underlined-input" ng-if="$ctrl.isCaptcha"><div vc-recaptcha key="$ctrl.capchaPublicKey" on-create="$ctrl.setWidgetId(widgetId)" on-success="$ctrl.setResponse(response)" on-expire="$ctrl.cbExpiration()"></div><span class="recaptcha-error-info" ng-show="emailForm.$submitted && (emailForm.recaptchaResponse.$invalid || emailForm.$error.recaptcha.length)"><span translate="captcha.notselected"></span></span></md-input-container></div></div></div><div flex="20" flex-sm="10" hide-xs></div></div><div layout="row"><div layout="row" layout-align="center" layout-fill><md-button type="submit" class="button-with-icon button-large button-confirm" aria-label="Send the result by email" ng-style="$ctrl.sendMailInProgress ? { \'z-index\':\'0\' } : { }" ng-disabled="$ctrl.sendMailInProgress"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="send"></prm-icon><span translate="email.popup.link.send"></span></md-button></div></div></form></md-content></div><prm-send-email-after parent-ctrl="$ctrl"></prm-send-email-after>');
$templateCache.put('components/search/actions/refworksAction/refworks.html','<prm-refworks-after parent-ctrl="$ctrl"></prm-refworks-after>');
$templateCache.put('components/search/browse/browseResult/browse-result.html','<md-list-item ng-class="{\'not-link\':!$ctrl.haveLink}" class="md-2-line" ng-click="$ctrl.reportUse()" ng-href="{{::$ctrl.resultLink}}" class="browse-result-link"><div class="md-list-item-text" layout="row" ng-if="!$ctrl.isCallNumber() && !$ctrl.isSubjectOrAuthor()"><div layout="column" layout-align="center start" flex style="padding-right: 1em"><h3 class="item-title bold-text" style="align-self: flex-start; max-width: 100%"><span><prm-highlight terms="" text="$ctrl.title"></prm-highlight></span></h3></div><div flex="20" layout-align="center start" layout="column"><span><span ng-if="$ctrl.numberOfDocs <= 1">1 {{\'nui.browse.single_rec\'| translate}}</span> <span ng-if="$ctrl.numberOfDocs > 1">{{$ctrl.numberOfDocs}} {{$ctrl.exactNumber}} {{\'nui.browse.multiple_rec\'| translate}}</span></span></div></div><div class="md-list-item-text" layout="row" ng-if="$ctrl.isCallNumber()"><div layout="column" layout-align="center start" flex style="padding-right: 1em"><h3 class="item-title"><span><prm-highlight terms="" text="$ctrl.title"></prm-highlight></span></h3><h4 class="call-number-description"><span>{{$ctrl.author}}</span> <span>{{$ctrl.date}}</span></h4></div><div flex="20" layout-align="center start" layout="column"><span layout="column" style="line-height: 1.3em"><span translate="nui.browse.col.callno"></span> <strong ng-class="{\'text-rtl\': $ctrl.switchToLtrString()}">{{$ctrl.callNumber}}</strong></span></div></div><div class="md-list-item-text" layout="row" ng-if="$ctrl.isSubjectOrAuthor()"><div layout="column" layout-align="center start" flex style="padding-right: 1em"><h3 class="item-title bold-text" style="align-self: flex-start; max-width: 100%"><span ng-if="$ctrl.havePref" style="font-weight: 400; color: initial"><prm-highlight terms="" text="$ctrl.preferred"></prm-highlight></span><span ng ng-if="$ctrl.haveType && $ctrl.havePref">&nbsp;</span> <span ng ng-if="$ctrl.haveType && $ctrl.havePref" class="text-italic text-in-brackets" style="color: black">{{$ctrl.type}}</span> <span ng-if="$ctrl.havePref" translate="nui.browse.crossref.see"></span> <span ng-repeat="title in $ctrl.prefTitle.reverse() "><span ng-if="!$first">,</span> <a ng-if="$ctrl.havePref" ng-href="{{::$ctrl.resultLinkPref(title)}}"><prm-highlight terms="" text="title"></prm-highlight></a><span ng-if="!$ctrl.havePref"><prm-highlight terms="" text="title"></prm-highlight></span></span><span ng ng-if="$ctrl.haveType && !$ctrl.havePref">&nbsp;</span> <span ng ng-if="$ctrl.haveType && !$ctrl.havePref" class="text-italic text-in-brackets" style="color: black">{{$ctrl.type}}</span></h3></div><div flex="20" layout-align="center start" layout="column"><span ng-if="!$ctrl.havePref"><span ng-if="$ctrl.numberOfDocs <= 1">1 {{\'nui.browse.single_rec\'| translate}}</span> <span ng-if="$ctrl.numberOfDocs > 1">{{$ctrl.numberOfDocs}} {{$ctrl.exactNumber}} {{\'nui.browse.multiple_rec\'| translate}}</span></span></div></div></md-list-item><prm-browse-result-after parent-ctrl="$ctrl"></prm-browse-result-after>');
$templateCache.put('components/search/browse/browseSearchBar/browse-search-bar.html','<div tabindex="-1" role="search" layout="row"><div flex="0" flex-md="15" flex-lg="20" flex-xl="20"></div><div layout="column" flex><div class="search-elements-wrapper" layout="row"><form name="search-form" ng-submit="$ctrl.performSearch()" class="layout-full-width"><div class="classic-input" layout="row" layout-fill><div class="search-scope" layout="column" layout-align="center start"><div layout="row" layout-align="center center"><md-input-container layout="row" layout-xs="column" class="zero-margin" layout-align="start center"><label tabindex="-1" translate="nui.browse.browseby" class="_md-container-ignore bold-text"></label><md-select ng-model="$ctrl.selectedScope" aria-label="{{\'nui.browse.browseBy\' | translate}}"><md-option ng-repeat="opt in $ctrl.scopes" ng-value="opt"><span translate="nui.browse.{{opt.SourceCode1}}"></span></md-option></md-select></md-input-container></div></div><md-input-container flex md-no-float><input ng-class="{\'text-rtl\': $ctrl.switchToLtrString()}" ng-model="$ctrl.searchBarInput" ng-change="vm.onMessageChange()" placeholder="{{\'nui.browse.placeholder\' | translate}}" autocomplete="off"></md-input-container><md-button class="submit-button button-confirm" aria-label="Search" (click)="$ctrl.performSearch()"><prm-icon icon-type="{{::$ctrl.searchBoxIcons.searchTextBox.type}}" svg-icon-set="{{::$ctrl.searchBoxIcons.searchTextBox.iconSet}}" icon-definition="{{::$ctrl.searchBoxIcons.searchTextBox.icon}}"></prm-icon></md-button></div></form></div></div><div flex="0" flex-md="15" flex-lg="20" flex-xl="20"></div></div><prm-browse-search-bar-after parent-ctrl="$ctrl"></prm-browse-search-bar-after>');
$templateCache.put('components/search/facet/facetExact/facet-exact.html','<md-button class="section-title" layout-fill (click)="$ctrl.facetGroup.facetGroupCollapsed = !$ctrl.facetGroup.facetGroupCollapsed" ng-class="{\'collapsed\': $ctrl.facetGroup.facetGroupCollapsed}" aria-label="{{::(\'facets.facet.facet_\'+ $ctrl.facetGroup.name | translate)}}{{\' \'}}{{$ctrl.facetStatus()}}" translate-attr-title="{{$ctrl.facetGroup.facetGroupCollapsed ? \'nui.facets.expand.tooltip\' :\'nui.facets.collapse.tooltip\'}}"><div layout="row" layout-align="start center"><h3 ng-if="::$ctrl.facetGroup.labelParam" class="section-title-header"><span>{{\'facets.facet.facet_\' + $ctrl.facetGroup.name | translate: {\'idx_0\': $ctrl.facetGroup.labelParam} }}</span></h3><h3 ng-if="::!$ctrl.facetGroup.labelParam" class="section-title-header"><span translate-default="{{::$ctrl.facetGroup.name}}" translate="facets.facet.facet_{{::$ctrl.facetGroup.name}}" translate-attr-title="facets.facet.facet_{{::$ctrl.facetGroup.name}}"></span></h3><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-up" ng-class="{\'rotate-180\': $ctrl.facetGroup.facetGroupCollapsed}"></prm-icon></div></md-button><div class="accessible-only-text-hidden" aria-live="assertive">{{$ctrl.facetStatus()}}</div><div ng-hide="$ctrl.facetGroup.facetGroupCollapsed" class="section-content animate-max-height-variable"><div class="md-chips md-chips-wrap"><div class="md-chip animate-opacity-and-scale facet-element-marker-{{::$ctrl.facetGroup.name}}" ng-if="!$ctrl.facetGroup.facetGroupCollapsed && $ctrl.containLegalFacetByLang(facet)" ng-repeat="facet in $ctrl.getFacetGroupValues() | limitTo:$ctrl.facetGroup.displayedCount" ng-class="facet.facetType===\'exclude\' ? \'facet-excluded\' : \'\'"><div class="md-chip-content" layout="row"><md-checkbox ng-click="$ctrl.toggleMultiFacet(facet)" ng-checked="facet.checked" aria-label="{{$ctrl.ariaLabelForFacet(facet.facetType)}}{{\' \'}}{{$ctrl.facetLabel(facet) | translate}}"></md-checkbox><strong dir="auto" class="facet-title" translate-default="{{::$ctrl.removeNotRelevantChars(facet.displayValue || facet.value)}}" translate="{{::$ctrl.removeNotRelevantChars($ctrl.facetLabel(facet))}}" translate-attr-title="{{$ctrl.removeNotRelevantChars($ctrl.facetLabel(facet))}}" ng-click="$ctrl.addFacet(facet.name,facet.value, facet.value,\'include\',$ctrl.facetGroup.displayedType,\'add\')" aria-label="{{::$ctrl.removeNotRelevantChars($ctrl.facetLabel(facet)) | translate}}{{\' \'}}{{$ctrl.getCountsummary(facet)}}"></strong> <span ng-if="::facet.count>0 && $ctrl.isShowCount(facet)" class="text-italic text-in-brackets text-rtl">{{$ctrl.getCountsummary(facet)}}</span></div><div ng-if="::($ctrl.facetGroup.name!==\'tlevel\' || facet.value !== \'online_resources\')" class="md-chip-remove-container" ng-mouseenter="$ctrl.excludeThisFacet[$index] = true" ng-mouseleave="$ctrl.excludeThisFacet[$index] = false"><md-button class="md-icon-button zero-margin" ng-click="$ctrl.toggleIncludeExclude(facet)" ng-class="facet.facetType===\'exclude\' ? \'button-include\': \'button-exclude\'" aria-label="{{$ctrl.ariaLabelForFacet(facet.facetType===\'exclude\' ? \'include\' : \'exclude\')}} {{$ctrl.facetLabel(facet) | translate}}"><prm-icon icon-type="{{$ctrl.facetsIcons.excludeFacet.type}}" ng-show="facet.facetType!==\'exclude\'" svg-icon-set="{{$ctrl.facetsIcons.excludeFacet.iconSet}}" icon-definition="{{$ctrl.facetsIcons.excludeFacet.icon}}"></prm-icon><prm-icon icon-type="{{$ctrl.facetsIcons.includeFacet.type}}" ng-show="facet.facetType===\'exclude\'" svg-icon-set="{{$ctrl.facetsIcons.includeFacet.iconSet}}" icon-definition="{{$ctrl.facetsIcons.includeFacet.icon}}"></prm-icon><md-tooltip><span>{{$ctrl.ariaLabelForFacet(facet.facetType===\'exclude\' ? \'include\' : \'exclude\') }} {{$ctrl.facetLabel(facet) | translate}}</span></md-tooltip></md-button></div></div></div><div class="expand-section-button compensate-padding-left" ng-if="$ctrl.isShowMore($ctrl.facetGroup)" ng-mousedown="$ctrl.toggleMoreFacets($ctrl.facetGroup,0)" ng-keypress="$event.keyCode == 13 || $event.keyCode == 32 ? $ctrl.toggleMoreFacets($ctrl.facetGroup,1) : null" aria-label="{{::$ctrl.facetGroup.name}}"><md-button class="button-as-link link-alt-color zero-margin"><span class="bold-text" translate="nui.facets.showmore" translate-attr-title="nui.facets.showmore" aria-label="{{\'nui.aria.facets.showmore\' | translate:\'{name: \\\'\'+$ctrl.facetGroupHeader+\'\\\'}\'}}"></span></md-button></div><div ng-init="messageAdded = \'\';\r\n                  messageRemoved = (\'nui.aria.facets.showmore\' | translate:\'{name: \\\'\'+$ctrl.facetGroupHeader+\'\\\'}\')" class="accessible-only" aria-label="{{$ctrl.isShowMore($ctrl.facetGroup) ? messageAdded : messageRemoved}}" aria-live="assertive">{{$ctrl.isShowMore($ctrl.facetGroup) ? messageAdded : messageRemoved}}</div></div><prm-facet-exact-after parent-ctrl="$ctrl"></prm-facet-exact-after>');
$templateCache.put('components/search/facet/facetRange/facet-range.html','<md-button class="section-title" layout-fill (click)="$ctrl.facetGroup.facetGroupCollapsed = !$ctrl.facetGroup.facetGroupCollapsed" ng-class="{\'collapsed\': $ctrl.facetGroup.facetGroupCollapsed}" aria-label="{{::$ctrl.facetGroup.name}}" translate-attr-title="{{$ctrl.facetGroup.facetGroupCollapsed ? \'nui.facets.expand.tooltip\' :\'nui.facets.collapse.tooltip\'}}"><div layout="row" layout-align="start center"><h3 class="section-title-header"><span translate="facets.facet.facet_{{::$ctrl.facetGroup.name}}" translate-attr-title="facets.facet.facet_{{::$ctrl.facetGroup.name}}"></span></h3><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-up" ng-class="{\'rotate-180\': $ctrl.facetGroup.facetGroupCollapsed}"></prm-icon></div></md-button><div class="section-content animate-max-height-variable md-chip" ng-hide="$ctrl.facetGroup.facetGroupCollapsed"><div layout="row" layout-align="start center" class="md-range-content"><md-checkbox tabindex="0" aria-label="" ng-click="$ctrl.toggleMultiRangeFacet($ctrl.rangeFacetValue)" ng-checked="$ctrl.facetService.activeRangeMultiFacet"></md-checkbox><md-input-container><label translate="facets.date.slider.from"></label><input type="number" min="{{::$ctrl.facetGroup.additionalData.min}}" max="{{$ctrl.facetGroup.additionalData.selectedMax}}" step="{{::$ctrl.facetGroup.additionalData.step}}" ng-model="$ctrl.facetGroup.additionalData.selectedMin" ng-change="$ctrl.changeMultiFacetVal($ctrl.rangeFacetValue)" aria-label="{{::(\'nui.aria.from\' | translate)}}"></md-input-container><md-input-container><label translate="facets.date.slider.to"></label><input type="number" min="{{$ctrl.facetGroup.additionalData.selectedMin}}" max="{{::$ctrl.facetGroup.additionalData.max}}" step="{{::$ctrl.facetGroup.additionalData.step}}" ng-model="$ctrl.facetGroup.additionalData.selectedMax" ng-change="$ctrl.changeMultiFacetVal($ctrl.rangeFacetValue)" aria-label="{{::(\'nui.aria.to\' | translate)}}"></md-input-container><md-button (click)="$ctrl.addFacet(\'searchcreationdate\', $ctrl.rangeFacetLabel, $ctrl.rangeFacetValue,\'include\', $ctrl.facetGroup.displayedType, $ctrl.rangeFacetMinValue, $ctrl.rangeFacetMaxValue,\'add\')" class="button-as-link link-alt-color zero-margin" aria-label="{{::(\'facets.date.slider.refine\' | translate)}}"><span translate="facets.date.slider.refine"></span></md-button></div></div><prm-facet-range-after parent-ctrl="$ctrl"></prm-facet-range-after>');
$templateCache.put('components/search/fullView/backToSearchResultsButton/back-to-search-results-button.html','<div ng-if="::$ctrl.isBackToSearchRequired()"><md-toolbar class="default-toolbar zero-padding" sticky sticky-class="is-stuck" disabled-sticky="$ctrl.isBrowseMode"><div class="md-toolbar-tools zero-padding" layout="row"><div flex="0" flex-md="0" flex-lg="10" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus}" flex-xl="20"></div><md-button ng-if="!$ctrl.isBrowseMode" class="back-button has-text" ng-click="$ctrl.navigateBackToSearchResults()" aria-label="navigate back to search results"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="back-to-search"></prm-icon><span translate="fulldisplay.deatiles.back"></span></md-button><md-button ng-if="$ctrl.isBrowseMode" class="back-button has-text" ui-state="$ctrl.browseState" ui-state-params="$ctrl.backToBrowseParams" aria-label="navigate back to browse results"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="back-to-search"></prm-icon><span>{{$ctrl.backToBrowseLabel}}</span></md-button></div></md-toolbar></div><prm-back-to-search-results-button-after parent-ctrl="$ctrl"></prm-back-to-search-results-button-after>');
$templateCache.put('components/search/fullView/details/service-details.html','<div class="section-body" id="item-details"><div class="spaced-rows" layout="column"><div ng-repeat="detail in ::$ctrl.details" layout="row" layout-xs="column" class="layout-block-xs"><div flex-gt-sm="20" flex-gt-xs="25" flex><span class="bold-text" translate="fulldisplay.{{detail.label}}" translate-attr-title="fulldisplay.{{detail.label}}"></span></div><div flex><div ng-repeat="value in detail.values"><div ng-show="$first || !detail.isCollapsible || !detail.showMore" ng-repeat="curValue in ::$ctrl.getValuesOfValueItems(value) track by $index" layout="column" class="word-break"><div ng-show="value.isLinkable" ng-class="{\'string-to-rtl-details\': $ctrl.dontChangeStringDirectionToRtl(curValue)}"><prm-highlight ng-if="$ctrl.isSubfieldExist(curValue, \'$$C\')" terms="$ctrl.hl(value.keyt)" text="$ctrl.getPrefix(curValue)"></prm-highlight><a (click)="$ctrl.setCameFromIndicationLateral(value.key)" ng-if="$ctrl.isSubfieldExist(curValue, \'$$Z\')" class="arrow-link" aria-label="lateral.link.{{$ctrl.getTextFromVal(curValue)}}" ui-sref="fulldisplay({\r\n\t\t\t\t\t\t\t   \t\t\t\tvid:\'{{$ctrl.queryOptions.vid}}\',\r\n\t\t\t\t\t\t\t   \t\t\t\tscope:\'{{$ctrl.queryOptions.scope}}\',\r\n\t\t\t\t\t\t\t   \t\t\t\ttab:\'{{$ctrl.queryOptions.tab}}\',\r\n\t\t\t\t\t\t\t   \t\t\t\tdocid:\'alma{{$ctrl.getSubfieldFromVal(curValue, \'$$Z\')}}\',\r\n\t\t\t\t\t\t\t   \t\t\t\tcontext:\'L\'\r\n\t\t\t\t\t\t\t   \t\t\t\t})" ui-sref-opts="{reload: true}"><prm-highlight terms="$ctrl.highlights[value.keyt]" text="$ctrl.getTextFromVal(curValue)"></prm-highlight><prm-icon link-arrow icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-right"></prm-icon></a><a (click)="$ctrl.setCameFromIndicationLateral(value.key)" ng-if="curValue && !$ctrl.isSubfieldExist(curValue, \'$$Z\')" class="arrow-link" aria-label="lateral.link.{{$ctrl.getTextFromVal(curValue)}}" ui-sref="exploreMain.search({\r\n\t\t\t\t\t\t\t   \t\t\t\tvid:\'{{$ctrl.queryOptions.vid}}\',\r\n\t\t\t\t\t\t\t   \t\t\t\tquery: \'{{value.key}},{{value.operator}},{{$ctrl.getQueryFromVal(curValue).split(\'\\\'\').join(\'\\\\\\\'\')}},AND\',\r\n\t\t\t\t\t\t\t   \t\t\t\tscope:\'{{$ctrl.queryOptions.scope}}\',\r\n\t\t\t\t\t\t\t   \t\t\t\tfacet:\'\',\r\n\t\t\t\t\t\t\t   \t\t\t\tmode:\'advanced\'})" ui-sref-opts="{reload: true}"><prm-highlight terms="$ctrl.highlights[value.keyt]" text="$ctrl.getTextFromVal(curValue)"></prm-highlight><prm-icon link-arrow icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-right"></prm-icon></a></div><div ng-show="!value.isLinkable" ng-class="{\'string-to-rtl-details\': $ctrl.dontChangeStringDirectionToRtl(curValue)}"><prm-highlight ng-if="$ctrl.isSubfieldExist(curValue, \'$$C\')" terms="$ctrl.hl(value.keyt)" text="$ctrl.getPrefix(curValue) + $ctrl.getTextFromVal(curValue)"></prm-highlight><prm-highlight ng-if="!$ctrl.isSubfieldExist(curValue, \'$$C\')" terms="$ctrl.hl(value.keyt)" text="$ctrl.getTextFromVal(curValue)"></prm-highlight></div></div></div><md-button ng-show="detail.isCollapsible" (click)="detail.showMore=!detail.showMore" aria-label="show.hide.{{detail.label}}"><span ng-show="detail.showMore" translate="proquest.collections.more"></span> <span ng-show="!detail.showMore" translate="proquest.collections.more.hide"></span> <span ng-show="detail.showMore"><i class="icon arrow-icon fa fa-chevron-down"></i></span> <span ng-show="!detail.showMore"><i class="icon arrow-icon fa fa-chevron-up"></i></span></md-button></div></div><prm-record-collection-paths [item]="::$ctrl.item"></prm-record-collection-paths></div></div><prm-service-details-after parent-ctrl="$ctrl"></prm-service-details-after>');
$templateCache.put('components/search/fullView/fullViewServiceContainer/full-view-service-container.html','<div class="section-head"><prm-service-header ng-if="$ctrl.service.serviceName!==\'brief\'" [title]="$ctrl.service.title"></prm-service-header></div><div class="section-body"><prm-brief-result-container ng-if="$ctrl.service.serviceName===\'brief\'" [is-full-view]="true" [is-overlay-full-view]="$ctrl.isOverlayFullView" [is-favorite-for-display-frbr]="$ctrl.isfavorites" [item]="$ctrl.item" [links]="$ctrl.item.delivery.link"></prm-brief-result-container><prm-action-list ng-if="$ctrl.service.serviceName===\'action_list\'" [is-full-view]="true" [display-all]="true" [item]="::$ctrl.item" [selected-action]="\'none\'" class="list-item-secondary-content result-item-secondary-content visible" ng-style="{\'padding-top\': $ctrl.itemHeight}" ng-keydown="$ctrl.keyDownSupport($event)"></prm-action-list><div ng-if="$ctrl.loadAdditionalServices"><prm-login-alma-mashup ng-if="$ctrl.service.serviceName===\'activate\'" [item]="::$ctrl.service" [index]="::$ctrl.index"></prm-login-alma-mashup><prm-alma-mashup ng-if="$ctrl.service.serviceName===\'activate\' && $ctrl.isMashupLink()" [links-array]="$ctrl.service.linkElement.links" class="margin-bottom-large display-block"></prm-alma-mashup><prm-alma-more-inst ng-if="$ctrl.service.serviceName===\'activate\' && $ctrl.isMoreAlmaInst() && $ctrl.isAlmaGetit()" [item]="::$ctrl.item"></prm-alma-more-inst><prm-view-online ng-if="$ctrl.service.serviceName===\'display\' " [item]="::$ctrl.service"></prm-view-online><prm-alma-viewit ng-if="$ctrl.service.serviceName===\'Viewit\'" [item]="::$ctrl.item"></prm-alma-viewit><prm-opac ng-if="$ctrl.service.serviceName===\'ovp\' || $ctrl.service.serviceName===\'ovl\'" [item]="$ctrl.item" [service-mode]="::$ctrl.service.serviceName"></prm-opac><alma-htgi-svc ng-if="$ctrl.service.serviceName===\'howovp\' " [item]="$ctrl.item"></alma-htgi-svc><prm-alma-other-members ng-if="$ctrl.configurationUtil.isSuprima() && $ctrl.isMoreAlmaInst() && ($ctrl.service.serviceName===\'howovp\' || $ctrl.service.serviceName===\'ovp\')" [item]="::$ctrl.item"></prm-alma-other-members><prm-service-details ng-if="$ctrl.service.serviceName===\'details\'" [item]="::$ctrl.item"></prm-service-details><prm-tags-list ng-if="$ctrl.service.serviceName===\'tags\'" [item]="::$ctrl.item" [tagslist]="$ctrl.recordNonUserTags" [usertagslist]="$ctrl.recordUserTags" [editable]="true" [is-full-display]="true"></prm-tags-list><prm-service-links ng-if="$ctrl.service.serviceName===\'links\'" [item]="::$ctrl.item"></prm-service-links><prm-virtual-browse ng-if="$ctrl.service.serviceName===\'virtualBrowse\'" [item]="$ctrl.item"></prm-virtual-browse><prm-citation-trails-fullview-link ng-if="$ctrl.service.serviceName === \'citationTrails\' || $ctrl.service.serviceName === \'timesCited\'" [record]="$ctrl.item"></prm-citation-trails-fullview-link><prm-search-within-journal ng-if="$ctrl.service.serviceName===\'searchWithinJournal\'" [item]="$ctrl.item"></prm-search-within-journal></div></div><prm-full-view-service-container-after parent-ctrl="$ctrl"></prm-full-view-service-container-after>');
$templateCache.put('components/search/fullView/fullViewServiceContainer/login-alma-mashup.html','<div ng-if="!$ctrl.isLoggedIn() && !$ctrl.isLoggedInIDP() && $ctrl.index == $ctrl.getIndexFullView()" class="bar alert-bar" layout="row" layout-align="center center"><span translate="getit.signin_link.sign_in" class="margin-right-small"></span><prm-authentication [is-logged-in]="$ctrl.userName().length > 0"></prm-authentication></div><prm-login-alma-mashup-after parent-ctrl="$ctrl"></prm-login-alma-mashup-after>');
$templateCache.put('components/search/fullView/fullViewPage/full-view-page.html','<prm-full-view-cont ng-if="!$ctrl.showPnx" [item]="$ctrl.currentItem"></prm-full-view-cont><div style="height: inherit"><textarea ng-if="$ctrl.showPnx" style="border:none; width: 100%; height: {{$ctrl.pnxLength}}vw; resize:none; overflow:hidden" disabled="disabled">{{$ctrl.currentItem.pnx}}</textarea></div><prm-full-view-page-after parent-ctrl="$ctrl"></prm-full-view-page-after>');
$templateCache.put('components/search/fullView/links/service-links.html','<div class="spaced-rows"><div ng-repeat="link in $ctrl.getLinks()"><a class="arrow-link" href="{{link.linkURL}}" target="_blank"><span ng-if="link.linkURL.length > 0 && link.displayLabel.indexOf(\'$$E\') != 0" ng-bind-html="link.displayLabel"></span> <span ng-if="link.linkURL.length > 0 && link.displayLabel.indexOf(\'$$E\') == 0" translate="{{$ctrl.getLabel(link)}}"></span><prm-icon ng-if="link.linkURL.length>0" external-link icon-type="{{$ctrl.availabilityLineIcons.externalLink.type}}" svg-icon-set="{{$ctrl.availabilityLineIcons.externalLink.iconSet}}" icon-definition="{{$ctrl.availabilityLineIcons.externalLink.icon}}"></prm-icon><prm-icon ng-if="link.linkURL.length>0" link-arrow icon-type="{{$ctrl.availabilityLineIcons.arrowRight.type}}" svg-icon-set="{{$ctrl.availabilityLineIcons.arrowRight.iconSet}}" icon-definition="{{$ctrl.availabilityLineIcons.arrowRight.icon}}"></prm-icon></a><div><p class="italic-text weak-text" ng-if="link.publicNote.length > 0">{{link.publicNote}}</p></div></div><div ng-if="$ctrl.hasSourceRecordLink()"><a class="arrow-link" target="_blank" ui-sref="sourceRecord({\r\n   \t\t\tvid:\'{{$ctrl.vid}}\',\r\n   \t\t\tdocId:\'{{$ctrl.getRecordId()}}\'\r\n   \t\t\t})" ui-sref-opts="{reload: true}"><span translate="{{$ctrl.getSourceRecordLinkName()}}"></span><prm-icon link-arrow icon-type="{{$ctrl.availabilityLineIcons.arrowRight.type}}" svg-icon-set="{{$ctrl.availabilityLineIcons.arrowRight.iconSet}}" icon-definition="{{$ctrl.availabilityLineIcons.arrowRight.icon}}"></prm-icon></a></div></div><prm-service-links-after parent-ctrl="$ctrl"></prm-service-links-after>');
$templateCache.put('components/search/fullView/recomendation/recomendationItem.html','<div class="media-element" ng-mouseenter="hoverItem = true" ng-mouseleave="hoverItem = false"><a ng-href="{{$ctrl.getLink()}}" ng-click="$ctrl.sendBeacon()" target="_blank" class="a-tag-as-wrapper" layout="row"><div class="media-figure" ng-if="$ctrl.rec.image"><img ng-src="{{$ctrl.rec.image}}" alt="{{$ctrl.rec.line1}}"></div><div class="media-body" flex><h3 class="recommendations-title" ng-class="{\'hover\': hoverItem}" title="{{$ctrl.rec.title }}"><span class="line-clamp-2"><span>{{ $ctrl.rec.title }}</span></span><prm-icon external-link ng-class="{\'visible\': hoverItem}" icon-type="{{$ctrl.availabilityLineIcons.externalLink.type}}" svg-icon-set="{{$ctrl.availabilityLineIcons.externalLink.iconSet}}" icon-definition="{{$ctrl.availabilityLineIcons.externalLink.icon}}"></prm-icon></h3><p class="recommendation-details" title="{{$ctrl.rec.line1}}, {{$ctrl.rec.line2}}" layout="column"><span ng-if="$ctrl.rec.line1" ng-bind-html="$ctrl.rec.line1"></span> <span ng-if="$ctrl.rec.line2" ng-bind-html="$ctrl.rec.line2"></span></p><p class="weak-text" ng-if="$ctrl.rec.suggestion || $ctrl.rec.suggestionText"><span class="tiny-uppercase-text" translate="nui.suggestion.bx.type" translate-values="$ctrl.getPlaceHolders($ctrl.rec)"></span> <span><span style="font-size: .95em" translate="nui.suggestion.bx.message"></span><img ng-if="$ctrl.rec.suggestion == \'BX\'" src="img/bxlogo.png" alt="bx logo" style="width: 18px; position: relative; top: 3px"/> <img ng-if="$ctrl.rec.suggestion == \'bibtip\'" ng-src="img/bibtiplogo.png" alt="bibtip logo" style="position: relative; top: 3px; height: .9em; width: auto; margin-left: .2em"/> <img ng-if="$ctrl.rec.suggestion == \'worldcat\'" ng-src="img/bibtiplogo.png" alt="worldcat logo" style="position: relative; top: 3px; height: .9em; width: auto; margin-left: .2em"/></span></p></div></a></div><prm-recomendation-item-after parent-ctrl="$ctrl"></prm-recomendation-item-after>');
$templateCache.put('components/search/fullView/recomendation/recomendations.html','<div class="recommendations-wrapper" layout="column" layout-align="start start" ng-if="$ctrl.bxenable"><div class="section-head" layout="column" layout-align="start start"><h2 class="section-title md-title light-text" translate="nui.suggestions.header"></h2><p class="section-description"><span translate="nui.suggestions.tooltip"></span></p></div></div><div class="recommendations-list"><div class="recommendations-item animate-opacity-and-scale" layout="row" ng-repeat="pnx in $ctrl.recommendations.docs | limitTo:$ctrl.quantity"><prm-recomendation-item [item]="::pnx" [index]="$index"></prm-recomendation-item></div></div><md-button class="button-link prm-alt-link" ng-if="$ctrl.more" ng-click="$ctrl.moreSuggestions()"><span translate="nui.suggestions.more"></span></md-button><prm-recomendations-after parent-ctrl="$ctrl"></prm-recomendations-after>');
$templateCache.put('components/search/fullView/serviceHeader/service-header.html','<div layout="row" layout-align="center center"><h4 class="section-title md-title light-text" translate="{{$ctrl.title}}"></h4><md-divider flex></md-divider></div><prm-service-header-after parent-ctrl="$ctrl"></prm-service-header-after>');
$templateCache.put('components/search/fullView/syndeticUnbound/syndeticUnbound.html','<prm-syndetic-unbound-after parent-ctrl="$ctrl"></prm-syndetic-unbound-after>');
$templateCache.put('components/search/personalization/personalizationButton/personalize-results-button.html','<md-button ng-if="$ctrl.personalizationEnabled && !$ctrl.displayDialog()" class="button-as-link button-switch zero-margin" ng-click="$ctrl.doPersonalization()" ng-class="$ctrl.enable ? \'toggled\' : \'link-alt-color\'"><md-tooltip ng-if="!$ctrl.enable"><span translate="nui.pyr.icon.tooltip.inactive"></span></md-tooltip><md-tooltip ng-if="$ctrl.enable"><span translate="nui.pyr.icon.tooltip.active"></span></md-tooltip><md-switch ng-model="$ctrl.enable" tabindex="-1" md-no-ink aria-label="Personalize" class="tiny-switch zero-margin"><span class="bold-text" ng-if="!$ctrl.enable" translate="nui.pyr.icon.label.inactive"></span> <span class="bold-text" ng-if="$ctrl.enable" translate="nui.pyr.icon.label.active"></span></md-switch></md-button><prm-personalize-results-button-after parent-ctrl="$ctrl"></prm-personalize-results-button-after>');
$templateCache.put('components/search/personalization/personalizationDialog/personalization-dialog.html','<div class="personalization-dialog" layout="column" ng-class="{\'is-active\': $ctrl.displayDialog()}" ng-keydown="$ctrl.keyDownSupport($event)"><div class="personalization-dialog-inner form-focus" layout="column"><div class="dialog-content" flex><h2 translate="nui.pyr.popup.label" class="zero-margin-bottom"></h2><p translate="nui.pyr.popup.help"></p><div class="margin-top-medium"><form><div class="checkboxes-tree" layout="row" role="list"><div flex><div class="checkbox-tree-branch" ng-repeat="discipline in ::$ctrl.sortedDisc.slice(0, $ctrl.getSliceLen($ctrl.sortedDisc))" role="listitem"><md-checkbox ng-model="$ctrl.selectedDisc[discipline[0]]" ng-disabled="$ctrl.isDisabled(discipline)" ng-class="{\'is-disabled\' : $ctrl.isDisabled(discipline)}"><b>{{discipline[1]}}</b></md-checkbox><div layout="column" class="checkbox-tree-branch" role="list"><md-checkbox ng-model="$ctrl.selectedDisc[sub[0]]" ng-repeat="sub in ::$ctrl.getsubDisciplines(discipline[0])" ng-disabled="$ctrl.isDisabledSub(sub)" ng-class="{\'is-disabled\' : $ctrl.isDisabledSub(sub)}">{{sub[1]}}</md-checkbox></div></div></div><div flex><div class="checkbox-tree-branch" ng-repeat="discipline in ::$ctrl.sortedDisc.slice($ctrl.getSliceLen($ctrl.sortedDisc),$ctrl.sortedDisc.length)" role="listitem"><md-checkbox ng-model="$ctrl.selectedDisc[discipline[0]]" ng-disabled="$ctrl.isDisabled(discipline)" ng-class="{\'is-disabled\' : $ctrl.isDisabled(discipline)}"><b>{{discipline[1]}}</b></md-checkbox><div layout="column" class="checkbox-tree-branch" role="list"><md-checkbox ng-model="$ctrl.selectedDisc[sub[0]]" ng-repeat="sub in ::$ctrl.getsubDisciplines(discipline[0])" ng-disabled="$ctrl.isDisabledSub(sub)" ng-class="{\'is-disabled\' : $ctrl.isDisabledSub(sub)}">{{sub[1]}}</md-checkbox></div></div></div></div></form></div></div><div class="dialog-warning" layout="row" flex="noshrink" ng-if="$ctrl.countSelectedDisc() > 5"><prm-alert-bar flex [alert-object]="$ctrl.maxDisciplines"></prm-alert-bar></div><div class="dialog-actions" layout="row" flex="noshrink"><md-button class="button-with-icon button-notice" ng-click="$ctrl.resetPersonalization()" ng-if="$ctrl.isPreferredSaved()"><prm-icon icon-type="svg" svg-icon-set="navigation" icon-definition="ic_refresh_24px"></prm-icon><span translate="nui.pyr.popup.reset"></span></md-button><span flex></span><md-button translate="nui.pyr.popup.cancel" ng-click="$ctrl.cancel(e)"></md-button><md-button class="button-confirm" ng-click="$ctrl.personalize()" ng-disabled="$ctrl.countSelectedDisc() > 5"><span translate="nui.pyr.popup.submit.inactive" ng-if="!$ctrl.isPreferredSaved()"></span> <span translate="nui.pyr.popup.submit.active" ng-if="$ctrl.isPreferredSaved()"></span></md-button></div><div layout="row" layout-align="center center"><md-button (keydown)="$ctrl.keydownSupport($event)" class="accessible-close button-link" (click)="$ctrl.cancel(e)" aria-label="{{::(\'nui.aria.pyr.close.personalizationDialog\' | translate)}}" style="margin: 0 0 1em 0"><span translate="nui.pyr.popup.close"></span></md-button></div></div></div><prm-personalization-dialog-after parent-ctrl="$ctrl"></prm-personalization-dialog-after>');
$templateCache.put('components/search/savedQueries/addAlertToast/add-alert-toast.html','<md-toast ng-class="{\'mobile-define\':$ctrl.detectMobile(),\'layout-column\':$ctrl.detectMobile()}" class="md-toast-content"><div layout="row" layout-align="center center" class="md-toast-content" ng-class="{\'end-content\':!$ctrl.detectMobile()}"><span class="md-toast-text"><span ng-if="!$ctrl.addMode" translate="nui.favorites.search.alert.message"></span> <span ng-if="$ctrl.addMode" translate="nui.savesearch.message.description"></span> <strong ng-if="!$ctrl.addMode">{{$ctrl.email}}</strong></span></div><div layout="row" layout-align="start start" class="md-toast-content" ng-class="{\'start-content\':!$ctrl.detectMobile()}"><md-button ng-if="$ctrl.displayAlertForm()" ng-class="{\'mobile-size\':$ctrl.detectMobile()}" md-no-ink="true" class="md-higlight settings-button" aria-label="{{\'nui.aria.savedQueriesList.alert\' | translate}}" ng-click="$ctrl.openMoreInfo($event)" aria-label="Change email address"><div layout="row"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="alert" aria-label="{{\'nui.aria.savedQueriesList.alert\' | translate}}" class="custom-button"></prm-icon><span ng-if="!$ctrl.addMode" style="text-transform: none" translate="nui.favorites.search.alert.set_email"></span> <span ng-if="$ctrl.addMode" style="text-transform: none;white-space: normal" translate="nui.savesearch.message.set_alert"></span></div></md-button><md-button ng-click="$ctrl.onDismiss()" aria-label="{{::(\'nui.message.dismiss\' | translate)}} "><span class="ng-scope" translate="nui.message.dismiss"></span></md-button></div></md-toast><prm-add-alert-toast-after parent-ctrl="$ctrl"></prm-add-alert-toast-after>');
$templateCache.put('components/search/savedQueries/addQueryToSavedSearches/add-query-to-saved-searches.html','<md-button class="button-as-link link-alt-color zero-margin" (click)="$ctrl.add()"><md-tooltip><span translate="nui.savesearch.tooltip"></span></md-tooltip><prm-icon class="pin-icon" aria-label="{{\'nui.aria.favorites.pin\' | translate:\'{index: \\\'\'+($ctrl.index)+\'\\\'}\'}}" [icon-type]="::$ctrl.actionsIcons.pin.type" [svg-icon-set]="::$ctrl.actionsIcons.pin.iconSet" [icon-definition]="::$ctrl.actionsIcons.pin.icon"></prm-icon><span class="bold-text" translate="results.savequery"></span></md-button><prm-add-query-to-saved-searches-after parent-ctrl="$ctrl"></prm-add-query-to-saved-searches-after>');
$templateCache.put('components/search/savedQueries/editNotificationSettings/edit-notification-settings.html','<form name="emailForm" novalidate (submit)="$ctrl.saveEmail()"><div class="md-dialog-content"><h2 class="h2-title" translate="nui.savesearch.alert.header"></h2><p ng-if="$ctrl.addMode===\'true\'"><span translate="nui.savesearch.alert.description"></span></p><p><span translate="nui.savesearch.alert.set_email"></span></p><md-input-container class="underlined-input md-required"><label translate="nui.savesearch.alert.email"></label><input id="input-mail-saved-searches" tabindex="0" ng-model="$ctrl.email" name="addresses" type="text" required ng-pattern="::$ctrl.emailRegEx" value="$ctrl.email"><div ng-messages="emailForm.addresses.$error" ng-show="emailForm.addresses.$touched"><div ng-message="pattern, required "><span translate="nui.email.invalidaddress"></span></div></div></md-input-container></div><md-dialog-actions layout="row"><span flex></span><md-button ng-click="$ctrl.close()"><span translate="nui.savesearch.alert.close"></span></md-button><md-button type="submit" class="button-confirm"><span translate="nui.savesearch.alert.save"></span></md-button></md-dialog-actions></form><prm-edit-notification-settings-after parent-ctrl="$ctrl"></prm-edit-notification-settings-after>');
$templateCache.put('components/search/searchBar/tabsAndScopesSelector/tabs-and-scopes-selector.html','<div layout="row"><md-divider ng-if="$ctrl.showTabsSelect()" class="skewed-divider"></md-divider><md-input-container layout="row" class="zero-margin" layout-align="start center" ng-if="$ctrl.showTabsSelect()"><md-select ng-model="$ctrl.tab" ng-change="$ctrl.onTabChange()" aria-label="select search tab"><md-option ng-repeat="tab in $ctrl.tabOptions" value="{{tab}}"><span translate="{{\'tabbedmenu.\'+tab+\'.label\'}}"></span></md-option></md-select></md-input-container><md-divider ng-if="$ctrl.showScopesSelect()" class="skewed-divider"></md-divider><md-input-container layout="row" class="zero-margin" layout-align="start center" ng-if="$ctrl.showScopesSelect()"><md-select ng-model="$ctrl.scope" aria-label="select search scope"><md-option ng-repeat="scope in $ctrl.scopeOptions track by scope[\'scope-id\']" value="{{scope[\'scope-id\']}}"><span translate="{{\'scopes.option.\'+scope[\'scope-id\']}}"></span> <span ng-if="scope.accessibility" translate="{{\'option.accessibility.\'+scope.accessibility}}"></span></md-option></md-select></md-input-container></div><prm-tabs-and-scopes-selector-after parent-ctrl="$ctrl"></prm-tabs-and-scopes-selector-after>');
$templateCache.put('components/search/searchResult/featuredResults/featured-result-item.html','<md-card ng-class="{ \'is-article\' : $ctrl.formatType == \'article\',  \'is-book\' : $ctrl.formatType === \'book\',\r\n                       \'is-image\': $ctrl.formatType == \'image\'}" tabindex="-1"><md-button ng-href="{{::$ctrl.fullDisplayParam()}}" tabindex="0" ng-focus="itemTooltipVisible" ng-style="{\'background-color\': \'hsl({{$ctrl.index*40}}, 30%, 70%)\'}" style="min-height: 5px"><md-tooltip class="content-tooltip bright-tooltip" md-visible="itemTooltipVisible" md-delay="400" md-direction="bottom" md-autohide="true"><div layout="column"><h3 class="prm-citation-title md-subhead bold-text">{{$ctrl.title}}</h3><p><span>{{$ctrl.displayLines}}</span></p></div></md-tooltip><div class="card-image" ng-if="$ctrl.formatType ===\'book\'"><prm-search-result-thumbnail-container class="md-card-image" [is-virtual-browse]="true" [is-featured-result]="true" [links]="$ctrl.getImage()" [pnx-id]="$ctrl.recordId"></prm-search-result-thumbnail-container></div><md-card-title ng-if="$ctrl.formatType != \'image\'" id="featuredResultTitle" ng-class="{\'book-height\':$ctrl.formatType == \'book\'}"><md-card-title-text ng-class="{\'has-ellipsis\': $ctrl.showEllipsis}">{{$ctrl.title}}</md-card-title-text></md-card-title><md-card-content ng-if="$ctrl.formatType == \'image\'" style="padding: 0px!important;min-height: 50px"><figure><div layout="column"><prm-search-result-thumbnail-container alt="Washed Out" class="md-card-image" [is-virtual-browse]="true" [is-featured-result]="true" [links]="$ctrl.getImage()" [pnx-id]="$ctrl.recordId"></prm-search-result-thumbnail-container></div></figure></md-card-content></md-button></md-card><prm-featured-result-item-after parent-ctrl="$ctrl"></prm-featured-result-item-after>');
$templateCache.put('components/search/searchResult/featuredResults/featured-results.html','<div class="margin-top-medium" layout="row"><div class="margin-right-medium" flex="15"><h3 ng-if="!$ctrl.isSuprima || !$ctrl.title" class="normal-text">{{\'search-advanced.mediaType.option.\' + $ctrl.type| translate}} {{\'featuredresults.labels.in\'| translate}} {{\'scopes.option.\' + $ctrl.scope| translate}} {{\'featuredresults.labels.matching\'| translate}}</h3><h3 ng-if="$ctrl.isSuprima && $ctrl.title" class="normal-text">{{$ctrl.title | translate}}</h3><md-button ng-if="$ctrl.leftArrowShowing || $ctrl.isShowRightArrow" ng-href="{{::$ctrl.searchLink()}}" class="featured-results-link button-as-link zero-margin" href><span class="bold-text">{{\'featuredresults.labels.displayall\'| translate}}</span></md-button></div><div class="prm-horizontal-content no-scrollbar" layout="row" flex aria-label=""><div flex class="horizontal-content-container"><md-button class="horizontal-content-control left-button" tabindex="0" ng-click="$ctrl.scrollContent(\'left\')" aria-label="" ng-if="$ctrl.leftArrowShowing"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-left" aria-label="{{\'nui.aria.vbrowse.previous\' | translate}}"></prm-icon><md-tooltip><span></span></md-tooltip></md-button><div class="horizontal-content-scroller" role="list" layout="row" ng-class="{\'left-button-visible\': $ctrl.leftArrowShowing, \'right-button-visible\': $ctrl.isShowRightArrow,\'safari-hide\': $ctrl.isSafari}"><div class="horizontal-content-scroll-offseter" layout="row"><prm-featured-result-item [featured-result-item]="item" [index]="$index" [tab]="$ctrl.tab" [format]="$ctrl.format" [scope]="$ctrl.scope" [adaptor]="$ctrl.adaptor" ng-repeat="item in $ctrl.featuredResultItems"></prm-featured-result-item></div></div><md-button class="horizontal-content-control right-button" tabindex="0" ng-click="$ctrl.scrollContent(\'right\')" aria-label="" ng-if="$ctrl.isShowRightArrow"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-right" aria-label="{{\'nui.aria.vbrowse.next\' | translate}}"></prm-icon><md-tooltip><span></span></md-tooltip></md-button></div></div></div><prm-featured-results-after parent-ctrl="$ctrl"></prm-featured-results-after>');
$templateCache.put('components/search/searchResult/savedQueriesList/saved-queries-list.html','<div class="content-tab saved-query-list" ng-init="selectedCounter=0;"><md-list aria-label="{{\'nui.aria.savedQueriesList.list\' | translate}}"><md-subheader><div layout="row" sticky sticky-class="is-stuck" offset="56"><md-checkbox ng-if="$ctrl.itemlist.length > 0" aria-label="Select All" ng-checked="$ctrl.isAllChecked()" md-indeterminate="$ctrl.getCheckedItems().length > 0  && $ctrl.getCheckedItems().length < $ctrl.itemlist.length" ng-click="$ctrl.selectAllToggle()"></md-checkbox><span>{{$ctrl.getSavedQueriesHeader()}}</span></div></md-subheader><md-list-item tabindex="0" class="md-2-line saved-query-list-2-line" aria-label="{{\'nui.aria.savedQueriesList.item\' | translate}}" ng-repeat="item in $ctrl.itemlist track by $index" layout="row"><div class="has-checkbox" flex="5"><span class="list-item-count">{{$index+1}}</span><md-checkbox flex="5" aria-live="assertive" aria-label="{{$ctrl.decodeString(item.query.split(\',\')[2])}} {{\'nui.aria.brief.select\' | translate}} {{$index+1}}" ng-model="item.checked"></md-checkbox></div><div id="{{item.ID}}" class="md-list-item-text" layout="column" flex="80" layout-align="start start" layout-fill><a ng-href="{{$ctrl.isSearchHistory ? item.deepLink + \'&came_from=search_history\' : item.deepLink + \'&came_from=saved_queries\'}}" target="_self" class="bold-text"><h3 class="item-title"><div ng-if="item.mode === \'simple\'"><span ng-if="!(item.query.split(\',\')[0]===\'any\' && item.query.split(\',\')[1]===\'contains\')" class="ng-binding"><span translate="search-advanced.scope.option.nui.advanced.index.{{item.query.split(\',\')[0]}}"></span> <span translate="search-advanced.precisionOperator.option.{{item.query.split(\',\')[1]}}"></span> </span><span>{{$ctrl.decodeString(item.query.split(\',\')[2])}}</span></div><span ng-init="prevBoolOper=\'AND\'"></span><div ng-if="item.mode === \'advanced\'" ng-repeat="q in item.query.split(\';\') track by $index" class="string-block animate-scale middle" ng-class="{\'clear-row\': prevBoolOper === \'OR\'}" ng-init="prevBoolOper = item.query.split(\';\')[$index-1].split(\',\')[3];multipleQueryItems=item.query.split(\';\').length>1"><prm-icon ng-if="$index===0 || prevBoolOper === \'OR\'" icon-type="svg" svg-icon-set="primo-ui" aria-label="{{\'nui.aria.savedQueriesList.arrow\' | translate}}" icon-definition="keyboard-return" class="prm-positive h-flipped"></prm-icon><span ng-if="$index!==0 && prevBoolOper !== \'OR\'">&nbsp;</span><span ng-if="$index!==0" class="ng-binding"><span translate="search-advanced.boolOperator.option.{{prevBoolOper}}"></span></span> <span class="ng-binding"><span ng-if="multipleQueryItems || !(item.query.split(\',\')[0]===\'any\' && item.query.split(\',\')[1]===\'contains\')" class="ng-binding"><span translate="search-advanced.scope.option.nui.advanced.index.{{q.split(\',\')[0]}}"></span> <span translate="search-advanced.precisionOperator.option.{{q.split(\',\')[1]}}"></span> </span>{{$ctrl.decodeString(q.split(\',\')[2])}}</span></div></h3></a><h4><strong><span translate="nui.favorites.search.scope"></span></strong> <span translate="{{\'tabbedmenu.\'+ item.tab +\'.label\'}}"></span> <i>/</i> <span translate="scopes.option.{{item.scope}}"></span></h4><p class="weak-text text-ellipsis"><prm-saved-query-filter [item]="item"></prm-saved-query-filter><md-tooltip><prm-saved-query-filter [item]="item"></prm-saved-query-filter></md-tooltip></p><h4>{{$ctrl.convertDate(item.creationDate)}}</h4><div class="md-secondary item-actions saved-query-actions result-item-actions" layout-xs="column" layout-sm="column" layout-gt-sm="row" layout-align="center center"><md-button ng-if="!$ctrl.isSearchHistory" class="md-icon-button" aria-label="{{\'nui.favorites.search.rss.tooltip\' | translate}}" ng-click="$ctrl.createRSS(item)"><prm-icon ng-if="!item.rsscreated" icon-type="svg" svg-icon-set="primo-ui" icon-definition="rss" aria-label="{{\'nui.favorites.search.rss.tooltip\' | translate}}" class="custom-button"></prm-icon><prm-icon ng-if="item.rsscreated" icon-type="svg" svg-icon-set="primo-ui" icon-definition="rss" aria-label="{{\'nui.favorites.search.rss.tooltip\' | translate}}" class="custom-button"></prm-icon><md-tooltip><span translate="nui.favorites.search.rss.tooltip"></span></md-tooltip></md-button><md-button ng-if="!$ctrl.isSearchHistory && $ctrl.isDisplayAlert(item)" class="md-icon-button" aria-label="{{\'nui.aria.savedQueriesList.alert\' | translate}}" ng-click="$ctrl.updateAlert(item,item.email)"><prm-icon ng-if="!item.alert" icon-type="svg" svg-icon-set="primo-ui" icon-definition="alert" aria-label="{{\'nui.aria.savedQueriesList.alert\' | translate}}" class="custom-button"></prm-icon><prm-icon ng-if="item.alert" icon-type="svg" svg-icon-set="primo-ui" icon-definition="alerted" aria-label="{{\'nui.aria.savedSearches.notAlert\' | translate}}" class="custom-button"></prm-icon><md-tooltip><span translate="nui.favorites.search.alert.single.tooltip"></span></md-tooltip></md-button><md-button ng-if="!$ctrl.isSearchHistory" class="md-icon-button" aria-label="{{\'nui.aria.savedQueriesList.remove\' | translate}}" ng-click="$ctrl.removeSearch(item.ID)"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="prm_unpin" aria-label="{{\'nui.aria.savedQueriesList.remove\' | translate}}" class="custom-button"></prm-icon><md-tooltip><span translate="nui.favorites.search.unpin.single.tooltip"></span></md-tooltip></md-button><md-button ng-if="$ctrl.isLoggedIn() && $ctrl.isSearchHistory   && $ctrl.isSearchHistoryItemInSavedSearches(item)" class="md-icon-button" aria-label="{{\'nui.favorites.search.unpin.single.tooltip\' | translate}}" ng-click="$ctrl.removeSearchHistoryItemFromSavedSearches(item.ID)"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="prm_unpin" aria-label="{{\'nui.favorites.search.unpin.single.tooltip\' | translate}}" class="custom-button"></prm-icon><md-tooltip><span translate="nui.favorites.search.unpin.single.tooltip"></span></md-tooltip></md-button><md-button ng-if="$ctrl.isLoggedIn() && $ctrl.isSearchHistory  && !$ctrl.isSearchHistoryItemInSavedSearches(item)" class="md-icon-button" aria-label="{{\'nui.favorites.search.save.single.tooltip\' | translate}}" ng-click="$ctrl.saveSearchHistoryItemToSavedSearches(item.ID)"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="prm_pin" aria-label="{{\'nui.favorites.search.save.single.tooltip\' | translate}}" class="custom-button"></prm-icon><md-tooltip><span translate="nui.favorites.search.save.single.tooltip"></span></md-tooltip></md-button><md-button ng-if="$ctrl.isSearchHistory" class="md-icon-button" aria-label="{{\'nui.favorites.search.remove.single.tooltip\' | translate}}" ng-click="$ctrl.removeSearchHistoryItem(item.ID)"><prm-icon icon-type="svg" svg-icon-set="action" icon-definition="ic_delete_24px" aria-label="{{\'nui.favorites.search.remove.single.tooltip\' | translate}}" class="custom-button"></prm-icon><md-tooltip><span translate="nui.favorites.search.remove.single.tooltip"></span></md-tooltip></md-button></div></div><div flex="20" flex-xs="0" flex-md="0" flex-lg="20" flex-xl="20" ng-class="{\'flex-lgPlus-15\': $ctrl.mediaQueries.lgPlus}"></div></md-list-item></md-list><form method="post" id="RRSFORM" name="RssForm" action="/" target="rssWindow"><input type="hidden" name="ver" value="2_1_4"> <input type="hidden" name="gatherpagestat" value="true"> <input type="hidden" name="subscribeRSS" value="A=Primo_Local&amp;I=VOLCANO&amp;S=F4CE012EC5946271B54EED773A411568&amp;G=&amp;IP=10.1.234.133&amp;SRVR=il-primoqa02.corp.exlibrisgroup.com&amp;P=rssSubscription&amp;OP=click&amp;TYP=Page_View_4.9.9.0&amp;O=%26%26rank%26%26VOLCANO%26VOLCANO%26%26&amp;O1=&amp;O2=primo_alma&amp;O3=&amp;O4=&amp;O5=972EXL.PCO.PSTG&amp;O6=&amp;O7=0&amp;O8=war&amp;O9=Auto1&amp;O10=&amp;O11=&amp;O12=0&amp;O13=&amp;O14=&amp;O15=&amp;O16=&amp;O17=default_tab&amp;O18=&amp;O19=&amp;O20=&amp;O23=Primo&amp;"> <input type="hidden" name="boombaseurl" value="https://beacon01.alma.exlibrisgroup.com/boom/apache_pb.gif"></form><div layout="row" layout-align="center center" class="padding-top-large"><md-button (click)="$ctrl.nextResults()" ng-if="$ctrl.hasNextResults()" translate="nui.brief.results.loadMore" class="button-confirm button-large"></md-button></div></div><prm-saved-queries-list-after parent-ctrl="$ctrl"></prm-saved-queries-list-after>');
$templateCache.put('components/search/searchResult/searchResultAvailability/searchResultAvailabilityLine.html','<div ng-repeat="availability in $ctrl.displayedAvailability track by $index" layout="row" layout-align="start start"><div layout="flex" ng-if="$ctrl.showTimer"><prm-icon ng-if="$ctrl.isOnline($index,availability)" availability-type icon-type="{{::$ctrl.availabilityLineIcons.onlineMaterial.type}}" svg-icon-set="{{::$ctrl.availabilityLineIcons.onlineMaterial.iconSet}}" icon-definition="{{::$ctrl.availabilityLineIcons.onlineMaterial.icon}}"></prm-icon><prm-icon ng-if="$ctrl.isPhysical($index,availability)" availability-type icon-type="{{::$ctrl.availabilityLineIcons.physicalMaterial.type}}" svg-icon-set="{{::$ctrl.availabilityLineIcons.physicalMaterial.iconSet}}" icon-definition="{{::$ctrl.availabilityLineIcons.physicalMaterial.icon}}"></prm-icon><md-button prm-brief-internal-button-marker ng-click="$ctrl.handleAvailability($index, $event);$event.preventDefault();" class="neutralized-button arrow-link-button" title="{{::$ctrl.getTranslatedLine(\'delivery.code.\'+availability)}}"><span class="button-content"><span class="availability-status {{availability}}" ng-class="{\'text-rtl\': $ctrl.switchToLtrString()}" translate="delivery.code.{{availability}}" translate-values="$ctrl.getPlaceHolders($ctrl.result)" translate-compile></span><span ng-if="($ctrl.showDisplayOtherLocations() || $ctrl.showDedupOtherLocations()) && $ctrl.isPhysical($index)" translate="delivery.and.other.locations"></span><prm-icon ng-if="$ctrl.isDirectLink($index)" external-link icon-type="{{$ctrl.availabilityLineIcons.externalLink.type}}" svg-icon-set="{{$ctrl.availabilityLineIcons.externalLink.iconSet}}" icon-definition="{{$ctrl.availabilityLineIcons.externalLink.icon}}" aria-label="{{\'nui.externalLink\' | translate}}"></prm-icon></span><prm-spinner class="inline-loader display-inline dark-on-light half-transparent" ng-if="$ctrl.result.rtaInProgress"></prm-spinner><prm-icon link-arrow icon-type="{{::$ctrl.availabilityLineIcons.arrowRight.type}}" svg-icon-set="{{::$ctrl.availabilityLineIcons.arrowRight.iconSet}}" icon-definition="{{::$ctrl.availabilityLineIcons.arrowRight.icon}}"></prm-icon></md-button></div></div><div ng-if="::$ctrl.isCollectionDiscoveryCollection" layout="row" layout-align="start start"><prm-icon availability-type icon-type="{{::$ctrl.availabilityLineIcons.physicalMaterial.type}}" svg-icon-set="{{::$ctrl.availabilityLineIcons.physicalMaterial.iconSet}}" icon-definition="{{::$ctrl.availabilityLineIcons.physicalMaterial.icon}}"></prm-icon><md-button prm-brief-internal-button-marker class="neutralized-button arrow-link-button" title="{{::$ctrl.getTranslatedLine(\'delivery.code.\'+availability)}}" ui-state="$ctrl.COLLECTION_DISCOVERY_STATE" ui-state-params="$ctrl.collectionStateParams" ui-sref-opts="{reload: true, inherit:false}" href=""><span class="button-content"><span>View the collection</span><prm-icon ng-if="$ctrl.isDirectLink($index)" external-link icon-type="{{$ctrl.availabilityLineIcons.externalLink.type}}" svg-icon-set="{{$ctrl.availabilityLineIcons.externalLink.iconSet}}" icon-definition="{{$ctrl.availabilityLineIcons.externalLink.icon}}" aria-label="{{\'nui.externalLink\' | translate}}"></prm-icon></span><prm-icon link-arrow icon-type="{{::$ctrl.availabilityLineIcons.arrowRight.type}}" svg-icon-set="{{::$ctrl.availabilityLineIcons.arrowRight.iconSet}}" icon-definition="{{::$ctrl.availabilityLineIcons.arrowRight.icon}}"></prm-icon></md-button></div><prm-search-result-availability-line-after parent-ctrl="$ctrl"></prm-search-result-availability-line-after>');
$templateCache.put('components/search/searchResult/searchResultFrbr/searchResultFrbrLine.html','<span ng-if="::($ctrl.isPc())"><md-divider></md-divider><span translate="nui.pcgroup.display"></span>. <a href="javascript:void(0)" (click)="$ctrl.getFrbrRecords(); $event.stopPropagation();" aria-label="{{\'nui.frbLine.seeAll\' | translate}}"><span translate="nui.pcgroup.link"></span></a></span><md-button prm-brief-internal-button-marker class="neutralized-button arrow-link-button" ng-if="::(!$ctrl.isPc())" (click)="$ctrl.getFrbrRecords(); $event.stopPropagation(); $event.preventDefault();"><span class="button-content"><prm-icon icon-type="{{::$ctrl.searchResultsIcons.frbrMultipleIcon.type}}" svg-icon-set="{{::$ctrl.searchResultsIcons.frbrMultipleIcon.iconSet}}" icon-definition="{{::$ctrl.searchResultsIcons.frbrMultipleIcon.icon}}"></prm-icon><span class="prm-notice"><span translate="nui.frbrversion.found" translate-values="$ctrl.getPlaceHolders($ctrl.result)"></span>. </span><span translate="nui.frbrversion.found.link"></span></span><prm-icon link-arrow icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-right"></prm-icon></md-button><prm-search-result-frbr-line-after parent-ctrl="$ctrl"></prm-search-result-frbr-line-after>');
$templateCache.put('components/search/searchResult/searchResultJournalIndication/searchResultJournalIndicationLine.html','<div ng-if="::($ctrl.isPeerreviewed() || $ctrl.isOpenaccess())" class="badges" layout="row" layout-align="start start"><div ng-if="::$ctrl.isPeerreviewed()" layout="row" class="badge-item prm-peer-reviewed"><md-tooltip md-direction="{{$ctrl.getPageWidgetDirection()}}"><span translate="nui.results.journalsearch.peer_reviewed.tooltip"></span></md-tooltip><prm-icon class="badge-icon" icon-type="{{::$ctrl.journalLineIcons.peerreviewed}}" svg-icon-set="{{::$ctrl.journalLineIcons.peerreviewed.iconSet}}" icon-definition="{{::$ctrl.journalLineIcons.peerreviewed.icon}}"></prm-icon><span class="badge-label" translate="nui.results.journalsearch.peer_reviewed"></span></div><div ng-if="::$ctrl.isOpenaccess()" layout="row" class="badge-item prm-open-access"><md-tooltip md-direction="{{$ctrl.getPageWidgetDirection()}}"><span translate="nui.results.journalsearch.open_access.tooltip"></span></md-tooltip><prm-icon class="badge-icon" icon-type="{{::$ctrl.journalLineIcons.openaccess}}" svg-icon-set="{{::$ctrl.journalLineIcons.openaccess.iconSet}}" icon-definition="{{::$ctrl.journalLineIcons.openaccess.icon}}"></prm-icon><span class="badge-label" translate="nui.results.journalsearch.open_access"></span></div></div><prm-search-result-journal-indication-line-after parent-ctrl="$ctrl"></prm-search-result-journal-indication-line-after>');
$templateCache.put('components/search/searchResult/searchResultList/noSearchResult.html','<md-card class="default-card zero-margin"><md-card-title><md-card-title-text><span translate class="md-headline">nui.noresults.title</span></md-card-title-text></md-card-title><md-card-content><p><span ng-if="!$ctrl.isSearchWithFilter" translate="nui.noresults.description" translate-value-term="{{$ctrl.term}}"></span> <span ng-if="$ctrl.isSearchWithFilter" translate="nui.noresultswithfilter.description" translate-value-term="{{$ctrl.term}}"></span></p><p><span translate class="bold-text">nui.noresults.suggestions</span></p><ul><li translate>nui.noresults.suggestions1</li><li translate>nui.noresults.suggestions2</li><li translate>nui.noresults.suggestions3</li><li translate>nui.noresults.suggestions4</li><li translate>nui.noresults.suggestions5</li></ul></md-card-content></md-card><prm-no-search-result-after parent-ctrl="$ctrl"></prm-no-search-result-after>');
$templateCache.put('components/search/searchResult/searchResultList/search-result-list.html','<div ng-show="$ctrl.resultsExists || $ctrl.isFavorites" class="list-items-list pages-separated-with-gaps" ng-class="{\'single-page\': ($ctrl.searchInfo.total <= 10) }" layout="column" id="mainResults" tabindex="0" role="main"><h2 class="accessible-only"><span ng-if="$ctrl.resultsExists && !$ctrl.isFavorites" translate="results.title"></span> <span ng-if="$ctrl.isFavorites && !$ctrl.isSavedQuery && $ctrl.favoritesService.getAllItems()" translate="nui.favorites.items"></span> <span ng-if="$ctrl.isFavorites && !$ctrl.isSavedQuery && $ctrl.favoritesService.getAllItems()" translate="nui.favorites.items"></span></h2><div class="margin-bottom-medium" ng-if="$ctrl.didUMean && !$ctrl.isFavorites && !$ctrl.controlledVocabulary"><md-card class="default-card padded-container-medium zero-margin"><prm-did-u-mean [did-u-mean]="$ctrl.didUMean"></prm-did-u-mean></md-card></div><div class="margin-bottom-medium" ng-if="!$ctrl.isFavorites && $ctrl.controlledVocabulary" ng-hide="$ctrl.searchInProgress"><md-card class="default-card padded-container-medium zero-margin"><prm-controlled-vocabulary [equivalent-term]="$ctrl.controlledVocabulary.equivalentTerm" [query]="$ctrl.query"></prm-controlled-vocabulary></md-card></div><div ng-if="$ctrl.searchInfo.total == 0 && !$ctrl.isFavorites" class="margin-bottom-medium"><prm-no-search-result [term]="$ctrl.searchString"></prm-no-search-result></div><div ng-if="$ctrl.resultsExists && !$ctrl.isFavorites" ng-hide="$ctrl.searchInfo.total == 0" class="results-title" layout="row" layout-align="start center"><span class="results-count" ng-if="$ctrl.totalResultVersion ==0" role="alert" aria-live="assertive">{{$ctrl.searchInfo.total | number}} <span ng-if="$ctrl.searchInfo.maxTotal > 0">(</span><span ng-if="$ctrl.searchInfo.maxTotal > 0" translate="brief.results.outof"></span> <span ng-if="$ctrl.searchInfo.maxTotal > 0">{{$ctrl.searchInfo.maxTotal | number}})</span> <span translate="results.title"></span> </span><span ng-if="$ctrl.totalResultVersion>0" translate="nui.results.linkedpnx.frbr" translate-values="{\'idx_0\' : $ctrl.searchInfo.total, \'idx_1\' : $ctrl.totalResultVersion}"></span><prm-add-query-to-saved-searches ng-if="$ctrl.isSignedIn() && !$ctrl.isCitationState()  && !$ctrl.isAtozSearch  && !$ctrl.isBrowsHeaderResults()"></prm-add-query-to-saved-searches><prm-personalize-results-button ng-if="!$ctrl.isCitationState() && !$ctrl.isAtozSearch && !$ctrl.isBrowsHeaderResults() && $ctrl.notLocal()"></prm-personalize-results-button></div><div ng-if="$ctrl.isFavorites && !$ctrl.isSavedQuery && $ctrl.favoritesService.getAllItems()" class="results-title results-title-favorites" layout="row"><md-checkbox aria-label="{{\'nui.favorites.SelectAll\' | translate}} {{(\'nui.favorites.items\' | translate:$ctrl.getPlaceHolders())}}" ng-click="$ctrl.selectOrUnselectAll()" ng-checked="$ctrl.allIn" md-indeterminate="$ctrl.indeterminateState"><span class="results-count" hide-sm hide-md><span translate="nui.favorites.items" translate-values="$ctrl.getPlaceHolders()"></span></span></md-checkbox></div><div ng-if="$ctrl.isFavorites && !$ctrl.isSavedQuery && !$ctrl.favoritesService.getAllItems()" class="results-title results-title-favorites" layout="row"><md-checkbox aria-label="Select all items" ng-model="$ctrl.briefResultService.selectAll" ng-change="$ctrl.selectAll()"><span class="results-count" hide-sm hide-md><span translate="nui.favorites.items" translate-values="$ctrl.getPlaceHoldersForFilter()"></span></span></md-checkbox></div><div ng-if="::(!$ctrl.isFavorites)"><div class="results-container zero-padding" layout="column" ng-disabled="search$ctrl.searchInProgress"><div class="list-item-wrapper" ng-class="{\'menu-open\':$ctrl.isExpanded($index), \'item-expanded\':$ctrl.isExpanded($index), \'last-item\': $last, \'first-in-page\':$ctrl.firstInPage($index)}" data-page="Page {{::$ctrl.calcPage($index)}}" ng-repeat-start="item in $ctrl.itemlist"><md-subheader in-view="$ctrl.onTopOfPageInView($ctrl.calcPage($index), $inview, $inviewInfo)" in-view-options="{generateDirection: true, throttle: 50}" id="searchResultPage{{::$ctrl.calcPage($index)}}" ng-if="::$ctrl.firstInPage($index)" ng-hide="$ctrl.searchInfo.total <= $ctrl.PAGE_SIZE"><span class="text tiny-uppercase-text">{{\'nui.paging.pagenumber\' | translate}} {{::$ctrl.calcPage($index)}}</span> <span class="sep"></span></md-subheader><prm-brief-result-container role="list" class="list-item" ng-class="{\'item-bookmarked\' : $ctrl.showPin(item)}" [item]="::item" [links]="item.delivery.link" [index]="::$ctrl.getItemIndex($index)" [isfavorites]="::$ctrl.isFavorites" [is-expanded]="$ctrl.isExpanded($index)" [item-height]="$ctrl.expandedItemHeight" (expand-item-event)="$ctrl.setExpandedItem($event, $index)"></prm-brief-result-container></div><prm-featured-results ng-repeat-end ng-if="$ctrl.showFeaturedResults($index) && $ctrl.showTimer" [featured-results]="$ctrl.featuredResult" ng-if="$ctrl.featuredResult" id="blat"></prm-featured-results><div layout="row" layout-align="center center" ng-if="$ctrl.isShowMoreResultButton() && $ctrl.searchInfo.total != 0" ng-hide="$ctrl.searchInProgress" class="padding-top-large"><md-button ng-if="$ctrl.hasNextResults()" (click)="$ctrl.nextResults()" translate="nui.brief.results.loadMore" class="button-confirm button-large"></md-button></div><prm-spinner ng-if="$ctrl.resultsExists && $ctrl.searchInProgress" class="half-transparent no-text bottom-loader" layout="row" layout-align="center end" layout-margin></prm-spinner></div><prm-page-nav-menu ng-if="$ctrl.shouldDisplayPagingWidget() && $ctrl.resultsExists && !$ctrl.searchInProgress" (load-next-results-event)="$ctrl.nextResults()" [current-page]="$ctrl.pageInView" [num-of-results]="$ctrl.searchInfo.total" [num-of-loaded-pages]="$ctrl.numOfLoadedPages" [show-components]="$ctrl.pagingConfigutation" [facet-to-left]="$ctrl.facetToLeft"></prm-page-nav-menu></div><md-list class="results-container" ng-if="::($ctrl.isFavorites && !$ctrl.isSavedQuery)" layout="column" infinite-scroll="$ctrl.favoritesService.nextResults()" infinite-scroll-distance="0" infinite-scroll-immediate-check="false"><md-list-item class="list-item-wrapper" ng-repeat="item in $ctrl.itemlist" ng-class="{\'menu-open\':$ctrl.isExpanded($index), \'item-expanded\':$ctrl.isExpanded($index), \'last-item\': $last}"><prm-brief-result-container class="list-item" [item]="::item" [links]="item.delivery.link" [index]="($index + 1)" [isfavorites]="::$ctrl.isFavorites" [is-expanded]="$ctrl.isExpanded($index)" [item-height]="$ctrl.expandedItemHeight" (expand-item-event)="$ctrl.setExpandedItem($event, $index)"></prm-brief-result-container></md-list-item><prm-spinner ng-if="$ctrl.resultsExists && $ctrl.searchInProgress" class="half-transparent no-text bottom-loader" layout="row" layout-align="center end" layout-margin></prm-spinner></md-list><prm-saved-queries-list ng-if="$ctrl.isSavedQuery" [(itemlist)]="$ctrl.itemlist" [(is-search-history)]="$ctrl.isSearchHistory"></prm-saved-queries-list><div ng-class="{\'list-spacer\': !$ctrl.isDisabled(), \'margin-bottom\': $ctrl.isDisabled()}"></div></div><prm-search-result-list-after parent-ctrl="$ctrl"></prm-search-result-list-after>');
$templateCache.put('components/search/searchResult/searchResultSortBy/searchResultSortBy.html','<md-input-container class="zero-margin"><md-select ng-model="$ctrl.sortBy" ng-change="$ctrl.onSortChange()" class="form-control" aria-label="sortBy"><md-option ng-repeat="option in ::$ctrl.options track by option.value" value="{{::option.value}}"><span translate="results.sortby.option.{{::option.text}}"></span></md-option></md-select></md-input-container><prm-search-result-sort-by-after parent-ctrl="$ctrl"></prm-search-result-sort-by-after>');
$templateCache.put('components/search/searchResult/searchResultThumbnail/search-result-thumbnail-container.html','<div><img class="fallback-img fallback-static" ng-if="!$ctrl.selectedThumbnailLink.linkURL" ng-src="{{::$ctrl.defaultThumbnailLink.linkURL}}"/> <img class="fallback-img" ng-if="!$ctrl.isMultipleVersions() && !$ctrl.selectedThumbnailLink.linkURL && !!$ctrl.defaultThumbnailLink.linkURL && !$ctrl.isVirtualBrowse" ng-src="{{::$ctrl.defaultThumbnailLink.linkURL}}"/> <img class="main-img fan-img-1" ng-class="{\'fan-img\' : $ctrl.isMultipleVersions() &&  !$ctrl.isFavoriteState() && $ctrl.selectedThumbnailLink.linkURL}" ng-if="$ctrl.selectedThumbnailLink.linkURL" ng-src="{{$ctrl.selectedThumbnailLink.linkURL}}" aria-label="{{$ctrl.getResourceTypeForDisplay() | translate}}{{\' \'}}{{\'nui.mediatype.image\' | translate}}" alt="{{$ctrl.getResourceTypeForDisplay() | translate}}{{\' \'}}{{\'nui.mediatype.image\' | translate}}"/> <img class="fan-img fan-img-2" aria-hidden="true" ng-if="$ctrl.isMultipleVersions() &&  !$ctrl.isFavoriteState() && $ctrl.selectedThumbnailLink.linkURL" ng-src="{{$ctrl.selectedThumbnailLink.linkURL}}" alt="{{$ctrl.getResourceTypeForDisplay() | translate}}{{\' \'}}{{\'nui.mediatype.image\' | translate}}"/> <img class="fan-img fan-img-3" aria-hidden="true" ng-if="$ctrl.isMultipleVersions() && !$ctrl.isFavoriteState() && $ctrl.selectedThumbnailLink.linkURL" ng-src="{{$ctrl.selectedThumbnailLink.linkURL}}" alt="{{$ctrl.getResourceTypeForDisplay() | translate}}{{\' \'}}{{\'nui.mediatype.image\' | translate}}"/></div><div ng-if="$ctrl.links" ng-init="$ctrl.go()"></div><prm-search-result-thumbnail-container-after parent-ctrl="$ctrl"></prm-search-result-thumbnail-container-after>');
$templateCache.put('components/search/topbar/bookmarkFilter/search-bookmark-filter.html','<md-button ng-if="!$ctrl.isFavorites && $ctrl.showSearchHistoryTab()" class="md-icon-button button-over-dark" aria-label="{{\'nui.favorites.gohistory.tooltip\' | translate}}" ng-click="$ctrl.goToSearchHistory()" ui-state="$ctrl.FAVORITES_STATE" ui-state-params="$ctrl.searchHistoryParams" ui-sref-opts="{reload: true, inherit:false}" href=""><md-tooltip md-delay="400"><span translate="nui.favorites.gohistory.tooltip"></span></md-tooltip><prm-icon aria-label="{{\'nui.favorites.gohistory.tooltip\' | translate}}" class="rotate-25" icon-type="svg" svg-icon-set="primo-ui" icon-definition="restore"></prm-icon></md-button><div id="fixed-buttons-holder" ng-class="{\'fixed-to-top\': $ctrl.fixedToTop()}" layout="row" layout-align="center center"><md-button ng-if="$ctrl.isFavorites" id="search-button" class="md-icon-button button-over-dark" aria-label="{{\'nui.favorites.goSearch.tooltip\' | translate}}" ng-click="$ctrl.goToSearch()" ui-state="$ctrl.uiState" ui-state-params="$ctrl.searchStateParams" ui-sref-opts="{reload: true, inherit:false}" href=""><md-tooltip md-delay="400"><span translate="nui.favorites.goSearch.tooltip"></span></md-tooltip><prm-icon aria-label="{{\'nui.favorites.goSearch.tooltip\' | translate}}" icon-type="svg" svg-icon-set="primo-ui" icon-definition="magnifying-glass" layout="row"></prm-icon></md-button><md-button ng-if="!$ctrl.isFavorites" id="favorites-button" class="md-icon-button button-over-dark" aria-label="{{\'nui.favorites.goFavorites.tooltip\' | translate}}" ng-click="$ctrl.goToFavorties()" ui-state="$ctrl.FAVORITES_STATE" ui-state-params="$ctrl.favoritesStateParams" ui-sref-opts="{reload: true, inherit:false}" href=""><md-tooltip md-delay="400"><span translate="nui.favorites.goFavorites.tooltip"></span></md-tooltip><prm-icon aria-label="{{\'nui.favorites.goFavorites.tooltip\' | translate}}" class="rotate-25" icon-type="svg" svg-icon-set="primo-ui" icon-definition="prm_pin"></prm-icon></md-button><div ng-if="$ctrl.fixedToTop()" class="ng-scope"><md-button id="back-to-top-button" class="zero-margin md-icon-button md-button md-ink-ripple" type="button" aria-label="User Action" ng-click="$ctrl.backToTop()"><prm-icon icon-type="{{$ctrl.backToTopIcon.backToTop.type}}" svg-icon-set="{{$ctrl.backToTopIcon.backToTop.iconSet}}" icon-definition="{{$ctrl.backToTopIcon.backToTop.icon}}"></prm-icon><div class="md-ripple-container"></div></md-button></div></div><prm-search-bookmark-filter-after parent-ctrl="$ctrl"></prm-search-bookmark-filter-after>');
$templateCache.put('components/search/topbar/logo/logo.html','<div class="product-logo" id="banner" aria-label="{{\'nui.aria.logo.link.open\' | translate}}"><a ng-href="{{$ctrl.logoURL}}" ng-click="$ctrl.logoClick()"><img class="logo-image" translate-attr="{ alt: \'nui.header.LogoAlt\' }" ng-src="{{$ctrl.iconLink}}"/></a></div><prm-logo-after parent-ctrl="$ctrl"></prm-logo-after>');
$templateCache.put('components/search/topbar/mainMenu/find-db-dialog-template.html','<md-dialog aria-label="List dialog" style="width: 100%"><md-dialog-content><iframe flex style="border-width:0px;width:100%;min-height:470px" src="{{ctrl.getUrl()}}"></iframe></md-dialog-content><md-dialog-actions layout="row"><span flex></span><md-button ng-click="ctrl.closeDialog()" class=""><span translate="nui.finddb.closeTooltip"></span></md-button><span ng-if="ctrl.displayFDBNothingSelectedErr" translate="finddb.nodatabases" class="prm-warn"></span><md-button ng-click="ctrl.goToSearch()" class="button-confirm"><span translate="nui.finddb.go.to.search"></span></md-button></md-dialog-actions></md-dialog>');
$templateCache.put('components/search/topbar/mainMenu/main-menu-full.html','<md-button md-autofocus id="mainMenuFullCloseButton" ng-click="$ctrl.closeLinksMenu()" class="md-icon-button close-button zero-margin" aria-label="{{\'default.nui.aria.links.close\' | translate}}"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="close"></prm-icon></md-button><md-content class="overlay-menu-content layout-full-height" layout="column" layout-align-gt-sm="start center" layout-align="start start"><div layout="column" layout-align="center start"><div layout-gt-xs="row" class="settings-container align-self-stretch" layout-align="center start"><div layout="row" layout-xs="column" class="padded-container-medium" layout-align="center center" layout-align-xs="start start"><prm-library-card-menu (action-event)="$ctrl.closeLinksMenu()" ng-if="!$ctrl.isDepositDisplay"></prm-library-card-menu><md-divider class="vertical-divider" hide-xs></md-divider><div class="overlay-menu-item" layout="row" layout-align="center center"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="earth"></prm-icon><prm-change-lang (change-lang-event)="$ctrl.closeLinksMenu()"></prm-change-lang></div><md-divider class="vertical-divider" hide-xs></md-divider><prm-authentication [is-logged-in]="$ctrl.isLoggedIn" layout="column" layout-align="start start"></prm-authentication></div></div><md-divider style="width: 80%" ng-if="!$ctrl.isDepositDisplay"></md-divider><div class="custom-links-container" layout="row" layout-wrap layout-align="center start" layout-align-sm="start start" ng-if="!$ctrl.isDepositDisplay"><md-card tabindex="0" role="button" ng-repeat="link in $ctrl.viewUrlsList" class="transparent-card" ng-click="$ctrl.updateUrl(link)" flex="100" flex-gt-xs="45" flex-gt-sm="30" md-ink-ripple="true"><md-card-title><md-card-title-text><span class="md-headline" translate="{{::$ctrl.getMenuLabel(link)}}"></span> <span class="md-subhead" translate="{{::$ctrl.getMenuTooltip(link)}}"></span></md-card-title-text></md-card-title></md-card></div></div></md-content>');
$templateCache.put('components/search/topbar/mainMenu/main-menu.html','<div class="top-nav-bar-links buttons-group" id="mainMenu" layout="row" role="list" layout-align="center center" flex="100"><md-button role="listitem" href="" class="zero-margin flex-button multi-line-button button-over-dark" layout="column" layout-align="center center" (click)="::$ctrl.updateUrl(urlConfig)" ng-repeat="urlConfig in $ctrl.viewUrlsList |limitTo:$ctrl.showCount()" ng-disabled="$ctrl.dispalyResourceSharing(urlConfig.url)" ng-hide="$ctrl.hideLegantoMenuLink(urlConfig.url,urlConfig.label)" aria-label="{{$ctrl.getMenuLabel(urlConfig) | translate}}"><span class="item-content" translate="{{::$ctrl.getMenuLabel(urlConfig)}}"></span><md-tooltip md-direction="down" md-delay="400" class="multi-row-tooltip slide-tooltip-anim"><span class="item-description popover animate-popover" translate="{{::$ctrl.getMenuTooltip(urlConfig)}}"></span></md-tooltip></md-button><md-button tabindex="0" role="listitem" class="zero-margin flex-button align-self-stretch" layout="column" layout-align="center center" ng-if="$ctrl.showMoreOptionsButton()" (click)="$ctrl.disableMobileMenu()" id="more-links-button" translate-attr-title="mainmenu.label.moreoptions"><span class="item-content" aria-label="More Options" translate-attr-title="mainmenu.label.moreoptions"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="dots-horizontal"></prm-icon></span><md-tooltip md-direction="down"><span class="item-description popover animate-popover" translate="nui.mainmenu.description.more"></span></md-tooltip></md-button><prm-top-nav-bar-links-after parent-ctrl="$ctrl"></prm-top-nav-bar-links-after></div><prm-main-menu-after parent-ctrl="$ctrl"></prm-main-menu-after>');
$templateCache.put('components/search/topbar/skipTo/skip-to.html','<md-button href="" tabindex="0" ng-repeat="link in $ctrl.skipLinks track by link" (click)="$ctrl.scrollToElementId(link)" aria-label="{{\'nui.aria.skip.\'+link | translate}}"><span translate>{{::(\'nui.aria.skip.\'+link)}}</span></md-button><prm-skip-to-after parent-ctrl="$ctrl"></prm-skip-to-after>');
$templateCache.put('components/search/topbar/userArea/authentication.html','<md-button ng-if="!$ctrl.isLoggedInIDP()" ng-click="$ctrl.handleLogin();" aria-label="{{\'eshelf.signin.title\' | translate}}" class="button-with-icon zero-margin"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="sign-in"></prm-icon><span translate="eshelf.signin.title"></span></md-button><md-button ng-if="$ctrl.isLoggedInIDP()" ng-click="$ctrl.handleLogout(authenticationMethod);" aria-label="{{\'eshelf.signout.title.link\' | translate}}" class="button-with-icon zero-margin"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="sign-out"></prm-icon><span ng-if="!$ctrl.idpLogout" translate="eshelf.signout.title.link"></span> <span ng-if="$ctrl.idpLogout" translate="nui.bor_info_failed.signout"></span></md-button><prm-authentication-after parent-ctrl="$ctrl"></prm-authentication-after>');
$templateCache.put('components/search/topbar/userArea/user-area.html','<md-button tabindex="-1" class="user-menu-button accessible-only" aria-label="{{\'nui.aria.userarea.open\' | translate}}" ng-click="$event.stopPropagation();$ctrl.enableMobileMenu()" hide-xs><div class="user-button-text" layout="column" layout-align="center start"><span class="user-name">{{$ctrl.displayedUser}} </span><span class="user-language text-uppercase" ng-if="$ctrl.displayLanguage" translate="mypref.language.option.{{$ctrl.selectedLanguage}}"></span></div></md-button><md-button class="user-menu-button" aria-label="{{\'nui.aria.userarea.open\' | translate}}" (click)="$ctrl.changUserStatus()" hide-xs><div class="user-menu-button-loader ng-scope layout-align-center-center layout-row" layout="row" layout-align="center center"><prm-spinner class="inline-loader ng-isolate-scope half-transparent no-text" ng-if="$ctrl.showSpinner()"></prm-spinner></div><div ng-if="!$ctrl.showSpinner()" ng-class="{\'user-button-text\': $ctrl.userName().length > 0}" layout="column" layout-align="center start"><span class="user-name">{{$ctrl.displayedUser}} </span><span class="user-language text-uppercase" ng-if="$ctrl.displayLanguage" translate="mypref.language.option.{{$ctrl.selectedLanguage}}"></span></div><md-tooltip md-direction="down" md-delay="400"><span ng-if="$ctrl.userName().length == 0" translate="nui.clisckSignIn.tooltip"></span> <span ng-if="$ctrl.userName().length > 0" translate="nui.clisckSignOut.tooltip"></span></md-tooltip></md-button><md-button class="mobile-menu-button zero-margin" aria-label="{{\'nui.aria.userarea.open\' | translate}}" (click)="$ctrl.enableMobileMenu()" style="min-width: 60px" ng-if="$ctrl.detectMobile()"><prm-icon [icon-type]="::$ctrl.topBarIcons.more.type" [svg-icon-set]="::$ctrl.topBarIcons.more.iconSet" [icon-definition]="::$ctrl.topBarIcons.more.icon"></prm-icon></md-button><md-fab-toolbar md-direction="left" md-open="$ctrl.showUserMenu" hide-xs (keydown)="$ctrl.keydownSupport($event)"><md-fab-trigger class="align-with-text" ng-class="{\'show-user-info\': $ctrl.userName().length > 0}"><md-button aria-hidden="true" tabindex="-1" class="button-with-icon zero-margin" aria-label="{{\'nui.aria.userarea.open\' | translate}}"><div style="opacity: 0" class="user-button-text" layout="column" layout-align="center start"><span class="user-name">{{$ctrl.displayedUser}}</span> <span class="user-language" ng-if="$ctrl.displayLanguage" translate="mypref.language.option.{{$ctrl.selectedLanguage}}"></span></div></md-button></md-fab-trigger><md-toolbar><md-fab-actions class="md-toolbar-tools zero-padding buttons-group"><prm-authentication layout="flex" [is-logged-in]="$ctrl.userName().length > 0"></prm-authentication><prm-change-lang aria-label="{{\'eshelf.signin.title\' | translate}}" ng-if="$ctrl.displayLanguage" label-type="icon"></prm-change-lang><prm-library-card-menu ng-if="::$ctrl.showUserArea"></prm-library-card-menu></md-fab-actions></md-toolbar></md-fab-toolbar><prm-user-area-after parent-ctrl="$ctrl"></prm-user-area-after>');
$templateCache.put('components/search/virtualBrowse/virtualBrowseItem/virtual-browse-item.html','<md-card><md-tooltip class="multi-row-tooltip" md-visible="isVisible" md-direction="top" md-delay="$ctrl.tooltipDelay"><prm-virtual-browse-item-info [virtual-browse-item]="$ctrl.virtualBrowseItem"></prm-virtual-browse-item-info></md-tooltip><div class="card-image"><prm-search-result-thumbnail-container ng-if="$ctrl.renderFlag && $ctrl.virtualBrowseItem.recordId" class="md-card-image" [is-virtual-browse]="true" [links]="$ctrl.virtualBrowseItem.thumbnails" [pnx-id]="$ctrl.virtualBrowseItem.recordId"></prm-search-result-thumbnail-container></div><md-card-title><md-card-title-text>{{$ctrl.virtualBrowseItem.title}}</md-card-title-text></md-card-title><md-card-content><p class="zero-margin"><span class="weak-text">{{$ctrl.virtualBrowseItem.date}}</span></p></md-card-content></md-card><prm-virtual-browse-item-after parent-ctrl="$ctrl"></prm-virtual-browse-item-after>');
$templateCache.put('components/search/virtualBrowse/virtualBrowseItemInfo/virtual-browse-item-info.html','<div layout="column"><h3 class="bold-text">{{$ctrl.virtualBrowseItem.title}}</h3><p><span>{{$ctrl.virtualBrowseItem.author}}</span> <span>{{$ctrl.virtualBrowseItem.date}}</span></p><p><span>{{$ctrl.virtualBrowseItem.callNumber}}</span></p></div><prm-virtual-browse-item-info-after parent-ctrl="$ctrl"></prm-virtual-browse-item-info-after>');
$templateCache.put('components/security/login/loginHelp/login-help.html','<div layout="column" layout-align="center center " class="collapsable-container" ng-class="$ctrl.showMoreInfo ? \'collapsed\':\'expanded\' "><md-button class="button-as-link" ng-show="$ctrl.showMoreInfoButton" ng-click="$ctrl.toggleShowMoreInfo()" tabindex="-1 "><span translate="nui.login.help"></span></md-button><md-content layout="column" layout-padding ng-show="$ctrl.showMoreInfo"><div ng-repeat="helpLink in $ctrl.loginHelpLinks"><a href="{{ helpLink.linkURL }}" target="_blank"><span translate="{{helpLink.label}}"></span><prm-icon external-link [icon-type]="::$ctrl.loginIcons.externalLinkIcon.type" [svg-icon-set]="::$ctrl.loginIcons.externalLinkIcon.iconSet" [icon-definition]="::$ctrl.loginIcons.externalLinkIcon.icon"></prm-icon></a></div><p ng-show="$ctrl.showHelpDescription" translate="nui.help.description"></p></md-content></div><prm-login-help-after parent-ctrl="$ctrl"></prm-login-help-after>');
$templateCache.put('components/security/login/loginItem/login-item.html','<div class="md-list-item-text" layout="column"><div layout="row"><h3 class="list-item-title md-display-3" translate="{{$ctrl.getProfileLinkForDisplay( $ctrl.authenticationMethod.index )}}"></h3><prm-icon external-link ng-show="$ctrl.authenticationMethod.isExternal()" icon-type="{{::$ctrl.loginIcons.externalLinkIcon.type}}" svg-icon-set="{{::$ctrl.loginIcons.externalLinkIcon.iconSet}}" icon-definition="{{::$ctrl.loginIcons.externalLinkIcon.icon}}"></prm-icon></div><p translate="{{$ctrl.getProfileLinkDescriptionForDisplay( $ctrl.authenticationMethod.index )}}"></p></div><prm-login-item-after parent-ctrl="$ctrl"></prm-login-item-after>');
$templateCache.put('components/collectionDiscovery/collectionGallery/galleryCollectionsList/galleryCollection/gallery-collection.html','<a class="collection-folder" layout="column" ng-mouseenter="$ctrl.showFolderInfo = true" ng-mouseleave="$ctrl.showFolderInfo = false" ng-class="{\'is-active\': $ctrl.showFolderInfo}" ui-state="$ctrl.COLLECTION_DISCOVERY_STATE" ui-state-params="$ctrl.collectionStateParams" ui-sref-opts="{reload: true, inherit:false, }" aria-label="{{::$ctrl.title | translate}}{{\' \'}}{{::(\'nui.aria.collectionDiscovery.collectionFolder\' | translate:{\'idx_1\': $ctrl.index, \'idx_2\': $ctrl.totalCollections})}}{{\' \'}}{{$ctrl.description | translate}}"><div class="collection-overlay" layout="column" layout-align="start-start"><div class="item-title" layout="column" layout-align="start start"><div class="item-meta" layout-align="start-center"><span ng-if="!$ctrl.isGalleryLobby" class="item-type">{{\'nui.colldiscovery.subcollection.title\' | translate}}</span> <span ng-if="$ctrl.isGalleryLobby" class="item-type">{{\'nui.colldiscovery.collection.title\' | translate}}</span></div><h3><span>{{::$ctrl.title}}</span></h3></div><div class="item-info"><div class="item-meta" layout-align="start-center"><span class="item-type">{{\'nui.colldiscovery.subcollections.title\' | translate}}</span></div><h3><span>{{$ctrl.title}}</span></h3><p>{{$ctrl.description}}</p></div></div><div class="collection-images" layout="row" layout-wrap flex><div ng-repeat="thumbnail in $ctrl.thumbnails track by $index" style="background-image: url({{thumbnail}})"></div></div><div class="item-actions result-item-actions"><prm-save-to-favorites-button [recordid]="::$ctrl.collectionRecordId" [get-record-function]="::$ctrl.getRecordFunction"></prm-save-to-favorites-button></div></a><prm-gallery-collection-after parent-ctrl="$ctrl"></prm-gallery-collection-after>');
$templateCache.put('components/collectionDiscovery/collectionGallery/galleryItemsList/galleryItem/gallery-item.html','<div class="collection-element" ng-click="$ctrl.openFullViewDialog($event)" ng-if="::$ctrl.itemsViewStyle === \'gallery\'" ng-mouseenter="$ctrl.itemInFocus = true" ng-mouseleave="$ctrl.itemInFocus = false" ng-class="{\'is-active\': $ctrl.itemInFocus}" aria-label="{{::\'nui.aria.collectionDiscovery.collectionItem\' | translate: {\'idx_1\': $ctrl.index, \'idx_2\': $ctrl.totalItems} }}"><figure><div class="image-holder" layout="row" layout-align="center center"><img ng-src="{{::$ctrl.thumbnail}}" alt=""></div></figure><div class="item-info"><span class="resource-type"><span class="tiny-uppercase-text">{{::\'mediatype.\'+$ctrl.type | translate}}</span></span><h3 class="item-title">{{::$ctrl.title}}</h3><p class="item-displayLine">{{card.DisplayLine1}}</p></div><div class="item-actions result-item-actions"><prm-save-to-favorites-button [item]="$ctrl.item" [is-favorites]="false" [index]="$ctrl.index + 1"></prm-save-to-favorites-button></div></div><div class="collection-element" ng-click="$ctrl.openFullViewDialog($event)" layout="column" ng-if="::$ctrl.itemsViewStyle === \'grid\'" ng-mouseenter="$ctrl.itemInFocus = true" ng-mouseleave="$ctrl.itemInFocus = false" ng-class="{\'is-active\': $ctrl.itemInFocus}" aria-label="{{::\'nui.aria.collectionDiscovery.collectionItem\' | translate: {\'idx_1\': $ctrl.index, \'idx_2\': $ctrl.totalItems} }}"><figure><div class="image-holder" layout="row" layout-align="center center"><img ng-src="{{::$ctrl.thumbnail}}" alt=""></div><div class="item-actions result-item-actions"><prm-save-to-favorites-button [item]="$ctrl.item" [is-favorites]="false" [index]="$ctrl.index + 1"></prm-save-to-favorites-button></div></figure><div class="item-info"><span class="resource-type"><span class="tiny-uppercase-text">{{::\'mediatype.\'+$ctrl.type | translate}}</span></span><h3 class="item-title">{{::$ctrl.title}}</h3><p class="item-displayLine">{{item.DisplayLine1}}</p></div></div><prm-gallery-item-after parent-ctrl="$ctrl"></prm-gallery-item-after>');
$templateCache.put('components/infra/widgets/alerts/alertTemplates/general.html','<div layout="row" class="bar alert-bar zero-margin-bottom" layout-align="center center"><span class="bar-text margin-right-small" dynamic-html="$ctrl.htmlMsg"></span><md-button (click)="$ctrl.onClose()"><prm-icon icon-type="{{::$ctrl.favoritesIcons.removeLabel.type}}" svg-icon-set="{{::$ctrl.favoritesIcons.removeLabel.iconSet}}" icon-definition="{{::$ctrl.favoritesIcons.removeLabel.icon}}"></prm-icon><span translate="nui.message.dismiss"></span></md-button></div>');
$templateCache.put('components/infra/widgets/alerts/alertTemplates/requestAlert.html','<div layout="row" class="bar alert-bar zero-margin-bottom" layout-align="center center" dynamic-html="$ctrl.htmlMsg"></div>');
$templateCache.put('components/infra/widgets/alerts/alertTemplates/signIn.html','<div layout="row" class="bar alert-bar" layout-align="center center" ng-if="$ctrl.showMessage() && $ctrl.isGuestOrOffcampusForSignIn()"><span class="bar-text" translate="{{$ctrl.htmlMsg}}"></span><prm-authentication [is-logged-in]="$ctrl.userName().length > 0" [idp-logout]="$ctrl.idpLogout" flex="none"></prm-authentication><md-divider></md-divider><md-button aria-label="{{::(\'nui.message.dismiss\' | translate)}}" (click)="$ctrl.onClose()" class="dismiss-alert-button zero-margin" ng-class="$ctrl.mediaQueries.xs ? \'md-icon-button\' : \'button-with-icon\' "><prm-icon aria-label="{{::(\'nui.message.dismiss\' | translate)}}" icon-type="{{::$ctrl.favoritesIcons.removeLabel.type}}" svg-icon-set="{{::$ctrl.favoritesIcons.removeLabel.iconSet}}" icon-definition="{{::$ctrl.favoritesIcons.removeLabel.icon}}"></prm-icon><span translate="nui.message.dismiss" hide-xs></span></md-button></div>');
$templateCache.put('components/infra/widgets/alerts/alertTemplates/simple.html','<div layout="row" class="bar alert-bar zero-margin-bottom" layout-align="center center"><span class="bar-text" translate="{{$ctrl.htmlMsg}}"></span><md-button (click)="$ctrl.onClose()"><prm-icon icon-type="{{::$ctrl.favoritesIcons.removeLabel.type}}" svg-icon-set="{{::$ctrl.favoritesIcons.removeLabel.iconSet}}" icon-definition="{{::$ctrl.favoritesIcons.removeLabel.icon}}"></prm-icon><span translate="nui.message.dismiss"></span></md-button></div>');
$templateCache.put('components/infra/widgets/alerts/alertTemplates/simpleWithoutDismiss.html','<div layout="row" class="bar alert-bar zero-margin-bottom" layout-align="center center"><span class="bar-text" translate="{{$ctrl.htmlMsg}}"></span></div>');
$templateCache.put('components/search/fullView/getit/almaMashup/almaMashup.html','<iframe iframe-onload="{{::$ctrl.iframeResize()}}" class="mashup-iframe" ng-src="{{$ctrl.getLink()}}" style="width:100%;border:none" ng-if="::$ctrl.isLinkAvailable()"/><prm-alma-mashup-after parent-ctrl="$ctrl"></prm-alma-mashup-after>');
$templateCache.put('components/search/fullView/getit/almaMoreInst/alma-more-inst.html','<h3 class="medium-uppercase-bold"><span translate="nui.brief.results.tabs.getit_other"></span></h3><md-tabs md-dynamic-height md-selected="$ctrl.selectedTab" class="tabs-as-app hidden-tabs"><md-tab label="Institutions List" id="{{$ctrl.TABS.INST_LIST}}"><md-content><md-list><md-list-item class="md-2-line separate-list-items narrow-list-item" ng-repeat="almaInst in $ctrl.getInstitutions()"><md-button class="neutralized-button layout-full-width layout-display-flex" (click)="$ctrl.selectedTab = $ctrl.TABS.MASHUP; $ctrl.loadMashup(almaInst)"><div layout="row" flex="100" layout-align="space-between center"><div class="md-list-item-text"><h3 translate="{{almaInst.inst}}"></h3><p><span class="availability-status {{almaInst.availabilityStatus}}" translate="fulldisplay.availabilty.{{almaInst.availabilityStatus}}"></span></p></div><prm-icon prm-aria-label="Go to getit" icon-type="{{$ctrl.opacLocations.rightArrow.type}}" svg-icon-set="{{$ctrl.opacLocations.rightArrow.iconSet}}" icon-definition="{{$ctrl.opacLocations.rightArrow.icon}}"></prm-icon></div></md-button></md-list-item></md-list></md-content></md-tab><md-tab label="Alma Mashup" id="{{$ctrl.TABS.MASHUP}}"><md-button (click)="$ctrl.selectedTab = $ctrl.TABS.INST_LIST; $ctrl.unloadMashup()" class="back-button button-with-icon zero-margin"><prm-icon icon-type="{{$ctrl.opacLocations.leftArrow.type}}" svg-icon-set="{{$ctrl.opacLocations.leftArrow.iconSet}}" icon-definition="{{$ctrl.opacLocations.leftArrow.icon}}" aria-label="{{\'nui.getit_other.back\' | translate}}"></prm-icon><span translate="nui.getit_other.back"></span></md-button><prm-alma-mashup ng-if="$ctrl.links.length > 0" [links-array]="$ctrl.links"></prm-alma-mashup></md-tab></md-tabs><prm-alma-more-inst-after parent-ctrl="$ctrl"></prm-alma-more-inst-after>');
$templateCache.put('components/search/fullView/getit/almaOtherMembers/alma-other-members.html','<h3 class="medium-uppercase-bold"><span translate="nui.brief.results.tabs.getit_other"></span></h3><md-tabs md-dynamic-height md-selected="$ctrl.selectedTab" class="tabs-as-app hidden-tabs"><md-tab label="Institutions List" id="{{$ctrl.TABS.INST_LIST}}"><md-content><md-list><md-list-item class="md-2-line separate-list-items narrow-list-item" ng-repeat="almaInst in $ctrl.getInstitutions()"><md-button class="neutralized-button layout-full-width layout-display-flex" (click)="$ctrl.selectedTab = $ctrl.TABS.OPAC; $ctrl.loadOpac(almaInst)"><div layout="row" flex="100" layout-align="space-between center"><div class="md-list-item-text"><h3 translate="{{almaInst.instName}}"></h3><p><span class="availability-status {{almaInst.availabilityStatus}}" translate="fulldisplay.availabilty.{{almaInst.availabilityStatus}}"></span></p></div><prm-icon prm-aria-label="Go to getit" icon-type="{{$ctrl.opacLocations.rightArrow.type}}" svg-icon-set="{{$ctrl.opacLocations.rightArrow.iconSet}}" icon-definition="{{$ctrl.opacLocations.rightArrow.icon}}"></prm-icon></div></md-button></md-list-item></md-list></md-content></md-tab><md-tab label="Alma Member Getit" id="{{$ctrl.TABS.OPAC}}"><md-button (click)="$ctrl.selectedTab = $ctrl.TABS.INST_LIST; $ctrl.unloadOpac()" class="back-button button-with-icon zero-margin"><prm-icon icon-type="{{$ctrl.opacLocations.leftArrow.type}}" svg-icon-set="{{$ctrl.opacLocations.leftArrow.iconSet}}" icon-definition="{{$ctrl.opacLocations.leftArrow.icon}}" aria-label="{{\'nui.getit_other.back\' | translate}}"></prm-icon><span translate="nui.getit_other.back"></span></md-button></md-tab></md-tabs><prm-alma-other-members-after parent-ctrl="$ctrl"></prm-alma-other-members-after>');
$templateCache.put('components/search/fullView/getit/almaViewit/almaViewit.html','<prm-spinner class="margin-left-medium inline-loader dark-on-light" ng-if="!$ctrl.isCalculateSvcDone"></prm-spinner><prm-alert-bar [alert-object]="$ctrl.signInLink" ng-if="$ctrl.showSignInLink()"></prm-alert-bar><prm-alma-viewit-items ng-repeat="service in $ctrl.servicesList" ng-if="($ctrl.isCalculateSvcDone && $ctrl.getServices(service.name) && $ctrl.getServices(service.name).length)" [services]="$ctrl.getServices(service.name)" [header]="service.header"></prm-alma-viewit-items><prm-alma-viewit-after parent-ctrl="$ctrl"></prm-alma-viewit-after>');
$templateCache.put('components/search/fullView/getit/almaViewit/almaViewitItems.html','<div class="spaced-rows"><span translate="{{$ctrl.header}}" class="bold-text"/></div><md-list layout="column" ng-if="$ctrl.services" class="separate-list-items"><md-list-item ng-repeat="item in $ctrl.services track by $index" class="md-3-line in-element-dialog-parent" (click)="$ctrl.onClick(item)" tabindex="0" aria-label="item.packageName" ng-class="{\'pointer\' : $ctrl.isLinkable(item)}"><div class="in-element-dialog-context" layout="row" flex><div class="md-list-item-text" layout="row" layout-wrap flex><div flex flex-xs="100"><p ng-if="item.relatedTitle && item.serviceType===\'ELECTRONIC_RELATED\'" ng-bind="item.relatedTitle"></p><h3 ng-if="item.packageName"><a class="item-title" ng-if="$ctrl.isLinkable(item)" ng-href="{{item.serviceUrl}}" ng-bind="item.packageName" ng-click="$event.preventDefault()"></a> <span ng-if="!$ctrl.isLinkable(item)" ng-bind="item.packageName"></span></h3><h4 ng-if="item.availiability" ng-repeat="ava in item.parsedAvailiability">{{ava}}</h4><h4 ng-if="item.numberOfFiles || item.fileType"><span ng-if="item.numberOfFiles">{{item.numberOfFiles + \' \'}}</span> <span ng-if="item.numberOfFiles" translate="c.searchhtmlCreator.files"></span> <span ng-if="item.fileType">{{\' (\' + item.fileType + \')\'}}</span></h4><h4 ng-if="item.serviceNotAvailable"><span ng-bind="item.serviceNotAvailable"/><span ng-if="item.serviceNotAvailableReason" translate="due to"/><span ng-if="item.serviceNotAvailableReason" ng-bind="item.serviceNotAvailableReason"></span></h4><p class="text-italic ng-scope layout-row weak-text" ng-if="item.authNote" layout="row"><span flex="none" class="flex-none"><prm-icon ng-class="" icon-type="{{$ctrl.viewItIcons.authNote.type}}" svg-icon-set="{{$ctrl.viewItIcons.authNote.iconSet}}" icon-definition="{{$ctrl.viewItIcons.authNote.icon}}"></prm-icon></span><span class="ng-binding" ng-bind="item.authNote"></span></p><p class="text-italic ng-scope layout-row weak-text" ng-if="item.publicNote" layout="row"><span flex="none" class="flex-none"><prm-icon ng-class="" ng-if="item.serviceType != \'DIGITAL\'" icon-type="{{$ctrl.viewItIcons.publicNote.type}}" svg-icon-set="{{$ctrl.viewItIcons.publicNote.iconSet}}" icon-definition="{{$ctrl.viewItIcons.publicNote.icon}}"></prm-icon><prm-icon ng-class="" ng-if="item.serviceType === \'DIGITAL\' && !item.hasAccess" icon-type="{{$ctrl.viewItIcons.lock.type}}" svg-icon-set="{{$ctrl.viewItIcons.lock.iconSet}}" icon-definition="{{$ctrl.viewItIcons.lock.icon}}"></prm-icon></span><span class="ng-binding" ng-bind="item.publicNote"/></p><p (click)="$ctrl.disableClick($event)" ng-if="item.toggleLicense" class="ng-scope license" style="padding: 1em 1.5em"><span class="ng-binding ng-scope" ng-repeat="line in item.licence">{{line}}<br></span></p></div></div><div class="_md-secondary-container"><md-button ng-if="item.licenceExist===\'true\'" class="button-link" prm-aria-label="{{\'nui.aria.almaViewitItems.license\' | translate}}" (click)="$ctrl.getLicense(item,$event)" aria-label="license"><span ng-if="!item.toggleLicense" class="ng-scope" translate="c.uresolver.viewit.license.show_license"></span> <span ng-if="item.toggleLicense" class="ng-scope" translate="c.uresolver.viewit.license.hide_license"></span></md-button><prm-icon ng-if="item.serviceType != \'DIGITAL\' || item.hasAccess===true" layout-margin icon-type="{{$ctrl.availabilityLineIcons.externalLink.type}}" svg-icon-set="{{$ctrl.availabilityLineIcons.externalLink.iconSet}}" icon-definition="{{$ctrl.availabilityLineIcons.externalLink.icon}}"></prm-icon><prm-icon ng-class="" ng-if="item.serviceType === \'DIGITAL\' && item.hasAccess===false" layout-margin icon-type="{{$ctrl.viewItIcons.lock.type}}" svg-icon-set="{{$ctrl.viewItIcons.lock.iconSet}}" icon-definition="{{$ctrl.viewItIcons.lock.icon}}"></prm-icon></div></div></md-list-item></md-list><prm-alma-viewit-items-after parent-ctrl="$ctrl"></prm-alma-viewit-items-after>');
$templateCache.put('components/search/fullView/getit/howToGetit/howovp.html','<prm-spinner class="margin-left-medium inline-loader dark-on-light" ng-if="$ctrl.servicesListIsLoading"></prm-spinner><div ng-if="$ctrl.services.serviceinfo && $ctrl.services.serviceinfo.length > 0"><md-list layout="column" class="separate-list-items"><md-list-item ng-repeat="service in $ctrl.services.serviceinfo track by $index"><md-button class="neutralized-button layout-full-width layout-display-flex" (click)="$ctrl.onClick(service)" md-ink-ripple="red"><div class="in-element-dialog-context" layout="row" flex><div class="md-list-item-text layout-wrap flex" layout="row"><div flex flex-xs="100" layout="column"><span ng-if="service[\'service-type\'] !== \'OvL\'" translate="{{service.type}}"></span> <span ng-if="service[\'service-type\'] === \'OvL\'"><a ng-href="{{service[\'link-to-service\']}}" ng-click="$event.preventDefault()" translate="{{service.type}}"></a></span> <span class="italic-text weak-text" ng-if="service.publicNote.length > 0">{{service.publicNote}}</span> <span ng-if="!service.publicNote.length > 0">&nbsp;</span></div><prm-icon ng-if="!$ctrl.isOvp(service)" class="padding-right-small" icon-type="{{$ctrl.opacLocations.externalLinkIcon.type}}" svg-icon-set="{{$ctrl.opacLocations.externalLinkIcon.iconSet}}" icon-definition="{{$ctrl.opacLocations.externalLinkIcon.icon}}" aria-label="{{\'service.type\' | translate}}"><span translate="{{service.type}}"></span></prm-icon><prm-icon ng-if="$ctrl.isOvp(service)" class="padding-right-small" icon-type="{{$ctrl.opacLocations.rightArrow.type}}" svg-icon-set="{{$ctrl.opacLocations.rightArrow.iconSet}}" icon-definition="{{$ctrl.opacLocations.rightArrow.icon}}" aria-label="{{\'service.type\' | translate}}"></prm-icon></div></div></md-button></md-list-item></md-list></div><div ng-if="$ctrl.isLoggedIn() && (!$ctrl.services.serviceinfo || $ctrl.services.serviceinfo.length == 0)"><span translate="nui.request.norequests"></span></div><alma-howovp-after parent-ctrl="$ctrl"></alma-howovp-after>');
$templateCache.put('components/search/fullView/getit/howToGetit/htgi-back-button.html','<md-button ng-if="!$ctrl.historyStack.isEmpty()" (click)="$ctrl.goBack()" class="back-button button-with-icon zero-margin"><prm-icon icon-type="{{$ctrl.opacLocations.leftArrow.type}}" svg-icon-set="{{$ctrl.opacLocations.leftArrow.iconSet}}" icon-definition="{{$ctrl.opacLocations.leftArrow.icon}}" aria-label="{{\'nui.aria.locationItems.backToLocations\' | translate}}"></prm-icon><span translate="{{$ctrl.label}}"></span></md-button><alma-htgi-back-button-after parent-ctrl="$ctrl"></alma-htgi-back-button-after>');
$templateCache.put('components/search/fullView/getit/howToGetit/htgi-service.html','<prm-spinner class="margin-left-medium inline-loader dark-on-light" ng-if="!$ctrl.isCalculateSvcIdDone"></prm-spinner><div layout="column" layout-fill><alma-htgi-tabs ng-if="$ctrl.isCalculateSvcIdDone" [item]="$ctrl.item"></alma-htgi-tabs></div><alma-htgi-svc-after parent-ctrl="$ctrl"></alma-htgi-svc-after>');
$templateCache.put('components/search/fullView/getit/howToGetit/htgi-tabs.html','<prm-alert-bar [alert-object]="$ctrl.reqAlert"></prm-alert-bar><prm-spinner class="margin-left-medium inline-loader dark-on-light" ng-if="!$ctrl.isCalculateSvcIdDone"></prm-spinner><md-tabs md-dynamic-height md-selected="$ctrl.selectedTab" class="tabs-as-app hidden-tabs"><md-tab label="Requests List"><md-content><alma-howovp [item]="$ctrl.item" (change-tab-event)="$ctrl.onChangeTabEvent($event)"></alma-howovp></md-content></md-tab><md-tab label="Dummy"/><md-tab label="Request Form"><alma-htgi-back-button [history-stack]="::$ctrl.backToHistoryStack" (change-tab-event)="$ctrl.onChangeTabEvent($event)"></alma-htgi-back-button><md-content><prm-request (change-tab-event)="$ctrl.onChangeTabEvent($event)" [item]="$ctrl.item" [service]="$ctrl.service" layout="column"></prm-request></md-content></md-tab><md-tab label="copyrights"><alma-htgi-back-button [history-stack]="::$ctrl.backToHistoryStack" (change-tab-event)="$ctrl.onChangeTabEvent($event)"></alma-htgi-back-button><md-content layout="column"><prm-copyright (change-tab-event)="$ctrl.onChangeTabEvent($event)"></prm-copyright></md-content></md-tab><md-tab label="Request reply"><alma-htgi-back-button [history-stack]="::$ctrl.backToHistoryStack" (change-tab-event)="$ctrl.onChangeTabEvent($event)"></alma-htgi-back-button><md-content layout="column"><div ng-class="$ctrl.responseStatus.isSuccess ? \'success-bar\': \'error-bar\'" class="bar large-bar" layout="row" layout-align="center center" layout-padding layout-fill><span>{{$ctrl.responseStatus.msg === \'ok\' ? \'Your request was successfully placed\' : $ctrl.responseStatus.msg}}</span></div></md-content></md-tab></md-tabs><alma-htgi-tabs-after parent-ctrl="$ctrl"></alma-htgi-tabs-after>');
$templateCache.put('components/search/fullView/getit/opac/back-button.html','<md-button ng-if="!$ctrl.historyStack.isEmpty()" (click)="$ctrl.goBack()" class="back-button button-with-icon zero-margin"><prm-icon icon-type="{{$ctrl.opacLocations.leftArrow.type}}" svg-icon-set="{{$ctrl.opacLocations.leftArrow.iconSet}}" icon-definition="{{$ctrl.opacLocations.leftArrow.icon}}" aria-label="{{\'nui.aria.locationItems.backToLocations\' | translate}}"></prm-icon><span translate="{{$ctrl.label}}"></span></md-button><prm-opac-back-button-after parent-ctrl="$ctrl"></prm-opac-back-button-after>');
$templateCache.put('components/search/fullView/getit/opac/opac.html','<prm-spinner class="margin-left-medium inline-loader dark-on-light" ng-if="!$ctrl.isCalculateSvcIdDone"></prm-spinner><div layout="column" layout-fill><prm-request-services ng-if="$ctrl.serviceMode ===\'ovp\' && $ctrl.isCalculateSvcIdDone" [item]="$ctrl.item" (change-tab-event)="$ctrl.onChangeTabEvent($event)"></prm-request-services><prm-requests-services-ovl ng-if="$ctrl.serviceMode ===\'ovl\'" [item]="$ctrl.item"></prm-requests-services-ovl></div><md-tabs md-dynamic-height md-selected="$ctrl.selectedTab" class="tabs-as-app hidden-tabs" ng-if="$ctrl.serviceMode ===\'ovp\' || $ctrl.hasLocations()"><md-tab label="Main" md-on-select="requestsLimit(15); showRequestOptions(); $ctrl.focusOnLocations();"><prm-opac-back-button [history-stack]="::$ctrl.backToHistoryStack" (change-tab-event)="$ctrl.onChangeTabEvent($event)"></prm-opac-back-button><md-content class="overflow-hidden"><prm-locations ng-if="$ctrl.isCalculateSvcIdDone" [item]="$ctrl.item" action="" (change-tab-event)="$ctrl.onChangeTabEvent($event)"></prm-locations></md-content></md-tab><md-tab label="two" md-on-select="showBackButton(); hideRequestOptions()"><div class="tab-header"><prm-opac-back-button ng-if="!$ctrl.isSingleLoc($ctrl.item)" [history-stack]="::$ctrl.backToHistoryStack" (change-tab-event)="$ctrl.onChangeTabEvent($event)"></prm-opac-back-button></div><md-content class="overflow-hidden"><prm-location-items ng-if="$ctrl.isCalculateSvcIdDone" [item]="$ctrl.item" [loc]="$ctrl.loc" (change-tab-event)="$ctrl.onChangeTabEvent($event)"></prm-location-items></md-content></md-tab><md-tab label="Request Form" md-on-select="showBackButton(); checkForRequestOptions()"><prm-opac-back-button [history-stack]="::$ctrl.backToHistoryStack" (change-tab-event)="$ctrl.onChangeTabEvent($event)"></prm-opac-back-button><md-content><prm-request (change-tab-event)="$ctrl.onChangeTabEvent($event)" [item]="$ctrl.item" [service]="$ctrl.service" layout="column"></prm-request></md-content></md-tab><md-tab label="Request reply" md-on-select="showBackButton()"><prm-opac-back-button [history-stack]="::$ctrl.backToHistoryStack" (change-tab-event)="$ctrl.onChangeTabEvent($event)"></prm-opac-back-button><md-content layout="column"><prm-copyright (change-tab-event)="$ctrl.onChangeTabEvent($event)"></prm-copyright></md-content></md-tab><md-tab label="Request reply" md-on-select="showBackButton()"><prm-opac-back-button [history-stack]="::$ctrl.backToHistoryStack" [request-status]="$ctrl.responseStatus.isSuccess" (change-tab-event)="$ctrl.onChangeTabEvent($event)"></prm-opac-back-button><md-content layout="column"><div ng-class="$ctrl.responseStatus.isSuccess ? \'success-bar\': \'error-bar\'" class="bar large-bar" layout="row" layout-align="center center" layout-padding layout-fill><span>{{$ctrl.responseStatus.msg === \'ok\' ? \'Your request was successfully placed\' : $ctrl.responseStatus.msg}}</span></div></md-content></md-tab></md-tabs><prm-opac-after parent-ctrl="$ctrl"></prm-opac-after>');
$templateCache.put('components/search/fullView/getit/opac/service-button.html','<md-button ng-if="$ctrl.service.allowed === \'Y\' && $ctrl.service[\'link-to-service\']" class="button-as-link" (click)="$ctrl.getServiceDetails()" ng-class="{\'button-external-link\': $ctrl.service[\'service-type\'] == \'OvL\' && $ctrl.service[\'link-to-service\']}" aria-label="{{\'$ctrl.service.type\' | translate}}"><span translate="{{$ctrl.service.type}}"></span><prm-icon external-link ng-if="$ctrl.service[\'service-type\'] == \'OvL\' && $ctrl.service[\'link-to-service\']" [icon-type]="::$ctrl.actionIcons.externalLinkIcon.type" [svg-icon-set]="::$ctrl.actionIcons.externalLinkIcon.iconSet" [icon-definition]="::$ctrl.actionIcons.externalLinkIcon.icon" aria-label="{{\'$ctrl.service.type\' | translate}}"></prm-icon></md-button><prm-service-button-after parent-ctrl="$ctrl"></prm-service-button-after>');
$templateCache.put('components/search/fullView/getit/viewOnline/viewOnline.html','<div ng-repeat="link in $ctrl.getLinks()"><a class="arrow-link" href="{{link.link}}" target="_blank"><span ng-if="link.link.length>0" translate-default="{{link.hyperlinkText}}" translate="nui.getit_full.{{link.hyperlinkText}}"></span><prm-icon ng-if="link.link.length>0" external-link icon-type="{{$ctrl.availabilityLineIcons.externalLink.type}}" svg-icon-set="{{$ctrl.availabilityLineIcons.externalLink.iconSet}}" icon-definition="{{$ctrl.availabilityLineIcons.externalLink.icon}}"></prm-icon><prm-icon ng-if="link.link.length>0" link-arrow icon-type="{{$ctrl.availabilityLineIcons.arrowRight.type}}" svg-icon-set="{{$ctrl.availabilityLineIcons.arrowRight.iconSet}}" icon-definition="{{$ctrl.availabilityLineIcons.arrowRight.icon}}"></prm-icon></a></div><prm-view-online-after parent-ctrl="$ctrl"></prm-view-online-after>');
$templateCache.put('components/search/searchResult/savedQueriesList/savedQueryFilter/saved-query-filter.html','<span ng-repeat="pfilter in $ctrl.item.pfilter.split(\';\') track by $index"><span class="filter-item" ng-init="filterType=$ctrl.getPfilterMap(pfilter.split(\',\')[0]);"><i><span ng-if="!filterType.includes(\'DateRange\')" translate="search-advanced.label.{{filterType}}"></span><span ng-if="!filterType.includes(\'DateRange\')">:</span> <span ng-if="filterType.includes(\'DateRange\')" translate="{{$ctrl.getPrefixCodeAccordingToType(filterType)}}{{filterType}}"></span> &nbsp;</i><span ng-if="!filterType.includes(\'DateRange\')" ng-init="prefixCode=$ctrl.getPrefixCodeAccordingToType(filterType)" class="text-bold" ng-class="pfilter.split(\',\')[1]===\'exclude\'?\'strikethrough\':\'\'" translate="{{prefixCode}}{{pfilter.split(\',\')[2]}}"></span><span ng-if="filterType.includes(\'DateRange\')" ng-init="prefixCode=$ctrl.getPrefixCodeAccordingToType(filterType)" class="text-bold" ng-class="pfilter.split(\',\')[1]===\'exclude\'?\'strikethrough\':\'\'">{{$ctrl.convertDate(pfilter.split(\',\')[2])}} </span><span ng-if="$index!== ($ctrl.item.pfilter.split(\';\').length-1) || $ctrl.item.facet" class="text-bold">;</span> </span></span><span ng-repeat="facet in $ctrl.item.facet.split(\';\') track by $index"><span ng-if="facet.length > 0" class="filter-item"><i><span translate-default="{{facet.split(\',\')[0]}}" translate="facets.facet.facet_{{$ctrl.facetNameTransfer(facet)}}" translate-attr-title="facets.facet.facet_{{facet.split(\',\')[0]}}"></span>:&nbsp; </i><span class="text-bold" ng-class="facet.split(\',\')[1]===\'exclude\'?\'strikethrough\':\'\'" translate="{{facet.split(\',\')[0]}}.{{$ctrl.decodeString(facet.split(\',\')[2])}}" translate-default="{{$ctrl.defTrans(facet)}}"></span> <span ng-if="$index!== ($ctrl.item.facet.split(\';\').length-1) && $ctrl.item.facet.split(\';\')[$index + 1].length > 0" class="text-bold">;</span></span></span><prm-saved-query-filter-after parent-ctrl="$ctrl"></prm-saved-query-filter-after>');
$templateCache.put('components/search/searchResult/searchResultList/pageNavMenu/page-nav-menu.html','<div ng-if="($ctrl.numOfResults > $ctrl.PAGE_SIZE && $ctrl.mediaQueries.gtxs) || $ctrl.mode===\'browse\'" class="page-nav" ng-cloak><div layout="column" layout-align="center start" class="page-nav-inner"><div class="counter-nav counter-first" ng-show="$ctrl.currentPage >= 3" ng-if="!$ctrl.showComponents || $ctrl.showComponents.firstPage"><md-button aria-label="{{::(link.title.results.first_page | translate)}}" class="md-fab md-mini" ng-if="$ctrl.currentPage >= 3" ng-click="$ctrl.jumpToPage(1, $event)" ui-state="$ctrl.stateName" ui-state-params="$ctrl.getPageLinkParams(1)" ui-sref-opts="{reload: true, inherit:false}" href=""><md-tooltip md-direction="{{$ctrl.getPageWidgetDirection()}}"><span translate="link.title.results.first_page"></span></md-tooltip><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="double-chevron-up"></prm-icon></md-button></div><div class="counter-nav counter-prev" ng-show="$ctrl.showPrevButtonPredicate() || ($ctrl.currentPage && $ctrl.currentPage !== 1)"><md-button aria-label="{{::(link.title.results.prev | translate)}}" class="md-fab md-mini" ng-click="$ctrl.throwPrevResultsEvent(); $ctrl.jumpToPage($ctrl.currentPage-1, $event)" ui-state="$ctrl.stateName" ui-state-params="$ctrl.getPageLinkParams($ctrl.currentPage-1)" ui-sref-opts="{reload: true, inherit:false}" href=""><md-tooltip md-direction="{{$ctrl.getPageWidgetDirection()}}"><span translate="link.title.results.prev"></span></md-tooltip><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-up"></prm-icon></md-button></div><div class="counter-main" ng-if="!$ctrl.showComponents || $ctrl.showComponents.paging" ng-class="{\'counter-open\': $ctrl.isOpen}"><md-fab-speed-dial md-open="$ctrl.isOpen" md-direction="{{$ctrl.getPageWidgetDirection()}}" ng-class="$ctrl.selectedMode"><md-fab-trigger><md-button aria-label="open page selector" class="md-fab" ng-click="$ctrl.currentPageFocus()" ng-class="{\'md-mini\': $ctrl.mediaQueries.xs, \'md-is-open\': $ctrl.isOpen}"><md-tooltip md-direction="{{$ctrl.getPageWidgetDirection()}}"><span translate="nui.citation_trail.link.pages.tooltip"></span></md-tooltip><span ng-show="!$ctrl.isOpen" layout="column"><span class="counter-text">{{\'nui.paging.pagenumber\' | translate}}</span> <span class="counter-count">{{$ctrl.currentPage}}</span></span><span ng-show="$ctrl.isOpen"><prm-icon aria-label="Close dialog" icon-type="svg" svg-icon-set="primo-ui" icon-definition="close"></prm-icon></span></md-button></md-fab-trigger><md-fab-actions ng-cloak><div ng-repeat="i in $ctrl.getPageList() track by $index" tabindex="-1"><md-button tabindex="-1" ui-state="$ctrl.stateName" ui-state-params="$ctrl.getPageLinkParams(i)" ui-sref-opts="{reload: true, inherit:false}" href="" id="pageButton{{i}}" aria-label="{{::(\'nui.aria.paging.gotopage\' | translate: {number: i})}}" class="md-fab" ng-class="{\'current\': i === $ctrl.currentPage, \'md-mini\': $ctrl.mediaQueries.xs}" ng-click="$ctrl.jumpToPage(i, $event)">{{i}}</md-button></div></md-fab-actions></md-fab-speed-dial></div><div class="counter-nav counter-next" ng-show="$ctrl.showNextButtonPredicate() || ($ctrl.currentPage && $ctrl.currentPage != $ctrl.maxPage)"><md-button aria-label="{{$ctrl.getNextPageButtonText()}}" class="md-fab md-mini" ng-click="$ctrl.getNextPage($event)" ui-state="$ctrl.stateName" ui-state-params="$ctrl.getPageLinkParams($ctrl.currentPage+1)" ui-sref-opts="{reload: true, inherit:false}" href=""><md-tooltip md-direction="{{$ctrl.getPageWidgetDirection()}}"><span>{{$ctrl.getNextPageButtonText()}}</span></md-tooltip><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="chevron-down"></prm-icon></md-button></div></div></div><prm-page-nav-menu-after parent-ctrl="$ctrl"></prm-page-nav-menu-after>');
$templateCache.put('components/search/topbar/userArea/libraryCard/library-card-menu.html','<md-button ng-if="!$ctrl.isOvp()" aria-label="{{\'nui.aria.menu.settings\' | translate}}" class="button-with-icon zero-margin" (click)="$ctrl.goToUserSettings();"><prm-icon [icon-type]="::$ctrl.topBarIcons.library.type" [svg-icon-set]="::$ctrl.topBarIcons.library.iconSet" [icon-definition]="::$ctrl.topBarIcons.library.icon"></prm-icon><span translate="nui.details.header.ovl"></span></md-button><md-button aria-label="{{$ctrl.getLibraryCardAriaLabel() | translate}}" class="button-with-icon zero-margin" (click)="$ctrl.goToMyLibraryCard();" (keydown)="$ctrl.keydownSupport($event)"><prm-icon [icon-type]="::$ctrl.topBarIcons.library.type" [svg-icon-set]="::$ctrl.topBarIcons.library.iconSet" [icon-definition]="::$ctrl.topBarIcons.library.icon"></prm-icon><span translate="nui.menu.librarycard"></span></md-button><prm-library-card-menu-after parent-ctrl="$ctrl"></prm-library-card-menu-after>');
$templateCache.put('components/search/fullView/getit/opac/copyright/copyright.html','<form><md-dialog-content layout="column" layout-padding layout-margin><h2 class="dialog-title light-text" translate="{{$ctrl.getTitleLabel()}}"></h2><span translate="{{$ctrl.getSubTitleLabel()}}"></span><p ng-if="!$ctrl.isSuprima()" translate="{{$ctrl.getMessageLabel()}}"></p><pre class="pre-copyrights" ng-if="$ctrl.isSuprima()" translate="{{$ctrl.getMessageLabel()}}">\r\n            </pre></md-dialog-content><md-dialog-actions class="md-actions"><md-button class="" (click)="$ctrl.cancel()">Cancel request</md-button><md-button class="button-confirm" ng-disabled="$ctrl.isDisabled()" ng-click="$ctrl.commit()"><span translate="{{$ctrl.getSubmitMessage()}}"></span></md-button></md-dialog-actions></form><prm-copyright-after parent-ctrl="$ctrl"></prm-copyright-after>');
$templateCache.put('components/search/fullView/getit/opac/locations/demo.locations.html','<div layout="column" layout-fill><div ng-if="userSignedIn" class="labeled-block" ng-class="{\'collapsed\':$root.requestOptionsHide}" layout="row" layout-fill ng-mouseenter="unhideRequestOptions($root.requestOptionsHide)" ng-mouseleave="cancelUnhideRequestOptions()"><h3 class="block-label md-title light-text zero-margin">Request:</h3><div flex class="block-body links-block" layout="row" layout-wrap ng-include="\'./modules/requestOptions.html\'"></div></div><div ng-if="!userSignedIn" class="bar alert-bar" layout="row" layout-align="start center" layout-fill><span flex>Please <span class="bold-text">sign in</span> to see request options and to place requests.</span><md-button class="button-as-link button-with-icon" aria-label="Sign in button" style="right: -.5em" (click)="clearLocationFilters = true; $root.userSignedIn = true"><prm-icon><md-icon md-svg-icon="./images/login.svg" aria-label="Login Icon"></md-icon></prm-icon><span>Sign in</span></md-button></div></div><md-divider style="margin-top: 1em; margin-bottom: .5em; opacity: .5"></md-divider><md-tabs md-dynamic-height md-selected="selectedTab" class="tabs-as-app hidden-tabs"><md-tab label="Main" md-on-select="requestsLimit(15); showRequestOptions();"><md-content class="overflow-hidden"><div layout="row" layout-align="space-between center"><h3 class="md-title light-text zero-margin animate-horizontal-swap">Locations:</h3><md-button class="md-icon-button md-mini" aria-label="Filter button" (click)="locationsFilterVisible = !locationsFilterVisible"><md-tooltip>Filter locations</md-tooltip><prm-icon ng-if="!locationsFilterVisible"><md-icon md-svg-icon="./images/filter-outline.svg" aria-label="Filter Icon"></md-icon></prm-icon><prm-icon ng-if="locationsFilterVisible"><md-icon md-svg-icon="./images/filter-remove.svg" aria-label="Filter Icon"></md-icon></prm-icon></md-button></div><div ng-if="locationsFilterVisible" class="bar filter-bar animate-horizontal-swap margin-bottom-small" layout="row" layout-align="start center" layout-wrap style="padding: .5em 1em; position: relative; border-radius: 3px" layout-fill><span class="margin-right-small">Filters:</span><md-input-container layout="row" layout-align="start" class="zero-padding margin-right-small"><md-select ng-model="locationFilter" placeholder="Pickup location" class="borderless"><md-option ng-repeat="option in pickupLocations" value="{{option}}">{{option}}</md-option></md-select></md-input-container><md-input-container layout="row" layout-align="start" class="zero-padding margin-right-small"><md-select ng-model="volumeFilter" placeholder="Volume" class="borderless"><md-option ng-repeat="option in volumes" value="{{option}}">{{option}}</md-option></md-select></md-input-container><md-input-container layout="row" layout-align="start" class="zero-padding"><md-select ng-model="issueFilter" placeholder="Issue" class="borderless"><md-option ng-repeat="option in issues" value="{{option}}">{{option}}</md-option></md-select></md-input-container><div flex></div><md-button class="button-as-link button-with-icon" aria-label="Filter button" style="right: -.5em" (click)="clearLocationsFilter()"><prm-icon><md-icon md-svg-icon="./images/close.svg" aria-label="Clear Icon"></md-icon></prm-icon><span>Clear filters</span></md-button></div><div ng-repeat="inst in locations"><h4 class="md-title zero-margin">{{inst.institution}}</h4><md-list><md-list-item class="md-2-line separate-list-items narrow-list-item" ng-repeat="ven in inst.venues  | limitTo:2" (click)="selectedVenue(ven); goToLocation(1); $root.locationNoItems = false;"><div class="md-list-item-text"><h3>{{ven.name}}</h3><p><span class="bold-text" style="color: {{ven.statusColor}}">{{ven.status}}</span>, <span>{{ven.category}}; {{ven.code}};</span></p></div><md-icon md-svg-icon="./images/chevron-right.svg"></md-icon></md-list-item><md-list-item class="md-2-line separate-list-items narrow-list-item" (click)="goToNoItems()"><div class="md-list-item-text"><h3>WSU Main Library</h3><p><span class="bold-text" style="color: #C59655">May be available</span>, <span>Main Collection; (TK5101.A1 J114 ).</span></p></div><md-icon md-svg-icon="./images/chevron-right.svg"></md-icon></md-list-item></md-list></div></md-content></md-tab><md-tab label="two" md-on-select="showBackButton(); hideRequestOptions()"><div class="tab-header"><md-button ng-show="backButtonVisible" (click)="backToLocations();" class="back-button button-with-icon zero-margin"><prm-icon><md-icon md-svg-icon="./images/chevron-left.svg" aria-label="Back button"></md-icon></prm-icon><span>back to locations</span></md-button></div><md-content class="overflow-hidden"><div class="tab-content-header" layout="row" layout-align="space-between end"><div class="layout-column" ng-if="!locationNoItems"><h4 class="md-title title">{{$root.selectedVenue.name}}</h4><p ng-if="$root.selectedVenue.status"><span class="bold-text" style="color: {{$root.selectedVenue.statusColor}}">{{$root.selectedVenue.status}}</span>, {{$root.selectedVenue.category}}, {{$root.selectedVenue.code}}</p><div ng-if="$root.selectedVenue.summaryShort" class="weak-text"><span>Item summary: {{$root.selectedVenue.summaryShort}}...</span> <span class="text-link" (click)="summaryLinesVisible = !summaryLinesVisible">expand</span><div ng-show="summaryLinesVisible" layout="column"><span ng-repeat="line in $root.selectedVenue.summaryLines">{{line}}</span></div></div></div><div class="layout-column" ng-if="locationNoItems"><h4 class="md-title title">WSU Main Library</h4><p><span class="bold-text" style="color: #C59655">May be available</span>, Main Collection, (TK5101.A1 J114 )</p><div ng-if="$root.selectedVenue.summaryShort" class="weak-text"><span>Item summary: v. 1, no. 1 (2004:enero:01)...</span> <span class="text-link" (click)="summaryLinesVisible = !summaryLinesVisible">expand</span><div ng-show="summaryLinesVisible" layout="column"><span ng-repeat="line in $root.selectedVenue.summaryLines">jasdjsajdsajdas</span></div></div></div><div class="" layout="row" ng-hide="locationNoItems" layout-align="end center"><md-button class="md-icon-button md-mini" aria-label="Filter button" (click)="locationsFilterVisible = !locationsFilterVisible"><md-tooltip>Filter locations</md-tooltip><prm-icon ng-if="!locationsFilterVisible"><md-icon md-svg-icon="./images/filter-outline.svg" aria-label="Filter Icon"></md-icon></prm-icon><prm-icon ng-if="locationsFilterVisible"><md-icon md-svg-icon="./images/filter-remove.svg" aria-label="Filter Icon"></md-icon></prm-icon></md-button><div class="vertical-divider transparent-divider"></div><md-button class="md-icon-button header-action expand-collapse-button" (click)="locationItemExpand = !locationItemExpand"><md-tooltip md-autohide="true"><span ng-if="locationItemExpand">Collapse</span><span ng-if="!locationItemExpand">Expand</span> all items</md-tooltip><span ng-if="!locationItemExpand"><md-icon md-svg-icon="./images/expand-all.svg" aria-label="expand all Icon"></md-icon></span><span ng-if="locationItemExpand"><md-icon md-svg-icon="./images/collapse-all.svg" aria-label="expand all Icon"></md-icon></span></md-button></div></div><div ng-if="locationsFilterVisible" class="bar filter-bar animate-horizontal-swap margin-bottom-small" layout="row" layout-align="start center" layout-wrap style="padding: .5em 1em; position: relative; border-radius: 3px" layout-fill><span class="margin-right-small">Filters:</span><md-input-container layout="row" layout-align="start" class="zero-padding margin-right-small"><md-select ng-model="volumeFilter" placeholder="Volume" class="borderless"><md-option ng-repeat="option in volumes" value="{{option}}">{{option}}</md-option></md-select></md-input-container><md-input-container layout="row" layout-align="start" class="zero-padding"><md-select ng-model="issueFilter" placeholder="Issue" class="borderless"><md-option ng-repeat="option in issues" value="{{option}}">{{option}}</md-option></md-select></md-input-container><div flex></div><md-button class="button-as-link button-with-icon" aria-label="Filter button" style="right: -.5em" (click)="clearLocationsFilter()"><prm-icon><md-icon md-svg-icon="./images/close.svg" aria-label="Clear Icon"></md-icon></prm-icon><span>Clear filters</span></md-button></div><div ng-if="locationNoItems"><div class="bar alert-bar" layout="row" layout-align="start center" style="margin-bottom: 1em"><span flex ng-if="userSignedIn">We couldn\'t find any items to display for this location. You are welcome to place a request via one of the options above.</span> <span flex ng-if="!userSignedIn">We couldn\'t find any items to display for this location. Please sign in above to see the available request options.</span></div></div><md-list layout="column" ng-hide="locationNoItems"><md-list-item ng-repeat="loc in $root.selectedVenue.locations | limitTo:limitLocationItemsCount" class="md-3-line separate-list-items has-expand in-element-dialog-parent" ng-class="locationItemExpand?\'item-expanded\':\'\'"><div class="item-summary in-element-dialog-context" layout-fill><div class="md-list-item-text" layout="row"><div flex="30"><h3 ng-if="loc.description">{{loc.description}}, {{loc.itemType}}</h3><h4 ng-if="loc.call">{{loc.call}}</h4></div><div flex><p ng-if="loc.status">{{loc.status}}, {{loc.itemStatus}}, no. in queue: {{loc.itemQueue}}</p><div ng-hide="!locationItemExpand"><p ng-if="loc.itemType">Item type: {{loc.itemType}}</p><p ng-if="loc.barcode">Barcode: {{loc.barcode}}</p></div></div><div layout="column" layout-align="center end"><div layout="row"><md-button ng-if="userSignedIn" class="item-action md-secondary" ng-repeat="option in loc.options" (click)="goToLocationRequest(option, loc, $root.selectedVenue); $root.comingFromLocations = true; $root.preselectedRequestDetails = true; $root.hasPreItems = true;"><span>{{option}}</span></md-button></div></div></div></div><md-button class="md-secondary item-expand-button" aria-label="view" (click)="locationItemExpand = !locationItemExpand"><md-icon md-svg-icon="./images/chevron-down.svg" ng-class="locationItemExpand?\'h-flipped-icon\':\'\'"></md-icon></md-button></md-list-item><md-button ng-if="!locationNoItems && $root.selectedVenue.locations.length > $root.limitLocationItemsCount" class="show-more-button zero-margin" (click)="$root.limitLocationItemsCount = $root.selectedVenue.locations.length" ng-hide="$root.limitLocationItemsCount == $root.selectedVenue.locations.length"><span>Show all items ({{$root.selectedVenue.locations.length}})</span></md-button></md-list></md-content></md-tab><md-tab label="Request Form" md-on-select="showBackButton(); checkForRequestOptions()"><md-button ng-if="!locationRequest" ng-show="backButtonVisible" (click)="backToLocations()" class="back-button button-with-icon zero-margin"><prm-icon><md-icon md-svg-icon="./images/chevron-left.svg" aria-label="Back button"></md-icon></prm-icon><span>back to locations</span></md-button><md-button ng-if="locationRequest" ng-show="backButtonVisible" (click)="backToItems()" class="back-button button-with-icon zero-margin"><prm-icon><md-icon md-svg-icon="./images/chevron-left.svg" aria-label="Back button"></md-icon></prm-icon><span>back to items</span></md-button><md-content layout="column"><h3 class="light-text md-title zero-margin-top">{{requestType}} request</h3><div layout="row" class="form-focus service-form" layout-margin><div class="service-form-loader" ng-if="requestFormLoader"><div class="loader"><div class="diamond"></div><div class="diamond"></div><div class="diamond"></div></div></div><div class="service-form-static-panel" layout="column" layout-padding layout-align="start start" ng-if="hasPreItems"><div layout="column" layout-align="start" layout-padding><div ng-repeat="detail in PreDetails" class="md-input-container-dummy dummy-input-has-value" layout="column" ng-show="detail.type == requestType"><div class="label-dummy" flex-order="1">{{detail.label}}</div><div class="md-select-dummy" layout="row" flex-order="2"><div class="md-select-value-dummy md-select-value" layout="row"><span>{{detail.text}}</span> <span class="md-select-icon-dummy md-select-icon" aria-hidden="true"></span></div></div></div></div></div><div class="service-form-dynamic-panel" flex layout="column" layout-padding><div ng-include="\'./modules/request-form-dropdowns.html\'" flex layout="row" layout-align="center center" style="padding-left: 1.5em"></div><div layout="row" layout-align="end" layout-fill><md-button class="button-with-icon button-secondary" (click)="resetRequestForm()" ng-if="requestFormAltered"><prm-icon><md-icon md-svg-icon="./images/replay.svg"></md-icon></prm-icon><span>Reset form</span></md-button><span flex></span><md-button class="button-confirm" (click)="doSendRequest(requestType, $event)">Send request</md-button></div></div></div></md-content></md-tab><md-tab label="Request reply" md-on-select="showBackButton()"><md-button ng-if="$root.requestReplySuccess" ng-show="backButtonVisible" (click)="backToLocations()" class="back-button button-with-icon zero-margin"><prm-icon><md-icon md-svg-icon="./images/chevron-left.svg" aria-label="Back button"></md-icon></prm-icon><span>back to locations</span></md-button><md-button ng-if="!$root.requestReplySuccess" ng-show="backButtonVisible" (click)="backToRequestForm()" class="back-button button-with-icon zero-margin"><prm-icon><md-icon md-svg-icon="./images/chevron-left.svg" aria-label="Back button"></md-icon></prm-icon><span>back to request form</span></md-button><md-content layout="column"><div ng-if="$root.requestReplySuccess" class="bar success-bar large-bar" layout="row" layout-align="center center" layout-padding layout-fill><span>Your request was successfully placed</span></div><div ng-if="!$root.requestReplySuccess" class="bar error-bar large-bar" layout="row" layout-align="center center" layout-padding layout-fill><span>Patron has already placed a photocopy request for this item</span></div></md-content></md-tab></md-tabs>');
$templateCache.put('components/search/fullView/getit/opac/locations/location-items.html','<h3 class="section-title" style="margin-bottom: .75em !important"><span translate="nui.aria.locationItems.locationItems"></span></h3><div class="tab-content-header margin-bottom-small margin-left-medium" layout="row" layout-align="space-between end"><div layout="column" flex><h4 class="md-title ng-binding zero-margin" translate="{{$ctrl.currLoc.location.libraryCode}}"></h4><h5 ng-if="$ctrl.currLoc.location.relatedTitle != null && $ctrl.currLoc.location.relatedTitle !== \'\'" class="related-title"><prm-icon icon-type="{{$ctrl.opacLocations.relatedArrow.type}}" svg-icon-set="{{$ctrl.opacLocations.relatedArrow.iconSet}}" icon-definition="{{$ctrl.opacLocations.relatedArrow.icon}}" aria-label="" class="related-title-icon h-flipped"></prm-icon><span translate="nui.location.related_title" class="related-title-label"></span> <span class="related-title-name">{{$ctrl.currLoc.location.relatedTitle}}</span></h5><p ng-if="$ctrl.currLoc.location.availabilityStatus" class="ng-binding ng-scope zero-margin"><span class="availability-status {{$ctrl.currLoc.location.availabilityStatus}}" translate="fulldisplay.availabilty.{{$ctrl.currLoc.location.availabilityStatus}}"></span> <span ng-if="$ctrl.currLoc.location.subLocation">,</span> <span ng-if="$ctrl.currLoc.location.subLocation" translate-default="{{$ctrl.currLoc.location.subLocation}}" translate="{{$ctrl.currLoc.location.subLocation}}"></span> <span ng-if="$ctrl.currLoc.location.callNumber"></span> <span ng-if="$ctrl.currLoc.location.callNumber">{{$ctrl.currLoc.location.callNumber}}</span><span ng-if="$ctrl.combineStringLastChar">&#x200E</span></p><p ng-if="$ctrl.currLoc.location.availabilityStatement" class="ng-binding ng-scope zero-margin">{{$ctrl.currLoc.location.availabilityStatement}}</p><div ng-if="!$ctrl.currLoc.locationNoItems"><div ng-if="!$ctrl.summaryLinesVisible" layout="row" layout-align="start start"><div layout="column" style="max-width: calc(100% - 70px)"><div class="weak-text text-trim-ellipsis" ng-repeat="line in $ctrl.currLoc.summaryHoldings.baseSummaryShort track by $index" layout="row"><div translate="{{line.key}}" class="margin-right-small"></div><span class="summary-brief" class="" layout="row"><a ng-if="line.value.includes(\'http:\')" href="{{line.value}}">{{line.value}}</a> <span title="{{line.value}}" ng-if="!line.value.includes(\'http:\')">{{line.value}}</span></span></div></div><div><md-button class="button-as-link link-alt-color" (click)="$ctrl.summaryLinesVisible = true" ng-if="!$ctrl.summaryLinesVisible && $ctrl.currLoc.summaryHoldings.baseSummaryShort.length > 0 && $ctrl.currLoc.isHoldingExpandedData" aria-label="{{\'nui.locations.expand\' | translate}}"><span translate="nui.locations.expand" class="bold-text"></span></md-button></div></div><div ng-if="$ctrl.summaryLinesVisible" layout="row" layout-align="start start"><div layout="column"><div ng-repeat="line in $ctrl.currLoc.summaryHoldings.allLines track by $index"><div class="margin-top-small"><span class="bold-text" translate="{{line.key}}"></span></div><div ng-repeat="lineItem in line.value track by $index" class="padding-left-medium"><span><a ng-if="lineItem.includes(\'http:\')" href="{{lineItem}}">{{lineItem}}</a> <span ng-if="!lineItem.includes(\'http:\')">{{lineItem}}</span></span></div></div></div><md-button class="button-as-link link-alt-color" (click)="$ctrl.summaryLinesVisible = false" ng-if="$ctrl.summaryLinesVisible && \t$ctrl.currLoc.summaryHoldings.baseSummaryShort.length > 0 && $ctrl.currLoc.isHoldingExpandedData"><span translate="nui.locations.collapse" class="bold-text"></span></md-button></div></div><div class="layout-column" ng-if="$ctrl.currLoc.locationNoItems" flex layout="row"><div flex="70"><span class="weak-text text-trim-ellipsis" ng-if="$ctrl.summaryLinesVisible" ng-repeat="line in $ctrl.currLoc.summaryHoldings.baseSummaryShort track by $index"><div><div translate="{{line.key}}"></div><a class="text-trim-ellipsis" ng-if="line.value.includes(\'http:\')" href="{{line.value}}">{{line.value}}</a> <span class="text-trim-ellipsis" ng-if="!line.value.includes(\'http:\')">{{line.value}}<md-tooltip>{{line.value}}</md-tooltip></span></div></span><div ng-if="!$ctrl.summaryLinesVisible"><div ng-repeat="line in $ctrl.currLoc.summaryHoldings.allLines track by $index"><div class="margin-top-small"><span class="bold-text" translate="{{line.key}}"></span></div><div ng-repeat="lineItem in line.value track by $index" class="padding-left-medium"><span><a ng-if="lineItem.includes(\'http:\')" href="{{lineItem}}">{{lineItem}}</a> <span ng-if="!lineItem.includes(\'http:\')">{{lineItem}}</span></span></div></div></div></div><div flex><span class="text-link" (click)="$ctrl.summaryLinesVisible = !$ctrl.summaryLinesVisible"><span ng-if="!$ctrl.summaryLinesVisible && $ctrl.currLoc.summaryHoldings.baseSummaryShort.length > 0 && $ctrl.currLoc.isHoldingExpandedData" translate="nui.locations.collapse"></span> <span ng-if="$ctrl.summaryLinesVisible && $ctrl.currLoc.summaryHoldings.baseSummaryShort.length > 0 && $ctrl.currLoc.isHoldingExpandedData" translate="nui.locations.expand"></span></span></div></div></div><div layout="row"><prm-stack-map ng-if="$ctrl.isSuprima() && $ctrl.currLoc.location.stackMapUrl" [map-url]="$ctrl.currLoc.location.stackMapUrl"></prm-stack-map></div><div layout="row" ng-hide="$ctrl.currLoc.locationNoItems" layout-align="end center"><md-button class="md-icon-button md-mini" aria-label="{{\'nui.aria.locationItems.filterButton\' | translate}}" ng-if="$ctrl.isFilter || $ctrl.filtered" (click)="$ctrl.filterClick();"><md-tooltip><span ng-if="$ctrl.locationsFilterVisible" translate="nui.aria.locationItems.filterOut"></span> <span ng-if="!$ctrl.locationsFilterVisible" translate="nui.aria.locationItems.filter"></span></md-tooltip><prm-icon ng-if="!$ctrl.locationsFilterVisible" icon-type="{{$ctrl.opacLocations.filter.type}}" svg-icon-set="{{$ctrl.opacLocations.filter.iconSet}}" icon-definition="{{$ctrl.opacLocations.filter.icon}}" aria-label="{{\'nui.aria.locationItems.filter\' | translate}}"></prm-icon><prm-icon ng-if="$ctrl.locationsFilterVisible" icon-type="{{$ctrl.opacLocations.filterOut.type}}" svg-icon-set="{{$ctrl.opacLocations.filterOut.iconSet}}" icon-definition="{{$ctrl.opacLocations.filterOut.icon}}" aria-label="{{\'nui.aria.locationItems.filterOut\' | translate}}"></prm-icon></md-button><div class="vertical-divider transparent-divider"></div><md-button aria-label="{{\'nui.locItems.collapse\' | translate}}" class="md-icon-button header-action expand-collapse-button" (click)="$ctrl.toggleExpandAll($ctrl.currLoc)"><md-tooltip md-autohide="true"><span ng-if="$ctrl.currLoc.isExpandAll" translate="nui.locItems.collapse"></span> <span ng-if="!$ctrl.currLoc.isExpandAll" translate="nui.locItems.expand"></span></md-tooltip><span ng-if="!$ctrl.currLoc.isExpandAll"><prm-icon icon-type="{{$ctrl.opacLocations.expandAllIcon.type}}" svg-icon-set="{{$ctrl.opacLocations.expandAllIcon.iconSet}}" icon-definition="{{$ctrl.opacLocations.expandAllIcon.icon}}" aria-label="{{\'nui.aria.locationItems.expandall\' | translate}}"></prm-icon></span><span ng-if="$ctrl.currLoc.isExpandAll"><prm-icon icon-type="{{$ctrl.opacLocations.collapseAllIcon.type}}" svg-icon-set="{{$ctrl.opacLocations.collapseAllIcon.iconSet}}" icon-definition="{{$ctrl.opacLocations.collapseAllIcon.icon}}" aria-label="{{\'nui.aria.locationItems.collapseall\' | translate}}"></prm-icon></span></md-button></div></div><prm-locations-filter ng-if="$ctrl.locationsFilterVisible" [item]="$ctrl.item" [is-disabled]="$ctrl.isItemsFilterDisable($ctrl.item)" (filter-event)="$ctrl.handleFilterEvent($event)" [is-after-filtering]="$ctrl.filtered" (clear-filters-event)="$ctrl.clearFilters()"></prm-locations-filter><div ng-if="$ctrl.currLoc.locationNoItems" class="padding-left-medium"><div class="bar alert-bar margin-bottom-medium" layout="row" layout-align="start center"><span flex ng-if="$ctrl.isLoggedIn();" translate="nui.locations.noitems.signin"></span> <span flex ng-if="!$ctrl.isLoggedIn();" translate="nui.locations.noitems.guest"></span></div></div><md-list layout="column" ng-hide="$ctrl.currLoc.locationNoItems" class="separate-list-items margin-left-medium"><md-list-item ng-repeat="item in $ctrl.currLoc.items track by $index" class="md-2-line has-expand" ng-if="!$ctrl.currLoc.isMore || !$last" ng-class="item.isExpanded?\'item-expanded\':\'\'" (click)="item.isExpanded = !item.isExpanded"><div layout="row" flex><div class="md-list-item-text" layout="row" layout-wrap flex><div flex flex-xs="100"><div ng-if="item.itemFields[0]"><h3><span translate="nui.item.brief.1"></span> {{item.itemFields[0]}}</h3><md-tooltip>{{item.itemFields[0]}}</md-tooltip></div><div ng-if="item.itemFields[1]"><h4><span translate="nui.item.brief.2"></span> {{item.itemFields[1]}}</h4><md-tooltip>{{item.itemFields[1]}}</md-tooltip></div></div><div class="weak-text" flex flex-xs="100"><div ng-if="item.itemFields[2]"><p><span translate="nui.item.brief.3"></span> {{item.itemFields[2]}}</p><md-tooltip>{{item.itemFields[2]}}</md-tooltip></div><div ng-if="item.itemFields[3]"><p><span translate="nui.item.brief.4"></span> {{item.itemFields[3]}}</p><md-tooltip>{{item.itemFields[3]}}</md-tooltip></div><div ng-if="item.isExpanded"><div ng-repeat="full in item.fullItemFields track by $index"><p>{{full}}</p><md-tooltip>{{item.fullItemValues[$index]}}</md-tooltip></div></div></div><div layout-align="end center" layout="row" layout-wrap flex-xs="100" flex-sm="30"><div ng-if="!$ctrl.currLoc.location.isValidUser"><span translate="item.request.not_available"></span></div><div layout="row" layout-align="center center" ng-repeat="service in item.listOfServices track by $index" ng-if="$ctrl.isLoggedIn()"><prm-service-button ng-if="$ctrl.allowService()" [service]="service" (change-tab-event)="::$ctrl.onChangeTabEvent($event)" [parent-tab]="::$ctrl.tabId" [request-parameters]="$ctrl.getServiceAdditionalParams(item, service)" method="GET"></prm-service-button><div class="skewed-divider" ng-if="!$last"></div></div></div></div><div class="align-self-stretch"><md-button class="md-secondary item-expand-button" aria-label="{{\'nui.aria.locationItems.expandcollapse\' | translate}}"><prm-icon ng-class="{\'rotate-180\': item.isExpanded}" prm-aria-label="{{\'nui.aria.locationItems.expandcollapse\' | translate:\'{name: \\\'\'+ location.libraryCode +\' \' +location.subLocation+\'\\\'}\'}}" icon-type="{{$ctrl.opacLocations.expandIcon.type}}" svg-icon-set="{{$ctrl.opacLocations.expandIcon.iconSet}}" icon-definition="{{$ctrl.opacLocations.expandIcon.icon}}"></prm-icon></md-button></div></div><prm-location-item-after parent-ctrl="ctrl"></prm-location-item-after></md-list-item><prm-spinner ng-if="$ctrl.inProgress" class="inline-loader half-transparent no-text" layout="row" layout-align="center center"></prm-spinner></md-list><md-button ng-if="!$ctrl.currLoc.locationNoItems && $ctrl.currLoc.isMore" class="button-link link-alt-color zero-margin" (click)="$ctrl.getlocationsItems($ctrl.currLoc, true);" ng-hide="!$ctrl.currLoc.isMore" aria-label="{{\'fulldisplay.locations.showmore\' | translate}}"><span class="bold-text padding-small" translate="fulldisplay.locations.showmore"></span></md-button><prm-location-items-after parent-ctrl="$ctrl"></prm-location-items-after>');
$templateCache.put('components/search/fullView/getit/opac/locations/locations.html','<div layout="row" layout-align="space-between center"><h3 class="section-title"><span translate="nui.locations.header"></span></h3><md-button class="md-icon-button md-mini" aria-label="{{\'nui.aria.locationItems.filterButton\' | translate}}" ng-if="$ctrl.isFilter" (click)="$ctrl.filterClick()"><md-tooltip><span translate=""></span> <span ng-if="$ctrl.locationsFilterVisible" translate="nui.aria.location.filterOut"></span> <span ng-if="!$ctrl.locationsFilterVisible" translate="nui.aria.location.filter"></span></md-tooltip><prm-icon ng-if="!$ctrl.locationsFilterVisible" icon-type="{{$ctrl.opacLocations.filter.type}}" svg-icon-set="{{$ctrl.opacLocations.filter.iconSet}}" icon-definition="{{$ctrl.opacLocations.filter.icon}}" aria-label="{{\'nui.aria.locationItems.filter\' | translate}}"></prm-icon><prm-icon ng-if="$ctrl.locationsFilterVisible" icon-type="{{$ctrl.opacLocations.filterOut.type}}" svg-icon-set="{{$ctrl.opacLocations.filterOut.iconSet}}" icon-definition="{{$ctrl.opacLocations.filterOut.icon}}" aria-label="{{\'nui.aria.locationItems.filterOut\' | translate}}"></prm-icon></md-button></div><prm-locations-filter ng-if="$ctrl.locationsFilterVisible" (clear-filters-event)="$ctrl.clearFilters()" (filter-event)="$ctrl.handleFilterEvent($event)" [is-after-filtering]="$ctrl.filtered" [item]="$ctrl.item"></prm-locations-filter><div class="padding-left-medium"><div ng-if="$ctrl.locations[0].length==0 && (!$ctrl.locations[1] || $ctrl.locations[1].length==0)" class="bar alert-bar" layout="row" layout-align="start center"><span flex translate="nui.filter.noitems"></span></div><h3 ng-if="$ctrl.locations[1]" class="section-title" translate="{{$ctrl.locations[0][0].location.organization}}"></h3><md-list class="separate-list-items margin-bottom-medium padding-bottom-zero"><md-list-item class="md-2-line" ng-repeat="loc in $ctrl.getLocations() track by $index"><prm-location class="layout-full-width layout-display-flex" [location]="loc.location" (click-event)="$ctrl.gotoLocationItemsTab(loc, false);"></prm-location></md-list-item></md-list><h4 ng-if="$ctrl.hasRelatedLocations" class="subsection-title" translate="nui.locations.related_locations"></h4><md-list class="separate-list-items margin-bottom-medium padding-bottom-zero"><md-list-item class="md-2-line" ng-repeat="loc in $ctrl.getRelatedLocations() track by $index"><prm-location class="layout-full-width layout-display-flex" [location]="loc.location" (click-event)="$ctrl.gotoLocationItemsTab(loc, false);"></prm-location></md-list-item></md-list><h3 ng-if="$ctrl.locations[1][0]" class="medium-uppercase-bold zero-margin" translate="nui.locations.other_institutions"></h3><md-list class="separate-list-items"><md-list-item class="md-2-line" ng-repeat="loc in $ctrl.locations[1]   track by $index"><prm-location class="layout-full-width layout-display-flex" [location]="loc.location" (click-event)="$ctrl.gotoLocationItemsTab(loc, false);"></prm-location></md-list-item></md-list></div><prm-locations-after parent-ctrl="$ctrl"></prm-locations-after>');
$templateCache.put('components/search/fullView/getit/opac/locationsFilter/alma-locations-filter.html','<div ng-if=" !$ctrl.isDisabled" class="bar filter-bar animate-horizontal-swap margin-bottom-small" layout="row" layout-align="start center" layout-wrap style="padding: .5em 1em; position: relative; border-radius: 3px" layout-fill><span class="margin-right-small bold-text" translate="nui.aria.locationItems.filters"></span><md-input-container layout="row" layout-align="start" class="zero-padding margin-right-small"><md-select ng-change="$ctrl.throwFilterEvent()" ng-disabled="$ctrl.isDisabled" ng-model="$ctrl.locationFilter" placeholder="Location" class="borderless"><md-option value="All">Location</md-option><md-option ng-repeat="option in $ctrl.locationsDropDownOptions" value="{{option}}"><span translate="{{option}}"></span></md-option></md-select></md-input-container><md-input-container layout="row" layout-align="start" class="zero-padding margin-right-small"><md-select ng-change="$ctrl.throwFilterEvent()" ng-disabled="$ctrl.isDisabled" ng-model="$ctrl.volumeFilter" placeholder="Volume" class="borderless"><md-option value="All">Volume</md-option><md-option ng-repeat="option in $ctrl.volumeDropDownOptions" value="{{option}}">{{option}}</md-option></md-select></md-input-container><md-input-container layout="row" layout-align="start" class="zero-padding"><md-select ng-change="$ctrl.throwFilterEvent()" ng-disabled="$ctrl.isDisabled" ng-model="$ctrl.yearFilter" placeholder="Year" class="borderless"><md-option value="All">Year</md-option><md-option ng-repeat="option in $ctrl.yearDropDownOptions" value="{{option}}">{{option}}</md-option></md-select></md-input-container><md-input-container layout="row" layout-align="start" class="zero-padding"><md-select ng-change="$ctrl.throwFilterEvent()" ng-disabled="$ctrl.isDisabled" ng-model="$ctrl.descriptionFilter" placeholder="Description" class="borderless"><md-option value="All">Description</md-option><md-option ng-repeat="option in $ctrl.descriptionDropDownOptions" value="{{option}}">{{option}}</md-option></md-select></md-input-container><div flex></div><md-button ng-if="$ctrl.changed" class="button-as-link button-with-icon filter-align margin-zero" aria-label="{{\'nui.aria.locationItems.filterButton\' | translate}}" style="right: -.5em" (click)="$ctrl.clearFilters()"><prm-icon icon-type="{{$ctrl.opacLocations.close.type}}" svg-icon-set="{{$ctrl.opacLocations.close.iconSet}}" icon-definition="{{$ctrl.opacLocations.close.icon}}" aria-label="{{\'nui.aria.locationItems.clearIcon\' | translate}}"></prm-icon><span translate="nui.locations.filter.clear"></span></md-button></div>');
$templateCache.put('components/search/fullView/getit/opac/locationsFilter/locations-filter.html','<div ng-if="!$ctrl.isAfterFiltering && !$ctrl.isDisabled" class="bar filter-bar animate-horizontal-swap margin-bottom-small" layout="row" layout-align="start center" layout-wrap style="padding: .5em 1em; position: relative; border-radius: 3px" layout-fill><span class="margin-right-small" translate="nui.aria.locationItems.filters"></span><md-input-container layout="row" layout-align="start" class="zero-padding margin-right-small"><md-select ng-change="$ctrl.onChanged()" ng-disabled="$ctrl.isDisabled" ng-if="$ctrl.locationsDropDownOptions.length > 1" ng-model="$ctrl.locationFilter" placeholder="Location" class="borderless"><md-option value="All">Location</md-option><md-option ng-repeat="option in $ctrl.locationsDropDownOptions" value="{{option}}"><span translate="{{option}}"></span></md-option></md-select></md-input-container><md-input-container layout="row" layout-align="start" class="zero-padding margin-right-small"><md-select ng-change="$ctrl.onChanged()" ng-disabled="$ctrl.isDisabled" ng-if="$ctrl.volumeDropDownOptions.length > 1" ng-model="$ctrl.volumeFilter" placeholder="Volume" class="borderless"><md-option value="All">Volume</md-option><md-option ng-repeat="option in $ctrl.volumeDropDownOptions" value="{{option}}">{{option}}</md-option></md-select></md-input-container><md-input-container layout="row" layout-align="start" class="zero-padding"><md-select ng-change="$ctrl.onChanged()" ng-disabled="$ctrl.isDisabled" ng-if="$ctrl.yearDropDownOptions.length > 1" ng-model="$ctrl.yearFilter" placeholder="Year" class="borderless"><md-option value="All">Year</md-option><md-option ng-repeat="option in $ctrl.yearDropDownOptions" value="{{option}}">{{option}}</md-option></md-select></md-input-container><div flex></div><md-button ng-if="$ctrl.changed" class="button-as-link" aria-label="{{\'nui.aria.locationItems.filterButton\' | translate}}" style="right: -.5em" (click)="$ctrl.throwFilterEvent()"><span translate="nui.locations.filter.apply"></span></md-button><md-button ng-if="$ctrl.changed" class="button-as-link button-with-icon filter-align" aria-label="{{\'nui.aria.locationItems.filterButton\' | translate}}" style="right: -.5em" (click)="$ctrl.clearFilters()"><prm-icon icon-type="{{$ctrl.opacLocations.close.type}}" svg-icon-set="{{$ctrl.opacLocations.close.iconSet}}" icon-definition="{{$ctrl.opacLocations.close.icon}}" aria-label="{{\'nui.aria.locationItems.clearIcon\' | translate}}"></prm-icon><span translate="nui.locations.filter.clear"></span></md-button></div><div ng-if="$ctrl.isAfterFiltering" class="bar alert-bar" layout="row" layout-align="start center" style="margin-bottom: 1em"><span ng-bind-html="$ctrl.filtersMsg"></span><md-button class="cancel-align button-as-link button-with-icon" aria-label="{{\'nui.aria.locationItems.filterButton\' | translate}}" style="right: -.5em" (click)="$ctrl.clearFilters()"><prm-icon icon-type="{{$ctrl.opacLocations.close.type}}" svg-icon-set="{{$ctrl.opacLocations.close.iconSet}}" icon-definition="{{$ctrl.opacLocations.close.icon}}" aria-label="{{\'nui.aria.locationItems.clearIcon\' | translate}}"></prm-icon><span translate="nui.locations.filter.clear" class="text-trim-ellipsis"></span></md-button></div>');
$templateCache.put('components/search/fullView/getit/opac/request/request-services-ovl.html','<div ng-if="!$ctrl.hasLocations() && $ctrl.requestLink && $ctrl.requestLink !== \'ovp\'" layout="row" layout-align="start center" layout-fill><h3 class="block-label medium-uppercase-bold zero-margin"><span translate="nui.request.request"></span></h3><md-content layout="row" layout-fill class="padded-container"><a class="arrow-link" href="{{$ctrl.requestLink}}" target="_blank" layout="row"><span translate="nui.request.link"></span><prm-icon external-link icon-type="{{$ctrl.availabilityLineIcons.externalLink.type}}" svg-icon-set="{{$ctrl.availabilityLineIcons.externalLink.iconSet}}" icon-definition="{{$ctrl.availabilityLineIcons.externalLink.icon}}"></prm-icon><prm-icon link-arrow icon-type="{{$ctrl.availabilityLineIcons.arrowRight.type}}" svg-icon-set="{{$ctrl.availabilityLineIcons.arrowRight.iconSet}}" icon-definition="{{$ctrl.availabilityLineIcons.arrowRight.icon}}"></prm-icon></a></md-content></div><prm-requests-services-ovl-after parent-ctrl="$ctrl"></prm-requests-services-ovl-after>');
$templateCache.put('components/search/fullView/getit/opac/request/request-services.html','<div ng-if="$ctrl.services.serviceinfo && $ctrl.services.serviceinfo.length > 0"><div ng-if="$ctrl.isLoggedIn()" class="labeled-block" layout="row"><h3 class="section-title"><span translate="nui.request.request"></span></h3><prm-spinner class="margin-left-medium inline-loader dark-on-light" ng-if="$ctrl.servicesListIsLoading"></prm-spinner><div flex class="block-body links-block" layout="row" layout-wrap><div class="links-block-item separated-block-item" ng-repeat="service in $ctrl.services.serviceinfo"><prm-service-button [service]="::service" (change-tab-event)="::$ctrl.changeTab($event)" [parent-tab]="::$ctrl.tabId" [request-parameters]="$ctrl.getServiceAdditionalParams(service)" method="GET"></prm-service-button></div></div></div><md-divider class="inner-divider"></md-divider></div><div ng-if="$ctrl.isLoggedIn() && (!$ctrl.services.serviceinfo || $ctrl.services.serviceinfo.length == 0)"><span translate="nui.request.norequests"></span></div><prm-alert-bar ng-if="!$ctrl.isLoggedIn() && !$ctrl.isLoggedInIDP()" [alert-object]="$ctrl.reqAlert" class="margin-bottom-small display-block"></prm-alert-bar><prm-request-services-after parent-ctrl="$ctrl"></prm-request-services-after>');
$templateCache.put('components/search/fullView/getit/opac/request/request.html','<div class="content-header"><h3 class="light-text md-title zero-margin-top">{{$ctrl.requestHeader | translate}}</h3></div><div layout="row" class="form-focus service-form" layout-margin><div class="service-form-loader" ng-if="requestFormLoader"><prm-spinner class="dark-on-light" ng-if="!$ctrl.services.serviceinfo"></prm-spinner></div><div ng-if="$ctrl.formReadonly && $ctrl.formReadonly.length>0" class="service-form-static-panel zero-margin" flex layout="column" layout-padding><form name="requestForm" (submit)="$ctrl.submit()" novalidate><div flex layout="row" layout-align="center center" style="padding-left: 1.5em"><div class="layout-full-width" layout="column" layout-align="start" layout-padding><div ng-repeat="field in $ctrl.formReadonly" class="md-input-container-dummy dummy-input-has-value" layout="column"><prm-form-field [field]="field" [data]="$ctrl.formData" form-name="requestForm"></prm-form-field></div></div></div><div ng-if="!$ctrl.displayForm" layout="row" layout-align="end" class="layout-full-width"><md-button class="button-with-icon button-confirm" type="submit"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="send" aria-label="{{$ctrl.submitLabel | translate}}"></prm-icon><span>{{$ctrl.submitLabel | translate}}</span></md-button></div></form></div><div ng-if="$ctrl.displayForm" class="service-form-dynamic-panel" flex layout="column" layout-padding><form name="requestForm" (submit)="requestForm.$valid && $ctrl.submit()" novalidate><div flex layout="row" layout-align="center center" style="padding-left: 1.5em"><div layout="column" layout-align="start"><prm-form-field ng-repeat="field in $ctrl.form" ng-if="field.uiType !== \'hidden\'" [field]="field" [data]="$ctrl.formData" [form]="::this.requestForm" class="service-form-item"></prm-form-field></div></div><div layout="row" layout-align="end" class="layout-full-width"><md-button class="button-with-icon button-secondary" (click)="$ctrl.resetForm()"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="reload" aria-label="{{\'nui.aria.account.requests.expandcollapse\' | translate:\'{title: $ctrl.item.title}\'}}"></prm-icon><span translate="nui.reset"></span></md-button><span flex></span><md-button class="button-with-icon button-confirm" type="submit"><prm-icon icon-type="svg" svg-icon-set="primo-ui" icon-definition="send" aria-label="{{$ctrl.submitLabel | translate}}"></prm-icon><span>{{$ctrl.submitLabel | translate}}</span></md-button></div></form></div></div><prm-request-after parent-ctrl="$ctrl"></prm-request-after>');
$templateCache.put('components/search/fullView/getit/opac/locations/location/location.html','<div class="neutralized-button layout-full-width layout-display-flex" (click)="$ctrl.onClick()" aria-label="{{$ctrl.location.libraryCode | translate}} {{$ctrl.location.subLocation | translate}},\r\n                        {{\'fulldisplay.availabilty.\' + $ctrl.location.availabilityStatus | translate}},\r\n                         {{$ctrl.getButtonActionLabel() | translate}}" md-ink-ripple="red"><div layout="row" flex="100" layout-align="space-between center"><div class="md-list-item-text" layout="row" layout-wrap flex><div flex flex-xs="100"><h3 translate="{{$ctrl.location.libraryCode}}"></h3><h5 ng-if="$ctrl.location.relatedTitle != null && $ctrl.location.relatedTitle !== \'\'" class="related-title"><prm-icon icon-type="{{$ctrl.opacLocations.relatedArrow.type}}" svg-icon-set="{{$ctrl.opacLocations.relatedArrow.iconSet}}" icon-definition="{{$ctrl.opacLocations.relatedArrow.icon}}" aria-label="" class="related-title-icon h-flipped"></prm-icon><span translate="nui.location.related_title" class="related-title-label"></span> <span class="related-title-name">{{$ctrl.location.relatedTitle}}</span></h5><p><span class="availability-status {{$ctrl.location.availabilityStatus}}" translate="fulldisplay.availabilty.{{$ctrl.location.availabilityStatus}}"></span> <span ng-if="$ctrl.location.subLocation">,</span> <span ng-if="$ctrl.location.subLocation" translate-default="{{$ctrl.location.subLocation}}" translate="{{$ctrl.location.subLocation}}"></span> <span ng-if="$ctrl.location.callNumber">;</span> <span ng-if="$ctrl.location.callNumber">{{$ctrl.location.callNumber}}</span></p></div><div layout-align="end center" layout="row" layout-wrap flex-xs="100" flex-sm="30" flex class="list-item-actions"><prm-stack-map ng-if="$ctrl.isSuprima() && $ctrl.location.stackMapUrl" [map-url]="$ctrl.location.stackMapUrl"></prm-stack-map></div></div><prm-icon ng-if="!$ctrl.isOvp()" class="padding-right-small" icon-type="{{$ctrl.opacLocations.externalLinkIcon.type}}" svg-icon-set="{{$ctrl.opacLocations.externalLinkIcon.iconSet}}" icon-definition="{{$ctrl.opacLocations.externalLinkIcon.icon}}" aria-label="{{\'nui.aria.account.links.open\' | translate}}"></prm-icon><prm-icon ng-if="$ctrl.isOvp()" class="padding-right-small" prm-aria-label="{{\'nui.aria.locations.expand\' | translate:\r\n                        \'{name: \\\'\'+$ctrl.location.libraryCode+ \' \' +$ctrl.location.subLocation+\'\\\'}\'}}" icon-type="{{$ctrl.opacLocations.rightArrow.type}}" svg-icon-set="{{$ctrl.opacLocations.rightArrow.iconSet}}" icon-definition="{{$ctrl.opacLocations.rightArrow.icon}}"></prm-icon></div></div><prm-location-after parent-ctrl="$ctrl"></prm-location-after>');
$templateCache.put('components/search/fullView/getit/opac/locations/stackMap/stack-map.html','<md-button ng-click="$event.stopPropagation();" href="{{$ctrl.mapUrl}}" class="zero-margin button-with-icon button-link" target="_blank"><prm-icon icon-type="{{$ctrl.opacLocations.locate.type}}" svg-icon-set="{{$ctrl.opacLocations.locate.iconSet}}" icon-definition="{{$ctrl.opacLocations.locate.icon}}" aria-label="{{\'nui.aria.locationItems.locate\' | translate}}"></prm-icon><span translate="nui.locations.locate"></span></md-button><prm-stack-map-after parent-ctrl="$ctrl"></prm-stack-map-after>');}]);
//# sourceMappingURL=bundle.js.map
